require=(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({"AudioMgr":[function(require,module,exports){
"use strict";
cc._RF.push(module, 'f9da7zP5+VFlLLli2GUyvCm', 'AudioMgr');
// Script/Common/Managers/AudioMgr.js

'use strict';

//音效管理器
// music 是音乐； sound是音效
var audioMgr = cc.Class({
    ctor: function ctor() {
        this._musicVolume = 1; //音乐音量大小
        this._soundVolume = 1; //音效音量大小
        //this._dict_audioConfig = {'music':true,'sound':true};                  //音乐音效的配置
        this._dict_audioConfig = null; //音乐音效的配置
        this._bgMusicID = -1; //背景音乐
        this._bgMusicName = null; //背景音乐
        this._isReloadPlatform = false; //是否已经加载大厅音效
        this._isReloadGame = false; //是否已经加载游戏房间音效
        this._reloadPlatformURL = ''; //使用音频格式的加载路劲
        this._reloadGameRoomURL = ''; //使用音频格式的加载路劲
        this._dict_audioUrl = {}; //存放所有音效的名字对应路径
        //环境检测
        this._environmentConfirm();
    },

    //播放音乐
    playMusic: function playMusic(audioID) {
        if (!audioID) audioID = 19;
        var musicName = this.getAudioName(audioID);
        if (this._musicVolume <= 0) {
            //暂停音乐
            if (this._bgMusicName) {
                cc.audioEngine.stop(this._bgMusicID);
                this._bgMusicName = null;
            }
        } else {
            //开启音乐
            if (musicName) {
                if (this._bgMusicName !== musicName) {
                    //换音乐
                    this._bgMusicName = musicName;
                    var url = this.getAudio(this._bgMusicName);
                    //console.log('播放背景音乐'+url)
                    this._bgMusicID = cc.audioEngine.play(url, true);
                    //this._bgMusicID = cc.audioEngine.playMusic(url, true);
                }
            } else {
                    //if(this._bgMusicName) {
                    //    //播放上次的音乐
                    //    cc.audioEngine.resume(this._bgMusicID);
                    //}
                }
        }
    },

    //播放音效
    playSound: function playSound(audioID) {
        if (this._soundVolume <= 0) return;
        var url = this.getAudio(this.getAudioName(audioID));
        //console.log('播放音效'+url);
        return cc.audioEngine.play(url, false);
        //return cc.audioEngine.playEffect(url, false);
    },

    //调整音乐大小
    setMusicVolume: function setMusicVolume(num) {
        this._musicVolume = num;
        this.playMusic();
    },

    //调整音效大小
    setSoundVolume: function setSoundVolume(num) {
        this._soundVolume = num;
    },

    //停止某个音效
    stopAudio: function stopAudio(audioID) {
        cc.audioEngine.stop(audioID);
    },

    //停止音乐
    stopMusic: function stopMusic() {
        if (this._bgMusicName) {
            cc.audioEngine.stop(this._bgMusicID);
            this._bgMusicName = null;
        }
    },

    //获取音频文件
    getAudio: function getAudio(audioName) {
        if (!this._dict_audioUrl[audioName]) return cc.url.raw(G_TOOL.formatStr(G_RES_URL.audioUrl, audioName));
        return this._dict_audioUrl[audioName];
    },

    //获取音乐是否正在播放
    getIsPlayMusic: function getIsPlayMusic() {
        if (this._bgMusicName && this._musicVolume > 0) return true;
        return false;
    },

    //=====================================
    //获取音效配置
    getAudioConfig: function getAudioConfig() {
        return this._dict_audioConfig;
    },
    //设置音效配置
    setAudioConfig: function setAudioConfig(dict) {
        this.setMusicVolume(dict.music ? 1 : 0);
        this.setSoundVolume(dict.sound ? 1 : 0);
        this._dict_audioConfig = dict;
    },
    //保存音乐配置
    saveMusicConfig: function saveMusicConfig(isPlay) {
        this.setMusicVolume(isPlay ? 1 : 0);
        this._dict_audioConfig.music = isPlay;
    },
    //保存音效配置
    saveSoundConfig: function saveSoundConfig(isPlay) {
        this.setSoundVolume(isPlay ? 1 : 0);
        this._dict_audioConfig.sound = isPlay;
    },
    //=====================================
    //获取某个音频的名字
    getAudioName: function getAudioName(audioID) {
        var tableObj = GG.tableMgr.getTable(G_RES_URL.dict_tablesName.audioName);
        var data = tableObj.getDataByID(audioID);
        if (data) return data.audioName;
        return null;
    },

    //预加载音频资源
    //reloadAudio : function (callBack) {
    //    var self = this;
    //    cc.loader.loadResDir('Sounds', function (err, audioList) {
    //        var isOk = false;
    //        if(!err){
    //            var content = audioList[0];
    //            var index = content.lastIndexOf('/');
    //            self._basePlatformUrl = content.substring(0, index+1)+self._audioFormatStr;
    //            isOk = true;
    //        }else {
    //            //加载音效发生问题
    //        }
    //        if(callBack){
    //            callBack(isOk);
    //            callBack = null;
    //        }
    //    })
    //},

    //加载大厅音效
    reloadPlatformAudio: function reloadPlatformAudio(callBack) {
        var self = this;
        cc.loader.loadResDir(this._reloadPlatformURL, function (err, audioList) {
            var isOk = false;
            if (!err) {
                var audioUrl, urlEnd, audioName;
                for (var i = 0; i < audioList.length; i++) {
                    audioUrl = audioList[i];
                    urlEnd = audioUrl.substring(audioUrl.lastIndexOf('/') + 1, audioUrl.length);
                    audioName = urlEnd.split('.')[0];
                    self._dict_audioUrl[audioName] = audioUrl;
                }
                self._isReloadPlatform = true;
            } else {
                //加载音效发生问题
            }
            if (callBack) {
                callBack(isOk);
                callBack = null;
            }
        });
    },

    //加载游戏房间内的音效
    reloadGameAudio: function reloadGameAudio(callBack) {
        var self = this;
        cc.loader.loadResDir(this._reloadGameRoomURL, function (err, audioList) {
            if (!err) {
                //没有加载错误
                var audioUrl, urlEnd, audioName;
                for (var i = 0; i < audioList.length; i++) {
                    audioUrl = audioList[i];
                    urlEnd = audioUrl.substring(audioUrl.lastIndexOf('/') + 1, audioUrl.length);
                    audioName = urlEnd.split('.')[0];
                    self._dict_audioUrl[audioName] = audioUrl;
                }
                self._isReloadGame = true;
            }
            if (callBack) {
                callBack();
                callBack = null;
            }
        });
    },
    getIsReloadPlatform: function getIsReloadPlatform() {
        return this._isReloadPlatform;
    },
    getIsReloadGame: function getIsReloadGame() {
        return this._isReloadGame;
    },

    //平台鉴定
    _environmentConfirm: function _environmentConfirm() {
        //switch (cc.sys.os){
        //    case cc.sys.OS_ANDROID:
        //        //android手机用ogg
        //        //this._reloadPlatformURL = 'Sounds/ogg_platform';
        //        //this._reloadGameRoomURL = 'Sounds/ogg_gameRoom';
        //        this._reloadPlatformURL = 'Sounds/mp3_platform';
        //        this._reloadGameRoomURL = 'Sounds/mp3_gameRoom';
        //        break
        //    case cc.sys.OS_IOS:
        //        //ios手机用mp3
        //        this._reloadPlatformURL = 'Sounds/mp3_platform';
        //        this._reloadGameRoomURL = 'Sounds/mp3_gameRoom';
        //        break
        //    default:
        //        break
        //}
        if (cc.sys.isNative) {
            this._reloadPlatformURL = 'Sounds/mp3_platform';
            this._reloadGameRoomURL = 'Sounds/mp3_gameRoom';
        } else {
            var audio = new Audio();
            if (audio.canPlayType("audio/mp3")) {
                this._reloadPlatformURL = 'Sounds/mp3_platform';
                this._reloadGameRoomURL = 'Sounds/mp3_gameRoom';
            } else if (audio.canPlayType("audio/ogg")) {
                this._reloadPlatformURL = 'Sounds/ogg_platform';
                this._reloadGameRoomURL = 'Sounds/ogg_gameRoom';
            }
        }
    }

});

module.exports = audioMgr;

cc._RF.pop();
},{}],"AutoDealing":[function(require,module,exports){
"use strict";
cc._RF.push(module, '2ff73PoWa1GZ53LXCiuQ9TW', 'AutoDealing');
// Script/Objects/AutoDealing.js

"use strict";

//简单基类，实现按钮的注册与释放

cc.Class({
    extends: cc.Component,
    _list_registerBtn: null, //注册事件的按钮集合
    properties: {},

    // use this for initialization
    onLoad: function onLoad() {},

    //注册按钮点击效果
    registerButton: function registerButton(node, callBack, target, userData, isNoScale) {
        if (!node) return;
        if (!this._list_registerBtn) this._list_registerBtn = [];
        node._isTouchEnabledEx = true;
        this._list_registerBtn.push([node, callBack, target]);
        node.on(cc.Node.EventType.TOUCH_START, function (event) {
            //if(event.target._isTouchEnabledEx) event.target.scale = G_Config_classic.scale_buttonTouch;
            if (event.target._isTouchEnabledEx) {
                if (!isNoScale) {
                    if (!event.target.lastScale) event.target.lastScale = event.target.scale;
                    event.target.scale = event.target.lastScale * 0.9;
                }
                GG.audioMgr.playSound(17);
            }
        }, target);
        node.on(cc.Node.EventType.TOUCH_END, function (event) {
            if (event.target.lastScale) event.target.scale = event.target.lastScale;
            if (event.target._isTouchEnabledEx) callBack.call(target, event, userData);
        }, target);
        node.on(cc.Node.EventType.TOUCH_CANCEL, function (event) {
            if (event.target.lastScale) event.target.scale = event.target.lastScale;
        }, target);
    },
    //设置按钮是否可用
    setBtnEnable: function setBtnEnable(node, isEnable, isNoGray) {
        if (isEnable) {
            node.opacity = 255;
        } else {
            if (!isNoGray) node.opacity = 255 * G_Config_common.btnGrayValue;
        }
        var btn = node.getComponent(cc.Button);
        if (btn) btn.enabled = isEnable;
        node._isTouchEnabledEx = isEnable;
    },

    //获取是否可用
    getIsBtnEnable: function getIsBtnEnable(node) {
        return node._isTouchEnabledEx;
    },

    //释放事件,这里注册的才能在这里释放
    releaseButtonEvent: function releaseButtonEvent() {
        if (!this._list_registerBtn) return;
        var parm1, parm2, parm3;
        for (var i = 0; i < this._list_registerBtn.length; i++) {
            parm1 = this._list_registerBtn[i][0];
            parm2 = this._list_registerBtn[i][1];
            parm3 = this._list_registerBtn[i][2];
            parm1.off(cc.Node.EventType.TOUCH_START, parm2, parm3);
            parm1.off(cc.Node.EventType.TOUCH_END, parm2, parm3);
            parm1.off(cc.Node.EventType.TOUCH_CANCEL, parm2, parm3);
        }
        this._list_registerBtn = null;
    },

    onDestroy: function onDestroy() {
        this.releaseButtonEvent();
    }

});

cc._RF.pop();
},{}],"BaseDialog":[function(require,module,exports){
"use strict";
cc._RF.push(module, 'f6109FzSJ9AfKnDL7rPu4MO', 'BaseDialog');
// Script/Views/BaseDialog.js

'use strict';

//弹窗列表界面的父类


cc.Class({
    extends: require('BaseUI'),

    properties: {
        _parentComp: null, //容器的脚本

        node_closeBtn: {
            default: null,
            type: cc.Node,
            displayName: '关闭按钮'
        },
        prefab_leftButton: {
            default: null,
            type: cc.Prefab,
            displayName: '左边按钮预制体'
        },
        comp_leftBtnContainer: {
            default: null,
            type: require('Obj_dealScroll'),
            displayName: '左边按钮容器'
        },
        prefab_item: {
            default: null,
            type: cc.Prefab,
            displayName: '数据条目'
        },
        comp_itemContainer: {
            default: null,
            type: require('Obj_dealScroll'),
            displayName: '条目容器'
        }
    },

    // use this for initialization
    onLoad: function onLoad() {
        this._registerCloseEvent();
    },

    bindContainer: function bindContainer(comp) {
        this._parentComp = comp;
    },

    showLayer: function showLayer() {
        this._super();

        if (this._parentComp && this._parentComp.setGrayLayerIsShow) this._parentComp.setGrayLayerIsShow(true);
    },

    hideLayer: function hideLayer() {
        this._super();

        if (this._parentComp && this._parentComp.setGrayLayerIsShow) this._parentComp.setGrayLayerIsShow(false);
    },

    setData: function setData() {},

    _registerCloseEvent: function _registerCloseEvent() {
        if (this.node_closeBtn) this.registerButton(this.node_closeBtn, this._onClick_close, this);
    },

    _onClick_close: function _onClick_close(event) {
        this.hideLayer();
    }

});

cc._RF.pop();
},{"BaseUI":"BaseUI","Obj_dealScroll":"Obj_dealScroll"}],"BaseManager":[function(require,module,exports){
"use strict";
cc._RF.push(module, '81a4a4XtK1Om55doheYVRiA', 'BaseManager');
// Script/Views/BaseManager.js

"use strict";

//管理器的父类

cc.Class({
    extends: cc.Component,

    properties: {
        _isADLimit: null },

    // use this for initialization
    onLoad: function onLoad() {
        GG.webHandler.adaptSceneSize();
        GG.curMgr = this;
        this.addLongListen();
        GG.setIsLoading(false);

        this._isADLimit = null;
    },

    //在游戏暂停的时候，还需要持续更新进房信息
    updateEnterHomeData: function updateEnterHomeData(recvData) {
        if (!this._enterHomeData) return;
        if (this._enterHomeData.match.beginTimeNext != recvData.match.beginTimeNext) {
            //进入到下一局比赛
            this._isPauseOverMatch = true;
        }
        this._enterHomeData.seats = recvData.seats;
        this._enterHomeData.match.dealer = recvData.match.dealer;
        this._enterHomeData.match.beginTimeNext = recvData.match.beginTimeNext;
        this._enterHomeData.match.settleTime = recvData.match.settleTime;
        if (recvData.poker) this._enterHomeData.poker = recvData.poker;
    },
    //使用最新的进房信息刷新页面
    refreshHome: function refreshHome() {
        if (G_Config_common.isLocal) return;
        if (this.net_setHomeData && this._enterHomeData) this.net_setHomeData(this._enterHomeData);
    },
    //当暂停的时候触发该函数
    whenPauseGame: function whenPauseGame() {
        this._isPauseOverMatch = false;
    },
    //当恢复游戏的时候触发该函数
    whenResumeGame: function whenResumeGame() {
        if (this.comp_uiLayer) {
            this.comp_uiLayer.closeAllUI();
        }
    },
    //设置结算信息的数据
    setBettingEndInfo: function setBettingEndInfo(recvData) {},

    //每局开局，效验玩家自己的数据是否正常
    checkMyselfInfo: function checkMyselfInfo(info) {
        if (!info || info.length < 1) {
            GG.tipsMgr.showConfirmTip_ONE(G_CHINESE.noMyself, function () {
                GG.exitGame();
            }.bind(this));
            return false;
        } else return true;
    },

    setAdLimit: function setAdLimit(isLimit) {
        this._isADLimit = isLimit;
    },

    getAdIsLimit: function getAdIsLimit() {
        return this._isADLimit;
    },

    //=========================================

    //添加长监听
    addLongListen: function addLongListen() {
        //异地登陆
        GG.socketMgr.registerLong(NetType.r_passiveOut, this.net_passiveOut.bind(this));
        //单独的tip
        GG.socketMgr.registerLong(NetType.r_tips, this.net_tipData.bind(this));
        //跑马灯
        GG.socketMgr.registerLong(NetType.r_getAnnouncement, this.net_getAnnouncement.bind(this));
        //游戲长时间没有操作
        GG.socketMgr.registerLong(NetType.r_idleTimeOut, this.net_idleTimeOut.bind(this));
    },
    //tip 单独发送过来的事件
    net_tipData: function net_tipData(recvData) {
        //未登陆，请登陆
        if (recvData.code == G_TYPE.serverCodeType.needLogin) {
            GG.tipsMgr.showConfirmTip_ONE(recvData.tip, function () {
                GG.loginSocket(function () {
                    if (GG.socketMgr.getIsConnected()) {
                        GG.exitHome();
                    } else {
                        GG.exitGame();
                    }
                });
            }.bind(this));
        }
    },
    //异地登陆
    net_passiveOut: function net_passiveOut(recvData) {
        GG.socketMgr.setTimeOutLimit(true);
        GG.tipsMgr.showConfirmTip_ONE(recvData.tip.tip, function () {
            GG.exitGame();
        }.bind(this));
    },
    //有公告
    net_getAnnouncement: function net_getAnnouncement(recvData) {
        var tip = recvData.tip;
        if (tip.code != G_TYPE.serverCodeType.success) {
            // console.log(tip.tip);
            return;
        }

        //recvData.announcementType
        //recvData.title
        //recvData.content
        if (this._isADLimit) return;
        GG.tipsMgr.addNotice(recvData.content);
    },
    //百人——游戏中长时间没有做操作
    net_idleTimeOut: function net_idleTimeOut(recvData) {

        GG.tipsMgr.showConfirmTip_ONE(recvData.tip.tip, function () {
            GG.exitHome();
        }.bind(this));
    },

    onDestroy: function onDestroy() {
        GG.socketMgr.cancelAllLongListen();
    }

});

cc._RF.pop();
},{}],"BaseUI":[function(require,module,exports){
"use strict";
cc._RF.push(module, 'cd62eHkgCZHfo5RnyU+f4P8', 'BaseUI');
// Script/Views/BaseUI.js

'use strict';

//所有显示的UI的父类

cc.Class({
    extends: require('AutoDealing'),

    properties: {
        _isRelease: null, //是否在关闭的时候释放
        _uiName: null },

    // use this for initialization
    onLoad: function onLoad() {},

    showLayer: function showLayer() {
        this.node.active = true;
        this.addTouchLimit();
    },
    hideLayer: function hideLayer() {
        this.cancelTouchLimit();
        if (this._isRelease) this.node.destroy();else this.node.active = false;
    },

    addTouchLimit: function addTouchLimit() {
        var comp = this._getTouchLimitComp();
        if (comp) comp.addTouchLimit();
    },
    cancelTouchLimit: function cancelTouchLimit() {
        var comp = this._getTouchLimitComp();
        if (comp) comp.cancelTouchLimit();
    },
    _getTouchLimitComp: function _getTouchLimitComp() {
        if (!this._touchLimitComp) {
            this._touchLimitComp = this.node.parent.getComponent('Obj_touchLimit');
        }
        return this._touchLimitComp;
    },

    setIsRelease: function setIsRelease(isRelease) {
        this._isRelease = isRelease;
    },
    setUIName: function setUIName(uiName) {
        this._uiName = uiName;
    },
    getUIName: function getUIName() {
        return this._uiName;
    }

});

cc._RF.pop();
},{"AutoDealing":"AutoDealing"}],"Bull100_Manager":[function(require,module,exports){
"use strict";
cc._RF.push(module, 'fb19fRj6b9GDZMv4BilqtWr', 'Bull100_Manager');
// Script/Views/Scene_Bull100/Bull100_Manager.js

'use strict';

//百人大战

var _indexToItemStr = {
    0: 'SPADE_W', //黑桃赢
    1: 'SPADE_L',
    2: 'HEART_W', //方片赢
    3: 'HEART_L',
    4: 'CLUB_W', //梅花赢
    5: 'CLUB_L',
    6: 'DIAMOND_W', //红桃赢
    7: 'DIAMOND_L'
};
var _itemToIndex = {
    'SPADE_W': '0', //黑桃赢
    'SPADE_L': '1',
    'HEART_W': '2', //方片赢
    'HEART_L': '3',
    'CLUB_W': '4', //梅花赢
    'CLUB_L': '5',
    'DIAMOND_W': '6', //红桃赢
    'DIAMOND_L': '7'
};

var initData = {
    myselfData: null, //玩家自己的数据
    othersData: null, //其他玩家的数据
    dealerData: null, //庄家的数据
    homeData: null };

cc.Class({
    extends: require('BaseManager'),

    properties: {
        _gameState: null, //游戏进程
        _idleTip: null, //提示休息中的tip
        _grabTip: null, //提示投注中的tip
        _isMyDealer: null, //庄家是否是自己

        _enterHomeData: null, //入房信息
        _homeID: null, //房间ID
        _matchID: null, //赛事ID
        _nextStartTime: null, //下局赛事开始时间点
        _curEndGrabTime: null, //当前赛事结束时间点
        _playerID: null, //玩家自己的ID
        _maxBettingTimes: null, //最大投注次数
        _maxBettingGold: null, //最大投注金币
        _chipValueList: null, //筹码选项值
        _homeName: null, //房间名字
        _matchEndData: null, //结算信息
        _dealerNetType: null, //当前请求的是上庄还是续庄还是请求列表的类型
        _minDealerGold: null, //最小上庄金额
        _isPauseOverMatch: null, //暂停的时候是否进入新的一局
        _isDealerSign: null, //是否是庄家
        _dict_idleBetting: null, //吃瓜群众的投注记录

        comp_topEffect: {
            default: null,
            type: require('Bull100_topEffect'),
            displayName: '动画容器'
        },
        comp_pokerLayer: {
            default: null,
            type: require('Bull100_pokerContainer'),
            displayName: '卡牌容器'
        },
        comp_playersLayer: {
            default: null,
            type: require('Bull100_playerContainer'),
            displayName: '玩家容器'
        },
        comp_tablesLayer: {
            default: null,
            type: require('Bull100_tableContainer'),
            displayName: '桌子容器'
        },
        comp_goldsLayer: {
            default: null,
            type: require('Obj_goldsContainer'),
            displayName: '金币容器'
        },
        comp_btnsLayer: {
            default: null,
            type: require('Bull100_btnContainer'),
            displayName: '底部按钮容器'
        },
        comp_uiLayer: {
            default: null,
            type: require('Obj_uiContainer'),
            displayName: '窗口界面容器'
        },
        comp_pokerResultLayer: {
            default: null,
            type: require('Bull100_pokerResultContainer'),
            displayName: '卡牌结果显示容器'
        },
        label_bettingTimes: {
            default: null,
            type: cc.Label,
            displayName: '投注次数'
        },

        node_diyTip: {
            default: null,
            type: cc.Node,
            displayName: 'tip'
        }
    },

    // use this for initialization
    onLoad: function onLoad() {
        GG.bull100Mgr = this;
        this._super();
        this._isDealerSign = false;

        this._bettingTimesStr = G_CHINESE.limitBetting;
        this._isPauseOverMatch = true;
    },

    //本地测试时候使用的数据
    _initLocalData: function _initLocalData() {
        if (G_Config_common.isLocal) {
            var chip = [100, 500, 1000, 2000, 5000];
            var initData = {
                myselfData: {
                    chooseDict: chip,
                    roomName: null
                },
                othersData: [{
                    player: {
                        coin: 7568,
                        icon: null,
                        nickname: "black1",
                        playerId: 5,
                        usableBalance: 7568
                    },
                    seatIndex: 1
                }, {
                    player: {
                        coin: 7568,
                        icon: null,
                        nickname: "black",
                        playerId: 5,
                        usableBalance: 7568
                    },
                    seatIndex: 2
                }, {
                    player: {
                        coin: 888888,
                        icon: null,
                        nickname: "solider",
                        playerId: 6,
                        usableBalance: 888888
                    },
                    seatIndex: 3
                }, {
                    player: {
                        coin: 888888,
                        icon: null,
                        nickname: "jin",
                        playerId: 7,
                        usableBalance: 888888
                    },
                    seatIndex: 4
                }, {
                    player: {
                        coin: 888888,
                        icon: null,
                        nickname: "jin1",
                        playerId: 8,
                        usableBalance: 888888
                    },
                    seatIndex: 5
                }, {
                    player: {
                        coin: 888888,
                        icon: null,
                        nickname: "jin2",
                        playerId: 9,
                        usableBalance: 888888
                    },
                    seatIndex: 6
                }, {
                    player: {
                        coin: 888888,
                        icon: null,
                        nickname: "jin3",
                        playerId: 9,
                        usableBalance: 888888
                    },
                    seatIndex: 7
                }],
                dealerData: {
                    coin: 297300,
                    icon: null,
                    nickname: "系统大牛",
                    playerId: 7,
                    usableBalance: 74325
                },
                homeData: {
                    roomId: 1,
                    userId: 6,
                    betTimes: 100,
                    matchId: 1,
                    //beginTimeNext : 1487557651083,
                    beginTimeNext: 1487559489225,
                    //settleTime : 1487557651083,
                    settleTime: 1487559474225,
                    betChip: chip,
                    minDealerGold: 100000
                }
            };
            this._initInHomeData(initData);

            //是否开局判定
            var serverTime = 1487559484012;
            if (this._nextStartTime > serverTime && serverTime >= this._curEndGrabTime) {
                //未开局
                var secs = this._getOffSeconds(serverTime, this._nextStartTime);
                this.cmd_wait(secs, this.cmd_startReady.bind(this));
            } else {
                //已经开局
                this._givePokers(true);
            }
        } else {}
    },
    //初始化房间必须要有的数据
    _initInHomeData: function _initInHomeData(initData) {
        //房间配置的数据
        if (initData.homeData) {
            var data = initData.homeData;
            if (!this._homeID) this._homeID = data.roomId;
            this._matchID = data.matchId;
            this._nextStartTime = data.beginTimeNext;
            this._curEndGrabTime = data.settleTime;
            if (data.minDealerGold) this._minDealerGold = data.minDealerGold;
            if (data.betTimes) this._maxBettingTimes = data.betTimes;
            if (data.betChip) {
                this._chipValueList = data.betChip;
                this._maxBettingGold = this._maxBettingTimes * data.betChip[data.betChip.length - 1];
                //设置初始化数据表现
                this.comp_btnsLayer.initChipBtn(data.betChip);
            }
            if (data.userId) {
                GG.getPlayer().setPlayerID(data.userId);
                this._playerID = GG.getPlayer().getPlayerID();
            }
        }
        //玩家自己的数据
        //其他玩家的数据
        //庄家的数据
        this.comp_playersLayer.setStartInfo(initData.othersData, initData.myselfData, initData.dealerData);

        //判定庄家
        if (initData.dealerData) {
            if (initData.dealerData.playerId == GG.getPlayerID()) {
                //自己是庄家
                this.setBottomIsShow(false);
                this._isDealerSign = true;
            } else {
                this.setBottomIsShow(true);
                //清除庄字特效
                this.comp_playersLayer.getMyselfEffectComp().clearDealerWordAni();
            }
        }
        //初始投注次数
        this.setBettingTimes(this._maxBettingTimes);
    },

    start: function start() {
        GG.tipsMgr.setTextTip(this.node_diyTip.getComponent('Obj_txtTip'));
        this.resetShow();

        if (G_Config_common.isLocal) {
            this._initLocalData();
        } else {
            this.addLongListenOnStart();

            var homeData = GG.getPlayer().getInHomeData();
            if (homeData) {
                if (homeData.net_resetHomeData) {
                    this._dealInHomeNetData(homeData.net_inHomeData);
                    this.updateEnterHomeData(homeData.net_resetHomeData);
                    this.refreshHome();
                } else {
                    this.net_setHomeData(homeData.net_inHomeData);
                }
            }
        }
    },

    testExitBtn: function testExitBtn() {
        //this.comp_uiLayer.showPlayerList();
        //var time1 = new Date(1487835810156);
        //console.log('时:'+time1.getHours()+'分:'+time1.getMinutes()+'秒:'+time1.getSeconds())
        //var time2 = new Date(1487835795156);
        //console.log('时:'+time2.getHours()+'分:'+time2.getMinutes()+'秒:'+time2.getSeconds())
        //this._givePokers(true);
        //GG.tipsMgr.addNotice('好好好好好好好好好好好好好好好好好好好好');
        return true;
        //
        //var time1 = new Date(1487596437912);
        //console.log('时:'+time1.getHours()+'分:'+time1.getMinutes()+'秒:'+time1.getSeconds())
        //var time2 = new Date(1487596422912);
        //console.log('时:'+time2.getHours()+'分:'+time2.getMinutes()+'秒:'+time2.getSeconds())
    },

    //开启休息时间的时候的清理
    _clearByWait: function _clearByWait() {
        this.getMyselfComp().clearBettingGold();
    },

    //游戏流程===============================================

    //执行游戏休息
    cmd_wait: function cmd_wait(retainTime, callFunc) {
        this._gameState = G_TYPE.bull100State.wait;
        if (this._grabTip && this._grabTip.getIsShow()) {
            this._grabTip.forceEnd();
        }
        this.comp_tablesLayer.setTableTouchEnable(false);
        var time1 = new Date(GG.socketMgr.getServerTime());
        // console.log('当前：时:'+time1.getHours()+'分:'+time1.getMinutes()+'秒:'+time1.getSeconds())
        var time2 = new Date(this._nextStartTime);
        // console.log('下次开局：时:'+time2.getHours()+'分:'+time2.getMinutes()+'秒:'+time2.getSeconds())
        if (this._idleTip && this._idleTip.getIsShow()) {
            //已经存在该tip
            this._idleTip.forceChangeCountDown(retainTime);
        } else {
            var dataObj = {
                tipIndex: 19,
                isCountDown: true,
                showPos: this.node_diyTip.position
            };
            dataObj.retainTime = retainTime;
            if (callFunc) dataObj.callBack = callFunc;
            this._idleTip = GG.tipsMgr.showOnlyOne(dataObj);
            //this._idleTip.setIsShow(true);
        }

        this._clearByWait();
    },

    //投注前的动画
    cmd_startReady: function cmd_startReady() {
        this._gameState = G_TYPE.bull100State.startReady;
        if (this._idleTip && this._idleTip.getIsShow()) {
            this._idleTip.forceEnd();
        }
        //庄家庄字特效显示
        this.comp_playersLayer.getDealerWordEffectComp().playDealerWordAni();

        this.comp_topEffect.playStartGameAni(function () {
            //this.comp_topEffect.playStartBettingAni(function () {
            //
            //}.bind(this));
            var secs;
            if (G_Config_common.isLocal) {
                secs = 10;
            } else {
                secs = this._getOffSeconds(GG.socketMgr.getServerTime(), this._curEndGrabTime);
            }
            //if(this.getMyselfComp().getIsDealer()) this.cmd_startBetting(secs);
            //else{
            //    if(!G_Config_common.isLocal) secs = this._getOffSeconds(GG.socketMgr.getServerTime(), this._curEndGrabTime);
            //    this.cmd_startBetting(secs);
            //}
            this.cmd_startBetting(secs);
        }.bind(this));

        if (this.getMyselfComp().getIsDealer()) {
            //如果是庄家开始动画播放完就进入等待玩家投注倒计时
            this._givePokers(true);
        } else {
            this._givePokers(false);
        }
    },
    _givePokers: function _givePokers(isOverAni) {
        //发牌
        if (isOverAni) {
            var self = this;
            setTimeout(function () {
                var dealerPokerPos = self.comp_playersLayer.getDealerPokerPos();
                var pokerPosList = self.comp_tablesLayer.getTablePokerPos();
                pokerPosList.push(dealerPokerPos);
                self.comp_pokerLayer.giveCoverPokers(pokerPosList, function () {
                    //发牌结束
                }.bind(self), isOverAni);
            }, 100);
        } else {
            var dealerPokerPos = this.comp_playersLayer.getDealerPokerPos();
            var pokerPosList = this.comp_tablesLayer.getTablePokerPos();
            pokerPosList.push(dealerPokerPos);
            this.comp_pokerLayer.giveCoverPokers(pokerPosList, function () {
                //发牌结束
            }.bind(this), isOverAni);
        }
    },
    //开始投注
    cmd_startBetting: function cmd_startBetting(retainTime) {
        var isDealer = this.getMyselfComp().getIsDealer();
        if (!isDealer) {
            this.comp_tablesLayer.setTableTouchEnable(true);
            this.comp_btnsLayer.refreshCanChooseBtn();
            // this.refreshBtnChoose();
        }
        var secs = 0;
        var dataObj = {
            tipIndex: 18,
            showPos: this.node_diyTip.position,
            isCountDown: true,
            callBack: this.cmd_bettingEnd.bind(this)
        };
        dataObj.retainTime = retainTime;
        //是庄家倒计时显示内容替换
        if (G_Config_common.isLocal) dataObj.retainTime = 10;
        if (isDealer) dataObj.showStr = G_CHINESE.isDealerTip;
        this._grabTip = GG.tipsMgr.showOnlyOne(dataObj);
    },

    //投注结束
    cmd_bettingEnd: function cmd_bettingEnd(target) {
        this.comp_tablesLayer.setTableTouchEnable(false);
        this.comp_btnsLayer.setBtnGroupEnable(false);
        if (this._grabTip && this._grabTip.getIsShow()) {
            this._grabTip.forceEnd();
        }

        //显示休息中
        var secs;
        if (G_Config_common.isLocal) {
            this._winDict = { 0: 1, 2: 1, 5: 1, 7: 1 };
            var dataList = [];
            for (var i = 0; i < 5; i++) {
                var pokerInfo = [];
                for (var j = 0; j < 5; j++) {
                    pokerInfo.push({
                        pokerIndex: 13,
                        isOpen: false
                    });
                }
                dataList.push(pokerInfo);
            }
            var pokerValueList = [10, 2, 3, 4, 5];

            this._initMatchEndData();
            this._matchEndData.pokersInfoList = dataList;
            this._matchEndData.pokersResultList = pokerValueList;

            this._matchEndData.myselfInfo = {
                changeGold: 44444 * (G_TOOL.getRandomBool() ? 1 : -1),
                leaveGold: 999666
            };

            this._matchEndData.dealerInfo = {
                leaveGold: 8888888
            };

            this._matchEndData.othersInfo = {
                2: {
                    changeGold: 11111 * (G_TOOL.getRandomBool() ? 1 : -1),
                    leaveGold: 33333,
                    name: '黑人1'
                },
                3: {
                    changeGold: 44444 * (G_TOOL.getRandomBool() ? 1 : -1),
                    leaveGold: 999666,
                    name: '黑人2'
                }
            };

            secs = 10;
            this.cmd_wait(secs);
        }

        if (this._winDict) {
            //确认接收到了结算信息，才能继续
            this.comp_topEffect.playBettingEnd(function () {
                this._showWhenGotEndInfo();
            }.bind(this));
        }
    },
    //显示结算信息
    _showWhenGotEndInfo: function _showWhenGotEndInfo() {
        if (!this._matchEndData) {
            this._resetGameWhenEnd();
            return;
        }
        //设置卡牌信息
        if (this._matchEndData.pokersInfoList && this._matchEndData.pokersResultList) {
            this.comp_pokerLayer.setPokersData(this._matchEndData.pokersInfoList, this._matchEndData.pokersResultList);
        }
        //开牌
        //if(!this._winDict) this._winDict = {0:1,2:1,5:1,7:1};
        if (this._winDict) this.comp_pokerLayer.openPokers(this._winDict);
        var act1 = cc.delayTime(3);
        this.node.runAction(cc.sequence(act1, cc.callFunc(function () {
            //设置玩家信息,头像上的金币增减效果
            if (this._matchEndData.dealerInfo) this.comp_playersLayer.getDealerComp().setGoldValue(this._matchEndData.dealerInfo.leaveGold);
            if (this._matchEndData.myselfInfo) {
                var myselfComp = this.getMyselfComp();
                myselfComp.setGoldValue(this._matchEndData.myselfInfo.leaveGold);
                myselfComp.showGoldChange(this._matchEndData.myselfInfo.changeGold);
            }
            if (this._matchEndData.othersInfo) {
                var playerInfo, playerComp;
                for (var seatIndex in this._matchEndData.othersInfo) {
                    playerInfo = this._matchEndData.othersInfo[seatIndex];
                    if (playerInfo) {
                        playerComp = this.comp_playersLayer.getPlayerComp(seatIndex);
                        if (playerComp) {
                            //这个时候获取到的余额是总额
                            //playerComp.setGoldValue(playerInfo.leaveGold);
                            playerComp.showGoldChange(playerInfo.changeGold);
                        }
                    }
                }
            }
            this._openPokerEnd();
        }, this)));
    },
    //开牌后的处理
    _openPokerEnd: function _openPokerEnd(target) {
        //this._matchEndData = null;
        //移动金币
        this.comp_playersLayer.flyWinGold(this._winDict);
        //显示结果面板
        var act = cc.delayTime(2);
        this.node.runAction(cc.sequence(act, cc.callFunc(function () {
            var data = {};
            if (this._matchEndData) {
                if (this._matchEndData.myselfInfo) data.myChangeGold = this._matchEndData.myselfInfo.changeGold;
                if (this._matchEndData.othersInfo) data.othersInfo = this._matchEndData.othersInfo;
                this.comp_topEffect.showResultEffect(data, this._resetGameWhenEnd.bind(this));
            } else this._resetGameWhenEnd();
        }, this)));
    },
    //开牌显示完成后，进行新的倒计时
    _resetGameWhenEnd: function _resetGameWhenEnd() {
        this.changeIdleTip();
        if (G_Config_common.isLocal) {
            this.resetShow();
            this._initLocalData();
        }
    },

    //=======================================================

    //清理界面中的所有显示效果
    resetShow: function resetShow() {
        this.node.stopAllActions();
        //管理器中的存储数据
        this._isMyDealer = false;
        this._winDict = null;
        this._matchEndData = null;
        //玩家
        //this.comp_playersLayer.clearAll();
        //卡牌
        this.comp_pokerLayer.clearAll();
        //如果已经结束一局，则清理以下数据
        if (this._isPauseOverMatch) {
            //金币
            this.comp_goldsLayer.clearAll();
            //桌子
            this.comp_tablesLayer.initAllTables();
            //清理吃瓜群众的投注记录
            this._dict_idleBetting = null;
        } else this._isPauseOverMatch = true;
        //按钮
        this.comp_btnsLayer.setStartInfo();
        //动画特效
        this.comp_topEffect.clearAll();
        //tip提示
        //GG.tipsMgr.forceStopAllTips();
        //显示底部的按钮和头像
        // this.setBottomIsShow(true);
        //隐藏上庄列表
        var comp = this.comp_uiLayer.getUIComp(G_RES_URL.uiName.dealerList);
        if (comp) comp.hideLayer();
        //清理卡牌结果显示
        this.comp_pokerResultLayer.clearAll();
    },
    //根据用户操作投放金币
    //flyGold : function (goldList) {
    //    this.comp_goldsLayer.flyGolds(goldList);
    //},
    //玩家点击了某个桌子
    touchTable: function touchTable(tableIndex, posList) {
        if (this.getMyselfComp().getIsDealer()) {
            //是庄家
            return;
        }

        var dataObj = G_OBJ.data_bullBetting();
        dataObj.tableIndex = tableIndex;
        dataObj.posList = posList;
        dataObj.isMine = true;

        //记录玩家事件
        this.getMyselfComp().touchTable(dataObj, this._touchTableSuccess.bind(this));
    },
    //投注成功后的表现
    _touchTableSuccess: function _touchTableSuccess(bettingData) {
        var tableIndex = bettingData.tableIndex;
        var posList = bettingData.posList;
        //整理金币飞行需要的信息
        //var flyDataList = [];
        //for(var i = 0; i < posList.length; i ++){
        //    var dataObj = {
        //        startPos : bettingData.startPos,
        //        targetPos : posList[i],
        //        tableIndex : tableIndex,
        //        callFunc : null
        //    }
        //    flyDataList.push(dataObj);
        //}
        //显示桌子的投注成功信息
        this.comp_tablesLayer.setBettingSuccess(tableIndex, bettingData.goldValue, bettingData.isMine);
        //显示金币的飞行
        //this.flyGold(flyDataList);
        var flyDataList = G_OBJ.data_flyGold_playerToTable();
        flyDataList.tableIndex = tableIndex;
        flyDataList.goldNum = bettingData.posList.length;
        flyDataList.startPos = bettingData.startPos;
        this.comp_goldsLayer.playerToTable(flyDataList);
    },
    //金币结算效果
    goldRecover: function goldRecover(recoverDict, targetPos) {
        var goldNum;
        for (var tableIndex in recoverDict) {
            goldNum = recoverDict[tableIndex];

            var flyDataList = G_OBJ.data_flyGold_tableToPlayer();
            flyDataList.tableIndex = tableIndex;
            flyDataList.goldNum = goldNum;
            flyDataList.targetPos = targetPos;
            this.comp_goldsLayer.tableToPlayer(flyDataList);
        }
    },
    //刷新按钮的筹码显示结果
    refreshBtnChoose: function refreshBtnChoose() {
        // this.comp_btnsLayer.setBtnGroupEnable(true);
        // this.comp_btnsLayer.changeBet();//下注开始之后设置可押注的按钮
        // var choose = this.getMyselfComp().getChooseChip();
        // this.comp_btnsLayer.chooseMoney(choose);
    },
    //显示某张桌子的胜利, 在卡牌容器中，打开所有卡牌后调用
    showTableWin: function showTableWin(tableIndex, multiple) {
        this.comp_tablesLayer.showTableWin(tableIndex, multiple);
    },

    //=============================================

    //显示上庄列表窗口
    showUI_dealerList: function showUI_dealerList(dataObj) {
        var layerComp = this.comp_uiLayer.addUI(G_RES_URL.uiName.dealerList, function (layerComp) {
            if (dataObj) {
                layerComp.showLayer();
                layerComp.setData(dataObj);
            }
        });
    },
    //显示玩家列表窗口
    showUI_playerList: function showUI_playerList(dataObj) {
        var layerComp = this.comp_uiLayer.addUI(G_RES_URL.uiName.playerList, function (layerComp) {
            layerComp.setData(dataObj);
        });
    },
    //显示走势图列表窗口
    showUI_trendList: function showUI_trendList(dataObj) {
        var layerComp = this.comp_uiLayer.addUI(G_RES_URL.uiName.bull100Trend, function (layerComp) {
            layerComp.setData(dataObj);
        });
    },
    //显示规则窗口
    showUI_rules: function showUI_rules(dataObj) {
        var layerComp = this.comp_uiLayer.addUI(G_RES_URL.uiName.rulesInHome, function (layerComp) {
            layerComp.showLayer();
            layerComp.setData(dataObj);
        });
    },

    //============================================= 暂停后服务器数据处理

    //重新修改投注期间倒计时数值
    changeGrabTip: function changeGrabTip(num) {
        var secs = this._getOffSeconds(GG.socketMgr.getServerTime(), this._curEndGrabTime);
        if (this._grabTip && this._grabTip.getIsShow()) {
            this._grabTip.forceChangeCountDown(secs);
        } else {
            //投注动画未执行完成
            this.comp_topEffect.clearAll();

            if (this.comp_pokerLayer.getIsGivePokerEnd()) {
                //已经发完牌
            } else {
                //未发牌
                this._givePokers(true);
            }
            this.cmd_startBetting(secs);
        }
    },
    //重新修改休息期间倒计时数值
    changeIdleTip: function changeIdleTip(num) {
        if (this._idleTip && this._idleTip.getIsShow()) {
            var secs = this._getOffSeconds(GG.socketMgr.getServerTime(), this._nextStartTime);
            if (num) secs = num;
            this._idleTip.forceChangeCountDown(secs);
        }
    },
    //重新设置投注信息
    resetTableGold: function resetTableGold(goldList) {
        if (!goldList || goldList.length < 1) return;

        var netBeanData;
        for (var i = 0; i < goldList.length; i++) {
            netBeanData = goldList[i];
            var areaValue = parseInt(netBeanData.item.split('_')[0]);
            if (netBeanData.seatIndex === this.getMyselfComp().getSeatIndex()) continue;
            var dataObj = {};
            var playerComp = this.comp_playersContainer.getCompByIndex(netBeanData.seatIndex);

            dataObj.goldValue = netBeanData.gold;
            dataObj = playerComp.touchGrabArea_other(dataObj);
            dataObj = this.comp_tablesContainer.touchOneTable(areaValue, dataObj);
            if (dataObj.callFunc) dataObj.callFunc();
        }
    },

    //========================================  庄家的相关操作

    //请求上庄列表
    send_getDealerList: function send_getDealerList() {
        if (G_Config_common.isLocal) {
            var dealerInfo = {
                playerId: 9, //玩家id
                icon: '', //玩家头像
                nickname: '玩家1', //玩家昵称
                coin: 210000, //玩家余额
                maxDealerCoin: 210000, // 最大上庄金额
                usableBalance: 200000 };
            var playerList = [{
                playerId: 1,
                headImg: '',
                nickname: '玩家3',
                coin: 99999,
                usableBalance: 11111
            }, {
                playerId: 2,
                headImg: '',
                nickname: '玩家2',
                coin: 99999,
                usableBalance: 11111
            }];
            var dataObj = {
                //myGold : GG.bull100Mgr.getMyselfComp().getGoldValue(),
                myGold: dealerInfo.usableBalance,
                dealerInfo: dealerInfo,
                rankList: playerList
            };
            this.showUI_dealerList(dataObj);
        } else {
            var netData = {};
            this.setDealerNetType(G_TYPE.dealerNetType.getList);
            GG.socketMgr.SendMsg(NetType.s_bull100_getDealerList, netData);
        }
    },
    //请求上庄
    send_upDealer: function send_upDealer(sendGold) {
        if (G_Config_common.isLocal) {
            var dealerInfo = {
                playerId: 6, //玩家id
                icon: '', //玩家头像
                nickname: '玩家1', //玩家昵称
                coin: 110000, //玩家余额
                maxDealerCoin: 110000, // 最大上庄金额
                usableBalance: 100000 };
            var playerList = [{
                playerId: 1,
                headImg: '',
                nickname: '玩家3',
                coin: 99999,
                usableBalance: 11111
            }, {
                playerId: 2,
                headImg: '',
                nickname: '玩家2',
                coin: 99999,
                usableBalance: 11111
            }, {
                playerId: 3,
                headImg: '',
                nickname: '玩家5',
                coin: 9909,
                usableBalance: 1101
            }];
            var dataObj = {
                //myGold : GG.bull100Mgr.getMyselfComp().getGoldValue(),
                myGold: dealerInfo.usableBalance,
                dealerInfo: dealerInfo,
                rankList: playerList,
                tipStr: '上庄成功！！！'
            };
            var comp = this.comp_uiLayer.getUIComp(G_RES_URL.uiName.dealerList);
            if (comp) comp.upDealerSuccess(dataObj);
        } else {
            var netData = {
                coin: sendGold
            };
            this.setDealerNetType(G_TYPE.dealerNetType.upDealer);
            GG.socketMgr.SendMsg(NetType.s_bull100_dealerUp, netData);
        }
    },
    //请求下庄
    send_downDealer: function send_downDealer() {
        var isDealer = this.getMyselfComp().getIsDealer();
        if (isDealer) {
            GG.tipsMgr.showConfirmTip_TWO(G_CHINESE.giveUpDealer2, this._commitDownDealer.bind(this));
            var comp = this.comp_uiLayer.getUIComp(G_RES_URL.uiName.dealerList);
            if (comp) comp.hideLayer();
        } else {
            this._commitDownDealer();
        }
    },
    //确认下庄
    _commitDownDealer: function _commitDownDealer() {
        var netData = {};
        GG.socketMgr.SendMsg(NetType.s_bull100_dealerDown, netData);
    },
    //请求续庄  cancelCallFunc: 取消续庄的时候调用
    send_continueDealer: function send_continueDealer(sendGold, cancelCallFunc) {
        GG.tipsMgr.showConfirmTip_TWO(G_TOOL.formatStr(G_CHINESE.continueDealer, sendGold), function () {
            this.commitContinueDealer(sendGold);
        }.bind(this), cancelCallFunc);
    },
    //主动确认续庄家
    commitContinueDealer: function commitContinueDealer(sendGold) {
        var netData = {
            coin: sendGold
        };
        GG.bull100Mgr.setDealerNetType(G_TYPE.dealerNetType.continueDealer);
        GG.socketMgr.SendMsg(NetType.s_bull100_dealerContinue, netData);
    },

    //==========================================

    //上庄后隐藏底部
    setBottomIsShow: function setBottomIsShow(isShow) {
        this.comp_btnsLayer.setBottomIsShow(isShow);
        //玩家庄字特效显示
        this.comp_playersLayer.getMyselfEffectComp().playDealerWordAni();
        // this.comp_playersLayer.setMyselfIsShow(isShow);
    },
    //设置当前点击请求的庄家相关的请求类型
    setDealerNetType: function setDealerNetType(type) {
        this._dealerNetType = type;
    },
    //设置投注次数的显示
    setBettingTimes: function setBettingTimes(times) {
        this.label_bettingTimes.string = G_TOOL.formatStr(this._bettingTimesStr, times);
    },

    //通过特效层显示卡牌的结果
    showPokerResult: function showPokerResult(pos, pokerValue) {
        this.comp_pokerResultLayer.showPokerResult(pos, pokerValue);
    },

    //获取玩家操作时的位置
    getMyselfPos: function getMyselfPos() {
        return this.comp_playersLayer.getMyselfPos();
    },
    //获取玩家对象
    getMyselfComp: function getMyselfComp() {
        return this.comp_playersLayer.getMyselfComp();
    },
    //获取在座位上的玩家
    getPlayerCompInSite: function getPlayerCompInSite(seatIndex) {
        return this.comp_playersLayer.getPlayerComp(seatIndex);
    },
    //获取玩家当前投注需要飞行的金币数量
    getMyselfFlyGoldNum: function getMyselfFlyGoldNum() {
        return this.getMyselfComp().getFlyGoldNum();
    },
    //获取玩家当前投注需要增加的金币数量
    getMyselfBetGoldValue: function getMyselfBetGoldValue() {
        return this.getMyselfComp().getChooseGoldValue();
    },
    //获取金币的宽高
    getGoldImgSize: function getGoldImgSize() {
        return this.comp_goldsLayer.getGoldSize();
    },
    //获取最大的投注金额
    getMaxBettingGold: function getMaxBettingGold() {
        return this._maxBettingGold;
    },
    //获取最大的投注次数
    getMaxBettingTimes: function getMaxBettingTimes() {
        return this._maxBettingTimes;
    },
    getMatchID: function getMatchID() {
        return this._matchID;
    },
    getBtnsComp: function getBtnsComp() {
        return this.comp_btnsLayer;
    },
    //当知道桌子的索引的时候，可以获取取大的格子的索引
    getBigTableIndex: function getBigTableIndex(index) {
        return index * 2;
    },
    //当知道桌子的索引的时候，可以获取取小的格子的索引
    getMinTableIndex: function getMinTableIndex(index) {
        return index * 2 + 1;
    },
    //当知道桌子的大小索引的时候，桌子容器中的桌子索引
    getTableContainerIndex: function getTableContainerIndex(index) {
        var containerIndex;
        if (index % 2 == 0) {
            //偶数
            containerIndex = index / 2;
        } else {
            containerIndex = (index - 1) / 2;
        }
        return containerIndex;
    },
    //获取桌子索引对应的投注项表示
    getItemByTableIndex: function getItemByTableIndex(tableIndex) {
        return _indexToItemStr[tableIndex];
    },
    //获取投注项表示对应的桌子索引
    getTableIndexByItem: function getTableIndexByItem(itemStr) {
        return _itemToIndex[itemStr];
    },
    //获取筹码选项值
    getChipValueList: function getChipValueList() {
        return this._chipValueList;
    },
    //获取进房信息
    getEnterHomeData: function getEnterHomeData() {
        return this._enterHomeData;
    },
    //获取当前比赛是否已经开局
    getIsBetStart: function getIsBetStart(_nextStartTime, _curEndGrabTime) {
        if (!_nextStartTime) _nextStartTime = this._nextStartTime;
        if (!_curEndGrabTime) _curEndGrabTime = this._curEndGrabTime;
        var serverTime = GG.socketMgr.getServerTime();
        if (_nextStartTime > serverTime && serverTime >= _curEndGrabTime) {
            //未开局
            return false;
        }
        return true;
    },
    //获取房间名字
    getHomeName: function getHomeName() {
        return this._homeName;
    },
    //获取房间ID
    getHomeID: function getHomeID() {
        return this._homeID;
    },
    //是否已经投注
    getIsBetting: function getIsBetting() {
        return this.getMyselfComp().getIsBetting();
    },
    //获取最小上庄金额
    getMinDealerGold: function getMinDealerGold() {
        return this._minDealerGold;
    },
    //本地是否为庄家状态
    getDealerState: function getDealerState() {
        return this._isDealerSign;
    },
    //获取桌子容器
    getTableContainer: function getTableContainer() {
        return this.comp_tablesLayer;
    },
    //获取金币容器
    getGoldContainer: function getGoldContainer() {
        return this.comp_goldsLayer;
    },
    //获取吃瓜群众的投注位置
    getIdleBettingPos: function getIdleBettingPos() {
        return this.comp_btnsLayer.getIdleBettingPos();
    },
    //获取吃瓜群众的投注记录
    getIdleBetting: function getIdleBetting() {
        return this._dict_idleBetting;
    },
    //第一次进入游戏是否可押注
    getFirstBetting: function getIsWait() {
        return this._startGame;
    },

    //======================================增加对玩家自己金额变化的监听

    addMyGoldListener: function addMyGoldListener() {
        this._listenerName = GG.Listener.registerFunc(G_TYPE.globalListener.playerGold, this.on_goldChange.bind(this));
    },
    on_goldChange: function on_goldChange(listenerName, dataObj) {
        if (this.node.active) {
            var dataObj = G_OBJ.data_selfMatchEndData();
            dataObj.leaveGold = parseInt(dataObj.balance);
            this.setMatchEndMySelfData(dataObj);
        }
    },

    //设置结算时候自己的金币信息
    setMatchEndMySelfData: function setMatchEndMySelfData(dataObj) {
        this._initMatchEndData();
        //var dataObj = G_OBJ.data_selfMatchEndData();
        if (!this._matchEndData.myselfInfo) this._matchEndData.myselfInfo = G_OBJ.data_selfMatchEndData();
        if (Object.prototype.toString.call(dataObj.changeGold) === '[object Number]') {
            this._matchEndData.myselfInfo.changeGold = dataObj.changeGold;
        }
        if (Object.prototype.toString.call(dataObj.leaveGold) === '[object Number]') {
            this._matchEndData.myselfInfo.leaveGold = dataObj.leaveGold;
        }
    },
    //当有吃瓜群众投注的时候记录信息
    _addIdleBetting: function _addIdleBetting(tableIndex, goldImgNum) {
        if (!this._dict_idleBetting) this._dict_idleBetting = {};
        if (!this._dict_idleBetting[tableIndex]) this._dict_idleBetting[tableIndex] = goldImgNum;else this._dict_idleBetting[tableIndex] += goldImgNum;
    },
    //初始化结算信息
    _initMatchEndData: function _initMatchEndData() {
        if (!this._matchEndData) this._matchEndData = G_OBJ.data_matchEnd();
    },

    //===============================================

    addLongListenOnStart: function addLongListenOnStart() {
        GG.socketMgr.registerLong(NetType.r_bull100_reStartGame, this.net_resetGameData.bind(this));
        GG.socketMgr.registerLong(NetType.r_grabEnd, this.net_bettingEnd.bind(this));
        GG.socketMgr.registerLong(NetType.r_otherGrab, this.net_otherGrab.bind(this));
        GG.socketMgr.registerLong(NetType.r_mineHaveGrab, this.net_mineHasGrab.bind(this));
        GG.socketMgr.registerLong(NetType.r_oneInHome, this.net_someOneInHome.bind(this));

        GG.socketMgr.registerLong(NetType.r_grab_exitReturn, this.net_exitHome.bind(this));
        // GG.socketMgr.registerLong(NetType.r_idleTimeOut, this.net_idleTimeOut.bind(this));
        GG.socketMgr.registerLong(NetType.r_bull100_dealerDownWarning, this.net_dealerContinueWarning.bind(this));
        GG.socketMgr.registerLong(NetType.r_bull100_dealerListReturn, this.net_returnDealerList.bind(this));
        GG.socketMgr.registerLong(NetType.r_bull100_downDealerReturn, this.net_returnDownDealer.bind(this));
    },

    //百人——进入房间接收到的信息
    net_setHomeData: function net_setHomeData(recvData) {
        var tip = recvData.tip;
        if (tip.code != G_TYPE.serverCodeType.success) {
            return;
        }
        this._dealInHomeNetData(recvData);
        //是否开局判定
        var serverTime = GG.socketMgr.getServerTime();
        if (serverTime < this._curEndGrabTime) {
            //投注时间
            if (this._idleTip && this._idleTip.getIsShow()) {
                //已经存在该tip
                this._idleTip.forceEnd();
            }
            this.resetShow();
            this._startGame = true;
            var secs = this._getOffSeconds(GG.socketMgr.getServerTime(), this._curEndGrabTime);
            this.cmd_startBetting(secs);
            this._givePokers(true);
        } else {
            //未开局
            this._isPauseOverMatch = true;
            this.resetShow();
            this._startGame = false;
            var secs = this._getOffSeconds(serverTime, this._nextStartTime);
            if (secs <= 0) {
                //卡时间点了,直接开始投注
                secs = this._getOffSeconds(GG.socketMgr.getServerTime(), this._curEndGrabTime);
                this.cmd_startBetting(secs);
                this._givePokers(true);
            } else this.cmd_wait(secs);
        }
    },

    //处理进房信息
    _dealInHomeNetData: function _dealInHomeNetData(recvData) {
        this._enterHomeData = recvData;
        var match = recvData.match;

        var time1 = new Date(GG.socketMgr.getServerTime());
        // console.log('当前：时:'+time1.getHours()+'分:'+time1.getMinutes()+'秒:'+time1.getSeconds())
        var time2 = new Date(match.beginTimeNext);
        // console.log('下次开局：时:'+time2.getHours()+'分:'+time2.getMinutes()+'秒:'+time2.getSeconds())

        var id = GG.getPlayerID();
        var initData = {
            myselfData: {
                chooseDict: recvData.betChip,
                roomName: recvData.roomName
            },
            othersData: recvData.seats,
            dealerData: match.dealer,
            homeData: {
                roomId: recvData.roomId,
                userId: id,
                betTimes: recvData.betTimes,
                matchId: match.matchId,
                beginTimeNext: match.beginTimeNext,
                settleTime: match.settleTime,
                betChip: recvData.betChip,
                minDealerGold: recvData.minDealerCoin
            }
        };
        this._initInHomeData(initData);
    },

    //百人——重新设置开局数据
    net_resetGameData: function net_resetGameData(recvData) {
        GG.tipsMgr.clearConfirm(); //清理被动续庄

        var tip = recvData.tip;
        if (tip.code != G_TYPE.serverCodeType.success) {
            // console.log(tip.tip);
            return;
        }
        //局信息
        this.updateEnterHomeData(recvData);
        var match = recvData.match;
        var initData = {
            myselfData: {
                chooseDict: null,
                roomName: null
            },
            othersData: recvData.seats,
            dealerData: match.dealer,
            homeData: {
                roomId: recvData.roomId,
                userId: null,
                betTimes: null,
                matchId: match.matchId,
                beginTimeNext: match.beginTimeNext,
                settleTime: match.settleTime,
                betChip: null
            }
        };
        this._initInHomeData(initData);
        this.resetShow();
        this.cmd_startReady();
    },

    //百人——结束投注，进入结算
    net_bettingEnd: function net_bettingEnd(recvData) {
        var isRight = this.setBettingEndInfo(recvData);
        //结束投注，进入结算
        if (isRight) {
            this.cmd_bettingEnd();
            var secs = this._getOffSeconds(GG.socketMgr.getServerTime(), this._nextStartTime);
            this.cmd_wait(secs);
        }
    },

    //百人——设置结算信息的数据
    setBettingEndInfo: function setBettingEndInfo(recvData) {
        var tip = recvData.tip;
        switch (tip.code) {
            case G_TYPE.serverCodeType.success:
                break;
            case G_TYPE.serverCodeType.noBetting:
                break;
            default:
                return false;
        }
        this._super(recvData);

        this._winDict = {};
        var pokerIndex,
            dataList = [];
        var pokerData, dealerOdds;
        var pokerValueList = [];
        for (var i = 0; i < recvData.pokers.length; i++) {
            pokerData = recvData.pokers[i];
            var pokerList = pokerData['code'].split(","); //第一个是庄家
            var pokerInfo = [];
            for (var j = 0; j < pokerList.length; j++) {
                pokerIndex = parseInt(pokerList[j]);
                if (!isNaN(pokerIndex)) {
                    pokerInfo.push({
                        pokerIndex: pokerIndex,
                        isOpen: false
                    });
                }
            }
            dataList.push(pokerInfo);
            pokerValueList.push(pokerData.cardsPoint);
            if (i > 0) {
                //去除庄家结果
                if (pokerData.result == 'WIN') {
                    this._winDict[this.getBigTableIndex(i - 1)] = Math.max(pokerData.odds, dealerOdds);
                } else if (pokerData.result == 'LOSE') {
                    this._winDict[this.getMinTableIndex(i - 1)] = Math.max(pokerData.odds, dealerOdds);
                }
            } else dealerOdds = pokerData.odds;
        }
        //this.comp_pokerLayer.setPokersData(dataList, pokerValueList);

        this._initMatchEndData();
        this._matchEndData.pokersInfoList = dataList;
        this._matchEndData.pokersResultList = pokerValueList;

        //结算的时候更新座位上的其他玩家信息
        var seats = recvData.players;
        if (seats) {
            this._matchEndData.othersInfo = {};
            for (var i = 0; i < seats.length; i++) {
                var player = seats[i];
                switch (player.seatIndex) {
                    case G_DATA.getDealerSeatIndex():
                        //庄家剩余金币
                        //this.comp_playersLayer.getDealerComp().setGoldValue(player.dealerBalance);
                        this._matchEndData.dealerInfo = {
                            changeGold: player.coin,
                            leaveGold: player.balance
                        };
                        break;
                    case G_DATA.getIdlePlayersSeatIndex():
                        break;
                    default:
                        this._matchEndData.othersInfo[player.seatIndex] = {
                            changeGold: player.coin,
                            leaveGold: player.balance,
                            name: player.nickname,
                            icon: player.icon
                        };
                        break;
                }
            }
        }
        return true;
    },

    //百人——结束投注，金钱的变化数据(当有人投注时候，才会进入这个接口)
    net_mineHasGrab: function net_mineHasGrab(recvData) {

        var tip = recvData.tip;
        if (tip.code != G_TYPE.serverCodeType.success) {
            // console.log(tip.tip);
            return;
        }

        var myInfo = recvData.player;
        var dataObj = G_OBJ.data_selfMatchEndData();
        dataObj.changeGold = parseInt(myInfo.coin);
        dataObj.leaveGold = parseInt(myInfo.balance);
        this.setMatchEndMySelfData(dataObj);
    },

    //百人——当有某个玩家投注,包括自己
    net_otherGrab: function net_otherGrab(recvData) {
        var tip = recvData.tip;
        if (tip.code != G_TYPE.serverCodeType.success) {
            // console.log(tip.tip);
            return;
        }
        var others = recvData.bets,
            netBeanData;
        for (var i = 0; i < others.length; i++) {
            netBeanData = others[i];
            var tableIndex = this.getTableIndexByItem(netBeanData.item);
            var seatIndex = netBeanData.seatIndex;
            var goldImgNum = G_Config_grab.num_otherGrabGoldNum;
            //整理投注信息
            var dataObj = G_OBJ.data_bullBetting();
            dataObj.tableIndex = tableIndex;
            dataObj.posList = this.comp_tablesLayer.getGoldPosList(tableIndex, goldImgNum);
            dataObj.goldValue = netBeanData.gold;
            dataObj.isMine = false;
            //根据座位判定，投注玩家身份
            switch (seatIndex) {
                case this.getMyselfComp().getSeatIndex():
                    //在座位上的自己的投注
                    break;
                case G_DATA.getIdlePlayersSeatIndex():
                    //吃瓜群众
                    dataObj.startPos = this.comp_btnsLayer.getIdleBettingPos();
                    dataObj.goldNum = goldImgNum;
                    //自己没在座位上又有押注要扣掉玩家列表中自己的投注额
                    if (!this.getMyselfComp().getSeatIndex() && this.getMyselfComp().getIsBetting()) {
                        //如果这个吃瓜群众是自己
                        dataObj.goldValue = this.getMyselfComp().reduceGoldEX(dataObj.goldValue);
                    }
                    if (dataObj.goldValue > 0) {
                        //有其他的吃瓜群众投注
                        this._addIdleBetting(dataObj.tableIndex, dataObj.goldNum);
                        this._touchTableSuccess(dataObj);
                    }
                    break;
                case G_DATA.getDealerSeatIndex():
                    //庄家
                    break;
                default:
                    //正常座位上玩家
                    var playerComp = this.getPlayerCompInSite(seatIndex);
                    if (playerComp) playerComp.touchTable(dataObj, this._touchTableSuccess.bind(this));
                    break;
            }
        }
    },

    //百人——有人入座
    net_someOneInHome: function net_someOneInHome(recvData) {

        var tip = recvData.tip;
        if (tip.code != G_TYPE.serverCodeType.success) {
            // console.log(tip.tip);
            return;
        }

        var player,
            playerList = recvData.seats,
            myPlayerID = GG.getPlayerID();
        for (var i = 0; i < playerList.length; i++) {
            player = playerList[i];
            if (!player || player.player.playerId == myPlayerID) continue;
            this.comp_playersLayer.onePlayerInsert(player.seatIndex, player.player);
        }
    },

    //百人——续庄警告.在庄时候，如果金额不足，会有警告;
    net_dealerContinueWarning: function net_dealerContinueWarning(recvData) {
        // console.log('上庄成功，续庄警告,金额不足=====')
        var tip = recvData.tip;
        // console.log('tip.tip==='+tip.tip);
        switch (tip.code) {
            case G_TYPE.serverCodeType.success:
                break;
            case G_TYPE.serverCodeType.upDealerErr2:
                //金币不足上庄金额
                GG.tipsMgr.showSystem(tip.tip);
                break;
            case G_TYPE.serverCodeType.upDealerSuccess:
                //恭喜您，成为本局庄家!  显示 2 秒
                GG.tipsMgr.showSystem(G_CHINESE.upDealerSuccess, null, 2);
                break;
            case G_TYPE.serverCodeType.continueFail1:
                //庄家金币不足续庄
                GG.tipsMgr.showConfirmTip_ONE(tip.tip);
                break;
            case G_TYPE.serverCodeType.downDealer4:
                //您剩余金币不足,已下庄!被动下庄   系统提示  按钮显示置灰
                GG.tipsMgr.showConfirmTip_ONE(tip.tip);
                if (this.getMyselfComp().getIsDealer()) {}
                break;
            case G_TYPE.serverCodeType.warnDealer1:
                //友情提示: 您的上庄资金不足80%，请及时续庄！显示 4 秒
                GG.tipsMgr.showSystem(G_CHINESE.downDealerWarning, null, 4);
                break;
            case G_TYPE.serverCodeType.continueFail2:
                //庄家被动续庄
                this.send_continueDealer(recvData.coin, function () {
                    //放弃被动续庄
                    this.setBottomIsShow(true);
                }.bind(this));
                break;
            case G_TYPE.serverCodeType.downDealer3:
                //庄家被动下庄
                GG.tipsMgr.showConfirmTip_ONE(tip.tip);
                return;
            default:
                GG.tipsMgr.showConfirmTip_ONE(tip.code + tip.tip);
                return;
        }
    },

    //百人——获取上庄列表的返回(上庄，续庄和请求上庄列表都是返回这个接口)
    net_returnDealerList: function net_returnDealerList(recvData) {
        var tip = recvData.tip;
        //if(tip.code != G_TYPE.serverCodeType.success) {
        //    console.log(tip.tip);
        //    this._dealerNetType = null;
        //    return;
        //}

        switch (tip.code) {
            case G_TYPE.serverCodeType.success:
                //请求成功
                break;
            case G_TYPE.serverCodeType.continueSuccess:
                //续庄成功

                break;
            case G_TYPE.serverCodeType.continueFail1:
                //主动续庄，余额不足提示
                GG.tipsMgr.showConfirmTip_ONE(tip.tip);
                return;
            case G_TYPE.serverCodeType.upDealerErr2:
                //玩家金币不足最低上庄余额
                GG.tipsMgr.showSystem(tip.tip, null, 2);
                return;
            case G_TYPE.serverCodeType.continueFail3:
                //续庄金额为非法数值
                GG.tipsMgr.showSystem(tip.tip, null, 2); //600014提示
                return;
            case G_TYPE.serverCodeType.downDealer5:
                //下庄之后又续庄
                GG.tipsMgr.showConfirmTip_ONE(tip.tip); //600019提示
                return;
            default:
                GG.tipsMgr.showConfirmTip_ONE(tip.code + tip.tip);
                return;
        }

        var dealerInfo = recvData.deskDealer;
        var playerList = recvData.players;
        var dataObj = {
            myGold: recvData.dealer.maxDealerCoin,
            dealerInfo: dealerInfo,
            rankList: playerList,
            tipStr: ''
        };

        //设置当前玩家的可用金币
        this.getMyselfComp().setGoldValue(recvData.dealer.coin);
        //庄家金币更新
        if (this.getMyselfComp().getIsDealer()) {
            this.comp_playersLayer.getDealerComp().setGoldValue(recvData.deskDealer.usableBalance);
        }

        switch (this._dealerNetType) {
            case G_TYPE.dealerNetType.upDealer:
                //上庄
                dataObj.tipStr = G_CHINESE.dealerSuccess;
                var comp = this.comp_uiLayer.getUIComp(G_RES_URL.uiName.dealerList);
                if (comp) comp.upDealerSuccess(dataObj);
                //this.setBottomIsShow(false);
                break;
            case G_TYPE.dealerNetType.continueDealer:
                //续庄
                dataObj.tipStr = G_CHINESE.continueDealerSuccess;
                var comp = this.comp_uiLayer.getUIComp(G_RES_URL.uiName.dealerList);
                if (comp) comp.upDealerSuccess(dataObj);
                break;
            case G_TYPE.dealerNetType.getList:
                //获取上庄列表
                this.showUI_dealerList(dataObj);
                break;
            default:
                break;
        }
        this._dealerNetType = null;
    },

    //百人——下庄请求的回调
    net_returnDownDealer: function net_returnDownDealer(recvData) {
        var tip = recvData.tip;
        // console.log(tip.tip);
        switch (tip.code) {
            case G_TYPE.serverCodeType.success:
                break;
            case G_TYPE.serverCodeType.downDealer1:
                //本身在庄的情况下下庄
                this.setBottomIsShow(true);
                var tipObj = {
                    tipIndex: 19,
                    showStr: G_CHINESE.downSuccess,
                    isCountDown: false,
                    showPos: G_DATA.getCenterTipPos()
                };
                // GG.tipsMgr.showTxtTip(tipObj);
                //您已经成功下庄 显示 2 秒
                GG.tipsMgr.showSystem(G_CHINESE.downSuccess, null, 2);
                var comp = this.comp_uiLayer.getUIComp(G_RES_URL.uiName.dealerList);
                if (comp) comp.setBtnShow(false);
                //下庄清除庄字特效
                this.comp_playersLayer.getMyselfEffectComp().clearDealerWordAni();
                //更新抢庄按钮是否可用
                this.comp_playersLayer.setUpDealerBtnEnable(false);
                break;
            case G_TYPE.serverCodeType.downDealer2:
                //在上庄列表中，但是并未上庄的情况下下庄
                var dealerInfo = recvData.deskDealer;
                var playerList = recvData.players;
                var dataObj = {
                    myGold: recvData.dealer.maxDealerCoin,
                    dealerInfo: dealerInfo,
                    rankList: playerList,
                    tipStr: ''
                };
                dataObj.tipStr = G_CHINESE.giveUpDealer1;
                //更新上庄列表数据
                var comp = this.comp_uiLayer.getUIComp(G_RES_URL.uiName.dealerList);
                if (comp) comp.downDealerSuccess(dataObj);
                //您已从上庄列表退出竞庄
                GG.tipsMgr.showSystem(G_CHINESE.giveUpDealer1, null, 2);
                //更新玩家数据
                this.getMyselfComp().setGoldValue(dataObj.myGold);
                break;
            case G_TYPE.serverCodeType.downDealer3:
                //你已经下庄，（不确定具体引用情况,可能是本身没有参与竞庄也没有上庄
                //如果还在庄就更改押注按钮
                this.setBottomIsShow(true);
                var tipObj = {
                    tipIndex: 19,
                    showStr: G_CHINESE.downSuccess,
                    isCountDown: false,
                    showPos: G_DATA.getCenterTipPos()
                };
                // GG.tipsMgr.showTxtTip(tipObj);
                //您已经成功下庄
                GG.tipsMgr.showSystem(G_CHINESE.downSuccess, null, 2);
                break;
            default:
                break;
        }
        this._isDealerSign = false;
    },

    //百人——退出房间的请求
    net_exitHome: function net_exitHome(recvData) {

        var tip = recvData.tip;
        if (tip.code != G_TYPE.serverCodeType.success) {
            // console.log(tip.tip);
            return;
        }

        GG.exitHome();
    },

    //百人——游戏中长时间没有做操作
    net_idleTimeOut: function net_idleTimeOut(recvData) {

        GG.tipsMgr.showConfirmTip_ONE(recvData.tip.tip, function () {
            GG.exitHome();
        }.bind(this));
    },

    _getOffSeconds: function _getOffSeconds(startTime, endTime) {
        return GG.socketMgr.getOffSeconds(startTime, endTime);
    },

    // called every frame, uncomment this function to activate update callback
    // update: function (dt) {

    // },

    //========================ui表现

    //抖动游戏
    shakeGame: function shakeGame() {
        var off = 2;
        var off2 = off * 2;
        var time = 0.07;
        var act1 = cc.moveBy(time, -off2, 0);
        var act2 = cc.moveBy(time, off2 * 2, 0);
        var act3 = cc.moveBy(time, -off2, 0);
        var act4 = cc.moveBy(time, off2, 0);
        var act5 = cc.moveBy(time, -off, 0);
        this.node.runAction(cc.sequence(act1, act2, act3, act4, act5));
    },

    onDestroy: function onDestroy() {
        this._super();
        GG.bull100Mgr = null;
        GG.Listener.delListen(G_TYPE.globalListener.playerGold, this._listenerName);
    }
});

cc._RF.pop();
},{"BaseManager":"BaseManager","Bull100_btnContainer":"Bull100_btnContainer","Bull100_playerContainer":"Bull100_playerContainer","Bull100_pokerContainer":"Bull100_pokerContainer","Bull100_pokerResultContainer":"Bull100_pokerResultContainer","Bull100_tableContainer":"Bull100_tableContainer","Bull100_topEffect":"Bull100_topEffect","Obj_goldsContainer":"Obj_goldsContainer","Obj_uiContainer":"Obj_uiContainer"}],"Bull100_btnContainer":[function(require,module,exports){
"use strict";
cc._RF.push(module, '8ebeakRcqlHerVhexIQiAHf', 'Bull100_btnContainer');
// Script/Views/Scene_Bull100/Bull100_btnContainer.js

'use strict';

//百人大战按钮管理类


cc.Class({
    extends: require('AutoDealing'),

    properties: {
        _lastBtn: null,

        node_btnGroup: cc.Node,
        // node_effectOnButton : cc.Node,
        node_effectUnderButton: cc.Node,
        node_exitHomeBtn: cc.Node,

        node_rightBtn1: cc.Node,
        node_rightBtn2: cc.Node,
        node_rightBtn3: cc.Node,

        node_continueDealer: {
            default: null,
            type: cc.Node,
            displayName: '续庄按钮容器'
        }
    },

    // use this for initialization
    onLoad: function onLoad() {
        this._btnCompName = 'Obj_optionButton';
        this._isAdaptPos = false;
        this._registerAllBtn();
    },

    initChipBtn: function initChipBtn(valueDict) {
        this._setBtnInfo(valueDict);
    },

    setStartInfo: function setStartInfo() {
        this.setBtnGroupEnable(false);
    },

    _registerAllBtn: function _registerAllBtn() {
        var btns = this.node_btnGroup.children;
        for (var i = 0; i < btns.length; i++) {
            this.registerButton(btns[i], this.OnClick_chooseMoney, this, parseInt(i), true);
        }
        this.registerButton(this.node_exitHomeBtn, this.OnClick_exit, this);
        //this.node_exitHomeBtn.getComponent('Obj_leftTopMenu').bindFunc(this.OnClick_exit.bind(this));

        this.registerButton(this.node_rightBtn1, this.OnClick_right1, this);
        this.registerButton(this.node_rightBtn2, this.OnClick_right2, this);
        this.registerButton(this.node_rightBtn3, this.OnClick_right3, this);

        var continueDealer = this.node_continueDealer.children[0];
        var downDealer = this.node_continueDealer.children[1];
        this.registerButton(continueDealer, this.OnClick_continueDealer, this);
        this.registerButton(downDealer, this.OnClick_leaveDealer, this);
    },
    OnClick_chooseMoney: function OnClick_chooseMoney(event, userData) {
        var chooseLevel = parseInt(userData);
        this._showChooseEffect(event.target);

        var playerChoose = chooseLevel + 1;
        GG.bull100Mgr.getMyselfComp().chooseChip(playerChoose);
    },
    OnClick_exit: function OnClick_exit(event) {
        var isContinue = GG.bull100Mgr.testExitBtn();
        if (!isContinue) return;

        if (G_Config_common.isLocal) {
            GG.tipsMgr.showConfirmTip_TWO(G_CHINESE.exitText1, function () {
                GG.exitHome();
            });
            return;
        }

        if (GG.bull100Mgr.getIsBetting()) {
            GG.tipsMgr.showConfirmTip_TWO(G_CHINESE.exitText1, function () {
                var netData = {
                    roomId: GG.bull100Mgr.getHomeID(),
                    isBreak: true
                };
                GG.socketMgr.SendMsg(NetType.s_grab_Exit, netData);
            });
        } else if (GG.bull100Mgr.getMyselfComp().getIsDealer() && GG.bull100Mgr.getDealerState()) {
            GG.tipsMgr.showConfirmTip_TWO(G_CHINESE.exitText3, function () {
                var netData = {
                    roomId: GG.bull100Mgr.getHomeID(),
                    isBreak: true
                };
                GG.socketMgr.SendMsg(NetType.s_grab_Exit, netData);
            });
        } else {
            var netData = {
                roomId: GG.bull100Mgr.getHomeID(),
                isBreak: true
            };
            GG.socketMgr.SendMsg(NetType.s_grab_Exit, netData);
        }
    },
    //顯示玩家列表
    OnClick_right1: function OnClick_right1(event) {
        GG.bull100Mgr.showUI_playerList();
    },
    //顯示游戏规则
    OnClick_right2: function OnClick_right2(event) {
        var data = G_TYPE.gameModule.bull100;
        GG.bull100Mgr.showUI_rules(data);
    },
    //顯示走勢圖
    OnClick_right3: function OnClick_right3(event) {
        GG.bull100Mgr.showUI_trendList(GG.bull100Mgr.getHomeID());
    },

    //点击续庄
    OnClick_continueDealer: function OnClick_continueDealer(event) {
        GG.bull100Mgr.send_getDealerList();
    },
    //点击下庄
    OnClick_leaveDealer: function OnClick_leaveDealer(event) {
        GG.bull100Mgr.send_downDealer();
    },

    _setBtnInfo: function _setBtnInfo(valueDict) {
        var btns = this.node_btnGroup.children,
            index;
        for (var i = 0; i < btns.length; i++) {
            index = parseInt(i);
            btns[i].tag = valueDict[index];
            btns[i].getComponent(this._btnCompName).showMoney(valueDict[index], false);
        }
    },
    chooseMoney: function chooseMoney(index) {
        var btn = this._getBtnByIndex(index);
        //获取第一次进房是否可下注
        this.isBetting = GG.bull100Mgr.getFirstBetting();
        this._showChooseEffect(btn);
    },

    //move touch effect
    _showChooseEffect: function _showChooseEffect(targetBtn) {
        this._chooseBtn(targetBtn);

        //effect
        // this.node_effectOnButton.active = true;
        this.node_effectUnderButton.active = true;

        // this.node_effectOnButton.position = cc.p(targetBtn.x, targetBtn.y);;
        this.node_effectUnderButton.x = targetBtn.x;
        this.node_effectUnderButton.y = -targetBtn.height * 0.65;
        //刚进入游戏如果可下注 强制自适应
        // if (this.isBetting && !this._isAdaptPos) {
        //     this.node_effectUnderButton.position = G_TOOL.adaptPos(this.node_effectUnderButton.position);
        //     var size = G_TOOL.adaptSize(targetBtn.width, targetBtn.height);
        //     this.node_effectUnderButton.width = size.width;
        //     this._isAdaptPos = true;
        // } else {
        //     this.node_effectUnderButton.width = targetBtn.width;
        // }
        ////ani
        // //this.node_effectOnButton.getComponent(cc.Animation).play();
    },
    _hideEffect: function _hideEffect() {
        // this.node_effectOnButton.active = false;
        this.node_effectUnderButton.active = false;
    },

    //button touch move up
    _chooseBtn: function _chooseBtn(targetBtn) {
        this._cancelChoose();
        targetBtn.getComponent(this._btnCompName).showMoney(null, true);
        //targetBtn.y += targetBtn.height/2;
        this.setBtnEnable(targetBtn, false, true);
        this._lastBtn = targetBtn;
    },
    _cancelChoose: function _cancelChoose() {
        if (this._lastBtn) {
            this._hideEffect();
            this._lastBtn.getComponent(this._btnCompName).showMoney(null, false);
            this.setBtnEnable(this._lastBtn, true);
            this._lastBtn.y = 0;
            this._lastBtn = null;
        }
    },

    setBtnGroupEnable: function setBtnGroupEnable(isEnable) {
        this._cancelChoose();
        var btnGroup = this.node_btnGroup.children;
        for (var i = 0; i < btnGroup.length; i++) {
            this.setBtnEnable(btnGroup[i], isEnable);
        }
    },

    refreshCanChooseBtn: function refreshCanChooseBtn(useGold) {
        if (!this._list_myGrabOption) this._list_myGrabOption = GG.bull100Mgr.getMyselfComp().getMoneyChooseDict();
        var btnGroup = this.node_btnGroup.children;
        if (!G_DATA.isNumber(useGold)) useGold = GG.bull100Mgr.getMyselfComp().getUsableBalance();
        var targetChoose = null;

        for (var option = 0; option < this._list_myGrabOption.length; option++) {
            if (this._list_myGrabOption[option] <= useGold) {
                this.setBtnEnable(btnGroup[option], true);
                targetChoose = parseInt(option);
            } else {
                if (this._lastBtn && this._lastBtn.tag == this._list_myGrabOption[option]) {
                    this._cancelChoose();
                }
                this.setBtnEnable(btnGroup[option], false);
            }
        }
        //如果有取消选中筹码，需要重新选择筹码
        if (!this._lastBtn && G_DATA.isNumber(targetChoose)) {
            //保持上次的选择
            var lastChoose = GG.bull100Mgr.getMyselfComp().getChooseChip() - 1;
            if (lastChoose < targetChoose) targetChoose = lastChoose;

            this._showChooseEffect(btnGroup[targetChoose]);
            GG.bull100Mgr.getMyselfComp().chooseChip(targetChoose + 1);
        }
    },

    //是否显示续庄和下庄的按钮
    _setIsShowDealerBtn: function _setIsShowDealerBtn(isShow) {
        this.node_continueDealer.active = isShow;
    },
    //隐藏底部的所有按钮
    setBottomIsShow: function setBottomIsShow(isShow) {
        this.setBtnGroupEnable(false);
        this.node_btnGroup.active = isShow;
        this._setIsShowDealerBtn(!isShow);
    },

    _getBtnByIndex: function _getBtnByIndex(index) {
        return this.node_btnGroup.children[index - 1];
    },

    //获取吃瓜群众投注起点
    getIdleBettingPos: function getIdleBettingPos() {
        var pos = this.node_rightBtn1.position;
        var basePos = this.node_rightBtn1.parent.parent.position;
        var posX = pos.x + this.node_rightBtn1.parent.x + basePos.x;
        var posY = pos.y + this.node_rightBtn1.parent.y + basePos.y + this.node_rightBtn1.height / 2;
        return cc.p(posX, posY);
    }

});

cc._RF.pop();
},{"AutoDealing":"AutoDealing"}],"Bull100_playerBlock":[function(require,module,exports){
"use strict";
cc._RF.push(module, '56d8eUX/ttGJZhl4dhP/ZFi', 'Bull100_playerBlock');
// Script/Views/Scene_Bull100/Bull100_playerBlock.js

'use strict';

//玩家对象

cc.Class({
    extends: cc.Component,

    properties: {
        _chooseChip: null, //选择的筹码
        _isHandle: null, //是否是操作位
        _dict_betRecord: null, //投注记录
        _playerID: null, //玩家ID
        _siteIndex: null, //座位索引
        _touchTableCallFunc: null, //点击投注区域的回调
        _data_betting: null, //当前投注需要的信息对象\

        _bettingTimes: null, //当前投注次数
        _seatMyselfComp: null, //座位上的自己玩家
        _dealerMyselfComp: null, //庄家座位上的自己
        _isDealer: null, //是否是庄家
        _isSending: null, //是否正在投注请求

        node_headImg: {
            default: null,
            type: cc.Node,
            displayName: '玩家头像'
        },
        node_playerName: {
            default: null,
            type: cc.Node,
            displayName: '玩家名字'
        },
        node_roomName: {
            default: null,
            type: cc.Node,
            displayName: '房间名字'
        },
        node_ownerGold: {
            default: null,
            type: cc.Node,
            displayName: '玩家金币父层'
        },
        prefab_goldResultEffect: {
            default: null,
            type: cc.Prefab,
            displayName: '金币增减特效'
        }
    },

    // use this for initialization
    onLoad: function onLoad() {
        this._part_gold = this.getComponent('Part_playerBlock_Gold');
        this._part_gold.bindBlock(this);
        this._label_gold = this.node_ownerGold.children[0].getComponent(cc.Label);

        //头像上金币结果特效
        this._goldResultCompName = 'Obj_goldResultEffect';
        //筹码对应金币
        this._dict_goldMatch = G_Config_bull100.dict_betGoldNum;
        //头像上增减金币飞行时间
        //this._goldResultFlyTime = G_Config_grab.time_goldOnHead;
        this._goldResultFlyTime = 0.4;
        this._isSending = false;

        this.setDefaultChoose();
    },

    //初始设置玩家信息
    setPlayerData: function setPlayerData(dataObj) {
        this.node.active = true;
        this._dict_betRecord = null;
        this._part_gold.setBettingGold(0);
        this._bettingTimes = 0;
        this._data_betting = null;
        this._isDealer = dataObj.isDealer;
        this.setDefaultChoose();
        this._playerID = dataObj.playerId;
        this._siteIndex = dataObj.seatIndex;

        this._setHeadImg(dataObj.icon);
        this._setPlayerName(dataObj.nickname);
        this.setGoldValue(dataObj.coin);
        this._part_gold.setUsableBalance(dataObj.usableBalance);
    },

    //设置操作位的数据
    setHandleInfo: function setHandleInfo(handleInfo) {
        if (handleInfo.chooseDict) this._dict_goldValueMatch = handleInfo.chooseDict;
        //房间名字
        this._setRoomName(handleInfo.roomName);
    },
    //绑定座位上的玩家
    bindSeatMyself: function bindSeatMyself(myselfComp) {
        this._seatMyselfComp = myselfComp;
    },
    //自己是庄家的时候，绑定庄家脚本
    bindMyDealer: function bindMyDealer(myselfComp) {
        this._dealerMyselfComp = myselfComp;
    },

    //设置默认的筹码选择(如果已经选择过筹码了就不要重置了)
    setDefaultChoose: function setDefaultChoose() {
        if (!this._chooseChip) this._chooseChip = 1;
    },
    //选择一个筹码
    chooseChip: function chooseChip(choose) {
        this._chooseChip = choose;
    },
    setGoldValue: function setGoldValue(value) {
        if (!value) value = 0;
        this._part_gold.setBalance(value);

        //位置上的自己
        if (this._seatMyselfComp) {
            this._seatMyselfComp.setGoldValue(value);
        }
    },
    setIsHandle: function setIsHandle(isHandle) {
        this._isHandle = isHandle;
    },
    hidePlayer: function hidePlayer() {
        this.node.active = false;
    },
    setChooseGoldValue: function setChooseGoldValue(dict) {
        this._dict_goldValueMatch = dict;
    },
    //设置玩家是否是庄家，因为已经没有每局刷新玩家信息，所以需要主动设置
    setIsDealer: function setIsDealer(isDealer) {
        this._isDealer = isDealer;
    },

    //====================get

    //获取已经选择的筹码需要飞行的金币数量
    getFlyGoldNum: function getFlyGoldNum() {
        return this._dict_goldMatch[this._chooseChip];
    },
    getChooseChip: function getChooseChip() {
        return this._chooseChip;
    },
    getChooseGoldValue: function getChooseGoldValue() {
        return this._dict_goldValueMatch[this._chooseChip - 1];
    },
    getMoneyChooseDict: function getMoneyChooseDict() {
        return this._dict_goldValueMatch;
    },
    getWorldPos: function getWorldPos() {
        //if(this._isHandle) return this.node.position;
        //else{
        //    return this.node.parent.position
        //}
        var parentPos = this.node.parent.position;
        return cc.p(this.node.x + parentPos.x, this.node.y + parentPos.y);
    },
    //获取玩家的投注记录
    getBetRecord: function getBetRecord() {
        return this._dict_betRecord;
    },
    getIsShow: function getIsShow() {
        return this.node.active;
    },
    getSeatIndex: function getSeatIndex() {
        return this._siteIndex;
    },
    //获取当前剩余多少金币
    getGoldValue: function getGoldValue() {
        return this._part_gold.getBalance();
    },
    //是否在本局已经投注过
    getIsBetting: function getIsBetting() {
        return Boolean(this._part_gold.getBettingGold());
    },
    //是否是庄家
    getIsDealer: function getIsDealer() {
        return this._isDealer;
    },
    //获取玩家ID
    getPlayerID: function getPlayerID() {
        return this._playerID;
    },
    //获取已经投注的金币数额
    getHasBettingGold: function getHasBettingGold() {
        return this._part_gold.getBettingGold();
    },
    //获取可用余额
    getUsableBalance: function getUsableBalance() {
        return this._part_gold.getUsableBalance();
    },

    //清理投注记录
    clearBettingGold: function clearBettingGold() {
        this._part_gold.setBettingGold(0);
        this._part_gold.setGoldValueEX(0);
    },

    //投注金额，仅用于自己是吃瓜群众的时候
    reduceGoldEX: function reduceGoldEX(changeGold) {
        var goldValue = this._part_gold.getGoldValueEX();
        if (goldValue >= changeGold) {
            this._part_gold.payGoldValueEX(changeGold);
            return 0;
        } else {
            var value = changeGold - goldValue;
            this._part_gold.setGoldValueEX(0);
            return value;
        }
    },

    //=============================做投注的请求

    //点击桌子的大或者小
    touchTable: function touchTable(grabInfo, callFunc) {
        this._touchTableCallFunc = callFunc;
        grabInfo.startPos = this.getWorldPos();
        grabInfo.goldNum = this.getFlyGoldNum();
        if (!this._isHandle || G_Config_common.isLocal) {
            //不是在玩家自己或者只是单机模式
            var money = grabInfo.goldValue;
            grabInfo.goldNum = G_Config_grab.num_otherGrabGoldNum;
            this._data_betting = grabInfo;
            this._setTouchTableData(money, this.getGoldValue() - money);
            return;
        } else {
            if (this._isSending) {
                return;
            }
            grabInfo.goldValue = this.getChooseGoldValue();
            this._data_betting = grabInfo;
            //可以投注
            var netData = {
                matchId: GG.bull100Mgr.getMatchID(), //赛事id  int
                type: G_TYPE.net_gameModule.bull100, //投注类型 string
                item: GG.bull100Mgr.getItemByTableIndex(grabInfo.tableIndex), //投注项 string
                gold: grabInfo.goldValue };
            this._isSending = true;
            GG.socketMgr.SendMsg(NetType.s_doGrab, netData);
            GG.socketMgr.registerLong(NetType.r_doGrab_return, this.net_grabReturn.bind(this));
        }
    },

    //百人——投注成功后返回的函数
    net_grabReturn: function net_grabReturn(recData) {
        this._isSending = false;

        var tip = recData.tip;
        if (tip.code != G_TYPE.serverCodeType.success) {
            var dataObj = {
                tipIndex: 19,
                retainTime: 3,
                showStr: tip.tip
            };
            GG.tipsMgr.showTxtTip(dataObj);
            return;
        }
        //赛事不存在踢出
        if (tip.code == G_TYPE.serverCodeType.matchNonExistent) {
            //var netData = {
            //    roomId: GG.bull100Mgr.getHomeID(),
            //    isBreak: true
            //};
            //GG.socketMgr.SendMsg(NetType.s_grab_Exit, netData);
            GG.exitHome();
            return;
        }

        var bettingValue = recData.bet.gold;
        var leaveValue = recData.nbSelf.balance;
        this._setTouchTableData(bettingValue, leaveValue, recData.nbSelf.usableBalance);
        //押注过程中更新押注按钮（置灰）
        GG.bull100Mgr.getBtnsComp().refreshCanChooseBtn(recData.nbSelf.usableBalance);
    },

    _setTouchTableData: function _setTouchTableData(bettingValue, leaveValue, usableBalance) {
        //重组投注信息对象
        if (!this._data_betting) return;
        var dataObj = G_OBJ.data_bullBetting();
        for (var attrName in this._data_betting) {
            if (attrName) dataObj[attrName] = this._data_betting[attrName];
        }
        this._data_betting = null;

        dataObj.goldValue = bettingValue;
        //更新投注金额池信息
        this._part_gold.addBettingGold(dataObj.goldValue);
        this._part_gold.addGoldValueEX(dataObj.goldValue);
        //更新余额信息
        this.setGoldValue(leaveValue);
        //更新可用余额信息
        this._part_gold.setUsableBalance(usableBalance);
        //记录投注信息
        this._touchTableSuccess(dataObj.tableIndex, dataObj.goldNum);
        this._bettingTimes += 1;
        // GG.bull100Mgr.setBettingTimes(this._bettingTimes);
        if (this._touchTableCallFunc) {
            this._touchTableCallFunc(dataObj);
            this._touchTableCallFunc = null;
        }
    },

    //投注成功后记录投注信息
    _touchTableSuccess: function _touchTableSuccess(tableIndex, goldImgNum) {
        if (!this._dict_betRecord) this._dict_betRecord = {};
        if (!this._dict_betRecord[tableIndex]) this._dict_betRecord[tableIndex] = goldImgNum;else this._dict_betRecord[tableIndex] += goldImgNum;
    },

    //获取庄家卡牌的位置
    getDealerPokerPos: function getDealerPokerPos() {
        //卡牌位置是庄家中心点偏左
        var pokerOffX = 0.4;
        var containerPos = this.node.parent.position;
        var pos = cc.p(this.node.x - this.node.width * 0.5 * this.node.scale * pokerOffX + containerPos.x, this.node.y - this.node.height * 0.5 * this.node.scale + containerPos.y);
        return pos;
    },

    //ui表现相关===============================

    _setHeadImg: function _setHeadImg(imageName) {
        G_TOOL.setHeadImg(this.node_headImg, imageName);
    },

    _setPlayerName: function _setPlayerName(playerName) {
        if (!playerName) playerName = '';
        playerName = G_TOOL.getNameLimit(playerName, 10, true);
        this.node_playerName.getComponent(cc.Label).string = playerName;
    },

    _setRoomName: function _setRoomName(roomName) {
        if (roomName === undefined) roomName = '';
        if (this.node_roomName && roomName) this.node_roomName.getComponent(cc.Label).string = roomName;
    },

    showGoldValue: function showGoldValue(value) {
        this._label_gold.string = G_TOOL.changeMoney(value);
    },

    //显示玩家数值的增减
    showGoldChange: function showGoldChange(value) {
        //金钱没有变化
        //金钱变化正或者负
        //var dir = G_TOOL.getRandomBool() ? 1 : -1;
        this._showGoldCount(value);
    },
    //显示玩家数值特效
    _showGoldCount: function _showGoldCount(count) {
        if (!count) return;

        var labelNode = cc.instantiate(this.prefab_goldResultEffect);
        labelNode.parent = this.node;
        labelNode.zIndex = 2;

        labelNode.getComponent(this._goldResultCompName).showGrabGold(count);

        labelNode.scale = 0.1;
        var parentScale, widthOff;
        widthOff = this.node.width * 0.3;
        if (this._isHandle) {
            parentScale = this.node.scale;
        } else {
            parentScale = this.node.parent.scale;
        }
        if (this.node.x > cc.visibleRect.width / 2) widthOff *= -1;
        var time = this._goldResultFlyTime;
        var act1 = cc.moveTo(time, widthOff, this.node.height * 0.4);
        var act2 = cc.scaleTo(time, 1);
        var act3 = cc.delayTime(time * 2);
        labelNode.runAction(cc.sequence(cc.spawn(act1, act2), act3, cc.callFunc(this._labelMoveEnd, this, count)));
    },
    _labelMoveEnd: function _labelMoveEnd(target, count) {
        target.destroy();
    },

    onDestroy: function onDestroy() {}

});

cc._RF.pop();
},{}],"Bull100_playerContainer":[function(require,module,exports){
"use strict";
cc._RF.push(module, '6c7ea/tmxtDvIFMLUdtx57X', 'Bull100_playerContainer');
// Script/Views/Scene_Bull100/Bull100_playerContainer.js

'use strict';

//所有玩家容器管理

//座位索引seatIndex是从1开始的

//var playerData = {
//    nickname : content.nickname,
//    icon : content.icon,
//    playerId : content.playerId,
//    coin : content.coin,
//    moneyChoose : 0,
//    seatIndex : seatIndex
//}

cc.Class({
    extends: require('AutoDealing'),

    properties: {
        _dict_playerComp: null, //座位上的玩家脚本
        _playerNum: null, //场上的玩家数量

        node_playerContainer: { //所有玩家的容器，庄家和自己除外
            default: null,
            type: cc.Node,
            displayName: '所有玩家容器'
        },
        node_btnGrabDealer: { //抢庄按钮
            default: null,
            type: cc.Node,
            displayName: '抢庄按钮'
        },
        node_myself: {
            default: null,
            type: cc.Node,
            displayName: '玩家自己'
        },
        node_dealer: {
            default: null,
            type: cc.Node,
            displayName: '庄家'
        },
        prefab_player: {
            default: null,
            type: cc.Prefab,
            displayName: '座位上的玩家'
        },
        comp_seatsContainer: {
            default: null,
            type: require('Obj_seatsContainer'),
            displayName: '座位容器'
        }
    },

    // use this for initialization
    onLoad: function onLoad() {
        this._dict_playerComp = {};
        this._playerNum = 0;
        this._playerCompName = 'Bull100_playerBlock';
        this._delaerWordCompName = 'Obj_dealerWordEffect';
        this.registerButton(this.node_btnGrabDealer, this.OnClick_grabDealer, this);

        this.getMyselfComp().setIsHandle(true);
    },

    //点击了上庄按钮
    OnClick_grabDealer: function OnClick_grabDealer(event) {
        GG.bull100Mgr.send_getDealerList();
    },

    //seatInfoList：座位上的玩家；selfInfo自己；dealerInfo庄家
    setStartInfo: function setStartInfo(seatInfoList, selfInfo, dealerInfo) {
        //整理座位信息
        var dictPlayer = {};
        var selfID = GG.getPlayer().getPlayerID();
        var listLen = seatInfoList.length,
            seatIndex,
            onePlayer,
            content,
            playerComp;
        for (var i = 0; i < listLen; i++) {
            onePlayer = seatInfoList[i];
            seatIndex = onePlayer['seatIndex'];
            content = onePlayer['player'];
            content.seatIndex = seatIndex;
            dictPlayer[seatIndex] = content;
        }
        //根据信息控制位置上玩家的显隐
        //显示有数据的玩家
        for (var seatIndex in dictPlayer) {
            content = dictPlayer[seatIndex];
            //从列表中获取属于自己的信息
            if (content && content.playerId == selfID) {
                for (var attrName in content) {
                    if (attrName == 'seatIndex' && content[attrName] == 0) continue;
                    selfInfo[attrName] = content[attrName];
                }
            }
            //座位号从1开始
            if (seatIndex < 1) continue;
            //有玩家数据
            playerComp = this._addOnePlayer(seatIndex);
            if (playerComp) {
                playerComp.setPlayerData(content);
                if (content && content.playerId == selfID) this.getMyselfComp().bindSeatMyself(playerComp);
            }
        }
        //隐藏没有数据的位置
        var siteNum = this.comp_seatsContainer.getSeatsNum();
        for (var i = 0; i < siteNum; i++) {
            seatIndex = i + 1;
            if (!dictPlayer[seatIndex]) this._removeOnePlayer(seatIndex);
        }
        //从庄家数据中获取玩家自己的数据
        var isDealer = Boolean(selfID == dealerInfo.playerId);
        selfInfo.isDealer = isDealer;
        if (selfInfo.isDealer) {
            for (var attrName in dealerInfo) {
                selfInfo[attrName] = dealerInfo[attrName];
            }
            //庄家上庄按钮不可用
            this.setUpDealerBtnEnable(false);
        } else {
            //玩家上庄按钮可用
            this.setUpDealerBtnEnable(true);
            //if(!GG.bull100Mgr.checkMyselfInfo(seatInfoList)) return;
        }
        if (selfInfo.playerId) this.setOwnerInfo(selfInfo);
        this.setDealerInfo(dealerInfo);

        //当前自己是庄家的时候自己玩家需要显示的是可用余额而不是全额
        if (isDealer) {
            //因为新的机制已经没有给予玩家的信息，为了更新金额所以只能从庄家信息中计算
            this.getMyselfComp().setGoldValue(selfInfo.coin);
        }
        this.getMyselfComp().setIsDealer(isDealer);
    },

    setOwnerInfo: function setOwnerInfo(selfInfo) {
        this.getMyselfComp().setPlayerData(selfInfo);
        this.getMyselfComp().setHandleInfo(selfInfo);
    },
    setDealerInfo: function setDealerInfo(dealerInfo) {
        var newDealerInfo = {};
        for (var attrName in dealerInfo) {
            newDealerInfo[attrName] = dealerInfo[attrName];
        }
        newDealerInfo.coin = dealerInfo.usableBalance;
        this.getDealerComp().setPlayerData(newDealerInfo);
    },

    //有一个玩家中途进入
    onePlayerInsert: function onePlayerInsert(seatIndex, playerData) {
        var reg = /^\+?[1-9][0-9]*$/;
        if (reg.test(seatIndex)) {
            playerData.seatIndex = seatIndex;
            this._hidePlayer(seatIndex, playerData.playerId);
            var playerComp = this._addOnePlayer(seatIndex);
            if (playerComp) playerComp.setPlayerData(playerData);
        }
    },

    //删除重复的玩家，结束本局时候，重复进出房间会出现多个同样玩家
    _hidePlayer: function _hidePlayer(targetIndex, playerID) {
        var playerComp;
        for (var seatIndex in this._dict_playerComp) {
            playerComp = this._dict_playerComp[seatIndex];
            if (seatIndex == targetIndex) {
                //找到位置
                //if(playerComp) playerComp.setPlayerData(playerData);
            } else {
                if (playerComp && playerComp.getPlayerID() == playerID) {
                    this._removeOnePlayer(seatIndex);
                }
            }
        }
    },
    //增加一个上场玩家
    _addOnePlayer: function _addOnePlayer(siteIndex) {
        var playerComp = this._dict_playerComp[siteIndex];
        if (!playerComp) {
            var player = cc.instantiate(this.prefab_player);
            player.parent = this.node_playerContainer;

            var pos = this.comp_seatsContainer.addOnePlayer(siteIndex);
            pos = G_TOOL.adaptPos(pos);

            var size = G_TOOL.adaptSize(player.width, player.height);
            player.width = size.width;
            player.height = size.height;

            player.position = pos;
            playerComp = player.getComponent(this._playerCompName);
            this._dict_playerComp[siteIndex] = playerComp;
        } else {
            this.comp_seatsContainer.addOnePlayer(siteIndex);
        }
        this._playerNum += 1;
        return playerComp;
    },
    //一个玩家离场
    _removeOnePlayer: function _removeOnePlayer(siteIndex) {
        var playerComp = this._dict_playerComp[siteIndex];
        if (!playerComp || !playerComp.getIsShow()) return;
        playerComp.hidePlayer();
        this.comp_seatsContainer.onePlayerLeave(siteIndex);
        this._playerNum -= 1;
    },

    //显示所有玩家的金币增减特效
    showGoldChangeEffect: function showGoldChangeEffect() {
        var player;
        for (var siteIndex in this._dict_playerComp) {
            player = this._dict_playerComp[siteIndex];
            if (player) {
                player.showGoldChange();
            }
        }
        //mine
        this.getMyselfComp().showGoldChange();
    },

    //=======================

    //场上的金币结算  winDict = {0:1, 2:1, 4:1},  {桌子索引：是否胜利}
    flyWinGold: function flyWinGold(winDict) {
        var isMoveGold = false;
        //自己的金币结算
        var recordDict;
        var comp = this.getMyselfComp();
        recordDict = comp.getBetRecord();
        if (recordDict) {
            var newDict = this._getWinGoldDict(winDict, recordDict);
            this._moveGold(newDict, comp.getWorldPos());
        }
        //其他玩家的胜利金币移动
        var playerComp;
        for (var seatIndex in this._dict_playerComp) {
            playerComp = this._dict_playerComp[seatIndex];
            if (playerComp.getPlayerID() == GG.getPlayerID()) continue;
            if (playerComp && playerComp.getIsShow()) {
                recordDict = playerComp.getBetRecord();
                if (recordDict) {
                    isMoveGold = true;
                    var newDict = this._getWinGoldDict(winDict, recordDict);
                    this._moveGold(newDict, playerComp.getWorldPos());
                }
            }
        }
        //是否有吃瓜群众赢钱
        recordDict = GG.bull100Mgr.getIdleBetting();
        if (recordDict) {
            isMoveGold = true;
            var newDict = this._getWinGoldDict(winDict, recordDict);
            this._moveGold(newDict, GG.bull100Mgr.getIdleBettingPos());
        }

        //庄家回收剩余的金币
        var goldContainer = this.getGoldContainer();
        var isFly = goldContainer.recoverAllGold(this.getDealerComp().getWorldPos());
        if (isFly) isMoveGold = true;

        if (isMoveGold) GG.audioMgr.playSound(18);
    },

    _getWinGoldDict: function _getWinGoldDict(winDict, recordDict) {
        var tableType,
            newDict = {};
        for (var tableIndex in winDict) {
            tableType = winDict[tableIndex];
            if (tableType && recordDict[tableIndex]) {
                newDict[tableIndex] = recordDict[tableIndex];
            }
        }
        return newDict;
    },
    //金币结算移动
    _moveGold: function _moveGold(recoverDict, targetPos) {
        var goldNum,
            goldContainer = this.getGoldContainer();
        for (var tableIndex in recoverDict) {
            goldNum = recoverDict[tableIndex];

            var flyDataList = G_OBJ.data_flyGold_tableToPlayer();
            flyDataList.tableIndex = tableIndex;
            flyDataList.goldNum = goldNum;
            flyDataList.targetPos = targetPos;
            goldContainer.tableToPlayer(flyDataList);
        }
    },

    //设置玩家操作位置的显隐
    setMyselfIsShow: function setMyselfIsShow(isShow) {
        this.node_myself.active = isShow;
    },
    //设置抢庄按钮是否可用
    setUpDealerBtnEnable: function setUpDealerBtnEnable(isEnable) {
        this.setBtnEnable(this.node_btnGrabDealer, isEnable);
    },

    //=======================

    //获取庄家的卡牌位置
    getDealerPokerPos: function getDealerPokerPos() {
        return this.getDealerComp().getDealerPokerPos();
    },
    //获取玩家自己
    getMyselfComp: function getMyselfComp() {
        return this.node_myself.getComponent(this._playerCompName);
    },
    //获取玩家庄字特效
    getMyselfEffectComp: function getMyselfEffectComp() {
        var myselfComp = this.getMyselfComp();
        var child = myselfComp.node.getChildByName('bankerMark');
        var comp;
        if (child) {
            comp = child.getComponent(this._delaerWordCompName);
        }
        return comp;
    },
    getMyselfPos: function getMyselfPos() {
        return this.node_myself.position;
    },
    //获取庄家
    getDealerComp: function getDealerComp() {
        return this.node_dealer.getComponent(this._playerCompName);
    },
    //获取庄家庄字特效
    getDealerWordEffectComp: function getDealerWordEffectComp() {
        var dealerComp = this.getDealerComp();
        var child = dealerComp.node.getChildByName('bankerMark');
        var comp;
        if (child) {
            comp = child.getComponent(this._delaerWordCompName);
        }
        return comp;
    },
    //获取在座位上的玩家脚本
    getPlayerComp: function getPlayerComp(siteIndex) {
        return this._dict_playerComp[siteIndex];
    },
    //获取金币容器
    getGoldContainer: function getGoldContainer() {
        return GG.bull100Mgr.getGoldContainer();
    },

    //清理所有
    clearAll: function clearAll() {
        for (var seatIndex in this._dict_playerComp) {
            this._removeOnePlayer(seatIndex);
        }
    }

});

cc._RF.pop();
},{"AutoDealing":"AutoDealing","Obj_seatsContainer":"Obj_seatsContainer"}],"Bull100_pokerContainer":[function(require,module,exports){
"use strict";
cc._RF.push(module, '36070K0trNCHKLbIVOexRNn', 'Bull100_pokerContainer');
// Script/Views/Scene_Bull100/Bull100_pokerContainer.js

'use strict';

//卡牌容器


cc.Class({
    extends: cc.Component,

    properties: {
        _pool: null, //对象容器
        _startPos: null, //开始位置
        _pokerNum: null, //存在的卡牌数量
        _dict_pokerGroup: null, //卡牌对象牌组
        _pokerSize: null, //卡牌的宽高
        _coverPokerCallFunc: null, //所有背面卡牌发完
        _dict_winList: null, //胜利的卡牌
        _list_pokerResultValue: null, //卡牌开牌后的结果数值
        _list_pokerPos: null, //卡牌位置信息
        _maxPokerNum: null, //最大的卡牌数量
        _list_hidePokers: null, //隐藏的卡牌列表

        prefab_poker: cc.Prefab },

    // use this for initialization
    onLoad: function onLoad() {
        this._pokerCompName = 'Obj_poker';
        this._list_hidePokers = [];
        this._pokerNum = 0;

        //卡牌间隔
        this._offPokerX = 20;
        //发牌时间间隔
        this._offGiveTime = 0.08;
        //每副牌之间的时间间隔
        this._offGroupTime = 0.3;
        //单张卡牌移动时间
        this._pokerMoveTime = 0.8;
        //一副牌有几张
        this._groupPokerNum = 5;
        //卡牌第二个动作移动时间
        this._pokerMoveTime2 = 0.2;
        //对卡牌进行缩放
        this._pokerScale = 1;
        //开牌间隔
        this._openInterval = 0.6;
    },

    //分发盖住的牌
    giveCoverPokers: function giveCoverPokers(posList, callFunc, isOverAni) {
        this._coverPokerCallFunc = callFunc;
        this._maxPokerNum = posList.length * this._groupPokerNum;
        this._clearPokers();
        this._pokerData = null;
        if (posList) {
            this._list_pokerPos = posList;
            this._pokerData = this._list_pokerPos.concat([]);
        }
        if (isOverAni) this._showPokerGroup();else {
            this._givePokerGroup();
        }
    },

    //-------------------------------

    //直接将需要的牌显示出来，不做动画
    _showPokerGroup: function _showPokerGroup() {
        var pos,
            posListLen = this._pokerData.length,
            poker,
            curNum;
        for (var i = posListLen - 1; i >= 0; i--) {
            pos = this._pokerData[i];
            for (var j = 0; j < this._groupPokerNum; j++) {
                poker = this._getOnePoker();
                if (poker) {
                    curNum = this._pokerNum % this._groupPokerNum;
                    poker.position = cc.p(pos.x + this._offPokerX * curNum, pos.y - this._pokerOffY);
                    if (!this._dict_pokerGroup[this._getGroupNum()]) this._dict_pokerGroup[this._getGroupNum()] = [];
                    this._dict_pokerGroup[this._getGroupNum()].push(poker);
                    this._pokerNum += 1;
                }
            }
        }
        if (this._coverPokerCallFunc) {
            this._coverPokerCallFunc();
            this._coverPokerCallFunc = null;
        }
    },

    //--------------------------------
    //发一副牌
    _givePokerGroup: function _givePokerGroup() {
        if (!this._pokerData || this._pokerData.length < 1) {
            //所有卡牌发完
            if (this._coverPokerCallFunc) {
                this._coverPokerCallFunc();
                this._coverPokerCallFunc = null;
            }
            return;
        }

        this._flyNum = 5;
        this._dict_pokerGroup[this._getGroupNum()] = [];
        var targetPos = this._pokerData.pop();
        for (var i = 0; i < this._groupPokerNum; i++) {
            //最后坐标需要计算卡牌的宽高
            this._flyOnePoker(targetPos);
        }
        GG.audioMgr.playSound(14);
    },
    //移动单张牌
    _flyOnePoker: function _flyOnePoker(targetPos) {
        var poker = this._getOnePoker();
        if (!targetPos || !poker) return;
        var curNum = this._pokerNum % this._groupPokerNum;
        var act1 = cc.delayTime(this._offGiveTime * curNum);

        var needPos = cc.p(targetPos.x, targetPos.y - this._pokerOffY);
        var act2 = cc.moveTo(G_TOOL.getUniformTime(poker.position, needPos, this._pokerMoveTime), needPos);
        poker.stopAllActions();
        poker.runAction(cc.sequence(act1, act2, cc.callFunc(this._onePokerFlyEnd, this)));
        this._dict_pokerGroup[this._getGroupNum()].push(poker);
        this._pokerNum += 1;
    },
    _onePokerFlyEnd: function _onePokerFlyEnd(target) {
        //有一张卡牌移动结束
        this._flyNum -= 1;
        if (this._flyNum < 1) {
            this._sortPokerOff();
            var act = cc.delayTime(this._offGroupTime);
            this.node.runAction(cc.sequence(act, cc.callFunc(this._givePokerGroup, this)));
        }
    },
    //把发好的牌散开
    _sortPokerOff: function _sortPokerOff() {
        var pokerList = this._dict_pokerGroup[this._getGroupNum() - 1];
        var len = pokerList.length;
        var poker;
        for (var i = 0; i < len; i++) {
            poker = pokerList[i];
            if (!poker) continue;
            poker.stopAllActions();
            poker.runAction(cc.moveBy(this._pokerMoveTime2, this._offPokerX * i, 0));;
        }
    },

    //设置卡牌的信息
    setPokersData: function setPokersData(dataList, pokerValueList) {
        this._list_pokerResultValue = pokerValueList;
        var pokerGroup,
            pokerData,
            pokerNodeList,
            pokerGroupNum = this._getGroupNum();
        for (var i = 0; i < pokerGroupNum; i++) {
            pokerGroup = dataList[i];
            pokerNodeList = this._dict_pokerGroup[i];
            if (pokerGroup) {
                for (var j = 0; j < pokerGroup.length; j++) {
                    pokerData = pokerGroup[j];
                    this._setOnePokerInfo(pokerNodeList[j], pokerData.pokerIndex, pokerData.isOpen);
                }
            }
        }
    },
    _setOnePokerInfo: function _setOnePokerInfo(poker, pokerIndex, isOpen) {
        var pokerInfo = G_DATA.getPokerInfo(pokerIndex);
        var pokerComp = poker.getComponent(this._pokerCompName);
        pokerComp.setPokerInfo(pokerInfo.pokerType, pokerInfo.pokerValue, isOpen);
    },

    //开牌
    openPokers: function openPokers(dict) {
        this._dict_winList = dict;
        this._openGroupIndex = 0;
        this._openOneGroup();
    },
    //开启一副牌
    _openOneGroup: function _openOneGroup() {
        if (this._pokerNum < 1) {
            return;
        }
        var pokerList = this._dict_pokerGroup[this._openGroupIndex];
        if (!pokerList) {
            //卡牌全部打开
            return;
        }
        var comp,
            pokerInfo,
            callFunc = this._openCallBack.bind(this);
        for (var i = 0; i < pokerList.length; i++) {
            comp = pokerList[i].getComponent(this._pokerCompName);
            comp.openPoker(callFunc);
            callFunc = null;
        }
        this._openGroupIndex += 1;
        GG.audioMgr.playSound(16);
        //this.node.runAction(cc.sequence(cc.delayTime(this._openInterval), cc.callFunc(this._openOneGroup, this)));
    },
    _openCallBack: function _openCallBack() {
        if (this._openGroupIndex > 1 && this._dict_winList) {
            var tableIndex = this._openGroupIndex - 2;
            var minIndex = GG.bull100Mgr.getMinTableIndex(tableIndex);
            var bigIndex = GG.bull100Mgr.getBigTableIndex(tableIndex);
            var curIndex = this._dict_winList[bigIndex] ? bigIndex : minIndex;
            GG.bull100Mgr.showTableWin(curIndex, this._dict_winList[curIndex]);
        }
        //显示这副卡牌的值
        var value = this._list_pokerResultValue[this._openGroupIndex - 1];
        var pos = this._list_pokerPos[this._list_pokerPos.length - this._openGroupIndex];
        GG.bull100Mgr.showPokerResult(cc.p(pos.x + this._pokerSize.width * 0.5, pos.y - +this._pokerSize.height * 0.5), value);
        var audioID = value == 0 ? 11 : value;
        GG.audioMgr.playSound(audioID);
        //打开下一付牌
        this._openOneGroup();
    },

    //增加一张卡牌
    _getOnePoker: function _getOnePoker() {
        if (!this.prefab_poker) return null;
        //if(!this._pool) this._pool = new cc.NodePool('Bull100_pokerContainer');

        var pokerNode = this._list_hidePokers.pop();
        if (!pokerNode) {
            pokerNode = cc.instantiate(this.prefab_poker);
            if (!this._pokerSize) {
                this._pokerSize = pokerNode.getComponent(this._pokerCompName).getPokerSize();
                this._pokerOffY = this._pokerSize.height * this._pokerScale * 0.5;
            }
            pokerNode.parent = this.node;
            pokerNode.scale = this._pokerScale;
        }
        pokerNode.stopAllActions();
        pokerNode.active = true;
        pokerNode.position = this._getStartPos();
        pokerNode.getComponent(this._pokerCompName).showPokerNegative();
        return pokerNode;
    },

    _removePoker: function _removePoker(pokerNode) {
        //pokerNode.stopAllActions()
        pokerNode.getComponent(this._pokerCompName).clearAllActions();
        pokerNode.getComponent(this._pokerCompName).showPokerNegative();
        pokerNode.active = false;
        //this._pool.put(pokerNode);
        this._list_hidePokers.push(pokerNode);
    },

    _deletePokers: function _deletePokers() {
        //var poker = this.node.children;
        //for(var key in poker){
        //    poker[key].destroy();
        //}
    },
    _clearPokers: function _clearPokers() {
        this._pokerNum = 0;
        this._dict_pokerGroup = {};
        var pokers = this.node.children;
        this._list_hidePokers = [];
        var comp,
            pokerNum = pokers.length;
        for (var i = pokerNum - 1; i >= 0; i--) {
            comp = pokers[i].getComponent(this._pokerCompName);
            if (comp) this._removePoker(pokers[i]);
        }
    },

    //获取初始位置
    _getStartPos: function _getStartPos() {
        if (!this._startPos) {
            this._startPos = G_DATA.getBottomTipPos();
        }
        return this._startPos;
    },
    //获取当前有几组卡牌
    _getGroupNum: function _getGroupNum() {
        return Math.floor(this._pokerNum / this._groupPokerNum);
    },
    //获取当前是否已经发完完整的牌
    getIsGivePokerEnd: function getIsGivePokerEnd() {
        return !Boolean(this._coverPokerCallFunc);
    },

    //清理所有
    clearAll: function clearAll() {
        this._clearPokers();
        this._dict_winList = null;
        this.node.stopAllActions();
    },

    onDestroy: function onDestroy() {
        this._deletePokers();
        if (this._pool) this._pool.clear();
    }

});

cc._RF.pop();
},{}],"Bull100_pokerResultContainer":[function(require,module,exports){
"use strict";
cc._RF.push(module, '4c19f4ThPlPK6/llGibgPGc', 'Bull100_pokerResultContainer');
// Script/Views/Scene_Bull100/Bull100_pokerResultContainer.js

'use strict';

//显示卡牌的结果

cc.Class({
    extends: cc.Component,

    properties: {
        prefab_pokerResult: {
            default: null,
            type: cc.Prefab,
            displayName: '卡牌结果'
        }
    },

    // use this for initialization
    onLoad: function onLoad() {
        this._pokerResultCompName = 'Obj_onPokerResult';
    },

    showPokerResult: function showPokerResult(pos, pokerValue) {
        if (!this._list_pokerResult) this._list_pokerResult = [];

        var resultComp, resultNode, needComp;
        for (var i = 0; i < this._list_pokerResult.length; i++) {
            resultComp = this._list_pokerResult[i];
            if (resultComp && !resultComp.getIsShow()) {
                //有隐藏的卡牌
                needComp = resultComp;
                break;
            }
        }
        if (!needComp) {
            resultNode = cc.instantiate(this.prefab_pokerResult);
            resultNode.parent = this.node;
            needComp = resultNode.getComponent(this._pokerResultCompName);
            this._list_pokerResult.push(needComp);
        }
        needComp.showResult(pos, pokerValue, true);
    },
    _clearPokerResult: function _clearPokerResult() {
        if (this._list_pokerResult) {
            for (var i = 0; i < this._list_pokerResult.length; i++) {
                this._list_pokerResult[i].hideOnPokerResult();
            }
        }
    },

    clearAll: function clearAll() {
        this._clearPokerResult();
    }

});

cc._RF.pop();
},{}],"Bull100_showResult":[function(require,module,exports){
"use strict";
cc._RF.push(module, '420eb+YEfVKo5P4BV/wWN52', 'Bull100_showResult');
// Script/Views/Scene_Bull100/Bull100_showResult.js

'use strict';

//显示百人的赛事结果界面


cc.Class({
    extends: cc.Component,

    properties: {
        _list_rankHead: null, //排行的头像列表
        _winColor: null, //胜利的颜色
        _loseColor: null, //失败的颜色

        node_myWinGold: {
            default: null,
            type: cc.Node,
            displayName: '自己赢的钱'
        },
        prefab_head: {
            default: null,
            type: cc.Prefab,
            displayName: '头像'
        },
        node_container: {
            default: null,
            type: cc.Node,
            displayName: '头像容器'
        }
    },

    // use this for initialization
    onLoad: function onLoad() {
        this._headCompName = 'Obj_winRankHead';
        this._loseColor = new cc.Color(199, 199, 199);
    },

    //显示结果
    showResult: function showResult(dataObj) {
        this.node.active = true;
        var myChangeGold = dataObj.myChangeGold;
        if (!myChangeGold) myChangeGold = 0;
        this._setGoldValue(myChangeGold);

        var dataList = [{
            name: '人1',
            addGold: 99
        }];
        var rankDict = dataObj.othersInfo;
        if (rankDict) {
            dataList = [];
            var info;
            for (var seatIndex in rankDict) {
                info = rankDict[seatIndex];
                var changeGold = info.changeGold;
                if (changeGold > 0) {
                    dataList.push({
                        name: info.name,
                        addGold: changeGold,
                        icon: info.icon
                    });
                }
            }
        }
        this._showRank(dataList);
    },

    _showRank: function _showRank(dataList) {
        var heads = this.node_container.children;
        var len = heads.length,
            head,
            data;
        for (var i = 0; i < heads.length; i++) {
            head = heads[i].getComponent(this._headCompName);
            if (head) {
                data = dataList[i];
                if (data) {
                    head.setIsShow(true);
                    head.setData(data);
                } else {
                    head.setIsShow(false);
                }
            }
        }
    },

    _setGoldValue: function _setGoldValue(newValue) {
        var isPlus = Boolean(newValue > 0);
        this._setMyGoldColor(isPlus);
        var showStr;
        if (isPlus) showStr = '+' + newValue;else showStr = newValue + '';
        this.node_myWinGold.getComponent(cc.Label).string = showStr;
    },

    _setIsShow: function _setIsShow(isShow) {
        this.node.active = isShow;
    },

    _setMyGoldColor: function _setMyGoldColor(isWin) {
        if (isWin) {
            if (this._winColor) {
                this.node_myWinGold.color = this._winColor;
                this._winColor = null;
            }
        } else {
            if (!this._winColor) this._winColor = this.node_myWinGold.color;
            this.node_myWinGold.color = this._loseColor;
        }
    }

});

cc._RF.pop();
},{}],"Bull100_tableContainer":[function(require,module,exports){
"use strict";
cc._RF.push(module, '29ed5kqelRJQ6wjhrsG5Xlr', 'Bull100_tableContainer');
// Script/Views/Scene_Bull100/Bull100_tableContainer.js

'use strict';

//存放所有的桌子


cc.Class({
    extends: cc.Component,

    properties: {
        prefab_table: cc.Prefab },

    // use this for initialization
    onLoad: function onLoad() {
        this._tableCompName = 'Bull100_table';

        //this._addTables();
    },

    _addTables: function _addTables() {
        var tableNum = 4;
        for (var i = 0; i < tableNum; i++) {
            var table = cc.instantiate(this.prefab_table);
            if (!table) continue;
            table.parent = this.node;
        }
    },

    //初始化所有的桌子
    initAllTables: function initAllTables() {
        var tables = this.node.children;
        var table, comp;
        for (var i = 0; i < tables.length; i++) {
            table = tables[i];
            comp = table.getComponent(this._tableCompName);
            if (comp) comp.initTable(i);
        }
    },

    //获取每张桌子对应的卡牌的位置
    getTablePokerPos: function getTablePokerPos() {
        var tables = this.node.children;
        var table,
            comp,
            posList = [];
        for (var i = tables.length - 1; i >= 0; i--) {
            table = tables[i];
            comp = table.getComponent(this._tableCompName);
            if (comp) {
                posList.push(comp.getPokerPos());
            }
        }
        return posList;
    },

    //开启所有桌子的点击功能
    setTableTouchEnable: function setTableTouchEnable(isEnable) {
        var tables = this.node.children;
        var table, comp;
        for (var i = 0; i < tables.length; i++) {
            table = tables[i];
            comp = table.getComponent(this._tableCompName);
            if (comp) comp.setTouchEnable(isEnable);
        }
    },

    //显示某张桌子的胜利失败情况
    showTableWin: function showTableWin(tableIndex, showWin) {
        var tables = this.node.children;
        var containerIndex = GG.bull100Mgr.getTableContainerIndex(tableIndex);
        var table = tables[containerIndex];
        if (table) {
            var comp = table.getComponent(this._tableCompName);
            if (comp) {
                comp.showWin(tableIndex, showWin);
            }
        }
    },

    //获取对应桌子索引的，多个随机金币位置
    getGoldPosList: function getGoldPosList(tableIndex, goldNum) {
        var tables = this.node.children;
        var containerIndex = GG.bull100Mgr.getTableContainerIndex(tableIndex);
        var table = tables[containerIndex];
        if (table) {
            return table.getComponent(this._tableCompName).getGoldPosList(tableIndex, goldNum);
        }
        return null;
    },

    //设置桌子的成功投注信息
    setBettingSuccess: function setBettingSuccess(tableIndex, goldValue, isMine) {
        var tables = this.node.children;
        var containerIndex = GG.bull100Mgr.getTableContainerIndex(tableIndex);
        var table = tables[containerIndex];
        if (table) {
            //设置自己桌子的成功投注信息
            if (isMine) table.getComponent(this._tableCompName).setMyselfBettingSuccess(tableIndex, goldValue);else table.getComponent(this._tableCompName).setBettingSuccess(tableIndex, goldValue);
        }
    }
});

cc._RF.pop();
},{}],"Bull100_table":[function(require,module,exports){
"use strict";
cc._RF.push(module, '67349AfexdLn4EN0FD/POqC', 'Bull100_table');
// Script/Views/Scene_Bull100/Bull100_table.js

'use strict';

//一张赌桌

cc.Class({
    extends: cc.Component,

    properties: {
        _typeValue: null, //该桌赌牌的类型值
        _pool: null, //放置金币的容器
        _bigTableIndex: null, //当前桌子的索引,同时也是取大的桌子的索引
        _minTableIndex: null, //是取小的桌子的索引
        _bigCenterPos: null, //左边的金币坐标中心
        _minCenterPos: null, //右边的金币坐标中心
        _winTableType: null, //胜利的桌子类型

        _bigGoldNum: null, //左边金币
        _minGoldNum: null, //右边金币
        _bigMyGoldNum: null, //左边金币
        _minMyGoldNum: null, //右边金币

        node_big: cc.Node,
        node_min: cc.Node,
        frame_bigLight: cc.SpriteFrame,
        frame_minLight: cc.SpriteFrame,
        //显示金币的上下label
        node_bigUpLabel: {
            default: null,
            type: cc.Node,
            displayName: '押大总额节点'
        },
        node_bigDownLabel: {
            default: null,
            type: cc.Node,
            displayName: '自己押大节点'
        },
        node_minUpLabel: {
            default: null,
            type: cc.Node,
            displayName: '押小总额节点'
        },
        node_minDownLabel: {
            default: null,
            type: cc.Node,
            displayName: '自己押小节点'
        },
        node_winFrame: {
            default: null,
            type: cc.Node,
            displayName: '胜利特效框'
        },
        label_leftUp: {
            default: null,
            type: cc.Label,
            displayName: '所有玩家押大金币总额'
        },
        label_rightUp: {
            default: null,
            type: cc.Label,
            displayName: '所有玩家押小金币总额'
        }
    },

    // use this for initialization
    onLoad: function onLoad() {
        this._scrollCompName = 'Obj_scrollValue';

        //卡牌X位置偏移
        this._pokerOffX = 0.4;
        this._winColor = this.node_bigDownLabel.children[1].color;
        this._lostColor = new cc.Color(189, 188, 188);
    },

    //初始化赌桌
    initTable: function initTable(_index) {
        this._setTableIndex(_index);
        this._setBigMultiple(0);
        this._setMinMultiple(0);

        this._setBigDownGold(0);
        this._setBigUpGold(0);
        this._setMinDownGold(0);
        this._setMinUpGold(0);
        this.resetWinShow();
    },

    onClick_big: function onClick_big() {
        var mgr = GG.bull100Mgr;
        var goldNum = mgr.getMyselfFlyGoldNum();
        mgr.touchTable(this._bigTableIndex, this._getBigGoldPos(goldNum));
    },
    onClick_min: function onClick_min() {
        var mgr = GG.bull100Mgr;
        var goldNum = GG.bull100Mgr.getMyselfFlyGoldNum();
        GG.bull100Mgr.touchTable(this._minTableIndex, this._getMinGoldPos(goldNum));
    },

    //投注成功后显示该桌子的投注信息
    setBettingSuccess: function setBettingSuccess(tableIndex, goldValue) {
        if (tableIndex % 2 == 0) {
            //所有玩家押大总额显示
            this._bigGoldNum += goldValue;
            this._setBigUpGold(this._bigGoldNum);
        } else {
            //所有玩家押小总额显示
            this._minGoldNum += goldValue;
            this._setMinUpGold(this._minGoldNum);
        }
    },

    //自己投注成功后显示该桌子的投注信息
    setMyselfBettingSuccess: function setMyselfBettingSuccess(tableIndex, goldValue) {
        if (tableIndex % 2 == 0) {
            //自己押大
            this._bigMyGoldNum += goldValue;
            this._setBigDownGold(this._bigMyGoldNum);
        } else {
            //自己押小
            this._minMyGoldNum += goldValue;
            this._setMinDownGold(this._minMyGoldNum);
        }
        this.setBettingSuccess(tableIndex, goldValue);
    },

    //显示该桌子上金币的胜利
    showWin: function showWin(tableIndex, multiple) {
        //区域倍数
        var bettingLabel = null,
            curGoldValue = null;
        if (!multiple) multiple = 1;
        if (!this._firstBigImg) this._firstBigImg = this.node_big.getComponent(cc.Sprite).spriteFrame;
        if (!this._firstMinImg) this._firstMinImg = this.node_min.getComponent(cc.Sprite).spriteFrame;
        this.node_winFrame.active = true;
        //this.node_winFrame.width = this.node_big.parent.width*1.15;

        if (tableIndex % 2 == 0) {
            //大
            this._winTableType = G_TYPE.tableType.big;
            this.node_big.getComponent(cc.Sprite).spriteFrame = this.frame_bigLight;
            this.node_winFrame.x = this.node_big.parent.x;
            if (this._bigMyGoldNum > 0) {
                this._setBigMultiple(multiple);
                bettingLabel = this.node_bigDownLabel.children[1].getComponent(cc.Label);
                curGoldValue = this._bigMyGoldNum;
            }
            //lost
            if (this._minMyGoldNum > 0) {
                this._setMinMultiple(multiple);
                this._setMinDownGold(this._minMyGoldNum * multiple, true);
                this.node_minDownLabel.children[0].color = this._lostColor;
                this.node_minDownLabel.children[1].color = this._lostColor;
            }
        } else {
            //小
            this._winTableType = G_TYPE.tableType.min;
            this.node_min.getComponent(cc.Sprite).spriteFrame = this.frame_minLight;
            this.node_winFrame.x = this.node_min.parent.x;
            if (this._minMyGoldNum > 0) {
                this._setMinMultiple(multiple);
                bettingLabel = this.node_minDownLabel.children[1].getComponent(cc.Label);
                curGoldValue = this._minMyGoldNum;
            }

            //lost
            if (this._bigMyGoldNum > 0) {
                this._setBigMultiple(multiple);
                this._setBigDownGold(this._bigMyGoldNum * multiple, true);
                this.node_bigDownLabel.children[0].color = this._lostColor;
                this.node_bigDownLabel.children[1].color = this._lostColor;
            }
        }

        if (bettingLabel) {
            //胜利区域有投注
            var dataObj = {
                startNum: 0,
                targetNum: curGoldValue * multiple,
                label: bettingLabel,
                formatStr: '',
                callFunc: this._scrollCall.bind(this)
            };
            this.node.getComponent(this._scrollCompName).scrollLabel(dataObj);
        }
    },
    //胜利滚动结束
    _scrollCall: function _scrollCall() {},
    //清理胜利的显示
    resetWinShow: function resetWinShow() {
        this.node_winFrame.active = false;
        switch (this._winTableType) {
            case G_TYPE.tableType.big:
                this.node_big.getComponent(cc.Sprite).spriteFrame = this._firstBigImg;
                this.node_minDownLabel.children[0].color = this._winColor;
                this.node_minDownLabel.children[1].color = this._winColor;
                break;
            case G_TYPE.tableType.min:
                this.node_min.getComponent(cc.Sprite).spriteFrame = this._firstMinImg;
                this.node_bigDownLabel.children[0].color = this._winColor;
                this.node_bigDownLabel.children[1].color = this._winColor;
                break;
            default:
                break;
        }
    },

    //====================================================

    setTouchEnable: function setTouchEnable(isEnable) {
        var bigParent = this.node_big.parent;
        var minParent = this.node_min.parent;
        if (isEnable) {
            bigParent.on(cc.Node.EventType.TOUCH_START, this.onClick_big, this);
            minParent.on(cc.Node.EventType.TOUCH_START, this.onClick_min, this);
        } else {
            bigParent.off(cc.Node.EventType.TOUCH_START, this.onClick_big, this);
            minParent.off(cc.Node.EventType.TOUCH_START, this.onClick_min, this);
        }
    },

    //获取随机的金币位置
    getGoldPosList: function getGoldPosList(tableIndex, goldNum) {
        var posList;
        if (tableIndex % 2 == 0) {
            //大
            posList = this._getBigGoldPos(goldNum);
        } else posList = this._getMinGoldPos(goldNum);
        return posList;
    },
    _getBigGoldPos: function _getBigGoldPos(num) {
        if (!num) num = 1;
        var goldPos,
            posList = [];
        for (var i = 0; i < num; i++) {
            goldPos = this._initGoldPos();
            goldPos.x += this._bigCenterPos.x;
            goldPos.y += this._bigCenterPos.y;
            posList.push(goldPos);
        }
        return posList;
    },
    _getMinGoldPos: function _getMinGoldPos(num) {
        if (!num) num = 1;
        var goldPos,
            posList = [];
        for (var i = 0; i < num; i++) {
            goldPos = this._initGoldPos();
            goldPos.x += this._minCenterPos.x;
            goldPos.y += this._minCenterPos.y;
            posList.push(goldPos);
        }
        return posList;
    },
    _initGoldPos: function _initGoldPos() {
        var parentScale = this.node.parent.scale;
        var bigBG = this.node_big.parent;
        if (!this._bigCenterPos) {
            var parentPos = this.node.parent.position;
            var containerPos = this.node.parent.parent.position;
            var minBG = this.node_min.parent;
            this._bigCenterPos = cc.p(parentPos.x + (this.node.x + bigBG.x) * parentScale + containerPos.x, parentPos.y + (this.node.y + bigBG.y) * parentScale + containerPos.y);
            this._minCenterPos = cc.p(parentPos.x + (this.node.x + minBG.x) * parentScale + containerPos.x, parentPos.y + (this.node.y + minBG.y) * parentScale + containerPos.y);
            this._goldHeight = (bigBG.height * 0.5 - this.node_bigDownLabel.height) * parentScale;
        }

        //假设金币的宽度为该值
        var goldWidth2 = this._getGoldSize().width * 0.5 * 0.5;
        var dir;

        var maxX = bigBG.width * 0.5 * parentScale - goldWidth2;
        var goldX = G_TOOL.getRandomArea(0, maxX);
        dir = G_TOOL.getRandomBool() ? 1 : -1;
        goldX *= dir;

        var maxY = this._goldHeight - goldWidth2;
        var goldY = G_TOOL.getRandomArea(0, maxY);
        dir = G_TOOL.getRandomBool() ? 1 : -1;
        goldY *= dir;
        return cc.p(goldX, goldY);
    },

    //----------------------------

    //所有玩家押大总额
    _setBigUpGold: function _setBigUpGold(goldNum) {
        if (!goldNum) {
            this._bigGoldNum = 0;
            this.node_bigUpLabel.active = false;
            this.label_leftUp.string = '';
        } else {
            this.node_bigUpLabel.active = true;
            var labelNode = this.label_leftUp;
            if (labelNode) labelNode.string = G_TOOL.changeMoney(goldNum);
        }
    },
    //所有玩家押小总额
    _setMinUpGold: function _setMinUpGold(goldNum) {
        if (!goldNum) {
            this._minGoldNum = 0;
            this.node_minUpLabel.active = false;
            this.label_rightUp.string = '';
        } else {
            this.node_minUpLabel.active = true;
            var labelNode = this.label_rightUp;
            if (labelNode) labelNode.string = G_TOOL.changeMoney(goldNum);
        }
    },

    //自己押注大显示
    _setBigDownGold: function _setBigDownGold(goldNum, isLoseShow) {
        if (!goldNum) {
            this._bigMyGoldNum = 0;
            this.node_bigDownLabel.active = false;
        } else {
            this.node_bigDownLabel.active = true;
            var labelNode = this.node_bigDownLabel.children[1];
            var gold;
            if (labelNode) gold = G_TOOL.changeMoney(goldNum);
            if (isLoseShow) gold = '-' + gold; //输钱显示为-
            labelNode.getComponent(cc.Label).string = gold;
        }
    },
    //设置押大的时候倍数的位置
    _setBigMultiple: function _setBigMultiple(multiple) {
        var labelNode = this.node_bigDownLabel.children[0];
        if (labelNode) {
            var str = '',
                rightNode = this.node_bigDownLabel.children[1];
            if (multiple) {
                str = "X" + multiple;
                this._changeDownLabel(rightNode, true);
            } else {
                this._changeDownLabel(rightNode, false);
            }
            labelNode.getComponent(cc.Label).string = str;
        }
    },

    //----------------------------

    //自己押注小显示
    _setMinDownGold: function _setMinDownGold(goldNum, isLoseShow) {
        if (!goldNum) {
            this._minMyGoldNum = 0;
            this.node_minDownLabel.active = false;
        } else {
            this.node_minDownLabel.active = true;
            var labelNode = this.node_minDownLabel.children[1];
            var gold;
            if (labelNode) gold = G_TOOL.changeMoney(goldNum);
            if (isLoseShow) gold = '-' + gold; //输钱显示为-
            labelNode.getComponent(cc.Label).string = gold;
        }
    },
    //设置押小的时候倍数的位置
    _setMinMultiple: function _setMinMultiple(multiple) {
        var labelNode = this.node_minDownLabel.children[0];
        if (labelNode) {
            var str = '',
                rightNode = this.node_minDownLabel.children[1];
            if (multiple) {
                str = "X" + multiple;
                this._changeDownLabel(rightNode, true);
            } else {
                this._changeDownLabel(rightNode, false);
            }
            labelNode.getComponent(cc.Label).string = str;
        }
    },

    //设置底部label随着倍数是否显示而变化位置
    _changeDownLabel: function _changeDownLabel(curLabel, isRight) {
        if (isRight) {
            curLabel.anchorX = 1;
            curLabel.x = curLabel.parent.width * 0.43;
        } else {
            curLabel.anchorX = 0.5;
            curLabel.x = 0;
        }
    },
    //设置索引信息
    _setTableIndex: function _setTableIndex(index) {
        this._bigTableIndex = GG.bull100Mgr.getBigTableIndex(index);
        this._minTableIndex = GG.bull100Mgr.getMinTableIndex(index);
    },

    //获取桌子底下卡牌的位置
    getPokerPos: function getPokerPos() {
        var parentPos = this.node.parent.position;
        var scale = this.node.parent.scale;
        var nodePos = this.node.position;
        var posX = parentPos.x + nodePos.x * scale - this.node.width * 0.5 * scale * this._pokerOffX;
        var posY = parentPos.y + nodePos.y * scale - this.node.height * 0.55 * scale;
        var contianerParentPos = this.node.parent.parent.position;
        return cc.p(posX + contianerParentPos.x, posY + contianerParentPos.y);
    },
    //获取父节点的坐标
    _getParentPos: function _getParentPos() {
        var parentPos = this.node.parent.position;
        var scale = this.node.parent.scale;
        return cc.p(parentPos.x * scale, parentPos.y * scale);
    },
    //获取金币的宽高
    _getGoldSize: function _getGoldSize() {
        if (!this._goldSize) {
            this._goldSize = GG.bull100Mgr.getGoldImgSize();
        }
        return this._goldSize;
    }

});

cc._RF.pop();
},{}],"Bull100_topEffect":[function(require,module,exports){
"use strict";
cc._RF.push(module, '6fe37k7FJBF1p4TXNOChhYN', 'Bull100_topEffect');
// Script/Views/Scene_Bull100/Effect/Bull100_topEffect.js

'use strict';

//放在游戏最上面的特效


cc.Class({
    extends: cc.Component,

    properties: {
        _bettingCallFunc: null, //开始投注动画的回调
        _startCallFunc: null, //开始游戏动画的回调
        _resultData: null, //结算界面中的数据

        prefab_start: {
            default: null,
            type: cc.Prefab,
            displayName: '开始游戏动画'
        },
        prefab_betting: {
            default: null,
            type: cc.Prefab,
            displayName: '开始投注动画'
        },
        prefab_win: {
            default: null,
            type: cc.Prefab,
            displayName: '胜利动画'
        },
        prefab_lose: {
            default: null,
            type: cc.Prefab,
            displayName: '失败动画'
        },
        prefab_showResult: {
            default: null,
            type: cc.Prefab,
            displayName: '结果显示容器'
        },
        node_grayLayer: {
            default: null,
            type: cc.Node,
            displayName: '灰色层'
        }
    },

    // use this for initialization
    onLoad: function onLoad() {
        this._winAniName = 'platform_win';
        this._loseAniName = 'platform_lose';
        this._resultCompName = 'Bull100_showResult';
        this._pokerResultCompName = 'Obj_onPokerResult';
    },

    //开始游戏
    playStartGameAni: function playStartGameAni(callFunc) {
        this.playStartAni('grab_start', callFunc);
        GG.audioMgr.playSound(13);
    },
    //播放开始动画
    playStartAni: function playStartAni(aniName, callFunc) {
        if (!aniName) aniName = '';
        this._startCallFunc = callFunc;
        if (!this._startAni) {
            this._startAni = cc.instantiate(this.prefab_start);
            this._startAni.parent = this.node;
            //ani.scale = G_Config_common.frameScale;
            var comp = this._startAni.getComponent(dragonBones.ArmatureDisplay);
            //comp.addEventListener(dragonBones.EventObject.FRAME_EVENT, this._frameEvent, this);
            comp.addEventListener(dragonBones.EventObject.COMPLETE, this._startAniEnd, this);
        }

        this._startAni.position = this._getStartAniPos();
        this._startAni.active = true;
        this._startAni.getComponent(dragonBones.ArmatureDisplay).playAnimation(aniName, 1);
    },
    _startAniEnd: function _startAniEnd(event) {
        //动画结束
        if (this._startAni) this._startAni.active = false;
        if (this._startCallFunc) {
            this._startCallFunc();
            this._startCallFunc = null;
        }
    },
    _frameEvent: function _frameEvent(event) {
        GG.bull100Mgr.shakeGame();
    },
    //清理开始动画
    clearStartAni: function clearStartAni() {
        if (this._startAni) this._startAni.active = false;
        this._startCallFunc = null;
    },

    //============================================

    //开始投注
    playStartBettingAni: function playStartBettingAni(callFunc) {
        this.playBettingAni('platform_bet', callFunc);
    },
    //投注结束
    playBettingEnd: function playBettingEnd(callFunc) {
        this.playBettingAni('platform_betOver', callFunc);
    },
    //播放开始投注动画
    playBettingAni: function playBettingAni(aniName, callFunc) {
        if (!aniName) aniName = '';
        this._bettingCallFunc = callFunc;
        if (!this._bettingAni) {
            this._bettingAni = cc.instantiate(this.prefab_betting);
            this._bettingAni.parent = this.node;
            //ani.scale = G_Config_common.frameScale;
            var comp = this._bettingAni.getComponent(dragonBones.ArmatureDisplay);
            //comp.addEventListener(dragonBones.EventObject.FRAME_EVENT, this._frameEvent, this);
            comp.addEventListener(dragonBones.EventObject.COMPLETE, this._bettingAniEnd, this);
        }
        this._bettingAni.position = this._getStartAniPos();
        this._bettingAni.active = true;
        this._bettingAni.getComponent(dragonBones.ArmatureDisplay).playAnimation(aniName, 1);
    },
    _bettingAniEnd: function _bettingAniEnd(event) {
        //动画结束
        if (this._bettingAni) this._bettingAni.active = false;
        if (this._bettingCallFunc) {
            this._bettingCallFunc();
            this._bettingCallFunc = null;
        }
    },
    //清理开始投注动画
    clearBettingAni: function clearBettingAni() {
        if (this._bettingAni) {
            this._bettingAni.active = false;
        }
        this._bettingCallFunc = null;
    },

    _getStartAniPos: function _getStartAniPos() {
        var designSize = cc.visibleRect;
        return cc.p(designSize.width / 2, designSize.height * 0.6);
    },

    //================================胜利动画

    //显示胜利或者失败
    showResultEffect: function showResultEffect(data, callFunc) {
        if (data.myChangeGold != undefined) {
            this.setGrayIsShow(true);
            if (data.myChangeGold > 0) {
                this._playWin(data, callFunc);
            } else {
                this._playLose(data, callFunc);
            }
        } else {
            if (callFunc) {
                callFunc();
                callFunc = null;
            }
        }
    },

    _playWin: function _playWin(data, callFunc) {
        this._resultData = data;
        this._winCallFunc = callFunc;
        if (!this._winAni) {
            this._winAni = cc.instantiate(this.prefab_win);
            this._winAni.parent = this.node;
            var comp = this._winAni.getComponent(dragonBones.ArmatureDisplay);
            comp.addEventListener(dragonBones.EventObject.COMPLETE, this._winEnd, this);
        }
        this._winAni.position = this._getResultAniPos();
        this._winAni.active = true;
        this._winAni.getComponent(dragonBones.ArmatureDisplay).playAnimation(this._winAniName, 1);
        GG.audioMgr.playSound(22);
    },
    _winEnd: function _winEnd() {
        this._getResultComp().showResult(this._resultData);
        this._winAni.runAction(cc.sequence(cc.delayTime(2), cc.callFunc(function () {
            this._winAni.active = false;
            this._getResultComp()._setIsShow(false);
            this.setGrayIsShow(false);
            if (this._winCallFunc) {
                this._winCallFunc();
                this._winCallFunc = null;
            }
        }, this)));
    },

    _clearWin: function _clearWin() {
        if (this._winAni) {
            this._getResultComp()._setIsShow(false);
            this._winAni.stopAllActions();
            this._winAni.active = false;
            this._winCallFunc = null;
        }
    },

    //======================================失败动画

    _playLose: function _playLose(data, callFunc) {
        this._resultData = data;
        this._loseCallFunc = callFunc;
        if (!this._loseAni) {
            this._loseAni = cc.instantiate(this.prefab_lose);
            this._loseAni.parent = this.node;
            var comp = this._loseAni.getComponent(dragonBones.ArmatureDisplay);
            comp.addEventListener(dragonBones.EventObject.COMPLETE, this._loseEnd, this);
        }
        this._loseAni.position = this._getResultAniPos();
        this._loseAni.active = true;
        this._loseAni.getComponent(dragonBones.ArmatureDisplay).playAnimation(this._loseAniName, 1);
        GG.audioMgr.playSound(21);
    },
    _loseEnd: function _loseEnd() {
        this._getResultComp().showResult(this._resultData);

        this._loseAni.runAction(cc.sequence(cc.delayTime(2), cc.callFunc(function () {
            this._loseAni.active = false;
            this._getResultComp()._setIsShow(false);
            this.setGrayIsShow(false);
            if (this._loseCallFunc) {
                this._loseCallFunc();
                this._loseCallFunc = null;
            }
        }, this)));
    },

    _getResultComp: function _getResultComp() {
        if (!this._resultComp) {
            var result = cc.instantiate(this.prefab_showResult);
            this.node.addChild(result, 5);
            if (this._winAni) result.position = this._winAni.position;
            if (this._loseAni) result.position = this._loseAni.position;
            this._resultComp = result.getComponent(this._resultCompName);
        }
        return this._resultComp;
    },
    _clearLose: function _clearLose() {
        if (this._loseAni) {
            this._getResultComp()._setIsShow(false);
            this._loseAni.stopAllActions();
            this._loseAni.active = false;
            this._loseCallFunc = null;
        }
    },

    _getResultAniPos: function _getResultAniPos() {
        var designSize = cc.visibleRect;
        return cc.p(designSize.width / 2, designSize.height * 0.8);
    },

    //====================================灰色层

    setGrayIsShow: function setGrayIsShow(isShow) {
        if (this.node_grayLayer) this.node_grayLayer.active = isShow;
    },

    getGrayLayer: function getGrayLayer() {
        return this.node_grayLayer;
    },

    //清理所有
    clearAll: function clearAll() {
        this.clearBettingAni();
        this.clearStartAni();
        this._clearWin();
        this._clearLose();
        this.setGrayIsShow(false);
    }

});

cc._RF.pop();
},{}],"Config_bull100":[function(require,module,exports){
"use strict";
cc._RF.push(module, '95222qkqtxKS6CJbdacFDND', 'Config_bull100');
// Script/Common/Configs/Config_bull100.js

"use strict";

/**
 * Created by lenovo on 2017/2/16.
 */

//夺宝模式的配置
var bull100 = {
  dict_betGoldNum: { 1: 1, 2: 1, 3: 3, 4: 3, 5: 5 }, //筹码选项对应金币数量
  dealerSliderInterval: 10000 };

window.G_Config_bull100 = bull100;

cc._RF.pop();
},{}],"Config_chinese":[function(require,module,exports){
"use strict";
cc._RF.push(module, '9616fPzp/pPkaXn+SquUBhT', 'Config_chinese');
// Script/Common/Configs/Config_chinese.js

'use strict';

//所有的非编辑器中的中文配置

var chinese = {
    //tip01 : '请抢庄: %s',                                        //开始抢庄
    //tip02 : '请选择下分倍数: %s',                               //请选择下分倍数
    dealerGoldText1: '上庄最低金额为', //上庄金额的限制
    dealerGoldText2: '金钱不足,上庄至少需要', //
    dealerGoldText3: '您已是当前庄家！', //已经在庄
    dealerGoldText4: '您目前上庄排序：第%s位！',
    exitText1: '当前游戏未结束，退出由系统代打?', //
    exitText2: '你确定要退出游戏？',
    exitText3: '您已做庄,强制下庄系统则继续帮您打完本局!',
    dealerSuccess: '上庄成功!!!', //
    continueDealerSuccess: '续庄成功!', //
    giveUpDealer1: '您已从上庄列表退出竞庄', //还不是庄家
    giveUpDealer2: '您已在庄,下庄系统将帮您打完本局?', //已经在庄了
    downSuccess: '您已经成功下庄!', //
    continueDealer: '此局结束后您将面临下庄危险，是否需要续庄！最低续庄金额为%s',
    limitBetting: '本桌限投%s次', //百人桌子右下角下注次数提示
    bettingTimes: '当前投注次数: %s',
    isDealerTip: '请等待玩家投注(%s)',
    intoRoomLimit1: '您有未完成的牌局，请等待牌局结束！',
    exchangePageLeft: ['今天数据', '昨天数据', '前天数据'], //可切換界面的左边信息
    //系统提示
    upDealerSuccess: '恭喜您，成为本局庄家!',
    downDealerWarning: '友情提示: 您的上庄资金不足80%，请及时续庄！',
    downDealerSuccess: '您已下庄!',
    noMyself: '没有玩家数据', //
    inToRoomLimit: '≥ ', //房间列表预制体
    noRecord: '本周暂无数据', //排行榜条目显示
    upperLimit: '9999兆', //金币上限总显示
    winMatch: '胜',
    loseMatch: '负',
    notInvolvedMatch: '未参与',
    turnOut: '转出',
    recharge: '充值',
    dealer: '当庄'
};

window.G_CHINESE = chinese;

cc._RF.pop();
},{}],"Config_classic":[function(require,module,exports){
"use strict";
cc._RF.push(module, 'd5efdlRiO5OtrWl+DQwQ2Ov', 'Config_classic');
// Script/Common/Configs/Config_classic.js

"use strict";

//在经典模式对战中使用到的常用配置

var classicConfig = {
    //num_firstGive : 4,                                          //首次发牌数量
    //num_maxPlayer : 5,                                          //最大玩家数量
    //num_maxChoose : 3,                                          //看牌的时候能选中的最大卡牌数量

    //len_betweenOtherPoker : 25,                                //参战玩家两张卡牌之间的间隔
    //len_betweenMyPoker : 135,                                    //玩家自己拥有的两张卡牌之间的间隔
    //time_givePoker : 0.1,                                       //发每张牌的间隔
    //time_pokerFly : 0.8,                                        //卡牌移动需要的时间
    //scale_noMyPoker : 0.5,                                      //盖住的卡牌的缩放程度
    //num_pokerUp : 30,                                           //点击卡牌后向上移动的高度
    //time_dealerMove : 0.2,                                      //抢庄特效移动间隔
    //time_confirmDealer : 1.5,                                   //确定庄家特效持续时间
    //time_goldFly : 0.3,                                            //金币飞行的时间
    //num_goldGroup : 10,                                           //一次飞行的金币量
    //
    //time_showGold : 0.08,                                          //显示单个金币间隔
    //list_centerProgressTime : [0.7,0.2],                        //中间圆形进度条倒计时:参数1:第一个开始变化颜色占总时间的比例；参数2:第二个变化
    //time_pageResult : [0.3,0.8,1.3],                             //结算面板,time1:胜利文字动作；time2:背景动作; time3图标动作
    //time_pokerResultShow : 0.5,                                 //卡牌上面的结果特效显示的时间
    //scale_pokerResultShow : 1.2,                                //卡牌上方结果特效最大倍数
    //list_backgroundEffect1 : [1.0, 1.3],                        //背景特效1 ：参数1：缩放时间，参数2：缩放倍数
    //time_pokerResultInterval : 0.5,                             //依次显示卡牌结果的间隔
    //list_goldAddFly : [0.8, 0.8, 0.5],                           //增加金币效果参数1：飞出去的时间，参数2：飞回label的时间，参数3：中间停顿的间隔
    //list_goldLostFly : [0.8, 1.0, 0.3],                          //减少金币效果参数1：飞出去的时间，参数2：中间停顿的时间，参数3：消失花费的时间
    //num_pokerResultOff : 45,                                      //卡牌上面结果显示矫正
    //num_dealerEffMoveStep : 2,                                 //该数值乘以当前玩家数==随机庄家效果必定移动步数

    //num_goldFirstOff : 15,                                        //飞行金币初始位置偏移量
};

window.G_Config_classic = classicConfig;

cc._RF.pop();
},{}],"Config_common":[function(require,module,exports){
"use strict";
cc._RF.push(module, 'b26deKEmoBAK7r3zwyki638', 'Config_common');
// Script/Common/Configs/Config_common.js

'use strict';

/**
 * Created by lenovo on 2016/12/29.
 */

//所有对战模式通用的配置
var common = {
    version: '1.0.1', //游戏版本
    isLocal: false, //是否走本地
    frameScale: 0.5, //界面缩放标准
    bottomTipPos: cc.p(cc.visibleRect.width * 0.5, cc.visibleRect.height * 0.1),
    time_tipDefault: 3, //没有设置时间，默认存在的时长
    num_maxNameLen: 10, //最大的名字长度,超过的则用省略号显示,按字符宽度

    scale_moveGold: 0.5, //移动中的金币的缩放比例

    showTrendItems: 5, //显示走势图条目五个
    connectTimeOut: 3, //3秒超时
    defaultVolume: 1, //默认音量大小
    notice_speed: 240, //跑马灯移动速度
    notice_showTime: 4, //跑马灯单条存在时间

    //btnGrayValue : 0.3,                                          //按钮置灰的透明度
    //time_confirmTipShow : 0.4,                                  //确认框显示出现时间
    //scale_confirmTipMax : 1.2,                                  //确认框最大缩放
    //num_multipleValueOff : 12,                                  //倍数按钮，数值显示大于10后的偏移
    //dict_moneyUnit : {
    //    10000: '万',
    //    100000000 : '亿',
    //},                                                            //超过数额后显示金钱单位
    //time_eyeEffect : [1.5, 2.0],                                  //眼睛上的特效，time1:移动时间，time2：停顿时间
    //time_pokerOpen : 0.6,                                        //翻牌消耗的时间，分两段

    nativeHref: 'http://192.168.0.100/player/' };

window.G_Config_common = common;

cc._RF.pop();
},{}],"Config_dialogUrl":[function(require,module,exports){
"use strict";
cc._RF.push(module, '852465MKD5NP7E8Dfu10X+Z', 'Config_dialogUrl');
// Script/Common/Configs/Config_dialogUrl.js

'use strict';

//配置弱网资源请求路径及参数

var weekNetworkUrl = {
    loginTokenUrl: 'user/token.html', //token获取
    loginToSetUrl: 'user/voiceSet.html', //声音设置获取
    getSystemSetUrl: 'game/playerSysSet.html', //设置获取
    saveSystemSetUrl: 'game/playerSysSetSave.html', //声音设置保存(musicClass:true, soundClass:true, gameType:'DOU_NIU')
    timedRefreshUrl: 'user/alive.html', //定时刷新
    logout: 'passport/logout.html', //确定退出游戏
    login: 'passport/login.html', //登录游戏

    personalInfoUrl: 'game/playerInfo.html', //获取玩家信息
    playerTreasuresUrl: 'game/statistics/treasures.html', //获取富豪榜数据
    playerProfitUrl: 'game/statistics/profits.html', //获取盈利榜数据  需要gameId 目前为1
    gameRoomListUrl: 'game/rooms.html', //获取房间列表 需要游戏玩法 gameModelName

    announcementUrl: '', //公告内容获取
    rulesUrl: '', //规则内容获取
    recordUrl: 'game/statistics/user/records.html', //记录内容获取  需要"gameId":1, dateClass:0,1,2, pageSize: 20
    accountUrl: 'playerRecharge/playerAccountRecord.html', //账目内容获取  需要"gameId":1, dateClass:0,1,2, pageSize: 20
    trendUrl: 'game/chart/inning.html', //走势图数据获取     需要 "gameModelId": ModelId,  "gameRoomId": roomId
    playerListUrl: 'game/bull100/playerList.html' };

window.G_DIALOG_URL = weekNetworkUrl;

// var weekNetworkUrl = {
//     loginTokenUrl : '/user/token.html',//token获取
//     loginToSetUrl : '/user/voiceSet.html',//声音设置获取
//     getSystemSetUrl : '/game/playerSysSet.html',//设置获取
//     saveSystemSetUrl : '/game/playerSysSetSave.html',//声音设置保存(musicClass:true, soundClass:true, gameType:'DOU_NIU')
//     timedRefreshUrl : '/user/alive.html',//定时刷新
//     logout : '/passport/logout.html',//确定退出游戏
//
//     personalInfoUrl : '/game/playerInfo.html',//获取玩家信息
//     playerTreasuresUrl : 'game/statistics/treasures.html',//获取富豪榜数据
//     playerProfitUrl : '/game/statistics/profits.html',//获取盈利榜数据  需要gameId 目前为1
//     gameRoomListUrl : '/game/rooms.html',//获取房间列表 需要游戏玩法 gameModelName
//
//     announcementUrl : '',//公告内容获取
//     rulesUrl : '',//规则内容获取
//     recordUrl : '/game/statistics/user/records.html',//记录内容获取  需要"gameId":1, dateClass:0,1,2, pageSize: 20
//     accountUrl : '/playerRecharge/playerAccountRecord.html',//账目内容获取  需要"gameId":1, dateClass:0,1,2, pageSize: 20
//     trendUrl : 'game/chart/inning.html', //走势图数据获取     需要 "gameModelId": ModelId,  "gameRoomId": roomId
//     playerListUrl : 'game/bull100/playerList.html',//玩家列表  需要游戏玩法
// }

cc._RF.pop();
},{}],"Config_grab":[function(require,module,exports){
"use strict";
cc._RF.push(module, '0512eKgI7FPO4yvK6/Ay6rT', 'Config_grab');
// Script/Common/Configs/Config_grab.js

"use strict";

/**
 * Created by lenovo on 2016/12/29.
 */

//夺宝模式的配置
var grab = {
    num_otherGrabGoldNum: 2, //其他玩家投注的时候飞行的金币数量
    time_grabWillEnd: 2, //距离投注结束剩余该秒数的时候不播放发牌动画
    num_winPokerOff: 15, //有牛时候，后面两张牌增加的间隔
    time_goldFlyOnHead: 1.5 };

window.G_Config_grab = grab;

cc._RF.pop();
},{}],"Config_resourceUrl":[function(require,module,exports){
"use strict";
cc._RF.push(module, '23f282iOddN5KHJaiCrIFod', 'Config_resourceUrl');
// Script/Common/Configs/Config_resourceUrl.js

'use strict';

//配置资源的路径或者资源的名字

var resURL = {
    atlas_multipleImgName: { //按钮上的倍数图片
        0: 'comm_text_dont',
        imgName: 'comm_text_'
    },
    atlas_pokerResult: { //卡牌上面的牌面结果
        resultImgName: 'comm_text_list_according_',
        noResult: 'comm_text_list_according_no',
        dont: 'comm_text_list_according_ok'
    },
    atlas_chooseMultipleName: { //头像旁边的抢几和下分倍数图片
        dealer_0: 'Scene_Classic_buqaing02',
        dealer_1: 'Scene_Classic_qz_1',
        dealer_2: 'Scene_Classic_qz_2',
        dealer_3: 'Scene_Classic_qz_3',
        dealer_4: 'Scene_Classic_qz_4',
        score_5: 'Scene_Classic_x5',
        score_10: 'Scene_Classic_x10',
        score_15: 'Scene_Classic_x15',
        score_25: 'Scene_Classic_x25'
    },
    //确定庄家后的特效
    ani_getDealerName: {
        horizontal: 'GetDealer01',
        vertical: 'GetDealer02'
    },
    //获取金币时候的头像特效
    ani_getGoldOnHeadName: {
        horizontal: 'GoldOnHead_horizontal',
        vertical: 'GoldOnHead_vertical'
    },
    //开始动画
    boneAni: {
        loading: 'BoneAni_loading', //加载中
        matching: 'BoneAni_loading_dating' },
    //卡牌基础的显示
    pokerType: {
        blockMin: 'common_card_f_02', //方块小
        blockMax: 'common_card_f_01', //方块大
        blackHeartMin: 'common_card_h_02', //黑色桃心小
        blackHeartMax: 'common_card_h_01', //黑色桃心大
        redHeartMin: 'common_card_hong_02', //红色桃心小
        redHeartMax: 'common_card_hong_01', //红色桃心大
        flowerMin: 'common_card_mei_02', //梅花小
        flowerMax: 'common_card_mei_01', //梅花大
        value_J: 'common_card_J', //卡牌j的牌型显示
        value_Q: 'common_card_Q', //卡牌Q的牌型显示
        value_K: 'common_card_k' },
    //表名枚举
    dict_tablesName: {
        platformConfig: '',
        commonConfig: 'CommonConfig',
        commonLoading: 'Common_loadingTips',
        //classicConfig : 'Classic_mainConfig',
        chinese: 'Chinese',
        grabConfig: 'Grab_mainConfig',
        //bull100Config : 'Bull100_mainConfig',
        audioName: 'Enum_audioName'
    },

    //ui界面
    uiName: cc.Enum({
        account: 'Prefab_dialog_account', //账目界面
        announcement: 'Prefab_dialog_announcement', //公告界面
        dealerList: 'Prefab_dialog_dealerList', //上庄列表界面
        playerList: 'Prefab_dialog_playerList', //玩家列表界面
        record: 'Prefab_dialog_record', //记录界面
        rules: 'Prefab_dialog_rules', //规则界面
        rulesInHome: 'Prefab_dialog_rulesInHome', //房间内的规则界面
        systemSet: 'Prefab_dialog_set', //系统设置界面
        bull100Trend: 'Prefab_dialog_bull100Trend', //百人走势图界面
        grabTrend: 'Prefab_dialog_grabTrend' }),

    //音效路径
    audioUrl: 'resources/Sounds/%s.mp3'
};
window.G_RES_URL = resURL;

cc._RF.pop();
},{}],"GameData":[function(require,module,exports){
"use strict";
cc._RF.push(module, 'bc6ad5lIgpKkqG/gsjUbiiI', 'GameData');
// Script/Common/Managers/GameData.js

'use strict';

/**
 * Created by lenovo on 2016/12/30.
 */

//游戏数据的剪接获取方式
var gameData = {
    _curHash: null, //记录刷新页面前的场景
    //tableData
    getChinese: function getChinese(keyID) {
        var table = GG.tableMgr.getTable(G_RES_URL.dict_tablesName.chinese);
        if (!table) return null;
        return table.getDataByID(keyID);
    },
    getBottomTipPos: function getBottomTipPos() {
        var designSize = cc.view.getDesignResolutionSize();
        return cc.p(designSize.width * 0.5, designSize.height * 0.17);
    },
    getTopTipPos: function getTopTipPos() {
        var designSize = cc.view.getDesignResolutionSize();
        return cc.p(designSize.width * 0.5, designSize.height * 0.8);
    },
    getCenterTipPos: function getCenterTipPos() {
        var designSize = cc.view.getDesignResolutionSize();
        return cc.p(designSize.width * 0.5, designSize.height * 0.55);
    },
    //根据索引获取卡牌的值和类型
    getPokerInfo: function getPokerInfo(index) {
        this.pokerValue = (index >> 2) + 1; //1-13对应A到K
        this.pokerType = 4 - (index & 3); //1-4对应黑桃，红桃，梅花，方块
        return this;
    },

    //获取图片请求接口路径
    getResNetRoot: function getResNetRoot(resUrl) {
        //return 'http://192.168.0.109:8080/static/'+resUrl
        if (G_Config_common.isLocal) {
            var url = this.getLocalHref();
            var pointIndex = url.lastIndexOf(':');
            url = url.substring(0, pointIndex + 5);
            url += '/static/';
            return url + resUrl;
        } else return resRoot + '/' + resUrl;
    },
    getLocalHref: function getLocalHref() {
        if (window.location) {
            return window.location.href;
        } else return 'http://192.168.0.109:8080';
    },
    //获取吃瓜群众的座位ID
    getIdlePlayersSeatIndex: function getIdlePlayersSeatIndex() {
        return -2;
    },
    //获取庄家的座位标号
    getDealerSeatIndex: function getDealerSeatIndex() {
        return -1;
    },
    //获取场景的名字
    getSceneName: function getSceneName(sceneType) {
        var sceneName;
        switch (parseInt(sceneType)) {
            case G_TYPE.gameModule.bull100:
                sceneName = 'Poker_Bull100';
                break;
            case G_TYPE.gameModule.classic:
                sceneName = 'Poker_classic';
                break;
            case G_TYPE.gameModule.grab:
                sceneName = 'Poker_Grab';
                break;
            default:
                break;
        }
        return sceneName;
    },

    //获取游戏所处的平台
    getOS: function getOS() {
        switch (cc.sys.os) {
            case cc.sys.OS_ANDROID:
                break;
            case cc.sys.OS_IOS:
                break;
            default:
                break;
        }
        return cc.sys.os;
    },
    //获取浏览器类型
    getBrowserType: function getBrowserType() {
        switch (cc.sys.browserType) {
            case cc.sys.BROWSER_TYPE_QQ:
                break;
            case cc.sys.BROWSER_TYPE_SAFARI:
                break;
            case cc.sys.BROWSER_TYPE_ANDROID:
                break;
            default:
                break;
        }
        return cc.sys.browserType;
    },

    //根据进房类型获取进游戏房时候需要的请求类型
    getEnterHomeModel: function getEnterHomeModel(enterType) {
        var gameType;
        switch (parseInt(enterType)) {
            case G_TYPE.gameModule.bull100:
                gameType = G_TYPE.net_gameModule.bull100;
                break;
            case G_TYPE.gameModule.grab:
                gameType = G_TYPE.net_gameModule.grab;
                break;
            case G_TYPE.gameModule.classic:
                gameType = G_TYPE.net_gameModule.classic;
                break;
            default:
                break;
        }
        return gameType;
    },

    //判定是否是微信浏览器
    getIsWinXin: function getIsWinXin() {
        var ua = window.navigator.userAgent.toLowerCase();
        if (ua.match(/MicroMessenger/i) == 'micromessenger') {
            return true;
        } else {
            return false;
        }
    },

    isNumber: function isNumber(data) {
        return Boolean(Object.prototype.toString.call(data) === '[object Number]');
    },

    //=========================  cookie name = poker_roomInfo

    //获取上次登陆的场景
    getLastSceneHash: function getLastSceneHash() {
        if (cc.sys.isNative) {
            return null;
        }
        var hashData = this._getCookie('poker_roomInfo');
        // var hashData = document.cookie;
        if (!hashData) return null;
        var data = {
            enterType: null,
            roomId: null
        };
        var strList = hashData.split('-');
        var enterType = strList[0];
        if (!enterType) return null;
        data.enterType = enterType;
        data.roomId = parseInt(strList[1]);
        return data;
    },
    //设置当前的场景
    setCurSceneHash: function setCurSceneHash(enterType, roomId) {
        if (cc.sys.isNative) {
            return;
        }
        this._setCookie('poker_roomInfo', enterType + "-" + roomId);
    },
    _setCookie: function _setCookie(name, value) {
        // var Days = 0.5;
        // var exp = new Date();
        // exp.setTime(exp.getTime() + Days*24*60*60*1000);
        // document.cookie = name + "="+ encodeURI (value) + ";expires=" + exp.toGMTString();
        document.cookie = name + "=" + encodeURI(value) + ";";
    },
    _getCookie: function _getCookie(name) {
        var arr,
            reg = new RegExp("(^| )" + name + "=([^;]*)(;|$)");
        if (arr = document.cookie.match(reg)) return encodeURIComponent(arr[2]);else return null;
    },

    //============================

    //设置富豪榜
    setRichData: function setRichData(data) {
        this._richData = {};
        for (var key in data) {
            this._richData[key] = data[key];
        }
    },
    //设置盈利榜单
    setGainsData: function setGainsData(data) {
        this._gainsData = {};
        for (var key in data) {
            this._gainsData[key] = data[key];
        }
    },
    //获取富豪榜
    getRichData: function getRichData() {
        if (G_Config_common.isLocal) {
            var _richRankData = {};
            _richRankData.code = 1;
            _richRankData.data = [];
            for (var i = 0; i < 3; i++) {
                _richRankData.data.push({
                    nickname: '997_' + i,
                    walletbalance: 667,
                    avatarurl: ''
                });
            }
            return _richRankData;
        } else return this._richData;
    },
    //获取盈利榜单
    getGainsData: function getGainsData() {
        if (G_Config_common.isLocal) {
            var _gainsRankData = {};
            _gainsRankData.code = 1;
            _gainsRankData.data = [];
            for (var i = 0; i < 20; i++) {
                _gainsRankData.data.push({
                    nickname: '1111',
                    walletbalance: 3333,
                    avatarurl: ''
                });
            }
            return _gainsRankData;
        } else return this._gainsData;
    },
    //======================

    //获取房间列表的json配置
    getRoomListJson: function getRoomListJson(callFunc) {
        if (!this._roomListJson) {
            var self = this;
            self._roomListJson = null;
            cc.loader.load(G_DATA.getResNetRoot('config/room.data.json'), function (err, data) {
                if (err) {} else {
                    self._roomListJson = data;
                }
                if (callFunc) {
                    callFunc(self._roomListJson);
                    callFunc = null;
                }
                // GG.platformMgr.showRoomUI(self._roomPrefabName, function (roomComp) {
                //     if (roomComp) {
                //         self._compHomeList = roomComp;
                //         self._requestEnter(enterType, isNoEffect);
                //     }
                // });
            });
        } else {
            if (callFunc) {
                callFunc(this._roomListJson);
                callFunc = null;
            }
        }
    }
};

window.G_DATA = gameData;

cc._RF.pop();
},{}],"GameStart":[function(require,module,exports){
"use strict";
cc._RF.push(module, '0bb59bZNjlOg7qETPpsxzXm', 'GameStart');
// Script/Views/GameStart.js

'use strict';

//整个游戏开始前的处理

//对应G_TYPE.gameModule
var gameModule = cc.Enum({
    platform: 0,
    bull100: 1,
    grab: 2,
    classic: 3
});

cc.Class({
    extends: cc.Component,

    properties: {
        _gameState: null,

        node_gameScene: {
            default: null,
            type: cc.Node,
            displayName: '整个游戏的父层'
        },
        gameType: {
            default: 0,
            type: gameModule,
            displayName: '游戏模式'
        }
    },

    // use this for initialization
    onLoad: function onLoad() {
        //this.node_gameScene.active = false;
        //临时的处理方案，切换不同的场景
        //if(window.G_InRoomType && window.G_InRoomType != this.gameType){
        //    switch (window.G_InRoomType){
        //        case G_TYPE.gameModule.bull100:
        //            cc.director.preloadScene('Poker_Bull100', function () {
        //                cc.director.loadScene('Poker_Bull100');
        //            });
        //            break
        //        case G_TYPE.gameModule.grab:
        //            cc.director.preloadScene('Poker_Grab', function () {
        //                cc.director.loadScene('Poker_Grab');
        //            });
        //            break
        //        case G_TYPE.gameModule.classic:
        //            cc.director.preloadScene('Poker_classic', function () {
        //                cc.director.loadScene('Poker_classic');
        //            });
        //            break
        //        case G_TYPE.gameModule.platform:
        //            cc.director.preloadScene('Platform', function () {
        //                cc.director.loadScene('Platform');
        //            });
        //            break
        //        default:
        //            break
        //    }
        //    return
        //}

        //一些动画效果在脏矩形下发生错误
        //if (cc._renderType === cc.game.RENDER_TYPE_CANVAS) {
        //    cc.renderer.enableDirtyRegion(false);
        //    cc.view.enableRetina(true);
        //}

        //this._reloadTable();
    },

    _reloadTable: function _reloadTable() {
        var tables = [];
        switch (this.gameType) {
            case gameModule.platform:
                //tables.push(G_RES_URL.dict_tablesName.platformConfig);
                break;
            case gameModule.classic:
                //tables.push(G_RES_URL.dict_tablesName.classicConfig);
                break;
            case gameModule.grab:
                tables.push(G_RES_URL.dict_tablesName.grabConfig);
                break;
            case gameModule.bull100:
                //tables.push(G_RES_URL.dict_tablesName.bull100Config);
                break;
            default:
                break;
        }
        tables.push(G_RES_URL.dict_tablesName.commonConfig);
        tables.push(G_RES_URL.dict_tablesName.chinese);
        tables.push(G_RES_URL.dict_tablesName.audioName);
        tables.push(G_RES_URL.dict_tablesName.grabConfig);
        GG.tableMgr.reloadTables(tables, this._addConfigCallFunc.bind(this));
    },

    //加载配置文件结束
    _addConfigCallFunc: function _addConfigCallFunc() {
        this._gameState = G_TYPE.webGameState.running;

        //经典看牌的主要配置
        switch (this.gameType) {
            case gameModule.platform:
                //var table = GG.tableMgr.getTable(G_RES_URL.dict_tablesName.platformConfig);
                //if(table) {
                //
                //}
                break;
            case gameModule.classic:
                var table = GG.tableMgr.getTable(G_RES_URL.dict_tablesName.classicConfig);
                if (table) {
                    var dataObj = table.getFirstData();
                    this._addConfig(G_Config_classic, dataObj);
                }
                break;
            case gameModule.grab:
                var table = GG.tableMgr.getTable(G_RES_URL.dict_tablesName.grabConfig);
                if (table) {
                    var dataObj = table.getFirstData();
                    this._addConfig(G_Config_grab, dataObj);
                }
                break;
            case gameModule.bull100:
                var table = GG.tableMgr.getTable(G_RES_URL.dict_tablesName.bull100Config);
                if (table) {
                    var dataObj = table.getFirstData();
                    this._addConfig(G_Config_grab, dataObj);
                }
                break;
            default:
                break;
        }

        var table = GG.tableMgr.getTable(G_RES_URL.dict_tablesName.commonConfig);
        if (table) {
            var dataObj = table.getFirstData();
            this._addConfig(G_Config_common, dataObj);
        }
        this.node_gameScene.active = true;
    },

    //增加配置信息
    _addConfig: function _addConfig(targetObject, addObject) {
        if (addObject) {
            for (var attrName in addObject) {
                targetObject[attrName] = addObject[attrName];
            }
        }
    },

    getGameState: function getGameState() {
        return this._gameState;
    },

    getGameType: function getGameType() {
        return this.gameType;
    },

    onDestroy: function onDestroy() {
        cc.game.off(cc.game.EVENT_HIDE, this._pauseWebGame, this);
        cc.game.off(cc.game.EVENT_SHOW, this._resumeWebGame, this);
    }

});

cc._RF.pop();
},{}],"Global_listener":[function(require,module,exports){
"use strict";
cc._RF.push(module, '0c56cnXdidGDouKG4MozCpQ', 'Global_listener');
// Script/Common/Global_listener.js

'use strict';

//全局的事件监听与派送

module.exports = cc.Class({
    properties: {
        _dict_listeners: null, //所有监听
        _listenerIndex: null, //监听索引
        _list_delIndex: null },

    // use this for initialization
    ctor: function ctor() {
        this._dict_listeners = {};
        this._list_delIndex = [];
        this._listenerIndex = 0;
    },

    //增加监听
    registerFunc: function registerFunc(eventType, callFunc) {
        if (!this._dict_listeners[eventType]) this._dict_listeners[eventType] = {};
        var listenerName = callFunc.name + '_' + this._getListenerIndex();
        this._dict_listeners[eventType][listenerName] = callFunc;
        return listenerName;
    },

    //去除监听
    delListen: function delListen(eventType, listenerName) {
        if (!this._dict_listeners[eventType]) return;
        if (this._dict_listeners[eventType][listenerName]) {
            this._whenCancelListener(listenerName);
            //有这个监听
            delete this._dict_listeners[eventType][listenerName];
            if (Object.keys(this._dict_listeners[eventType]).length < 1) this._dict_listeners[eventType] = null;
        }
    },

    //派送监听的事件
    dispatchEventEX: function dispatchEventEX(eventType, data) {
        var listenersList = this._dict_listeners[eventType];
        if (listenersList) {
            //存在监听对象
            var callFunc;
            for (var name in listenersList) {
                callFunc = listenersList[name];
                if (cc.isValid(callFunc)) {
                    callFunc(name, data);
                }
            }
        }
    },

    _whenCancelListener: function _whenCancelListener(listenerName) {
        var indexList = listenerName.split('_');
        var listenerIndex = indexList[indexList.length - 1];
        this._list_delIndex.push(listenerIndex);
    },
    //获取可用的监听索引
    _getListenerIndex: function _getListenerIndex() {
        if (this._list_delIndex[0]) {
            return this._list_delIndex.splice(0, 1);
        } else {
            this._listenerIndex += 1;
            return this._listenerIndex;
        }
    }

});

cc._RF.pop();
},{}],"Global":[function(require,module,exports){
"use strict";
cc._RF.push(module, 'fe86ejAMf9Av4e2z1Y1HOfE', 'Global');
// Script/Common/Global.js

'use strict';

//配置全局使用的管理器
var gg = gg || {};
window.GG = gg;

//经典对战管理器
GG.classicMgr = null;
//夺宝对战
GG.grabMgr = null;
//大厅管理
GG.platformMgr = null;
//百人大战管理
GG.bull100Mgr = null;
//获取当前游戏的管理器--------------------每次推出场景，需要将当前的场景管理器置空
GG.getModuleMgr = function () {
    var mgrList = [GG.grabMgr, GG.classicMgr, GG.platformMgr, GG.bull100Mgr];
    for (var i = 0; i < mgrList.length; i++) {
        if (mgrList[i]) return mgrList[i];
    }
    return null;
};
GG.curMgr = null;

//弹窗提示管理器
GG.tipsMgr = null;
//所有预加载资源管理
GG.resMgr = null;

//=======================================================

//玩家对象
GG._player = null;
GG.getPlayer = function () {
    if (!this._player) {
        var player = require('M_Player');
        this._player = new player();
    }
    return this._player;
};
GG.getPlayerID = function () {
    return this.getPlayer().getPlayerID();
};
//弱联网管理器
GG.httpMgr = GG.httpMgr || function () {
    var http = require('HTTPMgr');
    return new http();
}();

//socket网络请求管理器
GG.socketMgr = GG.socketMgr || function () {
    var socket = require('SocketMgr');
    return new socket();
}();

//配置文件管理器
GG.tableMgr = GG.tableMgr || function () {
    var tableMgr = require('TablesMgr');
    return new tableMgr();
}();

//配置文件管理器
GG.audioMgr = GG.audioMgr || function () {
    var audioMgr = require('AudioMgr');
    return new audioMgr();
}();

//全局的监听管理
GG.Listener = GG.Listener || function () {
    var Listener = require('Global_listener');
    return new Listener();
}();
//最上面的触摸层
GG.topTouchLayer = GG.topTouchLayer || function () {
    var topLayer = require('M_TopRequestLayer');
    return new topLayer();
}();

//资源管理器
GG.resMgr = GG.resMgr || function () {
    var mgr = require('ReloadResMgr');
    return new mgr();
}();

//socket数据请求管理器
GG.s_requestMgr = GG.s_requestMgr || function () {
    var mgr = require('SocketRequestMgr');
    return new mgr();
}();

//web相关操作
GG.webHandler = GG.webHandler || function () {
    var handler = require('WebMobile_handler');
    return new handler();
}();

//=========================

//当前的游戏状态
GG.getGameState = function () {
    return this._gameState;
};

//当前的游戏模式
GG.getGameType = function () {
    var canvas = cc.find('Canvas');
    if (canvas) {
        var startComp = canvas.getComponent('GameStart');
        if (startComp) {
            return startComp.getGameType();
        }
    }
    return null;
};

//退出赛事所在的房间
GG.exitHome = function () {
    //需要增加一个正在退出的逻辑，给释放缓存一定的时间
    var dataObj = {
        gameType: this.getGameType()
    };
    this.getPlayer().setOutHomeData(dataObj);
    G_DATA.setCurSceneHash('', 0);
    GG.changeScene(G_TYPE.sceneName.platform);
};

//退出游戏
GG.exitGame = function () {
    GG.httpMgr.sendHttpRequest(G_DIALOG_URL.logout, null, function (data) {
        if (data) {
            cc.director.end();
            location.replace(location.href);
        }
    }.bind(this));
};

//加载场景
GG.changeScene = function (sceneName) {
    GG.getPlayer().setReloadSceneInfo({
        sceneName: sceneName
    });
    cc.director.preloadScene('InHomeLoading', function () {
        cc.director.loadScene('InHomeLoading');
    });
};

//发起是否重连的请求; callFunc : 点击确定后的回调
GG.showReconnect = function (callFunc) {
    if (GG.tipsMgr) {
        var tableData = G_DATA.getChinese(62);
        GG.tipsMgr.showConfirmTip_TWO(tableData.content, callFunc, function () {
            //直接关闭游戏
            cc.director.end();
            location.replace(location.href);
        });
    }
};

//是否正在加载中
GG.getIsLoading = function () {
    return this._isLoading;
};
//正在加载中
GG.setIsLoading = function (isLoading) {
    this._isLoading = isLoading;
};
//登陆socket
GG.loginSocket = function (func) {
    //登陆socket
    GG.socketMgr.SendMsg(NetType.s_login, {
        token: GG.getPlayer().getPlayerToken(),
        userId: GG.getPlayer().getUID()
    }, func);
};

GG._isFirstEnterPlatform = true;
GG._gameState = null; //游戏暂停和开始的状态
//刚登陆后的处理
GG.whenGameStart = function (callBack) {
    if (!GG._isFirstEnterPlatform) return false;
    cc.game.config.showFPS = false;
    //初次进入游戏
    GG._isFirstEnterPlatform = false;
    //自由旋转
    // cc.view.setOrientation(cc.macro.ORIENTATION_AUTO);
    //增加游戏暂停和开始的监听
    this._gameState = G_TYPE.webGameState.running;
    if (!cc.sys.isNative && document) {
        GG.webHandler.gameStart();
    } else {
        cc.game.on(cc.game.EVENT_HIDE, this._pauseWebGame, this);
        cc.game.on(cc.game.EVENT_SHOW, this._resumeWebGame, this);
    }

    //加载表格配置
    var tables = [];
    tables.push(G_RES_URL.dict_tablesName.commonConfig);
    tables.push(G_RES_URL.dict_tablesName.chinese);
    tables.push(G_RES_URL.dict_tablesName.audioName);
    tables.push(G_RES_URL.dict_tablesName.grabConfig);
    GG.tableMgr.reloadTables(tables, function () {
        //加载音效配置
        GG.audioMgr.reloadPlatformAudio(function () {
            if (callBack) {
                callBack();
                callBack = null;
            }
        });
    });

    // cc.game.setFrameRate(49);
    return true;
};
GG._pauseWebGame = function () {
    if (this._gameState == G_TYPE.webGameState.pause) return;
    this._gameState = G_TYPE.webGameState.pause;
    //cc.Audio.useWebAudio = true
    cc.audioEngine.pauseAll();
    GG.audioMgr.stopMusic();
    var mgr = GG.curMgr;
    if (mgr && mgr.whenPauseGame) {
        mgr.whenPauseGame();
    }
    cc.sys.garbageCollect();
};
GG._resumeWebGame = function () {
    if (this._gameState == G_TYPE.webGameState.running) return;
    this._gameState = G_TYPE.webGameState.running;
    cc.audioEngine.resumeAll();
    GG.audioMgr.playMusic();
    var mgr = GG.curMgr;
    if (mgr && mgr.whenResumeGame) {
        mgr.whenResumeGame();
    }
    GG.socketMgr.parsePauseInfo();
};

cc._RF.pop();
},{"AudioMgr":"AudioMgr","Global_listener":"Global_listener","HTTPMgr":"HTTPMgr","M_Player":"M_Player","M_TopRequestLayer":"M_TopRequestLayer","ReloadResMgr":"ReloadResMgr","SocketMgr":"SocketMgr","SocketRequestMgr":"SocketRequestMgr","TablesMgr":"TablesMgr","WebMobile_handler":"WebMobile_handler"}],"Grab_Manager":[function(require,module,exports){
"use strict";
cc._RF.push(module, '44fc1hvIW1Cf70BkdECoI0L', 'Grab_Manager');
// Script/Views/Scene_Grab/Grab_Manager.js

'use strict';

//押宝系统的管理

cc.Class({
    extends: require('BaseManager'),

    properties: {
        _gameState: null,

        //data
        _list_winResult: null,
        _maxBettingGold: null,
        _homeID: null, //该房间的ID
        _maxBettingTimes: null, //最大投注次数
        _list_pokerIndex: null, //本局所有卡牌的索引
        _matchID: null, //赛事ID
        _playerID: null, //玩家自己的ID
        _nextStartTime: null, //下次赛事开始的时间戳
        _curEndGrabTime: null, //当前局投注结束时间
        _enterHomeData: null, //进房信息
        _idleTip: null, //提示休息中的tip
        _grabTip: null, //提示投注中的tip
        _isPauseOverMatch: null, //暂停的时候是否进入新的一局
        _dict_idleBetting: null, //吃瓜群众的投注记录

        comp_topLayer: {
            default: null,
            type: require('Grab_topLayer'),
            displayName: '顶部层'
        },
        comp_goldContainer: {
            default: null,
            type: require('Grab_goldContainer'),
            displayName: '金币容器'
        },
        comp_playersContainer: {
            default: null,
            type: require('Grab_playersLayer'),
            displayName: '玩家容器'
        },
        comp_btnsContainer: {
            default: null,
            type: require('Grab_btnContainer'),
            displayName: '底部按钮'
        },
        comp_tablesContainer: {
            default: null,
            type: require('Grab_tablesLayer'),
            displayName: '压住格子层'
        },
        comp_pokersLayer: {
            default: null,
            type: require('Grab_pokerLayer'),
            displayName: '卡牌层'
        },
        comp_uiLayer: {
            default: null,
            type: require('Obj_uiContainer'),
            displayName: '窗口UI层'
        },
        label_bettingTimes: {
            default: null,
            type: cc.Label,
            displayName: '投注次数'
        },
        node_diyTip: {
            default: null,
            type: cc.Node,
            displayName: 'tip'
        }
    },

    // use this for initialization
    onLoad: function onLoad() {
        GG.grabMgr = this;
        this._super();

        this._list_pokerIndex = [];
        this._list_winResult = [];
        this._isPauseOverMatch = true;
        this._bettingTimesStr = G_CHINESE.limitBetting;
        this.comp_topEffect = this.comp_topLayer.getTopEffect();
    },

    start: function start() {
        GG.tipsMgr.setTextTip(this.node_diyTip.getComponent('Obj_txtTip'));
        // console.log('游戏版本'+G_Config_common.version)
        if (G_Config_common.isLocal) {} else {
            this.addLongListenOnStart();

            var homeData = GG.getPlayer().getInHomeData();
            if (homeData) {
                if (homeData.net_resetHomeData) {
                    this._dealInHomeNetData(homeData.net_inHomeData);
                    this.updateEnterHomeData(homeData.net_resetHomeData);
                    this.refreshHome();
                } else {
                    this.net_setHomeData(homeData.net_inHomeData);
                }
            }
        }
    },

    //=================================游戏流程

    resetShow: function resetShow() {
        this.node.stopAllActions();
        this.comp_pokersLayer.setStartInfo(this.comp_btnsContainer.getWheelPos(), this.comp_playersContainer.getPokerPos());

        //暂停的时候如果已经重新开局
        if (this._isPauseOverMatch) {
            this._list_pokerIndex = [];
            this._list_winResult = [];
            //卡牌
            this.comp_pokersLayer.clearData();
            //点击区域
            this.comp_tablesContainer.clearData();
            //禁用点击
            this.comp_tablesContainer.setTouchEnable(false);
            //清理吃瓜群众投注信息
            this._dict_idleBetting = null;
        }
        this._isPauseOverMatch = true;
        //运动的金币
        this.comp_goldContainer.clearAll();
        //玩家
        this.comp_playersContainer.clearData();
        //底部按钮
        this.comp_btnsContainer.setBtnGroupEnable(false);
        //特效
        this.comp_topEffect.clearAll();
    },

    on_Wait: function on_Wait(waitTime, callFunc) {
        this.setGameState(G_TYPE.grabState.wait);
        if (this._grabTip && this._grabTip.getIsShow()) {
            this._grabTip.forceEnd();
        }
        var time1 = new Date(GG.socketMgr.getServerTime());
        //console.log('当前：时:'+time1.getHours()+'分:'+time1.getMinutes()+'秒:'+time1.getSeconds())
        var time2 = new Date(this._nextStartTime);
        //console.log('下次开局：时:'+time2.getHours()+'分:'+time2.getMinutes()+'秒:'+time2.getSeconds())
        if (this._idleTip && this._idleTip.getIsShow()) {
            //已经存在该tip
            //var serverTime = GG.socketMgr.getServerTime();
            //var secs = this._getOffSeconds(serverTime, this._nextStartTime);
            this._idleTip.forceChangeCountDown(waitTime);
        } else {
            var dataObj = {
                tipIndex: 19,
                isCountDown: true,
                showPos: this.node_diyTip.position,
                callBack: null
            };
            dataObj.retainTime = waitTime;
            if (callFunc) dataObj.callBack = callFunc;
            this._idleTip = GG.tipsMgr.showOnlyOne(dataObj);
        }
        this._clearByWait();
    },

    on_beforeStart: function on_beforeStart() {
        this.setGameState(G_TYPE.grabState.readyStart);
        this.comp_topEffect.playGameStartAni(this.on_startTouchTables.bind(this));
        this.on_giveOnePoker();
    },

    on_giveOnePoker: function on_giveOnePoker() {
        this.setGameState(G_TYPE.grabState.givePoker);

        //this.comp_pokersLayer.addPokers([{
        //    pokerIndex : this._list_pokerIndex[0],
        //    isOpen : true
        //}], this._list_winResult[0]);

        var pokerData = G_OBJ.data_grabPokerInfo();
        pokerData.pokerInfoList = [{
            pokerIndex: this._list_pokerIndex[0],
            isOpen: true
        }];
        pokerData.startPokerIndex = 1;
        pokerData.pokerResult = this._list_winResult[0];
        pokerData.isFlyEffect = true;

        this.comp_pokersLayer.showPokerEX(pokerData);
    },

    //on_beforeTouchTable : function () {
    //    this.setGameState(G_TYPE.grabState.readyTouchTable)
    //    this.comp_topEffect.playTouchStartAni(this.on_startTouchTables.bind(this));
    //},

    on_startTouchTables: function on_startTouchTables(retainTime) {
        this.setGameState(G_TYPE.grabState.touchTables);
        if (this._idleTip && this._idleTip.getIsShow()) {
            this._idleTip.forceEnd();
        }
        this.comp_tablesContainer.setTouchEnable(true);
        this.comp_btnsContainer.refreshGrabOption();
        if (this._grabTip && this._grabTip.getIsShow()) {
            this._grabTip.forceChangeCountDown(retainTime);
        } else {
            var secs;
            var dataObj = {
                tipIndex: 18,
                showPos: this.node_diyTip.position,
                isCountDown: true
            };
            if (G_Config_common.isLocal) {
                secs = 6;
                dataObj.callBack = this._touchTableEnd.bind(this);
            } else {
                secs = this._getOffSeconds(GG.socketMgr.getServerTime(), this._curEndGrabTime);
            }
            if (retainTime) secs = retainTime;
            dataObj.retainTime = secs;
            this._grabTip = GG.tipsMgr.showOnlyOne(dataObj);
        }
    },

    _touchTableEnd: function _touchTableEnd() {
        this.comp_tablesContainer.setTouchEnable(false);
        this.comp_btnsContainer.setBtnGroupEnable(false);
        if (G_Config_common.isLocal) {
            var netData = {
                pokers: [{
                    code: '33,34,4,36,2', //牌组 string 11，12
                    odds: 1, //倍数
                    cardsPoint: parseInt(5) }]
            };
            //this.net_grabEnd(netData);
            var pokerInfo = this.setBettingEndInfo(netData);
            if (pokerInfo) this.comp_topEffect.playGrabDoneAni(this.on_giveFivePokers.bind(this), pokerInfo);
            this.on_Wait(15);

            this.comp_playersContainer.setMyselfMoney(this.getWinGold(), 58888);
            //庄家剩余金币
            this.comp_playersContainer.getSystemComp().setGoldValue(88888888);
        } else {}
    },

    on_giveFivePokers: function on_giveFivePokers(pokerInfo) {
        this.setGameState(G_TYPE.grabState.givePoker);
        var pokerData = G_OBJ.data_grabPokerInfo();
        pokerData.pokerInfoList = pokerInfo;
        pokerData.pokerResult = this._list_winResult[0];
        pokerData.isFlyEffect = true;
        pokerData.startPokerIndex = 2;
        pokerData.callFunc = this._giveFivePokersEnd.bind(this);
        this.comp_pokersLayer.showPokerEX(pokerData);
    },

    _giveFivePokersEnd: function _giveFivePokersEnd() {
        var time = G_Config_grab.time_openDelay;
        var act = cc.delayTime(time);
        this.node.runAction(cc.sequence(act, cc.callFunc(function () {
            //this.comp_pokersLayer.resetPokerInfo();
            this.comp_pokersLayer.openPokers(this.on_showResult.bind(this));
        }, this)));
    },

    on_showResult: function on_showResult() {
        this.setGameState(G_TYPE.grabState.showFlag);

        if (this._list_winResult.length < 1) return;
        var pokerResult, tablePos;
        for (var i = 0; i < this._list_winResult.length; i++) {
            pokerResult = this._list_winResult[i];
            tablePos = this.comp_tablesContainer.setTableWin(pokerResult);
            this.comp_topEffect.playOneFlag(tablePos);
        }
        this.comp_tablesContainer.showOwnerGold(this.getMyselfComp().getAllGrabTable());

        this.node.runAction(cc.sequence(cc.delayTime(G_Config_grab.time_showFlag), cc.callFunc(this.on_flyGold, this)));
    },
    //金币的飞行
    on_flyGold: function on_flyGold() {
        this.setGameState(G_TYPE.grabState.flyGold);
        this.comp_playersContainer.setWinTableResult(this._list_winResult);
        this.node.runAction(cc.sequence(cc.delayTime(1), cc.callFunc(function () {
            //金币飞行结束后的表现
            this._flyGoldEnd();
        }, this)));
    },
    _flyGoldEnd: function _flyGoldEnd() {
        var isShow = this.comp_playersContainer.showAllGoldResult();
        if (isShow) {
            var act = cc.delayTime(G_Config_grab.time_goldFlyOnHead);
            this.node.runAction(cc.sequence(act, cc.callFunc(this.on_showGoldResultEnd, this)));
        } else this.on_showGoldResultEnd();
    },
    //显示头像上的金币增减结束
    on_showGoldResultEnd: function on_showGoldResultEnd() {
        this.getMyselfComp().resetShowGold();
        //this.resetShow();
        if (G_Config_common.isLocal) {
            this.on_beforeStart();
        } else {}
    },

    //================================

    //点击投注区域
    playMyGoldMove: function playMyGoldMove(dataObj) {
        dataObj.isMine = true;
        this.getMyselfComp().touchGrabArea(dataObj, this._ownerGrabContinue.bind(this));
    },
    //服务端投注成功
    _ownerGrabContinue: function _ownerGrabContinue(dataObj) {
        if (dataObj.goldValue > 0) {
            this.comp_goldContainer.moveAddGolds(dataObj, function () {
                //所有金币飞行完毕
            }.bind(this));
            //请求成功则马上刷新桌子上的金额信息
            this.comp_tablesContainer.getTable(dataObj.tableIndex).addOwnerGold(dataObj.goldValue);
        }
    },
    //结算移动金币
    playResultGoldMove: function playResultGoldMove(dataList) {
        //if(dataList.length < 1) this._flyGoldEnd();
        //else
        this.comp_goldContainer.flyResultGold(dataList);
    },

    setGameState: function setGameState(type) {
        var lastType = this._gameState;
        this._gameState = type;
        switch (type) {
            case G_TYPE.grabState.wait:
                //等待开始
                break;
            case G_TYPE.grabState.readyStart:
                //开始动画
                break;
            case G_TYPE.grabState.givePoker:
                //发牌
                break;
            case G_TYPE.grabState.readyTouchTable:
                //准备押注
                break;
            case G_TYPE.grabState.touchTables:
                //选区域押注
                break;
            case G_TYPE.grabState.showFlag:
                //显示胜利旗帜
                break;
            case G_TYPE.grabState.flyGold:
                //结算金币
                break;
            case G_TYPE.grabState.isBetting:
                //有下注  刷新回到房间列表
                break;
            default:
                this._gameState = lastType;
                return;
        }
    },
    //在重新设置玩家信息的时候更新按钮倍数
    initButtonInfo: function initButtonInfo() {
        this.comp_btnsContainer.setStartInfo();
    },

    //===========================================

    //重新修改休息期间倒计时数值
    changeIdleTip: function changeIdleTip(num) {
        if (this._idleTip && this._idleTip.getIsShow()) {
            var secs = this._getOffSeconds(GG.socketMgr.getServerTime(), this._nextStartTime);
            this._idleTip.forceChangeCountDown(secs);
        }
    },
    //重新修改投注期间倒计时数值
    changeGrabTip: function changeGrabTip(num) {
        var secs = this._getOffSeconds(GG.socketMgr.getServerTime(), this._curEndGrabTime);
        if (this._grabTip && this._grabTip.getIsShow()) {
            this._grabTip.forceChangeCountDown(secs);
        } else {
            //投注动画未执行完成
            this.comp_topEffect.clearAll();

            if (!this.comp_pokersLayer.getPokerNum()) {
                //还没有发第一张牌
                //this.comp_pokersLayer.addPokers([{
                //    pokerIndex : this._list_pokerIndex[0],
                //    isOpen : true
                //}], this._list_winResult[0]);

                var pokerData = G_OBJ.data_grabPokerInfo();
                pokerData.pokerInfoList = [{
                    pokerIndex: this._list_pokerIndex[0],
                    isOpen: true
                }];
                pokerData.pokerResult = this._list_winResult[0];
                pokerData.isFlyEffect = false;
                pokerData.startPokerIndex = 1;
                this.comp_pokersLayer.showPokerEX(pokerData);
            }

            this.on_startTouchTables(secs);
        }
    },
    //重新设置投注信息
    //resetTableGold : function (goldList) {
    //    if(!goldList || goldList.length < 1) return;
    //
    //    var netBeanData;
    //    for(var i = 0; i < goldList.length; i ++){
    //        netBeanData = goldList[i];
    //        var areaValue = parseInt(netBeanData.item.split('_')[0]);
    //        if(netBeanData.seatIndex===this.getMyselfComp().getSeatIndex())continue;
    //        var dataObj = {};
    //        var playerComp = this.comp_playersContainer.getCompByIndex(netBeanData.seatIndex);
    //
    //        dataObj.goldValue = netBeanData.gold;
    //        dataObj = playerComp.touchGrabArea_other(dataObj);
    //        dataObj = this.comp_tablesContainer.touchOneTable(areaValue, dataObj);
    //        if(dataObj.callFunc) dataObj.callFunc();
    //    }
    //},

    //显示窗口ui
    showDialogUI: function showDialogUI(uiName, callBack) {
        this.comp_uiLayer.addUI(uiName, callBack);
    },

    //===========================================
    //设置投注次数的显示
    setBettingTimes: function setBettingTimes(times) {
        this.label_bettingTimes.string = G_TOOL.formatStr(this._bettingTimesStr, times);
    },

    getGameState: function getGameState() {
        return this._gameState;
    },
    getMyselfComp: function getMyselfComp() {
        return this.comp_playersContainer.getMyselfComp();
    },
    getTable: function getTable(result) {
        return this.comp_tablesContainer.getTable(result);
    },
    getBtnsComp: function getBtnsComp() {
        return this.comp_btnsContainer;
    },
    getMaxGrabGold: function getMaxGrabGold() {
        return this._maxBettingGold;
    },
    //测试用：主动计算区域金币值
    getWinGold: function getWinGold() {
        var tableIndex,
            goldNum,
            winList = [];
        for (var i = 0; i < this._list_winResult.length; i++) {
            tableIndex = this._list_winResult[i];
            goldNum = this.getMyselfComp().getWinGoldNum(tableIndex);
            if (goldNum) winList.push(tableIndex);
        }
        return this.comp_tablesContainer.getWinGold(winList);
    },
    //每局最大的投注次数
    getMaxGrabTimes: function getMaxGrabTimes() {
        return this._maxBettingTimes;
    },
    getMatchID: function getMatchID() {
        return this._matchID;
    },
    getOwnerID: function getOwnerID() {
        return this._playerID;
    },
    _getOffSeconds: function _getOffSeconds(startTime, endTime) {
        return GG.socketMgr.getOffSeconds(startTime, endTime);
    },
    getCurGrabResult: function getCurGrabResult() {
        return this._list_winResult[0];
    },
    getHomeID: function getHomeID() {
        return this._homeID;
    },
    //是否已经投注结束
    getIsGrab: function getIsGrab() {
        return this.getMyselfComp().getIsBettingEnd();
    },
    //获取当前比赛是否已经开局
    getIsBetStart: function getIsBetStart(_nextStartTime, _curEndGrabTime) {
        if (!_nextStartTime) _nextStartTime = this._nextStartTime;
        if (!_curEndGrabTime) _curEndGrabTime = this._curEndGrabTime;
        var serverTime = GG.socketMgr.getServerTime();
        if (_nextStartTime > serverTime && serverTime >= _curEndGrabTime) {
            //未开局
            return false;
        }
        return true;
    },
    //第一次进入游戏是否可押注
    getFirstBetting: function getIsWait() {
        return this._startGame;
    },
    //获取进房信息
    getEnterHomeData: function getEnterHomeData() {
        return this._enterHomeData;
    },
    //获取吃瓜群众投注的位置
    getIdleBettingPos: function getIdleBettingPos() {
        return this.comp_btnsContainer.getIdleBettingPos();
    },
    //获取吃瓜群众的投注记录
    getIdleBetting: function getIdleBetting() {
        return this._dict_idleBetting;
    },
    //获取投注区域容器
    getTableContainer: function getTableContainer() {
        return this.comp_tablesContainer;
    },
    //获取卡牌的放置位置
    getPokerShowPos: function getPokerShowPos() {
        return this.comp_playersContainer.getPokerPos();
    },

    //记录吃瓜群众的投注
    _recodeIdleBetting: function _recodeIdleBetting(tableIndex, goldImgNum) {
        if (!this._dict_idleBetting) this._dict_idleBetting = {};
        if (this._dict_idleBetting[tableIndex]) this._dict_idleBetting[tableIndex] += goldImgNum;else this._dict_idleBetting[tableIndex] = goldImgNum;
    },
    //开启休息时间的时候的清理
    _clearByWait: function _clearByWait() {
        this.getMyselfComp().clearRecord();
    },

    //on net -----------

    forceStart: function forceStart() {

        if (G_Config_common.isLocal) {
            var chip = [100, 500, 1000, 2000];
            var initData = {
                myselfData: {
                    chooseDict: chip,
                    roomName: null
                },
                othersData: [{
                    player: {
                        coin: 7568,
                        icon: null,
                        nickname: "black1",
                        playerId: 5,
                        usableBalance: 7568
                    },
                    seatIndex: 1
                }, {
                    player: {
                        coin: 7568,
                        icon: null,
                        nickname: "black",
                        playerId: 5,
                        usableBalance: 7568
                    },
                    seatIndex: 2
                }, {
                    player: {
                        coin: 888888,
                        icon: null,
                        nickname: "solider",
                        playerId: 6,
                        usableBalance: 888888
                    },
                    seatIndex: 3
                }, {
                    player: {
                        coin: 888888,
                        icon: null,
                        nickname: "jin",
                        playerId: 7,
                        usableBalance: 888888
                    },
                    seatIndex: 4
                }, {
                    player: {
                        coin: 888888,
                        icon: null,
                        nickname: "jin1",
                        playerId: 8,
                        usableBalance: 888888
                    },
                    seatIndex: 5
                }, {
                    player: {
                        coin: 888888,
                        icon: null,
                        nickname: "jin2",
                        playerId: 9,
                        usableBalance: 888888
                    },
                    seatIndex: 6
                }, {
                    player: {
                        coin: 888888,
                        icon: null,
                        nickname: "jin3",
                        playerId: 9,
                        usableBalance: 888888
                    },
                    seatIndex: 7
                }],
                dealerData: {
                    coin: 297300,
                    icon: null,
                    nickname: "系统大牛",
                    playerId: 7,
                    usableBalance: 74325
                },
                homeData: {
                    roomId: 1,
                    userId: 6,
                    betTimes: 10,
                    matchId: 1,
                    //beginTimeNext : 1487557651083,
                    beginTimeNext: 1487559489225,
                    //settleTime : 1487557651083,
                    settleTime: 1487559474225,
                    betChip: chip,
                    minDealerGold: 100000,
                    areaInfo: { 0: 2, 1: 13, 2: 13, 3: 13, 4: 13, 5: 13, 6: 13, 7: 13, 8: 13, 9: 13, 10: 12 }
                }
            };
            this._initInHomeData(initData);

            //是否开局判定
            var serverTime = 1487559484012;
            if (serverTime < this._curEndGrabTime) {
                //未开局
                this.resetShow();
                //是否在游戏进行一半的时候进入
                var firstPokerIndex = 30;
                var secs = this._getOffSeconds(serverTime, this._curEndGrabTime);
                if (firstPokerIndex > 0) {
                    this._list_pokerIndex[0] = firstPokerIndex;
                    //游戏中途加入,计算剩余秒数
                    if (secs > G_Config_grab.time_grabWillEnd) {
                        //充足的发牌时间
                        //this.comp_pokersLayer.addPokers([{
                        //    pokerIndex : firstPokerIndex,
                        //    isOpen : true
                        //}]);

                        var pokerData = G_OBJ.data_grabPokerInfo();
                        pokerData.pokerInfoList = [{
                            pokerIndex: firstPokerIndex,
                            isOpen: true
                        }];
                        pokerData.pokerResult = 0;
                        pokerData.isFlyEffect = false;
                        pokerData.startPokerIndex = 1;
                        this.comp_pokersLayer.showPokerEX(pokerData);
                    } else {
                        //不播放发牌动画
                        this.comp_pokersLayer.onlyShowPoker([{
                            pokerIndex: firstPokerIndex,
                            isOpen: true
                        }]);
                    }
                }
                // else console.log('已经开局，但没有收到服务端卡牌信息'+firstPokerIndex)
                this.on_startTouchTables(secs);
            } else {
                //已经开局
                this._isPauseOverMatch = true;
                this.resetShow();
                var secs = this._getOffSeconds(serverTime, this._nextStartTime);
                this.on_Wait(2, this.on_beforeStart.bind(this));;
            }
        } else {}
    },

    testGetPoker: function testGetPoker(getNum) {
        var p1 = [40, 44, 48, 5, 10];
        var p2 = [36, 37, 39, 10, 11];
        var p3 = [39, 41, 50, 13, 22];
        var p4 = [5, 31, 38, 0, 29];
        var p5 = [33, 34, 4, 36, 2];
        var pokerList = [{ 5: p1 }, { 6: p2 }, { 10: p3 }, { 9: p4 }, { 1: p5 }];
        if (!this._testPokerList) this._testPokerList = pokerList[G_TOOL.getRandomArea(0, 4)];
        if (getNum == 1) {
            var info = {};
            for (var i = 0; i < this._testPokerList.length; i++) {
                info.value = i;
                info.pokerIndex = this._testPokerList[i][0];
                break;
            }
            return info;
        } else {
            var info = {};
            for (var key = 0; key < this._testPokerList.length; key++) {
                info.value = key;
                info.pokerIndex = this._testPokerList[key];
            }
            return info;
        }
    },

    //初始化押宝房间必须要有的数据
    _initInHomeData: function _initInHomeData(initData) {
        //房间配置的数据
        if (initData.homeData) {
            var data = initData.homeData;
            if (!this._homeID) this._homeID = data.roomId;
            if (!this._matchID) this._matchID = data.matchId;
            this._nextStartTime = data.beginTimeNext;
            this._curEndGrabTime = data.settleTime;
            //if(data.minDealerGold) this._minDealerGold = data.minDealerGold;
            if (data.userId) {
                GG.getPlayer().setPlayerID(data.userId);
            }
            //最大投注次数
            if (data.betTimes) {
                this._maxBettingTimes = data.betTimes;
                this.setBettingTimes(this._maxBettingTimes);
            }
            //筹码选项
            if (data.betChip) {
                this._chipValueList = data.betChip;
                this._maxBettingGold = this._maxBettingTimes * data.betChip[data.betChip.length - 1];
                //设置初始化数据表现
                //this.comp_btnsLayer.initChipBtn(data.betChip);
            }
            //投注区域倍数
            if (data.areaInfo) {
                this.comp_tablesContainer.setStartInfo(data.areaInfo);
            }
        }
        //玩家自己的数据
        //其他玩家的数据
        //庄家的数据
        this.comp_playersContainer.setStartInfo(initData.othersData, initData.myselfData, initData.dealerData);
        //判定庄家
        if (initData.dealerData) {
            if (initData.dealerData.playerId == GG.getPlayerID()) {
                //自己是庄家
                //this.setBottomIsShow(false);
            } else {
                    //this.setBottomIsShow(true);
                    //清除庄字特效
                    //this.comp_playersLayer.getMyselfEffectComp().clearDealerWordAni();
                }
        }
    },

    //进入房间接收到的信息
    net_setHomeData: function net_setHomeData(recvData) {
        var tip = recvData.tip;
        if (tip.code != G_TYPE.serverCodeType.success) {
            // console.log(tip.tip);
            return;
        }
        this._dealInHomeNetData(recvData);

        //是否开局判定
        var serverTime = GG.socketMgr.getServerTime();
        //var isWait = this._nextStartTime > serverTime && serverTime >= this._curEndGrabTime;
        if (serverTime < this._curEndGrabTime) {
            //已经开局
            this.resetShow();
            this._startGame = true;
            //是否在游戏进行一半的时候进入
            var firstPokerIndex = recvData.poker;
            var secs = this._getOffSeconds(serverTime, this._curEndGrabTime);
            if (firstPokerIndex >= 0) {
                this._list_pokerIndex[0] = firstPokerIndex;
                var pokerData = G_OBJ.data_grabPokerInfo();
                pokerData.pokerInfoList = [{
                    pokerIndex: firstPokerIndex,
                    isOpen: true
                }];
                pokerData.isFlyEffect = false;
                pokerData.startPokerIndex = 1;

                this.comp_pokersLayer.showPokerEX(pokerData);
                //游戏中途加入,计算剩余秒数
                //if(secs > G_Config_grab.time_grabWillEnd){
                //    //充足的发牌时间
                //    this.comp_pokersLayer.addPokers([{
                //        pokerIndex : firstPokerIndex,
                //        isOpen : true
                //    }]);
                //}else{
                //    //不播放发牌动画
                //    this.comp_pokersLayer.onlyShowPoker([{
                //        pokerIndex : firstPokerIndex,
                //        isOpen : true
                //    }]);
                //}
            }
            // else console.log('已经开局，但没有收到服务端卡牌信息'+firstPokerIndex)
            this.on_startTouchTables(secs);
        } else {
            //未开局
            this._isPauseOverMatch = true;
            this.resetShow();
            this._startGame = false;
            var secs = this._getOffSeconds(serverTime, this._nextStartTime);
            if (secs <= 0) {
                //卡时间点了,直接开始投注
                var firstPokerIndex = recvData.poker;
                secs = this._getOffSeconds(serverTime, this._curEndGrabTime);
                if (firstPokerIndex >= 0) {
                    this._list_pokerIndex[0] = firstPokerIndex;
                    var pokerData = G_OBJ.data_grabPokerInfo();
                    pokerData.pokerInfoList = [{
                        pokerIndex: firstPokerIndex,
                        isOpen: true
                    }];
                    pokerData.isFlyEffect = false;
                    pokerData.startPokerIndex = 1;
                    this.comp_pokersLayer.showPokerEX(pokerData);
                }
                // else console.log('已经开局，但没有收到服务端卡牌信息'+firstPokerIndex)
                this.on_startTouchTables(secs);
            } else this.on_Wait(secs);
        }
    },

    //押宝——处理请求到的进房信息
    _dealInHomeNetData: function _dealInHomeNetData(recvData) {
        this._enterHomeData = recvData;
        var match = recvData.match;

        var time1 = new Date(GG.socketMgr.getServerTime());
        //console.log('当前：时:'+time1.getHours()+'分:'+time1.getMinutes()+'秒:'+time1.getSeconds())
        var time2 = new Date(match.settleTime);
        //console.log('下次开局：时:'+time2.getHours()+'分:'+time2.getMinutes()+'秒:'+time2.getSeconds())

        var id = GG.getPlayerID();
        var initData = {
            myselfData: {
                chooseDict: recvData.betChip,
                roomName: recvData.roomName
            },
            othersData: recvData.seats,
            dealerData: match.dealer,
            homeData: {
                roomId: recvData.roomId,
                userId: id,
                betTimes: recvData.betTimes,
                matchId: match.matchId,
                beginTimeNext: match.beginTimeNext,
                settleTime: match.settleTime,
                betChip: recvData.betChip,
                minDealerGold: recvData.minDealerCoin,
                areaInfo: recvData.betAreas
            }
        };
        this._initInHomeData(initData);
    },

    //重新设置开局数据
    net_resetGameData: function net_resetGameData(recvData) {
        var tip = recvData.tip;
        if (tip.code != G_TYPE.serverCodeType.success) {
            // console.log(tip.tip);
            return;
        }
        this.updateEnterHomeData(recvData);
        this.resetShow();
        var match = recvData.match;
        var id = GG.getPlayerID();
        var initData = {
            myselfData: {
                chooseDict: null,
                roomName: null
            },
            othersData: recvData.seats,
            dealerData: match.dealer,
            homeData: {
                //roomId : recvData.roomId,
                //userId : id,
                //betTimes : recvData.betTimes,
                //matchId : match.matchId,
                beginTimeNext: match.beginTimeNext,
                settleTime: match.settleTime
            }
        };
        this._initInHomeData(initData);

        //记录第一张卡牌
        this._list_pokerIndex[0] = recvData.poker;
        this.on_beforeStart();
    },

    //当有某个玩家投注,包括自己
    net_otherGrab: function net_otherGrab(recData) {
        var tip = recData.tip;
        if (tip.code != '0') {
            // console.log(tip.tip);
            return;
        }

        var others = recData.bets,
            netBeanData;
        for (var i = 0; i < others.length; i++) {
            netBeanData = others[i];
            //if(netBeanData.seatIndex===this.getMyselfComp().getSeatIndex())continue;
            var areaValue = parseInt(netBeanData.item.split('_')[0]);
            //投注信息
            var bettingData = G_OBJ.data_grabBetting();
            bettingData.goldNum = G_Config_grab.num_otherGrabGoldNum;
            bettingData.goldValue = netBeanData.gold;
            bettingData.tableIndex = areaValue;
            bettingData.isMine = false;

            switch (netBeanData.seatIndex) {
                case this.getMyselfComp().getSeatIndex():
                    //自己的投注
                    break;
                case G_DATA.getIdlePlayersSeatIndex():
                    //吃瓜群众
                    bettingData.startPos = this.comp_btnsContainer.getIdleBettingPos();
                    //自己没在座位上又有押注要扣掉玩家列表中自己的投注额
                    if (!this.getMyselfComp().getSeatIndex() && this.getMyselfComp().getIsBettingEnd()) {
                        //如果这个吃瓜群众是自己
                        bettingData.goldValue = this.getMyselfComp().reduceGoldEX(bettingData.goldValue);
                    }
                    if (bettingData.goldValue <= 0) {
                        break;
                    }
                    //有其他的吃瓜群众投注
                    bettingData = this.comp_tablesContainer.touchOneTable(bettingData.tableIndex, bettingData);
                    this.comp_goldContainer.moveAddGolds(bettingData);
                    this._recodeIdleBetting(bettingData.tableIndex, bettingData.goldNum);
                    break;
                case G_DATA.getDealerSeatIndex():
                    //庄家
                    break;
                default:
                    //正常座位上玩家
                    var playerComp = this.comp_playersContainer.getCompByIndex(netBeanData.seatIndex);
                    if (playerComp) {
                        bettingData.startPos = playerComp.getWorldPos();
                        playerComp.doChoose(bettingData.tableIndex, bettingData.goldNum);
                    }
                    bettingData = this.comp_tablesContainer.touchOneTable(bettingData.tableIndex, bettingData);
                    this.comp_goldContainer.moveAddGolds(bettingData);
                    break;
            }
        }
    },

    //结束投注，进入结算
    net_grabEnd: function net_grabEnd(recvData) {
        this._touchTableEnd();
        var pokerInfo = this.setBettingEndInfo(recvData);
        if (pokerInfo) this.comp_topEffect.playGrabDoneAni(this.on_giveFivePokers.bind(this), pokerInfo);
        this.on_Wait(this._getOffSeconds(GG.socketMgr.getServerTime(), this._nextStartTime));
    },

    setBettingEndInfo: function setBettingEndInfo(recvData) {
        var pokerInfo, pokerIndex, pokerData;
        if (G_Config_common.isLocal) {} else {
            var tip = recvData.tip;
            switch (tip.code) {
                case G_TYPE.serverCodeType.success:
                    break;
                case G_TYPE.serverCodeType.noBetting:
                    break;
                default:
                    return null;
            }
            this._super(recvData);
        }
        //整理卡牌数据
        pokerData = recvData.pokers[0];
        var pokerList = pokerData['code'].split(",");
        pokerInfo = [];
        for (var i = 0; i < pokerList.length; i++) {
            pokerIndex = parseInt(pokerList[i]);
            if (!isNaN(pokerIndex)) {
                pokerInfo.push({
                    pokerIndex: pokerIndex,
                    isOpen: false
                });
            }
        }

        this._list_winResult.push(pokerData.cardsPoint);
        //其他玩家
        var playerList = recvData.players;
        if (playerList) {
            var player, playerComp;
            for (var i = 0; i < playerList.length; i++) {
                player = playerList[i];
                //if(player.playerId == GG.getPlayer().getPlayerID()) continue;

                switch (player.seatIndex) {
                    case G_DATA.getDealerSeatIndex():
                        //庄家剩余金币
                        this.comp_playersContainer.getSystemComp().setGoldValue(player.balance);
                        break;
                    case G_DATA.getIdlePlayersSeatIndex():
                        break;
                    default:
                        //场上玩家
                        playerComp = this.comp_playersContainer.getCompByIndex(player.seatIndex);
                        if (playerComp) playerComp.setResultInfo(player.coin, player.balance);
                        break;
                }
            }
        }
        return pokerInfo;
    },

    //结束投注，如果自己有投注行为
    net_mineHasGrab: function net_mineHasGrab(recvData) {
        var tip = recvData.tip;
        if (tip.code != '0') {
            // console.log(tip.tip);
            return;
        }

        var myInfo = recvData.player;
        this.comp_playersContainer.setMyselfMoney(myInfo.coin, myInfo.balance);
    },

    //有人入座
    net_someOneInHome: function net_someOneInHome(recData) {
        var tip = recData.tip;
        if (tip.code != '0') {
            // console.log(tip.tip);
            return;
        }

        var player,
            playerList = recData.seats,
            myPlayerID = GG.getPlayerID();
        for (var i = 0; i < playerList.length; i++) {
            player = playerList[i];
            if (!player || player.player.playerId == myPlayerID) continue;
            this.comp_playersContainer.enterOnePlayer(player.seatIndex, player.player);
        }
    },

    //退出房间的请求
    net_exitHome: function net_exitHome(recData) {
        var tip = recData.tip;
        if (tip.code != '0') {
            // console.log(tip.tip);
            return;
        }

        GG.exitHome();
    },

    _getWaitTimeSec: function _getWaitTimeSec(waitTime) {
        var serverTime = GG.socketMgr.getServerTime();
        var date = new Date(waitTime - serverTime);
        return date.getSeconds();
    },

    addLongListenOnStart: function addLongListenOnStart() {
        GG.socketMgr.registerLong(NetType.r_grab_reStartGame, this.net_resetGameData.bind(this));
        GG.socketMgr.registerLong(NetType.r_grabEnd, this.net_grabEnd.bind(this));
        GG.socketMgr.registerLong(NetType.r_mineHaveGrab, this.net_mineHasGrab.bind(this));
        GG.socketMgr.registerLong(NetType.r_oneInHome, this.net_someOneInHome.bind(this));
        GG.socketMgr.registerLong(NetType.r_grab_exitReturn, this.net_exitHome.bind(this));
        // GG.socketMgr.registerLong(NetType.r_idleTimeOut, this.net_idleTimeOut.bind(this));
        GG.socketMgr.registerLong(NetType.r_otherGrab, this.net_otherGrab.bind(this));
    },

    // called every frame, uncomment this function to activate update callback
    // update: function (dt) {

    // },

    onDestroy: function onDestroy() {
        this._super();
        GG.grabMgr = null;
    }
});

cc._RF.pop();
},{"BaseManager":"BaseManager","Grab_btnContainer":"Grab_btnContainer","Grab_goldContainer":"Grab_goldContainer","Grab_playersLayer":"Grab_playersLayer","Grab_pokerLayer":"Grab_pokerLayer","Grab_tablesLayer":"Grab_tablesLayer","Grab_topLayer":"Grab_topLayer","Obj_uiContainer":"Obj_uiContainer"}],"Grab_btnContainer":[function(require,module,exports){
"use strict";
cc._RF.push(module, '26aca2lT0ZA06ebEnuK1Os6', 'Grab_btnContainer');
// Script/Views/Scene_Grab/Grab_btnContainer.js

'use strict';

//按钮管理类


cc.Class({
    extends: require('AutoDealing'),

    properties: {
        _lastBtn: null,

        node_btnGroup: cc.Node,
        // node_effectOnButton : cc.Node,
        node_effectUnderButton: cc.Node,
        node_exitHomeBtn: cc.Node, //退出房间的按钮
        //右下角的按钮
        node_playersList: cc.Node,
        node_rules: cc.Node,
        node_trend: cc.Node
    },

    // use this for initialization
    onLoad: function onLoad() {
        this._init();

        this._registerAllBtn();
    },

    setStartInfo: function setStartInfo() {
        var valueDict = GG.grabMgr.getMyselfComp().getMoneyChooseDict();
        this._setBtnInfo(valueDict);

        this.setBtnGroupEnable(false);
    },

    _init: function _init() {
        this._btnCompName = 'Obj_optionButton';
        this._isAdaptPos = false;
    },

    _registerAllBtn: function _registerAllBtn() {
        var btns = this.node_btnGroup.children;
        for (var i = 0; i < btns.length; i++) {
            this.registerButton(btns[i], this.OnClick_chooseMoney, this, parseInt(i), true);
        }
        //this.node_exitHomeBtn.parent.getComponent('Obj_leftTopMenu').bindFunc(this.OnClick_exit.bind(this), this.OnClick_changeDesk.bind(this));
        this.registerButton(this.node_exitHomeBtn, this.OnClick_exit, this);
        //右下角按钮
        this.registerButton(this.node_playersList, this.OnClick_playerList, this);
        this.registerButton(this.node_rules, this.OnClick_rules, this);
        this.registerButton(this.node_trend, this.OnClick_trend, this);
    },
    //点击选中筹码  userData从0开始
    OnClick_chooseMoney: function OnClick_chooseMoney(event, userData) {
        this.chooseOption(userData);
    },
    //点击换桌
    OnClick_changeDesk: function OnClick_changeDesk() {},
    //点击退出房间
    OnClick_exit: function OnClick_exit(event) {
        if (G_Config_common.isLocal) {
            GG.tipsMgr.showConfirmTip_TWO(G_CHINESE.exitText1, function () {
                GG.exitHome();
            });
            return;
        }

        if (GG.grabMgr.getIsGrab()) {
            GG.tipsMgr.showConfirmTip_TWO(G_CHINESE.exitText1, function () {
                var netData = {
                    roomId: GG.grabMgr.getHomeID(),
                    isBreak: true
                };
                GG.socketMgr.SendMsg(NetType.s_grab_Exit, netData);
            });
        } else {
            var netData = {
                roomId: GG.grabMgr.getHomeID(),
                isBreak: true
            };
            GG.socketMgr.SendMsg(NetType.s_grab_Exit, netData);
        }
    },
    //点击玩家列表
    OnClick_playerList: function OnClick_playerList() {
        var data = 1;
        var layer = GG.grabMgr.showDialogUI(G_RES_URL.uiName.playerList, function (layer) {
            layer.setData(data);
        });
    },
    //点击游戏规则
    OnClick_rules: function OnClick_rules() {
        var data = G_TYPE.gameModule.grab;
        var layer = GG.grabMgr.showDialogUI(G_RES_URL.uiName.rulesInHome, function (layer) {
            layer.showLayer();
            layer.setData(data);
        });
    },
    //点击走势图列表
    OnClick_trend: function OnClick_trend() {
        var data = GG.grabMgr.getHomeID();
        var layer = GG.grabMgr.showDialogUI(G_RES_URL.uiName.grabTrend, function (layer) {
            layer.setData(data);
        });
    },

    //=========================================

    //选中一个筹码  index 从0开始
    chooseOption: function chooseOption(chooseLevel) {
        chooseLevel = parseInt(chooseLevel);
        GG.grabMgr.getMyselfComp().setChooseLevel(chooseLevel);
        this._showChooseEffect(this._getBtnByIndex(chooseLevel));
    },

    _setBtnInfo: function _setBtnInfo(valueDict) {
        var btns = this.node_btnGroup.children,
            index;
        for (var i = 0; i < btns.length; i++) {
            index = parseInt(i);
            btns[i].tag = valueDict[index];
            btns[i].getComponent(this._btnCompName).showMoney(valueDict[index], false);
        }
    },
    _getBtnByIndex: function _getBtnByIndex(index) {
        return this.node_btnGroup.children[index];
    },
    chooseMoney: function chooseMoney(index) {
        var btn = this._getBtnByIndex(index);
        //获取第一次进房是否可下注
        this.isBetting = GG.grabMgr.getFirstBetting();
        this._showChooseEffect(btn);
    },

    //刷新押宝可用筹码显示
    refreshGrabOption: function refreshGrabOption(useGold) {
        if (!this._list_myGrabOption) this._list_myGrabOption = GG.grabMgr.getMyselfComp().getMoneyChooseDict();
        if (!G_DATA.isNumber(useGold)) useGold = GG.grabMgr.getMyselfComp().getGoldValue();
        var targetChoose = null;
        var lastChoose = GG.grabMgr.getMyselfComp().getChooseLevel();
        var btnGroup = this.node_btnGroup.children;
        for (var option = 0; option < this._list_myGrabOption.length; option++) {
            if (this._list_myGrabOption[option] <= useGold) {
                this.setBtnEnable(btnGroup[option], true);
                targetChoose = parseInt(option);
            } else {
                if (this._lastBtn && this._lastBtn.tag == this._list_myGrabOption[option]) {
                    this._cancelChoose();
                }
                this.setBtnEnable(btnGroup[option], false);
            }
        }
        //如果有取消选中筹码，需要重新选择筹码
        if (!this._lastBtn && G_DATA.isNumber(targetChoose)) {
            //保持上次的选择
            if (GG.grabMgr.getMyselfComp().getChooseLevel() < targetChoose) targetChoose = GG.grabMgr.getMyselfComp().getChooseLevel();

            this._showChooseEffect(btnGroup[targetChoose]);
            GG.grabMgr.getMyselfComp().setChooseLevel(targetChoose);
        }
    },

    //===========================表现

    //设置按钮置灰
    setBtnGroupEnable: function setBtnGroupEnable(isEnable) {
        this._cancelChoose();
        var btnGroup = this.node_btnGroup.children;
        for (var i = 0; i < btnGroup.length; i++) {
            //设置某个按钮置灰
            this.setBtnEnable(btnGroup[i], isEnable);
        }
    },

    //按钮选中效果
    _showChooseEffect: function _showChooseEffect(targetBtn) {
        if (targetBtn) {
            //取消上次的选中效果
            this._cancelChoose();

            //按钮颜色
            targetBtn.getComponent(this._btnCompName).showMoney(null, true);
            //按钮底部效果
            this._showUnderBtnEffect(targetBtn);
            //禁用选中按钮，但是不置灰
            this.setBtnEnable(targetBtn, false, true);
            this._lastBtn = targetBtn;

            //刚进入游戏如果可下注 强制自适应
            // if (this.isBetting && !this._isAdaptPos) {
            //     this.node_effectUnderButton.position = G_TOOL.adaptPos(this.node_effectUnderButton.position);
            //     var size = G_TOOL.adaptSize(targetBtn.width, targetBtn.height);
            //     this.node_effectUnderButton.width = size.width;
            //     this._isAdaptPos = true;
            // } else {
            //     this.node_effectUnderButton.width = targetBtn.width;
            // }
        }

        //this._changeBtnColor(targetBtn);
        //
        ////effect
        //// //this.node_effectOnButton.active = true;
        //this.node_effectUnderButton.active = true;
        ////
        //// //this.node_effectOnButton.position = cc.p(targetBtn.x, targetBtn.y);;
        //this.node_effectUnderButton.x = targetBtn.x;
        //this.node_effectUnderButton.y = -targetBtn.height/2;
        ////刚进入游戏如果可下注 强制自适应
        //if (this.isBetting && !this._isAdaptPos) {
        //    this.node_effectUnderButton.position = G_TOOL.adaptPos(this.node_effectUnderButton.position);
        //    var size = G_TOOL.adaptSize(targetBtn.width, targetBtn.height);
        //    this.node_effectUnderButton.width = size.width;
        //    this._isAdaptPos = true;
        //} else {
        //    this.node_effectUnderButton.width = targetBtn.width;
        //}
    },

    //取消上一次的选中效果
    _cancelChoose: function _cancelChoose() {
        if (this._lastBtn) {
            this._hideUnderBtnEffect();
            this._lastBtn.getComponent(this._btnCompName).showMoney(null, false);
            this.setBtnEnable(this._lastBtn, true);
            this._lastBtn = null;
        }
    },

    //显示按钮底部效果
    _showUnderBtnEffect: function _showUnderBtnEffect(targetBtn) {
        this.node_effectUnderButton.active = true;
        this.node_effectUnderButton.x = targetBtn.x;
        this.node_effectUnderButton.y = -targetBtn.height * 0.65;
    },
    //隐藏按钮特效
    _hideUnderBtnEffect: function _hideUnderBtnEffect() {
        this.node_effectUnderButton.active = false;
    },

    //=============================获取

    //获取轮子装饰物的位置
    getWheelPos: function getWheelPos() {
        var designSize = cc.view.getDesignResolutionSize();
        return cc.p(designSize.width * 0.8, designSize.height * 0.2);
    },
    //获取吃瓜群众投注起点
    getIdleBettingPos: function getIdleBettingPos() {
        var pos = this.node_playersList.position;
        var basePos = this.node_playersList.parent.parent.position;
        var posX = pos.x + this.node_playersList.parent.x + basePos.x;
        var posY = pos.y + this.node_playersList.parent.y + basePos.y + this.node_playersList.height / 2;
        return cc.p(posX, posY);
    }
});

cc._RF.pop();
},{"AutoDealing":"AutoDealing"}],"Grab_goldContainer":[function(require,module,exports){
"use strict";
cc._RF.push(module, '93263ztXJhLmK5n7/NR+HHn', 'Grab_goldContainer');
// Script/Views/Scene_Grab/Grab_goldContainer.js

'use strict';

//金币流动效果的处理层

//var goldInfo = {
//    startPos : cc.p(),
//    targetPos : cc.p(),
//    goldNum : 4,
//    userData : '',
//    tableIndex : 1,
//    callFunc : '',
//}

cc.Class({
    extends: cc.Component,

    properties: {
        _pool: null,
        _callFunc: null,

        frame_gold: cc.SpriteFrame
    },

    // use this for initialization
    onLoad: function onLoad() {
        this._goldScale = G_Config_common.scale_moveGold;
        this._addGoldTime = G_Config_grab.time_goldFly_Add;
        this._resultGoldTime = G_Config_grab.time_goldFly_Result;

        this._pool = new cc.NodePool('Grab_goldContainer');
    },

    moveAddGolds: function moveAddGolds(goldInfo, callFunc) {
        //this._callFunc = callFunc;
        GG.audioMgr.playSound(15);
        var gold,
            act1,
            act2,
            delayTime = 0,
            delayValue = G_Config_grab.time_goldFly_delay;
        for (var i = 0; i < goldInfo.goldNum; i++) {
            gold = this._getGold();
            gold.position = goldInfo.startPos;
            gold._flyCallFunc = goldInfo.callFunc;

            act1 = cc.delayTime(delayTime);
            act2 = cc.moveTo(this._addGoldTime, goldInfo.targetPos);
            gold.runAction(cc.sequence(act1, act2, cc.callFunc(this._flyAddGoldEnd, this, goldInfo)));
            delayTime += delayValue;
        }
        if (gold) gold._endCallFunc = callFunc;
    },
    _flyAddGoldEnd: function _flyAddGoldEnd(target, goldInfo) {
        var gold = target;
        if (gold._flyCallFunc) {
            gold._flyCallFunc();
            gold._flyCallFunc = null;
        }
        if (gold._endCallFunc) {
            gold._endCallFunc();
            gold._endCallFunc = null;
        }
        this._removeGold(gold);
    },

    //========================重构金币的回收显示

    flyResultGold: function flyResultGold(dataList, callFunc) {
        if (!dataList) return;
        var dataObj;
        this._callFunc = callFunc;
        for (var i = 0; i < dataList.length; i++) {
            dataObj = dataList[i];
            if (dataObj) {
                this._setResultGolds(dataObj);
            }
        }
    },
    _setResultGolds: function _setResultGolds(dataObj) {
        for (var i = 0; i < dataObj.goldNum; i++) {
            var gold = this._getGold();
            var table = GG.grabMgr.getTable(dataObj.tableIndex);
            var startPos = table.removeOneGoldImg();
            if (!startPos) continue;
            gold.position = startPos;

            var act1 = cc.moveTo(this._resultGoldTime, dataObj.targetPos);
            var self = this;
            gold.runAction(cc.sequence(act1, cc.callFunc(function (target) {
                self._removeGold(target);
                if (self.callBack) {
                    self.callBack();
                    self.callBack = null;
                }
            }, this, this._resultGoldNum)));
        }
    },

    //剩余的金币全部移动到系统庄
    recordLeaveGolds: function recordLeaveGolds(targetPos) {},

    //addResultGolds : function (dataList, callFunc) {
    //    if(dataList.length < 1) return;
    //    this._callFunc = callFunc;
    //    this._list_resultGold = dataList;
    //    this._resultGoldNum = 0;
    //
    //    this._update_resultGold();
    //    this.schedule(this._update_resultGold, G_Config_grab.time_goldFly_delay);
    //    GG.audioMgr.playSound(18);
    //},
    //_update_resultGold : function () {
    //    if(this._list_resultGold.length > 0){
    //        var dataObj,gold,table,act1;
    //        for(var i = this._list_resultGold.length-1; i >= 0; i --){
    //            dataObj = this._list_resultGold[i];
    //            if(dataObj.goldNum > 0){
    //                gold = this._getGold();
    //                this._resultGoldNum += 1;
    //
    //                table = GG.grabMgr.getTable(dataObj.tableIndex);
    //                table.removeOneGoldImg();
    //                gold.position = table.getWorldPos();
    //
    //                act1 = cc.moveTo(this._resultGoldTime, dataObj.targetPos);
    //                gold.runAction(cc.sequence(act1, cc.callFunc(this._flyResultGoldEnd, this, this._resultGoldNum)));
    //                dataObj.goldNum -= 1;
    //            }else {
    //                if(dataObj.callFunc) dataObj.callFunc(dataObj.tableIndex);
    //                this._list_resultGold.splice(i, 1);
    //                if(this._list_resultGold.length <= 0){
    //                    this.unschedule(this._update_resultGold);
    //                    this._list_resultGold = null;
    //                }
    //            }
    //        }
    //    }
    //},
    //_flyResultGoldEnd : function (target, userData) {
    //    this._removeGold(target);
    //    if(!this._list_resultGold && userData == this._resultGoldNum){
    //        this._resultGoldNum = 0;
    //        if(this._callFunc){
    //            this._callFunc();
    //            this._callFunc = null;
    //        }
    //    }
    //},

    _getGold: function _getGold() {
        var goldNode = this._pool.get();
        if (!goldNode) {
            goldNode = new cc.Node();
            var sp = goldNode.addComponent(cc.Sprite);
            sp.spriteFrame = this.frame_gold;
        }
        goldNode.parent = this.node;
        goldNode.scale = this._goldScale;
        goldNode.active = true;
        return goldNode;
    },

    _removeGold: function _removeGold(goldeNode) {
        goldeNode.active = false;
        this._pool.put(goldeNode);
    },

    clearAll: function clearAll() {
        this.node.stopAllActions();
        var goldList = this.node.children;
        var num = goldList.length;
        for (var i = num - 1; i >= 0; i--) {
            this._removeGold(goldList[i]);
        }
    }

});

cc._RF.pop();
},{}],"Grab_oneTable":[function(require,module,exports){
"use strict";
cc._RF.push(module, 'cd914lZMLpN6b4JTXgsnLK+', 'Grab_oneTable');
// Script/Views/Scene_Grab/Grab_oneTable.js

'use strict';

//单个投注区域格子


cc.Class({
    extends: cc.Component,

    properties: {
        _ownerGold: 0,
        _areaGold: 0,
        _goldFrame: null,
        _bullType: null,
        _multiple: 1,
        _maxAdaptGold: null,
        _curGoldNum: null,
        _isWin: null,

        num_result: {
            default: 0,
            type: cc.Integer,
            displayName: '代表的结果值'
        },
        label_multiple: {
            default: null,
            type: cc.Label,
            displayName: '倍数'
        },
        node_goldContainer: {
            default: null,
            type: cc.Node,
            displayName: '金币容器'
        },
        label_areaValue: {
            default: null,
            type: cc.Label,
            displayName: '格子内总金币'
        },
        label_ownerValue: {
            default: null,
            type: cc.Label,
            displayName: '投注值'
        },
        label_resultMultiple: {
            default: null,
            type: cc.Label,
            displayName: '结果倍数'
        }
    },

    // use this for initialization
    onLoad: function onLoad() {
        this._init();
    },

    _init: function _init() {
        this._ownerFormatStr = '<b>%s</b>';
        //this._areaFormatStr = '<b>%s</b>';
        //this._multipleFormatStr = '<b>%s</b>';
        //this._areaFormatStr = '';
        //this._multipleFormatStr = '';
        //this.node_goldContainer.x += 200;
        var rate = G_Config_grab.num_goldImgArea;
        // this._minGoldX = -this.node.width*rate*1.3;
        this._maxGoldX = this.node.width * rate * 1.3;
        // this._minGoldY = this.node.height*rate*0.35;
        this._maxGoldY = -this.node.height * rate * 0.35;
        this._maxAdaptGold = 50;
        this._curGoldNum = 0;
        this._loseColor = new cc.Color(253, 41, 31); //失败的颜色
        this._winColor = this.label_ownerValue.node.color, //胜利的颜色


        this._goldScale = G_Config_grab.scale_moveGold;
        this.comp_scrollValue = this.getComponent('Obj_scrollValue');
    },

    setInfo: function setInfo(goldFrame, bullType, multiple) {
        this._goldFrame = goldFrame;
        this._bullType = bullType;
        this._multiple = parseInt(multiple);
    },

    clearData: function clearData() {
        this._ownerGold = 0;
        this._areaGold = 0;
        this._isWin = false;

        this._setMultiple();
        this._clearGoldImg();
        this.label_areaValue.string = '';
        this.label_ownerValue.node.color = this._winColor; //胜利颜色
        this._setOwnerGold(0);
    },

    OnClick_table: function OnClick_table(event) {
        var dataObj = G_OBJ.data_grabBetting();
        dataObj.tableIndex = this.getResultType();
        dataObj.targetPos = this.getGoldCenterPos();
        dataObj.callFunc = this._goldAdd.bind(this);

        GG.grabMgr.playMyGoldMove(dataObj);
    },
    _goldAdd: function _goldAdd() {
        this._addOneGoldImg();
    },

    otherAddGold: function otherAddGold(goldInfo) {
        goldInfo.targetPos = this.getWorldPos();
        goldInfo.callFunc = this._goldAdd.bind(this);

        var addGoldValue = goldInfo.goldValue;
        if (goldInfo.isMine) {
            this.addOwnerGold(addGoldValue); //自己押注
        } else this._addOthersGold(addGoldValue); //他人押注
        return goldInfo;
    },

    //自己押注值
    addOwnerGold: function addOwnerGold(goldValue) {
        if (!goldValue) return;
        this._ownerGold += goldValue;
        this._setOwnerGold(this._ownerGold);
        this._addOthersGold(goldValue);
    },
    //他人押注值
    _addOthersGold: function _addOthersGold(goldValue) {
        if (!goldValue) goldValue = 0;
        this._areaGold += goldValue;
        this._setAreaGold(this._areaGold);
    },

    _setOwnerGold: function _setOwnerGold(goldNum) {
        if (!goldNum) {
            this.label_ownerValue.node.parent.active = false;
        } else {
            this.label_ownerValue.node.parent.active = true;
            //this.label_ownerValue.string = G_TOOL.formatStr(this._ownerFormatStr, G_TOOL.changeMoney(goldNum));
            this.label_ownerValue.string = G_TOOL.changeMoney(goldNum);
            //this.label_ownerValue.string = G_TOOL.changeMoney(goldNum);
            this.label_resultMultiple.string = '';
            this._changeDownLabel(this.label_ownerValue.node, false);
        }
    },
    _setAreaGold: function _setAreaGold(goldNum) {
        if (!goldNum) this.label_areaValue.string = '';else this.label_areaValue.string = G_TOOL.changeMoney(goldNum);
        //else this.label_areaValue.string = G_TOOL.formatStr(this._areaFormatStr, G_TOOL.changeMoney(goldNum));
    },

    showOwnerResult: function showOwnerResult() {
        if (this._ownerGold < 1) return;
        var showStr = G_TOOL.changeMoney(this._ownerGold);
        this._changeDownLabel(this.label_ownerValue.node, this._isWin);
        if (!this._isWin) {
            showStr = '-' + showStr;
            this.label_resultMultiple.string = '';
            this.label_ownerValue.string = showStr;
            this.label_ownerValue.node.color = this._loseColor; //失败颜色
        } else {
            //胜利
            this.label_resultMultiple.string = 'X' + this._multiple;
            var winValue = this._ownerGold * this._multiple;
            var dataObj = {
                startNum: 0,
                targetNum: winValue,
                label: this.label_ownerValue,
                formatStr: '',
                callFunc: function () {
                    this.label_ownerValue.string = G_TOOL.changeMoney(winValue);
                    //this.label_ownerValue.node.color = this._winColor;//胜利颜色
                }.bind(this)
            };
            this.comp_scrollValue.scrollLabel(dataObj);
        }
        //this.label_ownerValue.string = G_TOOL.formatStr(this._ownerFormatStr, showStr);
    },
    //滚动金币结束
    _scrollCall: function _scrollCall() {},
    _setMultiple: function _setMultiple() {
        var str = this._multiple + '倍';
        this.label_multiple.string = str;
    },
    _addOneGoldImg: function _addOneGoldImg() {
        if (!this._goldFrame) return;

        var rate = this._curGoldNum / this._maxAdaptGold;
        rate = Math.min(Math.max(rate, 0.55), 1);
        var isUp = G_TOOL.getRandomBool() ? 1 : -1;
        var goldX = G_TOOL.getRandomArea(0, this._maxGoldX * rate) * isUp;
        isUp = G_TOOL.getRandomBool() ? 1 : -1;
        var goldY = G_TOOL.getRandomArea(0, this._maxGoldY * rate) * isUp;
        var gold = this._getGold();
        gold.position = cc.p(0, 0);
        gold.runAction(cc.moveTo(0.35, goldX, goldY));
        this._curGoldNum += 1;
    },

    removeOneGoldImg: function removeOneGoldImg() {
        var gold = this.node_goldContainer.children[0];
        if (gold) {
            var worldPos = this.getWorldPos();
            var curPos = cc.p(worldPos.x + gold.x, worldPos.y + gold.y);
            this._removeGold(gold);
            this._curGoldNum -= 1;
            return curPos;
        }
        return null;
    },

    _getGold: function _getGold() {
        if (!this._pool) this._pool = new cc.NodePool('Grab_oneTable' + this.num_result);

        var goldNode = this._pool.get();
        if (!goldNode) {
            goldNode = new cc.Node();
            var sp = goldNode.addComponent(cc.Sprite);
            sp.spriteFrame = this._goldFrame;
        }
        goldNode.parent = this.node_goldContainer;
        goldNode.scale = 1 / this.node.parent.scale * this._goldScale;
        goldNode.active = true;
        return goldNode;
    },
    _removeGold: function _removeGold(goldeNode) {
        goldeNode.stopAllActions();
        goldeNode.active = false;
        this._pool.put(goldeNode);
    },

    _clearGoldImg: function _clearGoldImg() {
        var golds = this.node_goldContainer.children;
        for (var i = 0; i < golds.length; i++) {
            golds[i].destroy();
        }
        this._curGoldNum = 0;
    },

    setTouchEnable: function setTouchEnable(isEnable) {
        if (isEnable) {
            this.node.on(cc.Node.EventType.TOUCH_START, this.OnClick_table, this);
        } else this.node.off(cc.Node.EventType.TOUCH_START, this.OnClick_table, this);
    },
    //设置底部label随着倍数是否显示而变化位置
    _changeDownLabel: function _changeDownLabel(curLabel, isRight) {
        if (isRight) {
            curLabel.anchorX = 1;
            curLabel.x = curLabel.parent.width * 0.47;
        } else {
            curLabel.anchorX = 0.5;
            curLabel.x = 0;
        }
    },

    getWorldPos: function getWorldPos() {
        var parentPos = this.node.parent.position;
        var parentScale = this.node.parent.scale;
        return cc.p(parentPos.x + this.node.x * parentScale, parentPos.y + this.node.y * parentScale - this.node.height * 0.4); //赢钱旗帜位置
    },
    getGoldCenterPos: function getGoldCenterPos() {
        var parentPos = this.node.parent.position;
        var parentScale = this.node.parent.scale;
        return cc.p(parentPos.x + this.node.x * parentScale, parentPos.y + this.node.y * parentScale - this.node.height * 0.2);
    },

    getResultType: function getResultType() {
        return this.num_result;
    },
    setTableWin: function setTableWin() {
        this._isWin = true;
    },

    getGrabGold: function getGrabGold() {
        return this._ownerGold * this._multiple;
    },
    getLostGold: function getLostGold() {
        return this._ownerGold;
    },
    //获取剩余没有被移除的金币数量
    getLeaveGoldImg: function getLeaveGoldImg() {
        return this._curGoldNum;
    }

});

cc._RF.pop();
},{}],"Grab_playerBlock":[function(require,module,exports){
"use strict";
cc._RF.push(module, '96991gtPcZLnLBL5qF9FsyE', 'Grab_playerBlock');
// Script/Views/Scene_Grab/Grab_playerBlock.js

'use strict';

//玩家头像块

cc.Class({
    extends: cc.Component,

    properties: {
        _siteImg: null,
        _chooseMoneyLevel: null,
        _dict_chooseMoney: null,
        _callFunc: null,
        _defaultHeadFrame: null, //没有玩家头像时候使用的默认头像
        _seatMyselfComp: null, //座位上的自己玩家
        _data_betting: null, //投注信息
        _goldValueEX: null, //投注金额池信息
        _isSending: null, //是否正在发送投注请求

        //data
        _dict_choosed: null,
        _curGoldValue: null,
        _grabGold: null,
        _playerName: null,
        _grabTimes: null, //当前投注次数
        _seatIndex: null,
        _resultChangeMoney: null, //结算时候显示是金额变化
        _playerID: null, //玩家id
        _usableBalance: null, //可用余额

        node_headImg: {
            default: null,
            type: cc.Node,
            displayName: '头像'
        },
        label_playerName: {
            default: null,
            type: cc.Label,
            displayName: '玩家名'
        },
        node_goldValue: {
            default: null,
            type: cc.Node,
            displayName: '拥有金币'
        },
        _playerType: 0,
        playerType: {
            set: function set(_type) {
                this._playerType = _type;
            },
            get: function get() {
                return this._playerType;
            },
            type: G_TYPE.playerType,
            displayName: '玩家类型'
        },
        prefab_goldValue: cc.Prefab
    },

    // use this for initialization
    onLoad: function onLoad() {
        this._init();
    },

    _init: function _init() {
        this._dict_chooseLevel = G_Config_grab.dict_moveGoldNum;
        this._goldValueCompName = 'Obj_goldResultEffect';
        this._chooseMoneyLevel = 0;
    },

    start: function start() {},

    //var dataObj = {
    //    name : '',
    //    headImg : '',
    //    goldValue : 11
    //}
    setPlayerData: function setPlayerData(dataObj) {
        if (!dataObj) return;
        this.node.active = true;

        this.clearData();
        if (dataObj.coin >= 0) this.setGoldValue(dataObj.coin);else this.setGoldValue(0);
        if (dataObj.seatIndex) this._seatIndex = dataObj.seatIndex;

        this._playerName = dataObj.nickname;
        this._setPlayerName(this._playerName);
        G_TOOL.setHeadImg(this.node_headImg, dataObj.icon);
        this._playerID = dataObj.playerId;
        this._usableBalance = dataObj.usableBalance;
    },
    setSelfInfo: function setSelfInfo(selfInfo) {
        if (selfInfo.chooseDict) this._dict_chooseMoney = selfInfo.chooseDict;
        var homeLabel = this.node.getChildByName('homeName');
        if (homeLabel && selfInfo.roomName) {
            homeLabel.getComponent(cc.Label).string = selfInfo.roomName;
        }
    },

    clearData: function clearData() {
        this._dict_choosed = {};
        this._grabGold = 0;
        this._goldValueEX = 0;
        this._grabTimes = 0;
        this._isSending = false;
        this._data_betting = null;
        this._resultChangeMoney = null;
    },

    _refreshGoldShow: function _refreshGoldShow() {
        this.node_goldValue.getComponent(cc.Label).string = G_TOOL.changeMoney(this._curGoldValue);
    },

    doChoose: function doChoose(tableIndex, goldNum) {
        if (this._dict_choosed[tableIndex]) this._dict_choosed[tableIndex] += goldNum;else this._dict_choosed[tableIndex] = goldNum;
    },

    //点击投注区域
    touchGrabArea: function touchGrabArea(grabInfo, callFunc) {
        var goldNum = 0;
        var money = this._dict_chooseMoney[this._chooseMoneyLevel];
        this._callFunc = callFunc;

        if (money > this._curGoldValue) {
            //余额不足
            var dataObj = {
                tipIndex: 21
            };
            GG.tipsMgr.showTxtTip(dataObj);
        } else {
            //if(this._getIsOverMaxGrabTimes()){
            //    //超出最大投注次数
            //    var dataObj = {
            //        tipIndex : 20,
            //        showStr : '超出最大投注次数'
            //    }
            //    GG.tipsMgr.showTxtTip(dataObj);
            //}else{
            //
            //}
            if (G_Config_common.isLocal) {
                grabInfo.startPos = this.getWorldPos();
                this.forceGrabReturn(grabInfo, money, grabInfo.tableIndex);
            } else {
                if (this._isSending) {
                    return;
                }
                grabInfo.startPos = this.getWorldPos();
                grabInfo.goldValue = money;
                this._data_betting = grabInfo;

                //可以投注
                var netData = {
                    matchId: GG.grabMgr.getMatchID(), //赛事id  int
                    type: G_TYPE.net_gameModule.grab, //投注类型 string
                    item: grabInfo.tableIndex + '_W', //投注项 string
                    gold: money };
                this._isSending = true;
                GG.socketMgr.SendMsg(NetType.s_doGrab, netData);
                GG.socketMgr.registerLong(NetType.r_doGrab_return, this.net_grabReturn.bind(this));
            }
        }
    },
    net_grabReturn: function net_grabReturn(recvData) {
        this._isSending = false;
        var tip = recvData.tip;
        if (tip.code != G_TYPE.serverCodeType.success) {
            var dataObj = {
                tipIndex: 19,
                retainTime: 3,
                showStr: tip.tip
            };
            GG.tipsMgr.showTxtTip(dataObj);
            return;
        }

        //赛事不存在踢出
        if (tip.code == G_TYPE.serverCodeType.matchNonExistent) {
            GG.exitHome();
            return;
        }
        //下分金额为非许可值踢出
        if (tip.code == G_TYPE.serverCodeType.betNotPermitCoin) {
            GG.exitHome();
            return;
        }
        //非法下注类型踢出
        if (tip.code == G_TYPE.serverCodeType.betNotPermitBet) {
            GG.exitHome();
            return;
        }
        if (!this._data_betting) return;
        var bettingData = G_OBJ.data_grabBetting();
        for (var attrName in this._data_betting) {
            if (attrName) bettingData[attrName] = this._data_betting[attrName];
        }
        this._data_betting = null;

        bettingData.goldValue = recvData.bet.gold;
        bettingData.goldNum = parseInt(this._dict_chooseLevel[this._chooseMoneyLevel + 1]);

        //记录投注信息
        this.doChoose(bettingData.tableIndex, bettingData.goldNum);
        //累计投注金额
        this._grabGold += bettingData.goldValue;
        this._goldValueEX += bettingData.goldValue;
        //更新玩家剩余金额
        this.setGoldValue(recvData.nbSelf.balance);
        //可用余额
        this._usableBalance = recvData.nbSelf.usableBalance;
        //押注过程中更新押注按钮（置灰）
        GG.grabMgr.getBtnsComp().refreshGrabOption(this.getGoldValue());

        this._grabTimes += 1;
        // GG.grabMgr.setBettingTimes(this._grabTimes);
        if (this._callFunc) {
            this._callFunc(bettingData);
            this._callFunc = null;
        }
    },
    forceGrabReturn: function forceGrabReturn(grabInfo, money, tableIndex) {
        grabInfo.goldValue = money;
        this._grabGold += money;
        this._goldValueEX += money;
        this.setGoldValue(this._curGoldValue - money);
        var goldNum = parseInt(this._dict_chooseLevel[this._chooseMoneyLevel + 1]);
        grabInfo.goldNum = goldNum;
        this.doChoose(tableIndex, goldNum);
        this._grabTimes += 1;
        if (this._callFunc) {
            this._callFunc(grabInfo);
            this._callFunc = null;
        }
    },

    setResultInfo: function setResultInfo(changeMoney, haveMoney) {
        if (G_DATA.isNumber(haveMoney)) this._curGoldValue = haveMoney;
        this._resultChangeMoney = changeMoney;
    },
    //setResultGoldInfo : function (goldInfo) {
    //    goldInfo.targetPos = this.getWorldPos();
    //    //goldInfo.callFunc = this.showResultGold.bind(this);
    //    return goldInfo
    //},
    showResultGold: function showResultGold() {
        if (this._resultChangeMoney) {
            this._refreshGoldShow();
            this._showGoldCount(this._resultChangeMoney);
            return true;
        }
        return false;
    },
    //显示玩家数值的增减
    _showGoldCount: function _showGoldCount(count) {
        if (!count) return;

        var labelNode = cc.instantiate(this.prefab_goldValue);
        labelNode.parent = this.node;
        labelNode.zIndex = 2;

        labelNode.getComponent(this._goldValueCompName).showGrabGold(count);

        labelNode.scale = 0.1;
        var parentScale, widthOff;
        widthOff = this.node.width * 0.3;
        if (this.playerType == G_TYPE.playerType.owner) {
            parentScale = this.node.scale;
        } else if (this.playerType == G_TYPE.playerType.others) {
            parentScale = this.node.parent.scale;
        }
        if (this.node.x > cc.visibleRect.width / 2) widthOff *= -1;
        var time = G_Config_grab.time_goldOnHead;
        var act1 = cc.moveTo(time, widthOff, this.node.height * 0.4);
        var act2 = cc.scaleTo(time, 1);
        var act3 = cc.delayTime(time * 2);
        labelNode.runAction(cc.sequence(cc.spawn(act1, act2), act3, cc.callFunc(this._labelMoveEnd, this, count)));
    },
    _labelMoveEnd: function _labelMoveEnd(target, count) {
        target.destroy();
        //this._refreshGoldShow();
        //if(this._callFunc){
        //    this._callFunc();
        //    this._callFunc = null;
        //}
    },

    _payGold: function _payGold(goldNum) {
        this._curGoldValue -= goldNum;
        if (this._curGoldValue <= 0) {
            this._curGoldValue = 0;

            var table = G_DATA.getChinese(21);
            if (table) {
                var dataObj = {
                    showStr: table.content,
                    showPos: G_Config_common.bottomTipPos,
                    retainTime: table.retainTime
                };
            }
        }
    },

    //设置玩家名字
    _setPlayerName: function _setPlayerName(playerName) {
        if (!playerName) playerName = '';
        playerName = G_TOOL.getNameLimit(playerName, 10, true);
        this.label_playerName.string = playerName;
    },
    //绑定座位上的玩家
    bindSeatMyself: function bindSeatMyself(myselfComp) {
        this._seatMyselfComp = myselfComp;
    },

    bindSiteImg: function bindSiteImg(imgNode) {
        this._siteImg = imgNode;
    },
    //重置金额的显示
    resetShowGold: function resetShowGold() {
        this.setGoldValue(this._curGoldValue);
    },
    setGoldValue: function setGoldValue(newValue) {
        this._curGoldValue = newValue;
        this.node_goldValue.getComponent(cc.Label).string = G_TOOL.changeMoney(newValue);

        //位置上的自己
        if (this._seatMyselfComp) {
            this._seatMyselfComp.setGoldValue(newValue);
        }
    },
    setPlayerType: function setPlayerType(toType) {
        this.playerType = toType;
    },
    //押宝——设置投注金额池的变化
    reduceGoldEX: function reduceGoldEX(changeGold) {
        if (this._goldValueEX >= changeGold) {
            this._goldValueEX -= changeGold;
            return 0;
        } else {
            var value = changeGold - this._goldValueEX;
            this._goldValueEX = 0;
            return value;
        }
    },

    getMoneyChooseDict: function getMoneyChooseDict() {
        return this._dict_chooseMoney;
    },
    getPokerPoint: function getPokerPoint() {
        return cc.p(this.node.x + this.node.width * this.node.scaleY * 0.7, this.node.y);
    },
    setChooseLevel: function setChooseLevel(level) {
        this._chooseMoneyLevel = level;
    },
    getChooseLevel: function getChooseLevel() {
        return this._chooseMoneyLevel;
    },
    getWinGoldNum: function getWinGoldNum(resutl) {
        return this._dict_choosed[resutl];
    },
    getAllGrabTable: function getAllGrabTable() {
        return this._dict_choosed;
    },
    getWorldPos: function getWorldPos() {
        var parentPos = this.node.parent.position;
        return cc.p(this.node.x + parentPos.x, this.node.y + parentPos.y);
        //switch (this.playerType){
        //    case G_TYPE.playerType.owner:
        //        return this.node.position
        //    case G_TYPE.playerType.system:
        //        return this.node.position
        //    case G_TYPE.playerType.others:
        //        var siteImg = this.node.parent;
        //        return cc.p(siteImg.parent.x+siteImg.x, siteImg.parent.y+siteImg.y)
        //    default:
        //        break;
        //}
    },
    getPlayerName: function getPlayerName() {
        return this._playerName;
    },
    getGoldValue: function getGoldValue() {
        return this._curGoldValue;
    },
    _getIsOverMaxGrabTimes: function _getIsOverMaxGrabTimes() {
        return this._grabTimes >= GG.grabMgr.getMaxGrabTimes();
    },
    getSeatIndex: function getSeatIndex() {
        return this._seatIndex;
    },
    //是否已经投注
    getIsGrab: function getIsGrab() {
        if (!this._dict_choosed) return false;
        var goldNum = 0;
        for (var key in this._dict_choosed) {
            goldNum += this._dict_choosed[key];
            if (goldNum > 0) break;
        }
        return Boolean(goldNum);
    },
    //是否已经投注结束
    getIsBettingEnd: function getIsBettingEnd() {
        return Boolean(this._grabGold);
    },
    //获取玩家ID
    getPlayerID: function getPlayerID() {
        return this._playerID;
    },
    getIsShow: function getIsShow() {
        return this.node.active;
    },
    //获取可用余额
    getUsableBalance: function getUsableBalance() {
        return this._usableBalance;
    },

    //清理关于投注的记录
    clearRecord: function clearRecord() {
        //this._dict_choosed = {};
        this._grabGold = 0;
        this._goldValueEX = 0;
    },
    hidePlayer: function hidePlayer() {
        this.node.active = false;
    },
    remove: function remove() {
        this.node.destroy();
    },
    onDestroy: function onDestroy() {}

});

cc._RF.pop();
},{}],"Grab_playersLayer":[function(require,module,exports){
"use strict";
cc._RF.push(module, 'e3d36NeeddC047NW/XvKcvH', 'Grab_playersLayer');
// Script/Views/Scene_Grab/Grab_playersLayer.js

'use strict';

//管理所有玩家的容器

cc.Class({
    extends: cc.Component,

    properties: {
        _playerNum: null, //场上的玩家数量
        _dict_playerBlocks: null,
        _dict_playerByID: null,

        node_owner: cc.Node,
        node_system: cc.Node,
        node_playerContainer: { //所有玩家的容器，庄家和自己除外
            default: null,
            type: cc.Node,
            displayName: '所有玩家容器'
        },
        prefab_playerBlock: cc.Prefab,
        comp_seatsContainer: {
            default: null,
            type: require('Obj_seatsContainer'),
            displayName: '座位容器'
        }
    },

    // use this for initialization
    onLoad: function onLoad() {
        this._init();
    },
    _init: function _init() {
        this._playerCompName = 'Grab_playerBlock';
        this._dict_playerBlocks = {};
        this._dict_playerByID = {};
        this._playerNum = 0;
    },

    //设置当前所有座位玩家的信息
    setStartInfo: function setStartInfo(seatInfoList, selfInfo, systemInfo) {
        var dictPlayer = {};
        var selfID = GG.getPlayer().getPlayerID();
        var listLen = seatInfoList.length,
            seatIndex,
            onePlayer,
            content,
            playerComp;
        //座位是从1开始，0是自己玩家的信息
        for (var i = 0; i < listLen; i++) {
            onePlayer = seatInfoList[i];
            seatIndex = onePlayer['seatIndex'];
            content = onePlayer['player'];
            content.seatIndex = seatIndex;
            dictPlayer[seatIndex] = content;
        }
        //根据信息控制位置上玩家的显隐
        //显示有数据的玩家
        for (var seatIndex in dictPlayer) {
            content = dictPlayer[seatIndex];
            if (content) this._dict_playerByID[content.playerId] = seatIndex; //获取玩家id
            //从列表中获取属于自己的信息
            if (content && content.playerId == selfID) {
                for (var attrName in content) {
                    if (attrName == 'seatIndex' && content[attrName] == 0) continue;
                    selfInfo[attrName] = content[attrName];
                }
            }
            //座位号从1开始
            if (seatIndex < 1) continue;
            //有玩家数据
            playerComp = this._addOnePlayer(seatIndex);
            if (playerComp) playerComp.setPlayerData(content);
            if (content && content.playerId == selfID) this.getMyselfComp().bindSeatMyself(playerComp);
        }
        //隐藏没有数据的位置
        var siteNum = this.comp_seatsContainer.getSeatsNum();
        for (var i = 0; i < siteNum; i++) {
            seatIndex = i + 1;
            if (!dictPlayer[seatIndex]) this._removeOnePlayer(seatIndex);
        }

        //if(!GG.grabMgr.checkMyselfInfo(seatInfoList)) return;
        if (!isNaN(selfInfo.playerId) && selfInfo.playerId > 0) this.showOwner(selfInfo);
        this.showSystem(systemInfo);
    },

    showOwner: function showOwner(selfInfo) {
        this.getMyselfComp().setPlayerData(selfInfo);
        this.getMyselfComp().setSelfInfo(selfInfo);

        GG.grabMgr.initButtonInfo();
    },

    //有个玩家中途插入
    enterOnePlayer: function enterOnePlayer(seatIndex, playerData) {
        var reg = /^\+?[1-9][0-9]*$/;
        if (reg.test(seatIndex)) {
            //是正确的桌子索引
            playerData.seatIndex = seatIndex;
            this._hidePlayer(seatIndex, playerData.playerId);
            var playerComp = this._addOnePlayer(seatIndex);
            if (playerComp) playerComp.setPlayerData(playerData);
        }
    },

    showSystem: function showSystem(systemInfo) {
        systemInfo.moneyChoose = 0;
        this.node_system.getComponent(this._playerCompName).setPlayerData(systemInfo);
    },

    clearData: function clearData() {
        //var block;
        //for(var siteIndex in this._dict_playerBlocks){
        //    block = this._dict_playerBlocks[siteIndex];
        //    if(block) block.clearData();
        //}
        //this.getMyselfComp().clearData();
    },

    //删除重复的玩家，结束本局时候，重复进出房间会出现多个同样玩家
    _hidePlayer: function _hidePlayer(targetIndex, playerID) {
        var playerComp;
        for (var seatIndex in this._dict_playerBlocks) {
            playerComp = this._dict_playerBlocks[seatIndex];
            if (seatIndex == targetIndex) {
                //找到位置
                //if(playerComp) playerComp.setPlayerData(playerData);
            } else {
                if (playerComp && playerComp.getPlayerID() == playerID) {
                    this._removeOnePlayer(seatIndex);
                }
            }
        }
    },
    //增加一个上场玩家
    _addOnePlayer: function _addOnePlayer(siteIndex) {
        var playerComp = this._dict_playerBlocks[siteIndex];
        if (!playerComp) {
            var player = cc.instantiate(this.prefab_playerBlock);
            player.parent = this.node_playerContainer;
            var size = G_TOOL.adaptSize(player.width, player.height);
            player.width = size.width;
            player.height = size.height;
            var pos = this.comp_seatsContainer.addOnePlayer(siteIndex);
            player.position = G_TOOL.adaptPos(pos);
            var playerComp = player.getComponent(this._playerCompName);
            this._dict_playerBlocks[siteIndex] = playerComp;
        } else {
            this.comp_seatsContainer.addOnePlayer(siteIndex);
        }
        this._playerNum += 1;
        return playerComp;
    },
    //一个玩家离场
    _removeOnePlayer: function _removeOnePlayer(siteIndex) {
        var playerComp = this._dict_playerBlocks[siteIndex];
        if (!playerComp || !playerComp.getIsShow()) return;
        playerComp.hidePlayer();
        this.comp_seatsContainer.onePlayerLeave(siteIndex);
        this._playerNum -= 1;
    },
    //清理所有
    _clearAllPlayer: function _clearAllPlayer() {
        for (var seatIndex in this._dict_playerBlocks) {
            this._removeOnePlayer(seatIndex);
        }
    },

    setWinTableResult: function setWinTableResult(resultList) {
        //其他座位上玩家的金币
        var playerComp,
            dataList,
            isMoveGold = false;
        for (var key in this._dict_playerBlocks) {
            playerComp = this._dict_playerBlocks[key];
            if (!playerComp.getIsShow() || playerComp.getPlayerID() == GG.getPlayerID()) continue;
            dataList = this._checkResult(resultList, playerComp.getAllGrabTable(), playerComp.getWorldPos());
        }
        if (dataList && dataList.length > 0) isMoveGold = true;
        GG.grabMgr.playResultGoldMove(dataList);
        //玩家自己的金币
        playerComp = this.getMyselfComp();
        recordDict = playerComp.getAllGrabTable();
        if (recordDict) {
            dataList = this._checkResult(resultList, recordDict, playerComp.getWorldPos());
            if (dataList && dataList.length > 0) isMoveGold = true;
            GG.grabMgr.playResultGoldMove(dataList);
        }
        //吃瓜群众的金币
        var recordDict = GG.grabMgr.getIdleBetting();
        if (recordDict) {
            dataList = this._checkResult(resultList, recordDict, GG.grabMgr.getIdleBettingPos());
            if (dataList && dataList.length > 0) isMoveGold = true;
            GG.grabMgr.playResultGoldMove(dataList);
        }
        //剩余的金币飞向系统
        var recordDict = GG.grabMgr.getTableContainer().getLeaveGoldImages();
        if (recordDict) {
            //var curList = this._checkResult(resultList, recordDict, this.getSystemComp().getWorldPos())
            dataList = [];
            var goldNum,
                targetPos = this.getSystemComp().getWorldPos();
            for (var tableIndex in recordDict) {
                goldNum = recordDict[tableIndex];
                if (goldNum) {
                    var dataObj = G_OBJ.data_flyGold_tableToPlayer();
                    dataObj.goldNum = goldNum;
                    dataObj.tableIndex = tableIndex;
                    dataObj.targetPos = targetPos;
                    dataList.push(dataObj);
                }
            }
            if (dataList && dataList.length > 0) isMoveGold = true;
            GG.grabMgr.playResultGoldMove(dataList);
        }
        if (isMoveGold) GG.audioMgr.playSound(18);
    },
    _checkResult: function _checkResult(resultList, recordDict, targetPos) {
        var result,
            goldNum,
            dataList = [];
        for (var index in resultList) {
            result = resultList[index];
            goldNum = recordDict[result];
            if (goldNum) {
                var dataObj = G_OBJ.data_flyGold_tableToPlayer();
                dataObj.goldNum = goldNum;
                dataObj.tableIndex = result;
                dataObj.targetPos = targetPos;
                dataList.push(dataObj);
            }
        }
        return dataList;
    },

    //显示所有玩家对象的头像上的金币浮动信息
    showAllGoldResult: function showAllGoldResult() {
        var player, isShow, isOk;
        for (var seatIndex in this._dict_playerBlocks) {
            player = this._dict_playerBlocks[seatIndex];
            if (!player.getIsShow()) continue;
            isOk = player.showResultGold();
            if (!isShow) isShow = isOk;
        }

        isOk = this.getMyselfComp().showResultGold();
        if (!isShow) isShow = isOk;
        return isShow;
    },

    setMyselfMoney: function setMyselfMoney(addCoin, money) {
        this.getMyselfComp().setResultInfo(addCoin, money);
    },
    //获取在座位上的玩家脚本
    getCompByIndex: function getCompByIndex(siteIndex) {
        return this._dict_playerBlocks[siteIndex];
    },
    getPlayerByID: function getPlayerByID(playerID) {
        return this.getCompByIndex(this._dict_playerByID[playerID]);
    },
    //获取玩家自己
    getMyselfComp: function getMyselfComp() {
        return this.node_owner.getComponent(this._playerCompName);
    },
    getPokerPos: function getPokerPos() {
        return this.node_system.getComponent(this._playerCompName).getPokerPoint();
    },
    getSystemComp: function getSystemComp() {
        return this.node_system.getComponent(this._playerCompName);
    }

});

cc._RF.pop();
},{"Obj_seatsContainer":"Obj_seatsContainer"}],"Grab_pokerLayer":[function(require,module,exports){
"use strict";
cc._RF.push(module, '7367eR4I8tHuLC3vrJVwjYL', 'Grab_pokerLayer');
// Script/Views/Scene_Grab/Grab_pokerLayer.js

'use strict';

//卡牌活动层

cc.Class({
    extends: cc.Component,

    properties: {
        _pokerShowPos: null,
        _pokerNum: null,
        _StartPos: null,
        _pokerW: null,
        _pokerH: null, //卡牌的高
        _pokerOffX: null,
        _callFunc: null,
        _curResultNum: null,

        //=================卡牌容器重构
        _list_pokers: null,
        _firstPokerIndex: null, //展示结果的时候，第一张卡牌的信息变化了


        prefab_poker: cc.Prefab,
        atlas_pokerResult: {
            default: null,
            type: cc.SpriteAtlas,
            displayName: '显示牛几图集'
        },
        prefab_pokerResult: {
            default: null,
            type: cc.Prefab,
            displayName: '显示牛几结果'
        }
    },

    // use this for initialization
    onLoad: function onLoad() {
        this._init();
    },

    _init: function _init() {
        this._pokerCompName = 'Obj_poker';
        this._pokerResultCompName = 'Obj_onPokerResult';
        this._moveTime = G_Config_grab.time_pokerMove;
        this._delayTime = G_Config_grab.delayTime_pokerMove;
        this._openMoveTime = G_Config_grab.time_openMovePoker;
        this._winPokerOff = G_Config_grab.num_winPokerOff;
        this._maxPokerNum = 5;
        this._pokerNum = 0;
        //重构
        this._list_pokers = [];
    },

    setStartInfo: function setStartInfo(startPos, targetPos) {
        this._StartPos = startPos;
        this._pokerShowPos = cc.p(targetPos.x, targetPos.y);
        // if(this._pokerW) this._pokerShowPos = cc.p(this._pokerShowPos.x-this._pokerW*0.5, this._pokerShowPos.y-this._pokerH*0.5);
        if (this._pokerW) this._pokerShowPos = cc.p(this._pokerShowPos.x, this._pokerShowPos.y);
    },
    clearData: function clearData() {
        this.node.stopAllActions();
        this._pokerNum = 0;
        this._flyNum = 0;

        for (var i = 0; i < this._maxPokerNum; i++) {
            if (this._list_pokers[i]) this._delOnePoker(this._list_pokers[i]);
        }
        if (this._pokerResult) {
            this._pokerResult.destroy();
            this._pokerResult = null;
        }
    },

    // 显示卡牌
    showPokerEX: function showPokerEX(dataObj) {
        if (dataObj.isFlyEffect) {
            this._showPokerEX(dataObj);
        } else {
            var self = this;
            setTimeout(function () {
                self._showPokerEX(dataObj);
            }, 100);
        }
    },
    _showPokerEX: function _showPokerEX(dataObj) {
        //var dataObj = G_OBJ.data_grabPokerInfo();
        //这幅卡牌结果值(没有传值的话，默认最终卡牌值为0)
        this._pokerShowPos = GG.grabMgr.getPokerShowPos();
        this._curResultNum = dataObj.pokerResult ? dataObj.pokerResult : 0;
        //卡牌信息
        this._flyNum = 0;
        var pokerList = dataObj.pokerInfoList;
        if (pokerList) {
            var lastPoker;
            if (dataObj.startPokerIndex == 1) {
                //显示第一张卡牌
                this._pokerNum = 0;
                lastPoker = this._addOnePokerEX(0, pokerList[0], dataObj.isFlyEffect);
            } else {
                //取其余四张信息
                this._firstPokerIndex = pokerList[0].pokerIndex;
                for (var i = 1; i < pokerList.length; i++) {
                    lastPoker = this._addOnePokerEX(i, pokerList[i], dataObj.isFlyEffect);
                }
            }
            if (lastPoker) lastPoker._flyCall = dataObj.callFunc;
            GG.audioMgr.playSound(14);
        }
    },

    //增加一张卡牌
    _addOnePokerEX: function _addOnePokerEX(pokerIndex, pokerData, isFlyEffect) {
        var poker = this._list_pokers[pokerIndex];
        if (!poker) {
            poker = this._createPoker();
            poker.zIndex = pokerIndex;
            this._list_pokers[pokerIndex] = poker;
        }
        //卡牌信息
        this._resetPokerInfo(poker, pokerData.pokerIndex);
        //飞行表现
        poker.getComponent(this._pokerCompName).clearAllActions();
        poker.getComponent(this._pokerCompName).showPokerNegative();
        poker.active = true;
        if (isFlyEffect) {
            //有飞行特效
            poker.position = this._StartPos;
            this._addFlyAction(poker, pokerData.isOpen);
        } else {
            //没有飞行特效
            this._addNoFly(poker);
            if (pokerData.isOpen) poker.getComponent(this._pokerCompName).showPokerPlus();
        }
        this._pokerNum += 1;
        this._flyNum += 1;
        return poker;
    },

    //=======================================

    //增加一张卡牌，纯粹的创建
    _createPoker: function _createPoker() {
        var poker = new cc.instantiate(this.prefab_poker);
        poker.parent = this.node;
        //poker.scale = 0.5;
        poker.active = true;
        return poker;
    },
    //刷新卡牌数据
    _resetPokerInfo: function _resetPokerInfo(pokerNode, pokerIndex) {
        var pokerInfo = G_DATA.getPokerInfo(pokerIndex);
        var pokerComp = pokerNode.getComponent(this._pokerCompName);
        pokerComp.setPokerInfo(pokerInfo.pokerType, pokerInfo.pokerValue, false);
    },
    //给卡牌增加动作
    _addFlyAction: function _addFlyAction(pokerNode, isOpen) {
        var pokerComp = pokerNode.getComponent(this._pokerCompName);

        if (!this._pokerW) this._setPokerConfigInfo(pokerNode);
        var act1 = cc.delayTime(this._delayTime * this._flyNum);
        var act3 = cc.moveTo(this._moveTime, this._getTargetPos());
        pokerNode.runAction(cc.sequence(act1, act3, cc.callFunc(this._moveEnd, this, isOpen)));
    },
    //卡牌做无飞行效果显示
    _addNoFly: function _addNoFly(pokerNode) {
        if (!this._pokerW) this._setPokerConfigInfo(pokerNode);
        pokerNode.position = this._getTargetPos();
    },
    _moveEnd: function _moveEnd(target, isOpen) {
        if (isOpen) {
            var pokerComp = target.getComponent(this._pokerCompName);
            pokerComp.openPoker();
        }
        if (target._flyCall) {
            target._flyCall();
            target._flyCall = null;
        }
    },

    _setPokerConfigInfo: function _setPokerConfigInfo(poker) {
        var pokerComp = poker.getComponent(this._pokerCompName);
        var pokerSize = pokerComp.getPokerSize();
        this._pokerW = pokerSize.width * poker.scaleX;
        this._pokerH = pokerSize.height * poker.scaleX;
        this._pokerOffX = this._pokerW * G_Config_grab.num_pokerOffX;
        // this._pokerShowPos = cc.p(this._pokerShowPos.x-this._pokerW*0.5, this._pokerShowPos.y-this._pokerH*0.5);
        this._pokerShowPos = cc.p(this._pokerShowPos.x, this._pokerShowPos.y);
    },

    //重新设置第一张卡牌信息
    _resetFirstPokerInfo: function _resetFirstPokerInfo() {
        if (this._list_pokers[0]) this._resetPokerInfo(this._list_pokers[0], this._firstPokerIndex);
    },

    //开牌==============================
    openPokers: function openPokers(callFunc) {
        this._callFunc = callFunc;
        //重置第一张牌信息
        this._resetFirstPokerInfo();
        //开始播放开牌
        var poker,
            index = 0,
            lastPoker,
            pokerComp,
            posX;
        //var sortList = this._sortPokers();
        var sortList = this.node.children;
        //如果有牛，需要分隔开来
        var offX = 0;
        if (this._curResultNum > 0) offX = this._winPokerOff;
        //开牌
        for (var i = 0; i < this._list_pokers.length; i++) {
            poker = this._list_pokers[i];
            if (!poker) continue;
            //poker.zIndex = index;
            pokerComp = poker.getComponent(this._pokerCompName);
            pokerComp.showPokerPlus();

            if (!this._pokerW) this._setPokerConfigInfo(poker);
            //posX = this._pokerShowPos.x+this._pokerW*0.5;
            posX = this._pokerShowPos.x;
            if (i > 2) posX += offX;
            poker.position = cc.p(posX, this._pokerShowPos.y);
            this._actOpenPoker(poker, index * this._pokerOffX);
            index += 1;
            lastPoker = poker;
        }
        lastPoker._callFunc = this._showResult.bind(this);
        GG.audioMgr.playSound(16);
    },
    _actOpenPoker: function _actOpenPoker(poker, offX) {
        var act1 = cc.moveTo(this._openMoveTime, poker.x + offX, poker.y);
        poker.runAction(cc.sequence(act1, cc.callFunc(function (target) {
            //this._showResult(5);
            if (target._callFunc) {
                target._callFunc();
                target._callFunc = null;
            }
        }, this)));
    },
    //显示卡牌的牌型结果
    _showResult: function _showResult() {
        var pokerResult = this._curResultNum;
        var audioID = pokerResult == 0 ? 12 : pokerResult;
        GG.audioMgr.playSound(audioID);

        var pokerPos = cc.p(this._pokerShowPos.x + this._pokerW * 0.65, this._pokerShowPos.y);
        var result = cc.instantiate(this.prefab_pokerResult);
        this.node.addChild(result, this.node.children.length);
        result.getComponent(this._pokerResultCompName).showResult(pokerPos, pokerResult, true, this._showResultEnd.bind(this));

        //var result = new cc.Node();
        //var childrenNum = this.node.children.length;
        //this.node.addChild(result, childrenNum);
        //result.position = cc.p(this._pokerShowPos.x+this._pokerW*1, this._pokerShowPos.y-10)
        //var sp = result.addComponent(cc.Sprite);
        //var imgName;
        //if(pokerResult < 1){
        //    imgName = G_RES_URL.atlas_pokerResult.noResult;
        //}else{
        //    imgName = G_RES_URL.atlas_pokerResult.resultImgName+pokerResult;
        //}
        //sp.spriteFrame = this.atlas_pokerResult.getSpriteFrame(imgName);
        //result.scale = 0;
        //var act1 = cc.scaleTo(0.25, 0.7);
        //var act2 = cc.scaleTo(0.1, 0.42);
        //var act3 = cc.scaleTo(0.1, 0.5);
        //result.runAction(cc.sequence(act1, act2, act3, cc.callFunc(this._showResultEnd, this)));

        this._pokerResult = result;
    },
    _showResultEnd: function _showResultEnd() {
        if (this._callFunc) {
            this._callFunc();
            this._callFunc = null;
        }
    },

    //先按值大小，再依照花色排列   ======改服务端完成
    //_sortPokers : function () {
    //    var sortDict = {}, keyList = [], poker;
    //    for(var key in this.node.children){
    //        poker = this.node.children[key];
    //        var pokerValue = poker.getComponent(this._pokerCompName).getPokerValue();
    //        keyList.push(pokerValue);
    //        if(!sortDict[pokerValue]) sortDict[pokerValue] = [poker];
    //        else sortDict[pokerValue].push(poker);;
    //    }
    //
    //    keyList = G_TOOL.quickSort(keyList);
    //    var lastPoker, sortList = [], lastValue=null, curValue;
    //    for(var key in keyList){
    //        curValue = keyList[key];
    //        poker = sortDict[curValue].pop();
    //        if(lastValue != curValue){
    //            sortList.splice(0, 0, poker);
    //            lastPoker = poker;
    //            lastValue = curValue;
    //        }else{
    //            if(!lastPoker) {
    //                sortList.splice(0, 0, poker);
    //                lastPoker = poker;
    //            }else{
    //                var lastType = lastPoker.getComponent(this._pokerCompName).getPokerType();
    //                var curType = poker.getComponent(this._pokerCompName).getPokerType();
    //                if(lastType >= curType){
    //                    sortList.splice(0, 0, poker);
    //                    lastPoker = poker;
    //                }else if(lastType < curType){
    //                    sortList.splice(1, 0, poker);
    //                }
    //                //else{
    //                //    sortList.splice(0, 0, poker);
    //                //    lastPoker = poker;
    //                //}
    //            }
    //        }
    //    }
    //    return sortList
    //},

    _getTargetPos: function _getTargetPos() {
        //return cc.p(this._pokerShowPos.x + this._pokerOffX*this._pokerNum + this._pokerW*0.5, this._pokerShowPos.y)
        return cc.p(this._pokerShowPos.x + this._pokerOffX * this._pokerNum, this._pokerShowPos.y);
    },

    _delOnePoker: function _delOnePoker(pokerNode) {
        //pokerNode.destroy();
        pokerNode.getComponent(this._pokerCompName).clearAllActions();
        pokerNode.getComponent(this._pokerCompName).showPokerNegative();
        pokerNode.active = false;
    },

    getPokerNum: function getPokerNum() {
        return this._pokerNum;
    }

});

cc._RF.pop();
},{}],"Grab_tablesLayer":[function(require,module,exports){
"use strict";
cc._RF.push(module, 'e4ec3rqaY5I0qKUPfGwL5Fi', 'Grab_tablesLayer');
// Script/Views/Scene_Grab/Grab_tablesLayer.js

'use strict';

//可以点击投注的所有格子所在的层


cc.Class({
    extends: cc.Component,

    properties: {
        _dict_tables: null,

        frame_gold: {
            default: null,
            type: cc.SpriteFrame,
            displayName: '金币图片'
        }
    },

    // use this for initialization
    onLoad: function onLoad() {
        this._init();
    },

    _init: function _init() {
        this._talbeCompName = 'Grab_oneTable';
        if (!this._dict_tables) {
            this._dict_tables = {};
            var tables = this.node.children;
            for (var i = 0; i < tables.length; i++) {
                var table = tables[i].getComponent(this._talbeCompName);
                this._dict_tables[table.getResultType()] = table;
            }
        }
    },

    setStartInfo: function setStartInfo(areaInfo) {
        var multipleInfo = {};
        //for(var i = 0; i < areaInfo.length; i ++){
        //    var infoDict = areaInfo[i];
        //    multipleInfo[infoDict['area']] = infoDict['bei'];
        //}
        //multipleInfo = {0:2,1:13,2:13,3:13,4:13,5:13,6:13,7:13,8:13,9:13,10:12}
        multipleInfo = areaInfo;
        var table;
        for (var key in this._dict_tables) {
            table = this._dict_tables[key];
            table.setInfo(this.frame_gold, key, multipleInfo[key]);
        }
    },

    clearData: function clearData() {
        for (var key in this._dict_tables) {
            this._dict_tables[key].clearData();
        }
    },

    //0--10
    touchOneTable: function touchOneTable(tableIndex, goldInfo) {
        return this._dict_tables[tableIndex].otherAddGold(goldInfo);
    },

    setTouchEnable: function setTouchEnable(isEnable) {
        for (var key in this._dict_tables) {
            this._dict_tables[key].setTouchEnable(isEnable);
        }
    },

    setTableWin: function setTableWin(pokerResult) {
        var table = this._dict_tables[pokerResult];
        table.setTableWin(true);
        return table.getWorldPos();
    },
    showOwnerGold: function showOwnerGold(dict) {
        for (var tableIndex in dict) {
            this._dict_tables[tableIndex].showOwnerResult();
        }
    },
    getTablePos: function getTablePos(pokerResult) {
        return this._dict_tables[pokerResult].getWorldPos();
    },

    getTable: function getTable(pokerResult) {
        return this._dict_tables[pokerResult];
    },

    getWinGold: function getWinGold(tableList) {
        var isWin = function isWin(index) {
            for (var i = 0; i < tableList.length; i++) {
                if (index == tableList[i]) return true;
            }
            return false;
        };

        var lostGold = 0,
            winGold = 0;
        for (var index in this._dict_tables) {
            var isWinIndex = isWin(index);
            if (isWinIndex) {
                winGold += this._dict_tables[index].getGrabGold();
            } else lostGold += this._dict_tables[index].getLostGold();
        }
        var goldNum = winGold - lostGold;
        return goldNum;
    },
    //获取剩余没有被移除的金币信息
    getLeaveGoldImages: function getLeaveGoldImages() {
        var table,
            leaveGoldNum,
            recordDict = {};
        for (var index in this._dict_tables) {
            table = this._dict_tables[index];
            leaveGoldNum = table.getLeaveGoldImg();
            if (table && leaveGoldNum > 0) {
                //该区域还有剩余金币
                recordDict[index] = leaveGoldNum;
            }
        }
        return recordDict;
    }

});

cc._RF.pop();
},{}],"Grab_topEffect":[function(require,module,exports){
"use strict";
cc._RF.push(module, 'cb93fp5RkNDeb3yh6PN0aG/', 'Grab_topEffect');
// Script/Views/Scene_Grab/Effects/Grab_topEffect.js

'use strict';

//放置在最上面的动画特效

cc.Class({
    extends: cc.Component,

    properties: {
        _aniCallFunc: null, //开始动画的回调
        _grabDoneCallFunc: null, //结算动画的回调
        _list_flags: null, //胜利特效

        node_aniContainer: {
            default: null,
            type: cc.Node,
            displayName: '动画容器'
        },
        prefab_startAni: {
            default: null,
            type: cc.Prefab,
            displayName: '开始动画'
        },
        prefab_winFlagAni: {
            default: null,
            type: cc.Prefab,
            displayName: '赢钱旗帜'
        },
        prefab_grabDoneAni: {
            default: null,
            type: cc.Prefab,
            displayName: '押注完成'
        }
    },

    // use this for initialization
    onLoad: function onLoad() {},

    //开始游戏动画
    playGameStartAni: function playGameStartAni(callFunc) {
        this.playStartAni('grab_start', callFunc);
        GG.audioMgr.playSound(13);
    },

    playStartAni: function playStartAni(aniName, callFunc) {
        if (!aniName) aniName = '';
        this._aniCallFunc = callFunc;
        if (!this._startGrabAni) {
            this._startGrabAni = cc.instantiate(this.prefab_startAni);
            this._startGrabAni.parent = this.node_aniContainer;

            //ani.scale = G_Config_common.frameScale;
            this._startGrabAni.position = this._getStartAniPos();
            this._startGrabAni.getComponent(dragonBones.ArmatureDisplay).addEventListener(dragonBones.EventObject.COMPLETE, this._startAniEnd, this);
        }
        this._startGrabAni.active = true;
        //comp = this._startAni.getComponent(dragonBones.ArmatureDisplay);
        this._startGrabAni.getComponent(dragonBones.ArmatureDisplay).playAnimation(aniName, 1);
    },
    _startAniEnd: function _startAniEnd(event) {
        if (this._startGrabAni) this._startGrabAni.active = false;
        if (this._aniCallFunc) {
            this._aniCallFunc();
            this._aniCallFunc = null;
        }
    },
    forceStopStart: function forceStopStart() {
        if (this._startGrabAni) this._startGrabAni.active = false;
        this._aniCallFunc = null;
    },

    //=====================

    //开始幸运区域投注动画
    playTouchStartAni: function playTouchStartAni(callFunc) {
        this.playGrabAni('platform_bet', callFunc);
    },

    //投注完成的动画
    playGrabDoneAni: function playGrabDoneAni(callFunc, userData) {
        this.playGrabAni('platform_betOver', callFunc, userData);
    },

    playGrabAni: function playGrabAni(aniName, callFunc, userData) {
        if (!aniName) aniName = '';
        this._grabDoneCallFunc = callFunc;
        if (!this._grabDoneAni) {
            this._grabDoneAni = cc.instantiate(this.prefab_grabDoneAni);
            this._grabDoneAni.parent = this.node_aniContainer;

            //this._grabDoneAni.scale = G_Config_common.frameScale;
            this._grabDoneAni.position = this._getStartAniPos();
            this._grabDoneAni.getComponent(dragonBones.ArmatureDisplay).addEventListener(dragonBones.EventObject.COMPLETE, this._grabDoneAniEnd, this);
        }
        this._grabDoneAni.pokerInfo = userData;
        this._grabDoneAni.active = true;
        this._grabDoneAni.getComponent(dragonBones.ArmatureDisplay).playAnimation(aniName, 1);
    },
    _grabDoneAniEnd: function _grabDoneAniEnd(event) {
        if (this._grabDoneCallFunc) {
            this._grabDoneCallFunc(this._grabDoneAni.pokerInfo);
            this._grabDoneCallFunc = null;
        }
        if (this._grabDoneAni) this._grabDoneAni.active = false;
    },

    _getStartAniPos: function _getStartAniPos() {
        var designSize = cc.visibleRect;
        return cc.p(designSize.width / 2, designSize.height * 0.6);
    },

    //=====================

    playOneFlag: function playOneFlag(pos) {

        var flag = this._getOneFlag();
        flag.position = pos;
        flag.active = true;

        var comp = flag.getComponent(dragonBones.ArmatureDisplay);
        // comp.addEventListener(dragonBones.EventObject.COMPLETE, this._startAniEnd, this);
        comp.playAnimation('', 1);
    },
    clearFlag: function clearFlag() {
        //var flag;
        //for(var i = 0; i < this._list_flags.length; i ++){
        //    flag = this._list_flags[i];
        //    if(flag) flag.active = false;
        //}

        this.forceStopAllAni();
    },
    _getOneFlag: function _getOneFlag() {
        if (!this._flagAni) {
            this._flagAni = cc.instantiate(this.prefab_winFlagAni);
            this._flagAni.parent = this.node_aniContainer;
            //this._flagAni.scale = G_Config_common.frameScale;
        }
        return this._flagAni;
    },

    forceStopAllAni: function forceStopAllAni() {
        var anis = this.node_aniContainer.children;
        var aniNode;
        for (var i = 0; i < anis.length; i++) {
            aniNode = anis[i];
            if (aniNode) {
                aniNode.active = false;
            }
        }
        this._grabDoneCallFunc = null;
    },

    clearAll: function clearAll() {
        this.forceStopStart();
        this.forceStopAllAni();
        this.node.stopAllActions();
    }

});

cc._RF.pop();
},{}],"Grab_topLayer":[function(require,module,exports){
"use strict";
cc._RF.push(module, 'dcc54iGPEZLnrgK9grY01fm', 'Grab_topLayer');
// Script/Views/Scene_Grab/Grab_topLayer.js

'use strict';

//游戏最上面的层容器

cc.Class({
    extends: require('AutoDealing'),

    properties: {
        node_startImg: cc.Node
    },

    // use this for initialization
    onLoad: function onLoad() {
        this._registerStart();
    },
    _registerStart: function _registerStart() {
        if (this.node_startImg) {
            this.node_startImg.active = true;
            this.registerButton(this.node_startImg, this.OnClick_startImg, this);
        }
        if (G_Config_common.isLocal) {} else {
            this.node_startImg.active = false;
        }
    },
    OnClick_startImg: function OnClick_startImg(event) {
        if (G_Config_common.isLocal) {
            this.node_startImg.active = false;
            GG.grabMgr.forceStart();
        } else {
            GG.socketMgr.connectSocket(this._connectEnd.bind(this));
        }
    },

    _connectEnd: function _connectEnd(isSuccess) {
        if (isSuccess) {
            this.node_startImg.active = false;
            this._login();
            //GG.grabMgr.firstStart();
        }
    },

    _login: function _login() {
        var netData = {
            userId: GG.getPlayer().getPlayerID()
        };
        GG.socketMgr.SendMsg(NetType.s_login, netData);
    },

    //_enterHome : function (data) {
    //    console.log('_enterHome success------')
    //    console.log(data)
    //    GG.grabMgr.requestEnterHome();
    //},

    getTopEffect: function getTopEffect() {
        return this.getComponent('Grab_topEffect');
    }

});

cc._RF.pop();
},{"AutoDealing":"AutoDealing"}],"HTTPMgr":[function(require,module,exports){
"use strict";
cc._RF.push(module, 'd63f2BZmKhJNpeBm9NQSiKV', 'HTTPMgr');
// Script/Common/Managers/HTTPMgr.js

"use strict";

//http请求管理

var http = cc.Class({
    _list_request: null, //请求列表
    _isRequesting: null, //正在请求中
    _isAddHeart: null, //是否有心跳
    _failTime: null, //多长时间请求失败

    _time_timeOut: null, //超时时间
    _timeOutID: null, //超时预计的ID
    _dict_longWait: null, //长时间等待的请求
    _sessionID: null,
    properties: {},

    // use this for initialization
    ctor: function ctor() {
        this._list_request = [];
        this._isRequesting = false;
        this._isAddHeart = false;
        this._nativeHref = G_Config_common.nativeHref;
    },

    //發送請求
    sendHttpRequest: function sendHttpRequest(url, sendData, callFunc, xhrType) {
        this.addHeart();
        this._recordSend(url, sendData, callFunc, xhrType);
    },

    //记录发送的信息
    _recordSend: function _recordSend(url, sendData, callFunc, xhrType) {
        if (!this._dict_sendRequest) this._dict_sendRequest = {};
        var sendObj = G_OBJ.data_httpSend();
        sendObj.url = url;
        sendObj.sendData = sendData;
        sendObj.callFunc = callFunc;
        sendObj.xhrType = xhrType;
        this._dict_sendRequest[url] = sendObj;

        if (!this._isRequesting) {
            this._doNext();
        }
    },

    //下一个请求
    _doNext: function _doNext() {
        var sendObj;
        for (var url in this._dict_sendRequest) {
            sendObj = this._dict_sendRequest[url];
            if (sendObj) {
                this._sendRequest(sendObj.url, sendObj.sendData, sendObj.callFunc, sendObj.xhrType);
                break;
            }
        }
    },
    //发送请求
    _sendRequest: function _sendRequest(url, sendData, callFunc, xhrType) {
        var xhr = new XMLHttpRequest();
        var self = this;
        xhr.onreadystatechange = function () {
            if (xhr.status == 404) {
                //无效的请求地址
                self._endRequest(url, null, callFunc);
            } else {
                // console.log('request url= '+url+'; return data= '+xhr.responseText)
                self._receiveData(xhr, url, sendData, callFunc);
            }
        };
        //是否本地
        var needUrl = url;
        if (!xhrType) xhrType = 'POST';
        if (cc.sys.isNative) {
            needUrl = this._nativeHref + url;
            xhr.setRequestHeader("User-Agent", "Chrome");
        }
        xhr.open(xhrType, needUrl, true);
        xhr.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
        if (this._sessionID) {}
        // console.log('附加cookie信息'+this._sessionID)
        // var session = 'session={'+this._sessionID+'}'
        // var session = this._sessionID +'';
        // xhr.setRequestHeader("cookie", session);
        // xhr.setRequestProperty("cookie", this._sessionID);

        // xhr.setRequestHeader("Content-Type", "Access-Control-Allow-Headers:x-requested-with");
        // xhr.setRequestHeader("Content-Type", "Access-Control-Allow-Methods:POST");
        // xhr.setRequestHeader("Content-Type", "Access-Control-Allow-Origin:*");
        xhr.send(sendData);
        this._isRequesting = true;
        if (!GG.getIsLoading()) GG.topTouchLayer.showNetRequest();
        //增加超时处理
        var self = this;
        this._addTimeOut(function () {
            self._endRequest(url, null, callFunc);
        });
    },

    //接收到网络请求
    _receiveData: function _receiveData(xhr, url, sendData, callFunc) {
        //if (xhr.readyState == 4 && (xhr.status >= 200 && xhr.status < 400)) {
        if (xhr.readyState == 4 && xhr.status == 200) {
            var response = xhr.responseText;

            if (url.indexOf('logout') > -1 || url.indexOf('login') > -1) {
                //xhr.responseText 是整个页面的HTML
                // var cookieValue = xhr.getResponseHeader("Set-Cookie");
                // this._sessionID = cookieValue.substring(0, cookieValue.indexOf(';'));
                // this._sessionID = xhr.getResponseHeader("Set-Cookie").replace('SID=', '').split(';')[0];
                // this._sessionID = xhr.getResponseHeader("Set-Cookie");
                // console.log('获取到sessionID= '+ this._sessionID)
                response = true;
            } else {
                try {
                    response = JSON.parse(xhr.responseText);
                    // if(!response) response = true;

                    this._checkLongWait(url, response);
                } catch (e) {
                    response = null;
                }
            }
            this._endRequest(url, response, callFunc);
        }
    },
    //请求结束
    _endRequest: function _endRequest(url, response, callFunc) {
        var sendObj = this._dict_sendRequest[url];
        if (sendObj) {
            if (sendObj.callFunc) {
                sendObj.callFunc(response);
                sendObj.callFunc = null;
            }
            delete this._dict_sendRequest[url];
            if (!this.getIsRequesting()) GG.topTouchLayer.closeNetRequest();
            this._cancelTimeOut();
            this._isRequesting = false;
            this._doNext();
        }
    },
    //增加超时处理
    _addTimeOut: function _addTimeOut(callFunc) {
        this._time_timeOut = 6000;
        this._timeOutID = setTimeout(function () {
            if (callFunc) {
                callFunc();
                callFunc = null;
            }
        }, this._time_timeOut);
    },
    _cancelTimeOut: function _cancelTimeOut() {
        if (G_DATA.isNumber(this._timeOutID)) {
            clearTimeout(this._timeOutID);
            this._timeOutID = null;
        }
    },
    getIsRequesting: function getIsRequesting() {
        var isRequesting = false;
        if (this._dict_sendRequest) {
            for (var url in this._dict_sendRequest) {
                isRequesting = true;
                break;
            }
        }
        return isRequesting;
    },

    //===========================


    //增加http心跳
    addHeart: function addHeart() {
        if (this._isAddHeart) return;
        this._isAddHeart = true;
        var _this = this;
        setInterval(function () {
            _this.timedRefresh();
        }, 900000);
    },

    timedRefresh: function timedRefresh() {
        this.sendHttpRequest(G_DIALOG_URL.timedRefreshUrl, { t: new Date() }, function (data) {}.bind(this));
    },

    //增加长监听的请求
    addLongRequestWait: function addLongRequestWait(url, sendData, callFunc) {
        if (!this._dict_longWait) this._dict_longWait = {};
        var sendObj = G_OBJ.data_httpSend();
        sendObj.url = url;
        sendObj.sendData = sendData;
        sendObj.callFunc = callFunc;
        this._dict_longWait[url] = sendObj;
    },
    _checkLongWait: function _checkLongWait(url, response) {
        if (!this._dict_longWait || !this._dict_longWait[url]) return;
        if (response && !this._dict_sendRequest[url]) {
            var sendObj = this._dict_longWait[url];
            if (sendObj && sendObj.callFunc) {
                sendObj.callFunc(response);
                sendObj.callFunc = null;
            }
            delete this._dict_sendRequest[url];
        }
    }

});

module.exports = http;

cc._RF.pop();
},{}],"LocalStorage":[function(require,module,exports){
"use strict";
cc._RF.push(module, 'c685clodkBDvq7dP/zD+XPG', 'LocalStorage');
// Script/Common/Managers/LocalStorage.js

"use strict";

//存储工具，对本地的数据进行操作

window.G_Storage = {
    setData: function setData(localType, data) {
        cc.sys.localStorage.setItem(localType, data);
    },

    delData: function delData(localType) {
        cc.sys.localStorage.removeItem(localType);
    },

    getData: function getData(localType) {
        return cc.sys.localStorage.getItem(localType);
    }
};

cc._RF.pop();
},{}],"M_Player":[function(require,module,exports){
"use strict";
cc._RF.push(module, '20f361J4TtC0qM5pIHpvoN4', 'M_Player');
// Script/Modules/M_Player.js

'use strict';

//玩家对象，存在于整个游戏流程中

var player = cc.Class({
    _playerID: null,
    _playerToken: null,
    _playerName: null, //姓名
    _playerUID: null, //
    _playerGold: null, //玩家的金币

    _dict_systemSet: null, //系统配置信息
    _dict_baseInfo: null, //基础信息列表

    _inHomeData: null, //临时记录当前的进房间信息
    _outHomeData: null, //临时记录当前的出房间信息
    _reloadSceneInfo: null, //预加载场景的时候传递的参数
    ctor: function ctor() {},

    setPlayerToken: function setPlayerToken(tokenData) {
        this._playerToken = tokenData.token;
        this._playerUID = tokenData.uid;
    },
    setPlayerID: function setPlayerID(id) {
        this._playerID = id;
    },
    //名字
    setPlayerName: function setPlayerName(name) {
        this._playerName = name;
    },
    //系统设置
    setSystemSet: function setSystemSet(curDict) {
        this._dict_systemSet = curDict;
    },
    //玩家基础信息: nickname,avatarUrl,id
    setBaseInfo: function setBaseInfo(rectData) {
        if (!rectData) return;
        if (!this._dict_baseInfo) this._dict_baseInfo = {};
        var data = rectData.data[0];
        if (data) {
            for (var attrName in data) {
                //头像avatarUrl；金币coin；nickname昵称
                this._dict_baseInfo[attrName] = data[attrName];
                //if(attrName == 'id') this.setPlayerID(data[attrName]);
                switch (attrName) {
                    case 'id':
                        this.setPlayerID(data[attrName]);
                        break;
                    case 'coin':
                        var obj = G_OBJ.data_nbSelf();
                        obj.balance = data[attrName];
                        this.setPlayerGold(obj);
                        break;
                    default:
                        break;
                }
            }
        }
    },
    setInHomeData: function setInHomeData(dataObj) {
        this._inHomeData = dataObj;
    },
    setOutHomeData: function setOutHomeData(dataObj) {
        this._outHomeData = dataObj;
    },
    setReloadSceneInfo: function setReloadSceneInfo(info) {
        this._reloadSceneInfo = info;
    },
    setPlayerGold: function setPlayerGold(dataObj) {
        this._playerGold = parseInt(dataObj.balance);
        //分发金币变化的信息
        GG.Listener.dispatchEventEX(G_TYPE.globalListener.playerGold, dataObj);
    },

    //=============================================

    getPlayerGold: function getPlayerGold() {
        return this._playerGold;
    },
    getPlayerID: function getPlayerID() {
        return this._playerID;
    },
    getPlayerToken: function getPlayerToken() {
        return this._playerToken;
    },
    //玩家姓名
    getPlayerName: function getPlayerName() {
        return this._dict_baseInfo['nickname'];
    },
    //获取系统配置信息
    getSystemSet: function getSystemSet() {
        return this._dict_systemSet;
    },
    //获取基础信息
    getBaseInfo: function getBaseInfo() {
        return this._dict_baseInfo;
    },
    //获取玩家头像
    getHeadImgUrl: function getHeadImgUrl() {
        return this._dict_baseInfo['avatarUrl'];
    },
    //获取进房间信息
    getInHomeData: function getInHomeData() {
        var homeData = this._inHomeData;
        this._inHomeData = null;
        return homeData;
    },
    //获取出房间信息
    getOutHomeData: function getOutHomeData() {
        var homeData = this._outHomeData;
        this._outHomeData = null;
        return homeData;
    },
    //获取UID
    getUID: function getUID() {
        return this._playerUID;
    },
    //获取游戏ID，第几款游戏
    getGameID: function getGameID() {
        return 1;
    },
    //获取预加载场景传递的信息
    getReloadSceneInfo: function getReloadSceneInfo() {
        var info = this._reloadSceneInfo;
        this._reloadSceneInfo = null;
        return info;
    },

    //====================================

    //退出游戏时候的处理（比如记录当前的音乐音效设置信息）
    whenExit: function whenExit() {}
});

module.exports = player;

cc._RF.pop();
},{}],"M_TopRequestLayer":[function(require,module,exports){
"use strict";
cc._RF.push(module, 'c00f2NCfttC5ZCmK/i2hKQW', 'M_TopRequestLayer');
// Script/Modules/M_TopRequestLayer.js

'use strict';

//最上面的网络请求动画

module.exports = cc.Class({
    properties: {
        _ani: null, //加载动画
        _isLoading: null },

    // use this for initialization
    ctor: function ctor() {
        this._isLoading = false;
    },

    //显示网络请求动画
    showNetRequest: function showNetRequest(isShowTip) {
        var self = this;
        this._getRequestAni(function (layer_netAni) {
            if (!layer_netAni) return;
            if (!layer_netAni.active) {
                layer_netAni.active = true;
                self._showReconnectTip(layer_netAni, isShowTip);

                var aniNode = layer_netAni.getChildByTag(1);
                if (aniNode) {
                    var ani = aniNode.getComponent(dragonBones.ArmatureDisplay);
                    if (ani) ani.playAnimation('');
                }
            }
        });
    },
    //隐藏动画
    closeNetRequest: function closeNetRequest() {
        var self = this;
        this._getRequestAni(function (layer_netAni) {
            if (!layer_netAni) return;
            layer_netAni.active = false;
        });
    },

    //获取播放的动画
    _getRequestAni: function _getRequestAni(callFunc) {
        var limitLayer = cc.find('Canvas/layer_loadingRequest');
        if (limitLayer && callFunc) {
            callFunc(limitLayer);
            callFunc = null;
        } else {
            if (this._isLoading) return;
            var self = this;
            this._isLoading = true;
            cc.loader.loadRes('ani_prefab/Prefab_simpleLoading', cc.Prefab, function (err, prefab) {
                if (prefab) {
                    var canvas = cc.find('Canvas');
                    limitLayer = new cc.Node();
                    limitLayer.setContentSize(cc.visibleRect.width, cc.visibleRect.height);
                    canvas.addChild(limitLayer, 3);
                    limitLayer.setName('layer_loadingRequest');
                    self.addTouchLimit(limitLayer);

                    var ani = cc.instantiate(prefab);
                    ani.y = cc.visibleRect.height * 0.2;
                    limitLayer.addChild(ani, 1, 1);
                }
                self._isLoading = false;
                if (callFunc) {
                    callFunc(limitLayer);
                    callFunc = null;
                }
            });
        }
    },

    getIsShow: function getIsShow() {
        var layer_netAni = cc.find('Canvas/layer_loadingRequest');
        return Boolean(layer_netAni && layer_netAni.active);
    },

    //显示重连提示
    _showReconnectTip: function _showReconnectTip(layer_netAni, isShow) {
        var tipNode = layer_netAni.getChildByTag(2);
        if (!tipNode) {
            tipNode = new cc.Node();
            tipNode.addComponent(cc.Label);
            tipNode.y = -cc.visibleRect.height * 0.1;
            layer_netAni.addChild(tipNode, 0, 2);
        }
        var content;
        if (isShow) {
            var tableData = G_DATA.getChinese(61);
            content = tableData.content;
        } else content = '';
        tipNode.getComponent(cc.Label).string = content;
    },

    addTouchLimit: function addTouchLimit(target) {
        if (!target) target = cc.find('Canvas/layer_loadingRequest');
        if (target) target.on(cc.Node.EventType.TOUCH_START, this._touchThisLayer, this);
    },
    _touchThisLayer: function _touchThisLayer() {},
    cancelTouchLimit: function cancelTouchLimit(target) {
        if (!target) target = cc.find('Canvas/layer_loadingRequest');
        if (target) target.off(cc.Node.EventType.TOUCH_START, this._touchThisLayer, this);
    }
});

cc._RF.pop();
},{}],"NetConfig":[function(require,module,exports){
"use strict";
cc._RF.push(module, 'e648ajm8FRKKbTsCIIs0DrC', 'NetConfig');
// Script/Common/Configs/NetConfig.js

'use strict';

//与服务端交互的事件类型，r_是只能接收的事件receive。s_客户端请求的事件send

var config = {
    s_login: 'NbLogin', //登陆
    s_enterHouse: 'NbIntoRoomIn', //进入房间的请求
    r_tips: 'NbTip', //直接返回信息结果
    r_enterHouseReturn: 'NbIntoRoomOut', //进入房间后返回的信息
    r_idleTimeOut: 'NbTimeoutOut', //长时间没有做操作
    s_doGrab: 'NbBet', //玩家选中一个投注区域
    r_getAnnouncement: 'NbGameAnnouncement', //公告的接收
    r_passiveOut: 'NbKickOut', //异地登陆
    r_nbSelf: 'NbSelf', //如果有消息传来,则刷新自己的信息
    //classic
    s_calculating: 'NbClassicCounting', //算牌
    s_grabDealerOrSetScore: 'NbClassicMultipleIn', //抢庄或者押注
    r_setScoreEnd: 'NbClassicBetMultipleOverOut', //押倍数结束，单个通知每一个桌内玩家数据.
    r_grabDealerEnd: 'NbClassicDealerMultipleOverOut', //抢庄结束，单个通知每一个桌内玩家数据.
    r_getPlayersInfo: 'NbClassicInitializeOut', //进入房间后，入座初始化桌内玩家数据.
    r_oneGrab: 'NbClassicMultipleOut', //抢庄，押倍数批量通知桌内玩家数据.
    r_startInfo: 'NbClassicNewMatchOut', //游戏开始数据.
    r_oneInsert: 'NbClassicSeatOut', //新玩家入座，批量通知桌内玩家数据.
    r_calculateEnd: 'NbClassicSettleOut', //算牌结束结算数据，批量通知桌内玩家.
    //grab
    r_grab_reStartGame: 'NbBullBaoStartMatchOut', //在房间内重新开始游戏时候的数据
    r_doGrab_return: 'NbBetOut', //玩家选中一个投注区域
    r_otherGrab: 'NbBetBatchOut', //有某个玩家投注
    r_grabEnd: 'NbSettleMatchOut', //投注结束
    r_mineHaveGrab: 'NbSettlePlayerOut', //自己有投注则有这条消息显示收益
    r_oneInHome: 'NbSeatOut', //有某个玩家入座
    s_grab_Exit: 'NbExitRoomIn', //退出房间
    r_grab_exitReturn: 'NbExitRoomOut', //退出房间返回
    //bull100
    r_bull100_reStartGame: 'NbStartMatchOut', //在房间内重新开始游戏时候的数据
    s_bull100_dealerUp: 'NbUpDealerIn', //上庄请求
    s_bull100_dealerContinue: 'NbKeepDealerIn', //续庄请求
    s_bull100_dealerDown: 'NbDownDealerIn', //下庄请求
    s_bull100_getDealerList: 'NbUpDealerListIn', //获取上庄列表
    r_bull100_dealerDownWarning: 'NbWarningDealerOut', //下庄警告
    r_bull100_dealerListReturn: 'NbUpDealerOut', //上庄下发消息
    r_bull100_downDealerReturn: 'NbDownDealerOut' };

window.NetType = config;

cc._RF.pop();
},{}],"Obj_calculateResult":[function(require,module,exports){
"use strict";
cc._RF.push(module, 'ef458IN8zhBxrU698dYUZ8d', 'Obj_calculateResult');
// Script/Objects/Obj_calculateResult.js

'use strict';

cc.Class({
    extends: cc.Component,
    _choosePokerNum: null, //已经选择的卡牌数量
    properties: {
        _tip_trueResult: null,
        _callFunc: null,

        label_01: cc.Label,
        label_02: cc.Label,
        label_03: cc.Label,
        label_04: cc.Label
    },

    // use this for initialization
    onLoad: function onLoad() {
        this._choosePokerNum = 0;
        this._list_label = [this.label_01, this.label_02, this.label_03, this.label_04];
    },

    showCalculate: function showCalculate() {
        this.node.active = true;
    },

    //选中一张卡牌,超过数量时候需要做处理
    chooseOnePoker: function chooseOnePoker(chooseNum) {
        if (this._choosePokerNum >= G_Config_classic.num_maxChoose) {
            //choose more
            return false;
        }
        this._list_label[this._choosePokerNum].string = chooseNum.toString();
        this._choosePokerNum += 1;
        if (this._choosePokerNum >= G_Config_classic.num_maxChoose) {
            //选中了三张
            var getNum = this._getResult();
            this._list_label[this._choosePokerNum].string = getNum.toString();
        }
        return true;
    },

    //取消某张卡牌的值
    cancelOnePoker: function cancelOnePoker() {
        if (this._tip_trueResult) {
            this._tip_trueResult.forceEnd();
            this._tip_trueResult = null;
        }
        this._choosePokerNum -= 1;
        this._list_label[this._choosePokerNum].string = '';
        this._list_label[G_Config_classic.num_maxChoose].string = '';
    },

    _getResult: function _getResult() {
        var getNum = 0;
        for (var i = 0; i < this._choosePokerNum; i++) {
            getNum += parseInt(this._list_label[i].string);
        }
        return getNum;
    },

    _checkCalculate: function _checkCalculate(value) {},
    _countDownEnd: function _countDownEnd() {
        this._tip_trueResult = null;
        if (this._callFunc) this._callFunc();
    },

    showTrueResult: function showTrueResult(pokerValue, callFunc) {
        if (this._choosePokerNum < G_Config_classic.num_maxChoose) return;

        this._callFunc = callFunc;
        var value = this._getResult();
        if (value % 10 == 0) {
            //calculate success
            var data1 = G_DATA.getChinese(17);
            var data2 = G_DATA.getChinese(16);
            var strList = data2.content.split(',');
            var showStr = G_TOOL.formatStr(data1.content, strList[pokerValue]);
            var dataObj = {
                showStr: showStr,
                showPos: cc.p(this.node.x, this.node.y + this.node.height),
                retainTime: data1.retainTime,
                callBack: this._countDownEnd.bind(this)
            };
            this._tip_trueResult = GG.tipsMgr.showCountDownTip(dataObj);
        }
    },
    showOverTouch: function showOverTouch() {
        var data = G_DATA.getChinese(5);
        var dataObj = {
            showStr: data.content,
            showPos: cc.p(this.node.x, this.node.y + this.node.height),
            retainTime: data.retainTime,
            callBack: this._showCountDown.bind(this)
        };
        GG.tipsMgr.showTxtTip(dataObj);
        this._hideCountDown();
    },
    _showCountDown: function _showCountDown() {
        if (this._tip_trueResult) this._tip_trueResult.showByOpacity();
    },
    _hideCountDown: function _hideCountDown() {
        if (this._tip_trueResult) this._tip_trueResult.hideByOpacity();
    },

    hideCalculate: function hideCalculate() {
        if (!this.node.active) return;
        if (this._tip_trueResult) {
            this._tip_trueResult.forceEnd();
            this._tip_trueResult = null;
        }
        this.onClear();
        this.node.active = false;
    },
    onClear: function onClear() {
        for (var i = 0; i < this._list_label.length; i++) {
            this._list_label[i].string = '';
        }
        this._choosePokerNum = 0;
    }

});

cc._RF.pop();
},{}],"Obj_cell_trend":[function(require,module,exports){
"use strict";
cc._RF.push(module, 'e1879pYLx1Gf6hjS0kLc/eK', 'Obj_cell_trend');
// Script/Objects/Obj_cell_trend.js

'use strict';

//走势图和账目条目
cc.Class({
    extends: cc.Component,

    properties: {
        _list_labelSort: null },

    // use this for initialization
    onLoad: function onLoad() {
        this._failColor = new cc.Color(187, 111, 110);
        this._winColor = new cc.Color(58, 185, 250);
        this._failStr = '小';
        this._winStr = '大';

        this._list_labelSort = {};
        var labels = this.node.children;
        this._list_labelSort[G_TYPE.pokerTypeStr.spade] = labels[0];
        this._list_labelSort[G_TYPE.pokerTypeStr.heart] = labels[1];
        this._list_labelSort[G_TYPE.pokerTypeStr.club] = labels[2];
        this._list_labelSort[G_TYPE.pokerTypeStr.diamond] = labels[3];
    },

    //设置这个条目中的信息
    setData: function setData(data) {
        if (!data) data = [['SPADE', 1], ['DIAMOND', 0], ['CLUB', 1], ['HEART', 0]]; //胜利是1，失败是0
        var labels = this.node.children;
        for (var i = 0; i < data.length; i++) {
            this._setLabelResult(this._list_labelSort[data[i][0]], parseInt(data[i][1]));
        }
    },
    //设置胜利与否
    _setLabelResult: function _setLabelResult(labelNode, isWin) {
        if (isWin) {
            labelNode.color = this._winColor;
            labelNode.getComponent(cc.Label).string = this._winStr;
        } else {
            labelNode.color = this._failColor;
            labelNode.getComponent(cc.Label).string = this._failStr;
        }
    }

});

cc._RF.pop();
},{}],"Obj_coinEffect":[function(require,module,exports){
"use strict";
cc._RF.push(module, '0f796fh/rJIb4s54HJEIHLg', 'Obj_coinEffect');
// Script/Objects/Obj_coinEffect.js

'use strict';

//游戏大厅金币图案特效
cc.Class({
    extends: cc.Component,

    properties: {
        _coinAni: null },

    // use this for initialization
    onLoad: function onLoad() {
        this._initPlayCoinAni();
    },
    //播放金币特效动画
    _initPlayCoinAni: function _initPlayCoinAni() {
        if (!this._coinAni) {
            this._coinAni = this.node.getComponent(dragonBones.ArmatureDisplay);
            this._coinAni.addEventListener(dragonBones.EventObject.COMPLETE, this._playCoinsEffectAni, this);
        }
        this._coinAni.playAnimation('coins', 1);
    },

    //每隔3秒循环播放金币特效
    _playCoinsEffectAni: function _playCoinsEffectAni() {
        this.node.runAction(cc.sequence(cc.delayTime(3), cc.callFunc(function () {
            this._initPlayCoinAni();
        }, this)));
    },

    onDestroy: function onDestroy() {
        this.node.stopAllActions();
    }

});

cc._RF.pop();
},{}],"Obj_confirmTip":[function(require,module,exports){
"use strict";
cc._RF.push(module, '953a2PNGbdKQpEu8W0IIJ5g', 'Obj_confirmTip');
// Script/Objects/Obj_confirmTip.js

'use strict';

//點擊確認的界面

cc.Class({
    extends: require('AutoDealing'),

    properties: {
        _callFunc: null, //点击确定后的回调
        _callFunc2: null, //点击取消后的回调
        _registerFunc: null, //额外注册的回调，关于关闭和开启
        _isPlayEffect: null, //是否正在播放特效

        label_center: cc.Label,
        node_left: cc.Node,
        node_right: cc.Node,
        node_center: cc.Node, //单选的确定按钮
        node_grayLayer: cc.Node },

    // use this for initialization1
    onLoad: function onLoad() {
        this._showTime = G_Config_common.time_confirmTipShow / 2;
        this._maxScale = G_Config_common.scale_confirmTipMax;
        this._touchCompName = 'Obj_touchLimit';
        this._isPlayEffect = false;
        //this._formatStr = '<b>%s<b/>';
        //this._label_left = this.node_left.children[0].getComponent(cc.Label);
        //this._label_right = this.node_right.children[0].getComponent(cc.Label);
    },

    //显示的内容多选
    showContent: function showContent(contentStr, callFunc, callFunc2) {
        this._callFunc = callFunc;
        this._callFunc2 = callFunc2;
        this.node.active = true;
        this._showOneBtn(false);
        this._setContent(contentStr);

        this._showEffect(true);
        this.node_grayLayer.getComponent(this._touchCompName).addTouchLimit();
        //注册监听
        if (this._registerFunc) {
            this._registerFunc(true);
        }
    },

    //显示的内容单选
    showContentEx: function showContentEx(contentStr, callFunc) {
        this._callFunc = callFunc;
        this.node.active = true;
        this._showOneBtn(true);
        this._setContent(contentStr);

        this._showEffect(true);
        this.node_grayLayer.getComponent(this._touchCompName).addTouchLimit();
        //注册监听
        if (this._registerFunc) {
            this._registerFunc(true);
        }
    },

    Btn_touchLeft: function Btn_touchLeft(event) {
        if (this._isPlayEffect) return;
        this._callFunc2 = null;
        this._showEffect(false);
    },
    Btn_touchRight: function Btn_touchRight(event) {
        if (this._isPlayEffect) return;
        this._callFunc = null;
        this._showEffect(false);
    },
    Btn_touchCenter: function Btn_touchCenter(event) {
        if (this._isPlayEffect) return;
        this._showEffect(false);
    },

    //显示界面的特效  isShow ： 判定当前是显示还是关闭
    _showEffect: function _showEffect(isShow) {
        this._isPlayEffect = true;
        var effectNode = this.node_center.parent;
        effectNode.stopAllActions();
        if (isShow) {
            // show tip
            effectNode.scale = 0;

            var act1 = cc.scaleTo(this._showTime, this._maxScale);
            var act2 = cc.scaleTo(this._showTime / 2, 1);
            effectNode.runAction(cc.sequence(act1, act2, cc.callFunc(function () {
                this._isPlayEffect = false;
            }, this)));
            // this.playFrameEffect(effectNode);
        } else {
            //close tip
            effectNode.scale = 1;

            var act1 = cc.scaleTo(this._showTime / 2, this._maxScale);
            var act2 = cc.scaleTo(this._showTime, 0.5);
            effectNode.runAction(cc.sequence(act1, act2, cc.callFunc(function () {
                this._isPlayEffect = false;
                this._removePage();
            }, this)));
        }
    },
    playFrameEffect: function playFrameEffect(effectNode) {
        var time = 0.2;

        effectNode.scale = 0;
        effectNode.stopAllActions();
        if (effectNode._firstX === undefined) effectNode._firstX = effectNode.x;
        if (effectNode._firstY === undefined) effectNode._firstY = effectNode.y;

        var act1 = cc.moveBy(time, -cc.visibleRect.width * 0.2, 0);
        var act2 = cc.scaleTo(time, 0.5);
        var act2_1 = cc.rotateTo(time, 0, 90);
        var act3 = cc.spawn(act1, act2, act2_1);
        var act4 = cc.sequence(act3, cc.callFunc(this._playFrameEffect2, this));
        effectNode.runAction(act4);
    },
    _playFrameEffect2: function _playFrameEffect2(target) {
        var time = 0.5;

        target.rotationY = -90;
        var act1 = cc.moveTo(time, target._firstX, target._firstY);
        var act2 = cc.scaleTo(time, 1);
        // var act2_1 = cc.skewTo(time, 0, 0);
        var act2_1 = cc.rotateTo(time, 0, 0);
        var act3 = cc.spawn(act1, act2, act2_1);
        var act4 = cc.sequence(act3, cc.callFunc(this.frameEffectEnd, this));
        target.runAction(act4);
    },
    frameEffectEnd: function frameEffectEnd() {
        this._isPlayEffect = false;
    },

    //显示弹窗的内容
    _setContent: function _setContent(str) {
        //this.label_center.string = G_TOOL.formatStr(this._formatStr, str);
        //遇到逗号需要分行
        str = str.replace(',', '\n');
        str = str.replace('，', '\n');
        this.label_center.string = str;
    },

    //是否只显示一个按钮
    _showOneBtn: function _showOneBtn(isOne) {
        this.node_right.active = !isOne;
        this.node_left.active = !isOne;
        this.node_center.active = isOne;
    },

    //移除界面
    _removePage: function _removePage() {
        //注册监听
        if (this._registerFunc) {
            this._registerFunc(false);
        }
        if (this._callFunc) {
            this._callFunc();
            this._callFunc = null;
        }
        if (this._callFunc2) {
            this._callFunc2();
            this._callFunc2 = null;
        }
        this.node_grayLayer.getComponent(this._touchCompName).cancelTouchLimit();
        this.node.active = false;
    },

    //关闭界面
    closePage: function closePage() {
        this._callFunc = null;
        this._callFunc2 = null;
        this._showEffect(false);
    },

    //监听确认框的关闭和开启
    registerFunc: function registerFunc(func, isRegister) {
        if (isRegister) this._registerFunc = func;else this._registerFunc = null;
    }

});

cc._RF.pop();
},{"AutoDealing":"AutoDealing"}],"Obj_countDownProgress":[function(require,module,exports){
"use strict";
cc._RF.push(module, '9bcf6jOxYNHGon7BRMofV/U', 'Obj_countDownProgress');
// Script/Objects/Obj_countDownProgress.js

'use strict';

//圆形进度条，用于倒计时的显示，优化的话可做成预制体

cc.Class({
    extends: cc.Component,
    _firstFrame: null, //第一张圆形图片
    _callFunc: null, //倒计时回调结束时候调用的函数
    properties: {
        node_progress: cc.Node,
        frame_timeImage1: cc.SpriteFrame, //第二张圆形图片
        frame_timeImage2: cc.SpriteFrame, //第三张圆形图片
        label_count: cc.Label, //绿色字体
        font_green: cc.Font, //绿色字体
        font_orange: cc.Font, //橙色字体
        font_red: cc.Font },

    // use this for initialization
    onLoad: function onLoad() {},

    _initData: function _initData() {
        this._firstFrame = this.node_progress.getComponentInChildren(cc.Sprite).spriteFrame;
        this._progressBarSprite = this.node_progress.getComponentInChildren(cc.Sprite);
        this._progressComp = this.node_progress.getComponent(cc.ProgressBar);
    },

    //显示圆形进度条的倒计时
    showCountDown: function showCountDown(showTime, callFunc) {
        if (!this._firstFrame) this._initData();
        if (isNaN(showTime)) return;
        this.node.active = true;
        this.node_progress.children[0].active = true;
        this._callFunc = callFunc;
        this._runTime = 0;
        this._interval = 0.97;
        this._speedRate = 1;
        this._curTime = showTime;
        this._firstTime = Math.min(Math.ceil(this._curTime * G_Config_classic.list_centerProgressTime[0]), this._curTime - 1);
        this._secondTime = Math.max(Math.floor(this._curTime * G_Config_classic.list_centerProgressTime[1]), 1);
        this._progressInterval = 1 / this._curTime;

        this._curTime += 1;
        this._runTime = this._interval;
        this._clearLabels();
        this._progressComp.progress = 1;
        this.schedule(this._let_update, 0.01);
    },

    //帧函数
    _let_update: function _let_update(dt) {
        this._progressComp.progress -= this._progressInterval * dt;
        if (this._runTime >= this._interval) {
            this._runTime = 0;
            this._setNumImg();
        } else this._runTime += dt;
    },

    //设置图片
    _setNumImg: function _setNumImg() {
        this._curTime -= 1;
        if (this._curTime <= this._firstTime) {
            if (this._curTime <= this._secondTime) {
                //  step 3
                if (this._curTime <= 0) {
                    //结束倒计时
                    if (this._callFunc) this._callFunc();
                    this._callFunc = null;
                    this._endSchedule();
                } else {
                    this._progressBarSprite.spriteFrame = this.frame_timeImage2;
                    this.label_count.font = this.font_red;
                    this.label_count.string = this._curTime;
                }
            } else {
                //  step 2
                this._progressBarSprite.spriteFrame = this.frame_timeImage1;
                this.label_count.font = this.font_orange;
                this.label_count.string = this._curTime;
            }
        } else {
            //  step 1
            this._progressBarSprite.spriteFrame = this._firstFrame;
            this.label_count.font = this.font_green;
            this.label_count.string = this._curTime;
        }
    },

    _endSchedule: function _endSchedule() {
        this._curTime = 0;
        this._progressComp.progress = 0;
        this.unschedule(this._let_update);
        this.node.active = false;
    },

    getLeaveTime: function getLeaveTime() {
        return this._curTime;
    },

    //强制结束
    forceEnd: function forceEnd() {
        var callFunc = this._callFunc;
        this._callFunc = null;
        this._curTime = 0;
        this._runTime = this._interval;
        return callFunc;
    },

    _clearLabels: function _clearLabels() {
        this.label_count.string = '';
    },

    onDestory: function onDestory() {
        this.unschedule(this._let_update);
    }

});

cc._RF.pop();
},{}],"Obj_dealScroll":[function(require,module,exports){
"use strict";
cc._RF.push(module, 'a9194v8KDNAMoLVXJItM1QP', 'Obj_dealScroll');
// Script/Objects/Obj_dealScroll.js

'use strict';

//自动处理滚动层逻辑

var dataObj = {
    itemPrefab: null,
    lineNum: null,
    scrollType: null
};

cc.Class({
    extends: cc.Component,

    properties: {
        _itemPrefab: null, //条目的复制体
        _showItemNum: null, //显示的条目数量
        _itemHeight: null, //条目的高度
        _itemWidth: null, //条目的宽度
        _itemOffX: null, //条目之间的间隔
        _itemOffY: null, //条目之间的间隔
        _pool: null, //对象池
        _scrollType: null, //滚动容器的类型
        _viewW2: null, //可视区域宽度的一半
        //背包类型需要用到的属性
        _lineNum: null },

    // use this for initialization
    onLoad: function onLoad() {
        this._itemOffY = 0;
        this._itemOffX = 0;
    },

    setData: function setData(dataObj) {
        this._initData();
        this._itemPrefab = dataObj.itemPrefab;
        this._lineNum = dataObj.lineNum;
        this._scrollType = dataObj.scrollType;
        //默认类型
        if (!this._scrollType) this._scrollType = G_TYPE.scrollType.vertical;
    },
    _initData: function _initData() {
        this._showItemNum = 0;
        this._itemHeight = null;
        this._itemWidth = null;
        if (!this._viewW2) this._viewW2 = this.node.parent.width * 0.5;
    },

    //添加一个条目
    addOneItem: function addOneItem() {
        var item = this._getOnePoolNode();

        switch (this._scrollType) {
            case G_TYPE.scrollType.vertical:
                item.y = -this._showItemNum * (this._itemHeight + this._itemOffY);
                break;
            case G_TYPE.scrollType.horizontal:
                //水平滚动层，需要去掉水平方向的widget
                var startPosX = -this._viewW2;
                item.x = startPosX + this._showItemNum * (this._itemWidth + this._itemOffY);
                break;
            case G_TYPE.scrollType.bag:
                var startPosX = -this._viewW2;
                var lineNum;
                if (this._showItemNum == 0) lineNum = 0;else lineNum = this._showItemNum % this._lineNum;
                var rowNum = Math.floor(this._showItemNum / this._lineNum);
                item.x = startPosX + lineNum * (this._itemWidth + this._itemOffY) + this._itemWidth / 2;
                item.y = -rowNum * (this._itemHeight + this._itemOffX);
                break;
            default:
                break;
        }

        this._showItemNum += 1;
        this._resetContainerSize();
        return item;
    },

    //获取某个条目(从0开始)
    getItemByIndex: function getItemByIndex(index) {
        var items = this.node.children;
        var item = items[index];
        if (item) return item;
        return this.addOneItem();
    },

    //获取所有的条目
    getAllItems: function getAllItems() {
        return this.node.children;
    },

    //清理条目（从0开始，清理index之后的条目, 不包括index）
    clearItems: function clearItems(index) {
        var items = this.node.children;
        for (var i = items.length - 1; i > index; i--) {
            if (items[i]) this._removePoolNode(items[i]);
        }
    },

    //直接设置容器的大小
    setContentSize: function setContentSize(width, height) {
        if (width) this.node.width = width;
        if (height) this.node.height = height;
    },

    //=====================================================

    //获取一个条目
    _getOnePoolNode: function _getOnePoolNode() {
        if (!this._itemPrefab) return null;
        if (!this._pool) this._pool = new cc.NodePool('Obj_dealScroll' + this._itemPrefab.name);

        var cNode = this._pool.get();
        if (!cNode) {
            cNode = cc.instantiate(this._itemPrefab);
            if (!this._itemHeight) this._itemHeight = cNode.height;
            if (!this._itemWidth) this._itemWidth = cNode.width;
        }
        cNode.parent = this.node;
        cNode.active = true;
        return cNode;
    },

    _removePoolNode: function _removePoolNode(cNode) {
        // cNode.active = false;
        this._pool.put(cNode);

        this._showItemNum -= 1;
        this._resetContainerSize();
    },

    _resetContainerSize: function _resetContainerSize() {
        var contentH, contentW;
        switch (this._scrollType) {
            case G_TYPE.scrollType.vertical:
                contentW = this._itemWidth + this._itemOffX;
                contentH = this._showItemNum * (this._itemHeight + this._itemOffY);
                break;
            case G_TYPE.scrollType.horizontal:
                contentW = this._showItemNum * (this._itemWidth + this._itemOffX);
                contentH = this._itemHeight + this._itemOffY;
                break;
            case G_TYPE.scrollType.bag:
                contentW = this._lineNum * (this._itemWidth + this._itemOffX);
                var rowNum = Math.ceil(this._showItemNum / this._lineNum);
                contentH = rowNum * (this._itemHeight + this._itemOffY);
                break;
            default:
                break;
        }
        this.node.height = contentH;
        this.node.width = contentW;
    },

    //获取当前已经显示的条目数量
    getShowItemNum: function getShowItemNum() {
        return this._showItemNum;
    },

    //获取scrollview组件
    getScrollView: function getScrollView() {
        return this.node.parent.parent.getComponent(cc.ScrollView);
    },

    //注册滚动到底部的事件
    registerBottomEvent: function registerBottomEvent() {},

    //获取下一页的更新信息
    getNextPageList: function getNextPageList(dataList, intervalNum) {
        return dataList.splice(0, intervalNum);
    },

    //根据数量获取页数 从1开始
    getPageNoByNum: function getPageNoByNum(itemNum, firstNum) {
        var pageNo = Math.floor(itemNum / firstNum);
        if (itemNum > pageNo * firstNum) {
            pageNo += 1;
        }
        return pageNo;
    },

    scrollToUp: function scrollToUp() {
        this.getScrollView().scrollToTop(0.2);
    },

    onDestroy: function onDestroy() {
        if (this._pool) this._pool.clear();
    }

});

cc._RF.pop();
},{}],"Obj_dealerListCell":[function(require,module,exports){
"use strict";
cc._RF.push(module, '687f8AC+TdI2q0s9AnuqZPO', 'Obj_dealerListCell');
// Script/Objects/Obj_dealerListCell.js

'use strict';

//上庄列表庄家条目

cc.Class({
    extends: cc.Component,

    properties: {
        _dealerWord: null, //庄字动画效果

        node_head: {
            default: null,
            type: cc.Node,
            displayName: '头像'
        },
        label_name: {
            default: null,
            type: cc.Label,
            displayName: '名字'
        },
        label_gold: {
            default: null,
            type: cc.Label,
            displayName: '金币'
        },
        prefab_dealerAni: {
            default: null,
            type: cc.Prefab,
            displayName: '庄字动画'
        }
    },

    // use this for initialization
    onLoad: function onLoad() {},

    setData: function setData(data) {
        G_TOOL.setHeadImg(this.node_head, data.headImg);
        this._setPlayerName(data.name);
        this._setGoldValue(data.gold);
        if (data.isDealer) this._addDealerWord();else this._delDealerWord();
    },

    _setPlayerName: function _setPlayerName(playerName) {
        if (!playerName) playerName = '';else playerName = G_TOOL.getNameLimit(playerName);
        this.label_name.string = playerName;
    },
    _setGoldValue: function _setGoldValue(value) {
        if (!value) value = 0;
        this.label_gold.string = G_TOOL.changeMoney(value);;
    },

    //添加庄字动画
    _addDealerWord: function _addDealerWord() {
        this._dealerWord = cc.instantiate(this.prefab_dealerAni);
        this._dealerWord.parent = this.node;
        this._dealerWord.position = cc.p(-this.node.width * 0.05, -this.node.height * 0.5);
    },

    //删除庄字动画
    _delDealerWord: function _delDealerWord() {
        if (this._dealerWord) {
            this._dealerWord.destroy();
        }
    }

});

cc._RF.pop();
},{}],"Obj_dealerListSlider":[function(require,module,exports){
"use strict";
cc._RF.push(module, '7110ckrbJVGjadOXy4EREkS', 'Obj_dealerListSlider');
// Script/Objects/Obj_dealerListSlider.js

'use strict';

//上庄进度条处理


cc.Class({
    extends: cc.Component,

    properties: {
        _sliderComp: null, //进度条组件
        _ui_moveNum: null, //移动的数字
        _label_moveNum: null, //移动的数字
        _oneWordWidth: null, //一个数字的长度
        _offNum: null, //间隔数额
        _curMoveNum: null, //当前的移动到的数额
        _handleNode: null, //滑动的点
        _idleMoney: null, //空闲的资金，如果有则可以增大上庄金额

        node_lightLine: {
            default: null,
            type: cc.Node,
            displayName: '进度条'
        },
        node_touchLimit: {
            default: null,
            type: cc.Node,
            displayName: '进度条触摸吞噬层'
        }
    },

    // use this for initialization
    onLoad: function onLoad() {
        this._sliderComp = this.node.getComponent(cc.Slider);

        this._baseWordNum = 4.5;
        this._time_numHide = 2;

        this._addSliderEvent();
        this._initMoveNum();
        this._resetLightLine();
    },
    //增加监听事件
    _addSliderEvent: function _addSliderEvent() {
        this._sliderComp.node.on('slide', this._sliderMove, this);
        this._sliderComp.node.on(cc.Node.EventType.TOUCH_END, this.sliderEnd, this);

        var handle = this.node.getChildByName('Handle');
        if (handle) {
            var btn = handle.getComponent(cc.Button);
            handle.on(cc.Node.EventType.TOUCH_CANCEL, this.sliderEnd, this);
        }
    },
    //初始化可操作节点
    _initMoveNum: function _initMoveNum() {
        var handle = this.node.getChildByName('Handle');
        if (handle.children.length > 0) {
            this._ui_moveNum = handle.children[0];
            this._label_moveNum = this._ui_moveNum.children[0].getComponent(cc.Label);
            this._oneWordWidth = this._ui_moveNum.width / this._baseWordNum;
        }
    },

    //myGold: 自己拥有的金币; offGold：移动金币的差值，minLimitGold：最小金币限额
    setData: function setData(myGold, offGold, minLimitGold) {
        if (!myGold) {
            this._setTouchLimit(true);
            return;
        }
        this._playerGold = myGold;
        this._offNum = offGold;
        this._minNum = minLimitGold;
        this._idleMoney = this._playerGold - this._minNum;

        var firstNum;
        if (this._playerGold < this._minNum) {
            //钱不足
            this._setTouchLimit(true);
            firstNum = this._minNum;
            this._setGoldProgress(0);
        } else if (this._playerGold < this._minNum + this._offNum) {
            this._setTouchLimit(true);
            this._setGoldProgress(1);
            this._resetLightLine();
            firstNum = this._minNum;
        } else {
            this._setTouchLimit(false);
            firstNum = this._minNum;
            this._setGoldProgress(0);
        }
        this._setUIMoveNum(firstNum);
        this._setMoveNumShow(true);
        this._isShow = true;
    },

    //移动回调，如果进度条有移动，则这里会被调用
    _sliderMove: function _sliderMove(event) {
        //console.log(event)
        this._resetLightLine();
        //显示数值
        var num = this._idleMoney * this._sliderComp.progress;
        var changeNum = Math.floor(num / this._offNum) * this._offNum;
        this._setUIMoveNum(changeNum + this._minNum);

        this._setMoveNumShow(true);
    },
    sliderEnd: function sliderEnd() {
        this._addTimeHide();
    },

    //设置进度
    _setGoldProgress: function _setGoldProgress(value) {
        this._sliderComp.progress = value;
        this._resetLightLine();
    },

    //设置进度条滑动的表现
    _resetLightLine: function _resetLightLine() {
        this.node_lightLine.width = this.node.width * this._sliderComp.progress;
    },

    //=================================滑动点上的数字显示

    //显示移动在进度条上的数值
    _setUIMoveNum: function _setUIMoveNum(num) {
        this._curMoveNum = num;
        num += '';
        var len = num.length;
        this._ui_moveNum.width = len * this._oneWordWidth;
        this._label_moveNum.string = num;

        //this._ui_moveNum.x = this._handleNode.x;
    },

    //获取选择数值
    getMoveNum: function getMoveNum() {
        return this._curMoveNum;
    },

    //控制进度条上面的数值的显隐
    _setMoveNumShow: function _setMoveNumShow(isShow) {
        if (this._ui_moveNum) {
            this._ui_moveNum.stopAllActions();
            if (isShow) {
                this._ui_moveNum.opacity = 255;
                this._ui_moveNum.active = true;
            } else this._ui_moveNum.active = false;
        }
    },

    _addTimeHide: function _addTimeHide() {
        if (this._ui_moveNum) {
            this._ui_moveNum.stopAllActions();
            this._ui_moveNum.runAction(cc.sequence(cc.fadeOut(this._time_numHide), cc.callFunc(function () {
                this._setMoveNumShow(false);
            }, this)));
        }
    },

    //==========================================

    _setTouchLimit: function _setTouchLimit(isLimit) {
        if (isLimit) {
            this.node_touchLimit.active = true;
            this.node_touchLimit.on(cc.Node.EventType.TOUCH_START, this._onClick_Touch, this);
        } else {
            this.node_touchLimit.off(cc.Node.EventType.TOUCH_START, this._onClick_Touch, this);
            this.node_touchLimit.active = false;
        }
    },
    _onClick_Touch: function _onClick_Touch() {}

});

cc._RF.pop();
},{}],"Obj_dealerWordEffect":[function(require,module,exports){
"use strict";
cc._RF.push(module, 'f34b9gL6nxOYr0lRtDl0NMD', 'Obj_dealerWordEffect');
// Script/Objects/Obj_dealerWordEffect.js

'use strict';

//庄家庄字特效
cc.Class({
    extends: cc.Component,

    properties: {
        _dealerWordAni: null },

    // use this for initialization
    onLoad: function onLoad() {},

    //播放庄字特效动画
    playDealerWordAni: function playDealerWordAni() {
        if (!this._dealerWordAni) {
            this._dealerWordAni = this.node.getComponent(dragonBones.ArmatureDisplay);
            this._dealerWordAni.addEventListener(dragonBones.EventObject.COMPLETE, this._playDealerWordEffectAni, this);
        }
        this.node.active = true;
        this._dealerWordAni.playAnimation('zhuang_mark_2', 1);
    },

    //循环播放的庄字特效
    _playDealerWordEffectAni: function _playDealerWordEffectAni() {
        this._dealerWordAni.playAnimation('zhuang_mark_1', 0);
    },

    //清理庄字特效动画
    clearDealerWordAni: function clearDealerWordAni() {
        if (this.node) this.node.active = false;
    }
});

cc._RF.pop();
},{}],"Obj_dialogAccountCell":[function(require,module,exports){
"use strict";
cc._RF.push(module, 'f1326nfQM5IboIc/NP0kvBu', 'Obj_dialogAccountCell');
// Script/Objects/Obj_dialogAccountCell.js

'use strict';

//账目条目
cc.Class({
    extends: cc.Component,

    properties: {
        label_time: {
            default: null,
            type: cc.Label,
            displayName: '充值时间'
        },
        label_type: {
            default: null,
            type: cc.Label,
            displayName: '操作类型'
        },
        label_money: {
            default: null,
            type: cc.Label,
            displayName: '金额'
        },
        label_balance: {
            default: null,
            type: cc.Label,
            displayName: '余额'
        }
    },

    // use this for initialization
    onLoad: function onLoad() {},

    setData: function setData(data) {
        this._setTime(data.completiontime);
        this._setType(data.transactiontype);
        this._setChangeMoney(data.transactionmoney);
        this._setBalance(data.balance);
    },

    _setType: function _setType(type) {
        this._recordFirstColor(this.label_type.node);
        var curColor, strNum;
        if (type != 'DEPOSIT') {
            //颜色为红色
            curColor = this._getFontColor();;
            strNum = G_CHINESE.turnOut; //转出
        } else {
            curColor = this._getFirstColor(this.label_type.node);
            strNum = G_CHINESE.recharge; //转出
        }
        this.label_type.node.color = curColor;
        this.label_type.string = strNum; //充值
    },

    _setChangeMoney: function _setChangeMoney(money) {
        this._recordFirstColor(this.label_money.node);
        var curColor;
        if (money < 0) {
            //颜色为红色
            curColor = this._getFontColor();
        } else {
            curColor = this._getFirstColor(this.label_money.node);
        }
        this.label_money.node.color = curColor;
        this.label_money.string = money;
    },

    _setTime: function _setTime(timeStr) {
        this.label_time.string = timeStr;
    },

    _setBalance: function _setBalance(value) {
        if (!value) value = 0;
        this.label_balance.string = value;
    },

    //======================================

    _recordFirstColor: function _recordFirstColor(node) {
        if (node._firstColor === undefined) {
            node._firstColor = node.color;
        }
    },
    _getFirstColor: function _getFirstColor(node) {
        return node._firstColor ? node._firstColor : node.color;
    },

    _getFontColor: function _getFontColor() {
        if (!this._fontsColor) {
            this._fontsColor = new cc.Color(255, 0, 0);
        }
        return this._fontsColor;
    }

});

cc._RF.pop();
},{}],"Obj_dialogPlayerListCell":[function(require,module,exports){
"use strict";
cc._RF.push(module, '06af7RA1NNLNZrMIRx0CFe8', 'Obj_dialogPlayerListCell');
// Script/Objects/Obj_dialogPlayerListCell.js

'use strict';

//玩家列表条目
cc.Class({
    extends: cc.Component,

    properties: {
        node_head: {
            default: null,
            type: cc.Node,
            displayName: '头像'
        },
        label_name: {
            default: null,
            type: cc.Label,
            displayName: '名字'
        },
        label_gold: {
            default: null,
            type: cc.Label,
            displayName: '金币'
        }

    },

    // use this for initialization
    onLoad: function onLoad() {},

    setData: function setData(data) {
        G_TOOL.setHeadImg(this.node_head, data.avatarUrl);
        this._setPlayerName(data.nickname);
        this._setGoldValue(data.coin);
    },

    _setPlayerName: function _setPlayerName(playerName) {
        //玩家列表玩家条目名称限制10个字符
        if (!playerName) playerName = '';else playerName = G_TOOL.getNameLimit(playerName, 10);
        this.label_name.string = playerName;
    },
    _setGoldValue: function _setGoldValue(value) {
        if (!value) value = 0;else value = G_TOOL.changeMoney(value);
        this.label_gold.string = value;
    }

});

cc._RF.pop();
},{}],"Obj_dialogRecordCell":[function(require,module,exports){
"use strict";
cc._RF.push(module, '3006d3TqmhAraFdhAM3/ALl', 'Obj_dialogRecordCell');
// Script/Objects/Obj_dialogRecordCell.js

'use strict';

//玩家记录查询预制体
cc.Class({
    extends: cc.Component,

    properties: {
        label_time: {
            default: null,
            type: cc.Label,
            displayName: '对局时间'
        },
        label_roomType: {
            default: null,
            type: cc.Label,
            displayName: '房间类型'
        },
        label_roomName: {
            default: null,
            type: cc.Label,
            displayName: '房间名称'
        },
        label_bet: {
            default: null,
            type: cc.Label,
            displayName: '押注'
        },
        label_result: {
            default: null,
            type: cc.Label,
            displayName: '结果'
        },
        label_outCome: {
            default: null,
            type: cc.Label,
            displayName: '胜负'
        }

    },

    // use this for initialization
    onLoad: function onLoad() {},

    setData: function setData(data) {
        this._setTime(data.confirmtime);
        this._setRoom(data.gamemodelname, data.gameroomname);
        this._setBet(data.effectiveamount);
        this._setResult(data.profitamount);
        this._setOutCome(data.profitamount);
    },

    _setTime: function _setTime(timeStr) {
        this.label_time.string = timeStr;
    },

    //房间名字为红色
    _setRoom: function _setRoom(gameModelName, gameRoomName) {
        this.label_roomType.string = gameModelName.substring(0, 2) + ":";
        this.label_roomName.string = gameRoomName;
    },

    //投注信息
    _setBet: function _setBet(betStr) {
        if (!betStr) {
            betStr = G_CHINESE.dealer; // 当庄
        }
        this.label_bet.string = betStr;
    },

    //投注结果
    _setResult: function _setResult(result) {
        this._recordFirstColor(this.label_result.node);
        var curColor;
        if (result < 0) {
            //颜色为红色
            curColor = this._getFontColor();
        } else {
            curColor = this._getFirstColor(this.label_result.node);
        }
        this.label_result.node.color = curColor;
        this.label_result.string = result;
    },

    _setOutCome: function _setOutCome(outCome) {
        this._recordFirstColor(this.label_outCome.node);
        var str, curColor;
        if (outCome < 0) {
            //颜色为红色
            curColor = this._getFontColor();
            str = G_CHINESE.loseMatch; // 负
        } else {
            curColor = this._getFirstColor(this.label_outCome.node);
            str = G_CHINESE.winMatch; // 胜
        }
        this.label_outCome.node.color = curColor;
        this.label_outCome.string = str;
    },

    //===================

    _recordFirstColor: function _recordFirstColor(node) {
        if (node._firstColor === undefined) {
            node._firstColor = node.color;
        }
    },
    _getFirstColor: function _getFirstColor(node) {
        return node._firstColor ? node._firstColor : node.color;
    },

    _getFontColor: function _getFontColor() {
        if (!this._fontsColor) {
            this._fontsColor = new cc.Color(255, 0, 0);
        }
        return this._fontsColor;
    }

});

cc._RF.pop();
},{}],"Obj_effect_inHomeLoading":[function(require,module,exports){
"use strict";
cc._RF.push(module, '14d3aZ8ia5Aeo4hKGQ1GkG5', 'Obj_effect_inHomeLoading');
// Script/Objects/Obj_effect_inHomeLoading.js

'use strict';

//进入房间时候的加载动画


cc.Class({
    extends: require('BaseManager'),

    properties: {
        _maxProgress: null, //进度滚动的最大效果0-1
        _toSceneName: null, //准备跳转的场景名字

        _loadingNum: null, //正在加载的数量
        _reConnectNum: null, //重连次数
        label_tip: {
            default: null,
            type: cc.Label,
            displayName: '加载时候的提示信息'
        },
        label_rate: {
            default: null,
            type: cc.Label,
            displayName: '显示百分比'
        }
    },

    // use this for initialization
    onLoad: function onLoad() {
        this._super();

        this.node._firstPosY = this.node.y;
        this._node_sliderImg = this.node.children[0];
        this._node_sliderImg._firstPosY = this._node_sliderImg.y;

        this._firstMaxProgress = 0.9;
        var runTime = 2;
        this._curProgress = 0;
        this._loadingNum = 0;
        this._reConnectNum = 0;
        //每秒的进度
        this._progressInSec = this._firstMaxProgress / runTime;
        this._isStartEffect = false;
    },

    start: function start() {
        //进入加载状态
        GG.setIsLoading(true);
        //显示进度信息
        this._showSliderEffect();
        //加载即将进入的场景
        this.preloadedScene();
    },

    _step_loadAudioConfig: function _step_loadAudioConfig() {
        var self = this;
        if (!GG.audioMgr.getIsReloadGame()) {
            this._loadingNum += 1;
            GG.audioMgr.reloadGameAudio(function () {
                self._oneCompleted();
            });
        }
    },

    //预加载场景
    preloadedScene: function preloadedScene() {
        var reloadInfo = GG.getPlayer().getReloadSceneInfo();
        if (reloadInfo && reloadInfo.sceneName) {
            //基本配置已经加载完
            this._addReloadScene(reloadInfo.sceneName);
            //提示文本
            this._addTip();
        } else {
            //首次默认加载
            this._loadInitGameConfig();
        }
    },
    //有某个资源加载完成
    _oneCompleted: function _oneCompleted() {
        this._loadingNum -= 1;
        if (this._loadingNum <= 0) {
            //所有资源加载完成，且进度达到90%,则将进度特效播放到结束
            this._firstMaxProgress = 1;
            this._isStartEffect = true;
        }
    },

    _whenReloadEnd: function _whenReloadEnd() {
        cc.sys.garbageCollect();
        //进度已经走完
        cc.director.loadScene(this._toSceneName);
        clearInterval(this.inervalId);
    },

    //=========================

    //加载初始配置
    _loadInitGameConfig: function _loadInitGameConfig() {
        var self = this;
        this._loadingNum += 1;
        var isFirst = GG.whenGameStart(function () {
            self._addConfigCallFunc();
            if (!G_Config_common.isLocal) {
                self._sendLogin();
                // self._doLogin();
            } else {
                self._toSceneName = G_TYPE.sceneName.platform;
            }

            //界面下方的提示文本
            self._addTip();
            self._oneCompleted();
        });
        if (!isFirst) {
            self._oneCompleted();
        }
    },

    //直接登录（测试）
    _doLogin: function _doLogin() {
        console.log('发送登录请求');
        var username = 'mk06';
        var password = '1234567';
        var sendData = 'username=' + username + '&password=' + password;
        this._loadingNum += 1;
        GG.httpMgr.sendHttpRequest(G_DIALOG_URL.login + "?" + sendData, null, function (data) {
            console.log('接受到登录信息');
            console.log(data);
            // if(data){
            //
            // }
            this._sendLogin();
            this._oneCompleted();
        }.bind(this), 'GET');
    },

    //发送登陆确认请求
    _sendLogin: function _sendLogin() {
        var sendData = null;
        if (!GG.getPlayer().getPlayerToken()) {
            this._loadingNum += 1;
            GG.httpMgr.sendHttpRequest(G_DIALOG_URL.loginTokenUrl, sendData, function (data) {
                if (data) {
                    GG.getPlayer().setPlayerToken(data);
                    this._reConnectNum = 0;
                    this._loadingNum += 1;
                    var self = this;
                    //登陆socket
                    GG.socketMgr.connectSocket(function () {
                        self._whenLoginEnd();
                        self._oneCompleted();
                    });
                } else {
                    this._reConnectNum += 1;
                    if (this._reConnectNum > 6) {
                        //重连次数太多
                        var self = this;
                        GG.showReconnect(function () {
                            self._reConnectNum = 0;
                            self._sendLogin();
                        });
                    } else this._sendLogin();
                }
                this._oneCompleted();
            }.bind(this));
        } else this._whenLoginEnd();
    },
    _whenLoginEnd: function _whenLoginEnd() {
        this._step1_setPlayerInfo();
        this._step2_setAudioConfig();
        this._step3_setReloadScene();
    },
    //获取玩家信息并放置M_Player脚本中
    _step1_setPlayerInfo: function _step1_setPlayerInfo() {
        var sendData = null;
        if (!GG.getPlayer().getBaseInfo()) {
            this._loadingNum += 1;
            GG.httpMgr.sendHttpRequest(G_DIALOG_URL.personalInfoUrl, sendData, function (data) {
                GG.getPlayer().setBaseInfo(data);
                this._oneCompleted();
            }.bind(this));
        }
    },
    //请求服务器声音的设置
    _step2_setAudioConfig: function _step2_setAudioConfig() {
        if (!GG.audioMgr.getAudioConfig()) {
            this._loadingNum += 1;
            //GG.httpMgr.sendHttpRequest(G_DIALOG_URL.loginToSetUrl, sendData, function (data) {
            //    var config = data[0];
            //    if(!data || data.length < 1){
            //        config = {'music':true,'sound':true};
            //    }
            //    GG.audioMgr.setAudioConfig(config);
            //    this._oneRequestEnd();
            //}.bind(this));
            GG.httpMgr.sendHttpRequest(G_DIALOG_URL.getSystemSetUrl, 'gameType=DOU_NIU', function (data) {
                var config;
                if (data) {
                    if (data.code == 0) {
                        config = { 'music': true, 'sound': true };
                    } else {
                        config = data.data.result[0];
                    }
                } else config = { 'music': true, 'sound': true };

                //if(config.music && GG.audioMgr.getIsPlayMusic()) GG.audioMgr.saveSoundConfig(config.sound);
                GG.audioMgr.setAudioConfig(config);
                this._oneCompleted();
            }.bind(this));
        }
    },
    //登陆后，加载即将进入的场景
    _step3_setReloadScene: function _step3_setReloadScene() {
        var self = this;
        //刚登陆，会根据hash来设置初始页面
        var hashData = G_DATA.getLastSceneHash();
        if (hashData) {
            var netData = {
                roomId: hashData.roomId,
                gameModel: G_DATA.getEnterHomeModel(hashData.enterType)
            };
            self._loadingNum += 1;
            GG.s_requestMgr.send_inHome(netData, function (recvData) {
                // GG.changeScene(G_DATA.getSceneName(hashData.enterType));
                if (recvData) {
                    //记录hash信息
                    G_DATA.setCurSceneHash(hashData.enterType, hashData.roomId);
                    self._addReloadScene(G_DATA.getSceneName(hashData.enterType));
                } else {
                    //进房请求失败,回到主场景
                    G_DATA.setCurSceneHash('', 0);
                    self._addReloadScene(G_TYPE.sceneName.platform);
                }
                self._oneCompleted();
            });
        } else {
            //默认的场景
            G_DATA.setCurSceneHash('', 0);
            this._addReloadScene(G_TYPE.sceneName.platform);
        }
    },
    _addReloadScene: function _addReloadScene(sceneName) {
        this._toSceneName = sceneName;
        this._loadingNum += 1;
        var self = this;
        cc.director.preloadScene(this._toSceneName, function () {
            self._oneCompleted();
        });
        if (sceneName != G_TYPE.sceneName.platform) {
            //加载游戏房间内声音配置
            this._step_loadAudioConfig();
        }
    },

    //加载配置文件结束
    _addConfigCallFunc: function _addConfigCallFunc() {
        var table = GG.tableMgr.getTable(G_RES_URL.dict_tablesName.grabConfig);
        if (table) {
            var dataObj = table.getFirstData();
            this._addConfig(G_Config_grab, dataObj);
        }

        var table = GG.tableMgr.getTable(G_RES_URL.dict_tablesName.commonConfig);
        if (table) {
            var dataObj = table.getFirstData();
            this._addConfig(G_Config_common, dataObj);
        }
    },
    //增加配置信息
    _addConfig: function _addConfig(targetObject, addObject) {
        if (addObject) {
            for (var attrName in addObject) {
                targetObject[attrName] = addObject[attrName];
            }
        }
    },

    //================================进度条的表现

    //开始进度条的显示，直接播放到90%等待
    _showSliderEffect: function _showSliderEffect() {
        this._loadingNum += 1;
        this._curProgress = 0;
        this._setSliderValue(this._curProgress);
        this._isStartEffect = true;
    },
    //设置显示进度 0-1
    _setSliderValue: function _setSliderValue(rate) {
        this._setRateInfo(rate);
        var len = rate * this.node.height;
        var needH = this.node.height - len;
        this.node.y = -needH;
        this._node_sliderImg.y = needH;
    },
    //设置提示信息
    _setTipInfo: function _setTipInfo(str) {
        if (this.label_tip) {
            this.label_tip.string = str;
        }
    },
    //设置百分比信息
    _setRateInfo: function _setRateInfo(rate) {
        var str = Math.floor(rate * 100) + '%';
        if (this.label_rate) {
            this.label_rate.string = str;
        }
    },

    // called every frame, uncomment this function to activate update callback
    update: function update(dt) {
        if (this._isStartEffect) {
            this._playerSliderEffect(dt);
        }
    },
    //播放进度动画到90%
    _playerSliderEffect: function _playerSliderEffect(dt) {
        if (this._curProgress >= this._firstMaxProgress) {
            //达到第一阶段，如90%
            this._isStartEffect = false;
            this._oneCompleted();
            return;
        }
        this._curProgress += dt * this._progressInSec;
        this._setSliderValue(this._curProgress);
        if (this._curProgress >= 1) {
            this._curProgress = 1;
            this._setSliderValue(this._curProgress);
            this._isStartEffect = false;

            this._whenReloadEnd();
        }
    },

    //==========================显示提示文本

    //界面下方的提示文本
    _addTip: function _addTip() {
        this._table = GG.tableMgr.getTable(G_RES_URL.dict_tablesName.commonLoading);
        if (!this._table) {
            this._setLoadingTable();
        } else {
            this._showTableTime();
        }
    },

    //设置文本表格
    _setLoadingTable: function _setLoadingTable() {
        GG.tableMgr.reloadTables(G_RES_URL.dict_tablesName.commonLoading, this._getLoadingTable.bind(this));
    },
    //获取文本表格
    _getLoadingTable: function _getLoadingTable() {
        this._table = GG.tableMgr.getTable(G_RES_URL.dict_tablesName.commonLoading);
        if (this._table) {
            var loadMessage = this._table.getFirstData().content;
            this._setTipInfo(loadMessage);
            this._showTableTime();
        }
    },
    _getRandomTable: function _getRandomTable() {
        var index = G_TOOL.getRandomArea(1, 7);
        var loadMessage = this._table.getDataByID(index).content;
        return loadMessage;
    },
    //定时显示
    _showTableTime: function _showTableTime() {
        var self = this;
        this.inervalId = setInterval(function () {
            self._setTipInfo(self._getRandomTable());
        }, 2000);
    },

    onDestroy: function onDestroy() {}
});

cc._RF.pop();
},{"BaseManager":"BaseManager"}],"Obj_goldResultEffect":[function(require,module,exports){
"use strict";
cc._RF.push(module, 'ffaf0Vp7ShAUbno9OmhAAEZ', 'Obj_goldResultEffect');
// Script/Objects/Obj_goldResultEffect.js

'use strict';

//显示在头像上面的金币增减的漂浮特效

cc.Class({
    extends: cc.Component,
    _callFunc: null, //金币特效结束后回调
    properties: {
        node_addGold: cc.Node,
        node_lostGold: cc.Node
    },

    // use this for initialization
    onLoad: function onLoad() {
        this._reloadLabel();
    },

    _reloadLabel: function _reloadLabel() {
        this._label_add = this.node_addGold.getComponentInChildren(cc.Label);
        this._label_lost = this.node_lostGold.getComponentInChildren(cc.Label);
    },

    showGrabGold: function showGrabGold(count) {
        if (!count) return;
        if (!this._label_add) this._reloadLabel();

        if (count > 0) {
            this.node_addGold.active = true;
            this.node_lostGold.active = false;
            count = '+' + count;
            this._label_add.string = count;
        } else {
            //count = '-'+count;
            this.node_addGold.active = false;
            this.node_lostGold.active = true;
            this._label_lost.string = count;
        }
    },

    showEffect: function showEffect(value, startPos, targetY, callFunc) {
        this.node.active = true;
        this._callFunc = callFunc;
        if (value > 0) {
            this.node_addGold.active = true;
            this.node_lostGold.active = false;
            this._label_add.string = '+' + value;
            this._showGoldAddEffect(startPos, targetY);
        } else if (value < 0) {
            this.node_lostGold.active = true;
            this.node_addGold.active = false;
            this._label_lost.string = value;
            this._showGoldLostEffect(startPos, targetY);
        } else {
            //value == 0
            this.node_addGold.active = true;
            this.node_lostGold.active = false;
            this._label_add.string = value;
            this._showGoldAddEffect(startPos, targetY);
        }
    },

    //金币显示的移动效果
    _showGoldAddEffect: function _showGoldAddEffect(startPos, targetY) {
        this.node.zIndex = -1;
        this.node.position = startPos;
        this.node.scale = 0;
        this.node.opacity = 0;

        var time = G_Config_classic.list_goldAddFly[0];
        var act1 = cc.moveTo(time, 0, targetY).easing(cc.easeOut(3.0));
        var act2 = cc.scaleTo(time, 1);
        var act3 = cc.fadeTo(time, 255);

        var act5 = cc.callFunc(this._addEffectMid, this, startPos);
        this.node.runAction(cc.sequence(cc.spawn(act1, act2, act3), act5));
    },
    _addEffectMid: function _addEffectMid(target, startPos) {
        this.node.zIndex = 1;
        var time = G_Config_classic.list_goldAddFly[1];
        var act1 = cc.delayTime(G_Config_classic.list_goldAddFly[2]);
        var act2 = cc.fadeTo(time, 100);
        var act3 = cc.moveTo(time, startPos).easing(cc.easeInOut(3.0));
        var act4 = cc.scaleTo(time, 0.5);
        var act5 = cc.callFunc(this._effectEnd, this);
        this.node.runAction(cc.sequence(act1, cc.spawn(act2, act3, act4), act5));
    },

    _showGoldLostEffect: function _showGoldLostEffect(startPos, targetY) {
        this.node.zIndex = -1;
        this.node.position = startPos;
        this.node.scale = 0;
        this.node.opacity = 255;

        var time = G_Config_classic.list_goldLostFly[0];
        var act1 = cc.moveTo(time, 0, targetY).easing(cc.easeOut(3.0));
        var act2 = cc.scaleTo(time, 1);
        var act3 = cc.delayTime(G_Config_classic.list_goldLostFly[1]);
        var act4 = cc.fadeOut(G_Config_classic.list_goldLostFly[2]);
        var act5 = cc.callFunc(this._effectEnd, this);
        this.node.runAction(cc.sequence(cc.spawn(act1, act2), act3, act4, act5));
    },

    _effectEnd: function _effectEnd() {
        this.hideGold();
        if (this._callFunc) this._callFunc();
    },

    //隐藏
    hideGold: function hideGold() {
        this.node.active = false;
    }

});

cc._RF.pop();
},{}],"Obj_goldsContainer":[function(require,module,exports){
"use strict";
cc._RF.push(module, '77608wtKXBFOYPUMcPVJ0dp', 'Obj_goldsContainer');
// Script/Objects/Obj_goldsContainer.js

'use strict';

//金币管理容器

cc.Class({
    extends: cc.Component,

    properties: {
        //_isUpdate : null,                                                           //是否开启金币的移动
        _dict_goldSort: null, //已经投注的金币的整理字典

        frame_gold: {
            default: null,
            type: cc.SpriteFrame,
            displayName: '金币图标'
        }
    },

    // use this for initialization
    onLoad: function onLoad() {
        //金币的移动时间
        this._goldMoveTime = 0.3;
        //胜利金币回收的移动速度
        this._recoveGoldMoveTime = 0.4;
        //金币的缩放
        this._goldScale = G_Config_common.scale_moveGold;

        this._dict_goldSort = {};
    },

    start: function start() {
        if (GG.curMgr) this._tableContainer = GG.curMgr.getTableContainer();
    },

    //从玩家到投注区域
    playerToTable: function playerToTable(dataObj) {
        //var dataObj = G_OBJ.data_flyGold_playerToTable();
        var goldPosList = this._tableContainer.getGoldPosList(dataObj.tableIndex, dataObj.goldNum);
        var targetPos, goldNode, lastGold;
        for (var i = 0; i < dataObj.goldNum; i++) {
            targetPos = goldPosList[i];
            if (targetPos) {
                goldNode = this._getOneGold();
                this._addFlyAction(goldNode, {
                    startPos: dataObj.startPos,
                    targetPos: targetPos
                });
                if (!this._dict_goldSort[dataObj.tableIndex]) this._dict_goldSort[dataObj.tableIndex] = [];
                this._dict_goldSort[dataObj.tableIndex].push(goldNode);
                lastGold = goldNode;
            }
        }
        if (dataObj.goldNum > 0) GG.audioMgr.playSound(15);
        if (lastGold) lastGold.callBack = dataObj.callFunc;
    },
    //从投注区域到玩家
    tableToPlayer: function tableToPlayer(dataObj) {
        //var dataObj = G_OBJ.data_flyGold_tableToPlayer();
        var goldList = this._getRemoveGold(dataObj.tableIndex, dataObj.goldNum);
        var goldNode;
        for (var i = 0; i < dataObj.goldNum; i++) {
            goldNode = goldList[i];
            if (goldNode) {
                this._addFlyAction2(goldNode, {
                    //startPos : startPos,  //可以让其从当前的位置出发
                    targetPos: dataObj.targetPos
                });
            }
        }
        //if(dataObj.goldNum > 0) GG.audioMgr.playSound(18);
    },

    //回收剩余的金币
    recoverAllGold: function recoverAllGold(targetPos) {
        var goldList = [],
            isHaveGold = false;
        for (var tableIndex in this._dict_goldSort) {
            if (this._dict_goldSort[tableIndex]) goldList = goldList.concat(this._dict_goldSort[tableIndex]);
        }
        this._dict_goldSort = {};
        var goldNode;
        for (var i = 0; i < goldList.length; i++) {
            goldNode = goldList[i];
            if (goldNode) {
                isHaveGold = true;
                this._addFlyAction2(goldNode, {
                    //startPos : startPos,  //可以让其从当前的位置出发
                    targetPos: targetPos
                });
            }
        }
        //if(goldList.length > 0) GG.audioMgr.playSound(18);
        return isHaveGold;
    },

    //从一个投注区域中获取随机的几个金币,用于回收移动
    _getRemoveGold: function _getRemoveGold(tableIndex, goldNum) {
        if (!this._dict_goldSort[tableIndex]) return [];
        if (goldNum >= this._dict_goldSort[tableIndex].length) {
            var goldList = this._dict_goldSort[tableIndex].concat([]);
            this._dict_goldSort[tableIndex] = null;
            return goldList;
        } else {
            return this._dict_goldSort[tableIndex].splice(0, goldNum);
        }
    },

    //增加一个金币移动的动作---投注金币
    _addFlyAction: function _addFlyAction(goldNode, flyInfo) {
        var startPos = flyInfo.startPos;
        var targetPos = flyInfo.targetPos;
        if (startPos) goldNode.position = startPos;
        // var act = cc.moveTo(this._goldMoveTime, targetPos).easing(cc.easeOut(3.0));
        var act = cc.moveTo(this._goldMoveTime, targetPos);
        goldNode.runAction(cc.sequence(act, cc.callFunc(this._goldFlyEnd, this, flyInfo.isRemove)));
    },
    //增加一个金币移动的动作---回收金-币
    _addFlyAction2: function _addFlyAction2(goldNode, flyInfo) {
        var startPos = flyInfo.startPos;
        var targetPos = flyInfo.targetPos;
        if (startPos) goldNode.position = startPos;
        var act = cc.moveTo(this._recoveGoldMoveTime, targetPos);
        goldNode.runAction(cc.sequence(act, cc.callFunc(this._goldFlyEnd, this, true)));
    },
    //金币移动结束
    _goldFlyEnd: function _goldFlyEnd(goldNode, isRemove) {
        if (goldNode.callBack) {
            goldNode.callBack();
            goldNode.callBack = null;
        }

        if (isRemove) {
            this._removeGold(goldNode);
        }
    },

    //===================

    //获取一个金币
    _getOneGold: function _getOneGold() {
        if (!this.frame_gold) return null;
        if (!this._pool) this._pool = new cc.NodePool('Obj_goldContainer');

        var goldNode = this._pool.get();
        if (!goldNode) {
            goldNode = new cc.Node();
            var sp = goldNode.addComponent(cc.Sprite);
            sp.spriteFrame = this.frame_gold;
        }
        goldNode.parent = this.node;
        //goldNode.scale = (1/this.node.parent.scale)*this._goldScale;
        goldNode.scale = this._goldScale;
        goldNode.active = true;
        return goldNode;
    },
    //移除金币
    _removeGold: function _removeGold(goldeNode) {
        goldeNode.stopAllActions();
        goldeNode.active = false;
        this._pool.put(goldeNode);
    },

    getGoldSize: function getGoldSize() {
        if (!this._goldSize) {
            var gold = this._getOneGold();
            this._goldSize = gold.getContentSize();
            this._removeGold(gold);
        }
        return this._goldSize;
    },

    //清理所有
    clearAll: function clearAll() {
        var goldList = this.node.children;
        for (var i = goldList.length - 1; i >= 0; i--) {
            this._removeGold(goldList[i]);
        }

        this._dict_goldSort = {};
        this.node.stopAllActions();
    },

    // called every frame, uncomment this function to activate update callback
    // update: function (dt) {

    // },

    onDestroy: function onDestroy() {
        if (this._pool) {
            this._pool.clear();
        }
    }
});

cc._RF.pop();
},{}],"Obj_leftTopMenu":[function(require,module,exports){
"use strict";
cc._RF.push(module, 'c17a0Sz5yVIXJmuOlz/I4bH', 'Obj_leftTopMenu');
// Script/Objects/Obj_leftTopMenu.js

'use strict';

//左上角的菜单按钮


cc.Class({
    extends: require('AutoDealing'),

    properties: {
        _isOpen: null, //是否打开菜单
        _isPlayingEff: null, //是否正在播放特效
        _exitFunc: null, //退出回调
        _changeFunc: null, //换桌回调

        node_dirImg: {
            default: null,
            type: cc.Node,
            displayName: '菜单方向容器'
        },
        node_btnContainer: {
            default: null,
            type: cc.Node,
            displayName: '按钮容器'
        }
    },

    // use this for initialization
    onLoad: function onLoad() {
        this._isOpen = false;
        this._scaleTime = 0.2;
        this._waitTime = 3.5;

        var exitBtn = this.node_btnContainer.children[0]; //退出
        var changeBtn = this.node_btnContainer.children[1]; //换桌
        this.registerButton(this.node_dirImg, this.OnClick_menu, this);
        this.registerButton(exitBtn, this.OnClick_exit, this);
        this.registerButton(changeBtn, this.OnClick_change, this);

        this.setBtnEnable(changeBtn, false);
    },

    //点击菜单
    OnClick_menu: function OnClick_menu(target) {
        this._isOpen = !this._isOpen;
        this._changeDirImg(this._isOpen);
        this._showOpenEffect();
    },
    //点击退出
    OnClick_exit: function OnClick_exit(target) {
        this.OnClick_menu();
        if (this._exitFunc) this._exitFunc();
    },
    //点击换桌
    OnClick_change: function OnClick_change(target) {
        this.OnClick_menu();
        if (this._changeFunc) this._changeFunc();
    },

    //设置退出函数
    bindFunc: function bindFunc(exitFunc, changeFunc) {
        this._exitFunc = exitFunc;
        this._changeFunc = changeFunc;
    },

    //==================================效果显示

    //箭头方向
    _changeDirImg: function _changeDirImg(isOpen) {
        this.node_dirImg.children[0].active = !isOpen;
        this.node_dirImg.children[1].active = isOpen;
    },

    //显示打开菜单特效
    _showOpenEffect: function _showOpenEffect() {
        if (!this._isOpen) {
            //已经在播放动画了
            this._showCloseEffect();
            return;
        }
        this.node_btnContainer.stopAllActions();
        this.node_btnContainer.active = true;
        this.node_btnContainer.scaleY = 0;

        var time = this._scaleTime;
        var scaleAct = cc.scaleTo(time, 1, 1);
        this.node_btnContainer.runAction(cc.sequence(scaleAct, cc.callFunc(this._addWaitAct, this)));
    },
    //增加等待动作
    _addWaitAct: function _addWaitAct() {
        this.node_btnContainer.stopAllActions();
        var time1 = this._waitTime;
        this.node_btnContainer.runAction(cc.sequence(cc.delayTime(time1), cc.callFunc(this.OnClick_menu, this)));
    },
    //显示收起菜单的特效
    _showCloseEffect: function _showCloseEffect() {
        this.node_btnContainer.stopAllActions();
        var time = this._scaleTime / 2;
        var scaleAct = cc.scaleTo(time, 1, 0);
        this.node_btnContainer.runAction(scaleAct);
    },

    resetShow: function resetShow() {
        this._changeDirImg(false);
        this.node_btnContainer.active = false;
    }

});

cc._RF.pop();
},{"AutoDealing":"AutoDealing"}],"Obj_notice":[function(require,module,exports){
"use strict";
cc._RF.push(module, '77d28KRz+1JubOiS0r0wfYZ', 'Obj_notice');
// Script/Objects/Obj_notice.js

"use strict";

//跑马灯，公告


cc.Class({
    extends: cc.Component,
    _moveSpeed: null, //每秒移动的速度
    _isMove: null, //是否移动
    _list_msg: null, //显示消息的队列
    _firstPosX: null, //通知出现的初始位置
    properties: {
        node_view: cc.Node, //显示节点
        node_content: cc.Node },

    // use this for initialization
    onLoad: function onLoad() {
        this._initConfigData();
    },

    //设置公告运行属性
    _initConfigData: function _initConfigData() {
        this._curLabelNode = this.node_content.children[0];
        this._curLabel1 = this._curLabelNode.getComponent(cc.RichText);
        this._firstPosX = this._curLabelNode.x + this.node_view.width * 0.75;
        this._endPosX = this._curLabelNode.x - this.node_view.width * 2;

        this._isMove = false;
        this._moveSpeed = G_Config_common.notice_speed;
        // this._runTime = 0;
        // this._interval_next = G_Config_common.notice_showTime;
        this._list_msg = [];
    },

    ////开启wifi实时监听
    //openWifiAni : function () {
    //
    //},
    ////关闭wifi监听
    //closeWifiAni : function () {
    //
    //},
    //隐藏公告
    hideNotice: function hideNotice() {
        this._isMove = false;
        this.node.active = false;
    },

    //增加准备显示的公告消息
    addMsg: function addMsg(msg) {
        this._resetShowContent(msg);
        //msg = "<color=#00ff00>Ric111111</c><color=#0fffff>Text</color>12132132132131313213213213211";
    },

    ////增加优先显示的消息(当前显示结束后显示)
    //addHeightPriorityMsg : function (msg) {
    //    if(!this._list_msg) this._resetData();
    //    this._list_msg.splice(0,0,msg);
    //    this._setNextMsg();
    //},
    //
    ////直接显示的消息(将会替换掉当前的消息)
    //addFirstMsg : function (msg) {
    //    if(!this._list_msg) this._resetData();
    //    this._curLabel1.string = msg;
    //    this._restartLabel();
    //},


    //===========================================

    //下一条公告
    //_setNextMsg : function () {
    //    if(this._isMove) return;
    //
    //    if(this._list_msg.length > 0){
    //        this.node.active = true;
    //        var msg = this._list_msg[0];
    //        this._list_msg.splice(0, 1);
    //
    //        this._curLabel1.string = msg;
    //        this._restartLabel();
    //    }else this.node.active = false;
    //},

    //重新设置内容
    _resetShowContent: function _resetShowContent(msg) {
        this.node.active = true;
        this._isMove = true;
        this._curLabel1.string = msg;
        this._restartLabel();
    },

    //重新开始移动label
    _restartLabel: function _restartLabel() {
        this._curLabelNode.x = this._firstPosX;
        // this._runTime = 0;
        this._isMove = true;
    },

    // called every frame, uncomment this function to activate update callback
    update: function update(dt) {
        if (this._isMove) {
            this._curLabelNode.x -= dt * this._moveSpeed;
            if (this._curLabelNode.x <= this._endPosX) {
                this._isMove = false;
                this.node.active = false;
            }
            // if(this._runTime >= this._interval_next){
            //
            // }else this._runTime += dt;
        }
    }
});

cc._RF.pop();
},{}],"Obj_onPokerResult":[function(require,module,exports){
"use strict";
cc._RF.push(module, '64c66ub77NHYbI6OjWUwiq5', 'Obj_onPokerResult');
// Script/Objects/Obj_onPokerResult.js

'use strict';

//卡牌结果的显示

cc.Class({
    extends: cc.Component,

    properties: {
        node_upImage: cc.Node,
        node_downImage: cc.Node,
        Atlas_onPokerResult: cc.SpriteAtlas
    },

    // use this for initialization
    onLoad: function onLoad() {},

    _initSprite: function _initSprite() {
        this._upSprite = this.node_upImage.getComponent(cc.Sprite);
        this._downSprite = this.node_downImage.getComponent(cc.Sprite);
        this._dontFrame = this.Atlas_onPokerResult.getSpriteFrame(G_RES_URL.atlas_pokerResult.dont);
    },

    //显示牌型计算完成, 显示完成两个字
    showCalculateSuccess: function showCalculateSuccess() {
        this.node.active = true;
        if (!this._upSprite) this._initSprite();
        this.node_downImage.active = false;
        this._upSprite.spriteFrame = this._dontFrame;
    },

    //显示牌型
    showPokerResultValue: function showPokerResultValue(pokerValue, isOverAni) {
        this.node.active = true;
        if (!this._upSprite) this._initSprite();

        if (pokerValue <= 0) {
            //没牛
            this.node_downImage.active = false;
            pokerValue = 'no';
            if (this._callFunc) {
                this._callFunc();
                this._callFunc = null;
            }
        } else {
            this.node_downImage.active = true;
            if (!isOverAni) this._openResultEffect();else {
                if (this._callFunc) {
                    this._callFunc();
                    this._callFunc = null;
                }
            }
        }

        var toFrame = this.Atlas_onPokerResult.getSpriteFrame(G_RES_URL.atlas_pokerResult.resultImgName + pokerValue);
        this._upSprite.spriteFrame = toFrame;
    },
    _openResultEffect: function _openResultEffect() {
        this.node_upImage.scale = 0;
        this.node_downImage.scale = 0;

        var time = G_Config_classic.time_pokerResultShow;
        var act1 = cc.sequence(cc.scaleTo(time, G_Config_classic.scale_pokerResultShow), cc.scaleTo(time / 2, 1.0));
        var act2 = cc.scaleTo(time, 1.0);
        this.node_downImage.runAction(act1);
        this.node_upImage.runAction(cc.sequence(act2, cc.callFunc(function () {
            if (this._callFunc) {
                this._callFunc();
                this._callFunc = null;
            }
        }, this)));
    },

    setTruePos: function setTruePos(pos) {
        this.node.position = pos;
        this.hideOnPokerResult();
    },

    hideOnPokerResult: function hideOnPokerResult() {
        this.node.active = false;
    },

    getIsShow: function getIsShow() {
        return this.node.active;
    },

    showResult: function showResult(resultPos, resultValue, isOverAni, callFunc) {
        this._callFunc = callFunc;
        if (isOverAni) {
            //跳过动画
            this.node.position = resultPos;
            this.showPokerResultValue(resultValue, true);
        } else {
            this.setTruePos(resultPos);
            this.showPokerResultValue(resultValue);
        }
    }

});

cc._RF.pop();
},{}],"Obj_optionButton":[function(require,module,exports){
"use strict";
cc._RF.push(module, '6568fLdAtFMO7u0FIJ1ZHfl', 'Obj_optionButton');
// Script/Objects/Obj_optionButton.js

'use strict';

//显示倍数的按钮

cc.Class({
    extends: cc.Component,
    _valueOffX: null, //倍数大于10，显示容器的偏移量
    properties: {
        _firstFrame: null,
        _lastValue: null,

        frame_disable: cc.SpriteFrame, //不可用的时候使用的图片
        node_centerLabel: {
            default: null,
            type: cc.Node,
            displayName: '显示内容的label'
        } },

    // use this for initialization
    onLoad: function onLoad() {
        this._normalColor = new cc.Color(199, 140, 39);
        this._chooseColor = new cc.Color(137, 98, 207);
    },

    //显示倍数，调整label的对齐
    showValue: function showValue(value, isRed) {
        this._showMultiple(value, isRed);
    },
    //显示金钱
    showMoney: function showMoney(value, isRed) {
        this._showMoneyEX(value, isRed);
    },
    _initContainer: function _initContainer() {
        if (!this._container) {
            this._container = this.node.getChildByName('container');
            if (!this._container) return false;
            this._firstFrame = this.getComponent(cc.Sprite).spriteFrame;
            this._valueOffX = G_Config_common.num_multipleValueOff;
            this.node_leftLabel = this._container.getChildByName('left');
            this._rightLabel = this._container.getChildByName('right').getComponent(cc.Label);
        }
        return true;
    },
    _isValidValue: function _isValidValue(value) {
        if (!value) return false;
        if (value == this._lastValue) return false;
        this._lastValue = value;
        return true;
    },

    //替换红色资源
    _showRed: function _showRed() {
        this.node_leftLabel.getComponent(cc.Label).font = this.font_red;
        this._rightLabel.font = this.font_red;

        this._showDisable(true);
    },

    //替换绿色资源
    _showGreen: function _showGreen() {
        this.node_leftLabel.getComponent(cc.Label).font = this.font_green;
        this._rightLabel.font = this.font_green;

        this._showDisable(false);
    },

    _showDisable: function _showDisable(isDisable) {
        if (!this._firstFrame) this._firstFrame = this.getComponent(cc.Sprite).spriteFrame;
        if (isDisable) {
            this.getComponent(cc.Sprite).spriteFrame = this.frame_disable;
        } else {
            this.getComponent(cc.Sprite).spriteFrame = this._firstFrame;
        }
    },

    //显示倍数
    _showMultiple: function _showMultiple(value, isRed) {
        this.node_centerLabel.getComponent(cc.Label).string = value + '倍';
        this.node_centerLabel.getComponent(cc.LabelOutline).color = this.getOutLineColor(isRed);
        this._showDisable(isRed);
    },
    //显示金钱
    _showMoneyEX: function _showMoneyEX(value, isRed) {
        if (value) this.node_centerLabel.getComponent(cc.Label).string = G_TOOL.changeMoney(value);
        this.node_centerLabel.getComponent(cc.LabelOutline).color = this.getOutLineColor(isRed);
        this._showDisable(isRed);
    },

    //获取对应颜色
    getOutLineColor: function getOutLineColor(isRed) {
        return isRed ? this._chooseColor : this._normalColor;
    }

});

cc._RF.pop();
},{}],"Obj_poker":[function(require,module,exports){
"use strict";
cc._RF.push(module, 'e21cbBuH+ZDuJqo2L/4lK4r', 'Obj_poker');
// Script/Objects/Obj_poker.js

'use strict';

//使用的卡牌对象

cc.Class({
    extends: cc.Component,
    _isMyself: null, //是否是玩家自己
    _ownPlayer: null, //属于哪个玩家
    _isChoose: null, //是否被选中
    _callFunc: null, //开牌动作的回调
    _pokerValue: null, //卡牌的值
    _pokerType: null, //卡牌的类型
    _label_value: null, //显示牌值的label
    properties: {
        node_pokerPlus: cc.Node,
        node_pokerNegative: cc.Node,
        node_pokerValue: cc.Node,
        node_minIcon: cc.Node,
        node_maxIcon: cc.Node,
        node_specialIcon: cc.Node,
        frame_pokerUI: cc.SpriteAtlas, //卡牌基础显示图片集
        font_black: cc.Font, //黑色字体
        font_red: cc.Font },

    // use this for initialization
    onLoad: function onLoad() {
        this._init();

        //this.setPokerInfo(G_TYPE.pokerType.redHeart, 12)
    },

    _init: function _init() {
        this._isChoose = false;

        this._label_value = this.node_pokerValue.getComponent(cc.Label);
        this._sprite_min = this.node_minIcon.getComponent(cc.Sprite);
        this._sprite_max = this.node_maxIcon.getComponent(cc.Sprite);
        this._openPokerTime = G_Config_common.time_pokerOpen;
        this._classic_otherScale = G_Config_classic.scale_noMyPoker;
        this._classic_flyTime = G_Config_classic.time_pokerFly;
        this._classic_moveUp = G_Config_classic.num_pokerUp;

        this.node_pokerPlus.active = true;
    },

    bindPlayer: function bindPlayer(player) {
        this._ownPlayer = player;
    },

    //显示卡牌的背面
    showPokerNegative: function showPokerNegative() {
        this.node_pokerPlus.y = 0;
        this.node_pokerPlus.scale = 1;
        //this.node_pokerPlus.active = true;

        this.node_pokerNegative.active = true;
        this.node_pokerNegative.scale = 1;
    },
    showPokerPlus: function showPokerPlus() {
        //this.node_pokerPlus.active = true;
        if (this.node_pokerNegative) this.node_pokerNegative.active = false;
    },

    //=========================================

    //移动卡牌
    flyPoker: function flyPoker(startPos, targetPos, isMyself) {
        this.onClear();
        this.showPokerNegative();
        this._isMyself = isMyself;
        if (!this._isMyself) {
            //不是属于当前玩家的卡牌
            this.node.scale = this._classic_otherScale;
        }

        this.node.position = startPos;
        var curPosX = targetPos.x; //easeQuarticActionOut
        var act1 = cc.moveTo(this._classic_flyTime, curPosX, targetPos.y);
        var act1 = cc.moveTo(0.4, curPosX, targetPos.y);
        this.node.runAction(cc.sequence(act1, cc.callFunc(this._flyPokerEnd, this)));
    },
    _flyPokerEnd: function _flyPokerEnd() {
        if (this._isMyself) this.openPoker();

        this._ownPlayer.addFlyEndPoker();
    },

    //=========================================

    //打开卡牌
    openPoker: function openPoker(callBack) {
        if (this.node_pokerNegative.active === false) return false;
        this.node_pokerNegative.active = false;
        this.node_pokerPlus.active = false;
        this._callFunc = callBack;
        this.showPokerNegative();

        var rotate1 = cc.scaleTo(this._openPokerTime * 0.5, 0, 1);
        this.node_pokerNegative.runAction(cc.sequence(rotate1, cc.callFunc(this._openPoker_showValue, this)));
        return true;
    },
    _openPoker_showValue: function _openPoker_showValue() {
        this.node_pokerNegative.active = false;
        this.node_pokerPlus.active = true;
        this.node_pokerPlus.scaleX = 0;
        var rotate1 = cc.scaleTo(this._openPokerTime * 0.5, 1, 1);
        this.node_pokerPlus.runAction(cc.sequence(rotate1, cc.callFunc(this._openPoker_end, this)));
    },
    _openPoker_end: function _openPoker_end() {
        //openPoker_end-------------------
        if (this._callFunc) this._callFunc();
        this._callFunc = null;
    },

    //=========================================

    //打出卡牌结果  actionCallFunc : 卡牌移动到开牌位置后的回调
    //moveToResultPos : function (targetPosY, actionCallFunc) {
    //    this.node_pokerPlus.y = 0;
    //    var pos = cc.p(this.node.x, targetPosY);
    //    if(actionCallFunc)this.node.runAction(cc.sequence(cc.moveTo(G_Config_classic.time_pokerMoveToResult, pos), actionCallFunc));
    //    else this.node.runAction(cc.moveTo(G_Config_classic.time_pokerMoveToResult, pos));
    //},

    //=========================================

    //获取一个定制的牌面显示
    setPokerInfo: function setPokerInfo(pokerType, pokerValue, isOpen) {
        this.node.active = true;
        this.node_maxIcon.active = true;
        if (this.node_specialIcon) this.node_specialIcon.active = false;
        this._pokerValue = pokerValue;
        this._pokerType = pokerType;
        if (isOpen) this.showPokerPlus();else this.showPokerNegative();

        //确定卡牌类型
        switch (pokerType) {
            case G_TYPE.pokerType.block:
                //方块
                this._label_value.font = this.font_red;
                this._sprite_min.spriteFrame = this.frame_pokerUI.getSpriteFrame(G_RES_URL.pokerType.blockMin);
                this._sprite_max.spriteFrame = this.frame_pokerUI.getSpriteFrame(G_RES_URL.pokerType.blockMax);
                break;
            case G_TYPE.pokerType.blackHeart:
                //黑色桃心
                this._label_value.font = this.font_black;
                this._sprite_min.spriteFrame = this.frame_pokerUI.getSpriteFrame(G_RES_URL.pokerType.blackHeartMin);
                this._sprite_max.spriteFrame = this.frame_pokerUI.getSpriteFrame(G_RES_URL.pokerType.blackHeartMax);
                break;
            case G_TYPE.pokerType.redHeart:
                //红色桃心
                this._label_value.font = this.font_red;
                this._sprite_min.spriteFrame = this.frame_pokerUI.getSpriteFrame(G_RES_URL.pokerType.redHeartMin);
                this._sprite_max.spriteFrame = this.frame_pokerUI.getSpriteFrame(G_RES_URL.pokerType.redHeartMax);
                break;
            case G_TYPE.pokerType.flower:
                //梅花
                this._label_value.font = this.font_black;
                this._sprite_min.spriteFrame = this.frame_pokerUI.getSpriteFrame(G_RES_URL.pokerType.flowerMin);
                this._sprite_max.spriteFrame = this.frame_pokerUI.getSpriteFrame(G_RES_URL.pokerType.flowerMax);
                break;
        }
        //确定卡牌的值
        var realyValue;
        switch (pokerValue) {
            case 1:
                realyValue = 'A';
                break;
            case 10:
                realyValue = '1';
                break;
            case 11:
                realyValue = 'J';
                // this.node_maxIcon.active = false;
                // this.node_specialIcon.active = true;
                // this.node_specialIcon.getComponent(cc.Sprite).spriteFrame = this.frame_pokerUI.getSpriteFrame(G_RES_URL.pokerType.value_J);
                break;
            case 12:
                realyValue = 'Q';
                // this.node_maxIcon.active = false;
                // this.node_specialIcon.active = true;
                // this.node_specialIcon.getComponent(cc.Sprite).spriteFrame = this.frame_pokerUI.getSpriteFrame(G_RES_URL.pokerType.value_Q);
                break;
            case 13:
                realyValue = 'K';
                // this.node_maxIcon.active = false;
                // this.node_specialIcon.active = true;
                // this.node_specialIcon.getComponent(cc.Sprite).spriteFrame = this.frame_pokerUI.getSpriteFrame(G_RES_URL.pokerType.value_K);
                break;
            default:
                realyValue = pokerValue;
                break;
        }

        this._label_value.string = realyValue;
    },

    //=========================================

    getPokerValue: function getPokerValue() {
        return this._pokerValue;
    },

    getPokerType: function getPokerType() {
        return this._pokerType;
    },

    getPokerSize: function getPokerSize() {
        return this.node_pokerNegative.getContentSize();
    },

    //是否黑色卡牌
    getIsBlack: function getIsBlack() {
        return this.isBlackColor;
    },

    //设置卡牌是否可以点击
    setPokerTouchEnable: function setPokerTouchEnable(isEnable) {
        if (isEnable) {
            this.node_pokerPlus.on(cc.Node.EventType.TOUCH_START, this._callback_clickPoker, this);
        } else {
            this.node_pokerPlus.off(cc.Node.EventType.TOUCH_START, this._callback_clickPoker, this);
        }
    },

    //点击卡牌的回调
    _callback_clickPoker: function _callback_clickPoker(event) {
        var poker = event.target;
        if (this._isChoose) {
            poker.y -= this._classic_moveUp;
            this._isChoose = false;
            this._ownPlayer.touchThePokerDown();
        } else {
            var value = this.getPokerValue();
            if (value > 10) value = 10;
            var isOk = this._ownPlayer.touchThePokerUp(value);
            if (isOk) {
                poker.y += this._classic_moveUp;
                this._isChoose = true;
            }
        }
    },

    onClear: function onClear() {
        this._isChoose = false;
        this.node.scale = 1;
    },

    clearAllActions: function clearAllActions() {
        this.node_pokerNegative.stopAllActions();
        this.node_pokerPlus.stopAllActions();
        this.node.stopAllActions();
    },

    // called every frame, uncomment this function to activate update callback
    // update: function (dt) {

    // },

    onDestroy: function onDestroy() {
        //this.setPokerTouchEnable(false);
    }
});

cc._RF.pop();
},{}],"Obj_rankItem_friend":[function(require,module,exports){
"use strict";
cc._RF.push(module, 'c45a8ez/DpOGqvONZJKQxoV', 'Obj_rankItem_friend');
// Script/Objects/Obj_rankItem_friend.js

'use strict';

//好友排行榜条目处理


cc.Class({
    extends: cc.Component,

    properties: {

        richRankBG: {
            default: [],
            type: cc.SpriteFrame,
            displayName: '富豪榜排名背景'
        },
        gainRankBG: {
            default: [],
            type: cc.SpriteFrame,
            displayName: '盈利榜排名背景'
        },
        sprite_hat: {
            default: null,
            type: cc.Sprite,
            displayName: '皇冠'
        },
        labelRank: {
            default: null,
            type: cc.Label,
            displayName: '排名数字'
        },
        node_headImg: {
            default: null,
            type: cc.Node,
            displayName: '头像'
        },
        label_name: {
            default: null,
            type: cc.Label,
            displayName: '名字'
        },
        label_goldValue: {
            default: null,
            type: cc.Label,
            displayName: '金币数值'
        },
        node_goldBG: {
            default: null,
            type: cc.Node,
            displayName: '金币背景'
        }
    },

    // use this for initialization
    onLoad: function onLoad() {},

    init: function init(isGain, rank, playerInfo) {
        this._setHat(isGain, parseInt(rank));
        this._setPlayerName(playerInfo.nickname);
        this._setGoldValue(playerInfo.walletbalance ? playerInfo.walletbalance : playerInfo.profitamount);
        G_TOOL.setHeadImg(this.node_headImg, playerInfo.avatarurl);
    },

    //设置前三名名次图标
    _setHat: function _setHat(isGain, rank) {
        if (rank < 3) {
            this.labelRank.node.active = false;
            if (isGain) {
                this.sprite_hat.spriteFrame = this.gainRankBG[rank];
            } else {
                this.sprite_hat.spriteFrame = this.richRankBG[rank];
            }
        } else {
            this.labelRank.node.active = true;
            this.labelRank.string = (rank + 1).toString();
        }
    },
    //玩家名字
    _setPlayerName: function _setPlayerName(playerName) {
        if (!playerName) playerName = '';else playerName = G_TOOL.getNameLimit(playerName, 16, false);
        this.label_name.string = playerName;
    },
    //金额数值
    _setGoldValue: function _setGoldValue(value) {
        var str;
        if (!value) {
            str = G_CHINESE.noRecord;
            this.node_goldBG.active = false;
        } else {
            str = value + '';
            if (str.length >= 17) {
                str = G_CHINESE.upperLimit;
            } else {
                str = G_TOOL.changeMoney(value);
            }
            this.node_goldBG.active = true;
            // this._resetBackground(str);   保留
        }
        this.label_goldValue.string = str;
    },

    //改变背景长度
    _resetBackground: function _resetBackground(str) {
        if (!this._widthRate) this._widthRate = this.node_goldBG.width / 6;
        if (!this.node_goldBG._firstW) this.node_goldBG._firstW = this.node_goldBG.width;

        var wordLen = 0,
            name = str,
            curStr,
            reg = /^[\u4E00-\u9FA5]+$/;;
        for (var i = 0; i < name.length; i++) {
            curStr = name[i];
            if (reg.test(curStr)) {
                wordLen += 2;
            } else {
                wordLen += 1;
            }
        }

        var targetW = wordLen * this._widthRate;
        this.node_goldBG.width = Math.max(this.node_goldBG._firstW, targetW);
    }

});

cc._RF.pop();
},{}],"Obj_roomListCell":[function(require,module,exports){
"use strict";
cc._RF.push(module, 'e303fXC4KlIfIXdry/z8Mz2', 'Obj_roomListCell');
// Script/Objects/Obj_roomListCell.js

'use strict';

//房间列表条目
cc.Class({
    extends: require('BaseUI'),

    properties: {
        _enterType: null, //进入房间的类型
        _homeID: null, //房间ID

        node_backgroundBtn: {
            default: null,
            type: cc.Node,
            displayName: '进入房间'
        },
        label_intoLimit: {
            default: null,
            type: cc.Label,
            displayName: '进房限制'
        },
        label_onNumber: {
            default: null,
            type: cc.Label,
            displayName: '在房人数'
        },
        node_roomBG: {
            default: null,
            type: cc.Node,
            displayName: '房间背景'
        },
        node_roomName: {
            default: null,
            type: cc.Node,
            displayName: '房间名称'
        },
        frame_roomTypeUI: {
            default: null,
            type: cc.SpriteAtlas,
            displayName: '房间背景基础显示图片集'
        }
    },

    // use this for initialization
    onLoad: function onLoad() {
        this.registerButton(this.node_roomBG, this.onClick_into, this);
    },

    setData: function setData(data, jsonData) {
        if (!data) return;
        this._enterType = data.enterType;
        this._homeID = data.id;

        this._setEnterIcon(this.node_roomName, jsonData.txtImgUrl);
        this._setEnterIcon(this.node_roomBG, jsonData.bgImgUrl);
        this.label_intoLimit.string = G_CHINESE.inToRoomLimit + G_TOOL.changeMoney(data.minLimitPlayerBlance);
        this.label_onNumber.string = data.currentPlayerCount;
    },
    //点击进入游戏
    onClick_into: function onClick_into(event) {
        if (G_Config_common.isLocal) {
            this._doEnter();
        } else {
            var netData = {
                roomId: this._homeID,
                gameModel: G_DATA.getEnterHomeModel(this._enterType)
            };
            GG.platformMgr.requestEnterRoom(netData, this._doEnter.bind(this));
        }
    },

    _doEnter: function _doEnter() {
        //记录hash信息
        G_DATA.setCurSceneHash(this._enterType, this._homeID);
        GG.changeScene(G_DATA.getSceneName(this._enterType));
    },

    //设置图片（入房区域背景，房间名）
    _setEnterIcon: function _setEnterIcon(curNode, imgUrl) {
        var imgName = this._getIconName(imgUrl);
        if (imgName) {
            var frame = this.frame_roomTypeUI.getSpriteFrame(imgName);
            if (frame) {
                //已经缓存
                curNode.getComponent(cc.Sprite).spriteFrame = frame;
            } else {
                //没有则根据url去请求
                G_TOOL.setHeadImg(curNode, imgUrl);
            }
        } else {
            //该url异常

        }
    },
    //获取图片名
    _getIconName: function _getIconName(url) {
        if (!url) return null;
        var urlList = url.split('/');
        var iconName = urlList[urlList.length - 1].split('.')[0];
        return iconName;
    }
});

cc._RF.pop();
},{"BaseUI":"BaseUI"}],"Obj_scrollValue":[function(require,module,exports){
"use strict";
cc._RF.push(module, '6f6ceHVjj1Dn7Voy9rX4nwo', 'Obj_scrollValue');
// Script/Objects/Obj_scrollValue.js

'use strict';

//滚动数字的通用脚本

var dataObj = {
    startNum: 0,
    targetNum: 1,
    label: null,
    formatStr: '',
    callFunc: null
};

cc.Class({
    extends: cc.Component,

    properties: {
        _curLabel: null, //当前使用的滚动label
        _curNum: null, //当前的滚动值
        _maxNum: null, //最大的滚动值
        _formatStr: null, //需要组合显示的字符串
        _callFunc: null, //滚动结束后的回调

        _isStartScroll: null, //是否开始滚动
        _interval: null, //滚动间隔
        _maxScrollTimes: null },

    // use this for initialization
    onLoad: function onLoad() {
        this._maxScrollTimes = 50;
        this._isStartScroll = false;
    },

    //开始滚动数值
    scrollLabel: function scrollLabel(dataObj) {
        if (!dataObj) return;
        this._isStartScroll = false;
        this._curNum = dataObj.startNum;
        this._maxNum = dataObj.targetNum;
        this._curLabel = dataObj.label;
        this._formatStr = dataObj.formatStr + '%s';
        this._callFunc = dataObj.callFunc;
        this._initScrollData();
    },

    _initScrollData: function _initScrollData() {
        this._interval = Math.max(Math.floor((this._maxNum - this._curNum) / this._maxScrollTimes), 0);
        this._isStartScroll = true;
    },

    _change: function _change() {
        this._curNum += this._interval;
        if (this._curNum >= this._maxNum) {
            //已经滚动到最大值
            this._curNum = this._maxNum;
            this._isStartScroll = false;
        }
        this._showValue();
        if (!this._isStartScroll) {
            this._clearData();
            if (this._callFunc) {
                this._callFunc();
                this._callFunc = null;
            }
        }
    },

    _showValue: function _showValue() {
        var str = G_TOOL.formatStr(this._formatStr, G_TOOL.changeMoney(this._curNum));
        this._curLabel.string = str;
    },

    _clearData: function _clearData() {
        this._curNum = 0;
        this._maxNum = 0;
        this._curLabel = null;
        this._formatStr = '';
        this._interval = 0;
    },

    //强制结束,显示最终结果
    forceEnd: function forceEnd() {
        this._callFunc = null;
        this._curNum = this._maxNum;
    },

    // called every frame, uncomment this function to activate update callback
    update: function update(dt) {
        if (!this._isStartScroll) return;
        this._change();
    }
});

cc._RF.pop();
},{}],"Obj_seatsContainer":[function(require,module,exports){
"use strict";
cc._RF.push(module, 'e779eMDuShEOqiJv281BvTL', 'Obj_seatsContainer');
// Script/Objects/Obj_seatsContainer.js

"use strict";

//座位容器管理


cc.Class({
    extends: cc.Component,

    properties: {},

    // use this for initialization
    onLoad: function onLoad() {},

    //获取一个位置的坐标
    addOnePlayer: function addOnePlayer(seatIndex) {
        var seat = this.node.children[seatIndex - 1];
        if (seat) {
            seat.active = false;
            return seat.position;
        }
        return null;
    },

    //有一个玩家离开
    onePlayerLeave: function onePlayerLeave(seatIndex) {
        var seat = this.node.children[seatIndex - 1];
        if (seat) {
            seat.active = true;
        }
    },

    //获取座位数量
    getSeatsNum: function getSeatsNum() {
        return this.node.children.length;
    }

});

cc._RF.pop();
},{}],"Obj_setTouchEffect":[function(require,module,exports){
"use strict";
cc._RF.push(module, '2d913IYK5xMtoEMitw8o0jr', 'Obj_setTouchEffect');
// Script/Objects/Obj_setTouchEffect.js

"use strict";

/**
 * Created by lenovo on 2016/12/27.
 */

//最上层的点击
cc.Class({
    extends: cc.Component,

    properties: {
        _touchEffect: null, //点击特效

        frame_touchEffect: cc.SpriteFrame
    },

    // use this for initialization
    onLoad: function onLoad() {
        this.addTouchListener();
    },

    //添加点击事件
    addTouchListener: function addTouchListener() {
        if (!this.frame_touchEffect) return;
        this.node.on(cc.Node.EventType.TOUCH_START, this.touchCall, this);
    },
    touchCall: function touchCall(event) {
        var pos = cc.p(event.getLocationX(), event.getLocationY());
        this._showTouchEff(pos);
    },

    //显示点击特效
    _showTouchEff: function _showTouchEff(pos) {
        pos = this.node.convertToNodeSpace(pos);
        if (!this._touchEffect) {
            this._touchEffect = new cc.Node();
            this._touchEffect.parent = this.node;

            var node1 = new cc.Node();
            this._touchEffect.addChild(node1, 0, 1);
            var sp1 = node1.addComponent(cc.Sprite).spriteFrame = this.frame_touchEffect;

            var node2 = new cc.Node();
            this._touchEffect.addChild(node2, 0, 2);
            var sp1 = node2.addComponent(cc.Sprite).spriteFrame = this.frame_touchEffect;
        }
        this._touchEffect.active = true;
        this._touchEffect.position = pos;
        var node1 = this._touchEffect.getChildByTag(1);
        var node2 = this._touchEffect.getChildByTag(2);
        node1.stopAllActions();
        node2.stopAllActions();

        node1.scale = 0.1;
        node1.opacity = 255;

        var time = 0.5;
        var act1 = cc.scaleTo(time, 1);
        var act2 = cc.fadeTo(time, 70);
        node1.runAction(cc.sequence(cc.spawn(act1, act2), cc.callFunc(this._effCall, this)));

        node2.scale = 0.1;
        node2.opacity = 255;
        act1 = cc.delayTime(time * 0.2);
        act2 = cc.scaleTo(time * 0.6, 0.7);
        var act3 = cc.fadeTo(0, 0);
        node2.runAction(cc.sequence(act1, act2, act3));
    },

    _effCall: function _effCall() {
        if (this._touchEffect) {
            this._touchEffect.active = false;
        }
    }

});

cc._RF.pop();
},{}],"Obj_systemTip":[function(require,module,exports){
"use strict";
cc._RF.push(module, '8fea3wUoYNOl5pJOGqAF8VX', 'Obj_systemTip');
// Script/Objects/Obj_systemTip.js

"use strict";

//系统提示显示
cc.Class({
    extends: cc.Component,

    properties: {
        node_labelBG: cc.Node,
        label_center: cc.Label
    },

    // use this for initialization
    onLoad: function onLoad() {
        this._firstPos = cc.p(this.node.x, this.node.y);
    },

    //显示系统提示内容
    showContent: function showContent(str, pos, time, callBack) {
        this.node.active = true;
        this.label_center.string = str;

        if (!this._firstPos) this._firstPos = cc.p(this.node.x, this.node.y);
        if (!pos) pos = this._firstPos;
        this.node.position = pos;

        var showTime = 3;
        if (G_DATA.isNumber(time)) {
            showTime = time;
        }

        if (this._countDownNum) this._forceEnd();
        //有倒计时
        this._curStr = str;
        this._callFunc = callBack;
        this._setCenterValue();
        this.node.stopAllActions();
        this.node.runAction(cc.sequence(cc.delayTime(showTime), cc.callFunc(this._hideTip, this)));
        this._setBackgroundLen(str);
    },
    hideSystemTip: function hideSystemTip() {
        this.node.stopAllActions();
        this.node.active = false;
    },
    _forceEnd: function _forceEnd() {
        this._callFunc = null;
        this.node.stopAllActions();
        this._hideTip();
    },

    _hideTip: function _hideTip() {
        this.node.active = false;
        if (this._callFunc) {
            this._callFunc();
            this._callFunc = null;
        }
    },

    _setCenterValue: function _setCenterValue() {
        this.label_center.string = this._curStr;
    },
    //改变背景长度
    _setBackgroundLen: function _setBackgroundLen(str) {
        if (!this._widthRate) this._widthRate = this.node_labelBG.width / 14;
        if (!this.node_labelBG._firstW) this.node_labelBG._firstW = this.node_labelBG.width;

        var wordLen = 0,
            name = str,
            curStr,
            reg = /^[\u4E00-\u9FA5]+$/;;
        for (var i = 0; i < name.length; i++) {
            curStr = name[i];
            if (reg.test(curStr)) {
                wordLen += 2;
            } else {
                wordLen += 1;
            }
        }

        var targetW = wordLen * this._widthRate;
        this.node_labelBG.width = Math.max(this.node_labelBG._firstW, targetW);
    }

});

cc._RF.pop();
},{}],"Obj_topOneLayer":[function(require,module,exports){
"use strict";
cc._RF.push(module, '3827cXUXVxGSJC8QOIXG/UF', 'Obj_topOneLayer');
// Script/Objects/Obj_topOneLayer.js

'use strict';

//游戏场景中最上面的那个层


cc.Class({
    extends: cc.Component,

    properties: {
        _isConfirmTipOpen: null, //提示窗口是否已经打开
        _isHasOpen: null, //提示窗口是否已经打开

        prefab_loadingAni: {
            default: null,
            type: cc.Prefab,
            displayName: '网络请求动画'
        }
    },

    // use this for initialization
    onLoad: function onLoad() {
        // GG.topTouchLayer = this;

        this._isConfirmTipOpen = false;
        this._touchLimitLayer = this.getComponent('Obj_touchLimit');
    },

    start: function start() {
        this._registerFunc(true);
    },

    //显示请求网络的动画
    showNetRequest: function showNetRequest(isShowTip) {
        if (!this.prefab_loadingAni) return;
        if (!this._netAni) {
            this._netAni = cc.instantiate(this.prefab_loadingAni);
            this._netAni.parent = this.node;
            //this._netAni.active = false;
        }
        if (this._netAni.active) return;
        if (this._isConfirmTipOpen) {
            //弹窗已经存在
            this._isHasOpen = true;
            return;
        }
        this._netAni.active = true;
        var center = cc.visibleRect.center;
        this._netAni.position = cc.p(center.x, center.y * 1.35);
        this._showReconnectTip(isShowTip);
        this._netAni.getComponent(dragonBones.ArmatureDisplay).playAnimation('');
        if (this._touchLimitLayer) this._touchLimitLayer.addTouchLimit();
    },

    closeNetRequest: function closeNetRequest() {
        if (this._netAni) {
            this._netAni.active = false;
            if (this._touchLimitLayer) this._touchLimitLayer.cancelTouchLimit();
        }
    },

    //显示重连提示
    _showReconnectTip: function _showReconnectTip(isShow) {
        var tipNode = this._netAni.getChildByName('tip');
        if (tipNode) {
            var content;
            if (isShow) {
                var tableData = G_DATA.getChinese(61);
                content = tableData.content;
            } else content = '';
            tipNode.getComponent(cc.Label).string = content;
        }
    },

    //注册确认窗口的监听
    _registerFunc: function _registerFunc(isRegister) {
        if (GG.tipsMgr) {
            GG.tipsMgr.registerConfirm(this._whenConfirmTipChange.bind(this), isRegister);
        }
    },

    //当窗口打开或者关闭
    _whenConfirmTipChange: function _whenConfirmTipChange(isOpen) {
        this._isConfirmTipOpen = isOpen;
        if (this._netAni.active) {
            //当显示连接的时候
            if (isOpen) {
                this._isHasOpen = true;
                this.closeNetRequest();
            }
        } else {
            if (!isOpen) {
                if (this._isHasOpen) {
                    var tipNode = this._netAni.getChildByName('tip');
                    var isShow = false;
                    if (tipNode) {
                        isShow = Boolean(tipNode.getComponent(cc.Label).string);
                    }
                    this.showNetRequest(isShow);
                }
            }
        }
    },

    onDestroy: function onDestroy() {
        this._registerFunc(false);
    }

});

cc._RF.pop();
},{}],"Obj_touchLimit":[function(require,module,exports){
"use strict";
cc._RF.push(module, '28cc9CnmIZBXLGDeIMG+yuu', 'Obj_touchLimit');
// Script/Objects/Obj_touchLimit.js

"use strict";

//最上面的触摸禁用层

cc.Class({
    extends: cc.Component,

    properties: {
        _netAni: null },

    // use this for initialization
    onLoad: function onLoad() {},

    addTouchLimit: function addTouchLimit(isGray) {
        this.node.on(cc.Node.EventType.TOUCH_START, this._touchThisLayer, this);
    },
    _touchThisLayer: function _touchThisLayer() {},
    cancelTouchLimit: function cancelTouchLimit() {
        this.node.off(cc.Node.EventType.TOUCH_START, this._touchThisLayer, this);
    },

    //设置是否有置灰层
    setIsShowGray: function setIsShowGray(isGray) {
        if (!this._grayLayer) {}
    }

});

cc._RF.pop();
},{}],"Obj_txtTip":[function(require,module,exports){
"use strict";
cc._RF.push(module, '0779d1B55VI+5GfT/GEwecN', 'Obj_txtTip');
// Script/Objects/Obj_txtTip.js

'use strict';

//显示在屏幕中央的文字提示

//var dataObj = {
//    tipIndex : 1,
//    showStr : '',
//    formatStr : '',
//    showPos : cc.p(0,0),
//    retainTime : 5,
//    isCountDown : false,
//    isRepeat : false,
//    callBack : 'target'
//}

cc.Class({
    extends: cc.Component,
    properties: {
        _maxCountDown: null, //最大倒计时
        _curCountDown: null, //剩余时间
        _callBack: null, //倒计时结束后的回调
        _curBaseStr: null, //显示的文字基础
        _tipIndex: null, //tip索引
        _tipMgr: null, //管理器
        _widthRate: null,
        _hideFunc: null,

        node_centerLabel: cc.Node },

    // use this for initialization
    onLoad: function onLoad() {
        this._init();
    },

    _init: function _init() {
        this._mainLabel = this.node_centerLabel.getComponent(cc.Label);
        this._defaultTime = G_Config_common.time_tipDefault;
    },

    bindMgr: function bindMgr(mgr) {
        this._tipMgr = mgr;
    },

    //==========================================

    showTip: function showTip(dataObj) {
        //this.forceEnd();
        var retainTime;
        if (dataObj.tipIndex) {
            var table = G_DATA.getChinese(dataObj.tipIndex);
            if (table) {
                this._curBaseStr = table.content;
                retainTime = table.retainTime;
            }
        }
        this.node.active = true;
        var pos = dataObj.showPos;
        if (!this._initPos) this._initPos = this.node.position;
        if (!pos) pos = this._initPos;
        this.node.position = pos;
        this.showByOpacity();

        if (dataObj.showStr) this._curBaseStr = dataObj.showStr;
        if (!isNaN(dataObj.retainTime)) {
            retainTime = Math.max(dataObj.retainTime, 0);
        }
        this._callBack = dataObj.callBack;
        var formatStr = dataObj.formatStr;
        this._tipIndex = dataObj.tipIndex;

        if (dataObj.isCountDown) {
            if (!retainTime) {
                this._hideTip();
                if (this._callBack) {
                    this._callBack();
                    this._callBack = null;
                }
                return;
            }
            this._addCountDown(retainTime);
            this._resetBackground(G_TOOL.formatStr(this._curBaseStr, 123));
        } else {
            if (!retainTime) retainTime = this._defaultTime;
            this._showTxt();
            this._resetBackground(G_TOOL.formatStr(this._curBaseStr, formatStr));
            var act1 = cc.fadeOut(retainTime);
            this.node.runAction(cc.sequence(act1, cc.callFunc(this._clearTxtTip, this)));
        }
    },
    //中途修改显示文字
    forceChangeStr: function forceChangeStr(changeStr) {
        this._curBaseStr = changeStr;
        this._resetBackground(G_TOOL.formatStr(this._curBaseStr, ''));
    },
    //中途修改显示倒计时的数值
    forceChangeCountDown: function forceChangeCountDown(num) {
        this._maxCountDown = num;
        this._curCountDown = this._maxCountDown;
        this._showTxt(this._curCountDown);
    },
    //强制结束倒计时
    forceEnd: function forceEnd() {
        if (this._curCountDown) this.unschedule(this.let_update);
        this._curCountDown = 0;
        this._callBack = null;
        this._hideTip();
    },
    //重置显示内容和时间
    resetTxtAndTime: function resetTxtAndTime(content, time) {
        if (!time) time = this._defaultTime;
        this.node.stopAllActions();

        this._curBaseStr = content;
        this._showTxt();
        this._resetBackground(G_TOOL.formatStr(this._curBaseStr, ''));
        var act1 = cc.fadeOut(time);
        this.node.runAction(cc.sequence(act1, cc.callFunc(this._clearTxtTip, this)));
    },

    showByOpacity: function showByOpacity() {
        this.node.opacity = 255;
    },
    hideByOpacity: function hideByOpacity() {
        this.node.opacity = 0;
    },

    _showTxt: function _showTxt(formatStr) {
        if (!formatStr) this._mainLabel.string = this._curBaseStr;else this._mainLabel.string = G_TOOL.formatStr(this._curBaseStr, formatStr);
    },

    _resetBackground: function _resetBackground(str) {
        if (!this._widthRate) this._widthRate = this.node.width / 13;
        this.node.width = str.length * this._widthRate;
    },

    _addCountDown: function _addCountDown(maxTime) {
        if (this._curCountDown) this._countDownEnd();
        this._maxCountDown = maxTime;
        this._curCountDown = this._maxCountDown;
        this._interval = 1.0;
        this.schedule(this.let_update, this._interval);
        this._showTxt(this._curCountDown);
    },

    _countDownEnd: function _countDownEnd() {
        this.unschedule(this.let_update);
        this._clearTxtTip();
    },
    //frame
    let_update: function let_update(dt) {
        if (this._curCountDown > 0) {
            this._curCountDown -= 1;
            this._showTxt(this._curCountDown);
            if (this._curCountDown <= 0) {
                //倒计时结束
                this._countDownEnd();
            }
        }
    },

    _clearTxtTip: function _clearTxtTip() {
        if (this._callBack) {
            this._callBack();
            this._callBack = null;
        }
        this._hideTip();
    },

    //==========================================

    //绑定消失函数
    bindHideFunc: function bindHideFunc(func) {
        this._hideFunc = func;
    },

    _hideTip: function _hideTip() {
        if (this._tipMgr) this._tipMgr.oneTipHide(this.node);
        this.node.active = false;
        if (this._hideFunc) {
            this._hideFunc();
            this._hideFunc = null;
        }
    },

    //是否已经在显示了
    getIsShow: function getIsShow() {
        return this.node.active;
    },
    setIsShow: function setIsShow(isShow) {
        this.node.active = isShow;
    },

    //获取该tip的表格索引
    getTipIndex: function getTipIndex() {
        return this._tipIndex;
    },

    onDestroy: function onDestroy() {
        if (this._curCountDown) this.unschedule(this.let_update);
    }

});

cc._RF.pop();
},{}],"Obj_uiContainer":[function(require,module,exports){
"use strict";
cc._RF.push(module, '82b09GVpxBPap6yQdYUAPAT', 'Obj_uiContainer');
// Script/Objects/Obj_uiContainer.js

'use strict';

//显示UI界面的容器


cc.Class({
    extends: cc.Component,
    properties: {
        _dict_ui: null, //ui整理的字典
        _ui_baseUrl: null, //ui整理的字典
        _isOnLoad: null, //是否正在加载中

        node_grayLayer: {
            default: null,
            type: cc.Node,
            displayName: '灰色层'
        }
    },

    // use this for initialization
    onLoad: function onLoad() {
        this._dict_ui = {};
        this._ui_baseUrl = 'UI_prefabs/';
        this._isOnLoad = false;
    },

    //获取一个可以显示的ui
    addUI: function addUI(uiName, callBakc) {
        this.showUI(uiName, callBakc);
        return;
        //var uiComp = this._dict_ui[uiName];
        //if(!uiComp){
        //    //var prefabName = 'prefab_'+uiName.split('_')[1];
        //    var prefabName = uiName;
        //    if(!this[prefabName]) return null;
        //    var uiNode = cc.instantiate(this[prefabName]);
        //    uiNode.parent = this.node;
        //    var pos = this._getDialogPos();
        //    uiNode.position = this._getDialogPos();
        //    uiComp = uiNode.getComponent(uiName);
        //    uiComp.setUIName(uiName);
        //    uiComp.bindContainer(this);
        //    this._dict_ui[uiName] = uiComp;
        //}
        //uiComp.hideLayer();
        //return uiComp
    },

    showUI: function showUI(uiName, callBack) {
        if (this._isOnLoad) return;
        if (!uiName) {
            //错误的ui名称
            if (callBack) {
                callBack(null);
                callBack = null;
            }
            return;
        }
        var uiComp = this._dict_ui[uiName];
        if (!uiComp) {
            //创建窗口
            var prefabName = uiName;
            var self = this;
            this._isOnLoad = true;
            cc.loader.loadRes(this._ui_baseUrl + prefabName, function (err, prefab) {
                self._isOnLoad = false;
                var uiNode = cc.instantiate(prefab);
                uiNode.parent = self.node;
                uiNode.position = self._getDialogPos();
                uiComp = uiNode.getComponent(uiName);
                uiComp.setUIName(uiName);
                uiComp.bindContainer(self);
                self._dict_ui[uiName] = uiComp;
                uiComp.hideLayer();
                if (callBack) {
                    callBack(uiComp);
                    callBack = null;
                }
            });
        } else {
            //已经创建过该ui
            uiComp.hideLayer();
            if (callBack) {
                callBack(uiComp);
                callBack = null;
            }
        }
    },

    //增加一个额外的ui到ui管理字典
    addUIEx: function addUIEx(uiName, uiComp) {
        if (!uiComp) return;
        uiComp.setUIName(uiName);
        this._dict_ui[uiName] = uiComp;
    },

    //关闭一个ui
    closeUI: function closeUI(uiName) {
        if (!this._dict_ui[uiName]) return;
        this._dict_ui[uiName].hideLayer();
    },

    //获取一个UI的操作脚本
    getUIComp: function getUIComp(uiName) {
        var uiComp = this._dict_ui[uiName];
        if (!uiComp) uiComp = this.addUI(uiName);
        return uiComp;
    },

    //关闭所有的窗口显示
    closeAllUI: function closeAllUI() {
        for (var uiName in this._dict_ui) {
            this.closeUI(uiName);
        }
    },

    _getDialogPos: function _getDialogPos() {
        var designSize = cc.sys.isMobile ? cc.view.getDesignResolutionSize() : cc.visibleRect;
        return cc.p(designSize.width * 0.5, designSize.height * 0.5);
    },

    //设置置灰层的显隐
    setGrayLayerIsShow: function setGrayLayerIsShow(isShow) {
        if (this.node_grayLayer) this.node_grayLayer.active = isShow;
    }

});

cc._RF.pop();
},{}],"Obj_winRankHead":[function(require,module,exports){
"use strict";
cc._RF.push(module, '21a84l8GWhGaJ4cPQfmakvy', 'Obj_winRankHead');
// Script/Objects/Obj_winRankHead.js

'use strict';

//结算界面中胜利排行的头像


cc.Class({
    extends: cc.Component,

    properties: {
        _defaultHeadFrame: null, //显示默认的头像

        node_head: {
            default: null,
            type: cc.Node,
            displayName: '头像精灵'
        },
        label_playerName: {
            default: null,
            type: cc.Label,
            displayName: '玩家名字'
        },
        label_gold: {
            default: null,
            type: cc.Label,
            displayName: '金币数值'
        }
    },

    // use this for initialization
    onLoad: function onLoad() {},

    setData: function setData(data) {
        this._setPlayerName(data.name);
        this._setGoldValue(data.addGold);
        G_TOOL.setHeadImg(this.node_head, data.icon);
    },

    //设置玩家名字
    _setPlayerName: function _setPlayerName(name) {
        if (!name) name = '';
        name = G_TOOL.getNameLimit(name, 8, true);
        this.label_playerName.string = name;
    },

    _setGoldValue: function _setGoldValue(newValue) {
        this.label_gold.string = G_TOOL.changeMoney(newValue);
    },

    setIsShow: function setIsShow(isShow) {
        this.node.active = isShow;
    },
    getIsShow: function getIsShow() {
        return this.node.active;
    }

});

cc._RF.pop();
},{}],"Object_config":[function(require,module,exports){
"use strict";
cc._RF.push(module, 'b6eb4DffzpAE7fb1TCIU67g', 'Object_config');
// Script/Common/Configs/Object_config.js

"use strict";

//对象内容枚举

window.G_OBJ = window.G_OBJ || {};

//百人投注信息
G_OBJ.data_bullBetting = function () {
    return {
        //来源于桌子的信息
        tableIndex: null, //桌子索引
        posList: null, //金币的位置列表
        //来源与玩家的信息
        startPos: null, //金币开始移动的位置
        goldValue: null, //投注的金币实际数值
        goldNum: null, //飞行在场景中的金币数量
        //是否是操作位投注
        isMine: null
    };
};
//押宝投注信息
G_OBJ.data_grabBetting = function () {
    return {
        //来源于桌子的信息
        tableIndex: null, //桌子索引
        targetPos: null, //投注区域的位置
        callFunc: null, //确定移动金币到投注区域后的回调
        //来源与玩家的信息
        startPos: null, //金币开始移动的位置
        goldValue: null, //投注的金币实际数值
        goldNum: null, //飞行在场景中的金币数量
        //是否是操作位投注
        isMine: null
    };
};
//押宝显示卡牌信息
G_OBJ.data_grabPokerInfo = function () {
    return {
        pokerInfoList: null, //卡牌信息列表
        pokerResult: null, //这副牌的结果值
        isFlyEffect: null, //是否播放飞行效果
        startPokerIndex: null, //显示的卡牌索引，从第几个开始显示
        callFunc: null };
};
//从大厅进房需要传输的信息
G_OBJ.data_inHomeData = function () {
    return {
        net_inHomeData: null, //进房请求信息
        net_resetHomeData: null };
};
//飞行金币需要的数据
G_OBJ.data_flyGold_playerToTable = function () {
    return {
        tableIndex: null, //投注区域索引
        goldNum: null, //投注飞行的金币数量
        startPos: null, //金币飞行的启示位置
        callFunc: null };
};
//飞行金币回收到玩家需要的数据
G_OBJ.data_flyGold_tableToPlayer = function () {
    return {
        tableIndex: null, //投注区域索引
        goldNum: null, //投注飞行的金币数量
        targetPos: null };
};
//监听玩家自己金币变化的时候传递的信息
G_OBJ.data_nbSelf = function () {
    return {
        balance: null, //余额
        usableBalance: null };
};
//切换页面的插件脚本初始化需要的数据    (contentlist和prefablist需要一一对应)
G_OBJ.data_dialog_exchangePages = function () {
    return {
        leftDealScrollComp: null, //左边滚动层
        leftPrefab: null, //左边选项预制体
        leftContentList: null, //左边选项内容列表
        leftClickFunc: null, //左边的回调，会传入对应的index
        rightDealScrollComp: null, //右边滚动层
        rightPrefabList: null, //右边内容的预制体列表
        isStopSetRightContent: null };
};
//赛事结算信息
G_OBJ.data_matchEnd = function () {
    return {
        pokersInfoList: null, //所有卡牌牌面显示信息
        pokersResultList: null, //所有卡牌结果信息
        othersInfo: null, //其他座位上的玩家信息
        dealerInfo: null, //庄家信息
        myselfInfo: null };
};
//结算的时候自己的信息
G_OBJ.data_selfMatchEndData = function () {
    return {
        changeGold: null, //结算时候改变的金币  (传入的值必须是整数)
        leaveGold: null };
};
//http请求的数据
G_OBJ.data_httpSend = function () {
    return {
        url: null, //路径
        sendData: null, //发送的数据
        callFunc: null, //接收到数据的回调
        xhrType: null };
};

//记录请求时发送的对象
G_OBJ.data_requestRecord = function () {
    return {
        gameId: null, //游戏id
        dateClass: null, //请求哪个时间段的数据  0是当前，1是昨天
        pageSize: null, //请求一页的条目数量
        pageNo: null };
};

cc._RF.pop();
},{}],"Part_dialog_exchangePages":[function(require,module,exports){
"use strict";
cc._RF.push(module, '1766dv+yAxASqrmhL30tIbp', 'Part_dialog_exchangePages');
// Script/Comp_parts/UI/Part_dialog_exchangePages.js

'use strict';

//多页面切换的插件脚本
//定义左边选项按钮的时候，一定需要一个命名为content的label
//这里使用的滚动层都是有绑定dealscroll脚本的
//默认内容的显示，需要在start里面做
cc.Class({
    extends: cc.Component,

    properties: {
        _clickFunc: null, //点击选项后触发的事件
        _leftDealComp: null, //点击选项后触发的事件
        _dict_rightContent: null, //右边的内容
        _list_rightPrefab: null, //右边的预制体集合
        _rightScroll: null, //右边的滚动层
        _rightScrollViewComp: null, //右边的滚动层
        _lastRightContent: null, //右边的上次显示的内容
        _lastIndex: null, //上次点击的选项
        _isRightAutoLimit: null, //是否禁止右边内容自动刷新
        _clickShowLimit: null },

    // use this for initialization
    onLoad: function onLoad() {
        this._leftNormalName = 'normal';
        this._leftChooseName = 'choose';
        this._dict_rightContent = {};
    },

    initData: function initData(dataObj) {
        this._clickShowLimit = false;
        //dataObj = G_OBJ.data_dialog_exchangePages();
        this._initLeftScroll(dataObj);
        //右边的预制体
        this._list_rightPrefab = dataObj.rightPrefabList;
        this._rightScroll = dataObj.rightDealScrollComp.node;
        this._rightScrollViewComp = dataObj.rightDealScrollComp.getScrollView();

        this._isRightAutoLimit = dataObj.isStopSetRightContent;
    },

    showDefault: function showDefault(isReset) {
        if (isReset) this._lastIndex = null;
        this._onClick(null, 0);
    },

    //=======================左边

    _initLeftScroll: function _initLeftScroll(dataObj) {
        if (!dataObj.leftDealScrollComp) return;
        this._leftDealComp = dataObj.leftDealScrollComp;

        var curData = {
            itemPrefab: dataObj.leftPrefab,
            scrollType: G_TYPE.scrollType.vertical
        };
        this._leftDealComp.setData(curData);
        //初始化左边内容
        this._clickFunc = dataObj.leftClickFunc;
        var item,
            contentNode,
            contentList = dataObj.leftContentList;
        for (var i = 0; i < contentList.length; i++) {
            item = this._leftDealComp.getItemByIndex(i);
            if (item) {
                contentNode = item.getChildByName('content');
                if (!contentNode) continue;
                contentNode.getComponent(cc.Label).string = contentList[i];

                this._registerClickEvent(item, this._onClick, this, i);
            }
        }
    },

    _onClick: function _onClick(event, index) {
        if (this._lastIndex == index) return;

        if (this._clickFunc) {
            this._clickFunc(index);
        }

        if (!this._clickShowLimit) this.doneClickShow(index);
    },

    diyClickShow: function diyClickShow() {
        this._clickShowLimit = true;
    },

    doneClickShow: function doneClickShow(index) {
        this._lastIndex = index;
        this._showLeft(index);
        this._showRightContent(index);
    },

    _showLeft: function _showLeft(index) {
        var item = this._leftDealComp.getItemByIndex(index);
        if (item) {
            if (this._lastTouchBtn) {
                this._lastTouchBtn.getChildByName(this._leftChooseName).active = false;
                this._lastTouchBtn = null;
            }
            this._lastTouchBtn = item;
            item.getChildByName(this._leftChooseName).active = true;
        }
    },

    //右边========================================

    //显示选中的右边内容
    _showRightContent: function _showRightContent(index) {
        this._rightScrollViewComp.scrollToTop(0.5);

        if (this._isRightAutoLimit) return;
        if (this._lastRightContent) {
            this._lastRightContent.active = false;
        }

        var rightContent = this._dict_rightContent[index];
        if (!rightContent) {
            rightContent = this._createRightContent(index);
        }
        this._rightScroll.height = rightContent.height;
        rightContent.active = true;
        this._lastRightContent = rightContent;
    },

    //新建一个规则
    _createRightContent: function _createRightContent(index) {
        if (!this._list_rightPrefab[index]) return null;
        var rightContent = cc.instantiate(this._list_rightPrefab[index]);
        rightContent.parent = this._rightScroll;
        this._dict_rightContent[index] = rightContent;
        return rightContent;
    },

    _registerClickEvent: function _registerClickEvent(node, callBack, target, userData) {
        node.on(cc.Node.EventType.TOUCH_START, function (event) {
            GG.audioMgr.playSound(17);
        }, target);
        node.on(cc.Node.EventType.TOUCH_END, function (event) {
            callBack.call(target, event, userData);
        }, target);
        node.on(cc.Node.EventType.TOUCH_CANCEL, function (event) {}, target);
    }

});

cc._RF.pop();
},{}],"Part_playerBlock_Gold":[function(require,module,exports){
"use strict";
cc._RF.push(module, 'b384bgA7DZM6IuGbjtJZqgz', 'Part_playerBlock_Gold');
// Script/Comp_parts/Battle/Part_playerBlock_Gold.js

'use strict';

//在牌局中玩家金币的管理
cc.Class({
    extends: cc.Component,

    properties: {
        _balance: null, //玩家的所有余额
        _usableBalance: null, //玩家的可用余额
        _bettingGoldValue: null, //玩家在本局中投注出去的金额
        _goldValueEX: null, //额外的金币，用于吃瓜群众扣除
        _block: null },

    // use this for initialization
    onLoad: function onLoad() {
        this._part_ui = this.getComponent('Part_playerBlock_UI');

        this._balance = 0;
        this._usableBalance = 0;
        this._bettingGoldValue = 0;
        this._goldValueEX = 0;
    },

    bindBlock: function bindBlock(block) {
        this._block = block;
    },

    addBalance: function addBalance(value) {
        this._balance += value;
        this._block.showGoldValue(this._balance);
    },

    addUsableBalance: function addUsableBalance(value) {
        this._usableBalance += value;
        this._block.showGoldValue(this._usableBalance);
    },

    payBalance: function payBalance(value) {
        this._balance -= value;
        this._block.showGoldValue(this._balance);
    },

    payUsableBalance: function payUsableBalance(value) {
        this._usableBalance -= value;
        this._block.showGoldValue(this._usableBalance);
    },

    setBalance: function setBalance(value) {
        this._balance = value;
        this._block.showGoldValue(this._balance);
    },

    setUsableBalance: function setUsableBalance(value) {
        this._usableBalance = value;
        //this._block.showGoldValue(this._usableBalance);
    },

    getBalance: function getBalance() {
        return this._balance;
    },

    getUsableBalance: function getUsableBalance() {
        return this._usableBalance;
    },

    //已经投注的金额===================================

    setBettingGold: function setBettingGold(value) {
        this._bettingGoldValue = value;
    },
    addBettingGold: function addBettingGold(value) {
        this._bettingGoldValue += value;
    },
    getBettingGold: function getBettingGold() {
        return this._bettingGoldValue;
    },

    //额外计算的金币，用于吃瓜群众==============================

    setGoldValueEX: function setGoldValueEX(value) {
        this._goldValueEX = value;
    },

    addGoldValueEX: function addGoldValueEX(value) {
        this._goldValueEX += value;
    },

    payGoldValueEX: function payGoldValueEX(value) {
        this._goldValueEX -= value;
    },

    getGoldValueEX: function getGoldValueEX() {
        return this._goldValueEX;
    }

});

cc._RF.pop();
},{}],"Platform_Manager":[function(require,module,exports){
"use strict";
cc._RF.push(module, 'c9e2amfcZJE94McrGnyuBWh', 'Platform_Manager');
// Script/Views/Scene_Platform/Platform_Manager.js

'use strict';

//大厅场景管理

cc.Class({
    extends: require('BaseManager'),
    properties: {
        _dict_ui: null, //UI字典
        _richRankData: null, //财富排行榜的信息
        _ui_baseUrl: null, //ui整理的字典
        _roomComp: null, //房间脚本
        _enterRoomCallFunc: null, //进入游戏房间后的回调
        _isFirstEnter: null, //是否第一次进入游戏
        _reConnectNum: null, //重连次数

        comp_uiContainer: {
            'default': null,
            type: require('Obj_uiContainer'),
            displayName: 'UI容器'
        },
        comp_enterBtn: {
            'default': null,
            type: require('Platform_ui_enter'),
            displayName: '房间入口'
        },
        comp_leftRank: {
            'default': null,
            type: require('Platform_leftRank'),
            displayName: '左边列表容器'
        },
        comp_bottomBtns: {
            'default': null,
            type: require('Platform_bottomBtns'),
            displayName: '底部按钮容器'
        },
        comp_topInfo: {
            'default': null,
            type: require('Platform_topInfo'),
            displayName: '大厅顶部信息'
        }
    },

    // use this for initialization
    onLoad: function onLoad() {
        this._super();
        this._ui_baseUrl = 'UI_prefabs/';
        GG.platformMgr = this;
        this._roomNode = false;
        this._isFirstEnter = false;
        this._reConnectNum = 0;
    },

    start: function start() {
        this._initMainScene();

        if (G_Config_common.isLocal) {
            var self = this;
            setInterval(function () {
                if (GG.tipsMgr && !self.getAdIsLimit()) GG.tipsMgr.addNotice('这是一个很长的公告------------------');
            }, 3000);
        }
    },

    _initMainScene: function _initMainScene() {
        if (G_Config_common.isLocal) {
            var self = this;
            setTimeout(function () {
                self.comp_leftRank.setRichData();
                self.showHomeList(false, true);
                // GG.audioMgr.playMusic();
            }, 100);
        } else {
            var self = this;
            this.comp_leftRank.setRichData();
            //设置玩家信息
            this.comp_topInfo.initShow();
            //是否直接跳转到房间列表
            setTimeout(function () {
                var dataObj = GG.getPlayer().getOutHomeData();
                if (dataObj && dataObj.gameType != G_TYPE.gameModule.platform) self.comp_enterBtn.showHomeListFirst(dataObj.gameType, true);else self.showHomeList(false, true);
            }, 100);
        }
    },

    //显示某个UI，传入G_RES_URL里面的UI名字
    openUI: function openUI(uiName, callBack) {
        this.comp_uiContainer.addUI(uiName, callBack);
    },

    //控制房间列表的显隐
    showHomeList: function showHomeList(isOut, isNoEffect) {
        this.comp_enterBtn.moveOutScene(isOut, isNoEffect);
        this.comp_leftRank.moveOutScene(isOut, isNoEffect);
        this.comp_bottomBtns.moveOutScene(isOut, isNoEffect);
        this.comp_topInfo.setHomeListShow(isOut, isNoEffect);
        if (this._roomComp) {
            if (isOut) {
                this._roomComp.showLayer();
                GG.platformMgr.setAdLimit(true);
            } else {
                this._roomComp.hideLayer();
                GG.platformMgr.setAdLimit(false);
            }
        }
    },
    //显示房间列表信息
    setHomeListInfo: function setHomeListInfo(data) {
        this._roomComp.setDataList(data);
    },

    //加载配置文件结束
    _addConfigCallFunc: function _addConfigCallFunc() {
        var table = GG.tableMgr.getTable(G_RES_URL.dict_tablesName.grabConfig);
        if (table) {
            var dataObj = table.getFirstData();
            this._addConfig(G_Config_grab, dataObj);
        }

        var table = GG.tableMgr.getTable(G_RES_URL.dict_tablesName.commonConfig);
        if (table) {
            var dataObj = table.getFirstData();
            this._addConfig(G_Config_common, dataObj);
        }
    },
    //增加配置信息
    _addConfig: function _addConfig(targetObject, addObject) {
        if (addObject) {
            for (var attrName in addObject) {
                targetObject[attrName] = addObject[attrName];
            }
        }
    },

    showRoomUI: function showRoomUI(prefabName, callBack) {
        if (!this._roomComp) {
            var self = this,
                uiComp;
            G_DATA.getRoomListJson(function () {
                cc.loader.loadRes(self._ui_baseUrl + prefabName, function (err, prefab) {
                    if (err) {} else {
                        var uiNode = cc.instantiate(prefab);
                        uiNode.parent = self.comp_bottomBtns.node;
                        uiComp = uiNode.getComponent(prefabName);
                        self._roomComp = uiComp;
                    }
                    if (callBack) {
                        callBack(uiComp);
                        callBack = null;
                    }
                });
            });
        } else {
            if (callBack) {
                callBack(this._roomComp);
                callBack = null;
            }
        }
    },

    //释放房间列表资源
    releaseRoomUI: function releaseRoomUI() {
        var deps = cc.loader.getDependsRecursively(this._ui_baseUrl + 'Prefab_roomList');
        cc.loader.release(deps);
    },

    //进入游戏房间的请求
    requestEnterRoom: function requestEnterRoom(netData, callFunc) {
        this._enterRoomCallFunc = callFunc;
        GG.socketMgr.SendMsg(NetType.s_enterHouse, netData);
        GG.socketMgr.registerLong(NetType.r_enterHouseReturn, this.net_setHomeData.bind(this));
    },

    //接收到进房信息
    net_setHomeData: function net_setHomeData(recvData) {
        if (!recvData) return;
        var tip = recvData.tip;
        if (tip.code != G_TYPE.serverCodeType.success) {
            // console.log(tip.tip);
            //进入房间失败-金币不足
            if (tip.code == G_TYPE.serverCodeType.goldNotEnough) {
                GG.tipsMgr.showConfirmTip_ONE(tip.tip, function () {
                    //显示房间列表
                    //是否直接跳转到房间列表
                    // this._isFirstEnter = false;
                    // this._oneRequestEnd();
                }.bind(this));
                return;
            } else {
                GG.tipsMgr.showConfirmTip_ONE(tip.tip, function () {
                    //进入房间失败
                    if (tip.code == G_TYPE.serverCodeType.matchNoEnd) {
                        //已经开始的比赛未结束

                        //清理hash信息
                        // G_DATA.setCurSceneHash('',0);
                        // GG.exitHome();
                    }
                });
            }
            return;
        }
        var inHomeData = G_OBJ.data_inHomeData();
        inHomeData.net_inHomeData = recvData;
        GG.getPlayer().setInHomeData(inHomeData);
        if (this._enterRoomCallFunc) {
            this._enterRoomCallFunc();
            this._enterRoomCallFunc = null;
        }
    },

    onDestroy: function onDestroy() {
        this._super();
        GG.platformMgr = null;
        // this.releaseRoomUI();
    }

});

cc._RF.pop();
},{"BaseManager":"BaseManager","Obj_uiContainer":"Obj_uiContainer","Platform_bottomBtns":"Platform_bottomBtns","Platform_leftRank":"Platform_leftRank","Platform_topInfo":"Platform_topInfo","Platform_ui_enter":"Platform_ui_enter"}],"Platform_bottomBtns":[function(require,module,exports){
"use strict";
cc._RF.push(module, '25e9d3pzRtN9IL5uJp1EWk8', 'Platform_bottomBtns');
// Script/Views/Scene_Platform/UI/Platform_bottomBtns.js

'use strict';

//底部按钮


cc.Class({
    extends: require('BaseUI'),

    properties: {
        node_buttonContainer: {
            default: null,
            type: cc.Node,
            displayName: '按钮容器'
        },
        node_propContainer: {
            default: null,
            type: cc.Node,
            displayName: '道具容器'
        }
    },

    // use this for initialization
    onLoad: function onLoad() {
        this._registerEvent();
    },

    _registerEvent: function _registerEvent() {
        var btns = this.node_buttonContainer.children;
        for (var i = 0; i < btns.length; i++) {
            btns[i].tag = i;
            this.registerButton(btns[i], this._onClick_touchBtn, this);
        }
    },

    _onClick_touchBtn: function _onClick_touchBtn(event) {
        switch (event.currentTarget.tag) {
            case 0:
                //点击打开公告弹窗
                //GG.platformMgr.showUI('UI_announcement', false);
                var uiName = G_RES_URL.uiName.announcement;
                var layer = GG.platformMgr.openUI(uiName, function (layer) {
                    layer.showLayer();
                });
                break;
            case 1:
                //点击打开规则弹窗
                //GG.platformMgr.showUI('UI_rules', false);
                var uiName = G_RES_URL.uiName.rules;
                GG.platformMgr.openUI(uiName, function (layer) {
                    layer.showLayer();
                });
                break;
            case 2:
                //点击打开记录弹窗
                //GG.platformMgr.showUI('UI_record', false);
                //GG.platformMgr.getRecordData();

                var uiName = G_RES_URL.uiName.record;
                var layer = GG.platformMgr.openUI(uiName, function (layer) {
                    layer.setData();
                });
                break;
            case 3:
                //点击打开帐目弹窗
                var uiName = G_RES_URL.uiName.account;
                var layer = GG.platformMgr.openUI(uiName, function (layer) {
                    layer.setData();
                });
                break;
            default:
                break;
        }
    },

    //移出屏幕外
    moveOutScene: function moveOutScene(isOut, isNoEffect) {
        if (!this.node_buttonContainer._firstBtnPosY) {
            this.node_buttonContainer._firstBtnPosY = -this.node_buttonContainer.y;
        }
        if (isNoEffect) {
            this.node_buttonContainer.y = this.node_buttonContainer._firstBtnPosY - (isOut ? this.node_buttonContainer.height * this.node_buttonContainer.scale : 0);
        } else {
            var time = 0.5;
            this.node_buttonContainer.stopAllActions();
            var targetPos = cc.p(this.node_buttonContainer.x, this.node_buttonContainer._firstBtnPosY);
            if (isOut) targetPos.y = -(this.node_buttonContainer.height * this.node_buttonContainer.scale / 2);
            this.node_buttonContainer.runAction(cc.moveTo(time, targetPos));
        }
        this.node_propContainer.active = !isOut;
    }

});

cc._RF.pop();
},{"BaseUI":"BaseUI"}],"Platform_leftRank":[function(require,module,exports){
"use strict";
cc._RF.push(module, '834471qZIhPe7wXg+6nY9a4', 'Platform_leftRank');
// Script/Views/Scene_Platform/UI/Platform_leftRank.js

'use strict';

//游戏大厅玩家排行榜
var rankType = {
    type1: 1,
    type2: 2
};
cc.Class({
    extends: require('BaseUI'),

    properties: {
        _list_idleFriends: null, //没有显示出来的好友
        _curRankType: null, //当前选中的类型
        _gainsRankData: null, //盈利排行榜的信息
        _firstShowNum: null, //一开始显示的条目数量
        _list_richData: null, //富豪榜信息
        _list_gainsData: null, //盈利榜信息

        _isRichDataFull: null, //是否已经请求到所有的数据
        _isGainsDataFull: null, //是否已经请求到所有的数据
        sprite_listGainOn: {
            default: null,
            type: cc.Sprite,
            displayName: '盈利榜图标'
        },
        sprite_listRichOn: {
            default: null,
            type: cc.Sprite,
            displayName: '富豪榜图标'
        },
        sprite_listRankingBG: {
            default: null,
            type: cc.Sprite,
            displayName: '高亮显示条'
        },
        node_listGainBtn: {
            default: null,
            type: cc.Node,
            displayName: '盈利榜按钮'
        },
        node_listRichBtn: {
            default: null,
            type: cc.Node,
            displayName: '富豪榜按钮'
        },
        comp_itemContainer: {
            default: null,
            type: require('Obj_dealScroll'),
            displayName: '好友排行榜容器'
        },
        prefab_friendItem: {
            default: null,
            type: cc.Prefab,
            displayName: '好友条目'
        },
        label_null: {
            default: null,
            type: cc.Label,
            displayName: '无数据时显示'
        },
        comp_scroll: {
            default: null,
            type: cc.ScrollView,
            displayName: '滚动的容器'
        }
    },

    // use this for initialization
    onLoad: function onLoad() {
        this._itemCompName = 'Obj_rankItem_friend';
        this._firstShowNum = 7;
        this._isRichDataFull = false;
        this._isGainsDataFull = false;
        this.registerButton(this.node_listGainBtn, this.onClick_tabBtn, this, rankType.type1, true);
        this.registerButton(this.node_listRichBtn, this.onClick_tabBtn, this, rankType.type2, true);
        this.comp_scroll.node.on('scroll-to-bottom', this._scrollToBottom, this);
        //初始化滚动层1
        var dataObj = {
            itemPrefab: this.prefab_friendItem
        };
        this.comp_itemContainer.setData(dataObj);
    },

    start: function start() {
        //默认按钮的显示
        // this._curRankType = rankType.type2;
        // this._setRankTitle(this._curRankType);
    },

    //点击切换富豪榜
    onClick_tabBtn: function onClick_tabBtn(event, type) {
        if (this._curRankType != type) {

            switch (type) {
                case rankType.type1:
                    this.setGainData(this._gainsRankData);
                    break;
                case rankType.type2:
                    this.setRichData(this._richRankData);
                    break;
                default:
                    break;
            }
        }
    },
    //设置按钮显示
    _setRankTitle: function _setRankTitle(type) {
        this._curRankType = type;
        var isLeft = false,
            posX;
        switch (type) {
            case rankType.type1:
                //盈利榜
                isLeft = true;
                posX = this.node_listGainBtn.x;
                break;
            case rankType.type2:
                //富豪榜
                posX = this.node_listRichBtn.x;
                break;
        };
        this.sprite_listRankingBG.node.x = posX;
        this.sprite_listGainOn.node.active = isLeft;
        this.sprite_listRichOn.node.active = !isLeft;
    },

    //设置盈利榜数据
    setGainData: function setGainData(dataObj) {
        if (dataObj) {
            this._setRankTitle(rankType.type1);
            this._setNull('');
            this._list_gainsData = dataObj.data.concat([]);

            var infoList = this.comp_itemContainer.getNextPageList(this._list_gainsData, this._firstShowNum);
            this._updateBottom(true, infoList, true);
        } else {
            dataObj = G_DATA.getGainsData();
            if (dataObj) {
                this._gainsRankData = dataObj;
                this.setGainData(this._gainsRankData);
            } else {
                this._setGainsPageData(1);
            }
        }
    },

    //设置富豪榜数据
    setRichData: function setRichData(dataObj) {
        if (dataObj) {
            this._setRankTitle(rankType.type2);
            this._setNull('');
            this._list_richData = dataObj.data.concat([]);

            var infoList = this.comp_itemContainer.getNextPageList(this._list_richData, this._firstShowNum);
            this._updateBottom(false, infoList, true);
        } else {
            dataObj = G_DATA.getRichData();
            if (dataObj) {
                this._richRankData = dataObj;
                this.setRichData(this._richRankData);
            } else {
                this._setRichPageData(1);
            }
        }
    },

    _setGainsPageData: function _setGainsPageData(pageNo, showNum) {
        if (showNum === undefined) showNum = this._firstShowNum;
        var sendData = 'gameId=' + GG.getPlayer().getGameID() + "&pageSize=" + showNum + "&pageNo=" + pageNo;
        GG.httpMgr.sendHttpRequest(G_DIALOG_URL.playerProfitUrl, sendData, function (netData) {
            this._whenRequestDone(pageNo, rankType.type1, netData);
        }.bind(this));
        GG.httpMgr.addLongRequestWait(G_DIALOG_URL.playerProfitUrl, sendData, function (netData) {
            this._whenRequestDone(pageNo, rankType.type1, netData);
        }.bind(this));
    },
    _setRichPageData: function _setRichPageData(pageNo, showNum) {
        if (showNum === undefined) showNum = this._firstShowNum;
        var sendData = "pageSize=" + showNum + "&pageNo=" + pageNo;
        GG.httpMgr.sendHttpRequest(G_DIALOG_URL.playerTreasuresUrl, sendData, function (netData) {
            this._whenRequestDone(pageNo, rankType.type2, netData);
        }.bind(this));
        GG.httpMgr.addLongRequestWait(G_DIALOG_URL.playerTreasuresUrl, sendData, function (netData) {
            this._whenRequestDone(pageNo, rankType.type2, netData);
        }.bind(this));
    },

    _whenRequestDone: function _whenRequestDone(pageNo, targetType, netData) {
        if (pageNo == 1) {
            //是请求第一页
            if (netData) {
                if (!netData.data || netData.data.length < 1 || netData.code == '0') {
                    this.comp_itemContainer.clearItems(-1);
                    this._setNull(netData.msg);
                    this._setRankTitle(targetType);
                } else {
                    if (targetType == rankType.type2) {
                        //富豪排行榜
                        this._addRichNetData(pageNo, netData);
                        this.setRichData(this._richRankData);
                    } else {
                        //盈利排行榜
                        this._addGainsNetData(pageNo, netData);
                        this.setGainData(this._gainsRankData);
                    }
                }
            } else {
                var showItemNum = this.comp_itemContainer.getShowItemNum();
                if (showItemNum < 1) this._setNull();
            }
        } else {
            //不是第一页
            if (!netData) return;

            if (!netData.data || netData.data.length < 1 || netData.code == '0') {
                switch (targetType) {
                    case rankType.type1:
                        this._isGainsDataFull = true;
                        break;
                    case rankType.type2:
                        this._isRichDataFull = true;
                        break;
                    default:
                        break;
                }
            } else {
                if (targetType == rankType.type2) {
                    //富豪排行榜
                    this._addRichNetData(pageNo, netData);
                    if (this._curRankType == rankType.type2) {
                        var infoList = this.comp_itemContainer.getNextPageList(this._list_richData, this._firstShowNum);
                        this._updateBottom(false, infoList, false);
                    }
                } else {
                    //盈利排行榜
                    this._addGainsNetData(pageNo, netData);
                    if (this._curRankType == rankType.type1) {
                        var infoList = this.comp_itemContainer.getNextPageList(this._list_gainsData, this._firstShowNum);
                        this._updateBottom(false, infoList, false);
                    }
                }
            }
        }
    },
    _addGainsNetData: function _addGainsNetData(pageNo, netData) {
        if (!this._gainsRankData) this._gainsRankData = netData;else {
            var curItemNum = this._gainsRankData.data.length;
            var curPageNo = this.comp_itemContainer.getPageNoByNum(curItemNum, this._firstShowNum);
            if (pageNo < curPageNo) return;
            //列表数值叠加
            this._gainsRankData.data = this._gainsRankData.data.concat(netData.data);
            this._list_gainsData = netData.data;
            if (netData.data.length < this._firstShowNum) {
                //已经请求完所有的数据
                this._isGainsDataFull = true;
            }
        }
        G_DATA.setGainsData(this._gainsRankData);
    },
    _addRichNetData: function _addRichNetData(pageNo, netData) {
        if (!this._richRankData) this._richRankData = netData;else {
            var curItemNum = this._richRankData.data.length;
            var curPageNo = this.comp_itemContainer.getPageNoByNum(curItemNum, this._firstShowNum);
            if (pageNo < curPageNo) return;
            //列表数值叠加
            this._richRankData.data = this._richRankData.data.concat(netData.data);
            this._list_richData = netData.data;
            if (netData.data.length < this._firstShowNum) {
                //已经请求完所有的数据
                this._isRichDataFull = true;
            }
        }
        G_DATA.setRichData(this._richRankData);
    },

    //当scroll滚动到底边  isRestart : 是否从第一个开始
    _updateBottom: function _updateBottom(isGain, infoList, isRestart) {
        var item,
            comp,
            index = 0,
            playerInfo,
            itemNum = this.comp_itemContainer.getShowItemNum();
        if (isRestart) itemNum = 0;
        for (var i = itemNum; i < itemNum + this._firstShowNum; i++) {
            playerInfo = infoList[index];
            if (!playerInfo) {
                //如果没有玩家数据则终止，不要出现断层
                break;
            }
            item = this.comp_itemContainer.getItemByIndex(i);
            if (item) {
                comp = item.getComponent(this._itemCompName);
                comp.init(isGain, i, playerInfo);
            }
            index += 1;
        }
        //如果是第一页，需要将多余的条目清理
        if (isRestart) {
            this.comp_itemContainer.clearItems(infoList.length - 1);
            this._scrollToUp();
        }
    },

    //当玩家滚动到底部
    _scrollToBottom: function _scrollToBottom(event) {
        var infoList, isGain, itemNum;
        switch (this._curRankType) {
            case rankType.type1:
                isGain = true;
                infoList = this.comp_itemContainer.getNextPageList(this._list_gainsData, this._firstShowNum);
                itemNum = this._gainsRankData.data.length;
                break;
            case rankType.type2:
                isGain = false;
                infoList = this.comp_itemContainer.getNextPageList(this._list_richData, this._firstShowNum);
                itemNum = this._richRankData.data.length;
                break;
            default:
                break;
        }
        if (infoList && infoList.length > 0) {
            this._updateBottom(isGain, infoList);
        } else if (itemNum < 50) {
            //请求接下去的排行榜数据
            var pageNo = this.comp_itemContainer.getPageNoByNum(itemNum + 1, this._firstShowNum);
            switch (this._curRankType) {
                case rankType.type1:
                    if (!this._isGainsDataFull) this._setGainsPageData(pageNo, 50 - itemNum);
                    break;
                case rankType.type2:
                    if (!this._isRichDataFull) this._setRichPageData(pageNo, 50 - itemNum);
                    break;
                default:
                    break;
            }
        }
    },
    //视图内容将在规定时间内滚动到视图顶部。
    _scrollToUp: function _scrollToUp() {
        this.comp_scroll.scrollToTop(0.2);
    },

    _setNull: function _setNull(msg) {
        if (Object.prototype.toString.call(msg) !== '[object String]') {
            msg = 'request timeout!';
        }
        this.label_null.string = msg;
    },

    //==============================================

    //移出屏幕外
    moveOutScene: function moveOutScene(isOut, isNoEffect) {
        if (!this._firstPosX) this._firstPosX = -this.node.x;
        var outX = cc.visibleRect.width * 0.3 + this._firstPosX;
        if (isNoEffect) {
            var rightW = this.node.width * this.node.scale / 2;
            this.node.x = isOut ? -outX : this._firstPosX;
            this.setFrameHide(isOut);
        } else {
            this.node.active = true;
            var time = 0.5;
            this.node.stopAllActions();
            var targetPos = cc.p(this._firstPosX, this.node.y);
            if (isOut) targetPos.x = -outX;
            var self = this;
            this.node.runAction(cc.sequence(cc.moveTo(time, targetPos), cc.callFunc(function () {
                self.setFrameHide(isOut);
            })));
        }
    },

    setFrameHide: function setFrameHide(isOut) {
        this.node.active = !isOut;
    }

});

cc._RF.pop();
},{"BaseUI":"BaseUI","Obj_dealScroll":"Obj_dealScroll"}],"Platform_topInfo":[function(require,module,exports){
"use strict";
cc._RF.push(module, '94707lnJddKIpBS9jaL9Sif', 'Platform_topInfo');
// Script/Views/Scene_Platform/UI/Platform_topInfo.js

'use strict';

//游戏大厅中玩家信息
cc.Class({
    extends: require('AutoDealing'),

    properties: {
        node_head: {
            default: null,
            type: cc.Node,
            displayName: '头像'
        },
        label_name: {
            default: null,
            type: cc.Label,
            displayName: '昵称'
        },
        label_coin: {
            default: null,
            type: cc.Label,
            displayName: '金币'
        },
        node_exit: {
            default: null,
            type: cc.Node,
            displayName: '退出按钮'
        },
        node_back: {
            default: null,
            type: cc.Node,
            displayName: '返回按钮'
        },
        node_setting: {
            default: null,
            type: cc.Node,
            displayName: '设置按钮'
        }
    },

    // use this for initialization
    onLoad: function onLoad() {
        this._registerButton();
        this.node.active = false;
    },

    _registerButton: function _registerButton() {
        this.registerButton(this.node_exit, this.onClick_exit, this);
        this.registerButton(this.node_back, this.onClick_back, this);
        this.registerButton(this.node_setting, this.onClick_setting, this);
        //增加对玩家身上金币的监听
        this._listenerName = GG.Listener.registerFunc(G_TYPE.globalListener.playerGold, this.on_goldChange.bind(this));
    },

    //退出游戏
    onClick_exit: function onClick_exit(event) {
        GG.tipsMgr.showConfirmTip_TWO(G_CHINESE.exitText2, function () {
            //确认退出
            GG.exitGame();
        });
    },
    //返回主场景
    onClick_back: function onClick_back(event) {
        GG.platformMgr.showHomeList(false);
    },
    //系统设置
    onClick_setting: function onClick_setting(event) {
        //GG.audioMgr.playMusic('gameLose');
        var layer = GG.platformMgr.openUI(G_RES_URL.uiName.systemSet, function (layer) {
            layer.setData();
        });
        //if(G_Config_common.isLocal){
        //    var data = {'music':true,'sound':true};
        //    if(GG.getPlayer().getSystemSet()) data = GG.getPlayer().getSystemSet();
        //    //console.log(data);
        //    var layer = GG.platformMgr.openUI(G_RES_URL.uiName.systemSet);
        //    layer.setData(data);
        //}else{
        //    //获取玩家系统设置
        //    if(!GG.getPlayer().getSystemSet()){
        //        var sendData = null;
        //        GG.httpMgr.sendHttpLogin(G_DIALOG_URL.loginToSetUrl, sendData, function (data) {
        //            GG.getPlayer().setSystemSet(data[0]);
        //            var layer = GG.platformMgr.openUI(G_RES_URL.uiName.systemSet);
        //            layer.setData(data[0]);
        //        }.bind(this));
        //    }else {
        //        var layer = GG.platformMgr.openUI(G_RES_URL.uiName.systemSet);
        //        layer.setData(GG.getPlayer().getSystemSet());
        //    }
        //}
    },
    //监听金币的变化
    on_goldChange: function on_goldChange(listenerName, dataObj) {
        if (this.label_coin) this.label_coin.string = GG.getPlayer().getPlayerGold();
    },

    initShow: function initShow() {
        var jsonData = GG.getPlayer().getBaseInfo();
        if (jsonData) {
            G_TOOL.setHeadImg(this.node_head, jsonData.avatarUrl);
            this._setName(jsonData.nickname);
            this.label_coin.string = GG.getPlayer().getPlayerGold();
        }
    },

    //显示房间列表的时候，返回按钮需要改变
    setHomeListShow: function setHomeListShow(isShow) {
        if (!this.node.active) this.node.active = true;
        this.node_exit.active = !isShow;
        this.node_back.active = isShow;
    },
    //设置名字
    _setName: function _setName(name) {
        if (!name) name = '';
        this.label_name.string = G_TOOL.getNameLimit(name, 12);
    },

    onDestroy: function onDestroy() {
        GG.Listener.delListen(G_TYPE.globalListener.playerGold, this._listenerName);
    }

});

cc._RF.pop();
},{"AutoDealing":"AutoDealing"}],"Platform_ui_enter":[function(require,module,exports){
"use strict";
cc._RF.push(module, 'f10c7FbLoVAZ7LCP0U5t4AP', 'Platform_ui_enter');
// Script/Views/Scene_Platform/UI/Platform_ui_enter.js

'use strict';

//显示所有入口动画的UI

cc.Class({
    extends: require('BaseUI'),
    properties: {
        _roomPrefabName: null, //房间节点名称
        _isTouchLimit: null, //是否有点击限制

        node_bull100: {
            default: null,
            type: cc.Node,
            displayName: '百人大战'
        },
        node_grab: {
            default: null,
            type: cc.Node,
            displayName: '押宝大战'
        }
    },

    // use this for initialization
    onLoad: function onLoad() {
        this._registerButton(this.node_bull100, this._btn_clickEnter, this, G_TYPE.gameModule.bull100);
        this._registerButton(this.node_grab, this._btn_clickEnter, this, G_TYPE.gameModule.grab);
        this._roomPrefabName = 'Prefab_roomList';
    },

    _btn_clickEnter: function _btn_clickEnter(target, enterType) {
        if (this._isTouchLimit) return;
        this.showHomeList(enterType);
    },
    // _showTip : function (content) {
    //     if(!this._tip){
    //         var cNode = new cc.Node();
    //         this._tip = cNode.addComponent(cc.Label);
    //         cNode.parent = this.node;
    //         cNode.color = cc.Color.RED;
    //     }
    //     this._tip.string = content;
    // },

    showHomeList: function showHomeList(enterType, isNoEffect) {
        var self = this;
        GG.topTouchLayer.showNetRequest();
        GG.platformMgr.showRoomUI(self._roomPrefabName, function (roomComp) {
            if (roomComp) {
                if (G_Config_common.isLocal) {
                    GG.topTouchLayer.closeNetRequest();
                    var netData = self._getLocalData(enterType);
                    netData.enterType = enterType;
                    GG.platformMgr.showHomeList(true, isNoEffect);
                    GG.platformMgr.setHomeListInfo(netData);
                } else {
                    self._sendRoomListRequest(enterType, isNoEffect);
                }
            }
        });
    },

    //请求房间列表参数
    _sendRoomListRequest: function _sendRoomListRequest(enterType, isNoEffect) {
        var gameModel;
        switch (enterType) {
            case G_TYPE.gameModule.bull100:
                gameModel = G_TYPE.net_gameModule2.bull100;
                break;
            case G_TYPE.gameModule.grab:
                gameModel = G_TYPE.net_gameModule2.grab;
                break;
            case G_TYPE.gameModule.classic:
                gameModel = G_TYPE.net_gameModule2.classic;
            default:
                break;
        }
        GG.httpMgr.sendHttpRequest(G_DIALOG_URL.gameRoomListUrl, 'gameModel=' + gameModel, function (data) {
            if (data) {
                data.enterType = enterType;
                GG.platformMgr.showHomeList(true, isNoEffect);
                GG.platformMgr.setHomeListInfo(data);
            }
        }.bind(this));
    },

    _getLocalData: function _getLocalData(enterType) {
        var netData = {};
        netData.enterType = enterType;
        netData.data = [];
        var interval = 2;
        for (var i = 0; i < 6; i++) {
            var roomInfo = {
                id: i + 1, //房间ID
                minLimitPlayerBlance: 1000, //最大人数上限
                currentPlayerCount: i * 50 };
            var rowNum = Math.ceil(roomInfo.id / interval);
            roomInfo.minLimitPlayerBlance += rowNum * 1000;
            netData.data.push(roomInfo);
        }
        return netData;
    },

    //==================================

    //从游戏房间返回大厅，需要先显示房间列表
    showHomeListFirst: function showHomeListFirst(enterType, isNoEffect) {
        // GG.platformMgr.showHomeList(true, isNoEffect);
        this.showHomeList(enterType, isNoEffect);
    },
    _registerButton: function _registerButton(node, callBack, target, userData, isNoScale) {
        //if(!this._list_registerBtn) this._list_registerBtn = [];
        var self = this;
        node._isTouchEnabledEx = true;
        //this._list_registerBtn.push([node, callBack, target]);
        node.on(cc.Node.EventType.TOUCH_START, function (event) {
            //if(event.target._isTouchEnabledEx) event.target.scale = G_Config_classic.scale_buttonTouch;
            var aniNode = event.target.children[0];
            if (event.target._isTouchEnabledEx && !isNoScale) {
                self._setAniPause(aniNode, true);
                event.target.scale = 1.1;
                GG.audioMgr.playSound(17);
            }
        }, target);
        node.on(cc.Node.EventType.TOUCH_END, function (event) {
            var aniNode = event.target.children[0];
            event.target.scale = 1;
            self._setAniPause(aniNode, false);
            if (event.target._isTouchEnabledEx) callBack.call(target, event, userData);
        }, target);
        node.on(cc.Node.EventType.TOUCH_CANCEL, function (event) {
            var aniNode = event.target.children[0];
            self._setAniPause(aniNode, false);
            event.target.scale = 1;
        }, target);
    },

    _setAniPause: function _setAniPause(node, isPause) {
        var comp = node.getComponent(dragonBones.ArmatureDisplay);
        if (isPause) {
            comp._lastTimeScale = comp.timeScale;
            comp.timeScale = 0.01;
        } else {
            if (comp._lastTimeScale) comp.timeScale = comp._lastTimeScale;
        }
    },
    _resumeAni: function _resumeAni(node) {},

    //移出屏幕外
    moveOutScene: function moveOutScene(isOut, isNoEffect) {
        if (!this._firstPosX) this._firstPosX = this.node.x;
        var designSize = cc.sys.isMobile ? cc.view.getDesignResolutionSize() : cc.visibleRect;
        if (isNoEffect) {
            this.node.x = isOut ? this._firstPosX : designSize.width * 2 - this._firstPosX;
            this.setFrameHide(isOut);
        } else {
            this._isTouchLimit = true;
            this.node.active = true;
            var time = 0.5;
            this.node.stopAllActions();
            var targetPos = cc.p(designSize.width * 2 - this._firstPosX, this.node.y);
            if (isOut) targetPos.x = this._firstPosX;
            var self = this;
            this.node.runAction(cc.sequence(cc.moveTo(time, targetPos), cc.callFunc(function () {
                self._isTouchLimit = false;
                self.setFrameHide(isOut);
            })));
        }
    },

    setFrameHide: function setFrameHide(isOut) {
        this.node.active = !isOut;
    }
});

cc._RF.pop();
},{"BaseUI":"BaseUI"}],"Prefab_dialog_account":[function(require,module,exports){
"use strict";
cc._RF.push(module, '16c16qbJrVKdriJTtyWvtmd', 'Prefab_dialog_account');
// Script/Views/UIComponents/Prefab_dialog_account.js

'use strict';

//玩家账目界面

var sendObj = {
    gameId: 1,
    dateClass: 0,
    pageSize: 20,
    pageNow: 0
};

cc.Class({
    extends: require('BaseDialog'),

    properties: {
        _lastTouchBtn: null, //上次点击的按钮
        _dict_cacheData: null, //缓存数据
        _firstShowNum: null, //首次显示的条目数
        _curDateClass: null, //当前显示的数据时间,比如当天
        _dict_listFull: null, //某天数据是否已经全部请求

        label_null: {
            default: null,
            type: cc.Label,
            displayName: '无数据时显示'
        },
        comp_scroll: {
            default: null,
            type: cc.ScrollView,
            displayName: '滚动的容器'
        }
    },

    // use this for initialization
    onLoad: function onLoad() {
        this._super();
        this._firstShowNum = 6;
        this.comp_scroll.node.on('scroll-to-bottom', this._scrollToBottom, this);

        this._dealerItemCompName = 'Obj_dialogAccountCell';
        this._dict_cacheData = {};
        this._dict_listFull = {};
        //初始右边的条目容器
        var dataObj = {
            itemPrefab: this.prefab_item,
            scrollType: G_TYPE.scrollType.vertical
        };
        this.comp_itemContainer.setData(dataObj);

        //切换页面管理需要的数据
        this._comp_exchangPages = this.getComponent('Part_dialog_exchangePages');

        var dataObj = G_OBJ.data_dialog_exchangePages();
        dataObj.leftDealScrollComp = this.comp_leftBtnContainer;
        dataObj.leftPrefab = this.prefab_leftButton;
        dataObj.leftContentList = G_CHINESE.exchangePageLeft;
        dataObj.leftClickFunc = this.onClick_leftBtn.bind(this);
        dataObj.rightDealScrollComp = this.comp_itemContainer;
        dataObj.isStopSetRightContent = true;
        //dataObj.rightPrefabList = [this.prefab_introduce, this.prefab_bull100, this.prefab_grab];
        this._comp_exchangPages.initData(dataObj);
        this._comp_exchangPages.diyClickShow();
    },

    //隐藏界面的时候清理缓存
    hideLayer: function hideLayer() {
        this._super();
        this._resetCache();
    },

    setData: function setData() {
        this._comp_exchangPages.showDefault(true);
    },

    //点击左边的选项按钮
    onClick_leftBtn: function onClick_leftBtn(type) {
        if (G_Config_common.isLocal) {
            this.showLayer();
            this._updateBottom(this._getLocalData(), true);
            this._comp_exchangPages.doneClickShow(type);
            return;
        }
        this._getDataByDate(type, 1, function (infoList) {
            this.showLayer();
            this._curDateClass = type;
            this._comp_exchangPages.doneClickShow(type);
            this._updateBottom(infoList, true);
        }.bind(this));
    },

    //发送账目的请求
    _sendRequest: function _sendRequest(dateClass, pageNo, callFunc) {
        if (this._dict_listFull[dateClass]) return;
        var sendObj = G_OBJ.data_requestRecord();
        sendObj.gameId = GG.getPlayer().getGameID();
        sendObj.dateClass = dateClass;
        sendObj.pageSize = this._firstShowNum;
        sendObj.pageNo = pageNo;

        //gameId ： 属于那款游戏； dateClass：日期（0是当天,1,2）；pageSize：当前页面条目总数；pageNow：第几页；
        var sendStr = "gameId=" + sendObj.gameId + "&dateClass=" + sendObj.dateClass + "&pageSize=" + sendObj.pageSize + "&pageNo=" + sendObj.pageNo;
        GG.httpMgr.sendHttpRequest(G_DIALOG_URL.accountUrl, sendStr, function (data) {
            if (data) {
                var infoList = this._cacheNetData(dateClass, data);
                if (callFunc) callFunc(infoList);
            }
        }.bind(this));
    },

    //获取数据
    _getDataByDate: function _getDataByDate(dateClass, pageNo, callFunc) {
        var needData = this._dict_cacheData[dateClass];
        if (needData) {
            var infoList = [];
            if (this._dict_cacheData[dateClass].data) {
                var allCacheList = this._dict_cacheData[dateClass].data.datas.concat([]);
                infoList = allCacheList.splice(this._firstShowNum * (pageNo - 1), this._firstShowNum);
            }
            if (Object.prototype.toString.call(infoList) === '[object Array]') {
                if (callFunc) callFunc(infoList);
            } else {
                this._requestNetData(dateClass, pageNo, callFunc);
            }
        } else {
            this._sendRequest(dateClass, pageNo, callFunc);
        }
    },

    //============================

    _resetCache: function _resetCache() {
        this._dict_cacheData = {};
        this._dict_listFull = {};
    },

    //缓存列表
    _cacheNetData: function _cacheNetData(dateClass, netData) {
        var dataList = [];
        if (netData.code != 1 || !netData.data.datas) {
            // this._noneTip = netData.msg;
        } else {
            dataList = netData.data.datas;
            if (this._dict_cacheData[dateClass]) {
                this._dict_cacheData[dateClass].code = netData.code;
                if (this._dict_cacheData[dateClass].data) {
                    this._dict_cacheData[dateClass].data.datas = this._dict_cacheData[dateClass].data.datas.concat(dataList);
                } else {
                    this._dict_cacheData[dateClass].data = netData.data;
                }
            }
        }
        if (!this._dict_cacheData[dateClass]) this._dict_cacheData[dateClass] = netData;
        return dataList;
    },

    //当玩家滚动到底部
    _scrollToBottom: function _scrollToBottom(event) {
        var self = this;
        var showItemNum = this.comp_itemContainer.getShowItemNum();
        this._getDataByDate(this._curDateClass, this.comp_itemContainer.getPageNoByNum(showItemNum + 1, this._firstShowNum), function (infoList) {
            self._updateBottom(infoList);
        });
    },

    //当scroll滚动到底边  isRestart : 是否从第一个开始
    _updateBottom: function _updateBottom(infoList, isRestart) {
        var item,
            comp,
            index = 0,
            playerInfo,
            itemNum = this.comp_itemContainer.getShowItemNum(),
            infoLen = infoList.length;
        if (isRestart) itemNum = 0;
        for (var i = itemNum; i < itemNum + this._firstShowNum; i++) {
            playerInfo = infoList[index];
            if (!playerInfo) {
                //如果没有玩家数据则终止，不要出现断层
                break;
            }
            item = this.comp_itemContainer.getItemByIndex(i);
            if (item) {
                comp = item.getComponent(this._dealerItemCompName);
                comp.setData(playerInfo);
            }
            index += 1;
        }
        //如果是第一页，需要将多余的条目清理
        if (isRestart) {
            this.comp_itemContainer.clearItems(infoLen - 1);
            this._scrollToUp();
            if (infoLen < 1) this._setNull(this._dict_cacheData[this._curDateClass].msg);else this._setNull('');
        }
        //检测该页数据是否满值
        if (infoLen < this._firstShowNum) {
            this._dict_listFull[this._curDateClass] = true;
        }
    },

    //视图内容将在规定时间内滚动到视图顶部。
    _scrollToUp: function _scrollToUp() {
        this.comp_scroll.scrollToTop(0.2);
    },

    //做空的显示
    _setNull: function _setNull(msg) {
        if (Object.prototype.toString.call(msg) !== '[object String]') {
            msg = 'request timeout!';
        }
        this.label_null.string = msg;
    },

    _getLocalData: function _getLocalData() {
        var curList = [];
        for (var i = 0; i < 6; i++) {
            var curObj = {
                'completiontime': '2007/1/1',
                transactiontype: cc.random0To1() > 0.5 ? 'DEPOSIT' : '',
                transactionmoney: (i + 1) * (cc.random0To1() > 0.5 ? 1 : -1),
                balance: i
            };
            curList.push(curObj);
        }
        return curList;
    }

});

cc._RF.pop();
},{"BaseDialog":"BaseDialog"}],"Prefab_dialog_announcement":[function(require,module,exports){
"use strict";
cc._RF.push(module, '0a979XuE+1DBZdWzYrxkmwc', 'Prefab_dialog_announcement');
// Script/Views/UIComponents/Prefab_dialog_announcement.js

'use strict';

//公告弹窗界面
cc.Class({
    extends: require('BaseDialog'),

    properties: {
        _lastTouchBtn: null, //上次点击的按钮
        _list_prefabs: null, //所有预制体
        prefab_versionAnnouncement: {
            default: null,
            type: cc.Prefab,
            displayName: '版本公告预制体'
        },
        prefab_officialDescAnnouncement: {
            default: null,
            type: cc.Prefab,
            displayName: '官方说明预制体'
        }
    },

    // use this for initialization
    onLoad: function onLoad() {
        this._super();

        this._comp_exchangPages = this.getComponent('Part_dialog_exchangePages');

        var dataObj = G_OBJ.data_dialog_exchangePages();
        dataObj.leftDealScrollComp = this.comp_leftBtnContainer;
        dataObj.leftPrefab = this.prefab_leftButton;
        dataObj.leftContentList = ['版本公告', '官方说明'];
        dataObj.leftClickFunc = null;
        dataObj.rightDealScrollComp = this.comp_itemContainer;
        dataObj.rightPrefabList = [this.prefab_versionAnnouncement, this.prefab_officialDescAnnouncement];
        this._comp_exchangPages.initData(dataObj);
    },

    start: function start() {
        this._comp_exchangPages.showDefault(true);
    }

});

cc._RF.pop();
},{"BaseDialog":"BaseDialog"}],"Prefab_dialog_bull100Trend":[function(require,module,exports){
"use strict";
cc._RF.push(module, '925ecqVmzFC678Qg63jFlDO', 'Prefab_dialog_bull100Trend');
// Script/Views/UIComponents/Prefab_dialog_bull100Trend.js

'use strict';

//百人走势图


cc.Class({
    extends: require('BaseDialog'),

    properties: {},

    // use this for initialization
    onLoad: function onLoad() {
        this._super('UI_trend');
        this._setScrollData();
    },

    _setScrollData: function _setScrollData() {
        this._itemCompName = 'Obj_cell_trend';
        var dataObj = {
            itemPrefab: this.prefab_item,
            scrollType: G_TYPE.scrollType.vertical
        };
        this.comp_itemContainer.setData(dataObj);
    },

    setData: function setData(homeID) {
        if (G_Config_common.isLocal) {
            var netData = this._getLocalData();
            console.log(netData);
            this._setNetData(netData);
        } else {
            var moduleType;
            switch (GG.getGameType()) {
                case G_TYPE.gameModule.bull100:
                    moduleType = G_TYPE.http_gameModule.bull100;
                    break;
                case G_TYPE.gameModule.grab:
                    moduleType = G_TYPE.http_gameModule.grab;
                    break;
                case G_TYPE.gameModule.classic:
                    moduleType = G_TYPE.http_gameModule.classic;
                    break;
                default:
                    moduleType = 1;
                    break;
            }
            var sendData = 'gameModelId=' + moduleType + '&gameRoomId=' + homeID;
            GG.httpMgr.sendHttpRequest(G_DIALOG_URL.trendUrl, sendData, function (data) {
                if (data) {
                    this._setNetData(data);
                }
            }.bind(this));
        }
    },

    _setNetData: function _setNetData(data) {
        this.showLayer();
        var needList = [];
        var mathList;
        var dataList = data.data;
        if (!dataList) {
            //没有数据
            // data.msg
        } else {
            for (var i = 0; i < dataList.length; i++) {
                if (!needList[i]) needList[i] = [];
                mathList = dataList[i].matchResult;
                if (mathList) {
                    for (var j = 0; j < mathList.length; j++) {
                        needList[i].push([mathList[j]['itemType'], mathList[j]['outcome']]);
                    }
                }
            }
            this._showList(needList);
        }
    },

    _showList: function _showList(dataList) {
        var data, item, comp; //走势图显示条目为5
        for (var i = 0; i < G_Config_common.showTrendItems; i++) {
            data = dataList[i];
            if (data) {
                item = this.comp_itemContainer.getItemByIndex(i);
                if (item) {
                    comp = item.getComponent(this._itemCompName);
                    comp.setData(data);
                }
            }
        }
        this.comp_itemContainer.clearItems(i);
    },

    hideLayer: function hideLayer() {
        this._super();
    },

    _getLocalData: function _getLocalData() {
        var netData = {};
        netData.data = G_TOOL.getRandomBool() ? null : [];
        if (netData.data) {
            var showNum = cc.random0To1() * 10;
            for (var i = 0; i < showNum; i++) {
                var info = {
                    matchResult: this._getMatchResult()
                };
                netData.data.push(info);
            }
            netData.msg = '';
        } else netData.msg = 'request error';
        return netData;
    },

    _getMatchResult: function _getMatchResult() {
        var needList = [];
        var typeList = ['SPADE', 'DIAMOND', 'CLUB', 'HEART'];
        for (var i = 0; i < G_TOOL.getRandomArea(0, 4); i++) {
            var info = {
                'itemType': typeList[G_TOOL.getRandomArea(0, 3)],
                'outcome': G_TOOL.getRandomBool() ? 1 : 0
            };
            needList.push(info);
        }
        return needList;
    }

});

cc._RF.pop();
},{"BaseDialog":"BaseDialog"}],"Prefab_dialog_dealerList":[function(require,module,exports){
"use strict";
cc._RF.push(module, 'd94ba+GJL9EE60oQvN313Hn', 'Prefab_dialog_dealerList');
// Script/Views/UIComponents/Prefab_dialog_dealerList.js

'use strict';

//上庄列表的界面


cc.Class({
    extends: require('BaseDialog'),

    properties: {
        _minDealerGold: null, //最小上庄金额

        node_bottomBtns: {
            default: null,
            type: cc.Node,
            displayName: '按钮容器'
        },
        node_goldTip: {
            default: null,
            type: cc.Node,
            displayName: '金币限制提示'
        },
        comp_goldSlider: {
            default: null,
            type: require('Obj_dealerListSlider'),
            displayName: '进度条'
        }
    },

    // use this for initialization
    onLoad: function onLoad() {
        this._super('UI_dealerList');
        this._dealerItemCompName = 'Obj_dealerListCell';
        this._moneyFormat = '<color=#FFFD61>%s</c>';
        this._limitText = [G_CHINESE.dealerGoldText1, G_CHINESE.dealerGoldText2, G_CHINESE.dealerGoldText3, G_CHINESE.dealerGoldText4];
        this._changeInterval = G_Config_bull100.dealerSliderInterval;

        this._registerEvent();
        this._initDealerList();
    },

    start: function start() {},

    setData: function setData(dataObj) {
        this._minDealerGold = GG.bull100Mgr.getMinDealerGold();
        var myGold = dataObj.myGold;
        var dealerInfo = dataObj.dealerInfo;
        //var myMaxDealerGold = dealerInfo.maxDealerCoin;
        var myselfID = GG.getPlayerID();
        var isInDealerList = false; //玩家自己在上庄列表
        var rankList = dataObj.rankList;
        if (!rankList) rankList = [];
        var dataList = [],
            playerData,
            isDealer,
            myRankNum = '';
        for (var i = 0; i < rankList.length; i++) {
            playerData = rankList[i];
            isDealer = false;

            if (playerData.playerId == dealerInfo.playerId) {
                dealerInfo = null;
                isDealer = true;
                dataList.splice(0, 0, {
                    headImg: playerData.icon,
                    name: playerData.nickname,
                    gold: playerData.usableBalance,
                    isDealer: isDealer
                });
            } else {
                dataList.push({
                    headImg: playerData.icon,
                    name: playerData.nickname,
                    gold: playerData.usableBalance,
                    isDealer: isDealer
                });
            }
            if (playerData.playerId == myselfID) {
                isInDealerList = true;
                myRankNum = i + 1;
            }
        }
        if (dealerInfo) {
            dataList.splice(0, 0, {
                headImg: dealerInfo.icon,
                name: dealerInfo.nickname,
                gold: dealerInfo.usableBalance,
                isDealer: true
            });
            if (dealerInfo.playerId == myselfID) {
                isDealer = true;
                isInDealerList = true;
            }
        }

        this.setBtnShow(isInDealerList, isDealer);
        this._setDealerList(dataList);

        var offGold = this._changeInterval;
        if (isInDealerList) {
            //在上庄列表
            this.comp_goldSlider.setData(myGold, offGold, offGold);
            if (isDealer) {
                this._showDownTip(this._limitText[2]);
            } else {
                //在排队中
                this._showDownTip(G_TOOL.formatStr(this._limitText[3], myRankNum));
            }
        } else {
            //不在上庄列表
            this.comp_goldSlider.setData(myGold, offGold, this._minDealerGold);

            if (myGold < this._minDealerGold) {
                //金币不足，无法上庄
                this._showDownTip(this._limitText[1], this._minDealerGold);
                this.setBtnEnable(this.node_bottomBtns.children[1], false);
            } else {
                //金币足够
                this._showDownTip(this._limitText[0], this._minDealerGold);
                this.setBtnEnable(this.node_bottomBtns.children[1], true);
            }
        }
    },

    _registerEvent: function _registerEvent() {
        var btns = this.node_bottomBtns.children;
        for (var i = 0; i < btns.length; i++) {
            btns[i].tag = i;
            this.registerButton(btns[i], this._onClick_dealerBtnsr, this);
        }
    },
    hideLayer: function hideLayer(event) {
        this._super();
    },
    _onClick_dealerBtnsr: function _onClick_dealerBtnsr(event) {
        switch (event.currentTarget.tag) {
            case 0:
                //续庄
                GG.bull100Mgr.commitContinueDealer(this.comp_goldSlider.getMoveNum());
                break;
            case 1:
                //上庄
                GG.bull100Mgr.send_upDealer(this.comp_goldSlider.getMoveNum());
                break;
            case 2:
                //下庄
                GG.bull100Mgr.send_downDealer();
                break;
            default:
                break;
        }
        //cc.eventManager.pauseTarget(this.comp_goldSlider.node, true);
    },

    //初始化庄家列表
    _initDealerList: function _initDealerList() {
        var dataObj = {
            itemPrefab: this.prefab_item
        };
        this.comp_itemContainer.setData(dataObj);
    },
    //设置列表内容
    _setDealerList: function _setDealerList(dataList) {
        var item,
            comp,
            i = 0;
        for (i = 0; i < dataList.length; i++) {
            item = this.comp_itemContainer.getItemByIndex(i);
            if (item) {
                comp = item.getComponent(this._dealerItemCompName);
                comp.setData(dataList[i]);
            }
        }
        this.comp_itemContainer.clearItems(i - 1);
    },

    //===================================

    //设置上庄金额限制提示
    setGoldLimitTip: function setGoldLimitTip(myGold, minDealerGold) {
        var str;
        if (myGold > minDealerGold) {
            str = this._limitText[0];
        } else {
            str = this._limitText[1];
        }
        this.node_goldTip.getComponent(cc.Label).string = str;
    },

    //根据是否已经在庄家列表来判定按钮的显隐
    setBtnShow: function setBtnShow(isMyDealer, isDealer) {
        var btns = this.node_bottomBtns.children;
        btns[0].active = isMyDealer || isDealer; //我要续庄
        btns[1].active = !(isMyDealer || isDealer); //我要上庄
        btns[2].active = isMyDealer || isDealer; //我要下庄
    },

    //上庄成功
    upDealerSuccess: function upDealerSuccess(dataObj) {
        this.showLayer();
        this.setData(dataObj);
        if (dataObj.tipStr) {
            var tipObj = {
                tipIndex: 19,
                showStr: dataObj.tipStr,
                isCountDown: false,
                showPos: G_DATA.getCenterTipPos()
            };
        }
    },

    //从上庄列表下来
    downDealerSuccess: function downDealerSuccess(dataObj) {
        this.showLayer();
        this.setData(dataObj);
        if (dataObj.tipStr) {
            var tipObj = {
                tipIndex: 19,
                showStr: dataObj.tipStr,
                isCountDown: false,
                showPos: G_DATA.getCenterTipPos()
            };
            // GG.tipsMgr.showTxtTip(tipObj);
        }
    },

    //==============================

    //设置底部的tip限制提示
    _showDownTip: function _showDownTip(leftStr, gold) {
        if (gold) gold = G_TOOL.formatStr(this._moneyFormat, G_TOOL.changeMoney(gold));else gold = '';
        this.node_goldTip.getComponent(cc.RichText).string = leftStr + gold;
    }

});

cc._RF.pop();
},{"BaseDialog":"BaseDialog","Obj_dealerListSlider":"Obj_dealerListSlider"}],"Prefab_dialog_grabTrend":[function(require,module,exports){
"use strict";
cc._RF.push(module, '7eb00tVidxEJaSOXaAgURkD', 'Prefab_dialog_grabTrend');
// Script/Views/UIComponents/Prefab_dialog_grabTrend.js

'use strict';

//押宝走势图窗体
cc.Class({
    extends: require('BaseDialog'),

    properties: {
        _resultDict: null,
        _oneResultDict: null,
        _loseColor: null,
        _bullResult: null,
        _bullValue: null,
        node_data: {
            default: null,
            type: cc.Node,
            displayName: '走势图数据节点'
        },
        node_noData: {
            default: null,
            type: cc.Node,
            displayName: '无走势记录时显示节点'
        },
        node_trendBG: {
            default: null,
            type: cc.Node,
            displayName: '无走势记录时背景节点'
        }
    },

    // use this for initialization
    onLoad: function onLoad() {
        this._super();
        this._pokerCompName = 'Obj_poker';
        this._pokerResultCompName = 'Obj_onPokerResult';
        this._pokerContainerName = 'pokerContainer';
        this._pokerResultNodeName = 'Prefab_PokerResult';
        this._resultDict = {};
        this._oneResultDict = {};
        this._loseColor = new cc.Color(253, 41, 31); //失败的颜色
        this._winColor = new cc.Color(155, 176, 235); //胜利的颜色
        this._notMatchColor = this.node_data.color;
        this.node_noData.active = false;
        this._winPokerOff = G_Config_grab.num_winPokerOff;
        this._bullResult = 0;
        this._bullValue = 0;
    },

    setData: function setData(homeID) {
        var dataList;
        if (G_Config_common.isLocal) {
            dataList = {
                code: 1,
                data: [{
                    client: '[29, 30, 11, 17, 2]',
                    profitamount: 1
                }, {
                    client: '[27, 13, 45, 30, 26]',
                    profitamount: -1
                }, {
                    client: '[48, 51, 40, 15, 10]'
                }, {
                    client: '[48, 51, 40, 15, 10]'
                }, {
                    client: '[48, 51, 40, 15, 10]'
                }, {
                    client: '[48, 51, 40, 15, 10]'
                }]
            };
            this.showLayer();
            this._showList(dataList);
        } else {
            var sendObj = {
                gameModelId: G_TYPE.http_gameModule.grab,
                gameRoomId: homeID
            };
            this._sendRequest(sendObj, function (dataObj) {
                if (dataObj) {
                    this.showLayer();
                    this._showList(dataObj);
                }
            }.bind(this));
        }
    },

    //发送押宝走势图信息的请求
    _sendRequest: function _sendRequest(dataObj, callFunc) {
        var sendData = 'gameModelId=' + dataObj.gameModelId + '&gameRoomId=' + dataObj.gameRoomId;
        GG.httpMgr.sendHttpRequest(G_DIALOG_URL.trendUrl, sendData, function (data) {
            if (data) {
                if (callFunc) callFunc(data);
            }
        }.bind(this));
    },

    _showList: function _showList(data) {
        if (data.code == 0) {
            this.node_noData.getComponent(cc.Label).string = data.msg;
            this.node_noData.active = true;
            this.node_data.active = false;
        } else {
            var dataList = data.data;
            this.node_noData.active = false;
            this.node_data.active = true;

            //刷新牌型数据信息
            var pokerList = this.node_data.children;
            var pokerData;
            for (var i = 0; i < pokerList.length; i++) {
                pokerData = dataList[i];
                if (pokerData) {
                    pokerList[i].active = true;
                    //牌型牛几显示
                    this._setPokerGroupInfo(pokerData.client, pokerList[i]);
                    //胜负显示
                    this._setWinOrLose(parseInt(pokerData.profitamount), pokerList[i]);
                } else {
                    pokerList[i].active = false;
                }
            }
        }
    },
    //显示一副新卡牌信息
    _setPokerGroupInfo: function _setPokerGroupInfo(groupInfoList, pokerNodeList) {
        var pokerIndex,
            pokerInfo,
            pokerList = [];
        groupInfoList = JSON.parse(groupInfoList);
        for (var i = 0; i < groupInfoList.length; i++) {
            pokerIndex = groupInfoList[i];
            pokerInfo = G_DATA.getPokerInfo(pokerIndex);
            pokerList.push({ flow: pokerInfo.pokerType, pokerValue: pokerInfo.pokerValue });
            if (i < 3) {
                if (pokerInfo.pokerValue > 10) pokerInfo.pokerValue = 10;
                this._bullResult += pokerInfo.pokerValue;
            }
            if (i == 3) {
                if (pokerInfo.pokerValue > 10) pokerInfo.pokerValue = 10;
                this._bullValue = pokerInfo.pokerValue;
            }
            if (i == 4) {
                if (pokerInfo.pokerValue > 10) pokerInfo.pokerValue = 10;
                this._bullValue += pokerInfo.pokerValue;
            }
        }
        this._refreshPokerGroundInfo(pokerList, pokerNodeList);
    },
    //刷新一副卡牌信息
    _refreshPokerGroundInfo: function _refreshPokerGroundInfo(pokerList, pokerNodeList) {
        var pokerNode,
            bullValue = this._bullValue,
            bullResult = parseInt(this._bullResult),
            pokerContainer = pokerNodeList.getChildByName(this._pokerContainerName),
            resultNode = pokerNodeList.getChildByName(this._pokerResultNodeName);
        for (var i = 0; i < pokerList.length + 1; i++) {
            if (i < 5 && pokerContainer) {
                //刷新卡牌信息
                pokerNode = pokerContainer.children[i];
                pokerNode.getComponent(this._pokerCompName).setPokerInfo(pokerList[i].flow, pokerList[i].pokerValue, true);
            } else if (i == 5 && resultNode) {
                //显示牛几信息
                if (bullResult % 10 == 0) {
                    bullValue = this._bullValue % 10;
                    if (bullValue == 0) bullValue = 10;
                } else bullValue = -1;
                resultNode.getComponent(this._pokerResultCompName).showPokerResultValue(parseInt(bullValue), true);
            }
        }
        this._bullValue = 0;
        this._bullResult = 0;
    },
    //显示胜负信息
    _setWinOrLose: function _setWinOrLose(winOrLose, node) {
        var labelText,
            labelColor,
            resultNode = node.getChildByName('resultText');
        if (!resultNode) return;
        this._winOrLoseLabel = resultNode.getComponent(cc.Label);
        this._winOrLoseNode = resultNode;
        if (winOrLose) {
            //大于0 显示胜；小于0显示负
            if (winOrLose > 0) {
                labelText = G_CHINESE.winMatch;
                labelColor = this._winColor;
            } else {
                labelText = G_CHINESE.loseMatch;
                labelColor = this._loseColor;
            }
        } else {
            labelText = G_CHINESE.notInvolvedMatch; //显示未参与
            labelColor = this._notMatchColor;
        }
        this._winOrLoseLabel.string = labelText;
        this._winOrLoseNode.color = labelColor;
    }
});

cc._RF.pop();
},{"BaseDialog":"BaseDialog"}],"Prefab_dialog_playerList":[function(require,module,exports){
"use strict";
cc._RF.push(module, '31df5LxwYNGio3rVyUA8TeG', 'Prefab_dialog_playerList');
// Script/Views/UIComponents/Prefab_dialog_playerList.js

'use strict';

//玩家列表的界面


cc.Class({
    extends: require('BaseDialog'),

    properties: {
        label_null: {
            default: null,
            type: cc.Label,
            displayName: '无数据时显示'
        }
    },

    // use this for initialization
    onLoad: function onLoad() {
        this._super('UI_playerList');

        this._dealerItemCompName = 'Obj_dialogPlayerListCell';
        var dataObj = {
            itemPrefab: this.prefab_item,
            lineNum: 3,
            scrollType: G_TYPE.scrollType.bag
        };
        this.comp_itemContainer.setData(dataObj);

        this.comp_scroll = this.comp_itemContainer.getScrollView();
        this.comp_scroll.node.on('scroll-to-bottom', this._scrollToBottom, this);
    },

    setData: function setData() {
        if (G_Config_common.isLocal) {
            var netData = this._getLocalData();
            this._setNetData(netData);
        } else {

            this.comp_itemContainer.clearItems(-1);
            GG.httpMgr.sendHttpRequest(G_DIALOG_URL.playerListUrl, null, function (data) {
                if (data) {
                    this._setNetData(data);
                }
            }.bind(this));
        }
    },

    _setNetData: function _setNetData(data) {
        this.showLayer();
        var dataList = data.data,
            str;
        if (data.code == '0') {
            str = data.msg;
        } else {
            str = '';
            this._netDataList = dataList;
            this._showListByTouch();
        }
        this._setNull(str);
    },

    _showListByTouch: function _showListByTouch() {
        var onceNum = 15;
        var onceList = this._netDataList.splice(0, onceNum);
        if (!onceList || onceList.length < 1) return;
        var oneData,
            item,
            comp,
            showNum = this.comp_itemContainer.getShowItemNum();
        for (var i = 0; i < onceNum; i++) {
            oneData = onceList[i];
            if (oneData) {
                item = this.comp_itemContainer.getItemByIndex(showNum + i);
                if (item) {
                    comp = item.getComponent(this._dealerItemCompName);
                    comp.setData(oneData);
                }
            }
        }
        this.comp_itemContainer.clearItems(showNum + i - 1);
    },

    _scrollToBottom: function _scrollToBottom() {
        this._showListByTouch();
    },

    _setNull: function _setNull(msg) {
        this.label_null.string = msg;
    },
    hideLayer: function hideLayer() {
        this._super();
    },

    _getLocalData: function _getLocalData() {
        var netData = {};
        netData.data = [];
        netData.code = G_TOOL.getRandomBool() ? 0 : 1;
        if (netData.code == 1) {
            // var showNum = Math.floor(cc.random0To1() * 10);
            var showNum = 47;
            for (var i = 0; i < showNum; i++) {
                var playerInfo = {
                    avatarUrl: '',
                    nickname: 'name_' + i,
                    coin: -3 + Math.floor(cc.random0To1() * 10)
                };
                netData.data.push(playerInfo);
            }
            console.log(netData.data);
        }
        netData.msg = 'request error';
        return netData;
    }

});

cc._RF.pop();
},{"BaseDialog":"BaseDialog"}],"Prefab_dialog_record":[function(require,module,exports){
"use strict";
cc._RF.push(module, '8f2caKCwp1J3b0ZdiUpPIaq', 'Prefab_dialog_record');
// Script/Views/UIComponents/Prefab_dialog_record.js

'use strict';

//玩家记录界面
cc.Class({
    extends: require('BaseDialog'),

    properties: {
        _lastTouchBtn: null, //上次点击的按钮
        _dict_cacheData: null, //缓存数据
        _firstShowNum: null, //首次显示的条目数
        _curDateClass: null, //当前显示的数据时间,比如当天
        _dict_listFull: null, //某天数据是否已经全部请求

        label_null: {
            default: null,
            type: cc.Label,
            displayName: '无数据时显示'
        },
        comp_scroll: {
            default: null,
            type: cc.ScrollView,
            displayName: '滚动的容器'
        }
    },

    // use this for initialization
    onLoad: function onLoad() {
        this._super();
        this._dealerItemCompName = 'Obj_dialogRecordCell';
        this._comp_exchangPages = this.getComponent('Part_dialog_exchangePages');

        this._firstShowNum = 6;
        this._dict_cacheData = {};
        this._dict_listFull = {};

        var dataObj = G_OBJ.data_dialog_exchangePages();
        dataObj.leftDealScrollComp = this.comp_leftBtnContainer;
        dataObj.leftPrefab = this.prefab_leftButton;
        dataObj.leftContentList = G_CHINESE.exchangePageLeft;
        dataObj.leftClickFunc = this.onClick_leftBtn.bind(this);
        dataObj.rightDealScrollComp = this.comp_itemContainer;
        dataObj.isStopSetRightContent = true;
        //dataObj.rightPrefabList = [this.prefab_introduce, this.prefab_bull100, this.prefab_grab];
        this._comp_exchangPages.initData(dataObj);
        this._comp_exchangPages.diyClickShow();

        //右边滚动容器
        var dataObj = {
            itemPrefab: this.prefab_item,
            scrollType: G_TYPE.scrollType.vertical
        };
        this.comp_itemContainer.setData(dataObj);

        this.comp_scroll.node.on('scroll-to-bottom', this._scrollToBottom, this);
    },

    setData: function setData() {
        this._comp_exchangPages.showDefault(true);
    },

    //点击左边的选项按钮
    onClick_leftBtn: function onClick_leftBtn(type) {
        if (G_Config_common.isLocal) {
            this.showLayer();
            this._updateBottom(this._getLocalRecordData(), true);
            this._comp_exchangPages.doneClickShow(type);
            return;
        }

        this._getDataByDate(type, 1, function (infoList) {
            this.showLayer();
            this._curDateClass = type;
            this._comp_exchangPages.doneClickShow(type);
            this._updateBottom(infoList, true);
            // if(this.comp_itemContainer.getShowItemNum() && infoList && infoList.length < this._firstShowNum){
            //     //该天的数据已经全部显示
            //     this._dict_listFull[type] = true;
            // }
        }.bind(this));
    },

    //获取数据
    _getDataByDate: function _getDataByDate(dateClass, pageNo, callFunc) {
        var needData = this._dict_cacheData[dateClass];
        if (needData) {
            var infoList = [];
            if (this._dict_cacheData[dateClass].data) {
                var allCacheList = this._dict_cacheData[dateClass].data.datas.concat([]);
                infoList = allCacheList.splice(this._firstShowNum * (pageNo - 1), this._firstShowNum);
            }
            if (Object.prototype.toString.call(infoList) === '[object Array]') {
                if (callFunc) callFunc(infoList);
            } else {
                this._requestNetData(dateClass, pageNo, callFunc);
            }
        } else {
            this._requestNetData(dateClass, pageNo, callFunc);
        }
    },
    //发送记录信息的请求
    _requestNetData: function _requestNetData(dateClass, pageNo, callFunc) {
        if (this._dict_listFull[dateClass]) return;
        var sendObj = G_OBJ.data_requestRecord();
        sendObj.gameId = GG.getPlayer().getGameID();
        sendObj.dateClass = dateClass;
        sendObj.pageSize = this._firstShowNum;
        sendObj.pageNo = pageNo;

        //gameId ： 属于那款游戏； dateClass：日期（0是当天,1,2）；pageSize：当前页面条目总数；pageNow：第几页；
        var sendStr = "gameId=" + sendObj.gameId + "&dateClass=" + sendObj.dateClass + "&pageSize=" + sendObj.pageSize + "&pageNo=" + sendObj.pageNo;
        GG.httpMgr.sendHttpRequest(G_DIALOG_URL.recordUrl, sendStr, function (data) {
            if (data) {
                var dataList = this._cacheNetData(dateClass, data);
                if (dataList && callFunc) callFunc(dataList);
            }
        }.bind(this));
    },

    //=============================条目滚动自动延伸

    //缓存列表
    _cacheNetData: function _cacheNetData(dateClass, netData) {
        var dataList = [];
        if (netData.code != 1 || !netData.data.datas || netData.data.datas.length < 1) {
            // this._noneTip = netData.msg;
        } else {
            dataList = netData.data.datas;
            if (this._dict_cacheData[dateClass]) {
                this._dict_cacheData[dateClass].code = netData.code;
                if (this._dict_cacheData[dateClass].data) {
                    this._dict_cacheData[dateClass].data.datas = this._dict_cacheData[dateClass].data.datas.concat(dataList);
                } else {
                    this._dict_cacheData[dateClass].data = netData.data;
                }
            }
        }
        if (!this._dict_cacheData[dateClass]) this._dict_cacheData[dateClass] = netData;
        return dataList;
    },

    //当玩家滚动到底部
    _scrollToBottom: function _scrollToBottom(event) {
        var self = this;
        var showItemNum = this.comp_itemContainer.getShowItemNum();
        this._getDataByDate(this._curDateClass, this.comp_itemContainer.getPageNoByNum(showItemNum + 1, this._firstShowNum), function (infoList) {
            self._updateBottom(infoList);
        });
    },

    //当scroll滚动到底边  isRestart : 是否从第一个开始
    _updateBottom: function _updateBottom(infoList, isRestart) {
        var item,
            comp,
            index = 0,
            playerInfo,
            itemNum = this.comp_itemContainer.getShowItemNum();
        if (isRestart) itemNum = 0;
        for (var i = itemNum; i < itemNum + this._firstShowNum; i++) {
            playerInfo = infoList[index];
            if (!playerInfo) {
                //如果没有玩家数据则终止，不要出现断层
                break;
            }
            item = this.comp_itemContainer.getItemByIndex(i);
            if (item) {
                comp = item.getComponent(this._dealerItemCompName);
                comp.setData(playerInfo);
            }
            index += 1;
        }
        //如果是第一页，需要将多余的条目清理
        if (isRestart) {
            this.comp_itemContainer.clearItems(infoList.length - 1);
            this._scrollToUp();
            if (infoList.length < 1) {
                this._setNull(this._dict_cacheData[this._curDateClass].msg);
            } else {
                this._setNull('');
            }
        }
        //检测该页数据是否满值
        if (infoList.length < this._firstShowNum) {
            this._dict_listFull[this._curDateClass] = true;
        }
    },

    //视图内容将在规定时间内滚动到视图顶部。
    _scrollToUp: function _scrollToUp() {
        this.comp_scroll.scrollToTop(0.2);
    },

    //做空的显示
    _setNull: function _setNull(msg) {
        if (Object.prototype.toString.call(msg) !== '[object String]') {
            msg = 'request timeout!';
        }
        this.label_null.string = msg;
    },

    //获取本地数据
    _getLocalRecordData: function _getLocalRecordData() {
        var curList = [];
        for (var i = 0; i < 7; i++) {
            var curObj = {
                'confirmtime': '2007/1/1', //充值时间
                'gamemodelname': '经典', //房间类型
                'gameroomname': '房间' + i, //房间名
                'effectiveamount': 1000, //押注金额
                'profitamount': 123 * (cc.random0To1() > 0.5 ? 1 : -1) };
            curList.push(curObj);
        }
        curList[0].profitamount = -5000;
        curList[1].profitamount = -10000;
        return curList;
    }

});

cc._RF.pop();
},{"BaseDialog":"BaseDialog"}],"Prefab_dialog_rulesInHome":[function(require,module,exports){
"use strict";
cc._RF.push(module, '0a6d2HHpjdIAJJYp8T52/0Q', 'Prefab_dialog_rulesInHome');
// Script/Views/UIComponents/Prefab_dialog_rulesInHome.js

'use strict';

//房间内的规则显示


cc.Class({
    extends: require('BaseDialog'),

    properties: {
        prefab_Bull100: {
            default: null,
            type: cc.Prefab,
            displayName: '百人规则内容'
        },
        prefab_grab: {
            default: null,
            type: cc.Prefab,
            displayName: '押宝规则内容'
        }
    },

    // use this for initialization
    onLoad: function onLoad() {
        this._super('UI_rulesInHome');
        this._rulesContent = [this.prefab_Bull100, this.prefab_grab];
    },

    setData: function setData(num) {
        this._initRulesContent(num);
    },

    //初始化规则内容
    _initRulesContent: function _initRulesContent(num) {
        var item = cc.instantiate(this._rulesContent[num - 1]);
        item.parent = this.comp_itemContainer.node;

        item.active = true;
    },
    hideLayer: function hideLayer() {
        this._super();
    }

});

cc._RF.pop();
},{"BaseDialog":"BaseDialog"}],"Prefab_dialog_rules":[function(require,module,exports){
"use strict";
cc._RF.push(module, '966e2xbsN5Cn4mFk1IER7RH', 'Prefab_dialog_rules');
// Script/Views/UIComponents/Prefab_dialog_rules.js

'use strict';

//规则界面
cc.Class({
    extends: require('BaseDialog'),

    properties: {
        _rulesContent: null, //所有预制体
        _dict_rulePage: null, //规则页面
        _lastPage: null, //上一个打开的规则页面
        _lastIndex: null, //上一个打开的规则页面的索引

        prefab_introduce: {
            default: null,
            type: cc.Prefab,
            displayName: '规则简介预制体'
        },
        prefab_bull100: {
            default: null,
            type: cc.Prefab,
            displayName: '百人规则预制体'
        },
        prefab_grab: {
            default: null,
            type: cc.Prefab,
            displayName: '押宝规则预制体'
        }
    },

    // use this for initialization
    onLoad: function onLoad() {
        this._super();

        this._comp_exchangPages = this.getComponent('Part_dialog_exchangePages');

        var dataObj = G_OBJ.data_dialog_exchangePages();
        dataObj.leftDealScrollComp = this.comp_leftBtnContainer;
        dataObj.leftPrefab = this.prefab_leftButton;
        dataObj.leftContentList = ['游戏简介', '百人大战', '押宝大战'];
        dataObj.leftClickFunc = null;
        dataObj.rightDealScrollComp = this.comp_itemContainer;
        dataObj.rightPrefabList = [this.prefab_introduce, this.prefab_bull100, this.prefab_grab];
        this._comp_exchangPages.initData(dataObj);
    },

    start: function start() {
        this._comp_exchangPages.showDefault();
    }
});

cc._RF.pop();
},{"BaseDialog":"BaseDialog"}],"Prefab_dialog_set":[function(require,module,exports){
"use strict";
cc._RF.push(module, '82611/wMStMw5RCoIcdMM0t', 'Prefab_dialog_set');
// Script/Views/UIComponents/Prefab_dialog_set.js

'use strict';

//玩家系统设置
var setType = {
    typeMusic: 1,
    typeSound: 2
};

cc.Class({
    extends: require('BaseDialog'),

    properties: {
        _musicIsOpen: null, //音乐是否开启
        _soundIsOpen: null, //音效是否开启
        _isOpenFirst: null, //是否第一次打开
        _dict_lastSet: null, //上次的设定，判定是否有改变配置

        node_changeBtn: {
            default: null,
            type: cc.Node,
            displayName: '切换账号'
        },
        node_musicSwitch: {
            default: null,
            type: cc.Node,
            displayName: '音乐开关'
        },
        node_soundSwitch: {
            default: null,
            type: cc.Node,
            displayName: '音效开关'
        },
        node_musicIcon: {
            default: null,
            type: cc.Node,
            displayName: '音乐左边图标'
        },
        node_soundIcon: {
            default: null,
            type: cc.Node,
            displayName: '音效左边图标'
        },
        label_name: {
            default: null,
            type: cc.Label,
            displayName: '玩家名字'
        }
    },

    // use this for initialization
    onLoad: function onLoad() {
        this._super();
        this._registerEvent();
        this._isOpenFirst = true;
    },
    _registerEvent: function _registerEvent() {
        this.registerButton(this.node_changeBtn, this._onClick_change, this);
        this.registerButton(this.node_musicSwitch, this.onClick_open, this, setType.typeMusic, true);
        this.registerButton(this.node_soundSwitch, this.onClick_open, this, setType.typeSound, true);
    },
    hideLayer: function hideLayer() {
        this._super();
        this._dict_lastSet = null;
    },

    _onClick_close: function _onClick_close() {
        if (G_Config_common.isLocal) {
            this.hideLayer();
            return;
        }

        if (this._dict_lastSet) {
            if (this._dict_lastSet['music'] != this._musicIsOpen || this._dict_lastSet['sound'] != this._soundIsOpen) {
                //配置发生改变,保存设置
                var musiceStr = this._musicIsOpen ? 'Set_open' : 'Set_close';
                var soundStr = this._soundIsOpen ? 'Set_open' : 'Set_close';
                var sendStr = "musicClass=" + musiceStr + '&soundClass=' + soundStr + '&gameType=DOU_NIU';
                var self = this;
                GG.httpMgr.sendHttpRequest(G_DIALOG_URL.saveSystemSetUrl, sendStr, function (data) {
                    self.hideLayer();
                }.bind(this));
            } else this.hideLayer();
        } else this.hideLayer();
    },

    setData: function setData() {
        var self = this;
        if (G_Config_common.isLocal) {
            var data = { 'music': true, 'sound': true };
            this._dict_lastSet = data;
            if (GG.audioMgr.getAudioConfig()) data = GG.audioMgr.getAudioConfig();else GG.audioMgr.setAudioConfig({ 'music': true, 'sound': true });
            this.defaultSetSound(data.music, data.sound);
            this._setName();
            self.showLayer();
        } else {
            //获取玩家系统设置
            //if(this._isOpenFirst){
            //    GG.httpMgr.sendHttpLogin(G_DIALOG_URL.getSystemSetUrl, 'gameType=DOU_NIU', function (data) {
            //        var config;
            //        if(data.code == 0){
            //            config = {'music':true,'sound':true};
            //        } else {
            //            config = data.data.result[0];
            //        }
            //        //如果音乐已经播放，则不需要重复播放
            //        if(config.music && GG.audioMgr.getIsPlayMusic()) GG.audioMgr.saveSoundConfig(config.sound);
            //        else GG.audioMgr.setAudioConfig(config);
            //
            //        var data = GG.audioMgr.getAudioConfig();
            //        self.defaultSetSound(data.music, data.sound);
            //        self._setName();
            //        self._isOpenFirst = false;
            //        self.showLayer();
            //    }.bind(this));
            //}else {
            //    var data = GG.audioMgr.getAudioConfig();
            //    this.defaultSetSound(data.music, data.sound);
            //    this._setName();
            //    self.showLayer();
            //}
            var data = GG.audioMgr.getAudioConfig();
            if (data) {
                this._dict_lastSet = {};
                for (var attr in data) {
                    this._dict_lastSet[attr] = data[attr];
                }
                this.defaultSetSound(data.music, data.sound);
                this._setName();
                self.showLayer();
            }
        }
    },

    //玩家点击了开关
    onClick_open: function onClick_open(event, type) {
        switch (type) {
            case setType.typeMusic:
                //音乐
                this._setMusicOpen();
                GG.audioMgr.saveMusicConfig(this._musicIsOpen);
                break;
            case setType.typeSound:
                //音效
                this._setSoundOpen();
                GG.audioMgr.saveSoundConfig(this._soundIsOpen);
                break;
        }
    },
    //设置音乐开关
    _setMusicOpen: function _setMusicOpen() {
        this._musicIsOpen = !this._musicIsOpen;
        //表现
        var pointImg, openImg, lightIcon;
        openImg = this.node_musicSwitch.children[0];
        pointImg = this.node_musicSwitch.children[1];
        lightIcon = this.node_musicIcon.children[0];

        openImg.active = this._musicIsOpen;
        if (this._musicIsOpen) {
            pointImg.x = this.node_musicSwitch.width / 2 - pointImg.width / 2;
        } else {
            pointImg.x = -this.node_musicSwitch.width / 2 + pointImg.width / 2;
        }
        lightIcon.active = this._musicIsOpen;
    },
    //设置音效开关
    _setSoundOpen: function _setSoundOpen() {
        this._soundIsOpen = !this._soundIsOpen;
        //表现
        var pointImg, openImg, lightIcon;
        openImg = this.node_soundSwitch.children[0];
        pointImg = this.node_soundSwitch.children[1];
        lightIcon = this.node_soundIcon.children[0];

        openImg.active = this._soundIsOpen;
        if (this._soundIsOpen) {
            pointImg.x = this.node_soundSwitch.width / 2 - pointImg.width / 2;
        } else {
            pointImg.x = -this.node_soundSwitch.width / 2 + pointImg.width / 2;
        }
        lightIcon.active = this._soundIsOpen;
    },

    //玩家默认系统设置(第一次进入游戏设置), isOpenMusic=true则开启音乐，音效等同
    defaultSetSound: function defaultSetSound(isOpenMusic, isOpenSound) {
        this._musicIsOpen = !isOpenMusic;
        this._soundIsOpen = !isOpenSound;
        this._setMusicOpen();
        this._setSoundOpen();
    },

    //设置名字
    _setName: function _setName(name) {
        if (G_Config_common.isLocal) name = '123456';else name = GG.getPlayer().getPlayerName();
        if (!name) name = '';else name = G_TOOL.getNameLimit(name, 16);
        this.label_name.string = name;
    },

    _onClick_change: function _onClick_change(event) {
        GG.tipsMgr.showConfirmTip_TWO(G_CHINESE.exitText2, function () {
            //确认退出
            GG.exitGame();
        });

        //var sendData = "gameId=1&dateClass=0&pageSize=20&pageNow=0";
        //GG.httpMgr.sendHttpLogin("game/statistics/user/records.html", sendData, function (data) {
        //    console.log('get login======');
        //    console.log(data);
        //}.bind(this));
    }
    // called every frame, uncomment this function to activate update callback
    // update: function (dt) {

    // },
});

cc._RF.pop();
},{"BaseDialog":"BaseDialog"}],"Prefab_dialog_trend":[function(require,module,exports){
"use strict";
cc._RF.push(module, '414dePmJ3NOd7eATXcLfkn7', 'Prefab_dialog_trend');
// Script/Views/UIComponents/Prefab_dialog_trend.js

'use strict';

//百人走势图


cc.Class({
    extends: require('BaseDialog'),

    properties: {},

    // use this for initialization
    onLoad: function onLoad() {
        this._super('UI_trend');
        this._setScrollData();
    },

    _setScrollData: function _setScrollData() {
        this._itemCompName = 'Obj_cell_trend';
        var dataObj = {
            itemPrefab: this.prefab_item,
            scrollType: G_TYPE.scrollType.vertical
        };
        this.comp_itemContainer.setData(dataObj);
    },

    setData: function setData(homeID) {
        var dataList;
        if (G_Config_common.isLocal) {
            dataList = [];
            for (var i = 0; i < 5; i++) {
                var curList = [['SPADE', 1], ['DIAMOND', 0], ['CLUB', 1], ['HEART', 0]];
                dataList.push(curList);
            }
            this._showList(dataList);
        } else {
            var moduleType;
            switch (GG.getGameType()) {
                case G_TYPE.gameModule.bull100:
                    moduleType = G_TYPE.http_gameModule.bull100;
                    break;
                case G_TYPE.gameModule.grab:
                    moduleType = G_TYPE.http_gameModule.grab;
                    break;
                case G_TYPE.gameModule.classic:
                    moduleType = G_TYPE.http_gameModule.classic;
                    break;
                default:
                    moduleType = 1;
                    break;
            }
            var sendData = 'gameModelId=' + moduleType + '&gameRoomId=' + homeID;
            GG.httpMgr.sendHttpRequest(G_DIALOG_URL.trendUrl, sendData, function (data) {
                if (data) {
                    this.showLayer();
                    var needList = [];
                    var mathList;
                    var dataList = data.data;
                    if (!dataList) {
                        data.msg;
                    } else {
                        for (var i = 0; i < dataList.length; i++) {
                            if (!needList[i]) needList[i] = [];
                            mathList = dataList[i].matchResult;
                            if (mathList) {
                                for (var j = 0; j < mathList.length; j++) {
                                    needList[i].push([mathList[j]['itemType'], mathList[j]['outcome']]);
                                }
                            }
                        }
                        this._showList(needList);
                    }
                }
            }.bind(this));
        }
    },
    _showList: function _showList(dataList) {
        var data, item, comp; //走势图显示条目为5
        for (var i = 0; i < G_Config_common.showTrendItems; i++) {
            data = dataList[i];
            if (data) {
                item = this.comp_itemContainer.getItemByIndex(i);
                if (item) {
                    comp = item.getComponent(this._itemCompName);
                    comp.setData(data);
                }
            }
        }
        this.comp_itemContainer.clearItems(i);
    },

    hideLayer: function hideLayer() {
        this._super();
    }

});

cc._RF.pop();
},{"BaseDialog":"BaseDialog"}],"Prefab_roomList":[function(require,module,exports){
"use strict";
cc._RF.push(module, '45c8dc1TENGMo9nIQJY25EY', 'Prefab_roomList');
// Script/Views/UIComponents/Prefab_roomList.js

'use strict';

//存放所有的房间列表
cc.Class({
    extends: require('BaseUI'),

    properties: {
        _dict_loadScene: null, //是否已经预加载需要的场景
        _loadingScene: null,

        prefab_item: {
            default: null,
            type: cc.Prefab,
            displayName: '房间预制体'
        },
        comp_itemContainer: {
            default: null,
            type: require('Obj_dealScroll'),
            displayName: '房间列表容器'
        },
        node_roomName: {
            default: null,
            type: cc.Node,
            displayName: '房间列表名称'
        }
    },

    // use this for initialization
    onLoad: function onLoad() {
        this._dealerItemCompName = 'Obj_roomListCell';
        this._dict_loadScene = {};
        //设置滚动层信息
        var dataObj = {
            itemPrefab: this.prefab_item,
            lineNum: 3,
            scrollType: G_TYPE.scrollType.bag
        };
        this.comp_itemContainer.setData(dataObj);
    },

    setDataList: function setDataList(dataObj) {
        if (!dataObj) return;
        // this.showLayer();
        G_DATA.getRoomListJson(function (jsonConfig) {
            if (jsonConfig) {
                this.setRoomList(dataObj.data, dataObj.enterType, jsonConfig);
            } else {
                if (G_Config_common.isLocal) {
                    jsonConfig = this._getLocalJson();
                    this.setRoomList(dataObj.data, dataObj.enterType, jsonConfig);
                } else {
                    //无法正常加载房间配置
                }
            }
        }.bind(this));
        this._reloadScene();
    },

    setRoomList: function setRoomList(dataList, enterType, jsonConfig) {
        this._showRoomName(enterType);
        var i = 0,
            configPageNum = 6,
            rowNum;
        if (dataList) {
            dataList = this._resortDataList(dataList);
            var item, comp, dataObj;
            for (i = 0; i < dataList.length; i++) {
                item = this.comp_itemContainer.getItemByIndex(i);
                if (item) {
                    comp = item.getComponent(this._dealerItemCompName);
                    dataObj = dataList[i];
                    dataObj.enterType = enterType;
                    // comp.setData(dataObj, jsonConfig[dataObj.id]);
                    rowNum = (i + 1) % configPageNum;
                    comp.setData(dataObj, jsonConfig[rowNum == 0 ? configPageNum : rowNum]);
                }
            }
        }
        this.comp_itemContainer.clearItems(i - 1);
        this.comp_itemContainer.scrollToUp();
    },

    // _resortDataList : function (dataList) {
    //     var newList = [];
    //     while (dataList.length > 0){
    //         newList = newList.concat(this._getOneTypeList(dataList));
    //     }
    //     return newList;
    // },
    //
    // _getOneTypeList : function (dataList) {
    //     var copyValue = null, dataObj, newList = [];
    //     for(var i = dataList.length-1; i > -1; i --){
    //         dataObj = dataList[i];
    //         if(copyValue !== dataObj.minLimitPlayerBlance){
    //             copyValue = dataObj.minLimitPlayerBlance
    //             var targetNum = dataList.splice(i, 1)[0];
    //             newList.splice(0,0, targetNum);
    //         }
    //     }
    //     return newList
    // },

    _resortDataList: function _resortDataList(dataList) {
        var dict = {};
        var dataObj;
        for (var i = dataList.length - 1; i > -1; i--) {
            dataObj = dataList[i];
            if (!dict[dataObj.minLimitPlayerBlance]) {
                dict[dataObj.minLimitPlayerBlance] = [];
            }
            this._doBalancePush(dict[dataObj.minLimitPlayerBlance], dataObj);
        }

        var newList = [];
        var keyList = Object.keys(dict);
        keyList.sort(function (first, second) {
            var f = parseInt(first, 10),
                s = parseInt(second, 10);
            if (f < s) {
                return -1;
            } else if (f > s) {
                return 1;
            } else {
                return 0;
            }
        });
        var roomDataList;
        while (this._isHaveChild(dict)) {
            for (var i = 0; i < keyList.length; i++) {
                roomDataList = dict[keyList[i]];
                if (!roomDataList) continue;
                if (roomDataList.length < 1) {
                    delete dict[keyList[i]];
                } else {
                    var target = roomDataList.splice(0, 1)[0];
                    if (target) newList.push(target);
                }
            }
        }

        return newList;
    },

    _isHaveChild: function _isHaveChild(jsonObj) {
        for (var key in jsonObj) {
            if (jsonObj[key]) {
                return true;
            }
        }
        return false;
    },

    _doBalancePush: function _doBalancePush(list, dataObj) {
        var firstLen = list.length;
        for (var i = 0; i < firstLen; i++) {
            if (dataObj.id < list[i].id) {
                list.splice(i, 0, dataObj);
                break;
            }
        }
        if (firstLen == list.length) {
            //没有增加
            list.push(dataObj);
        }
    },

    //预加载场景
    _reloadScene: function _reloadScene() {
        if (!this._loadingScene) {
            var self = this;
            var sceneName = G_TYPE.sceneName.loadingScene;
            cc.director.preloadScene(sceneName, function () {
                self._loadingScene = true;
            });
        }
    },

    //=====================================显示房间名

    _showRoomName: function _showRoomName(sceneType) {
        var grabNode = this.node_roomName.getChildByName('grab');
        var bullNode = this.node_roomName.getChildByName('bull100');
        if (!grabNode || !bullNode) return;
        switch (parseInt(sceneType)) {
            case G_TYPE.gameModule.bull100:
                bullNode.active = true;
                grabNode.active = false;
                break;
            case G_TYPE.gameModule.classic:

                break;
            case G_TYPE.gameModule.grab:
                var grabNode = this.node_roomName.getChildByName('grab');
                grabNode.active = true;
                bullNode.active = false;
                break;
            default:
                break;
        }
    },

    _getLocalJson: function _getLocalJson() {
        return {
            "1": {
                "txtImgUrl": "images/room/name/platform_room_n_7.png",
                "bgImgUrl": "images/room/bg/platform_room_b_1000.png"
            },
            "2": {
                "txtImgUrl": "images/room/name/platform_room_n_8.png",
                "bgImgUrl": "images/room/bg/platform_room_b_2000.png"
            },
            "3": {
                "txtImgUrl": "images/room/name/platform_room_n_11.png",
                "bgImgUrl": "images/room/bg/platform_room_b_20000.png"
            },
            "4": {
                "txtImgUrl": "images/room/name/platform_room_n_9.png",
                "bgImgUrl": "images/room/bg/platform_room_b_5000.png"
            },
            "5": {
                "txtImgUrl": "images/room/name/platform_room_n_12.png",
                "bgImgUrl": "images/room/bg/platform_room_b_50000.png"
            },
            "6": {
                "txtImgUrl": "images/room/name/platform_room_n_10.png",
                "bgImgUrl": "images/room/bg/platform_room_b_10000.png"
            },
            "7": {
                "txtImgUrl": "images/room/name/platform_room_n_7.png",
                "bgImgUrl": "images/room/bg/platform_room_b_1000.png"
            }
        };
    }

});

cc._RF.pop();
},{"BaseUI":"BaseUI","Obj_dealScroll":"Obj_dealScroll"}],"ReloadResMgr":[function(require,module,exports){
"use strict";
cc._RF.push(module, '45da4o85DFHhavko98DhvWK', 'ReloadResMgr');
// Script/Common/Managers/ReloadResMgr.js

'use strict';

//资源预加载管理

var mgr = cc.Class({
    _dict_urlRes: null, //路径资源，不包括头像
    _dict_headImg: null, //头像资源
    _list_headImg: null,
    ctor: function ctor() {},
    //加载单张头像图片资源
    getHeadImg: function getHeadImg(url, callFunc) {
        if (!this._dict_headImg) {
            this._dict_headImg = {};
            this._list_headImg = [];
        }
        if (this._dict_headImg[url]) {
            if (callFunc) callFunc(this._dict_headImg[url][0]);
            var index = this._list_headImg.indexOf(url);
            if (index > -1) {
                this._list_headImg.splice(index, 1);
                this._list_headImg.splice(0, 0, url);
            }
        } else {
            cc.loader.load(url, function (err, texture) {
                var frame;
                if (err) {
                    console.log('request headImg error== ' + err);
                } else {
                    if (texture) {
                        frame = new cc.SpriteFrame(texture);
                        if (frame) {
                            this._dict_headImg[url] = [frame, texture];
                            this._list_headImg.splice(0, 0, url);
                            if (this._list_headImg.length > 30) {
                                var lastUrl = this._list_headImg.pop();
                                this.removeOneHeadImg(lastUrl);
                            }
                        }
                    }
                }
                if (callFunc) callFunc(frame);
            }.bind(this));
        }
    },

    //释放单个资源
    removeOneHeadImg: function removeOneHeadImg(url) {
        if (this._dict_headImg[url]) {
            cc.loader.releaseAsset(this._dict_headImg[url][0]);
            cc.loader.releaseAsset(this._dict_headImg[url][1]);
            delete this._dict_headImg[url];
        }
    },

    //释放所有资源
    removeAllImages: function removeAllImages() {
        for (var url in this._dict_headImg) {
            cc.loader.releaseAsset(this._dict_headImg[url][0]);
            cc.loader.releaseAsset(this._dict_headImg[url][1]);
        }
    }
});

module.exports = mgr;

cc._RF.pop();
},{}],"SocketCenter":[function(require,module,exports){
"use strict";
cc._RF.push(module, 'e36ccbGsY1MGLLYmQC2ljPd', 'SocketCenter');
// Script/Common/Managers/SocketCenter.js

"use strict";

if (!Number.isInteger) Number.isInteger = function (v) {
    return "number" == typeof v && (0 | v) === v;
};

//数据对象结构体，具体的属性将通过服务端来完善
//socket对象
//var WebSocket = WebSocket || window.WebSocket || window.MozWebSocket;
if (window.netBeanInited == undefined || !window.netBeanInited) {
    //只能初始化一次
    window.NetBean = new Object();
}
/** 消息类,用来封装消息,解析消息 */
var Msg = function Msg() {
    this.pos = 0;
    this.data = "";
    this.len = 0; //消息长度
    this.deepCount = 0; //deepCount 用于object嵌套检测,>=10时不再解析
};
var initTime = 1400000000;
var NetServer = function NetServer(wsUrl, msgHandle, printMsg) {
    this.wsUrl = wsUrl;this.msgHandle = msgHandle;this.printMsg = printMsg;
    this.timeDiff = initTime; //时间差=当前时间-服务器时间
    this.getServerTime = function () {
        return new Date().getTime() - this.timeDiff;
    };
    this.resetServerTime = function (serverTime) {
        this.timeDiff = Math.min(this.timeDiff, new Date().getTime() - serverTime);
    };
};
//网络服务是否已连接
NetServer.prototype.isConnected = function () {
    return this.socket && this.socket.readyState == WebSocket.OPEN;
};
NetServer.prototype.connect = function () {
    if (!window.WebSocket) {
        window.WebSocket = window.MozWebSocket;
    }
    if (window.WebSocket) {
        this.socket = new WebSocket(this.wsUrl);
        var netSrv = this;
        this.socket.onmessage = function (event) {
            //读取数据
            var obj = Msg.toObject(event.data, netSrv);
            if (obj == -1) {
                if (netSrv.onOpen) {
                    netSrv.onOpen();
                }
            } else {
                // console.dir(obj);
                // if(obj.constructor.className == "NbTest"){
                //     netSrv.send("NbTest", obj);
                // }
                var byHandle = true;
                //夺宝大战通过下面代码注入接收消息,返回值表示是否由默认handle处理
                // netSrv.msgReceived = function (className, obj) {
                //     return false;
                // }
                if (netSrv.msgReceived) {
                    byHandle = netSrv.msgReceived(obj.constructor.className, obj);
                }
                //if(byHandle && netSrv.msgHandle[obj.constructor.className]){
                //    netSrv.msgHandle[obj.constructor.className](obj);
                //}
                if (netSrv.printMsg) {
                    // console.log('\n收到数据 event:'+obj.constructor.event +" ,eventName:"+ obj.constructor.className+',\n' + TestUtil.objToStr(obj));
                }
            }
        };
        this.socket.onopen = function (event) {
            this.send('0'); //发送一个字节获取json
        };
        this.socket.onclose = function (event) {
            if (netSrv.onClose) {
                netSrv.onClose();
            }
        };
        return this;
    } else {
        return undefined;
    }
};
/** 发送心跳消息 */
NetServer.prototype.sendHeart = function () {
    if (this.socket.readyState == WebSocket.OPEN) {
        this.socket.send(String.fromCharCode(9));
        return true;
    } else {
        throw new Error("Disconnect from Server,Please try again...");
    }
};

NetServer.prototype.send = function (type, obj) {
    if (this.socket.readyState == WebSocket.OPEN) {
        try {
            var msg = Msg.toMsg(type, obj);
            this.socket.send(msg);
        } catch (e) {
            console.error(e);
        }
        return true;
    } else {
        throw new Error("Disconnect from Server,Please try again...");
    }
};
/** 数据类型,名称后面带S为列表,MAP为map或对象,必须为奇数,单数据则为偶数 */
Msg.TYPE_NUM = 0, Msg.TYPE_NUMS = 1, Msg.TYPE_NUM_MAP = 2, Msg.TYPE_STRING = 4, Msg.TYPE_STRINGS = 5, Msg.TYPE_STRING_MAP = 6, Msg.TYPE_BOOL = 8, Msg.TYPE_BOOLS = 9, Msg.TYPE_BOOL_MAP = 10;
Msg.Type = function (collectionType, jsonClass) {
    this.collectionType = collectionType;
    this.jsonClass = jsonClass;
    return this;
};

Msg.getMsg = function (fromServerData) {
    var m = new Msg();
    m.data = fromServerData;
    return m;
};

var TYPE_SINGLE = 0,
    TYPE_ARRAY = 1,
    TYPE_LIST = 2,
    TYPE_MAP = 3;
Msg.prototype.loadJsons = function (netSrv) {
    var getJson = function getJson(index) {
        if (!NetBean[index]) NetBean[index] = function () {
            return this;
        };
        return NetBean[index];
    };
    var jsonCount = this.getLong();
    for (var i = 0; i < jsonCount; i++) {
        var index = this.getLong();
        var t = getJson(index);
        t.event = index;
        t.className = this.getString();
        t.sendBy = this.getLong();
        NetBean[t.className] = t;
        var fieldCount = this.getLong();
        t.fields = new Array();
        t.types = new Array();
        t.requireds = new Array();
        for (var j = 0; j < fieldCount; j++) {
            var fieldIndex = this.getLong();
            t.requireds[fieldIndex] = this.getLong() == 1;
            t.fields[fieldIndex] = this.getString();
            var collectionType = this.getLong();
            var fieldType = this.getLong();
            if (fieldType < 8) {
                //基本数据类型
                fieldType = fieldType * 4 + collectionType;
                t.types[fieldIndex] = fieldType;
            } else {
                t.types[fieldIndex] = new Msg.Type(collectionType, getJson(fieldType - 8));
            }
        }
    }
    window.netBeanInited = true;
};

Msg.toObject = function (fromServerData, netSrv) {
    var msg = Msg.getMsg(fromServerData);
    var serverTime = msg.getLong();
    netSrv.resetServerTime(serverTime);
    var classIndex = msg.getLong();
    if (classIndex == -1) {
        msg.loadJsons(netSrv);
        return -1;
    }
    return msg.toObject(NetBean[classIndex]);
};

Msg.toMsg = function (nbType, obj) {
    var msg = new Msg();
    var nb = NetBean[nbType];
    msg.putLong(nb.event);
    msg.toMsg(nb, obj);
    return msg.data;
};

Msg.prototype.toMsg = function (nb, o) {
    var fieldCount = 0;
    this.mark(); //fieldCount
    var types = nb.types,
        fields = nb.fields,
        requireds = nb.requireds;
    for (var i = 0; i < fields.length; i++) {
        var val = o[fields[i]];
        if (val == undefined || val == null) {
            if (requireds[i]) {
                throw new Error("required的值不能为空,NetBean." + nb.className + "." + nb.fields[i]);
            }
            continue;
        }
        fieldCount++;
        this.putLong(i);
        var error = this.toFieldMsg(types[i], val);
        if (error != null) {
            throw new Error("变量赋值错误,NetBean." + nb.className + "." + nb.fields[i] + "=" + val + ",数据类型应该为:" + error);
        }
    }
    this.putByteOnMark(fieldCount);
};

Msg.prototype.toFieldMsg = function (type, val) {
    switch (type) {
        case Msg.TYPE_NUM:
            if (!Number.isInteger(val)) return "数字整型";
            this.putLong(val);
            break;
        case Msg.TYPE_STRING:
            if (typeof val != "string") return "字符串类型";
            this.putString(val);
            break;
        case Msg.TYPE_BOOL:
            if (typeof val != "boolean") return "布尔类型";
            this.putBoolean(val);
            break;
        default:
            {
                var collectionType = TYPE_SINGLE;
                var dataType = Msg.TYPE_NUM;
                if (typeof type == "number") {
                    collectionType = type & 3;
                    dataType = type - collectionType;
                } else {
                    collectionType = type.collectionType;
                    dataType = -1;
                }
                switch (collectionType) {
                    case TYPE_SINGLE:
                        {
                            this.toMsg(type, val);
                        }break;
                    case TYPE_MAP:
                        {
                            this.mark();
                            var len = 0;
                            for (var j in val) {
                                this.toFieldMsg(Msg.TYPE_STRING, j + "");
                                if (dataType != -1) {
                                    this.toFieldMsg(dataType, val[j]);
                                } else {
                                    this.toMsg(type.jsonClass, val[j]);
                                }
                                len++;
                            }
                            this.putLongOnMark(val.length);
                        }break;
                    default:
                        {
                            //Array
                            this.putLong(val.length);
                            for (var j in val) {
                                if (dataType != -1) {
                                    this.toFieldMsg(dataType, val[j]);
                                } else {
                                    this.toMsg(type.jsonClass, val[j]);
                                }
                            }
                        };
                }
                break;
            }
    }
    return null;
};

/**
 * @param jsonClass Json对应的类
 * @returns 消息转换的对象
 */
Msg.prototype.toObject = function (jsonClass) {
    var obj;
    try {
        obj = new jsonClass();
    } catch (e) {
        console.log(e);
    }
    var fieldLen = this.getByte();
    for (var i = 0; i < fieldLen; i++) {
        //获取fieldIndex,再获取变量值的模式
        var fieldIndex = this.getLong();
        var jsonType = jsonClass.types[fieldIndex];
        var isObject = typeof jsonType != 'number';
        if (!isObject && jsonType & 3 != 0 || isObject && jsonType.collectionType != TYPE_SINGLE) {
            //奇数,列表,先读取数量
            var isMap = false;
            if (!isObject) {
                if ((jsonType & 3) == 3) isMap = true;
                jsonType = jsonType - (jsonType & 3);
            } else {
                isMap = jsonType.collectionType == TYPE_MAP;
            }
            var listLen = this.getFiled(Msg.TYPE_NUM);
            if (!isMap) {
                obj[jsonClass.fields[fieldIndex]] = new Array();
            } else {
                obj[jsonClass.fields[fieldIndex]] = {};
            }
            for (var j = 0; j < listLen; j++) {
                var key = isMap ? this.getFiled(Msg.TYPE_STRING) : j;
                obj[jsonClass.fields[fieldIndex]][key] = this.getFiled(jsonType);
            }
        } else {
            obj[jsonClass.fields[fieldIndex]] = this.getFiled(jsonType);
        }
    }
    return obj;
};

Msg.prototype.getFiled = function (jsonType) {
    switch (jsonType) {
        case Msg.TYPE_NUM:
            return this.getLong();
            break;
        case Msg.TYPE_STRING:
            return this.getString();
            break;
        case Msg.TYPE_BOOL:
            return this.getBoolean();
            break;
        default:
            return this.toObject(jsonType.jsonClass);
            break;
    }
};

Msg.prototype.getLen = function () {
    var len = this.data.charCodeAt(this.pos++);
    var byteCount = len >> 4 & 7;
    len = len & 15;
    for (var i = 0; i < byteCount; i++) {
        len = len | this.data.charCodeAt(this.pos++) << i * 7 + 4;
    }
    return len + this.pos;
};

Msg.prototype.putLong = function (val) {
    var positive = val > 0;
    if (!positive) val = val * -1;
    var bit = 0;var tmp = val;
    while (tmp > 0) {
        tmp = parseInt(tmp / 2);
        bit++;
    }
    bit = parseInt((bit + 3) / 7);
    this.data += String.fromCharCode(bit << 4 | (positive ? 0 : 1) << 3 | val & 7); //高1-3多余byte数，低4位正0(负1)，低1-3位数据最低3位
    val = parseInt(val / (1 << 3));
    for (var i = 0; i < bit; i++) {
        this.data += String.fromCharCode(val & 127);
        val = parseInt(val / (1 << 7));
    }
};

Msg.prototype.getLong = function () {
    var d = this.data.charCodeAt(this.pos++);
    var rs = d & 7;
    var byteCount = d >> 4 & 7;
    var rate = 1 << 3; //用乘法代替位移避免溢出
    for (var i = 0; i < byteCount; i++) {
        rs = rs + (this.data.charCodeAt(this.pos++) & 255) * rate;
        rate *= 1 << 7;
    }
    rs = rs * ((d & 8) == 0 ? 1 : -1);
    return rs;
};

Msg.prototype.mark = function () {
    if (!this.marks) this.marks = new Array();
    this.marks.push(this.data);
    this.data = "";
};

Msg.prototype.putByteOnMark = function (val) {
    this.data = this.marks.pop() + String.fromCharCode(val & 127) + this.data;
};

Msg.prototype.putLongOnMark = function (val) {
    var rs = this.marks.pop();
    var positive = val > 0;
    if (!positive) val = val * -1;
    var bit = 0;var tmp = val;
    while (tmp > 0) {
        tmp = parseInt(tmp / 2);
        bit++;
    }
    bit = parseInt((bit + 3) / 7);
    rs += String.fromCharCode(bit << 4 | (positive ? 0 : 1) << 3 | val & 7); //高1-3多余byte数，低4位正0(负1)，低1-3位数据最低3位
    val = parseInt(val / (1 << 3));
    for (var i = 0; i < bit; i++) {
        rs += String.fromCharCode(val & 127);
        val = parseInt(val / (1 << 7));
    }
    this.data = rs + this.data;
};

Msg.prototype.putByte = function (val) {
    return this.data += String.fromCharCode(val & 127);
};

Msg.prototype.getByte = function () {
    return this.data.charCodeAt(this.pos++) & 127;
};
Msg.prototype.putBoolean = function (val) {
    return this.data += String.fromCharCode(val ? 1 : 0);
};

Msg.prototype.getBoolean = function () {
    return this.data.charCodeAt(this.pos++) == 1;
};

Msg.prototype.putString = function (val) {
    var count = 0;
    for (var i = 0; i < val.length; i++) {
        var char = val.charCodeAt(i);
        if (char < 0x7f) {
            count += 1;
        } else if (char <= 0x7ff) {
            count += 2;
        } else if (char <= 0xFFFF) {
            count += 3;
        } else {
            count += 4;
        }
    }
    var bit = 0,
        tmp = count;
    while (tmp > 0) {
        tmp = tmp >> 1;
        bit++;
    }
    bit = parseInt((bit + 2) / 7);
    tmp = count;
    this.data += String.fromCharCode(bit << 5 | tmp & 31);
    tmp = tmp >> 5;
    for (var i = 0; i < bit; i++) {
        this.data += String.fromCharCode(tmp & 127);
        tmp = tmp >> 7;
    }
    this.len += count - val.length;
    this.data += val;
};

Msg.prototype.getString = function () {
    var d = this.data.charCodeAt(this.pos++);
    var lenCount = d >> 5 & 3; //高2位字节数
    var byteCount = d & 31;
    for (var i = 0; i < lenCount; i++) {
        byteCount = byteCount | (this.data.charCodeAt(this.pos++) & 255) << i * 7 + 5;
    }
    if (byteCount == 0) return "";
    var count = 0,
        start = this.pos;
    for (var i = this.pos; i < this.data.length; i++) {
        var char = this.data.charCodeAt(this.pos++);
        if (char < 0x7f) {
            count += 1;
        } else if (char <= 0x7ff) {
            count += 2;
        } else if (char <= 0xFFFF) {
            count += 3;
        } else {
            count += 4;
        }
        if (count >= byteCount) {
            break;
        }
    }
    return this.data.substring(start, this.pos);
};
module.exports = NetServer;

cc._RF.pop();
},{}],"SocketMgr":[function(require,module,exports){
"use strict";
cc._RF.push(module, '0988511JJBLsZEgA1+HGHAL', 'SocketMgr');
// Script/Common/Managers/SocketMgr.js

'use strict';

//WebSocket 状态判定   ===》 WebSocket.readyState
//OPEN      连接已开启并准备好进行通信。
//CLOSING  连接正在关闭的过程中。
//CLOSED    连接已经关闭，或者连接无法建立。
//CONNECTING 连接还没开启。

//webSocket  管理器
var NetServer = require('SocketCenter');
var socketMgr = cc.Class({
    //extends: cc.Component,
    _socketCenter: null, //当前使用的socket对象
    _dict_shortEvents: null, //短对接的事件，一般是主动的请求
    _dict_longEvents: null, //长对接的事件，被动接收的事件
    _dict_pauseInfo: null, //暂停时候保存下来的信息
    _list_sendFail: null, //发送请求失败的协议
    _isHasBreak: null, //是否已经端过网络

    _heartIntervalID: null, //心跳的循环ID
    _timeOutID1: null, //请求超时ID
    _dict_recvNetSpecial: null, //接收到异常处理信息
    properties: {},

    // use this for initialization
    ctor: function ctor() {
        //GG.socketMgr = this;

        this._dict_shortEvents = {};
        this._dict_longEvents = {};
        this._dict_recvNetSpecial = {};
        this._isHasBreak = false;
    },

    //增加socket链接
    connectSocket: function connectSocket(callFunc) {
        if (this._socketCenter) return;
        //新建一个socket链接
        var host, port;
        if (cc.sys.isNative) {
            host = '192.168.0.100/player/';
            port = 8888; //默认端口
        } else {
            host = GG.webHandler.getLocalHost();
        }
        if (host.indexOf(":") > -1) host = host.substring(0, host.indexOf(":"));
        if (host == "") host = "localhost";
        if (window.wsPort) port = window.wsPort;
        var url = "ws://" + host + ":" + port + "/ws";

        this._socketCenter = new NetServer(url, null, false);
        this._socketCenter.msgReceived = this.receiveMsg.bind(this);
        var self = this;
        this._socketCenter.onOpen = function () {
            self._whenOpen(callFunc);
        };
        this._socketCenter.onClose = function () {
            self._whenClose();
        };
        this._connect();
    },

    _whenOpen: function _whenOpen(callFunc) {
        if (this._list_sendFail) {
            var netData;
            for (var i = 0; i < this._list_sendFail.length; i++) {
                netData = this._list_sendFail[i];
                this.SendMsg(netData.netType, netData.msgDict, netData.callFunc);
            }
        }
        this._list_sendFail = null;
        if (this._isHasBreak) {
            //如果已经断过链接，则重连的时候需要返回房间
            GG.topTouchLayer.closeNetRequest();
            this._cancelTimeOutCheck();
            this._isHasBreak = false;
            if (!this._isLimit) if (GG.getGameType() != G_TYPE.gameModule.platform) GG.exitHome();
        }
        if (!this._isLimit) GG.loginSocket();
        this._isLimit = false;

        if (callFunc) {
            callFunc(true);
            callFunc = null;
        }
    },
    _whenClose: function _whenClose() {
        this._connect();
        this._isHasBreak = true;
        if (this._isLimit) this._startTimeOutCheck();
    },

    _connect: function _connect() {
        if (this._socketCenter) {
            this._socketCenter.connect();
            this._addHeartInfo();
        }
    },

    getIsConnected: function getIsConnected() {
        return Boolean(this._socketCenter && this._socketCenter.isConnected());
    },

    getServerTime: function getServerTime() {
        if (this._socketCenter) return this._socketCenter.getServerTime();else return new Date().getTime();
    },

    //发送数据
    SendMsg: function SendMsg(netType, msgDict, callFunc) {
        if (this._dict_shortEvents.hasOwnProperty(netType)) return;

        var msg;
        if (NetBean[netType]) {
            msg = new NetBean[netType]();
            for (var key in msgDict) {
                msg[key] = msgDict[key];
            }
            // if(callFunc) this._dict_shortEvents[netType] = callFunc;
        } else {
            // console.log('no this nettype on server==='+netType)
            if (!this._list_sendFail) this._list_sendFail = [];
            this._list_sendFail.push({
                netType: netType,
                msgDict: msgDict,
                callFunc: callFunc
            });
            return;
        }
        if (callFunc) this._autoRegisterListenerFunc(netType, callFunc);
        //console.log('发送的数据是')
        //console.log(msg)
        this._socketCenter.send(netType, msg);
    },
    _autoRegisterListenerFunc: function _autoRegisterListenerFunc(netType, callFunc) {
        switch (netType) {
            case NetType.s_enterHouse:
                this.registerLong(NetType.r_enterHouseReturn, callFunc);
                break;
            default:
                break;
        }
    },

    //接受数据
    receiveMsg: function receiveMsg(netType, recvData) {
        //console.log('接受数据:: '+netType)
        //console.log(recvData)
        //console.log(recvData.tip.tip)
        var gameMain = cc.find('Canvas');
        //游戏已经关闭，不需要消息
        if (!gameMain || !gameMain.active) return true;

        if (GG.getGameState() == G_TYPE.webGameState.pause) {
            //游戏暂停了
            this._savePauseInfo(netType, recvData);
            return false;
        }

        //该功能函数没有完善，只会返回true
        var isOk = this._checkCode(recvData);
        if (!isOk) {
            // console.log('get server data fail'+recvData.tip.tip)
            return false;
        }
        //需要全局接收消息的协议
        this._globalNetType(netType, recvData);
        //加载场景中对某些协议进行处理
        if (GG.getIsLoading()) {
            var isStop = this._setLoadingNetData(netType, recvData);
            if (isStop) return;
        }

        var isContinue = true;
        if (this._dict_shortEvents && this._dict_shortEvents[netType]) {
            //主动请求的消息
            this._dict_shortEvents[netType](recvData);
            delete this._dict_shortEvents[netType];
            isContinue = false;
        } else if (this._dict_longEvents && this._dict_longEvents[netType]) {
            //
            this._dict_longEvents[netType](recvData);
            isContinue = false;
        }
        return isContinue;
    },

    //注册长监听事件
    registerLong: function registerLong(netType, callFunc) {
        //if(this._dict_longEvents.hasOwnProperty(netType)) return null;
        this._dict_longEvents[netType] = callFunc;
    },
    //取消某个长监听
    cancelLong: function cancelLong(netType) {
        delete this._dict_longEvents[netType];
    },
    //取消所有长监听
    cancelAllLongListen: function cancelAllLongListen() {
        for (var key in this._dict_longEvents) {
            delete this._dict_longEvents[key];
        }
        for (var key in this._dict_shortEvents) {
            delete this._dict_shortEvents[key];
        }
    },

    //================================

    //获取两个时间戳的间隔
    getOffSeconds: function getOffSeconds(startTime, endTime) {
        return Math.max(Math.floor((endTime - startTime) * 0.001), 0);
    },

    //添加心跳
    _addHeartInfo: function _addHeartInfo() {
        if (G_DATA.isNumber(this._heartIntervalID)) {
            clearInterval(this._heartIntervalID);
            this._heartIntervalID = null;
        }
        var heartLastTime = new Date().getTime();
        this._heartIntervalID = setInterval(function () {
            var now = new Date().getTime();
            if (now - heartLastTime >= 3500) {
                //心跳连接至少每3.5秒一次
                if (this._socketCenter && this._socketCenter.isConnected()) this._socketCenter.sendHeart();
                heartLastTime = new Date().getTime();
            }
        }.bind(this), 500, null);
    },

    //检查是否是可用信息
    _checkCode: function _checkCode(recvData) {
        if (!recvData.tip) return true;
        switch (recvData.tip.code) {
            case G_TYPE.serverCodeType.success:
                //success
                break;
            case G_TYPE.serverCodeType.serverErr1:
                //服务器忙
                GG.tipsMgr.showConfirmTip_ONE(recvData.tip.tip);
                /*, function () {
                 GG.exitHome();
                 }*/
                return false;
            default:
                return true;
        }
        return true;
    },

    //通过某些协议刷新玩家金币消息
    _globalNetType: function _globalNetType(netType, recvData) {
        switch (netType) {
            case NetType.r_mineHaveGrab:
                var tip = recvData.tip;
                if (tip.code != G_TYPE.serverCodeType.success) {
                    return;
                }
                var dataObj = G_OBJ.data_nbSelf();
                dataObj.balance = recvData.player.balance;
                dataObj.usableBalance = recvData.usableBalance;
                GG.getPlayer().setPlayerGold(dataObj);
                //GG.Listener.dispatchEventEX(G_TYPE.globalListener.playerGold, dataObj);
                break;
            case NetType.r_nbSelf:
                var tip = recvData.tip;
                if (!tip || tip.code == G_TYPE.serverCodeType.success) {
                    //接收成功
                    var dataObj = G_OBJ.data_nbSelf();
                    dataObj.balance = recvData.balance;
                    dataObj.usableBalance = recvData.usableBalance;
                    GG.getPlayer().setPlayerGold(dataObj);
                }
                break;
            default:
                break;
        }
    },

    //拦截场景加载中途传入的数据
    _setLoadingNetData: function _setLoadingNetData(netType, recvData) {

        switch (netType) {
            case NetType.r_bull100_reStartGame:
                //刷新进房信息_百人
                GG.curMgr.updateEnterHomeData(recvData);

                var homeData = GG.getPlayer().getInHomeData();
                if (homeData) {
                    homeData.net_resetHomeData = recvData;
                    GG.getPlayer().setInHomeData(homeData);
                }
                break;
            case NetType.r_grab_reStartGame:
                //刷新进房信息_押宝
                GG.curMgr.updateEnterHomeData(recvData);

                var homeData = GG.getPlayer().getInHomeData();
                if (homeData) {
                    homeData.net_resetHomeData = recvData;
                    GG.getPlayer().setInHomeData(homeData);
                }
                break;
            case NetType.r_enterHouseReturn:
                //加载时候可以请求入房
                return false;
            default:
                break;
        }
        return true;
    },

    //=====================暂停处理

    //保存暂停时候接收的数据
    _savePauseInfo: function _savePauseInfo(netType, recvData) {
        // console.log('when game pause ::'+netType)

        // if(!this._dict_pauseInfo) this._dict_pauseInfo = {};

        ////记录暂停前的金币
        //if(!this._goldWhenPause) {
        //    if(GG.getModuleMgr().getMyselfComp) this._goldWhenPause = GG.getModuleMgr().getMyselfComp().getGoldValue();
        //}
        //if(netType == NetType.r_otherGrab){
        //    //有人有投注行为
        //    if(!this._dict_pauseInfo[netType]) this._dict_pauseInfo[netType] = [];
        //    this._dict_pauseInfo[netType] = this._dict_pauseInfo[netType].concat(recvData.bets);
        //}else{
        //    this._dict_pauseInfo[netType] = recvData;
        //    //结算后清理
        //    if(netType == NetType.r_grabEnd) this._dict_pauseInfo[NetType.r_otherGrab] = null;
        //}

        //处理接收到的数据
        if (GG.curMgr) {
            switch (netType) {
                case NetType.r_bull100_reStartGame:
                    //刷新进房信息_百人
                    GG.curMgr.updateEnterHomeData(recvData);
                    break;
                case NetType.r_grab_reStartGame:
                    //刷新进房信息_押宝
                    GG.curMgr.updateEnterHomeData(recvData);
                    break;
                case NetType.r_grabEnd:
                    //刷新进房信息
                    GG.curMgr.setBettingEndInfo(recvData);
                    break;
                case NetType.r_mineHaveGrab:
                    //可能在暂停之前玩家已经有投注,则需要记录金额变化
                    if (recvData.player) {
                        if (!isNaN(recvData.player.balance)) {
                            GG.curMgr.getMyselfComp().setGoldValue(recvData.player.balance);
                        }
                    }
                    break;
                case NetType.r_idleTimeOut:
                    //长时间没有做操作，已经被T
                    this._dict_recvNetSpecial[NetType.r_idleTimeOut] = recvData;
                    break;
                case NetType.r_passiveOut:
                    //登录异常
                    this._dict_recvNetSpecial[NetType.r_passiveOut] = recvData;
                    break;
                default:
                    break;
            }
        }
    },
    //当恢复游戏的时候，解析暂停时候收到的消息
    parsePauseInfo: function parsePauseInfo() {
        if (GG.curMgr) {
            GG.curMgr.refreshHome();

            for (var netType in this._dict_recvNetSpecial) {
                switch (netType) {
                    case NetType.r_idleTimeOut:
                        GG.curMgr.net_idleTimeOut(this._dict_recvNetSpecial[netType]);
                        break;
                    case NetType.r_passiveOut:
                        GG.curMgr.net_passiveOut(this._dict_recvNetSpecial[netType]);
                        break;
                    default:
                        break;
                }
            }
            this._dict_recvNetSpecial = {};
            return;
        }
    },

    //=======================================请求延时判定

    //计算网络请求时间
    _startTimeOutCheck: function _startTimeOutCheck() {
        this._cancelTimeOutCheck();
        var time = 6000;
        var self = this;
        this._timeOutID1 = setTimeout(function () {
            GG.topTouchLayer.closeNetRequest();
            GG.showReconnect(function () {
                self._whenClose();
                GG.topTouchLayer.showNetRequest(true);
            });
        }, time);
    },
    //取消超时监听
    _cancelTimeOutCheck: function _cancelTimeOutCheck() {
        if (G_DATA.isNumber(this._timeOutID1)) {
            clearTimeout(this._timeOutID1);
        }
    },
    //异地登陆后取消超长监听
    setTimeOutLimit: function setTimeOutLimit(isLimit) {
        this._cancelTimeOutCheck();
        this._isLimit = isLimit;
    }

});

module.exports = socketMgr;

cc._RF.pop();
},{"SocketCenter":"SocketCenter"}],"SocketRequestMgr":[function(require,module,exports){
"use strict";
cc._RF.push(module, '8ebd8sa+V1C0ZZpdqrs0I/G', 'SocketRequestMgr');
// Script/Common/Managers/SocketRequestMgr.js

"use strict";

//socket请求数据处理,模拟http请求与回复

module.exports = cc.Class({
    properties: {
        _dict_sendInfo: null },

    // use this for initialization
    ctor: function ctor() {
        this._dict_sendInfo = {};
    },

    //进房请求
    send_inHome: function send_inHome(netData, callFunc) {
        this._dict_sendInfo[NetType.s_enterHouse] = callFunc;
        GG.socketMgr.SendMsg(NetType.s_enterHouse, netData, this._netData_inHome.bind(this));
    },
    _netData_inHome: function _netData_inHome(recvData) {
        var tip = recvData.tip;
        if (tip.code != G_TYPE.serverCodeType.success) {
            // console.log(tip.tip);
            //进入房间失败-金币不足
            if (tip.code == G_TYPE.serverCodeType.goldNotEnough) {
                // if(GG.tipsMgr) GG.tipsMgr.showConfirmTip_ONE(tip.tip, function () {
                //     //显示房间列表
                //     //是否直接跳转到房间列表
                //     // this._isFirstEnter = false;
                //     // this._oneRequestEnd();
                // }.bind(this));
            }
            if (GG.tipsMgr) GG.tipsMgr.showConfirmTip_ONE(tip.tip, function () {
                //进入房间失败
                if (tip.code == G_TYPE.serverCodeType.matchNoEnd) {
                    //已经开始的比赛未结束

                    //清理hash信息
                    // G_DATA.setCurSceneHash('',0);
                    // GG.exitHome();
                }
            });
            recvData = null;
        } else {
            //进房请求成功
            var inHomeData = G_OBJ.data_inHomeData();
            inHomeData.net_inHomeData = recvData;
            GG.getPlayer().setInHomeData(inHomeData);
        }

        if (this._dict_sendInfo[NetType.s_enterHouse]) {
            this._dict_sendInfo[NetType.s_enterHouse](recvData);
            delete this._dict_sendInfo[NetType.s_enterHouse];
        }
    }

});

cc._RF.pop();
},{}],"TablesMgr":[function(require,module,exports){
"use strict";
cc._RF.push(module, '4cc05tUHe5HaZ3zY38K9L/1', 'TablesMgr');
// Script/Common/Managers/TablesMgr.js

'use strict';

//表格操作，读取与解析

//表格对象，存放着这个表格所有的信息
var tableObj = cc.Class({
    _nameList: null,
    _typeList: null,
    _firstDict: null,
    _dataDict: null,
    _keyList: null,
    setData: function setData(_nameList, _typeList, dataDict, keyList) {
        this._nameList = _nameList;
        this._typeList = _typeList;
        this._firstDict = dataDict;
        this._keyList = keyList;
        this._dataDict = {};
    },

    getDataByID: function getDataByID(keyID) {
        if (this._dataDict[keyID]) return this._dataDict[keyID];
        var data = this._parseObj(keyID);
        this._dataDict[keyID] = data;
        return data;
    },
    getKeyList: function getKeyList() {
        return this._keyList;
    },
    //获取第一条信息的值
    getFirstData: function getFirstData() {
        var data;
        for (var key in this._firstDict) {
            data = this.getDataByID(key);
            if (data) break;
        }
        return data;
    },
    //获取所有的表格信息
    getAllData: function getAllData() {
        var index,
            data = {};
        for (var i = 0; i < this._keyList.length; i++) {
            index = this._keyList[i];
            data[index] = this.getDataByID(index);
        }
        return data;
    },

    _parseObj: function _parseObj(keyID) {
        if (!this._firstDict) return null;
        var curData = this._firstDict[keyID];
        if (!curData) {
            console.log('table parse _____ no this key :' + keyID);
            return null;
        }
        var dataObj = {};
        //第一个ID的值忽略
        for (var i = 1; i < curData.length; i++) {
            var data = this._parseByType(curData[i], this._typeList[i], this._nameList[i]);
            dataObj[this._nameList[i]] = data;
        }
        return dataObj;
    },
    _parseByType: function _parseByType(data, type, objName) {
        if (data == undefined || data == null) return null;

        try {
            switch (type) {
                case 'key_int':
                    return parseInt(data);
                case 'number':
                    return parseFloat(data);
                case 'string':
                    return data.toString();
                case 'json':
                    data = data.replace(/\'/g, '\"');
                    return JSON.parse(data);
                case 'calculate':
                    return data.toString();

                default:
                    return null;
            }
        } catch (e) {
            console.log(e);
            // console.log('table parse _______ fileName =' + this._fileName + ';  objName =' + objName + ';  error obj =' + data)
            return null;
        }
    }

});

//表格管理器
var tableMgr = cc.Class({
    //extends : cc.Component,
    properties: {
        _tDict: null,
        _callFunc: null,
        _list_reloadNames: null
    },
    ctor: function ctor() {
        //GG.tableMgr = this;
    },
    getTable: function getTable(tableName) {
        return this._tDict[tableName];
    },

    //导入表格
    reloadTables: function reloadTables(tableNames, callFunc) {
        var type = Object.prototype.toString.call(tableNames);
        switch (type) {
            case '[object String]':
                this._list_reloadNames = [tableNames];
                break;
            case '[object Array]':
                this._list_reloadNames = tableNames;
                break;
            case '[object Object]':
                this._list_reloadNames = [];
                for (var key in tableNames) {
                    this._list_reloadNames.push(tableNames[key]);
                }
                break;
            default:
                return;
        }
        this._callFunc = callFunc;
        this._loadStep();
    },
    _loadStep: function _loadStep() {
        if (this._list_reloadNames.length <= 0) {
            if (this._callFunc) {
                this._callFunc();
                this._callFunc = null;
            }
            return;
        }
        //var name = this._list_reloadNames[0];
        var name = this._list_reloadNames.splice(0, 1);
        this._loadTable(name);
    },
    _loadTable: function _loadTable(tableName) {
        if (this._tDict && this._tDict[tableName]) {
            this._loadStep();
            return;
        }
        cc.loader.loadRes("Tables/" + tableName, function (err, data) {
            if (err) {
                console.log(err);
                if (this._callFunc) {
                    this._callFunc();
                    this._callFunc = null;
                }
            } else {
                if (!this._tDict) this._tDict = {};
                this._tDict[tableName] = this._sortData(data);
                this._loadStep();
            }
        }.bind(this));
    },

    _sortData: function _sortData(xdata) {
        if (!xdata) {
            console.log('table is null');
            return null;
        }
        this._data = xdata;
        var _nameList, _typeList;
        var _xData = {};
        var _keyList = [];
        for (var i = 0; i < xdata.length; i++) {
            switch (i) {
                case 0:
                    //tips
                    break;
                case 1:
                    //dataName
                    _nameList = xdata[i];
                    break;
                case 2:
                    //dataType
                    _typeList = xdata[i];
                    break;
                default:
                    //dataDetail
                    var keyID = xdata[i][0];
                    _keyList.push(keyID);
                    _xData[keyID] = xdata[i];
                    break;
            }
        }

        var table = new tableObj();
        table.setData(_nameList, _typeList, _xData, _keyList);
        return table;
    },

    //游戏一开始加载所有的配置
    reloadConfigOnStart: function reloadConfigOnStart(callFunc) {
        this.reloadTables(G_RES_URL.dict_tablesName, callFunc);
    },

    onDestroy: function onDestroy() {
        //for(var tableName in this._tDict){
        //    cc.loader.release("Tables/"+tableName);
        //}
    }
});

module.exports = tableMgr;

cc._RF.pop();
},{}],"TipsMgr":[function(require,module,exports){
"use strict";
cc._RF.push(module, '1d79e9uH8xIC6c4VzCQUoc6', 'TipsMgr');
// Script/Common/Managers/TipsMgr.js

'use strict';

//提示弹窗类的管理器

cc.Class({
    extends: cc.Component,
    properties: {
        _curTxtTipNum: null,
        _confirmTag: null, //确认框显示标记
        _list_hideTips: null, //隐藏并可复用的tip

        prefab_confirmTip: cc.Prefab, //可点击确定的弹窗
        prefab_txtTip: cc.Prefab, //文本提示

        node_countDownProgress: cc.Node, //图形文字倒计时提示
        node_systemTip: cc.Node, //系统提示
        Node_topNotice: cc.Node },

    // use this for initialization
    onLoad: function onLoad() {
        GG.tipsMgr = this;

        this._progressCompName = 'Obj_countDownProgress';
        this._systemTipCompName = 'Obj_systemTip';
        this._txtTipCompName = 'Obj_txtTip';
        this._confirmTipCompName = 'Obj_confirmTip';
        this._topNoticeCompName = 'Obj_notice';
        this._dict_onlyOne = {};
        this._curTxtTipNum = 0;
        this._commonScale = G_Config_common.frameScale;
        this._confirmTag = 3;
        this._list_hideTips = [];
    },

    //显示纯文本弹窗, pos为空默认显示在中央, 可重复使用的tip
    showTxtTip: function showTxtTip(dataObj) {
        var tip = this._getTxtTip();;
        tip.showTip(dataObj);
        return tip;
    },
    _getTxtTip: function _getTxtTip() {
        var tip = this._list_hideTips.splice(0, 1)[0];
        if (!tip) {
            tip = this._getNewTip();
        }

        return tip.getComponent(this._txtTipCompName);
    },
    _getNewTip: function _getNewTip() {
        var tip = cc.instantiate(this.prefab_txtTip);
        //this.node.addChild(tip, 0, this._curTxtTipNum);
        tip.parent = this.node;
        //tip.scale = this._commonScale;
        tip.getComponent(this._txtTipCompName).bindMgr(this);
        this._curTxtTipNum += 1;
        return tip;
    },
    oneTipHide: function oneTipHide(tipNode) {
        var tipComp = tipNode.getComponent(this._txtTipCompName);
        if (tipComp) {
            if (!this._dict_onlyOne[tipComp.getTipIndex()]) {
                this._list_hideTips.push(tipNode);
            }
        }
    },

    //=---------------------------只显示一次的tip

    setTextTip: function setTextTip(tipNodeComp) {
        if (tipNodeComp) this._diyTipComp = tipNodeComp;
    },

    showOnlyOne: function showOnlyOne(dataObj) {
        var tip;
        var tipIndex = dataObj.tipIndex;
        if (this._diyTipComp) {
            tip = this._diyTipComp;
        } else {
            if (!this._dict_onlyOne) this._dict_onlyOne = {};
            tip = this._dict_onlyOne[tipIndex];
        }

        if (tip) {
            if (tip.getIsShow()) {
                tip.forceChangeCountDown(dataObj.retainTime);
            } else {
                tip.showTip(dataObj);
            }
        } else {
            tip = this._getNewTip().getComponent(this._txtTipCompName);
            this._dict_onlyOne[tipIndex] = tip;
            tip.showTip(dataObj);
        }
        return tip;
    },

    //======================================

    //显示倒计时文字图形
    showProgressCountDown: function showProgressCountDown(time, callFunc) {
        this.node_countDownProgress.getComponent(this._progressCompName).showCountDown(time, callFunc);
    },
    getProgressLeaveTime: function getProgressLeaveTime() {
        return this.node_countDownProgress.getComponent(this._progressCompName).getLeaveTime();
    },
    forceProgressEnd: function forceProgressEnd() {
        this.node_countDownProgress.getComponent(this._progressCompName).forceEnd();
    },

    //======================================

    //显示可点击确定的弹窗   单选按钮
    showConfirmTip_ONE: function showConfirmTip_ONE(showStr, callFunc) {
        var confirmPage = this.node.getChildByTag(this._confirmTag);
        if (!confirmPage) {
            confirmPage = cc.instantiate(this.prefab_confirmTip);
            confirmPage.parent = this.node;
            confirmPage.tag = 3;
        }
        confirmPage.getComponent(this._confirmTipCompName).showContentEx(showStr, callFunc);
    },
    //多选按钮
    showConfirmTip_TWO: function showConfirmTip_TWO(showStr, callFunc, callFunc2) {
        var confirmPage = this.node.getChildByTag(this._confirmTag);
        if (!confirmPage) {
            confirmPage = cc.instantiate(this.prefab_confirmTip);
            confirmPage.parent = this.node;
            confirmPage.tag = 3;
        }
        confirmPage.getComponent(this._confirmTipCompName).showContent(showStr, callFunc, callFunc2);
    },

    //清理弹出的确认框
    clearConfirm: function clearConfirm() {
        var confirm = this.node.getChildByTag(this._confirmTag);
        if (confirm) {
            var comp = confirm.getComponent(this._confirmTipCompName);
            if (comp && confirm.active) comp.closePage();
        }
    },

    //注册确认框的打开关闭事件监听   isRegister: 是否开启监听
    registerConfirm: function registerConfirm(func, isRegister) {
        if (!this.node) return;
        var confirm = this.node.getChildByTag(this._confirmTag);
        if (confirm) {
            confirm.getComponent(this._confirmTipCompName).registerFunc(func, isRegister);
        }
    },

    //======================================

    //显示体统提示
    showSystem: function showSystem(showStr, pos, time, callBack) {
        this.node_systemTip.getComponent(this._systemTipCompName).showContent(showStr, pos, time, callBack);
    },

    //======================================

    //显示公告信息
    addNotice: function addNotice(msg) {
        this.Node_topNotice.getComponent(this._topNoticeCompName).addMsg(msg);
    },

    //添加禁止点击层，仅对touch事件吞噬，对mouse事件没有效果;
    setTouchLimit: function setTouchLimit(isLimit) {
        var parent = this.node.parent;
        if (isLimit) parent.on(cc.Node.EventType.TOUCH_START, this._limitCall, this);else parent.off(cc.Node.EventType.TOUCH_START, this._limitCall, this);
    },
    _limitCall: function _limitCall() {}

});

cc._RF.pop();
},{}],"Tools":[function(require,module,exports){
"use strict";
cc._RF.push(module, '7371f6mFJVCgZ3MshobzVAP', 'Tools');
// Script/Common/Tools.js

"use strict";

//项目中可以通用的工具

var tools = {
    //返回数值包括最大最小值
    getRandomArea: function getRandomArea(downNum, upNum) {
        return parseInt(Math.random() * (upNum - downNum + 1) + downNum);
    },
    //返回随机的bool值是或否
    getRandomBool: function getRandomBool() {
        return Boolean(Math.random() > 0.5);
    },
    //使用%s，%d重新配置字符串，如 this.formatStr('这是:%s',9099)  ==> 这是:9099
    formatStr: function formatStr() {
        var t = arguments,
            e = t.length;
        if (e < 1) return "";
        var i = /(%d)|(%s)/,
            n = 1,
            r = t[0],
            s = "string" == typeof r && i.test(r);
        if (s) for (var o = /%s/; n < e; ++n) {
            var a = t[n],
                c = "number" == typeof a ? i : o;
            c.test(r) ? r = r.replace(c, a) : r += " " + a;
        } else if (e > 1) for (; n < e; ++n) {
            r += " " + t[n];
        } else r = "" + r;
        return r;
    },
    //改变金钱的单位
    changeMoney: function changeMoney(money) {
        //var rate=null,name = '',dict = G_Config_common.dict_moneyUnit;
        //for(var rateLimit in dict){
        //    if(num >= rateLimit){
        //        rate = rateLimit;
        //        name = dict[rateLimit];
        //    }else break;
        //}
        //if(!rate) return num;
        //var limitLen = 4;       //将金额的数值控制在4位数
        //var value = parseFloat((num / rate).toFixed(3)).toString();
        //var valueLen = value.length;
        //if(valueLen >limitLen){
        //    var pointIndex = value.indexOf('.');
        //    if(pointIndex < 0){
        //        //整数
        //        value = value.substring(0,limitLen+1);
        //    }else{
        //        //有小数
        //        if(pointIndex >= limitLen) value = value.substring(0,limitLen);
        //        else value = value.substring(0,limitLen+1);
        //    }
        //}
        //return value+name
        var zeroCnt = 0,
            nega = ""; //带多少个0，负数标志位
        if (money < 0) {
            money = -money;
            nega = "-";
        }
        var tmp = money;
        while ((tmp = tmp / 10) >= 1) {
            zeroCnt++;
        }if (zeroCnt <= 3) return nega + money;
        for (var i = 0, tmp = 1; i < zeroCnt - 3; i++) {
            money /= 10;
            tmp = tmp == 10000 ? 10 : tmp * 10;
        }
        return nega + parseInt(money) / (10000 / tmp) + (zeroCnt < 8 ? "万" : zeroCnt < 12 ? "亿" : "兆");
    },
    //千分符，千位加逗号
    formatBy1000: function formatBy1000(money) {
        return ("" + money).replace(/(\d{1,3})(?=(\d{3})+(?:$|\D))/g, "$1,");
    },
    //获取当前的时间戳, 这种获取方式可以精确到毫秒
    getTimeStamp: function getTimeStamp() {
        //var timestamp = Date.parse(new Date());  //精确到秒
        return new Date().valueOf();
    },

    quickSort: function quickSort(array) {
        function sort(prev, numsize) {
            var nonius = prev;
            var j = numsize - 1;
            var flag = array[prev];
            if (numsize - prev > 1) {
                while (nonius < j) {
                    for (; nonius < j; j--) {
                        if (array[j] < flag) {
                            array[nonius++] = array[j]; //a[i] = a[j]; i += 1;
                            break;
                        };
                    }
                    for (; nonius < j; nonius++) {
                        if (array[nonius] > flag) {
                            array[j--] = array[nonius];
                            break;
                        }
                    }
                }
                array[nonius] = flag;
                sort(0, nonius);
                sort(nonius + 1, numsize);
            }
        }
        sort(0, array.length);
        return array;
    },

    //名字规范  name为传入的名字， len为需要留住的字符长度， isNot多出的字符用...表示（true表示要）
    getNameLimit: function getNameLimit(name, len, isNot) {
        var str, maxNameLength;
        len ? maxNameLength = len : maxNameLength = G_Config_common.num_maxNameLen;
        var reg = /^[\u4E00-\u9FA5]+$/;
        var wordsNum = 0;
        var newStr = '';
        for (var i = 0; i < name.length; i++) {
            if (wordsNum >= maxNameLength) {
                if (isNot) newStr = newStr;else newStr += '...';
                break;
            }
            str = name[i];
            newStr += str;
            if (reg.test(str)) {
                wordsNum += 2;
            } else {
                wordsNum += 1;
            }
        }
        return newStr;
    },
    objectLog: function objectLog(object) {
        var str = '{';
        for (var attrName in object) {
            str += attrName + ':' + object[attrName] + ',';
        }
        str += '}';
    },
    //适配初始节点大小
    adaptSize: function adaptSize(curW, curH) {
        var designSize = cc.view.getDesignResolutionSize();
        var rateW = cc.visibleRect.width / designSize.width;
        var rateH = cc.visibleRect.height / designSize.height;
        return { width: curW * rateW, height: curH * rateH };
    },
    //适配初始节点位置
    adaptPos: function adaptPos(pos) {
        var designSize = cc.view.getDesignResolutionSize();
        var rateW = cc.visibleRect.width / designSize.width;
        var rateH = cc.visibleRect.height / designSize.height;
        return cc.p(pos.x * rateW, pos.y * rateH);
    },

    //更新头像的显示,所有头像的更新都用这个接口
    resetUrlImg: function resetUrlImg(urlNode, newFrame) {
        if (urlNode._firstSize === undefined) urlNode._firstSize = { width: urlNode.width, height: urlNode.height };
        urlNode.getComponent(cc.Sprite).spriteFrame = newFrame;
        urlNode.width = urlNode._firstSize.width;
        urlNode.height = urlNode._firstSize.height;
    },
    //根据图片名字设置图片
    setHeadImg: function setHeadImg(headNode, imgName) {
        if (G_Config_common.isLocal) {
            this._headUrl = "Heads/" + 'head01';
            cc.loader.loadRes(this._headUrl, cc.SpriteFrame, function (err, spriteFrame) {
                G_TOOL.resetUrlImg(headNode, spriteFrame);
            });
        } else {
            if (headNode._firstFrame === undefined) headNode._firstFrame = headNode.getComponent(cc.Sprite).spriteFrame;
            if (imgName) {
                this._headUrl = G_DATA.getResNetRoot(imgName);
                //this._headUrl = 'http://192.168.0.109:8080/classic/res/raw-assets/Texture/Common/head/head00.jpg';

                GG.resMgr.getHeadImg(this._headUrl, function (frame) {
                    if (frame) {
                        G_TOOL.resetUrlImg(headNode, frame);
                    } else {
                        headNode.getComponent(cc.Sprite).spriteFrame = headNode._firstFrame;
                    }
                });

                // cc.loader.load(this._headUrl, function (err, texture) {
                //     if(err){
                //         console.log(err)
                //         headNode.getComponent(cc.Sprite).spriteFrame = headNode._firstFrame;
                //     }else{
                //         if(texture){
                //             var frame=new cc.SpriteFrame(texture);
                //             G_TOOL.resetUrlImg(headNode, frame);
                //         }else {
                //             headNode.getComponent(cc.Sprite).spriteFrame = headNode._firstFrame;
                //         }
                //     }
                // });
            }
        }
    },

    //获取匀速的时间
    getUniformTime: function getUniformTime(startPos, targetPos, maxTime) {
        var len = cc.pDistance(startPos, targetPos);
        return maxTime * (len / cc.visibleRect.width);
    }

};

window.G_TOOL = tools;

cc._RF.pop();
},{}],"TypeConfig":[function(require,module,exports){
"use strict";
cc._RF.push(module, '84957MQ/nJJGIYd0VCQ2IhU', 'TypeConfig');
// Script/Common/Configs/TypeConfig.js

'use strict';

//游戏中各种类型信息的定义

var typeConfig = {

    webGameState: cc.Enum({
        pause: 1,
        running: 2
    }),

    gameModule: cc.Enum({
        platform: 0,
        bull100: 1,
        grab: 2,
        classic: 3
    }),

    //场景名称，用于切换场景
    sceneName: cc.Enum({
        platform: 'Platform',
        bull100: 'Poker_Bull100',
        grab: 'Poker_Grab',
        classic: 'Poker_classic',
        loadingScene: 'InHomeLoading'
    }),

    //http请求
    http_gameModule: cc.Enum({
        platform: 0,
        bull100: 1,
        classic: 2,
        grab: 3
    }),

    grabState: cc.Enum({
        wait: 0, //等待
        readyStart: 1, //
        givePoker: 2, //
        touchTables: 3, //
        showFlag: 4, //
        flyGold: 5, //
        readyTouchTable: 6, //
        isBetting: 7 }),

    //游戏流程的状态机制
    classicState: cc.Enum({
        wait: 0, //游戏等待开始
        readyStart: 1, //游戏准备开始（播放开始动画时候）
        givePoker: 2, //正在发牌
        grabDealer: 3, //正在抢庄
        setScore: 4, //正在下注
        calculate: 5, //算牌时间
        showResult: 6 }),

    //百人大战进程
    bull100State: cc.Enum({
        wait: 0, //游戏等待时间
        startReady: 1, //游戏投注前的表现
        betting: 2, //游戏开始投注
        endEff: 3 }),

    //牌型的值
    pokerResult: cc.Enum({
        bull_0: 0, //没牛
        bull_1: 1,
        bull_2: 2,
        bull_3: 3,
        bull_4: 4,
        bull_5: 5,
        bull_6: 6,
        bull_7: 7,
        bull_8: 8,
        bull_9: 9,
        bull_10: 10, //牛牛
        bull_11: 11,
        bull_12: 12
    }),

    //卡牌的类型  大小排列为黑桃 红桃 草花 方块
    pokerType: cc.Enum({
        blackHeart: 1, //黑色桃心
        redHeart: 2, //红色桃心
        flower: 3, //梅花
        block: 4 }),

    playerType: cc.Enum({
        system: 0,
        owner: 1,
        others: 2
    }),

    net_gameModule: cc.Enum({
        bull100: 'BULL_100',
        grab: 'BULL_BAO',
        classic: 'BULL_CLASSIC'
    }),
    net_gameModule2: cc.Enum({
        bull100: 'bull100',
        grab: 'bullBao',
        classic: 'bullclassic'
    }),

    //桌子大小类型
    tableType: cc.Enum({
        big: 1,
        min: 2
    }),

    //tip显示的类型
    tipType: cc.Enum({}),

    //接受服务端消息后的code类型
    serverCodeType: cc.Enum({
        success: '0',
        serverErr1: '00001', //服务器忙
        remoteLanding: '00005', //异地登陆
        goldNotEnough: '200002', //您剩余金币不足
        upDealerErr1: '200003', //您剩余金币不足,无法上庄
        matchNonExistent: '500001', //赛事不存在
        upDealerErr2: '600002', //未达到最低上庄金额
        upDealerErr3: '600013', //输入的上庄金额格式错误
        noBetting: '00003', //没有投注
        downDealer1: '600016', //您已在庄，下庄系统将帮您打完本局！
        downDealer2: '600017', //您已从上庄列表退出竞庄！
        downDealer3: '600012', //您已下庄!
        downDealer4: '600018', //您剩余金币不足,已下庄!
        downDealer5: '600019', //您当期已下庄!
        continueFail1: '200004', //庄家金币不足续庄
        continueFail2: '600008', //庄家被动续庄
        warnDealer1: '600007', //友情提示: 您的上庄资金不足80%，请及时续庄！
        warnDealer2: '600009',
        upDealerSuccess: '600010', //成为本局庄家
        continueFail3: '600014', //输入的续庄金额格式错误
        continueSuccess: '600011', //输入的续庄金额格式错误
        needLogin: '10001', //未登陆，请登陆
        betNotPermitCoin: '400004', //下分金额为非许可值
        betNotPermitBet: '400005', //非法下注类型
        matchNoEnd: '300003', //已经 开始的对局未结束
        chooseErrorMoney: '400001' }),

    //
    dealerNetType: cc.Enum({
        upDealer: 1, //上庄
        continueDealer: 2, //续庄
        getList: 3 }),

    //滚动层的类型
    scrollType: cc.Enum({
        horizontal: 1, //横向放置单元
        vertical: 2, //竖向放置单元
        bag: 3 }),

    //公告的通知方式枚举
    //announcementType : cc.Enum({
    //    general : 'general',                                                                                                  //一般公告
    //    importance : 'importance',                                                                                           //重要公告
    //    personal : 'personal',                                                                                                //个人公告
    //    allAgent : 'allAgent',                                                                                                //全局代理商
    //    appointAgent : 'appointAgent',                                                                                       //指定代理商
    //    enable : 'enable',                                                                                                     //启用
    //    disable : 'disable',                                                                                                  //取消
    //}),

    //走势图，判定是什么牌型，如梅花
    pokerTypeStr: cc.Enum({
        spade: 'SPADE', //黑桃
        diamond: 'DIAMOND', //方片
        club: 'CLUB', //梅花
        heart: 'HEART' }),

    //座位的定义
    seatsIndex: cc.Enum({
        seat_1: 1,
        seat_2: 2,
        seat_3: 3,
        seat_4: 4,
        seat_5: 5,
        seat_6: 6,
        seat_7: 7,
        seat_8: 8
    }),

    //本地存储的数据类型
    localDataType: cc.Enum({
        inHome: 1, //进房信息
        testType: 2 }),

    //全局的监听
    globalListener: cc.Enum({
        playerGold: 'playerGold' }),

    webMobile_design: cc.Enum({
        toolbar_show: 1,
        toolbar_hide: 2
    })
};

window.G_TYPE = typeConfig;

cc._RF.pop();
},{}],"WebMobile_handler":[function(require,module,exports){
"use strict";
cc._RF.push(module, 'fedd6zXtfZHDLTlXFNJ1otd', 'WebMobile_handler');
// Script/Common/Managers/WebMobile_handler.js

"use strict";

module.exports = cc.Class({
    properties: {
        _isGameStart: null,
        _type_toolbar: null,
        _isVertical: null
    },

    // use this for initialization
    ctor: function ctor() {
        this._isGameStart = false;
        this._isVertical = false;
        if (document) {
            this._initMobileWeb();
        }
    },

    gameStart: function gameStart() {
        this._isGameStart = true;
    },

    _initMobileWeb: function _initMobileWeb() {
        this._addHideListener();
        if (cc.sys.isMobile) this._addResizeListener();
    },

    _addResizeListener: function _addResizeListener() {
        // cc.view.resizeWithBrowserSize(true);
        // cc.view.adjustViewPort(true);
        // cc.view.setOrientation(cc.macro.ORIENTATION_LANDSCAPE);
        window.addEventListener("resize", function () {
            if (this._isGameStart) {
                var isLandscape = document.body.clientWidth > document.body.clientHeight;
                if (isLandscape) {
                    this._isVertical = false;
                    if (this._lastHeight != window.innerHeight) {
                        if (this._lastHeight && this._lastHeight > window.innerHeight) {
                            //show toolbar
                            this._doSafariHandler();
                            return;
                        }
                        this._lastHeight = window.innerHeight;
                    }
                }
                this._isVertical = !isLandscape;
                this._type_toolbar = G_TYPE.webMobile_design.toolbar_hide;
                this.adaptSceneSize();
            }
        }.bind(this));
    },

    _addHideListener: function _addHideListener() {
        var showStateName, showChange;
        if (typeof document.hidden !== "undefined") {
            showChange = "visibilitychange";
            showStateName = "visibilityState";
        } else if (typeof document.mozHidden !== "undefined") {
            showChange = "mozvisibilitychange";
            showStateName = "mozVisibilityState";
        } else if (typeof document.msHidden !== "undefined") {
            showChange = "msvisibilitychange";
            showStateName = "msVisibilityState";
        } else if (typeof document.webkitHidden !== "undefined") {
            showChange = "webkitvisibilitychange";
            showStateName = "webkitVisibilityState";
        }
        var self = this;
        document.addEventListener(showChange, function () {
            if (self._isGameStart) {
                //var isShow = Boolean(document[showStateName]=="visible");
                if (Boolean(document[showStateName] == "visible")) {
                    //回到游戏
                    GG._resumeWebGame();
                } else {
                    //暂停游戏
                    GG._pauseWebGame();
                }
            }
        }, false);
    },

    _doSafariHandler: function _doSafariHandler() {
        var userAgent = navigator.userAgent;
        if (userAgent.indexOf('Safari') > -1) {
            this._type_toolbar = G_TYPE.webMobile_design.toolbar_show;
            var offH = this._firstDesignSize.height * 0.13;
            this._changeDesign(this._firstDesignSize.width, this._firstDesignSize.height + offH);
            this.adaptSceneSize();
        }
    },

    _scrollGame: function _scrollGame(offH) {
        setTimeout(function () {
            window.scrollTo(0, offH * 0.22);
        }, 100);
    },

    _changeDesign: function _changeDesign(width, height) {
        this._designWidth = width;
        this._designHeight = height;
    },

    _initData: function _initData() {
        if (this._firstDesignSize) return;
        var designSize = cc.view.getDesignResolutionSize();
        if (designSize.width > designSize.height) {
            this._firstDesignSize = { width: designSize.width, height: designSize.height };
        } else {
            this._firstDesignSize = { width: designSize.height, height: designSize.width };
        }
        this._lastHeight = window.innerHeight < window.innerWidth ? window.innerHeight : window.innerWidth;

        this._changeDesign(this._firstDesignSize.width, this._firstDesignSize.height);
        this._type_toolbar = G_TYPE.webMobile_design.toolbar_hide;
    },
    adaptSceneSize: function adaptSceneSize() {
        this._initData();

        if (cc.sys.isMobile) {
            if (document) {
                if (this._isVertical) {
                    cc.view.setOrientation(cc.macro.ORIENTATION_PORTRAIT);
                    cc.view.setDesignResolutionSize(this._firstDesignSize.width, this._firstDesignSize.height, cc.ResolutionPolicy.SHOW_ALL);
                } else {
                    cc.view.setOrientation(cc.macro.ORIENTATION_LANDSCAPE);
                    switch (this._type_toolbar) {
                        case G_TYPE.webMobile_design.toolbar_hide:
                            cc.view.setDesignResolutionSize(this._firstDesignSize.width, this._firstDesignSize.height, cc.ResolutionPolicy.EXACT_FIT);
                            break;
                        case G_TYPE.webMobile_design.toolbar_show:
                            setTimeout(function () {
                                cc.view.setDesignResolutionSize(this._designWidth, this._designHeight, cc.ResolutionPolicy.FIXED_HEIGHT);
                                this._scrollGame(this._designHeight - this._firstDesignSize.height);
                            }.bind(this), 200);
                            break;
                        default:
                            cc.view.setDesignResolutionSize(this._firstDesignSize.width, this._firstDesignSize.height, cc.ResolutionPolicy.EXACT_FIT);
                            break;
                    }
                }
            } else {
                cc.view.setDesignResolutionSize(this._firstDesignSize.width, this._firstDesignSize.height, cc.ResolutionPolicy.EXACT_FIT);
            }
        } else {
            if (window.innerHeight < this._firstDesignSize.height) {
                if (window.innerWidth <= this._firstDesignSize.width) {
                    cc.view.setDesignResolutionSize(this._firstDesignSize.width, this._firstDesignSize.height, cc.ResolutionPolicy.FIXED_WIDTH);
                } else cc.view.setDesignResolutionSize(this._firstDesignSize.width, this._firstDesignSize.height, cc.ResolutionPolicy.SHOW_ALL);
            } else cc.view.setDesignResolutionSize(this._firstDesignSize.width, this._firstDesignSize.height, cc.ResolutionPolicy.SHOW_ALL);
        }
    },

    getLocalHost: function getLocalHost() {
        return window.location.host;
    }

});

cc._RF.pop();
},{}]},{},["Config_bull100","Config_chinese","Config_classic","Config_common","Config_dialogUrl","Config_grab","Config_resourceUrl","NetConfig","Object_config","TypeConfig","Global","Global_listener","AudioMgr","GameData","HTTPMgr","LocalStorage","ReloadResMgr","SocketCenter","SocketMgr","SocketRequestMgr","TablesMgr","TipsMgr","WebMobile_handler","Tools","Part_playerBlock_Gold","Part_dialog_exchangePages","M_Player","M_TopRequestLayer","AutoDealing","Obj_calculateResult","Obj_cell_trend","Obj_coinEffect","Obj_confirmTip","Obj_countDownProgress","Obj_dealScroll","Obj_dealerListCell","Obj_dealerListSlider","Obj_dealerWordEffect","Obj_dialogAccountCell","Obj_dialogPlayerListCell","Obj_dialogRecordCell","Obj_effect_inHomeLoading","Obj_goldResultEffect","Obj_goldsContainer","Obj_leftTopMenu","Obj_notice","Obj_onPokerResult","Obj_optionButton","Obj_poker","Obj_rankItem_friend","Obj_roomListCell","Obj_scrollValue","Obj_seatsContainer","Obj_setTouchEffect","Obj_systemTip","Obj_topOneLayer","Obj_touchLimit","Obj_txtTip","Obj_uiContainer","Obj_winRankHead","BaseDialog","BaseManager","BaseUI","GameStart","Bull100_Manager","Bull100_btnContainer","Bull100_playerBlock","Bull100_playerContainer","Bull100_pokerContainer","Bull100_pokerResultContainer","Bull100_showResult","Bull100_table","Bull100_tableContainer","Bull100_topEffect","Grab_topEffect","Grab_Manager","Grab_btnContainer","Grab_goldContainer","Grab_oneTable","Grab_playerBlock","Grab_playersLayer","Grab_pokerLayer","Grab_tablesLayer","Grab_topLayer","Platform_Manager","Platform_bottomBtns","Platform_leftRank","Platform_topInfo","Platform_ui_enter","Prefab_dialog_account","Prefab_dialog_announcement","Prefab_dialog_bull100Trend","Prefab_dialog_dealerList","Prefab_dialog_grabTrend","Prefab_dialog_playerList","Prefab_dialog_record","Prefab_dialog_rules","Prefab_dialog_rulesInHome","Prefab_dialog_set","Prefab_dialog_trend","Prefab_roomList"])

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0cy9TY3JpcHQvQ29tbW9uL01hbmFnZXJzL0F1ZGlvTWdyLmpzIiwiYXNzZXRzL1NjcmlwdC9PYmplY3RzL0F1dG9EZWFsaW5nLmpzIiwiYXNzZXRzL1NjcmlwdC9WaWV3cy9CYXNlRGlhbG9nLmpzIiwiYXNzZXRzL1NjcmlwdC9WaWV3cy9CYXNlTWFuYWdlci5qcyIsImFzc2V0cy9TY3JpcHQvVmlld3MvQmFzZVVJLmpzIiwiYXNzZXRzL1NjcmlwdC9WaWV3cy9TY2VuZV9CdWxsMTAwL0J1bGwxMDBfTWFuYWdlci5qcyIsImFzc2V0cy9TY3JpcHQvVmlld3MvU2NlbmVfQnVsbDEwMC9CdWxsMTAwX2J0bkNvbnRhaW5lci5qcyIsImFzc2V0cy9TY3JpcHQvVmlld3MvU2NlbmVfQnVsbDEwMC9CdWxsMTAwX3BsYXllckJsb2NrLmpzIiwiYXNzZXRzL1NjcmlwdC9WaWV3cy9TY2VuZV9CdWxsMTAwL0J1bGwxMDBfcGxheWVyQ29udGFpbmVyLmpzIiwiYXNzZXRzL1NjcmlwdC9WaWV3cy9TY2VuZV9CdWxsMTAwL0J1bGwxMDBfcG9rZXJDb250YWluZXIuanMiLCJhc3NldHMvU2NyaXB0L1ZpZXdzL1NjZW5lX0J1bGwxMDAvQnVsbDEwMF9wb2tlclJlc3VsdENvbnRhaW5lci5qcyIsImFzc2V0cy9TY3JpcHQvVmlld3MvU2NlbmVfQnVsbDEwMC9CdWxsMTAwX3Nob3dSZXN1bHQuanMiLCJhc3NldHMvU2NyaXB0L1ZpZXdzL1NjZW5lX0J1bGwxMDAvQnVsbDEwMF90YWJsZUNvbnRhaW5lci5qcyIsImFzc2V0cy9TY3JpcHQvVmlld3MvU2NlbmVfQnVsbDEwMC9CdWxsMTAwX3RhYmxlLmpzIiwiYXNzZXRzL1NjcmlwdC9WaWV3cy9TY2VuZV9CdWxsMTAwL0VmZmVjdC9CdWxsMTAwX3RvcEVmZmVjdC5qcyIsImFzc2V0cy9TY3JpcHQvQ29tbW9uL0NvbmZpZ3MvQ29uZmlnX2J1bGwxMDAuanMiLCJhc3NldHMvU2NyaXB0L0NvbW1vbi9Db25maWdzL0NvbmZpZ19jaGluZXNlLmpzIiwiYXNzZXRzL1NjcmlwdC9Db21tb24vQ29uZmlncy9Db25maWdfY2xhc3NpYy5qcyIsImFzc2V0cy9TY3JpcHQvQ29tbW9uL0NvbmZpZ3MvQ29uZmlnX2NvbW1vbi5qcyIsImFzc2V0cy9TY3JpcHQvQ29tbW9uL0NvbmZpZ3MvQ29uZmlnX2RpYWxvZ1VybC5qcyIsImFzc2V0cy9TY3JpcHQvQ29tbW9uL0NvbmZpZ3MvQ29uZmlnX2dyYWIuanMiLCJhc3NldHMvU2NyaXB0L0NvbW1vbi9Db25maWdzL0NvbmZpZ19yZXNvdXJjZVVybC5qcyIsImFzc2V0cy9TY3JpcHQvQ29tbW9uL01hbmFnZXJzL0dhbWVEYXRhLmpzIiwiYXNzZXRzL1NjcmlwdC9WaWV3cy9HYW1lU3RhcnQuanMiLCJhc3NldHMvU2NyaXB0L0NvbW1vbi9HbG9iYWxfbGlzdGVuZXIuanMiLCJhc3NldHMvU2NyaXB0L0NvbW1vbi9HbG9iYWwuanMiLCJhc3NldHMvU2NyaXB0L1ZpZXdzL1NjZW5lX0dyYWIvR3JhYl9NYW5hZ2VyLmpzIiwiYXNzZXRzL1NjcmlwdC9WaWV3cy9TY2VuZV9HcmFiL0dyYWJfYnRuQ29udGFpbmVyLmpzIiwiYXNzZXRzL1NjcmlwdC9WaWV3cy9TY2VuZV9HcmFiL0dyYWJfZ29sZENvbnRhaW5lci5qcyIsImFzc2V0cy9TY3JpcHQvVmlld3MvU2NlbmVfR3JhYi9HcmFiX29uZVRhYmxlLmpzIiwiYXNzZXRzL1NjcmlwdC9WaWV3cy9TY2VuZV9HcmFiL0dyYWJfcGxheWVyQmxvY2suanMiLCJhc3NldHMvU2NyaXB0L1ZpZXdzL1NjZW5lX0dyYWIvR3JhYl9wbGF5ZXJzTGF5ZXIuanMiLCJhc3NldHMvU2NyaXB0L1ZpZXdzL1NjZW5lX0dyYWIvR3JhYl9wb2tlckxheWVyLmpzIiwiYXNzZXRzL1NjcmlwdC9WaWV3cy9TY2VuZV9HcmFiL0dyYWJfdGFibGVzTGF5ZXIuanMiLCJhc3NldHMvU2NyaXB0L1ZpZXdzL1NjZW5lX0dyYWIvRWZmZWN0cy9HcmFiX3RvcEVmZmVjdC5qcyIsImFzc2V0cy9TY3JpcHQvVmlld3MvU2NlbmVfR3JhYi9HcmFiX3RvcExheWVyLmpzIiwiYXNzZXRzL1NjcmlwdC9Db21tb24vTWFuYWdlcnMvSFRUUE1nci5qcyIsImFzc2V0cy9TY3JpcHQvQ29tbW9uL01hbmFnZXJzL0xvY2FsU3RvcmFnZS5qcyIsImFzc2V0cy9TY3JpcHQvTW9kdWxlcy9NX1BsYXllci5qcyIsImFzc2V0cy9TY3JpcHQvTW9kdWxlcy9NX1RvcFJlcXVlc3RMYXllci5qcyIsImFzc2V0cy9TY3JpcHQvQ29tbW9uL0NvbmZpZ3MvTmV0Q29uZmlnLmpzIiwiYXNzZXRzL1NjcmlwdC9PYmplY3RzL09ial9jYWxjdWxhdGVSZXN1bHQuanMiLCJhc3NldHMvU2NyaXB0L09iamVjdHMvT2JqX2NlbGxfdHJlbmQuanMiLCJhc3NldHMvU2NyaXB0L09iamVjdHMvT2JqX2NvaW5FZmZlY3QuanMiLCJhc3NldHMvU2NyaXB0L09iamVjdHMvT2JqX2NvbmZpcm1UaXAuanMiLCJhc3NldHMvU2NyaXB0L09iamVjdHMvT2JqX2NvdW50RG93blByb2dyZXNzLmpzIiwiYXNzZXRzL1NjcmlwdC9PYmplY3RzL09ial9kZWFsU2Nyb2xsLmpzIiwiYXNzZXRzL1NjcmlwdC9PYmplY3RzL09ial9kZWFsZXJMaXN0Q2VsbC5qcyIsImFzc2V0cy9TY3JpcHQvT2JqZWN0cy9PYmpfZGVhbGVyTGlzdFNsaWRlci5qcyIsImFzc2V0cy9TY3JpcHQvT2JqZWN0cy9PYmpfZGVhbGVyV29yZEVmZmVjdC5qcyIsImFzc2V0cy9TY3JpcHQvT2JqZWN0cy9PYmpfZGlhbG9nQWNjb3VudENlbGwuanMiLCJhc3NldHMvU2NyaXB0L09iamVjdHMvT2JqX2RpYWxvZ1BsYXllckxpc3RDZWxsLmpzIiwiYXNzZXRzL1NjcmlwdC9PYmplY3RzL09ial9kaWFsb2dSZWNvcmRDZWxsLmpzIiwiYXNzZXRzL1NjcmlwdC9PYmplY3RzL09ial9lZmZlY3RfaW5Ib21lTG9hZGluZy5qcyIsImFzc2V0cy9TY3JpcHQvT2JqZWN0cy9PYmpfZ29sZFJlc3VsdEVmZmVjdC5qcyIsImFzc2V0cy9TY3JpcHQvT2JqZWN0cy9PYmpfZ29sZHNDb250YWluZXIuanMiLCJhc3NldHMvU2NyaXB0L09iamVjdHMvT2JqX2xlZnRUb3BNZW51LmpzIiwiYXNzZXRzL1NjcmlwdC9PYmplY3RzL09ial9ub3RpY2UuanMiLCJhc3NldHMvU2NyaXB0L09iamVjdHMvT2JqX29uUG9rZXJSZXN1bHQuanMiLCJhc3NldHMvU2NyaXB0L09iamVjdHMvT2JqX29wdGlvbkJ1dHRvbi5qcyIsImFzc2V0cy9TY3JpcHQvT2JqZWN0cy9PYmpfcG9rZXIuanMiLCJhc3NldHMvU2NyaXB0L09iamVjdHMvT2JqX3JhbmtJdGVtX2ZyaWVuZC5qcyIsImFzc2V0cy9TY3JpcHQvT2JqZWN0cy9PYmpfcm9vbUxpc3RDZWxsLmpzIiwiYXNzZXRzL1NjcmlwdC9PYmplY3RzL09ial9zY3JvbGxWYWx1ZS5qcyIsImFzc2V0cy9TY3JpcHQvT2JqZWN0cy9PYmpfc2VhdHNDb250YWluZXIuanMiLCJhc3NldHMvU2NyaXB0L09iamVjdHMvT2JqX3NldFRvdWNoRWZmZWN0LmpzIiwiYXNzZXRzL1NjcmlwdC9PYmplY3RzL09ial9zeXN0ZW1UaXAuanMiLCJhc3NldHMvU2NyaXB0L09iamVjdHMvT2JqX3RvcE9uZUxheWVyLmpzIiwiYXNzZXRzL1NjcmlwdC9PYmplY3RzL09ial90b3VjaExpbWl0LmpzIiwiYXNzZXRzL1NjcmlwdC9PYmplY3RzL09ial90eHRUaXAuanMiLCJhc3NldHMvU2NyaXB0L09iamVjdHMvT2JqX3VpQ29udGFpbmVyLmpzIiwiYXNzZXRzL1NjcmlwdC9PYmplY3RzL09ial93aW5SYW5rSGVhZC5qcyIsImFzc2V0cy9TY3JpcHQvQ29tbW9uL0NvbmZpZ3MvT2JqZWN0X2NvbmZpZy5qcyIsImFzc2V0cy9TY3JpcHQvQ29tcF9wYXJ0cy9VSS9QYXJ0X2RpYWxvZ19leGNoYW5nZVBhZ2VzLmpzIiwiYXNzZXRzL1NjcmlwdC9Db21wX3BhcnRzL0JhdHRsZS9QYXJ0X3BsYXllckJsb2NrX0dvbGQuanMiLCJhc3NldHMvU2NyaXB0L1ZpZXdzL1NjZW5lX1BsYXRmb3JtL1BsYXRmb3JtX01hbmFnZXIuanMiLCJhc3NldHMvU2NyaXB0L1ZpZXdzL1NjZW5lX1BsYXRmb3JtL1VJL1BsYXRmb3JtX2JvdHRvbUJ0bnMuanMiLCJhc3NldHMvU2NyaXB0L1ZpZXdzL1NjZW5lX1BsYXRmb3JtL1VJL1BsYXRmb3JtX2xlZnRSYW5rLmpzIiwiYXNzZXRzL1NjcmlwdC9WaWV3cy9TY2VuZV9QbGF0Zm9ybS9VSS9QbGF0Zm9ybV90b3BJbmZvLmpzIiwiYXNzZXRzL1NjcmlwdC9WaWV3cy9TY2VuZV9QbGF0Zm9ybS9VSS9QbGF0Zm9ybV91aV9lbnRlci5qcyIsImFzc2V0cy9TY3JpcHQvVmlld3MvVUlDb21wb25lbnRzL1ByZWZhYl9kaWFsb2dfYWNjb3VudC5qcyIsImFzc2V0cy9TY3JpcHQvVmlld3MvVUlDb21wb25lbnRzL1ByZWZhYl9kaWFsb2dfYW5ub3VuY2VtZW50LmpzIiwiYXNzZXRzL1NjcmlwdC9WaWV3cy9VSUNvbXBvbmVudHMvUHJlZmFiX2RpYWxvZ19idWxsMTAwVHJlbmQuanMiLCJhc3NldHMvU2NyaXB0L1ZpZXdzL1VJQ29tcG9uZW50cy9QcmVmYWJfZGlhbG9nX2RlYWxlckxpc3QuanMiLCJhc3NldHMvU2NyaXB0L1ZpZXdzL1VJQ29tcG9uZW50cy9QcmVmYWJfZGlhbG9nX2dyYWJUcmVuZC5qcyIsImFzc2V0cy9TY3JpcHQvVmlld3MvVUlDb21wb25lbnRzL1ByZWZhYl9kaWFsb2dfcGxheWVyTGlzdC5qcyIsImFzc2V0cy9TY3JpcHQvVmlld3MvVUlDb21wb25lbnRzL1ByZWZhYl9kaWFsb2dfcmVjb3JkLmpzIiwiYXNzZXRzL1NjcmlwdC9WaWV3cy9VSUNvbXBvbmVudHMvUHJlZmFiX2RpYWxvZ19ydWxlc0luSG9tZS5qcyIsImFzc2V0cy9TY3JpcHQvVmlld3MvVUlDb21wb25lbnRzL1ByZWZhYl9kaWFsb2dfcnVsZXMuanMiLCJhc3NldHMvU2NyaXB0L1ZpZXdzL1VJQ29tcG9uZW50cy9QcmVmYWJfZGlhbG9nX3NldC5qcyIsImFzc2V0cy9TY3JpcHQvVmlld3MvVUlDb21wb25lbnRzL1ByZWZhYl9kaWFsb2dfdHJlbmQuanMiLCJhc3NldHMvU2NyaXB0L1ZpZXdzL1VJQ29tcG9uZW50cy9QcmVmYWJfcm9vbUxpc3QuanMiLCJhc3NldHMvU2NyaXB0L0NvbW1vbi9NYW5hZ2Vycy9SZWxvYWRSZXNNZ3IuanMiLCJhc3NldHMvU2NyaXB0L0NvbW1vbi9NYW5hZ2Vycy9Tb2NrZXRDZW50ZXIuanMiLCJhc3NldHMvU2NyaXB0L0NvbW1vbi9NYW5hZ2Vycy9Tb2NrZXRNZ3IuanMiLCJhc3NldHMvU2NyaXB0L0NvbW1vbi9NYW5hZ2Vycy9Tb2NrZXRSZXF1ZXN0TWdyLmpzIiwiYXNzZXRzL1NjcmlwdC9Db21tb24vTWFuYWdlcnMvVGFibGVzTWdyLmpzIiwiYXNzZXRzL1NjcmlwdC9Db21tb24vTWFuYWdlcnMvVGlwc01nci5qcyIsImFzc2V0cy9TY3JpcHQvQ29tbW9uL1Rvb2xzLmpzIiwiYXNzZXRzL1NjcmlwdC9Db21tb24vQ29uZmlncy9UeXBlQ29uZmlnLmpzIiwiYXNzZXRzL1NjcmlwdC9Db21tb24vTWFuYWdlcnMvV2ViTW9iaWxlX2hhbmRsZXIuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNJO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSDs7QUFFRDtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0k7QUFDQTtBQUNJO0FBQ0E7QUFDSDtBQUNKO0FBQ0c7QUFDQTtBQUNJO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7QUFDSjtBQUNHO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7QUFDSjtBQUNKOztBQUVEO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7O0FBRUQ7QUFDQTtBQUNJO0FBQ0E7QUFDSDs7QUFFRDtBQUNBO0FBQ0k7QUFDSDs7QUFFRDtBQUNBO0FBQ0k7QUFDSDs7QUFFRDtBQUNBO0FBQ0k7QUFDSTtBQUNBO0FBQ0g7QUFDSjs7QUFFRDtBQUNBO0FBQ0k7QUFDQTtBQUNIOztBQUVEO0FBQ0E7QUFDSTtBQUNBO0FBQ0g7O0FBRUQ7QUFDQTtBQUNBO0FBQ0k7QUFDSDtBQUNEO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDSDtBQUNEO0FBQ0E7QUFDSTtBQUNBO0FBQ0g7QUFDRDtBQUNBO0FBQ0k7QUFDQTtBQUNIO0FBQ0Q7QUFDQTtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDSDs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0k7QUFDQTtBQUNJO0FBQ0E7QUFDSTtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDSDtBQUNEO0FBQ0g7QUFDRztBQUNIO0FBQ0Q7QUFDSTtBQUNBO0FBQ0g7QUFDSjtBQUNKOztBQUVEO0FBQ0E7QUFDSTtBQUNBO0FBQ0k7QUFDSTtBQUNBO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNIO0FBQ0Q7QUFDSDtBQUNEO0FBQ0k7QUFDQTtBQUNIO0FBQ0o7QUFDSjtBQUNEO0FBQ0k7QUFDSDtBQUNEO0FBQ0k7QUFDSDs7QUFFRDtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNJO0FBQ0E7QUFDSDtBQUNHO0FBQ0E7QUFDSTtBQUNBO0FBQ0g7QUFDRztBQUNBO0FBQ0g7QUFDSjtBQUNKOztBQWpPbUI7O0FBd094Qjs7Ozs7Ozs7OztBQzFPQTs7QUFFQTtBQUNJO0FBQ0E7QUFDQTs7QUFJQTtBQUNBOztBQUlBO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0k7QUFDQTtBQUNJO0FBQ0k7QUFDQTtBQUNIO0FBQ0Q7QUFDSDtBQUNKO0FBQ0Q7QUFDSTtBQUNBO0FBQ0g7QUFDRDtBQUNJO0FBQ0g7QUFDSjtBQUNEO0FBQ0E7QUFDSTtBQUNJO0FBQ0g7QUFDRztBQUNIO0FBQ0Q7QUFDQTtBQUNBO0FBQ0g7O0FBRUQ7QUFDQTtBQUNJO0FBQ0g7O0FBRUQ7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNIO0FBQ0Q7QUFDSDs7QUFFRDtBQUNJO0FBQ0g7O0FBdEVJOzs7Ozs7Ozs7O0FDRlQ7OztBQUdBO0FBQ0k7O0FBRUE7QUFDSTs7QUFFQTtBQUNJO0FBQ0E7QUFDQTtBQUhZO0FBS2hCO0FBQ0k7QUFDQTtBQUNBO0FBSGdCO0FBS3BCO0FBQ0k7QUFDQTtBQUNBO0FBSG9CO0FBS3hCO0FBQ0k7QUFDQTtBQUNBO0FBSFU7QUFLZDtBQUNJO0FBQ0E7QUFDQTtBQUhpQjtBQXZCYjs7QUE4Qlo7QUFDQTtBQUNJO0FBQ0g7O0FBRUQ7QUFDSTtBQUNIOztBQUVEO0FBQ0k7O0FBRUE7QUFDSDs7QUFFRDtBQUNJOztBQUVBO0FBQ0g7O0FBRUQ7O0FBSUE7QUFDSTtBQUNIOztBQUVEO0FBQ0k7QUFDSDs7QUFoRUk7Ozs7Ozs7Ozs7QUNIVDs7QUFFQTtBQUNJOztBQUVBO0FBQ0k7O0FBR0o7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0g7O0FBRUQ7QUFDQTtBQUNJO0FBQ0E7QUFDSTtBQUNBO0FBQ0g7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7QUFDRDtBQUNBO0FBQ0k7QUFDQTtBQUNIO0FBQ0Q7QUFDQTtBQUNJO0FBQ0g7QUFDRDtBQUNBO0FBQ0k7QUFDSTtBQUNIO0FBQ0o7QUFDRDtBQUNBOztBQUlBO0FBQ0E7QUFDSTtBQUNJO0FBQ0k7QUFDSDtBQUNEO0FBQ0g7QUFDSjs7QUFFRDtBQUNJO0FBQ0g7O0FBRUQ7QUFDSTtBQUNIOztBQUVEOztBQUVBO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7QUFDRDtBQUNBO0FBQ0k7QUFDQTtBQUNJO0FBQ0k7QUFDSTtBQUNJO0FBQ0g7QUFDRztBQUNIO0FBQ0o7QUFDSjtBQUNKO0FBQ0o7QUFDRDtBQUNBO0FBQ0k7QUFDQTtBQUNJO0FBQ0g7QUFDSjtBQUNEO0FBQ0E7QUFDSTtBQUNBO0FBQ0k7QUFDQTtBQUNIOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSDtBQUNEO0FBQ0E7O0FBRUk7QUFDSTtBQUNIO0FBQ0o7O0FBRUQ7QUFDSTtBQUNIOztBQS9ISTs7Ozs7Ozs7OztBQ0ZUOztBQUVBO0FBQ0k7O0FBRUE7QUFDSTtBQUNBOztBQUdKO0FBQ0E7O0FBSUE7QUFDSTtBQUNBO0FBQ0g7QUFDRDtBQUNJO0FBQ0E7QUFFSDs7QUFFRDtBQUNJO0FBQ0E7QUFDSDtBQUNEO0FBQ0k7QUFDQTtBQUNIO0FBQ0Q7QUFDSTtBQUNJO0FBQ0g7QUFDRDtBQUNIOztBQUVEO0FBQ0k7QUFDSDtBQUNEO0FBQ0k7QUFDSDtBQUNEO0FBQ0k7QUFDSDs7QUE5Q0k7Ozs7Ozs7Ozs7QUNGVDs7QUFFQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFSa0I7QUFVdEI7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBUmU7O0FBV25CO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7O0FBR0o7QUFDSTs7QUFFQTtBQUNJO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0k7QUFDQTtBQUNBO0FBSGE7QUFLakI7QUFDSTtBQUNBO0FBQ0E7QUFIYztBQUtsQjtBQUNJO0FBQ0E7QUFDQTtBQUhnQjtBQUtwQjtBQUNJO0FBQ0E7QUFDQTtBQUhlO0FBS25CO0FBQ0k7QUFDQTtBQUNBO0FBSGM7QUFLbEI7QUFDSTtBQUNBO0FBQ0E7QUFIYTtBQUtqQjtBQUNJO0FBQ0E7QUFDQTtBQUhXO0FBS2Y7QUFDSTtBQUNBO0FBQ0E7QUFIb0I7QUFLeEI7QUFDSTtBQUNBO0FBQ0E7QUFIaUI7O0FBTXJCO0FBQ0k7QUFDQTtBQUNBO0FBSFU7QUFyRU47O0FBNEVaO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNIOztBQUVEO0FBQ0E7QUFDSTtBQUNJO0FBQ0E7QUFDSTtBQUNJO0FBQ0E7QUFGUztBQUliO0FBQ0k7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEs7QUFPVDtBQVJVO0FBVVY7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEs7QUFPVDtBQVJGO0FBVUU7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEs7QUFPVDtBQVJGO0FBVUU7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEs7QUFPVDtBQVJGO0FBVUU7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEs7QUFPVDtBQVJGO0FBVUU7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEs7QUFPVDtBQVJGO0FBVUU7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEs7QUFPVDtBQVJGO0FBVUY7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTFM7QUFPYjtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBVk87QUE1RUE7QUF5RmY7O0FBRUE7QUFDQTtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0g7QUFDRztBQUNBO0FBQ0g7QUFDSjtBQUdKO0FBQ0Q7QUFDQTtBQUNJO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDSDtBQUNEO0FBQ0k7QUFDQTtBQUNIO0FBQ0o7QUFDRDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0k7QUFDSTtBQUNBO0FBQ0E7QUFDSDtBQUNHO0FBQ0E7QUFDQTtBQUNIO0FBQ0o7QUFDRDtBQUNBO0FBQ0g7O0FBRUQ7QUFDSTtBQUNBOztBQUVBO0FBQ0k7QUFDSDtBQUNHOztBQUVBO0FBQ0E7QUFDSTtBQUNJO0FBQ0E7QUFDQTtBQUNIO0FBQ0c7QUFDSDtBQUNKO0FBQ0o7QUFDSjs7QUFFRDtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7O0FBRUQ7QUFDQTtBQUNJO0FBQ0g7O0FBR0Q7O0FBRUE7QUFDQTtBQUNJO0FBQ0E7QUFDSTtBQUNIO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0k7QUFDQTtBQUNIO0FBQ0c7QUFDSTtBQUNBO0FBQ0E7QUFIVTtBQU1kO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7O0FBRUQ7QUFFSDs7QUFFRDtBQUNBO0FBQ0k7QUFDQTtBQUNJO0FBQ0g7QUFDRDtBQUNBOztBQUVBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNJO0FBQ0g7QUFDRztBQUNIO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7O0FBRUQ7QUFBeUM7QUFDckM7QUFDSDtBQUNHO0FBQ0g7QUFDSjtBQUNEO0FBQ0k7QUFDQTtBQUNJO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNJO0FBQ0g7QUFDSjtBQUNKO0FBQ0c7QUFDQTtBQUNBO0FBQ0E7QUFDSTtBQUNIO0FBQ0o7QUFDSjtBQUNEO0FBQ0E7QUFDSTtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0g7QUFDRDtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFKVTtBQU1kO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSDs7QUFFRDtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0k7QUFDSDs7QUFFRDtBQUNBO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDSTtBQUNBO0FBQ0k7QUFDSTtBQUNBO0FBRlc7QUFJbEI7QUFDRDtBQUNIO0FBQ0Q7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0k7QUFDQTtBQUY0Qjs7QUFLaEM7QUFDSTtBQUQ0Qjs7QUFJaEM7QUFDSTtBQUNJO0FBQ0E7QUFDQTtBQUhGO0FBS0Y7QUFDSTtBQUNBO0FBQ0E7QUFIRjtBQU4wQjs7QUFhaEM7QUFDQTtBQUNIOztBQUVEO0FBQ0k7QUFDQTtBQUNJO0FBQ0g7QUFDSjtBQUNKO0FBQ0Q7QUFDQTtBQUNJO0FBQ0k7QUFDQTtBQUNIO0FBQ0Q7QUFDQTtBQUNJO0FBQ0g7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0g7QUFDRDtBQUNJO0FBQ0E7QUFDSTtBQUNBO0FBQ0k7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNIO0FBQ0o7QUFDSjtBQUNKO0FBQ0Q7QUFDSDtBQUNKO0FBQ0Q7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNJO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDSDtBQUNKO0FBQ0o7QUFDRDtBQUNBO0FBQ0k7QUFDQTtBQUNJO0FBQ0E7QUFDSDtBQUNKOztBQUVEOztBQUVBO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNIO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0k7QUFDSTtBQUNBO0FBQ0g7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNIO0FBQ0Q7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7QUFDRDtBQUNBO0FBQ0k7QUFDQTtBQUNJOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSDtBQUNKO0FBQ0Q7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7QUFDRDtBQUNBO0FBQ0k7QUFDSDs7QUFFRDs7QUFFQTtBQUNBO0FBQ0k7QUFDSTtBQUNJO0FBQ0E7QUFDSDtBQUNKO0FBQ0o7QUFDRDtBQUNBO0FBQ0k7QUFDSTtBQUNIO0FBQ0o7QUFDRDtBQUNBO0FBQ0k7QUFDSTtBQUNIO0FBQ0o7QUFDRDtBQUNBO0FBQ0k7QUFDSTtBQUNBO0FBQ0g7QUFDSjs7QUFFRDs7QUFFQTtBQUNBO0FBQ0k7QUFDQTtBQUNJO0FBQ0g7QUFDRztBQUNBOztBQUVBO0FBQ0k7QUFDSDtBQUNHO0FBQ0E7QUFDSDtBQUNEO0FBQ0g7QUFDSjtBQUNEO0FBQ0E7QUFDSTtBQUNJO0FBQ0E7QUFDQTtBQUNIO0FBQ0o7QUFDRDtBQUNBO0FBQ0k7O0FBRUE7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDSDtBQUNKOztBQUdEOztBQUVBO0FBQ0E7QUFDSTtBQUNJO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUo7QUFFUTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEo7QUFRSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEo7QUFRSjtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBSlU7QUFNZDtBQUNIO0FBQ0c7QUFDQTtBQUNBO0FBQ0g7QUFDSjtBQUNEO0FBQ0E7QUFDSTtBQUNJO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUo7QUFFUTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEo7QUFRSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEo7QUFRSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEo7QUFRSjtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFMVTtBQU9kO0FBQ0E7QUFDSDtBQUNHO0FBQ0k7QUFEVTtBQUdkO0FBQ0E7QUFDSDtBQUNKO0FBQ0Q7QUFDQTtBQUNJO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDSDtBQUNHO0FBQ0g7QUFDSjtBQUNEO0FBQ0E7QUFDSTtBQUNBO0FBRUg7QUFDRDtBQUNBO0FBQ0k7QUFDSTtBQUNIO0FBQ0o7QUFDRDtBQUNBO0FBQ0k7QUFDSTtBQURVO0FBR2Q7QUFDQTtBQUNIOztBQUVEOztBQUVBO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNIO0FBQ0Q7QUFDQTtBQUNJO0FBQ0g7QUFDRDtBQUNBO0FBQ0k7QUFDSDs7QUFFRDtBQUNBO0FBQ0k7QUFDSDs7QUFFRDtBQUNBO0FBQ0k7QUFDSDtBQUNEO0FBQ0E7QUFDSTtBQUNIO0FBQ0Q7QUFDQTtBQUNJO0FBQ0g7QUFDRDtBQUNBO0FBQ0k7QUFDSDtBQUNEO0FBQ0E7QUFDSTtBQUNIO0FBQ0Q7QUFDQTtBQUNJO0FBQ0g7QUFDRDtBQUNBO0FBQ0k7QUFDSDtBQUNEO0FBQ0E7QUFDSTtBQUNIO0FBQ0Q7QUFDSTtBQUNIO0FBQ0Q7QUFDSTtBQUNIO0FBQ0Q7QUFDQTtBQUNJO0FBQ0g7QUFDRDtBQUNBO0FBQ0k7QUFDSDtBQUNEO0FBQ0E7QUFDSTtBQUNBO0FBQ0k7QUFDQTtBQUNIO0FBQ0c7QUFDSDtBQUNEO0FBQ0g7QUFDRDtBQUNBO0FBQ0k7QUFDSDtBQUNEO0FBQ0E7QUFDSTtBQUNIO0FBQ0Q7QUFDQTtBQUNJO0FBQ0g7QUFDRDtBQUNBO0FBQ0k7QUFDSDtBQUNEO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNJO0FBQ0E7QUFDSDtBQUNEO0FBQ0g7QUFDRDtBQUNBO0FBQ0k7QUFDSDtBQUNEO0FBQ0E7QUFDSTtBQUNIO0FBQ0Q7QUFDQTtBQUNJO0FBQ0g7QUFDRDtBQUNBO0FBQ0k7QUFDSDtBQUNEO0FBQ0E7QUFDSTtBQUNIO0FBQ0Q7QUFDQTtBQUNJO0FBQ0g7QUFDRDtBQUNBO0FBQ0k7QUFDSDtBQUNEO0FBQ0E7QUFDSTtBQUNIO0FBQ0Q7QUFDQTtBQUNJO0FBQ0g7QUFDRDtBQUNBO0FBQ0k7QUFDSDs7QUFFRDs7QUFFQTtBQUNJO0FBQ0g7QUFDRDtBQUNJO0FBQ0k7QUFDQTtBQUNBO0FBQ0g7QUFDSjs7QUFHRDtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDSTtBQUNIO0FBQ0Q7QUFDSTtBQUNIO0FBQ0o7QUFDRDtBQUNBO0FBQ0k7QUFDQTtBQUVIO0FBQ0Q7QUFDQTtBQUNJO0FBQ0g7O0FBRUQ7O0FBRUE7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSDs7QUFFRDtBQUNBO0FBQ0k7QUFDQTtBQUNJO0FBQ0g7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNJO0FBQ0E7QUFDSTtBQUNBO0FBQ0g7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7QUFDRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNIO0FBQ0o7QUFDSjs7QUFFRDtBQUNBO0FBQ0k7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0k7QUFDSTtBQUNBO0FBRlM7QUFJYjtBQUNBO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBUk87QUFQQTtBQWtCZjtBQUNIOztBQUVEO0FBQ0E7QUFDSTs7QUFFQTtBQUNBO0FBQ0k7QUFDQTtBQUNIO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDSTtBQUNJO0FBQ0E7QUFGUztBQUliO0FBQ0E7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBUE87QUFQQTtBQWlCZjtBQUNBO0FBQ0E7QUFDSDs7QUFFRDtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0g7QUFDSjs7QUFFRDtBQUNBO0FBQ0k7QUFDQTtBQUNJO0FBQ0k7QUFDSjtBQUNJO0FBQ0o7QUFDSTtBQU5SO0FBUUE7O0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDSTtBQUNBO0FBQ0k7QUFDSTtBQUNBO0FBRlc7QUFJbEI7QUFDSjtBQUNEO0FBQ0E7QUFDQTtBQUNJO0FBQ0E7QUFDSTtBQUNIO0FBQ0c7QUFDSDtBQUNKO0FBQ0o7QUFDRDs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0k7QUFDQTtBQUNJO0FBQ0E7QUFDSTtBQUNJO0FBQ0E7QUFDQTtBQUNJO0FBQ0E7QUFGNEI7QUFJaEM7QUFDSjtBQUNJO0FBQ0o7QUFDSTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBSjhDO0FBTWxEO0FBbEJSO0FBb0JIO0FBQ0o7QUFDRDtBQUNIOztBQUVEO0FBQ0E7O0FBRUk7QUFDQTtBQUNJO0FBQ0E7QUFDSDs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7O0FBRUQ7QUFDQTtBQUNJO0FBQ0E7QUFDSTtBQUNBO0FBQ0g7QUFDRDtBQUFBO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSTtBQUNJO0FBQ0E7QUFDSjtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSTtBQUNBO0FBQ0g7QUFDRDtBQUNJO0FBQ0E7QUFDQTtBQUNIO0FBQ0Q7QUFDSjtBQUNJO0FBQ0E7QUFDSjtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBMUJSO0FBNEJIO0FBQ0o7O0FBRUQ7QUFDQTs7QUFFSTtBQUNBO0FBQ0k7QUFDQTtBQUNIOztBQUVEO0FBQUE7QUFBQTtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0g7QUFDSjs7QUFFRDtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDSTtBQUNJO0FBQ0o7QUFDSTtBQUNBO0FBQ0E7QUFDSjtBQUNJO0FBQ0E7QUFDQTtBQUNKO0FBQ0k7QUFDQTtBQUNBO0FBQ0o7QUFDSTtBQUNBO0FBQ0E7QUFHQTtBQUNKO0FBQ0k7QUFDQTtBQUNBO0FBQ0o7QUFDSTtBQUNBO0FBQ0k7QUFDQTtBQUNIO0FBQ0Q7QUFDSjtBQUNJO0FBQ0E7QUFDQTtBQUNKO0FBQ0k7QUFDQTtBQXZDUjtBQXlDSDs7QUFFRDtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0k7QUFDSTtBQUNBO0FBQ0o7QUFDSTs7QUFFQTtBQUNKO0FBQ0k7QUFDQTtBQUNBO0FBQ0o7QUFDSTtBQUNBO0FBQ0E7QUFDSjtBQUNJO0FBQ0E7QUFDQTtBQUNKO0FBQ0k7QUFDQTtBQUNBO0FBQ0o7QUFDSTtBQUNBO0FBMUJSOztBQTZCQTtBQUNBO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUpVOztBQU9kO0FBQ0E7QUFDQTtBQUNBO0FBQ0k7QUFDSDs7QUFFRDtBQUNJO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0o7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0o7QUFDSTtBQUNBO0FBQ0E7QUFDSjtBQUNJO0FBbkJSO0FBcUJBO0FBQ0g7O0FBRUQ7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNJO0FBQ0k7QUFDSjtBQUNJO0FBQ0E7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBSlM7QUFPYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNKO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUpVO0FBTWQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0o7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBSlM7QUFPYjtBQUNBO0FBQ0E7QUFDQTtBQUNKO0FBQ0k7QUExRFI7QUE0REE7QUFDSDs7QUFFRDtBQUNBOztBQUVJO0FBQ0E7QUFDSTtBQUNBO0FBQ0g7O0FBRUQ7QUFDSDs7QUFFRDtBQUNBOztBQUVJO0FBQ0k7QUFDSDtBQUNKOztBQUVEO0FBQ0k7QUFDSDs7QUFFRDtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSDs7QUFFRDtBQUNJO0FBQ0E7QUFDQTtBQUNIO0FBMWdESTs7Ozs7Ozs7OztBQzlCVDs7O0FBR0E7QUFDSTs7QUFFQTtBQUNJOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNJO0FBQ0E7QUFDQTtBQUhrQjtBQVpkOztBQW1CWjtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0g7O0FBRUQ7QUFDSTtBQUNIOztBQUVEO0FBQ0k7QUFDSDs7QUFFRDtBQUNJO0FBQ0E7QUFDSTtBQUNIO0FBQ0Q7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDSDtBQUNEO0FBQ0k7QUFDQTs7QUFFQTtBQUNBO0FBQ0g7QUFDRDtBQUNJO0FBQ0E7O0FBRUE7QUFDSTtBQUNJO0FBQ0g7QUFDRDtBQUNIOztBQUVEO0FBQ0k7QUFDSTtBQUNJO0FBQ0E7QUFGVTtBQUlkO0FBQ0g7QUFDSjtBQUNHO0FBQ0k7QUFDSTtBQUNBO0FBRlU7QUFJZDtBQUNIO0FBQ0o7QUFDRztBQUNJO0FBQ0E7QUFGVTtBQUlkO0FBQ0g7QUFDSjtBQUNEO0FBQ0E7QUFDSTtBQUNIO0FBQ0Q7QUFDQTtBQUNJO0FBQ0E7QUFDSDtBQUNEO0FBQ0E7QUFDSTtBQUNIOztBQUVEO0FBQ0E7QUFDSTtBQUNIO0FBQ0Q7QUFDQTtBQUNJO0FBQ0g7O0FBRUQ7QUFDSTtBQUFBO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDSDtBQUNKO0FBQ0Q7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNIOztBQUVEO0FBQ0E7QUFDSTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNIO0FBQ0Q7QUFDSTtBQUNBO0FBQ0g7O0FBR0Q7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSDtBQUNEO0FBQ0k7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7QUFDSjs7QUFFRDtBQUNJO0FBQ0E7QUFDQTtBQUNJO0FBQ0g7QUFDSjs7QUFFRDtBQUNJO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0k7QUFDSTtBQUNBO0FBQ0g7QUFDRztBQUNJO0FBQ0g7QUFDRDtBQUNIO0FBQ0o7QUFDRDtBQUNBO0FBQ0k7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDSDtBQUNKOztBQUVEO0FBQ0E7QUFDSTtBQUNIO0FBQ0Q7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNIOztBQUVEO0FBQ0k7QUFDSDs7QUFFRDtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNIOztBQS9PSTs7Ozs7Ozs7OztBQ0hUOztBQUVBO0FBQ0k7O0FBRUE7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0k7QUFDQTtBQUNBO0FBSFc7QUFLZjtBQUNJO0FBQ0E7QUFDQTtBQUhjO0FBS2xCO0FBQ0k7QUFDQTtBQUNBO0FBSFk7QUFLaEI7QUFDSTtBQUNBO0FBQ0E7QUFIYTtBQUtqQjtBQUNJO0FBQ0E7QUFDQTtBQUhzQjtBQW5DbEI7O0FBMENaO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNIOztBQUVEO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDSDs7QUFFRDtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0g7QUFDRDtBQUNBO0FBQ0k7QUFDSDtBQUNEO0FBQ0E7QUFDSTtBQUNIOztBQUVEO0FBQ0E7QUFDSTtBQUNIO0FBQ0Q7QUFDQTtBQUNJO0FBQ0g7QUFDRDtBQUNJO0FBQ0E7O0FBRUE7QUFDQTtBQUNJO0FBQ0g7QUFDSjtBQUNEO0FBQ0k7QUFDSDtBQUNEO0FBQ0k7QUFDSDtBQUNEO0FBQ0k7QUFDSDtBQUNEO0FBQ0E7QUFDSTtBQUNIOztBQUVEOztBQUVBO0FBQ0E7QUFDSTtBQUNIO0FBQ0Q7QUFDSTtBQUNIO0FBQ0Q7QUFDSTtBQUNIO0FBQ0Q7QUFDSTtBQUNIO0FBQ0Q7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSDtBQUNEO0FBQ0E7QUFDSTtBQUNIO0FBQ0Q7QUFDSTtBQUNIO0FBQ0Q7QUFDSTtBQUNIO0FBQ0Q7QUFDQTtBQUNJO0FBQ0g7QUFDRDtBQUNBO0FBQ0k7QUFDSDtBQUNEO0FBQ0E7QUFDSTtBQUNIO0FBQ0Q7QUFDQTtBQUNJO0FBQ0g7QUFDRDtBQUNBO0FBQ0k7QUFDSDtBQUNEO0FBQ0E7QUFDSTtBQUNIOztBQUVEO0FBQ0E7QUFDSTtBQUNBO0FBQ0g7O0FBRUQ7QUFDQTtBQUNJO0FBQ0E7QUFDSTtBQUNBO0FBQ0g7QUFDRztBQUNBO0FBQ0E7QUFDSDtBQUNKOztBQUVEOztBQUVBO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNIO0FBQ0c7QUFDSTtBQUNIO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUVKO0FBQ0E7QUFDQTtBQUNIO0FBQ0o7O0FBRUQ7QUFDQTtBQUNJOztBQUVBO0FBQ0E7QUFDSTtBQUNJO0FBQ0E7QUFDQTtBQUhVO0FBS2Q7QUFDQTtBQUNIO0FBQ0Q7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNIOztBQUVEO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDSTtBQUNIO0FBQ0Q7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSTtBQUNBO0FBQ0g7QUFDSjs7QUFFRDtBQUNBO0FBQ0k7QUFDQTtBQUVIOztBQUVEO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7O0FBRUQ7O0FBRUE7QUFDSTtBQUNIOztBQUVEO0FBQ0k7QUFDQTtBQUNBO0FBQ0g7O0FBRUQ7QUFDSTtBQUNBO0FBQ0g7O0FBRUQ7QUFDSTtBQUNIOztBQUVEO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNIO0FBQ0Q7QUFDQTtBQUNJOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNJO0FBQ0g7QUFDRztBQUNIO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7QUFDRDtBQUNJO0FBQ0g7O0FBRUQ7O0FBalhLOzs7Ozs7Ozs7O0FDRlQ7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNJOztBQUVBO0FBQ0k7QUFDQTs7QUFFQTtBQUNJO0FBQ0E7QUFDQTtBQUhtQjtBQUt2QjtBQUNJO0FBQ0E7QUFDQTtBQUhpQjtBQUtyQjtBQUNJO0FBQ0E7QUFDQTtBQUhVO0FBS2Q7QUFDSTtBQUNBO0FBQ0E7QUFIVTtBQUtkO0FBQ0k7QUFDQTtBQUNBO0FBSFk7QUFLaEI7QUFDSTtBQUNBO0FBQ0E7QUFIa0I7QUE3QmQ7O0FBb0NaO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0g7O0FBRUQ7QUFDQTtBQUNJO0FBQ0g7O0FBRUQ7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSDtBQUNEO0FBQ0E7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNJO0FBQ0k7QUFDQTtBQUNIO0FBQ0o7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0k7QUFDQTtBQUNIO0FBQ0o7QUFDRDtBQUNBO0FBQ0E7QUFDSTtBQUNBO0FBQ0g7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNJO0FBQ0k7QUFDSDtBQUNEO0FBQ0E7QUFDSDtBQUNHO0FBQ0E7QUFDQTtBQUNIO0FBQ0Q7QUFDQTs7QUFFQTtBQUNBO0FBQ0k7QUFDQTtBQUNIO0FBQ0Q7QUFDSDs7QUFFRDtBQUNJO0FBQ0E7QUFDSDtBQUNEO0FBQ0k7QUFDQTtBQUNJO0FBQ0g7QUFDRDtBQUNBO0FBQ0g7O0FBRUQ7QUFDQTtBQUNJO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNIO0FBQ0o7O0FBRUQ7QUFDQTtBQUNJO0FBQ0E7QUFDSTtBQUNBO0FBQ0k7QUFDQTtBQUNIO0FBQ0c7QUFDSTtBQUNIO0FBQ0o7QUFDSjtBQUNKO0FBQ0Q7QUFDQTtBQUNJO0FBQ0E7QUFDSTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNIO0FBQ0c7QUFDSDtBQUNEO0FBQ0E7QUFDSDtBQUNEO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7O0FBRUQ7QUFDQTtBQUNJO0FBQ0E7QUFDSTtBQUNBO0FBQ0k7QUFDSDtBQUNKO0FBQ0Q7QUFDQTtBQUNIOztBQUVEOztBQUVBO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSTtBQUNBO0FBQ0g7QUFDRDtBQUNBO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDSTtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0g7QUFDSjtBQUNKO0FBQ0Q7QUFDQTtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0g7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDSDs7QUFFRDtBQUNJO0FBQUE7QUFDQTtBQUNJO0FBQ0E7QUFDSTtBQUNIO0FBQ0o7QUFDRDtBQUNIO0FBQ0Q7QUFDQTtBQUNJO0FBQUE7QUFDQTtBQUNJOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSDtBQUNKOztBQUVEO0FBQ0E7QUFDSTtBQUNIO0FBQ0Q7QUFDQTtBQUNJO0FBQ0g7O0FBRUQ7O0FBRUE7QUFDQTtBQUNJO0FBQ0g7QUFDRDtBQUNBO0FBQ0k7QUFDSDtBQUNEO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNJO0FBQ0g7QUFDRDtBQUNIO0FBQ0Q7QUFDSTtBQUNIO0FBQ0Q7QUFDQTtBQUNJO0FBQ0g7QUFDRDtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDSTtBQUNIO0FBQ0Q7QUFDSDtBQUNEO0FBQ0E7QUFDSTtBQUNIO0FBQ0Q7QUFDQTtBQUNJO0FBQ0g7O0FBRUQ7QUFDQTtBQUNJO0FBQ0k7QUFDSDtBQUNKOztBQTFVSTs7Ozs7Ozs7OztBQ2JUOzs7QUFHQTtBQUNJOztBQUVBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFHSjtBQUNBO0FBQ0k7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7O0FBRUQ7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSTtBQUNBO0FBQ0g7QUFDRDtBQUVJO0FBQ0g7QUFDSjs7QUFFRDs7QUFFQTtBQUNBO0FBQ0k7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNJO0FBQ0E7QUFDSTtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNIO0FBQ0o7QUFDSjtBQUNEO0FBQ0k7QUFDQTtBQUNIO0FBQ0o7O0FBRUQ7QUFDQTtBQUNBO0FBQ0k7QUFDSTtBQUNBO0FBQ0k7QUFDQTtBQUNIO0FBQ0Q7QUFDSDs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNJO0FBQ0E7QUFDSDtBQUNEO0FBQ0g7QUFDRDtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7QUFDRDtBQUNJO0FBQ0E7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNIO0FBQ0o7QUFDRDtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNIO0FBQ0o7O0FBRUQ7QUFDQTtBQUNJO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNJO0FBQ0k7QUFDQTtBQUNIO0FBQ0o7QUFDSjtBQUNKO0FBQ0Q7QUFDSTtBQUNBO0FBQ0E7QUFDSDs7QUFFRDtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0g7QUFDRDtBQUNBO0FBQ0k7QUFDSTtBQUNIO0FBQ0Q7QUFDQTtBQUNJO0FBQ0E7QUFDSDtBQUNEO0FBQUE7QUFBQTtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0g7QUFDRDtBQUNBO0FBQ0E7QUFDSDtBQUNEO0FBQ0k7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7O0FBRUQ7QUFDQTtBQUNJO0FBQ0E7O0FBRUE7QUFDQTtBQUNJO0FBQ0E7QUFDSTtBQUNBO0FBQ0g7QUFDRDtBQUNBO0FBQ0g7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7O0FBRUQ7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSDs7QUFFRDtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7QUFDRDtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0k7QUFDQTtBQUNIO0FBQ0o7O0FBRUQ7QUFDQTtBQUNJO0FBQ0k7QUFDSDtBQUNEO0FBQ0g7QUFDRDtBQUNBO0FBQ0k7QUFDSDtBQUNEO0FBQ0E7QUFDSTtBQUNIOztBQUVEO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDSDs7QUFFRDtBQUNJO0FBQ0E7QUFDSDs7QUF4Ukk7Ozs7Ozs7Ozs7QUNIVDs7QUFFQTtBQUNJOztBQUVBO0FBQ0k7QUFDSTtBQUNBO0FBQ0E7QUFIaUI7QUFEYjs7QUFRWjtBQUNBO0FBQ0k7QUFDSDs7QUFFRDtBQUNJOztBQUVBO0FBQ0E7QUFDSTtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0g7QUFDSjtBQUNEO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDSDtBQUNEO0FBQ0g7QUFDRDtBQUNJO0FBQ0k7QUFDSTtBQUNIO0FBQ0o7QUFDSjs7QUFFRDtBQUNJO0FBQ0g7O0FBOUNJOzs7Ozs7Ozs7O0FDRlQ7OztBQUdBO0FBQ0k7O0FBRUE7QUFDSTtBQUNBO0FBQ0E7O0FBRUE7QUFDSTtBQUNBO0FBQ0E7QUFIYTtBQUtqQjtBQUNJO0FBQ0E7QUFDQTtBQUhVO0FBS2Q7QUFDSTtBQUNBO0FBQ0E7QUFIYTtBQWZUOztBQXNCWjtBQUNBO0FBQ0k7QUFDQTtBQUNIOztBQUVEO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUVRO0FBQ0E7QUFGSjtBQUtKO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDSTtBQUNJO0FBQ0E7QUFDQTtBQUhVO0FBS2pCO0FBQ0o7QUFDSjtBQUNEO0FBQ0g7O0FBRUQ7QUFDSTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0k7QUFDQTtBQUNJO0FBQ0E7QUFDSTtBQUNBO0FBQ0g7QUFDRztBQUNIO0FBQ0o7QUFDSjtBQUNKOztBQUVEO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNIOztBQUVEO0FBQ0k7QUFDSDs7QUFFRDtBQUNJO0FBQ0k7QUFDSTtBQUNBO0FBQ0g7QUFDSjtBQUNHO0FBQ0E7QUFDSDtBQUNKOztBQXZHSTs7Ozs7Ozs7OztBQ0hUOzs7QUFHQTtBQUNJOztBQUVBO0FBQ0k7O0FBR0o7QUFDQTtBQUNJOztBQUVBO0FBQ0g7O0FBRUQ7QUFDSTtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0g7QUFDSjs7QUFFRDtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0g7QUFDSjs7QUFFRDtBQUNBO0FBQ0k7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNJO0FBQ0g7QUFDSjtBQUNEO0FBQ0g7O0FBRUQ7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNIO0FBQ0o7O0FBRUQ7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0k7QUFDQTtBQUNJO0FBQ0g7QUFDSjtBQUNKOztBQUVEO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNJO0FBQ0g7QUFDRDtBQUNIOztBQUVEO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNJO0FBQ0E7QUFFSDtBQUNKO0FBN0ZJOzs7Ozs7Ozs7O0FDSFQ7O0FBRUE7QUFDSTs7QUFFQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUhjO0FBS2xCO0FBQ0k7QUFDQTtBQUNBO0FBSGdCO0FBS3BCO0FBQ0k7QUFDQTtBQUNBO0FBSGM7QUFLbEI7QUFDSTtBQUNBO0FBQ0E7QUFIZ0I7QUFLcEI7QUFDSTtBQUNBO0FBQ0E7QUFIWTtBQUtoQjtBQUNJO0FBQ0E7QUFDQTtBQUhXO0FBS2Y7QUFDSTtBQUNBO0FBQ0E7QUFIWTtBQWpEUjs7QUF3RFo7QUFDQTtBQUNJOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7O0FBRUQ7QUFDQTtBQUNJO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7O0FBRUQ7QUFDSTtBQUNBO0FBQ0E7QUFDSDtBQUNEO0FBQ0k7QUFDQTtBQUNBO0FBQ0g7O0FBRUQ7QUFDQTtBQUNJO0FBQ0k7QUFDQTtBQUNBO0FBQ0g7QUFDRztBQUNBO0FBQ0E7QUFDSDtBQUNKOztBQUVEO0FBQ0E7QUFDSTtBQUNJO0FBQ0E7QUFDQTtBQUNIO0FBQ0c7QUFDQTtBQUNBO0FBQ0g7QUFDRDtBQUNIOztBQUVEO0FBQ0E7QUFDSTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNIO0FBQ0Q7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7QUFDSjtBQUNHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDSDs7QUFFRDtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDSDtBQUNKOztBQUVEO0FBQ0k7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFMVTtBQU9kO0FBQ0g7QUFDSjtBQUNEO0FBQ0E7QUFHQTtBQUNBO0FBQ0k7QUFDQTtBQUNJO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDSjtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0o7QUFDSTtBQVpSO0FBY0g7O0FBRUQ7O0FBRUE7QUFDSTtBQUNBO0FBQ0E7QUFDSTtBQUNBO0FBQ0g7QUFDRztBQUNBO0FBQ0g7QUFDSjs7QUFFRDtBQUNBO0FBQ0k7QUFDQTtBQUNJO0FBQ0E7QUFDSDtBQUNEO0FBQ0g7QUFDRDtBQUNJO0FBQ0E7QUFBQTtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDSDtBQUNEO0FBQ0g7QUFDRDtBQUNJO0FBQ0E7QUFBQTtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDSDtBQUNEO0FBQ0g7QUFDRDtBQUNJO0FBQ0E7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNIOztBQUVEO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7O0FBRUQ7O0FBRUE7QUFDQTtBQUNJO0FBQ0k7QUFDQTtBQUNBO0FBQ0g7QUFDRztBQUNBO0FBQ0E7QUFDSDtBQUNKO0FBQ0Q7QUFDQTtBQUNJO0FBQ0k7QUFDQTtBQUNBO0FBQ0g7QUFDRztBQUNBO0FBQ0E7QUFDSDtBQUNKOztBQUVEO0FBQ0E7QUFDSTtBQUNJO0FBQ0E7QUFDSDtBQUNHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNIO0FBQ0o7QUFDRDtBQUNBO0FBQ0k7QUFDQTtBQUNJO0FBQUE7QUFDQTtBQUNJO0FBQ0E7QUFDSDtBQUNHO0FBQ0g7QUFDRDtBQUNIO0FBQ0o7O0FBRUQ7O0FBRUE7QUFDQTtBQUNJO0FBQ0k7QUFDQTtBQUNIO0FBQ0c7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7QUFDSjtBQUNEO0FBQ0E7QUFDSTtBQUNBO0FBQ0k7QUFBQTtBQUNBO0FBQ0k7QUFDQTtBQUNIO0FBQ0c7QUFDSDtBQUNEO0FBQ0g7QUFDSjs7QUFFRDtBQUNBO0FBQ0k7QUFDSTtBQUNBO0FBQ0g7QUFDRztBQUNBO0FBQ0g7QUFDSjtBQUNEO0FBQ0E7QUFDSTtBQUNBO0FBQ0g7O0FBR0Q7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7QUFDRDtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0g7QUFDRDtBQUNBO0FBQ0k7QUFDSTtBQUNIO0FBQ0Q7QUFDSDs7QUFqWkk7Ozs7Ozs7Ozs7QUNGVDs7O0FBR0E7QUFDSTs7QUFFQTtBQUNJO0FBQ0E7QUFDQTs7QUFFQTtBQUNJO0FBQ0E7QUFDQTtBQUhXO0FBS2Y7QUFDSTtBQUNBO0FBQ0E7QUFIYTtBQUtqQjtBQUNJO0FBQ0E7QUFDQTtBQUhTO0FBS2I7QUFDSTtBQUNBO0FBQ0E7QUFIVTtBQUtkO0FBQ0k7QUFDQTtBQUNBO0FBSGdCO0FBS3BCO0FBQ0k7QUFDQTtBQUNBO0FBSGE7QUE5QlQ7O0FBcUNaO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNIOztBQUVEO0FBQ0E7QUFDSTtBQUNBO0FBQ0g7QUFDRDtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7O0FBRUQ7QUFDQTtBQUNBO0FBQ0g7QUFDRDtBQUNJO0FBQ0E7QUFDQTtBQUNJO0FBQ0E7QUFDSDtBQUNKO0FBQ0Q7QUFDSTtBQUNIO0FBQ0Q7QUFDQTtBQUNJO0FBQ0E7QUFDSDs7QUFFRDs7QUFFQTtBQUNBO0FBQ0k7QUFDSDtBQUNEO0FBQ0E7QUFDSTtBQUNIO0FBQ0Q7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNIO0FBQ0Q7QUFDQTtBQUNBO0FBQ0g7QUFDRDtBQUNJO0FBQ0E7QUFDQTtBQUNJO0FBQ0E7QUFDSDtBQUNKO0FBQ0Q7QUFDQTtBQUNJO0FBQ0k7QUFDSDtBQUNEO0FBQ0g7O0FBRUQ7QUFDSTtBQUNBO0FBQ0g7O0FBR0Q7O0FBRUE7QUFDQTtBQUNJO0FBQ0k7QUFDQTtBQUNJO0FBQ0g7QUFDRztBQUNIO0FBQ0o7QUFDRztBQUNJO0FBQ0E7QUFDSDtBQUNKO0FBQ0o7O0FBRUQ7QUFDSTtBQUNBO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNIO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDSDtBQUNEO0FBQ0k7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0k7QUFDQTtBQUNIO0FBQ0o7QUFDSjs7QUFFRDtBQUNJO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDSDtBQUNKOztBQUVEOztBQUVBO0FBQ0k7QUFDQTtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDSDtBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7QUFDRDtBQUNJOztBQUVBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDSTtBQUNBO0FBQ0g7QUFDSjtBQUNKOztBQUVEO0FBQ0k7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7QUFDRDtBQUNIO0FBQ0Q7QUFDSTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7QUFDSjs7QUFFRDtBQUNJO0FBQ0E7QUFDSDs7QUFFRDs7QUFFQTtBQUNJO0FBQ0g7O0FBRUQ7QUFDSTtBQUNIOztBQUVEO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7O0FBclFJOzs7Ozs7Ozs7O0FDSFQ7Ozs7QUFJQTtBQUNBO0FBQ0k7QUFDQTs7QUFJSjs7Ozs7Ozs7OztBQ1hBOztBQUVBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFsQ1U7O0FBcUNkOzs7Ozs7Ozs7O0FDdkNBOztBQUVBO0FBQ0k7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBNUJnQjs7QUErQnBCOzs7Ozs7Ozs7O0FDakNBOzs7O0FBSUE7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUlKOzs7Ozs7Ozs7O0FDcENBOztBQUVBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUdKOztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7QUM5Q0E7Ozs7QUFJQTtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7O0FBaUJKOzs7Ozs7Ozs7O0FDMUJBOztBQUVBO0FBQ0k7QUFDSTtBQUNBO0FBRm9CO0FBSXhCO0FBQ0k7QUFDQTtBQUNBO0FBSGdCO0FBS3BCO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBVHVCO0FBVzNCO0FBQ0E7QUFDSTtBQUNBO0FBRmdCO0FBSXBCO0FBQ0E7QUFDSTtBQUNBO0FBRm9CO0FBSXhCO0FBQ0E7QUFDSTtBQUNBO0FBRUo7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFSjtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVJjOztBQVdsQjtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBSUo7QUFDQTtBQTlFUztBQWdGYjs7Ozs7Ozs7OztBQ2xGQTs7OztBQUlBO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDSDtBQUNEO0FBQ0k7QUFDQTtBQUNIO0FBQ0Q7QUFDSTtBQUNBO0FBQ0g7QUFDRDtBQUNJO0FBQ0E7QUFDSDtBQUNEO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDSDs7QUFFRDtBQUNBO0FBQ0k7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSDtBQUNKO0FBQ0Q7QUFDSTtBQUNJO0FBQ0g7QUFDSjtBQUNEO0FBQ0E7QUFDSTtBQUNIO0FBQ0Q7QUFDQTtBQUNJO0FBQ0g7QUFDRDtBQUNBO0FBQ0k7QUFDQTtBQUNJO0FBQ0k7QUFDQTtBQUNKO0FBQ0k7QUFDQTtBQUNKO0FBQ0k7QUFDQTtBQUNKO0FBQ0k7QUFYUjtBQWFBO0FBQ0g7O0FBRUQ7QUFDQTtBQUNJO0FBQ0k7QUFDSTtBQUNKO0FBQ0k7QUFDSjtBQUNJO0FBTlI7QUFRQTtBQUNIO0FBQ0Q7QUFDQTtBQUNJO0FBQ0k7QUFDSTtBQUNKO0FBQ0k7QUFDSjtBQUNJO0FBQ0o7QUFDSTtBQVJSO0FBVUE7QUFDSDs7QUFFRDtBQUNBO0FBQ0k7QUFDQTtBQUNJO0FBQ0k7QUFDQTtBQUNKO0FBQ0k7QUFDQTtBQUNKO0FBQ0k7QUFDQTtBQUNKO0FBQ0k7QUFYUjtBQWFBO0FBQ0g7O0FBRUQ7QUFDQTtBQUNJO0FBQ0E7QUFDSTtBQUNIO0FBQ0c7QUFDSDtBQUNKOztBQUVEO0FBQ0k7QUFDSDs7QUFFRDs7QUFFQTtBQUNBO0FBQ0k7QUFDSTtBQUNIO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDSTtBQUNBO0FBRk87QUFJWDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSDtBQUNEO0FBQ0E7QUFDSTtBQUNJO0FBQ0g7QUFDRDtBQUNIO0FBQ0Q7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7QUFDRDtBQUNJO0FBQUE7QUFDQTtBQUlIOztBQUVEOztBQUVBO0FBQ0E7QUFDSTtBQUNBO0FBQ0k7QUFDSDtBQUNKO0FBQ0Q7QUFDQTtBQUNJO0FBQ0E7QUFDSTtBQUNIO0FBQ0o7QUFDRDtBQUNBO0FBQ0k7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNJO0FBQ0k7QUFDQTtBQUNBO0FBSG9CO0FBSzNCO0FBQ0Q7QUFDSDtBQUNKO0FBQ0Q7QUFDQTtBQUNJO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDSTtBQUNJO0FBQ0E7QUFDQTtBQUhxQjtBQUs1QjtBQUNEO0FBQ0g7QUFDSjtBQUNEOztBQUVBO0FBQ0E7QUFDSTtBQUNJO0FBQ0E7QUFDQTtBQUNJO0FBR0k7QUFDSDtBQUNEO0FBQ0k7QUFDQTtBQUNIO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7QUFDSjtBQUNHO0FBQ0k7QUFDQTtBQUNIO0FBQ0o7QUFDSjtBQTNQVTs7QUE4UGY7Ozs7Ozs7Ozs7QUNuUUE7O0FBRUE7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBSnFCOztBQU96QjtBQUNJOztBQUVBO0FBQ0k7O0FBRUE7QUFDSTtBQUNBO0FBQ0E7QUFIYTtBQUtqQjtBQUNJO0FBQ0E7QUFDQTtBQUhPO0FBUkg7O0FBZVo7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNIOztBQUVEO0FBQ0k7QUFDQTtBQUNJO0FBQ0k7QUFDQTtBQUNKO0FBQ0k7QUFDQTtBQUNKO0FBQ0k7QUFDQTtBQUNKO0FBQ0k7QUFDQTtBQUNKO0FBQ0k7QUFkUjtBQWdCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7O0FBRUQ7QUFDQTtBQUNJOztBQUVBO0FBQ0E7QUFDSTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSjtBQUNJO0FBQ0E7QUFDSTtBQUNBO0FBQ0g7QUFDRDtBQUNKO0FBQ0k7QUFDQTtBQUNJO0FBQ0E7QUFDSDtBQUNEO0FBQ0o7QUFDSTtBQUNBO0FBQ0k7QUFDQTtBQUNIO0FBQ0Q7QUFDSjtBQUNJO0FBN0JSOztBQWdDQTtBQUNBO0FBQ0k7QUFDQTtBQUNIO0FBQ0Q7QUFDSDs7QUFFRDtBQUNBO0FBQ0k7QUFDSTtBQUNJO0FBQ0g7QUFDSjtBQUNKOztBQUVEO0FBQ0k7QUFDSDs7QUFFRDtBQUNJO0FBQ0g7O0FBRUQ7QUFDSTtBQUNBO0FBQ0g7O0FBckpJOzs7Ozs7Ozs7O0FDVlQ7O0FBRUE7QUFDSTtBQUNJO0FBQ0E7QUFDQTs7QUFHSjtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0g7O0FBRUQ7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7O0FBRUQ7QUFDQTtBQUNJO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNIO0FBQ0o7O0FBRUQ7QUFDQTtBQUNJO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDSTtBQUNBO0FBQ0k7QUFDSDtBQUNKO0FBQ0o7QUFDSjs7QUFFRDtBQUNJO0FBQ0E7QUFDQTtBQUNIO0FBQ0Q7QUFDQTtBQUNJO0FBQ0k7QUFDSDtBQUNHO0FBQ0E7QUFDSDtBQUNKOztBQTdEcUI7Ozs7Ozs7Ozs7QUNGMUI7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0k7QUFDQTtBQUNJO0FBQ0g7QUFDRDtBQUNIO0FBQ0Q7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7O0FBR0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0k7QUFDSTtBQUNBO0FBQ0g7QUFDRDtBQUNIO0FBQ0Q7QUFDSTtBQUNIO0FBQ0Q7QUFDQTtBQUNRO0FBQ0E7QUFDSDs7QUFFTDtBQUNBO0FBQ1E7QUFDQTtBQUNIOztBQUVMO0FBQ0E7QUFDUTtBQUNBO0FBQ0g7O0FBRUw7QUFDQTtBQUNRO0FBQ0E7QUFDSDs7QUFFTDtBQUNBO0FBQ1E7QUFDQTtBQUNIO0FBQ0w7QUFDQTtBQUNRO0FBQ0E7QUFDSDs7QUFFTDtBQUNBO0FBQ1E7QUFDQTtBQUNIOztBQUVMO0FBQ0E7QUFDUTtBQUNBO0FBQ0g7O0FBRUw7QUFDQTtBQUNRO0FBQ0E7QUFDSDs7QUFFTDs7QUFFQTtBQUNBO0FBQ0k7QUFDSDs7QUFFRDtBQUNBO0FBQ0k7QUFDQTtBQUNJO0FBQ0E7QUFDSTtBQUNIO0FBQ0o7QUFDRDtBQUNIOztBQUVEO0FBQ0E7QUFDSTtBQUNBO0FBQ0k7QUFEVTtBQUdkO0FBQ0E7QUFDQTtBQUNIOztBQUVEO0FBQ0E7QUFDSTtBQUNJO0FBQ0k7QUFDQTtBQUNIO0FBQ0o7QUFDSjs7QUFFRDtBQUNBO0FBQ0k7QUFDSTtBQUQ4QjtBQUdsQztBQUNJO0FBQ0g7QUFDSjs7QUFFRDtBQUNBO0FBQ0k7QUFDSTtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0g7QUFDSjtBQUNKOztBQUVEO0FBQ0E7QUFDSTtBQUNIO0FBQ0Q7QUFDQTtBQUNJO0FBQ0g7QUFDRDtBQUNBO0FBQ0k7QUFDQTtBQUNJO0FBQ0E7QUFGaUM7QUFJeEM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSTtBQUNIO0FBQ0c7QUFDQTtBQUNIOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0k7QUFDQTtBQUNJO0FBQ0k7QUFDQTtBQUVIO0FBQ0o7QUFDSjs7QUFFRDtBQUNBO0FBQ0g7QUFDRDtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0k7QUFDSDtBQUNEO0FBQ0g7QUFDRDtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNJO0FBQ0g7QUFDRDtBQUNIOzs7Ozs7Ozs7O0FDNU9EOztBQUVBO0FBQ0k7O0FBRUE7QUFDSTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDSTtBQUNBO0FBQ0E7QUFIWTtBQUtoQjtBQUNJO0FBQ0E7QUFDQTtBQUhpQjtBQUtyQjtBQUNJO0FBQ0E7QUFDQTtBQUhvQjtBQUt4QjtBQUNJO0FBQ0E7QUFDQTtBQUhpQjtBQUtyQjtBQUNJO0FBQ0E7QUFDQTtBQUhtQjtBQUt2QjtBQUNJO0FBQ0E7QUFDQTtBQUhlO0FBS25CO0FBQ0k7QUFDQTtBQUNBO0FBSFc7QUFLZjtBQUNJO0FBQ0E7QUFDQTtBQUhpQjtBQUtyQjtBQUNJO0FBQ0E7QUFDQTtBQUhVO0FBM0ROOztBQWtFWjtBQUNBO0FBQ0k7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7O0FBRUQ7QUFDSTtBQUNBO0FBQ0E7QUFHSTs7QUFFQTtBQUNBO0FBQ0k7QUFDSTtBQUNBO0FBQ0E7QUFDSDtBQUNHO0FBQ0g7QUFDSjtBQUNKO0FBQ0o7O0FBRUQ7O0FBRUE7QUFDSTtBQUNBOztBQUVBO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNIO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7O0FBRUQ7QUFDSTtBQUNBO0FBQ0k7QUFDSDtBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNIO0FBQ0c7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUpVO0FBTWQ7QUFDQTtBQUNBO0FBQ0g7QUFDRDtBQUNIOztBQUVEO0FBQ0k7QUFDQTtBQUNBO0FBQ0g7O0FBRUQ7QUFDSTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0k7QUFDQTtBQUZ1QjtBQUkzQjtBQUNBO0FBQ0E7O0FBRUE7QUFDSDs7QUFFRDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNJO0FBQ0E7QUFDSTtBQUNIO0FBQ0Q7QUFDQTtBQUNBO0FBQ0k7QUFDSDtBQUNHO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFIVTtBQUtkO0FBQ0k7QUFDQTtBQUNIO0FBQ0c7QUFDSDtBQUNEO0FBQ0E7QUFDQTtBQUNIO0FBQ0o7O0FBRUQ7QUFDSTtBQUNBO0FBQ0E7QUFDSTtBQUNJO0FBQ1E7QUFDQTtBQUNBO0FBSkU7QUFRZDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDSDtBQUdKOztBQUVEO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNIOztBQUVEO0FBQ0k7QUFDQTtBQUNBO0FBQ0k7QUFDQTtBQUNIO0FBQ0o7O0FBRUQ7QUFDSTs7QUFFQTtBQUNBO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDSDtBQUNEOztBQUVBO0FBQ0g7QUFDRDtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0k7QUFDQTtBQUNIO0FBQ0o7QUFDRDtBQUNJO0FBQ0E7QUFDSTtBQUNBO0FBQ0g7QUFDSjtBQUNEO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDSTtBQUNIO0FBR0o7O0FBRUQ7O0FBRUE7QUFDQTtBQUNJO0FBQ0E7QUFDSDtBQUNEO0FBQ0E7QUFDSTtBQUNJO0FBQ0k7QUFDSDtBQUNEO0FBQ0E7QUFDSDtBQUNKO0FBQ0Q7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNIOztBQUVEO0FBQ0k7QUFDQTtBQUNBO0FBQ0k7QUFDSTtBQUNBO0FBQ0o7QUFDSTtBQUNBO0FBQ0o7QUFDSTtBQUNBO0FBQ0o7QUFDSTtBQUNBO0FBQ0o7QUFDSTtBQUNBO0FBQ0o7QUFDSTtBQUNBO0FBQ0o7QUFDSTtBQUNBO0FBQ0o7QUFDSTtBQUNBO0FBQ0o7QUFDSTtBQUNBO0FBM0JSO0FBNkJIO0FBQ0Q7QUFDQTtBQUNJO0FBQ0g7O0FBRUQ7O0FBRUE7QUFDQTtBQUNJO0FBQ0k7QUFDQTtBQUNIO0FBQ0o7QUFDRDtBQUNBO0FBQ0k7QUFDQTtBQUNJO0FBQ0g7QUFDRztBQUNBOztBQUVBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0k7QUFDQTtBQUZ1QjtBQUkzQjtBQUNBO0FBQ0E7QUFDQTtBQUNIOztBQUVEO0FBQ0g7QUFDSjtBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0k7QUFDSDs7QUFFRDtBQUNBO0FBQ0E7QUFDSTtBQUNIOztBQUdEO0FBQ0k7QUFDSDtBQUNEO0FBQ0k7QUFDSDtBQUNEO0FBQ0k7QUFDSDtBQUNEO0FBQ0k7QUFDSDtBQUNEO0FBQ0k7QUFDSDtBQUNEO0FBQ0E7QUFDSTtBQUFBO0FBQUE7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNIO0FBQ0Q7QUFDSDtBQUNEO0FBQ0E7QUFDSTtBQUNIO0FBQ0Q7QUFDSTtBQUNIO0FBQ0Q7QUFDSTtBQUNIO0FBQ0Q7QUFDSTtBQUNIO0FBQ0Q7QUFDSTtBQUNIO0FBQ0Q7QUFDSTtBQUNIO0FBQ0Q7QUFDQTtBQUNJO0FBQ0g7QUFDRDtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDSTtBQUNBO0FBQ0g7QUFDRDtBQUNIO0FBQ0Q7QUFDQTtBQUNJO0FBQ0g7QUFDRDtBQUNBO0FBQ0k7QUFDSDtBQUNEO0FBQ0E7QUFDSTtBQUNIO0FBQ0Q7QUFDQTtBQUNJO0FBQ0g7QUFDRDtBQUNBO0FBQ0k7QUFDSDtBQUNEO0FBQ0E7QUFDSTtBQUNIOztBQUdEO0FBQ0E7QUFDSTtBQUNBO0FBRUg7QUFDRDtBQUNBO0FBQ0k7QUFDSDs7QUFFRDs7QUFFQTs7QUFFSTtBQUNJO0FBQ0E7QUFDSTtBQUNJO0FBQ0E7QUFGUTtBQUlaO0FBQ0k7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEk7QUFPUjtBQVJTO0FBVVQ7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEk7QUFPUjtBQVJEO0FBVUM7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEk7QUFPUjtBQVJEO0FBVUM7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEk7QUFPUjtBQVJEO0FBVUM7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEk7QUFPUjtBQVJEO0FBVUM7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEk7QUFPUjtBQVJEO0FBVUM7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEk7QUFPUjtBQVJEO0FBVUg7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTFE7QUFPWjtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFYTTtBQTVFQztBQTBGZjs7QUFFQTtBQUNBO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDSTtBQUNBO0FBRnVCO0FBSTNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7QUFDRztBQUNBO0FBQ0k7QUFDQTtBQUZpQztBQUl4QztBQUNKO0FBQ0Q7QUFDQTtBQUNIO0FBQ0c7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNIO0FBQ0o7QUFHSjs7QUFFRDtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSTtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0g7QUFDRDtBQUNIO0FBQ0c7QUFDQTtBQUNJO0FBQ0E7QUFDSDtBQUNEO0FBQ0g7QUFDSjs7QUFFRDtBQUNBO0FBQ0k7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0k7QUFDSDtBQUNEO0FBQ0E7QUFDSTtBQUNBO0FBQ0g7QUFDRDtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDSDtBQUNEO0FBQ0E7QUFDSTtBQUNIO0FBQ0o7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSTtBQUNJO0FBQ0E7QUFDSDtBQUNHO0FBQ0E7QUFDQTtBQUNIO0FBQ0o7QUFDSjs7QUFFRDtBQUNBO0FBQ0k7QUFDQTtBQUNJO0FBQ0E7QUFDSDtBQUNEOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDSTtBQUNBO0FBRnVCO0FBSTNCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7QUFDRDtBQUNBO0FBQ0g7QUFDRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNJO0FBQ0E7QUFGdUI7QUFJM0I7QUFDQTtBQUNBO0FBQ0g7QUFDRDtBQUNBO0FBQ0g7QUFDSjtBQUNKOztBQUVEO0FBQ0E7QUFDSTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDSTtBQUNJO0FBQ0E7QUFGUztBQUliO0FBQ0E7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVRPO0FBUEE7QUFtQmY7QUFDSDs7QUFFRDtBQUNBO0FBQ0k7QUFDQTtBQUNJO0FBQ0E7QUFDSDtBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSTtBQUNJO0FBQ0E7QUFGUztBQUliO0FBQ0E7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU5PO0FBUEE7QUFtQmY7O0FBRUE7QUFDQTtBQUNBO0FBQ0g7O0FBRUQ7QUFDQTtBQUNJO0FBQ0E7QUFDSTtBQUNBO0FBQ0g7O0FBRUQ7QUFBQTtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0k7QUFDSTtBQUNBO0FBQ0o7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNJO0FBQ0E7QUFDSDtBQUNEO0FBQ0k7QUFDSDtBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSjtBQUNJO0FBQ0E7QUFDSjtBQUNJO0FBQ0E7QUFDQTtBQUNJO0FBQ0E7QUFDSDtBQUNEO0FBQ0E7QUFDQTtBQWhDUjtBQWtDSDtBQUNKOztBQUVEO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNIOztBQUVEO0FBQ0k7QUFDQTtBQUdJO0FBQ0E7QUFDSTtBQUNJO0FBQ0o7QUFDSTtBQUNKO0FBQ0k7QUFOUjtBQVFBO0FBQ0g7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0k7QUFDQTtBQUNJO0FBQ0k7QUFDQTtBQUZXO0FBSWxCO0FBQ0o7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDSTtBQUNBO0FBQ0k7QUFDQTs7QUFFQTtBQUNJO0FBQ0k7QUFDQTtBQUNBO0FBQ0o7QUFDSTtBQUNKO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFYUjtBQWFIO0FBQ0o7QUFDRDtBQUNIOztBQUVEO0FBQ0E7QUFDSTtBQUNBO0FBQ0k7QUFDQTtBQUNIOztBQUVEO0FBQ0E7QUFDSDs7QUFFRDtBQUNBO0FBQ0k7QUFDQTtBQUNJO0FBQ0E7QUFDSDs7QUFFRDtBQUFBO0FBQUE7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNIO0FBQ0o7O0FBRUQ7QUFDQTtBQUNJO0FBQ0E7QUFDSTtBQUNBO0FBQ0g7O0FBRUQ7QUFDSDs7QUFFRDtBQUNJO0FBQ0E7QUFDQTtBQUNIOztBQUdEO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSDs7QUFFRDtBQUNBOztBQUVBOztBQUVBO0FBQ0k7QUFDQTtBQUNIO0FBM2pDSTs7Ozs7Ozs7OztBQ0ZUOzs7QUFHQTtBQUNJOztBQUVBO0FBQ0k7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVZROztBQWFaO0FBQ0E7QUFDSTs7QUFFQTtBQUNIOztBQUVEO0FBQ0k7QUFDQTs7QUFFQTtBQUNIOztBQUVEO0FBQ0k7QUFDQTtBQUNIOztBQUVEO0FBQ0k7QUFDQTtBQUNJO0FBQ0g7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSDtBQUNEO0FBQ0E7QUFDSTtBQUNIO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDSTtBQUNJO0FBQ0k7QUFDSDtBQUNEO0FBQ0g7O0FBRUQ7QUFDSTtBQUNJO0FBQ0k7QUFDQTtBQUZVO0FBSWQ7QUFDSDtBQUNKO0FBQ0c7QUFDSTtBQUNBO0FBRlU7QUFJZDtBQUNIO0FBRUo7QUFDRDtBQUNBO0FBQ0k7QUFDQTtBQUNJO0FBQ0g7QUFDSjtBQUNEO0FBQ0E7QUFDSTtBQUNBO0FBQ0k7QUFDQTtBQUNIO0FBQ0o7QUFDRDtBQUNBO0FBQ0k7QUFDQTtBQUNJO0FBQ0g7QUFDSjs7QUFFRDs7QUFFQTtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0g7O0FBRUQ7QUFDSTtBQUFBO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDSDtBQUNKO0FBQ0Q7QUFDSTtBQUNIO0FBQ0Q7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNIOztBQUVEO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSTtBQUNJO0FBQ0E7QUFDSDtBQUNHO0FBQ0k7QUFDSDtBQUNEO0FBQ0g7QUFDSjtBQUNEO0FBQ0E7QUFDSTtBQUNBOztBQUVBO0FBQ0E7QUFDSDtBQUNKOztBQUVEOztBQUVBO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDSTtBQUNBO0FBQ0g7QUFDSjs7QUFHRDtBQUNBO0FBQ0k7QUFDSTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNIOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNIOztBQUVEO0FBQ0E7QUFDSTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7QUFDSjs7QUFFRDtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0g7QUFDRDtBQUNBO0FBQ0k7QUFDSDs7QUFFRDs7QUFFQTtBQUNBO0FBQ0k7QUFDQTtBQUNIO0FBQ0Q7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSDtBQTFQSTs7Ozs7Ozs7OztBQ0hUOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDSTs7QUFFQTtBQUNJO0FBQ0E7O0FBRUE7QUFKUTs7QUFPWjtBQUNBO0FBQ0k7QUFDQTtBQUNBOztBQUVBO0FBQ0g7O0FBRUQ7QUFDSTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0k7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7QUFDRDtBQUNIO0FBQ0Q7QUFDSTtBQUNBO0FBQ0k7QUFDQTtBQUNIO0FBQ0Q7QUFDSTtBQUNBO0FBQ0g7QUFDRDtBQUNIOztBQUVEOztBQUVBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDSTtBQUNBO0FBQ0k7QUFDSDtBQUNKO0FBQ0o7QUFDRDtBQUNJO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDSTtBQUNBO0FBQ0k7QUFDQTtBQUNIO0FBQ0o7QUFDSjtBQUNKOztBQUVEO0FBQ0E7O0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNJO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDSDtBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7O0FBRUQ7QUFDSTtBQUNBO0FBQ0g7O0FBRUQ7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNJO0FBQ0g7QUFDSjs7QUEvSkk7Ozs7Ozs7Ozs7QUNYVDs7O0FBR0E7QUFDSTs7QUFFQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDSTtBQUNBO0FBQ0E7QUFIUztBQUtiO0FBQ0k7QUFDQTtBQUNBO0FBSGE7QUFLakI7QUFDSTtBQUNBO0FBQ0E7QUFIaUI7QUFLckI7QUFDSTtBQUNBO0FBQ0E7QUFIYztBQUtsQjtBQUNJO0FBQ0E7QUFDQTtBQUhlO0FBS25CO0FBQ0k7QUFDQTtBQUNBO0FBSG1CO0FBbkNmOztBQTBDWjtBQUNBO0FBQ0k7QUFDSDs7QUFFRDtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNIOztBQUVEO0FBQ0k7QUFDQTtBQUNBO0FBQ0g7O0FBRUQ7QUFDSTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNIOztBQUVEO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDSDtBQUNEO0FBQ0k7QUFDSDs7QUFFRDtBQUNJO0FBQ0E7O0FBRUE7QUFDQTtBQUNJO0FBQ0g7QUFDRDtBQUNIOztBQUVEO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNIO0FBQ0Q7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNIOztBQUVEO0FBQ0k7QUFDSTtBQUNIO0FBQ0c7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7QUFDSjtBQUNEO0FBQ0k7QUFFQTtBQUNIOztBQUVEO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNIO0FBQ0c7QUFDQTtBQUNBO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0k7QUFDQTtBQUNIO0FBUlM7QUFVZDtBQUNIO0FBQ0Q7QUFDSDtBQUNEO0FBQ0E7QUFHQTtBQUNJO0FBQ0E7QUFDSDtBQUNEO0FBQ0k7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSDs7QUFFRDtBQUNJO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7QUFDRDtBQUNIOztBQUVEO0FBQ0k7O0FBRUE7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNIO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDSDtBQUNEO0FBQ0k7QUFDQTtBQUNBO0FBQ0g7O0FBRUQ7QUFDSTtBQUNBO0FBQ0k7QUFDSDtBQUNEO0FBQ0g7O0FBRUQ7QUFDSTtBQUNJO0FBQ0g7QUFDSjtBQUNEO0FBQ0E7QUFDSTtBQUNJO0FBQ0E7QUFDSDtBQUNHO0FBQ0E7QUFDSDtBQUNKOztBQUVEO0FBQ0k7QUFDQTtBQUNBO0FBQ0g7QUFDRDtBQUNJO0FBQ0E7QUFDQTtBQUNIOztBQUVEO0FBQ0k7QUFDSDtBQUNEO0FBQ0k7QUFDSDs7QUFFRDtBQUNJO0FBQ0g7QUFDRDtBQUNJO0FBQ0g7QUFDRDtBQUNBO0FBQ0k7QUFDSDs7QUF0Ukk7Ozs7Ozs7Ozs7QUNIVDs7QUFFQTtBQUNJOztBQUVBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0k7QUFDQTtBQUNBO0FBSFc7QUFLZjtBQUNJO0FBQ0E7QUFDQTtBQUhlO0FBS25CO0FBQ0k7QUFDQTtBQUNBO0FBSGE7QUFLakI7QUFDQTtBQUNJO0FBQ0k7QUFDSDtBQUNEO0FBQ0k7QUFDSDtBQUNEO0FBQ0E7QUFSUztBQVViO0FBaERROztBQW1EWjtBQUNBO0FBQ0k7QUFDSDs7QUFFRDtBQUNJO0FBQ0E7QUFDQTtBQUNIOztBQUVEOztBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNJO0FBQ0E7O0FBRUE7QUFDQTtBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSDtBQUNEO0FBQ0k7QUFDQTtBQUNBO0FBQ0k7QUFDSDtBQUNKOztBQUVEO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSDs7QUFFRDtBQUNJO0FBQ0g7O0FBRUQ7QUFDSTtBQUVIOztBQUVEO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7O0FBRUE7QUFDSTtBQUNBO0FBQ0k7QUFEVTtBQUdkO0FBQ0g7QUFDRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0k7QUFDQTtBQUNIO0FBQ0c7QUFDSTtBQUNIO0FBQ0Q7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUVKO0FBQ0E7QUFDQTtBQUNIO0FBQ0o7QUFDSjtBQUNEO0FBQ0k7QUFDQTtBQUNBO0FBQ0k7QUFDSTtBQUNBO0FBQ0E7QUFIVTtBQUtkO0FBQ0E7QUFDSDs7QUFFRDtBQUNBO0FBQ0k7QUFDQTtBQUNIO0FBQ0Q7QUFDQTtBQUNJO0FBQ0E7QUFDSDtBQUNEO0FBQ0E7QUFDSTtBQUNBO0FBQ0g7QUFDRDtBQUNBO0FBQ0E7QUFDSTtBQUNIO0FBQ0Q7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNJO0FBQ0E7QUFDSDtBQUNKO0FBQ0Q7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSTtBQUNBO0FBQ0g7QUFDSjs7QUFFRDtBQUNJO0FBQ0E7QUFDSDtBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNJO0FBQ0k7QUFDQTtBQUNBO0FBQ0g7QUFDRDtBQUNIO0FBQ0Q7QUFDQTtBQUNJOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNJO0FBQ0g7QUFDRztBQUNIO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7QUFDRDtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNIOztBQUVEO0FBQ0k7QUFDQTtBQUNJOztBQUVBO0FBQ0E7QUFDSTtBQUNJO0FBQ0E7QUFDQTtBQUhVO0FBS2pCO0FBQ0o7QUFDSjs7QUFFRDtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0g7QUFDRDtBQUNBO0FBQ0k7QUFDSDs7QUFFRDtBQUNJO0FBQ0g7QUFDRDtBQUNBO0FBQ0k7QUFDSDtBQUNEO0FBQ0k7QUFDQTs7QUFFQTtBQUNBO0FBQ0k7QUFDSDtBQUVKO0FBQ0Q7QUFDSTtBQUNIO0FBQ0Q7QUFDQTtBQUNJO0FBQ0k7QUFDQTtBQUNIO0FBQ0c7QUFDQTtBQUNBO0FBQ0g7QUFDSjs7QUFHRDtBQUNJO0FBQ0g7QUFDRDtBQUNJO0FBQ0g7QUFDRDtBQUNJO0FBQ0g7QUFDRDtBQUNJO0FBQ0g7QUFDRDtBQUNJO0FBQ0g7QUFDRDtBQUNJO0FBQ0g7QUFDRDtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7QUFDRDtBQUNJO0FBQ0g7QUFDRDtBQUNJO0FBQ0g7QUFDRDtBQUNJO0FBQ0g7QUFDRDtBQUNJO0FBQ0g7QUFDRDtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0k7QUFDQTtBQUNIO0FBQ0Q7QUFDSDtBQUNEO0FBQ0E7QUFDSTtBQUNIO0FBQ0Q7QUFDQTtBQUNJO0FBQ0g7QUFDRDtBQUNJO0FBQ0g7QUFDRDtBQUNBO0FBQ0k7QUFDSDs7QUFHRDtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0g7QUFDRDtBQUNJO0FBQ0g7QUFDRDtBQUNJO0FBQ0g7QUFDRDs7QUE5YUs7Ozs7Ozs7Ozs7QUNGVDs7QUFFQTtBQUNJOztBQUVBO0FBQ0k7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUhtQjtBQUt2QjtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBSGtCO0FBYmQ7O0FBb0JaO0FBQ0E7QUFDSTtBQUNIO0FBQ0Q7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNIOztBQUVEO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7QUFDRDtBQUNBO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNJO0FBQ0k7QUFDQTtBQUNIO0FBQ0o7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSDtBQUNEO0FBQ0E7QUFDQTtBQUNJO0FBQ0E7QUFDSDs7QUFFRDtBQUNBO0FBQ0E7QUFDSDs7QUFFRDtBQUNJO0FBQ0E7O0FBRUE7QUFDSDs7QUFFRDtBQUNBO0FBQ0k7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSDtBQUNKOztBQUVEO0FBQ0k7QUFDQTtBQUNIOztBQUVEO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7O0FBRUQ7QUFDQTtBQUNJO0FBQ0E7QUFDSTtBQUNBO0FBQ0k7QUFDQTtBQUNIO0FBQ0c7QUFDSTtBQUNIO0FBQ0o7QUFDSjtBQUNKO0FBQ0Q7QUFDQTtBQUNJO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSDtBQUNHO0FBQ0g7QUFDRDtBQUNBO0FBQ0g7QUFDRDtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNIO0FBQ0Q7QUFDQTtBQUNJO0FBQ0k7QUFDSDtBQUNKOztBQUVEO0FBQ0k7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNIO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0g7QUFDRDtBQUNBO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDSDtBQUNEO0FBQ0E7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDSTtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNIO0FBQ0o7QUFDRDtBQUNBO0FBQ0g7QUFDRDtBQUNIO0FBQ0Q7QUFDSTtBQUFBO0FBQUE7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSDtBQUNKO0FBQ0Q7QUFDSDs7QUFFRDtBQUNBO0FBQ0k7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7O0FBRUQ7QUFDQTtBQUNBO0FBQ0g7O0FBRUQ7QUFDSTtBQUNIO0FBQ0Q7QUFDQTtBQUNJO0FBQ0g7QUFDRDtBQUNJO0FBQ0g7QUFDRDtBQUNBO0FBQ0k7QUFDSDtBQUNEO0FBQ0k7QUFDSDtBQUNEO0FBQ0k7QUFDSDs7QUFoUUk7Ozs7Ozs7Ozs7QUNGVDs7QUFFQTtBQUNJOztBQUVBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFIZ0I7QUFLcEI7QUFDSTtBQUNBO0FBQ0E7QUFIaUI7QUFyQmI7O0FBNEJaO0FBQ0E7QUFDSTtBQUNIOztBQUVEO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSDs7QUFFRDtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7QUFDRDtBQUNJO0FBQ0E7QUFDQTs7QUFFQTtBQUNJO0FBQ0g7QUFDRDtBQUNJO0FBQ0E7QUFDSDtBQUNKOztBQUVEO0FBQ0E7QUFDSTtBQUNJO0FBQ0g7QUFDRztBQUNBO0FBQ0k7QUFDSDtBQUNKO0FBQ0o7QUFDRDtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSTtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0g7QUFDRztBQUNBO0FBQ0E7QUFDSTtBQUNIO0FBQ0o7QUFDRDtBQUNBO0FBQ0g7QUFDSjs7QUFFRDtBQUNBO0FBQ0k7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNIO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDSDtBQUNHO0FBQ0E7QUFDQTtBQUNIO0FBQ0Q7QUFDQTtBQUNBO0FBQ0g7O0FBRUQ7O0FBRUE7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSDtBQUNEO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDSDtBQUNEO0FBQ0E7QUFDSTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNIO0FBQ0Q7QUFDQTtBQUNJO0FBQ0E7QUFDSDtBQUNEO0FBQ0k7QUFDSTtBQUNBO0FBQ0g7QUFDRDtBQUNJO0FBQ0E7QUFDSDtBQUNKOztBQUVEO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSDs7QUFFRDtBQUNBO0FBQ0k7QUFDSDs7QUFFRDtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSDtBQUNEO0FBQ0E7QUFDSDtBQUNEO0FBQ0k7QUFDQTtBQUNJO0FBQ0E7QUFDSTtBQUNBO0FBQ0g7QUFDSjtBQUNKO0FBQ0Q7QUFDQTtBQUNJO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0g7QUFDRDtBQUNJO0FBQ0k7QUFDQTtBQUNIO0FBQ0o7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0k7QUFDQTtBQUNIOztBQUVEO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDSDs7QUFFRDtBQUNJO0FBQ0g7O0FBeFVJOzs7Ozs7Ozs7O0FDRlQ7OztBQUdBO0FBQ0k7O0FBRUE7QUFDSTs7QUFFQTtBQUNJO0FBQ0E7QUFDQTtBQUhTO0FBSEw7O0FBVVo7QUFDQTtBQUNJO0FBQ0g7O0FBRUQ7QUFDSTtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0k7QUFDQTtBQUNIO0FBQ0o7QUFDSjs7QUFFRDtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNJO0FBQ0E7QUFDSDtBQUNKOztBQUVEO0FBQ0k7QUFDSTtBQUNIO0FBQ0o7O0FBRUQ7QUFDQTtBQUNJO0FBQ0g7O0FBRUQ7QUFDSTtBQUNJO0FBQ0g7QUFDSjs7QUFFRDtBQUNJO0FBQ0E7QUFDQTtBQUNIO0FBQ0Q7QUFDSTtBQUNJO0FBQ0g7QUFDSjtBQUNEO0FBQ0k7QUFDSDs7QUFFRDtBQUNJO0FBQ0g7O0FBRUQ7QUFDSTtBQUNJO0FBQ0k7QUFDSDtBQUNEO0FBQ0g7O0FBRUQ7QUFBQTtBQUNBO0FBQ0k7QUFDQTtBQUNJO0FBQ0g7QUFDSjtBQUNEO0FBQ0E7QUFDSDtBQUNEO0FBQ0E7QUFDSTtBQUFBO0FBQUE7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNJO0FBQ0E7QUFDSDtBQUNKO0FBQ0Q7QUFDSDs7QUE5R0k7Ozs7Ozs7Ozs7QUNIVDs7QUFFQTtBQUNJOztBQUVBO0FBQ0k7QUFDQTtBQUNBOztBQUVBO0FBQ0k7QUFDQTtBQUNBO0FBSGdCO0FBS3BCO0FBQ0k7QUFDQTtBQUNBO0FBSGM7QUFLbEI7QUFDSTtBQUNBO0FBQ0E7QUFIZ0I7QUFLcEI7QUFDSTtBQUNBO0FBQ0E7QUFIaUI7QUFwQmI7O0FBMkJaO0FBQ0E7O0FBSUE7QUFDQTtBQUNJO0FBQ0E7QUFDSDs7QUFFRDtBQUNJO0FBQ0E7QUFDQTtBQUNJO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0g7QUFDRDtBQUNBO0FBQ0E7QUFDSDtBQUNEO0FBQ0k7QUFDQTtBQUNJO0FBQ0E7QUFDSDtBQUNKO0FBQ0Q7QUFDSTtBQUNBO0FBQ0g7O0FBRUQ7O0FBRUE7QUFDQTtBQUNJO0FBQ0g7O0FBRUQ7QUFDQTtBQUNJO0FBQ0g7O0FBRUQ7QUFDSTtBQUNBO0FBQ0E7QUFDSTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNIO0FBQ0Q7QUFDQTtBQUNBO0FBQ0g7QUFDRDtBQUNJO0FBQ0k7QUFDQTtBQUNIO0FBQ0Q7QUFDSDs7QUFFRDtBQUNJO0FBQ0E7QUFDSDs7QUFFRDs7QUFFQTs7QUFFSTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0g7QUFDRDtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDSDtBQUNEO0FBQ0k7QUFDSTtBQUNBO0FBQ0E7QUFDSDtBQUNEO0FBQ0g7O0FBRUQ7QUFDSTtBQUNBO0FBQ0E7QUFDSTtBQUNBO0FBQ0k7QUFDSDtBQUNKO0FBQ0Q7QUFFSDs7QUFFRDtBQUNJO0FBQ0E7QUFDQTtBQUNIOztBQTNKSTs7Ozs7Ozs7OztBQ0ZUOztBQUVBO0FBQ0k7O0FBRUE7QUFDSTtBQURROztBQUlaO0FBQ0E7QUFDSTtBQUNIO0FBQ0Q7QUFDSTtBQUNJO0FBQ0E7QUFDSDtBQUNEO0FBR0k7QUFDSDtBQUNKO0FBQ0Q7QUFDSTtBQUNJO0FBQ0E7QUFDSDtBQUNHO0FBQ0g7QUFDSjs7QUFFRDtBQUNJO0FBQ0k7QUFDQTtBQUNBO0FBQ0g7QUFDSjs7QUFFRDtBQUNJO0FBQ0k7QUFEVTtBQUdkO0FBQ0g7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNJO0FBQ0g7O0FBdERJOzs7Ozs7Ozs7O0FDRlQ7O0FBRUE7QUFDSTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUlBO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNIOztBQUVEO0FBQ0E7QUFDSTtBQUNBO0FBQ0g7O0FBRUQ7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0k7QUFDSDtBQUNKOztBQUVEO0FBQ0E7QUFDSTtBQUNBO0FBQ0k7QUFDQTtBQUNJO0FBQ0E7QUFDSDtBQUNKO0FBQ0o7QUFDRDtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0k7QUFDSTtBQUNBO0FBQ0g7QUFDRztBQUNBO0FBQ0g7QUFDSjtBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0k7QUFDQTtBQUNIO0FBQ0Q7QUFDQTtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSTtBQUNIO0FBQ0o7O0FBRUQ7QUFDQTtBQUNJO0FBQ0E7QUFDSTs7QUFFQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7QUFDRztBQUNJO0FBQ0E7O0FBRUE7QUFDSDtBQUNHO0FBQ0g7QUFDSjtBQUNEO0FBQ0g7QUFDSjtBQUNEO0FBQ0E7QUFDSTtBQUNBO0FBQ0k7QUFDSTtBQUNBO0FBQ0g7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7QUFDSjtBQUNEO0FBQ0E7QUFDSTtBQUNBO0FBQ0k7QUFDSTtBQUNBO0FBQ0g7QUFDSjtBQUNKO0FBQ0Q7QUFDSTtBQUNJO0FBQ0E7QUFDSDtBQUNKO0FBQ0Q7QUFDSTtBQUNBO0FBQ0k7QUFDSTtBQUNBO0FBQ0g7QUFDSjtBQUNEO0FBQ0g7O0FBRUQ7OztBQUdBO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNJO0FBQ0g7QUFDSjs7QUFFRDtBQUNJO0FBR0g7O0FBRUQ7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNIO0FBQ0Q7QUFDSTtBQUNBO0FBQ0k7QUFDQTtBQUNJO0FBQ0E7QUFDSDtBQUNEO0FBQ0g7QUFFSjs7QUE1TWU7O0FBb05wQjs7Ozs7Ozs7OztBQ3ROQTs7QUFFQTtBQUNJO0FBQ0k7QUFDSDs7QUFFRDtBQUNJO0FBQ0g7O0FBRUQ7QUFDSTtBQUNIO0FBWGM7Ozs7Ozs7Ozs7QUNGbkI7O0FBRUE7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDSTtBQUNBO0FBQ0g7QUFDRDtBQUNJO0FBQ0g7QUFDRDtBQUNBO0FBQ0k7QUFDSDtBQUNEO0FBQ0E7QUFDSTtBQUNIO0FBQ0Q7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0k7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNJO0FBQ0k7QUFDQTtBQUNKO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDSjtBQUNJO0FBVlI7QUFZSDtBQUNKO0FBQ0o7QUFDRDtBQUNJO0FBQ0g7QUFDRDtBQUNJO0FBQ0g7QUFDRDtBQUNJO0FBQ0g7QUFDRDtBQUNJO0FBQ0E7QUFDQTtBQUNIOztBQUVEOztBQUVBO0FBQ0k7QUFDSDtBQUNEO0FBQ0k7QUFDSDtBQUNEO0FBQ0k7QUFDSDtBQUNEO0FBQ0E7QUFDSTtBQUNIO0FBQ0Q7QUFDQTtBQUNJO0FBQ0g7QUFDRDtBQUNBO0FBQ0k7QUFDSDtBQUNEO0FBQ0E7QUFDSTtBQUNIO0FBQ0Q7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNIO0FBQ0Q7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNIO0FBQ0Q7QUFDQTtBQUNJO0FBQ0g7QUFDRDtBQUNBO0FBQ0k7QUFDSDtBQUNEO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDSDs7QUFFRDs7QUFFQTtBQUNBO0FBL0hrQjs7QUFxSXRCOzs7Ozs7Ozs7O0FDdklBOztBQUVBO0FBQ0k7QUFDSTtBQUNBOztBQUdKO0FBQ0E7QUFDSTtBQUNIOztBQUVEO0FBQ0E7QUFDSTtBQUNBO0FBQ0k7QUFDQTtBQUNJO0FBQ0E7O0FBRUE7QUFDQTtBQUNJO0FBQ0E7QUFDSDtBQUNKO0FBQ0o7QUFDSjtBQUNEO0FBQ0E7QUFDSTtBQUNBO0FBQ0k7QUFDQTtBQUNIO0FBQ0o7O0FBRUQ7QUFDQTtBQUNJO0FBQ0E7QUFDSTtBQUNBO0FBQ0g7QUFDRztBQUNBO0FBQ0E7QUFDQTtBQUNJO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNIO0FBQ0Q7QUFDQTtBQUNJO0FBQ0E7QUFDSDtBQUNKO0FBQ0o7QUFDSjs7QUFFRDtBQUNJO0FBQ0E7QUFDSDs7QUFFRDtBQUNBO0FBQ0k7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7QUFDRDtBQUNBO0FBQ0k7QUFDQTtBQUNIO0FBQ0Q7QUFDSDs7QUFFRDtBQUNJO0FBQ0E7QUFDSDtBQUNEO0FBR0E7QUFDSTtBQUNBO0FBQ0g7QUFyR3FCOzs7Ozs7Ozs7O0FDRjFCOztBQUVBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBR0o7Ozs7Ozs7Ozs7QUMxQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDSTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBUFE7O0FBVVo7QUFDQTtBQUNJO0FBQ0E7QUFDSDs7QUFFRDtBQUNJO0FBQ0g7O0FBRUQ7QUFDQTtBQUNJO0FBQ0k7QUFDQTtBQUNIO0FBQ0Q7QUFDQTtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0g7QUFDRDtBQUNIOztBQUVEO0FBQ0E7QUFDSTtBQUNJO0FBQ0E7QUFDSDtBQUNEO0FBQ0E7QUFDQTtBQUNIOztBQUVEO0FBQ0k7QUFDQTtBQUNJO0FBQ0g7QUFDRDtBQUNIOztBQUVEO0FBR0E7QUFDSTtBQUNBO0FBQ0g7O0FBRUQ7QUFDSTs7QUFFQTtBQUNBO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUpVO0FBTWQ7QUFDSDtBQUNKO0FBQ0Q7QUFDSTtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFKVTtBQU1kO0FBQ0E7QUFDSDtBQUNEO0FBQ0k7QUFDSDtBQUNEO0FBQ0k7QUFDSDs7QUFFRDtBQUNJO0FBQ0E7QUFDSTtBQUNBO0FBQ0g7QUFDRDtBQUNBO0FBQ0g7QUFDRDtBQUNJO0FBQ0k7QUFDSDtBQUNEO0FBQ0g7O0FBdEhJOzs7Ozs7Ozs7O0FDQVQ7QUFDQTtBQUNJOztBQUVBO0FBQ0k7O0FBR0o7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNIOztBQUVEO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDSTtBQUNIO0FBQ0o7QUFDRDtBQUNBO0FBQ0k7QUFDSTtBQUNBO0FBQ0g7QUFDRztBQUNBO0FBQ0g7QUFDSjs7QUF2Q0k7Ozs7Ozs7Ozs7QUNEVDtBQUNBO0FBQ0k7O0FBRUE7QUFDSTs7QUFHSjtBQUNBO0FBQ0k7QUFDSDtBQUNEO0FBQ0E7QUFDSTtBQUNJO0FBQ0E7QUFDSDtBQUNEO0FBQ0g7O0FBRUQ7QUFDQTtBQUNJO0FBQ0k7QUFDSDtBQUNKOztBQUVEO0FBQ0k7QUFDSDs7QUE3Qkk7Ozs7Ozs7Ozs7QUNEVDs7QUFFQTtBQUNJOztBQUVBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFJSjtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSDs7QUFFRDtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNJO0FBQ0g7QUFDSjs7QUFFRDtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDSTtBQUNIO0FBQ0o7O0FBRUQ7QUFDSTtBQUNBO0FBQ0E7QUFDSDtBQUNEO0FBQ0k7QUFDQTtBQUNBO0FBQ0g7QUFDRDtBQUNJO0FBQ0E7QUFDSDs7QUFFRDtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDSTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNJO0FBQ0g7QUFDRDtBQUNIO0FBQ0c7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDSTtBQUNBO0FBQ0g7QUFDSjtBQUNKO0FBQ0Q7QUFDSTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSDtBQUNEO0FBQ0k7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNIO0FBQ0Q7QUFDSTtBQUNIOztBQUVEO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7O0FBRUQ7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNIOztBQUVEO0FBQ0E7QUFDSTtBQUNBO0FBQ0k7QUFDSDtBQUNEO0FBQ0k7QUFDQTtBQUNIO0FBQ0Q7QUFDSTtBQUNBO0FBQ0g7QUFDRDtBQUNBO0FBQ0g7O0FBRUQ7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNIOztBQUVEO0FBQ0E7QUFDSTtBQUVIOztBQWpMSTs7Ozs7Ozs7OztBQ0ZUOztBQUVBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFHSjtBQUNBOztBQUlBO0FBQ0k7QUFDQTtBQUNBO0FBQ0g7O0FBRUQ7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7O0FBRUQ7QUFDQTtBQUNJO0FBQ0E7QUFDSTtBQUNBO0FBQ0g7QUFDSjs7QUFFRDtBQUNBO0FBQ0k7QUFDQTtBQUNJO0FBQ0k7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7QUFDRztBQUNBO0FBQ0E7QUFDSDtBQUNKO0FBQ0c7QUFDQTtBQUNBO0FBQ0E7QUFDSDtBQUNKO0FBQ0c7QUFDQTtBQUNBO0FBQ0E7QUFDSDtBQUNKOztBQUVEO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDSDs7QUFFRDtBQUNJO0FBQ0g7O0FBRUQ7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSDs7QUFFRDtBQUNJO0FBQ0g7O0FBRUQ7QUFDSTtBQUNIOztBQWhISTs7Ozs7Ozs7OztBQ0ZUOztBQUVBO0FBQ0k7QUFDQTtBQUNBO0FBSFU7O0FBT2Q7QUFDSTs7QUFFQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBR0o7QUFDQTtBQUNJO0FBQ0E7QUFDSDs7QUFFRDtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNIO0FBQ0Q7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNIOztBQUVEO0FBQ0E7QUFDSTs7QUFFQTtBQUNJO0FBQ0k7QUFDQTtBQUNKO0FBQWtDO0FBQzlCO0FBQ0E7QUFDQTtBQUNKO0FBQ0k7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDSjtBQUNJO0FBbEJSOztBQXFCQTtBQUNBO0FBQ0E7QUFDSDs7QUFFRDtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDSDs7QUFFRDtBQUNBO0FBQ0k7QUFDSDs7QUFFRDtBQUNBO0FBQ0k7QUFDQTtBQUNJO0FBQ0g7QUFDSjs7QUFFRDtBQUNBO0FBQ0k7QUFDQTtBQUNIOztBQUVEOztBQUVBO0FBQ0E7QUFDSTtBQUNBOztBQUVBO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDSDtBQUNEO0FBQ0E7QUFDQTtBQUNIOztBQUVEO0FBQ0k7QUFDQTs7QUFFQTtBQUNBO0FBQ0g7O0FBRUQ7QUFDSTtBQUNBO0FBQ0k7QUFDSTtBQUNBO0FBQ0E7QUFDSjtBQUNJO0FBQ0E7QUFDQTtBQUNKO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDSjtBQUNJO0FBZlI7QUFpQkE7QUFDQTtBQUNIOztBQUVEO0FBQ0E7QUFDSTtBQUNIOztBQUVEO0FBQ0E7QUFDSTtBQUNIOztBQUVEO0FBQ0E7O0FBSUE7QUFDQTtBQUNJO0FBQ0g7O0FBRUQ7QUFDQTtBQUNJO0FBQ0E7QUFDSTtBQUNIO0FBQ0Q7QUFDSDs7QUFFRDtBQUNJO0FBQ0g7O0FBRUQ7QUFDSTtBQUNIOztBQW5MSTs7Ozs7Ozs7OztBQ1RUOztBQUVBO0FBQ0k7O0FBRUE7QUFDSTs7QUFFQTtBQUNJO0FBQ0E7QUFDQTtBQUhRO0FBS1o7QUFDSTtBQUNBO0FBQ0E7QUFIUztBQUtiO0FBQ0k7QUFDQTtBQUNBO0FBSFM7QUFLYjtBQUNJO0FBQ0E7QUFDQTtBQUhlO0FBbEJYOztBQXlCWjtBQUNBOztBQUlBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFFSDs7QUFFRDtBQUNJO0FBRUE7QUFDSDtBQUNEO0FBQ0k7QUFDQTtBQUNIOztBQUVEO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDSDs7QUFFRDtBQUNBO0FBQ0k7QUFDSTtBQUNIO0FBQ0o7O0FBL0RJOzs7Ozs7Ozs7O0FDRlQ7OztBQUdBO0FBQ0k7O0FBRUE7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0k7QUFDQTtBQUNBO0FBSGE7QUFLakI7QUFDSTtBQUNBO0FBQ0E7QUFIYztBQWZWOztBQXNCWjtBQUNBO0FBQ0k7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDSDtBQUNEO0FBQ0E7QUFDSTtBQUNBOztBQUVBO0FBQ0E7QUFDSTtBQUNBO0FBQ0g7QUFDSjtBQUNEO0FBQ0E7QUFDSTtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0g7QUFDSjs7QUFFRDtBQUNBO0FBQ0k7QUFDSTtBQUNBO0FBQ0g7QUFDRDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDSDtBQUNHO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7QUFDRztBQUNBO0FBQ0E7QUFDSDtBQUNEO0FBQ0E7QUFDQTtBQUNIOztBQUVEO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDSDtBQUNEO0FBQ0k7QUFDSDs7QUFFRDtBQUNBO0FBQ0k7QUFDQTtBQUNIOztBQUVEO0FBQ0E7QUFDSTtBQUNIOztBQUVEOztBQUVBO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0g7O0FBRUQ7QUFDQTtBQUNJO0FBQ0g7O0FBRUQ7QUFDQTtBQUNJO0FBQ0k7QUFDQTtBQUNJO0FBQ0E7QUFDSDtBQUNKO0FBQ0o7O0FBRUQ7QUFDSTtBQUNJO0FBQ0E7QUFDSTtBQUNIO0FBQ0o7QUFDSjs7QUFFRDs7QUFFQTtBQUNJO0FBQ0k7QUFDQTtBQUNIO0FBQ0c7QUFDQTtBQUNIO0FBQ0o7QUFDRDs7QUFwS0s7Ozs7Ozs7Ozs7QUNIVDtBQUNBO0FBQ0k7O0FBRUE7QUFDSTs7QUFHSjtBQUNBOztBQUVBO0FBQ0E7QUFDSTtBQUNJO0FBQ0E7QUFDSDtBQUNEO0FBQ0E7QUFDSDs7QUFFRDtBQUNBO0FBQ0k7QUFDSDs7QUFFRDtBQUNBO0FBQ0k7QUFDSDtBQTVCSTs7Ozs7Ozs7OztBQ0RUO0FBQ0E7QUFDSTs7QUFFQTtBQUNJO0FBQ0k7QUFDQTtBQUNBO0FBSFM7QUFLYjtBQUNJO0FBQ0E7QUFDQTtBQUhTO0FBS2I7QUFDSTtBQUNBO0FBQ0E7QUFIVTtBQUtkO0FBQ0k7QUFDQTtBQUNBO0FBSFk7QUFoQlI7O0FBdUJaO0FBQ0E7O0FBSUE7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNIOztBQUVEO0FBQ0k7QUFDQTtBQUNBO0FBQXdCO0FBQ3BCO0FBQ0E7QUFDSDtBQUNHO0FBQ0E7QUFDSDtBQUNEO0FBQ0E7QUFDSDs7QUFFRDtBQUNJO0FBQ0E7QUFDQTtBQUFnQjtBQUNaO0FBQ0g7QUFDRztBQUNIO0FBQ0Q7QUFDQTtBQUNIOztBQUVEO0FBQ0k7QUFDSDs7QUFFRDtBQUNJO0FBQ0E7QUFDSDs7QUFFRDs7QUFFQTtBQUNJO0FBQ0k7QUFDSDtBQUNKO0FBQ0Q7QUFDSTtBQUNIOztBQUVEO0FBQ0k7QUFDSTtBQUNIO0FBQ0Q7QUFDSDs7QUF6Rkk7Ozs7Ozs7Ozs7QUNEVDtBQUNBO0FBQ0k7O0FBRUE7QUFDSTtBQUNJO0FBQ0E7QUFDQTtBQUhRO0FBS1o7QUFDSTtBQUNBO0FBQ0E7QUFIUztBQUtiO0FBQ0k7QUFDQTtBQUNBO0FBSFM7O0FBWEw7O0FBbUJaO0FBQ0E7O0FBSUE7QUFDSTtBQUNBO0FBQ0E7QUFDSDs7QUFFRDtBQUNJO0FBQ0E7QUFFQTtBQUNIO0FBQ0Q7QUFDSTtBQUVBO0FBQ0g7O0FBM0NJOzs7Ozs7Ozs7O0FDRFQ7QUFDQTtBQUNJOztBQUVBO0FBQ0k7QUFDSTtBQUNBO0FBQ0E7QUFIUztBQUtiO0FBQ0k7QUFDQTtBQUNBO0FBSGE7QUFLakI7QUFDSTtBQUNBO0FBQ0E7QUFIYTtBQUtqQjtBQUNJO0FBQ0E7QUFDQTtBQUhRO0FBS1o7QUFDSTtBQUNBO0FBQ0E7QUFIVztBQUtmO0FBQ0k7QUFDQTtBQUNBO0FBSFk7O0FBMUJSOztBQWtDWjtBQUNBOztBQUlBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNIOztBQUVEO0FBQ0k7QUFDSDs7QUFFRDtBQUNBO0FBQ0k7QUFDQTtBQUNIOztBQUVEO0FBQ0E7QUFDSTtBQUNJO0FBQ0g7QUFDRDtBQUNIOztBQUVEO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFBaUI7QUFDYjtBQUNIO0FBQ0c7QUFDSDtBQUNEO0FBQ0E7QUFDSDs7QUFFRDtBQUNJO0FBQ0E7QUFDQTtBQUFrQjtBQUNkO0FBQ0E7QUFDSDtBQUNHO0FBQ0E7QUFDSDtBQUNEO0FBQ0E7QUFFSDs7QUFFRDs7QUFFQTtBQUNJO0FBQ0k7QUFDSDtBQUNKO0FBQ0Q7QUFDSTtBQUNIOztBQUVEO0FBQ0k7QUFDSTtBQUNIO0FBQ0Q7QUFDSDs7QUFoSEk7Ozs7Ozs7Ozs7QUNEVDs7O0FBR0E7QUFDSTs7QUFFQTtBQUNJO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBSFE7QUFLWjtBQUNJO0FBQ0E7QUFDQTtBQUhTO0FBWEw7O0FBa0JaO0FBQ0E7QUFDSTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNIOztBQUVEO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7O0FBRUQ7QUFDSTtBQUNBO0FBQ0k7QUFDQTtBQUNJO0FBQ0g7QUFDSjtBQUNKOztBQUVEO0FBQ0E7QUFDSTtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDSDtBQUNHO0FBQ0E7QUFDSDtBQUNKO0FBQ0Q7QUFDQTtBQUNJO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDSDtBQUNKOztBQUVEO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDSDs7QUFFRDs7QUFFQTtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0k7QUFDQTtBQUNJO0FBQ0E7QUFDSDtBQUNHO0FBQ0g7O0FBRUQ7QUFDQTtBQUNBO0FBQ0g7QUFDRDtBQUNJO0FBQ0g7QUFDSjs7QUFFRDtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSDtBQUNKOztBQUVEO0FBQ0E7QUFDSTtBQUNBO0FBQ0k7QUFDQTtBQUNJO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0k7QUFDQTtBQUNIO0FBQ0o7QUFDRztBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0k7QUFDQTtBQUNIO0FBQ0o7QUFDSjtBQUNEO0FBQ0g7QUFDSjtBQUNKO0FBQ0Q7QUFDSTtBQUNBO0FBQ0E7QUFDSDtBQUNEO0FBQ0E7QUFDSTtBQUNBO0FBQ0k7QUFDQTtBQUNJO0FBQ0E7QUFDSDtBQUNKO0FBQ0o7QUFDRDtBQUNBO0FBQ0k7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNJO0FBQ0E7QUFDSTtBQUNJO0FBQ0g7QUFDRztBQUNIO0FBQ0o7O0FBRUQ7QUFDQTtBQUNBO0FBQ0g7QUFDSjtBQUNKO0FBQ0Q7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0k7QUFDSTtBQUNBO0FBRlU7QUFJZDtBQUNBO0FBQ0k7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNIO0FBQ0c7QUFDQTtBQUNBO0FBQ0g7QUFDRDtBQUNIO0FBQ0o7QUFDRztBQUNBO0FBQ0E7QUFDSDtBQUNKO0FBQ0Q7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNJO0FBQ0g7QUFDRDtBQUNJO0FBQ0E7QUFDSDtBQUNKOztBQUVEO0FBQ0E7QUFDSTtBQUNBO0FBQ0k7QUFDQTtBQUNIOztBQUVEO0FBQ0E7QUFDSTtBQUNBO0FBQ0g7QUFDSjtBQUNEO0FBQ0E7QUFDSTtBQUNJO0FBQ0k7QUFDSDtBQUNKO0FBQ0o7O0FBRUQ7O0FBRUE7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7QUFDRDtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNIO0FBQ0Q7QUFDQTtBQUNJO0FBQ0k7QUFDSDtBQUNKO0FBQ0Q7QUFDQTtBQUNJO0FBQ0E7QUFDSTtBQUNIO0FBQ0o7O0FBRUQ7QUFDQTtBQUNJO0FBQ0k7QUFDSDtBQUNKO0FBQ0Q7QUFDQTtBQUNJO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDSDtBQUNEO0FBQ0E7QUFDQTtBQUNJO0FBQ0E7QUFDQTs7QUFFQTtBQUNIO0FBQ0o7O0FBRUQ7O0FBRUE7QUFDQTtBQUNJO0FBQ0E7QUFDSTtBQUNIO0FBQ0c7QUFDSDtBQUNKOztBQUVEO0FBQ0E7QUFDSTtBQUNIO0FBQ0Q7QUFDQTtBQUNJO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDSDtBQUNKO0FBQ0Q7QUFDSTtBQUNBO0FBQ0E7QUFDSDtBQUNEO0FBQ0E7QUFDSTtBQUNBO0FBQ0k7QUFDSDtBQUNKOztBQUVEO0FBN1dLOzs7Ozs7Ozs7O0FDSFQ7O0FBRUE7QUFDSTtBQUNBO0FBQ0E7QUFDSTtBQUNBO0FBRlE7O0FBS1o7QUFDQTtBQUNJO0FBQ0g7O0FBRUQ7QUFDSTtBQUNBO0FBQ0g7O0FBRUQ7QUFDSTtBQUNBOztBQUVBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDSDtBQUNHO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7QUFDSjs7QUFFRDtBQUNJO0FBQ0E7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7QUFDRztBQUNBO0FBQ0E7QUFDQTtBQUNIO0FBQ0c7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNIO0FBQ0o7O0FBRUQ7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDSDtBQUNEO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNIOztBQUVEO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSDs7QUFFRDtBQUNJO0FBQ0E7QUFDSDs7QUFFRDtBQUNBO0FBQ0k7QUFDSDs7QUExR0k7Ozs7Ozs7Ozs7QUNGVDs7QUFFQTtBQUNJOztBQUVBO0FBQ0k7QUFDQTs7QUFFQTtBQUNJO0FBQ0E7QUFDQTtBQUhTO0FBSkw7O0FBV1o7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNIOztBQUVEO0FBQ0k7QUFDSDs7QUFFRDtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDSTtBQUNBO0FBQ0k7QUFDQTtBQUNJO0FBQ0E7QUFGeUI7QUFJN0I7QUFDQTtBQUNBO0FBQ0g7QUFDSjtBQUNEO0FBQ0E7QUFDSDtBQUNEO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNJO0FBQ0E7QUFDSTtBQUNJO0FBQ0E7QUFGMEI7QUFJakM7QUFDSjtBQUNEO0FBQ0g7O0FBRUQ7QUFDQTtBQUNJO0FBQUE7QUFDQTtBQUNJO0FBQ0g7QUFDRDtBQUNBO0FBQ0E7QUFDSTtBQUNBO0FBQ0k7QUFDQTtBQUNJO0FBQ0E7QUFGMEI7QUFJakM7QUFDSjtBQUNEO0FBQ0E7QUFDSDs7QUFFRDtBQUNBO0FBQ0k7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNIO0FBQ0c7QUFDSDtBQUNKOztBQUVEO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSDtBQUNEO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7QUFDRDtBQUNBO0FBQ0k7QUFDSTtBQUNBO0FBQ0g7O0FBRUQ7QUFDSTtBQUNIO0FBQ0o7O0FBRUQ7O0FBRUE7QUFDQTtBQUNJO0FBQ0E7O0FBRUE7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNIO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNIO0FBQ0Q7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNIOztBQUVEO0FBQ0k7QUFDSTtBQUNBO0FBQ0E7QUFDSDtBQUNEO0FBQ0g7O0FBRUQ7QUFDQTtBQUNJO0FBQ0E7QUFDSTtBQUNIOztBQUVEO0FBQ0E7QUFDSDs7QUFFRDtBQUNBOztBQUVBOztBQUVBO0FBQ0k7QUFDSTtBQUNIO0FBQ0o7QUExTEk7Ozs7Ozs7Ozs7QUNGVDs7O0FBR0E7QUFDSTs7QUFFQTtBQUNJO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0k7QUFDQTtBQUNBO0FBSFU7QUFLZDtBQUNJO0FBQ0E7QUFDQTtBQUhnQjtBQVhaOztBQWtCWjtBQUNBO0FBQ0k7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDSDs7QUFFRDtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0g7QUFDRDtBQUNBO0FBQ0k7QUFDQTtBQUNIO0FBQ0Q7QUFDQTtBQUNJO0FBQ0E7QUFDSDs7QUFFRDtBQUNBO0FBQ0k7QUFDQTtBQUNIOztBQUVEOztBQUVBO0FBQ0E7QUFDSTtBQUNBO0FBQ0g7O0FBRUQ7QUFDQTtBQUNJO0FBQ0k7QUFDQTtBQUNBO0FBQ0g7QUFDRDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0g7QUFDRDtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0g7QUFDRDtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDSDs7QUFFRDtBQUNJO0FBQ0E7QUFDSDs7QUFuR0k7Ozs7Ozs7Ozs7QUNIVDs7O0FBR0E7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSTtBQUNBOztBQU1KO0FBQ0E7QUFDSTtBQUNIOztBQUVEO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSTtBQUNBO0FBQ0g7O0FBRUQ7QUFDQTtBQUNJO0FBQ0E7QUFDSDs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBSUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7O0FBRUQ7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNIOztBQUVEO0FBQ0M7QUFDSTtBQUNJO0FBQ0E7QUFDSTtBQUNBO0FBQ0g7QUFDRDtBQUNBO0FBQ0E7QUFDSDtBQUNKO0FBaEhHOzs7Ozs7Ozs7O0FDSFQ7O0FBRUE7QUFDSTs7QUFFQTtBQUNJO0FBQ0E7QUFDQTtBQUhROztBQU1aO0FBQ0E7O0FBSUE7QUFDSTtBQUNBO0FBQ0E7QUFDSDs7QUFFRDtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDSDs7QUFFRDtBQUNBO0FBQ0k7QUFDQTs7QUFFQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0k7QUFDQTtBQUNIO0FBQ0o7QUFDRztBQUNBO0FBRUk7QUFDSTtBQUNBO0FBQ0g7QUFDSjtBQUNKOztBQUVEO0FBQ0E7QUFDSDtBQUNEO0FBQ0k7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0k7QUFDSTtBQUNBO0FBQ0g7QUFDSjtBQUNKOztBQUVEO0FBQ0k7QUFDQTtBQUNIOztBQUVEO0FBQ0k7QUFDSDs7QUFFRDtBQUNJO0FBQ0g7O0FBRUQ7QUFDSTtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0g7QUFDRztBQUNBO0FBQ0g7QUFDSjs7QUE5Rkk7Ozs7Ozs7Ozs7QUNGVDs7QUFFQTtBQUNJO0FBQ0E7QUFDQTtBQUNJO0FBQ0E7O0FBRUE7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUhlOztBQU92QjtBQUNBO0FBQ0k7QUFDQTtBQUNIOztBQUVEO0FBQ0E7QUFDSTtBQUNIO0FBQ0Q7QUFDQTtBQUNJO0FBQ0g7QUFDRDtBQUNJO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7QUFDRDtBQUNIO0FBQ0Q7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNIOztBQUVEO0FBQ0E7QUFDSTtBQUNBOztBQUVBO0FBQ0g7O0FBRUQ7QUFDQTtBQUNJO0FBQ0E7O0FBRUE7QUFDSDs7QUFFRDtBQUNJO0FBQ0E7QUFDSTtBQUNIO0FBQ0c7QUFDSDtBQUNKOztBQUdEO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDSDtBQUNEO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDSDs7QUFFRDtBQUNBO0FBQ0k7QUFDSDs7QUF6Rkk7Ozs7Ozs7Ozs7QUNGVDs7QUFFQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFHSjtBQUNBO0FBQ0k7O0FBRUE7QUFDSDs7QUFFRDtBQUNJOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0g7O0FBRUQ7QUFDSTtBQUNIOztBQUVEO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNIO0FBQ0Q7QUFDSTtBQUNBO0FBQ0g7O0FBR0Q7O0FBRUE7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0k7QUFDQTtBQUNIOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSDtBQUNEO0FBQ0k7O0FBRUE7QUFDSDs7QUFFRDs7QUFFQTtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDSDtBQUNEO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNIO0FBQ0Q7QUFDSTtBQUNBO0FBQ0E7QUFDSDs7QUFFRDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUdBO0FBQ0E7QUFDSTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSjtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSjtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSjtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUF4QlI7QUEwQkE7QUFDQTtBQUNBO0FBQ0k7QUFDSTtBQUNBO0FBQ0o7QUFDSTtBQUNBO0FBQ0o7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0o7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0o7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0o7QUFDSTtBQUNBO0FBM0JSOztBQThCQTtBQUNIOztBQUdEOztBQUVBO0FBQ0k7QUFDSDs7QUFFRDtBQUNJO0FBQ0g7O0FBRUQ7QUFDSTtBQUNIOztBQUVEO0FBQ0E7QUFDSTtBQUNIOztBQUVEO0FBQ0E7QUFDSTtBQUNJO0FBQ0g7QUFDRztBQUNIO0FBQ0o7O0FBRUQ7QUFDQTtBQUNJO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDSDtBQUNHO0FBQ0E7QUFDQTtBQUNBO0FBQ0k7QUFDQTtBQUNIO0FBQ0o7QUFDSjs7QUFFRDtBQUNJO0FBQ0E7QUFDSDs7QUFFRDtBQUNJO0FBQ0E7QUFDQTtBQUNIOztBQUVEO0FBQ0E7O0FBRUE7O0FBRUE7QUFDSTtBQUNIO0FBclFJOzs7Ozs7Ozs7O0FDRlQ7OztBQUdBO0FBQ0k7O0FBRUE7O0FBRUk7QUFDSTtBQUNBO0FBQ0E7QUFIUztBQUtiO0FBQ0k7QUFDQTtBQUNBO0FBSFM7QUFLYjtBQUNJO0FBQ0E7QUFDQTtBQUhTO0FBS2I7QUFDSTtBQUNBO0FBQ0E7QUFITztBQUtYO0FBQ0k7QUFDQTtBQUNBO0FBSFc7QUFLZjtBQUNJO0FBQ0E7QUFDQTtBQUhTO0FBS2I7QUFDSTtBQUNBO0FBQ0E7QUFIYztBQUtsQjtBQUNJO0FBQ0E7QUFDQTtBQUhVO0FBckNOOztBQTRDWjtBQUNBOztBQUlBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDSDs7QUFFRDtBQUNBO0FBQ0k7QUFDSTtBQUNBO0FBQ0k7QUFDSDtBQUNHO0FBQ0g7QUFDSjtBQUNHO0FBQ0E7QUFDSDtBQUNKO0FBQ0Q7QUFDQTtBQUNJO0FBRUE7QUFDSDtBQUNEO0FBQ0E7QUFDSTtBQUNBO0FBQ0k7QUFDQTtBQUNIO0FBQ0c7QUFDQTtBQUNJO0FBQ0g7QUFDRztBQUNIO0FBQ0Q7QUFDQTtBQUNIO0FBQ0Q7QUFDSDs7QUFFRDtBQUNBO0FBQ0k7QUFDQTs7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0k7QUFDQTtBQUNJO0FBQ0g7QUFDRztBQUNIO0FBQ0o7O0FBRUQ7QUFDQTtBQUNIOztBQW5ISTs7Ozs7Ozs7OztBQ0hUO0FBQ0E7QUFDSTs7QUFFQTtBQUNJO0FBQ0E7O0FBRUE7QUFDSTtBQUNBO0FBQ0E7QUFIaUI7QUFLckI7QUFDSTtBQUNBO0FBQ0E7QUFIYztBQUtsQjtBQUNJO0FBQ0E7QUFDQTtBQUhhO0FBS2pCO0FBQ0k7QUFDQTtBQUNBO0FBSFM7QUFLYjtBQUNJO0FBQ0E7QUFDQTtBQUhXO0FBS2Y7QUFDSTtBQUNBO0FBQ0E7QUFIZTtBQTdCWDs7QUFvQ1o7QUFDQTtBQUNJO0FBQ0g7O0FBRUQ7QUFDSTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDSDtBQUNEO0FBQ0E7QUFDSTtBQUNJO0FBQ0g7QUFDRztBQUNJO0FBQ0E7QUFGVTtBQUlkO0FBQ0g7QUFDSjs7QUFFRDtBQUNJO0FBQ0E7QUFDQTtBQUNIOztBQUVEO0FBQ0E7QUFDSTtBQUNBO0FBQ0k7QUFDQTtBQUNJO0FBQ0E7QUFDSDtBQUNHO0FBQ0E7QUFDSDtBQUNKO0FBQ0c7O0FBRUg7QUFDSjtBQUNEO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNIO0FBaEdJOzs7Ozs7Ozs7O0FDRFQ7O0FBRUE7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTFU7O0FBUWQ7QUFDSTs7QUFFQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUdKO0FBQ0E7QUFDSTtBQUNBO0FBQ0g7O0FBRUQ7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSDs7QUFFRDtBQUNJO0FBQ0E7QUFDSDs7QUFFRDtBQUNJO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDSDtBQUNEO0FBQ0E7QUFDSTtBQUNBO0FBQ0k7QUFDQTtBQUNIO0FBQ0o7QUFDSjs7QUFFRDtBQUNJO0FBQ0E7QUFDSDs7QUFFRDtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSDs7QUFFRDtBQUNBO0FBQ0k7QUFDQTtBQUNIOztBQUVEO0FBQ0M7QUFDSTtBQUNBO0FBQ0g7QUE5RUc7Ozs7Ozs7Ozs7QUNWVDs7O0FBR0E7QUFDSTs7QUFFQTs7QUFJQTtBQUNBOztBQUlBO0FBQ0E7QUFDSTtBQUNBO0FBQ0k7QUFDQTtBQUNIO0FBQ0Q7QUFDSDs7QUFFRDtBQUNBO0FBQ0k7QUFDQTtBQUNJO0FBQ0g7QUFDSjs7QUFFRDtBQUNBO0FBQ0k7QUFDSDs7QUFqQ0k7Ozs7Ozs7Ozs7QUNIVDs7OztBQUlBO0FBQ0E7QUFDSTs7QUFFQTtBQUNJOztBQUVBO0FBSFE7O0FBTVo7QUFDQTtBQUNJO0FBQ0g7O0FBRUQ7QUFDQTtBQUNJO0FBQ0E7QUFDSDtBQUNEO0FBQ0k7QUFDQTtBQUNIOztBQUVEO0FBQ0E7QUFDSTtBQUNBO0FBQ0k7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0g7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSDs7QUFFRDtBQUNJO0FBQ0k7QUFDSDtBQUNKOztBQWxFSTs7Ozs7Ozs7OztBQ0xUO0FBQ0E7QUFDSTs7QUFFQTtBQUNJO0FBQ0E7QUFGUTs7QUFLWjtBQUNBO0FBQ0k7QUFDSDs7QUFFRDtBQUNBO0FBQ0k7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNJO0FBQ0g7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNIO0FBQ0Q7QUFDSTtBQUNBO0FBQ0g7QUFDRDtBQUNJO0FBQ0E7QUFDQTtBQUNIOztBQUVEO0FBQ0k7QUFDQTtBQUNJO0FBQ0E7QUFDSDtBQUNKOztBQUVEO0FBQ0k7QUFDSDtBQUNEO0FBQ0E7QUFDSTtBQUNBOztBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDSTtBQUNBO0FBQ0k7QUFDSDtBQUNHO0FBQ0g7QUFDSjs7QUFFRDtBQUNBO0FBQ0g7O0FBMUVJOzs7Ozs7Ozs7O0FDRFQ7OztBQUdBO0FBQ0k7O0FBRUE7QUFDSTtBQUNBOztBQUVBO0FBQ0k7QUFDQTtBQUNBO0FBSGdCO0FBSlo7O0FBV1o7QUFDQTtBQUNJOztBQUVBO0FBQ0E7QUFDSDs7QUFFRDtBQUNJO0FBQ0g7O0FBRUQ7QUFDQTtBQUNJO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDSDtBQUNEO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDSDtBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNIOztBQUVEO0FBQ0k7QUFDSTtBQUNBO0FBQ0g7QUFDSjs7QUFFRDtBQUNBO0FBQ0k7QUFDQTtBQUNJO0FBQ0E7QUFDSTtBQUNBO0FBQ0g7QUFDRDtBQUNIO0FBQ0o7O0FBRUQ7QUFDQTtBQUNJO0FBQ0k7QUFDSDtBQUNKOztBQUVEO0FBQ0E7QUFDSTtBQUNBO0FBQ0k7QUFDQTtBQUNJO0FBQ0E7QUFDSDtBQUNKO0FBQ0c7QUFDSTtBQUNJO0FBQ0E7QUFDQTtBQUNJO0FBQ0g7QUFDRDtBQUNIO0FBQ0o7QUFDSjtBQUNKOztBQUVEO0FBQ0k7QUFDSDs7QUFwR0k7Ozs7Ozs7Ozs7QUNIVDs7QUFFQTtBQUNJOztBQUVBO0FBQ0k7O0FBR0o7QUFDQTs7QUFJQTtBQUNJO0FBQ0g7QUFDRDtBQUdBO0FBQ0k7QUFDSDs7QUFFRDtBQUNBO0FBQ0k7QUFHSDs7QUEzQkk7Ozs7Ozs7Ozs7QUNGVDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNJO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUdKO0FBQ0E7QUFDSTtBQUNIOztBQUVEO0FBQ0k7QUFDQTtBQUNIOztBQUVEO0FBQ0k7QUFDSDs7QUFFRDs7QUFFQTtBQUNJO0FBQ0E7QUFDQTtBQUNJO0FBQ0E7QUFDSTtBQUNBO0FBQ0g7QUFDSjtBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0k7QUFDSDtBQUNEO0FBQ0E7QUFDQTs7QUFFQTtBQUNJO0FBQ0k7QUFDQTtBQUNJO0FBQ0E7QUFDSDtBQUNEO0FBQ0g7QUFDRDtBQUNBO0FBQ0g7QUFDRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7QUFDSjtBQUNEO0FBQ0E7QUFDSTtBQUNBO0FBQ0g7QUFDRDtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0g7QUFDRDtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDSDtBQUNEO0FBQ0E7QUFDSTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSDs7QUFFRDtBQUNJO0FBQ0g7QUFDRDtBQUNJO0FBQ0g7O0FBRUQ7QUFDSTtBQUVIOztBQUVEO0FBQ0k7QUFDQTtBQUNIOztBQUVEO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7O0FBRUQ7QUFDSTtBQUNBO0FBQ0g7QUFDRDtBQUNBO0FBQ0k7QUFDSTtBQUNBO0FBQ0E7QUFDSTtBQUNBO0FBQ0g7QUFDSjtBQUNKOztBQUVEO0FBQ0k7QUFDSTtBQUNBO0FBQ0g7QUFDRDtBQUNIOztBQUVEOztBQUVBO0FBQ0E7QUFDSTtBQUNIOztBQUVEO0FBQ0k7QUFDQTtBQUNBO0FBQ0k7QUFDQTtBQUNIO0FBQ0o7O0FBRUQ7QUFDQTtBQUNJO0FBQ0g7QUFDRDtBQUNJO0FBQ0g7O0FBRUQ7QUFDQTtBQUNJO0FBQ0g7O0FBRUQ7QUFDSTtBQUNIOztBQTFMSTs7Ozs7Ozs7OztBQ2JUOzs7QUFHQTtBQUNJO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7O0FBRUE7QUFDSTtBQUNBO0FBQ0E7QUFIYTtBQUxUOztBQVlaO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDSDs7QUFFRDtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7O0FBRUQ7QUFDSTtBQUNBO0FBQ0k7QUFDQTtBQUNJO0FBQ0E7QUFDSDtBQUNEO0FBQ0g7QUFDRDtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0k7QUFDQTtBQUNIO0FBQ0o7QUFDSjtBQUNHO0FBQ0E7QUFDQTtBQUNJO0FBQ0E7QUFDSDtBQUNKO0FBQ0o7O0FBRUQ7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNIOztBQUVEO0FBQ0E7QUFDSTtBQUNBO0FBQ0g7O0FBRUQ7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNIOztBQUVEO0FBQ0E7QUFDSTtBQUNJO0FBQ0g7QUFDSjs7QUFFRDtBQUNJO0FBQ0E7QUFDSDs7QUFFRDtBQUNBO0FBQ0k7QUFDSDs7QUF2SEk7Ozs7Ozs7Ozs7QUNIVDs7O0FBR0E7QUFDSTs7QUFFQTtBQUNJOztBQUVBO0FBQ0k7QUFDQTtBQUNBO0FBSFE7QUFLWjtBQUNJO0FBQ0E7QUFDQTtBQUhlO0FBS25CO0FBQ0k7QUFDQTtBQUNBO0FBSFM7QUFiTDs7QUFvQlo7QUFDQTs7QUFJQTtBQUNJO0FBQ0E7QUFDQTtBQUNIOztBQUVEO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDSDs7QUFFRDtBQUNJO0FBQ0g7O0FBRUQ7QUFDSTtBQUNIO0FBQ0Q7QUFDSTtBQUNIOztBQWxESTs7Ozs7Ozs7OztBQ0hUOztBQUVBOztBQUVBO0FBQ0E7QUFDSTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVRFO0FBV1Q7QUFDRDtBQUNBO0FBQ0k7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVZFO0FBWVQ7QUFDRDtBQUNBO0FBQ0k7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRVA7QUFDRDtBQUNBO0FBQ0k7QUFDSTtBQUNBO0FBRVA7QUFDRDtBQUNBO0FBQ0k7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUVQO0FBQ0Q7QUFDQTtBQUNJO0FBQ0k7QUFDQTtBQUNBO0FBRVA7QUFDRDtBQUNBO0FBQ0k7QUFDSTtBQUNBO0FBRVA7QUFDRDtBQUNBO0FBQ0k7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVQO0FBQ0Q7QUFDQTtBQUNJO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVQO0FBQ0Q7QUFDQTtBQUNJO0FBQ0k7QUFDQTtBQUVQO0FBQ0Q7QUFDQTtBQUNJO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFFUDs7QUFFRDtBQUNBO0FBQ0k7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUVQOzs7Ozs7Ozs7O0FDekhEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSTs7QUFFQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUdKO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDSDs7QUFFRDtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0g7O0FBRUQ7QUFDSTtBQUNBO0FBQ0g7O0FBRUQ7O0FBRUE7QUFDSTtBQUNBOztBQUVBO0FBQ0k7QUFDQTtBQUZVO0FBSWQ7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDSTtBQUNBO0FBQ0k7QUFDQTtBQUNBOztBQUVBO0FBQ0g7QUFDSjtBQUNKOztBQUVEO0FBQ0k7O0FBRUE7QUFDSTtBQUNIOztBQUVEO0FBQ0g7O0FBRUQ7QUFDSTtBQUNIOztBQUVEO0FBQ0k7QUFDQTtBQUNBO0FBQ0g7O0FBRUQ7QUFDSTtBQUNBO0FBQ0k7QUFDSTtBQUNBO0FBQ0g7QUFDRDtBQUNBO0FBQ0g7QUFDSjs7QUFFRDs7QUFFQTtBQUNBO0FBQ0k7O0FBRUE7QUFDQTtBQUNJO0FBQ0g7O0FBRUQ7QUFDQTtBQUNJO0FBQ0g7QUFDRDtBQUNBO0FBQ0E7QUFDSDs7QUFFRDtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNIOztBQUVEO0FBQ0k7QUFDSTtBQUNIO0FBQ0Q7QUFDSTtBQUNIO0FBQ0Q7QUFHSDs7QUF6SUk7Ozs7Ozs7Ozs7QUNKVDtBQUNBO0FBQ0k7O0FBRUE7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUdKO0FBQ0E7QUFDSTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNIOztBQUVEO0FBQ0k7QUFDSDs7QUFFRDtBQUNJO0FBQ0E7QUFDSDs7QUFFRDtBQUNJO0FBQ0E7QUFDSDs7QUFFRDtBQUNJO0FBQ0E7QUFDSDs7QUFFRDtBQUNJO0FBQ0E7QUFDSDs7QUFFRDtBQUNJO0FBQ0E7QUFDSDs7QUFFRDtBQUNJO0FBQ0E7QUFDSDs7QUFFRDtBQUNJO0FBQ0g7O0FBRUQ7QUFDSTtBQUNIOztBQUVEOztBQUVBO0FBQ0k7QUFDSDtBQUNEO0FBQ0k7QUFDSDtBQUNEO0FBQ0k7QUFDSDs7QUFFRDs7QUFFQTtBQUNJO0FBQ0g7O0FBRUQ7QUFDSTtBQUNIOztBQUVEO0FBQ0k7QUFDSDs7QUFFRDtBQUNJO0FBQ0g7O0FBM0ZJOzs7Ozs7Ozs7O0FDRFQ7O0FBRUE7QUFDSTtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDSTtBQUNBO0FBQ0E7QUFIZTtBQUtuQjtBQUNJO0FBQ0E7QUFDQTtBQUhZO0FBS2hCO0FBQ0k7QUFDQTtBQUNBO0FBSFk7QUFLaEI7QUFDSTtBQUNBO0FBQ0E7QUFIYztBQUtsQjtBQUNJO0FBQ0E7QUFDQTtBQUhXO0FBN0JQOztBQW9DWjtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7O0FBRUQ7QUFDSTs7QUFFQTtBQUNJO0FBQ0E7QUFDSTtBQUNIO0FBQ0o7QUFDSjs7QUFFRDtBQUNJO0FBQ0k7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNIO0FBQ0o7QUFDRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSTtBQUNBO0FBRUg7QUFDSjtBQUNKOztBQUVEO0FBQ0E7QUFDSTtBQUNIOztBQUVEO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0k7QUFDSTtBQUNBO0FBQ0g7QUFDRztBQUNBO0FBQ0g7QUFDSjtBQUNKO0FBQ0Q7QUFDQTtBQUNJO0FBQ0g7O0FBRUQ7QUFDQTtBQUNJO0FBQ0E7QUFDSTtBQUNBO0FBQ0g7O0FBRUQ7QUFDQTtBQUNJO0FBQ0E7QUFDSDtBQUNKO0FBQ0Q7QUFDQTtBQUNJO0FBQ0k7QUFDSTtBQUNIO0FBQ0o7QUFDSjs7QUFFRDtBQUNJO0FBQ0k7QUFBQTtBQUVBO0FBQ0k7QUFDSTtBQUdJO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7QUFDRDtBQUNJO0FBQ0E7QUFDSDtBQUNKO0FBQ0o7QUFDSjtBQUNHO0FBQ0k7QUFDQTtBQUNIO0FBQ0o7QUFDSjs7QUFFRDtBQUNBO0FBQ0k7QUFDQTtBQUNIOztBQUVEO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDSDs7QUFFRDtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0k7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNIO0FBQ0Q7QUFDSDtBQUNHO0FBQ0k7QUFDQTtBQUNJOztBQUVBO0FBQ0E7QUFDQTtBQUNIO0FBQ0o7QUFDSjtBQUNEO0FBQ0g7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNJO0FBQ0E7QUFDSDtBQUNKOztBQUVEO0FBQ0k7QUFDQTtBQUNBO0FBQ0g7O0FBck5JOzs7Ozs7Ozs7O0FDRlQ7OztBQUdBO0FBQ0k7O0FBRUE7QUFDSTtBQUNJO0FBQ0E7QUFDQTtBQUhtQjtBQUt2QjtBQUNJO0FBQ0E7QUFDQTtBQUhpQjtBQU5iOztBQWFaO0FBQ0E7QUFDSTtBQUVIOztBQUVEO0FBQ0k7QUFDQTtBQUNJO0FBQ0E7QUFDSDtBQUNKOztBQUVEO0FBQ0k7QUFDSTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0k7QUFDSDtBQUNEO0FBQ0o7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNJO0FBQ0g7QUFDRDtBQUNKO0FBQ0k7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDSTtBQUNIO0FBQ0Q7QUFDSjtBQUNJO0FBQ0E7QUFDQTtBQUNJO0FBQ0g7QUFDRDtBQUNKO0FBQ0k7QUFuQ1I7QUFxQ0g7O0FBRUQ7QUFDQTtBQUNJO0FBQ0k7QUFDSDtBQUNEO0FBQ0k7QUFDSDtBQUNHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSDtBQUNEO0FBQ0g7O0FBckZJOzs7Ozs7Ozs7O0FDSFQ7QUFDQTtBQUNJO0FBQ0E7QUFGVztBQUlmO0FBQ0k7O0FBRUE7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBSGdCO0FBS3BCO0FBQ0k7QUFDQTtBQUNBO0FBSGdCO0FBS3BCO0FBQ0k7QUFDQTtBQUNBO0FBSG1CO0FBS3ZCO0FBQ0k7QUFDQTtBQUNBO0FBSGU7QUFLbkI7QUFDSTtBQUNBO0FBQ0E7QUFIZTtBQUtuQjtBQUNJO0FBQ0E7QUFDQTtBQUhpQjtBQUtyQjtBQUNJO0FBQ0E7QUFDQTtBQUhnQjtBQUtwQjtBQUNJO0FBQ0E7QUFDQTtBQUhTO0FBS2I7QUFDSTtBQUNBO0FBQ0E7QUFIVTtBQWxETjs7QUF5RFo7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNJO0FBRFU7QUFHZDtBQUNIOztBQUVEO0FBQ0k7QUFDQTtBQUNBO0FBQ0g7O0FBRUQ7QUFDQTtBQUNJOztBQUVJO0FBQ0k7QUFDSTtBQUNBO0FBQ0o7QUFDSTtBQUNBO0FBQ0o7QUFDSTtBQVJSO0FBVUg7QUFDSjtBQUNEO0FBQ0E7QUFDSTtBQUNBO0FBQUE7QUFDQTtBQUNJO0FBQW9CO0FBQ2hCO0FBQ0E7QUFDQTtBQUNKO0FBQW9CO0FBQ2hCO0FBQ0E7QUFQUjtBQVNBO0FBQ0E7QUFDQTtBQUNIOztBQUVEO0FBQ0E7QUFDSTtBQUNJO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0g7QUFDRztBQUNBO0FBQ0k7QUFDQTtBQUNIO0FBQ0c7QUFDSDtBQUNKO0FBQ0o7O0FBRUQ7QUFDQTtBQUNJO0FBQ0k7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDSDtBQUNHO0FBQ0E7QUFDSTtBQUNBO0FBQ0g7QUFDRztBQUNIO0FBQ0o7QUFDSjs7QUFFRDtBQUNJO0FBQ0E7QUFDQTtBQUNJO0FBQ0g7QUFDRDtBQUNJO0FBQ0g7QUFDSjtBQUNEO0FBQ0k7QUFDQTtBQUNBO0FBQ0k7QUFDSDtBQUNEO0FBQ0k7QUFDSDtBQUNKOztBQUVEO0FBQ0k7QUFDSTtBQUNBO0FBQ0k7QUFDSTtBQUNBO0FBQ0E7QUFDSDtBQUNHO0FBQ0k7QUFDQTtBQUNBO0FBQ0g7QUFDRztBQUNBO0FBQ0E7QUFDSDtBQUNKO0FBQ0o7QUFDRztBQUNBO0FBQ0g7QUFDSjtBQUNHO0FBQ0E7O0FBRUE7QUFDSTtBQUNJO0FBQ0k7QUFDQTtBQUNKO0FBQ0k7QUFDQTtBQUNKO0FBQ0k7QUFSUjtBQVVIO0FBQ0c7QUFDSTtBQUNBO0FBQ0E7QUFDSTtBQUNBO0FBQ0g7QUFDSjtBQUNHO0FBQ0E7QUFDQTtBQUNJO0FBQ0E7QUFDSDtBQUNKO0FBQ0o7QUFDSjtBQUNKO0FBQ0Q7QUFDSTtBQUVJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0k7QUFDQTtBQUNIO0FBQ0o7QUFDRDtBQUNIO0FBQ0Q7QUFDSTtBQUVJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0k7QUFDQTtBQUNIO0FBQ0o7QUFDRDtBQUVIOztBQUVEO0FBQ0E7QUFDSTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNJO0FBQ0E7QUFDSTtBQUNBO0FBQ0g7QUFDRDtBQUNBO0FBQ0k7QUFDQTtBQUNIO0FBQ0Q7QUFDSDtBQUNEO0FBQ0E7QUFDSTtBQUNBO0FBQ0g7QUFDSjs7QUFFRDtBQUNBO0FBQ0k7QUFDQTtBQUNJO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDSjtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0o7QUFDSTtBQVpSO0FBY0E7QUFDSTtBQUNIO0FBQ0c7QUFDQTtBQUNBO0FBQ0k7QUFDSTtBQUNBO0FBQ0o7QUFDSTtBQUNBO0FBQ0o7QUFDSTtBQVJSO0FBVUg7QUFDSjtBQUNEO0FBQ0E7QUFDSTtBQUNIOztBQUVEO0FBQ0k7QUFDSTtBQUNIO0FBQ0Q7QUFDSDs7QUFFRDs7QUFFQTtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0g7QUFDRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNJO0FBQ0g7QUFDSjtBQUNKOztBQUVEO0FBQ0k7QUFDSDs7QUEzV0k7Ozs7Ozs7Ozs7QUNMVDtBQUNBO0FBQ0k7O0FBRUE7QUFDSTtBQUNJO0FBQ0E7QUFDQTtBQUhRO0FBS1o7QUFDSTtBQUNBO0FBQ0E7QUFIUztBQUtiO0FBQ0k7QUFDQTtBQUNBO0FBSFM7QUFLYjtBQUNJO0FBQ0E7QUFDQTtBQUhRO0FBS1o7QUFDSTtBQUNBO0FBQ0E7QUFIUTtBQUtaO0FBQ0k7QUFDQTtBQUNBO0FBSFc7QUExQlA7O0FBaUNaO0FBQ0E7QUFDSTtBQUNBO0FBQ0g7O0FBRUQ7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7O0FBRUQ7QUFDQTtBQUNJO0FBQ0k7QUFDQTtBQUNIO0FBQ0o7QUFDRDtBQUNBO0FBQ0k7QUFDSDtBQUNEO0FBQ0E7QUFDSTtBQUNBO0FBQ0k7QUFDSDtBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSDtBQUNEO0FBQ0E7QUFDSTtBQUNIOztBQUVEO0FBQ0k7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNIO0FBQ0o7O0FBRUQ7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNIO0FBQ0Q7QUFDQTtBQUNJO0FBQ0E7QUFDSDs7QUFFRDtBQUNJO0FBQ0g7O0FBcEhJOzs7Ozs7Ozs7O0FDRFQ7O0FBRUE7QUFDSTtBQUNBO0FBQ0k7QUFDQTs7QUFFQTtBQUNJO0FBQ0E7QUFDQTtBQUhXO0FBS2Y7QUFDSTtBQUNBO0FBQ0E7QUFIUTtBQVRKOztBQWdCWjtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0g7O0FBRUQ7QUFDSTtBQUNBO0FBQ0g7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDSTtBQUNBO0FBQ0E7QUFDSTtBQUNJO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNIO0FBQ0c7QUFDSDtBQUNKO0FBQ0o7QUFDSjs7QUFFRDtBQUNBO0FBQ0k7QUFDQTtBQUNJO0FBQ0k7QUFDQTtBQUNKO0FBQ0k7QUFDQTtBQUNKO0FBQ0k7QUFDSjtBQUNJO0FBVlI7QUFZQTtBQUNJO0FBQ0k7QUFDQTtBQUNBO0FBQ0g7QUFDSjtBQUNKOztBQUVEO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNJO0FBQ0k7QUFDQTtBQUNBO0FBRUo7QUFDQTtBQUNBO0FBQ0g7QUFDRDtBQUNIOztBQUVEOztBQUVBO0FBQ0E7QUFDSTtBQUNBO0FBQ0g7QUFDRDtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDSDtBQUNKO0FBQ0Q7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNIO0FBQ0Q7QUFDSTtBQUNBO0FBQ0E7QUFDSDtBQUNKOztBQUVEO0FBQ0k7QUFDQTtBQUNJO0FBQ0E7QUFDSDtBQUNHO0FBQ0g7QUFDSjtBQUNEOztBQUlBO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDSTtBQUNBO0FBQ0g7QUFDRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0k7QUFDQTtBQUNIO0FBQ0o7QUFDSjs7QUFFRDtBQUNJO0FBQ0g7QUExS0k7Ozs7Ozs7Ozs7QUNGVDs7QUFFQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBSlU7O0FBT2Q7QUFDSTs7QUFFQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDSTtBQUNBO0FBQ0E7QUFIUztBQUtiO0FBQ0k7QUFDQTtBQUNBO0FBSFU7QUFaTjs7QUFtQlo7QUFDQTtBQUNJO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0k7QUFDQTtBQUZVO0FBSWQ7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNIOztBQUVEO0FBQ0E7QUFDSTtBQUNBO0FBQ0g7O0FBRUQ7QUFDSTtBQUNIOztBQUVEO0FBQ0E7QUFDSTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7QUFDRDtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7QUFDSjs7QUFFRDtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNJO0FBQ0k7QUFDQTtBQUNIO0FBQ0o7QUFDSjs7QUFFRDtBQUNBO0FBQ0k7QUFDQTtBQUNJO0FBQ0E7QUFDSTtBQUNBO0FBQ0g7QUFDRDtBQUNJO0FBQ0g7QUFDRztBQUNIO0FBQ0o7QUFDRztBQUNIO0FBQ0o7O0FBRUQ7O0FBRUE7QUFDSTtBQUNBO0FBQ0g7O0FBRUQ7QUFDQTtBQUNJO0FBQ0E7QUFDSTtBQUNIO0FBQ0c7QUFDQTtBQUNJO0FBQ0E7QUFDSTtBQUNIO0FBQ0c7QUFDSDtBQUNKO0FBQ0o7QUFDRDtBQUNBO0FBQ0g7O0FBRUQ7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNJO0FBQ0g7QUFDSjs7QUFFRDtBQUNBO0FBQ0k7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBSUE7QUFDQTtBQUNJO0FBQ0E7QUFDSTtBQUNBO0FBQ0g7QUFDRDtBQUNBO0FBQ0k7QUFDQTtBQUNIO0FBQ0Q7QUFDSDtBQUNEO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFFSDtBQUNEO0FBQ0E7QUFDSTtBQUNIO0FBQ0o7O0FBRUQ7QUFDQTtBQUNJO0FBQ0g7O0FBRUQ7QUFDQTtBQUNJO0FBQ0k7QUFDSDtBQUNEO0FBQ0g7O0FBRUQ7QUFDSTtBQUNBO0FBQ0k7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUpTO0FBTWI7QUFDSDtBQUNEO0FBQ0g7O0FBbk5JOzs7Ozs7Ozs7O0FDVFQ7QUFDQTtBQUNJOztBQUVBO0FBQ0k7QUFDQTtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBSHlCO0FBSzdCO0FBQ0k7QUFDQTtBQUNBO0FBSDhCO0FBUjFCOztBQWVaO0FBQ0E7QUFDSTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7O0FBRUQ7QUFDSTtBQUNIOztBQXBDSTs7Ozs7Ozs7OztBQ0RUOzs7QUFHQTtBQUNJOztBQUVBOztBQUlBO0FBQ0E7QUFDSTtBQUNBO0FBQ0g7O0FBRUQ7QUFDSTtBQUNBO0FBQ0k7QUFDQTtBQUZVO0FBSWQ7QUFDSDs7QUFFRDtBQUNJO0FBQ0k7QUFDQTtBQUNBO0FBQ0g7QUFDRztBQUNBO0FBQ0k7QUFDSTtBQUNBO0FBQ0o7QUFDSTtBQUNBO0FBQ0o7QUFDSTtBQUNBO0FBQ0o7QUFDSTtBQUNBO0FBWlI7QUFjQTtBQUNBO0FBQ0k7QUFDSTtBQUNIO0FBQ0o7QUFDSjtBQUNKOztBQUVEO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNJO0FBQ0E7QUFDSDtBQUNHO0FBQ0k7QUFDQTtBQUNBO0FBQ0k7QUFDSTtBQUNIO0FBQ0o7QUFDSjtBQUNEO0FBQ0g7QUFDSjs7QUFFRDtBQUNJO0FBQ0E7QUFDSTtBQUNBO0FBQ0k7QUFDQTtBQUNJO0FBQ0E7QUFDSDtBQUNKO0FBQ0o7QUFDRDtBQUNIOztBQUVEO0FBQ0k7QUFDSDs7QUFFRDtBQUNJO0FBQ0E7QUFDQTtBQUNJO0FBQ0E7QUFDSTtBQUNJO0FBRE87QUFHWDtBQUNIO0FBQ0Q7QUFDSDtBQUNEO0FBQ0g7O0FBRUQ7QUFDSTtBQUNBO0FBQ0E7QUFDSTtBQUNJO0FBQ0E7QUFGTztBQUlYO0FBQ0g7QUFDRDtBQUNIOztBQXhISTs7Ozs7Ozs7OztBQ0hUOzs7QUFHQTtBQUNJOztBQUVBO0FBQ0k7O0FBRUE7QUFDSTtBQUNBO0FBQ0E7QUFIYztBQUtsQjtBQUNJO0FBQ0E7QUFDQTtBQUhXO0FBS2Y7QUFDSTtBQUNBO0FBQ0E7QUFIYztBQWJWOztBQW9CWjtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0g7O0FBRUQ7O0FBSUE7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNJO0FBQ0E7O0FBRUE7QUFDSTtBQUNBO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUpnQjtBQU12QjtBQUNHO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFKVTtBQU1qQjtBQUNEO0FBQ0k7QUFDQTtBQUNIO0FBQ0o7QUFDRDtBQUNJO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFKZ0I7QUFNcEI7QUFDSTtBQUNBO0FBQ0g7QUFDSjs7QUFFRDtBQUNBOztBQUVBO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDSTtBQUNIO0FBQ0c7QUFDQTtBQUNIO0FBQ0o7QUFDRztBQUNBOztBQUVBO0FBQ0k7QUFDQTtBQUNBO0FBRUg7QUFDRztBQUNBO0FBQ0E7QUFDSDtBQUNKO0FBQ0o7O0FBRUQ7QUFDSTtBQUNBO0FBQ0k7QUFDQTtBQUNIO0FBQ0o7QUFDRDtBQUNJO0FBQ0g7QUFDRDtBQUNJO0FBQ0k7QUFDSTtBQUNBO0FBQ0E7QUFDSjtBQUNJO0FBQ0E7QUFDQTtBQUNKO0FBQ0k7QUFDQTtBQUNBO0FBQ0o7QUFDSTtBQWRSO0FBZ0JBO0FBQ0g7O0FBR0Q7QUFDQTtBQUNJO0FBQ0k7QUFEVTtBQUdkO0FBQ0g7QUFDRDtBQUNBO0FBQ0k7QUFBQTtBQUFBO0FBQ0E7QUFDSTtBQUNBO0FBQ0k7QUFDQTtBQUNIO0FBQ0o7QUFDRDtBQUNIOztBQUVEOztBQUVBO0FBQ0E7QUFDSTtBQUNBO0FBQ0k7QUFDSDtBQUNHO0FBQ0g7QUFDRDtBQUNIOztBQUVEO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNIOztBQUVEO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDSTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBSlM7QUFRaEI7QUFDSjs7QUFFRDtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0k7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUpTO0FBTWI7QUFDSDtBQUNKOztBQUVEOztBQUVBO0FBQ0E7QUFDSTtBQUVBO0FBQ0g7O0FBcE9JOzs7Ozs7Ozs7O0FDSFQ7QUFDQTtBQUNJOztBQUVBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBSE07QUFLVjtBQUNJO0FBQ0E7QUFDQTtBQUhRO0FBS1o7QUFDSTtBQUNBO0FBQ0E7QUFIVTtBQWhCTjs7QUF1Qlo7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFSDs7QUFFRDtBQUNJO0FBQ0E7QUFDSTtBQUNJO0FBQ0E7QUFFUTtBQUNBO0FBRko7QUFLSTtBQUNBO0FBRko7QUFLSTtBQURKO0FBSUk7QUFESjtBQUlJO0FBREo7QUFJSTtBQURKO0FBcEJHO0FBeUJYO0FBQ0E7QUFDSDtBQUNHO0FBQ0k7QUFDQTtBQUZVO0FBSWQ7QUFDSTtBQUNJO0FBQ0E7QUFDSDtBQUNKO0FBQ0o7QUFDSjs7QUFFRDtBQUNBO0FBQ0k7QUFDQTtBQUNJO0FBQ0k7QUFDSDtBQUNKO0FBQ0o7O0FBR0Q7QUFDSTtBQUNJO0FBQ0E7QUFDQTtBQUNIO0FBQ0c7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0k7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSDtBQUNHO0FBQ0g7QUFDSjtBQUNKO0FBQ0o7QUFDRDtBQUNBO0FBQ0k7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0k7QUFDQTtBQUNIO0FBQ0Q7QUFDSTtBQUNBO0FBQ0g7QUFDRDtBQUNJO0FBQ0E7QUFDSDtBQUNKO0FBQ0Q7QUFDSDtBQUNEO0FBQ0E7QUFDSTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBS0E7QUFDSTtBQUNJO0FBQ0E7QUFDQTtBQUNIO0FBQ0c7QUFDQTtBQUNJO0FBQ0E7QUFDSDtBQUNEO0FBQ0g7QUFDSjtBQUNEO0FBQ0E7QUFDSDtBQUNEO0FBQ0E7QUFDSTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFnQjtBQUNaO0FBQ0k7QUFDQTtBQUNIO0FBQ0c7QUFDQTtBQUNIO0FBQ0o7QUFDRztBQUNBO0FBQ0g7QUFDRDtBQUNBO0FBQ0g7QUFsTUk7Ozs7Ozs7Ozs7QUNEVDs7O0FBR0E7QUFDSTs7QUFFQTtBQUNJO0FBQ0k7QUFDQTtBQUNBO0FBSFM7QUFETDs7QUFRWjtBQUNBO0FBQ0k7O0FBRUE7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUhVO0FBS2Q7O0FBRUE7QUFDQTtBQUNIOztBQUVEO0FBQ0k7QUFDSTtBQUNBO0FBQ0g7O0FBRUc7QUFDQTtBQUNJO0FBQ0k7QUFDSDtBQUNKO0FBQ0o7QUFDSjs7QUFFRDtBQUNJO0FBQ0E7QUFBQTtBQUVBO0FBQ0k7QUFDSDtBQUNHO0FBQ0E7QUFDQTtBQUNIO0FBQ0Q7QUFDSDs7QUFFRDtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDSTtBQUNBO0FBQ0k7QUFDQTtBQUNJO0FBQ0E7QUFDSDtBQUNKO0FBQ0o7QUFDRDtBQUNIOztBQUVEO0FBQ0k7QUFDSDs7QUFFRDtBQUNJO0FBQ0g7QUFDRDtBQUNJO0FBQ0g7O0FBRUQ7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNJO0FBQ0k7QUFDQTtBQUNBO0FBSGE7QUFLakI7QUFDSDtBQUNEO0FBQ0g7QUFDRDtBQUNBO0FBQ0g7O0FBeEdJOzs7Ozs7Ozs7O0FDSFQ7QUFDQTtBQUNJOztBQUVBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNJO0FBQ0E7QUFDQTtBQUhTO0FBS2I7QUFDSTtBQUNBO0FBQ0E7QUFIVTtBQVpOOztBQW1CWjtBQUNBO0FBQ0k7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0k7QUFDQTtBQUZVO0FBSWQ7O0FBRUE7QUFDSDs7QUFFRDtBQUNJO0FBQ0g7O0FBRUQ7QUFDQTtBQUNJO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDSDs7QUFFRDtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSDtBQUNKOztBQUVEO0FBQ0E7QUFDSTtBQUNBO0FBQ0k7QUFDQTtBQUNJO0FBQ0E7QUFDSDtBQUNEO0FBQ0k7QUFDSDtBQUNHO0FBQ0g7QUFDSjtBQUNHO0FBQ0g7QUFDSjtBQUNEO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0k7QUFDSTtBQUNBO0FBQ0g7QUFDSjtBQUNKOztBQUVEOztBQUVBO0FBQ0E7QUFDSTtBQUNBO0FBQ0k7QUFDSDtBQUNHO0FBQ0E7QUFDSTtBQUNBO0FBQ0k7QUFDSDtBQUNHO0FBQ0g7QUFDSjtBQUNKO0FBQ0Q7QUFDQTtBQUNIOztBQUVEO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDSTtBQUNIO0FBQ0o7O0FBRUQ7QUFDQTtBQUNJO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0k7QUFDQTtBQUNJO0FBQ0E7QUFDSDtBQUNEO0FBQ0E7QUFDSTtBQUNBO0FBQ0g7QUFDRDtBQUNIO0FBQ0Q7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNJO0FBQ0g7QUFDRztBQUNIO0FBQ0o7QUFDRDtBQUNBO0FBQ0k7QUFDSDtBQUNKOztBQUVEO0FBQ0E7QUFDSTtBQUNIOztBQUVEO0FBQ0E7QUFDSTtBQUNJO0FBQ0g7QUFDRDtBQUNIOztBQUVEO0FBQ0E7QUFDSTtBQUNBO0FBQ0k7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUo7QUFDSDtBQUNEO0FBQ0E7QUFDQTtBQUNIOztBQWhOSTs7Ozs7Ozs7OztBQ0RUOzs7QUFHQTtBQUNJOztBQUVBO0FBQ0k7QUFDSTtBQUNBO0FBQ0E7QUFIYTtBQUtqQjtBQUNJO0FBQ0E7QUFDQTtBQUhVO0FBTk47O0FBYVo7QUFDQTtBQUNJO0FBQ0E7QUFDSDs7QUFFRDtBQUNJO0FBQ0g7O0FBRUQ7QUFDQTtBQUNJO0FBQ0E7O0FBRUE7QUFDSDtBQUNEO0FBQ0k7QUFDSDs7QUFuQ0k7Ozs7Ozs7Ozs7QUNIVDtBQUNBO0FBQ0k7O0FBRUE7QUFDSTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNJO0FBQ0E7QUFDQTtBQUhlO0FBS25CO0FBQ0k7QUFDQTtBQUNBO0FBSGE7QUFLakI7QUFDSTtBQUNBO0FBQ0E7QUFIVTtBQWhCTjs7QUF1Qlo7QUFDQTtBQUNJOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSDs7QUFFRDtBQUNJO0FBQ0g7QUE1Q0k7Ozs7Ozs7Ozs7QUNEVDtBQUNBO0FBQ0k7QUFDQTtBQUZVOztBQUtkO0FBQ0k7O0FBRUE7QUFDSTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNJO0FBQ0E7QUFDQTtBQUhhO0FBS2pCO0FBQ0k7QUFDQTtBQUNBO0FBSGU7QUFLbkI7QUFDSTtBQUNBO0FBQ0E7QUFIZTtBQUtuQjtBQUNJO0FBQ0E7QUFDQTtBQUhZO0FBS2hCO0FBQ0k7QUFDQTtBQUNBO0FBSFk7QUFLaEI7QUFDSTtBQUNBO0FBQ0E7QUFIUztBQS9CTDs7QUFzQ1o7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNIO0FBQ0Q7QUFDSTtBQUNBO0FBQ0E7QUFDSDtBQUNEO0FBQ0k7QUFDQTtBQUNIOztBQUVEO0FBQ0k7QUFDSTtBQUNBO0FBQ0g7O0FBRUQ7QUFDSTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNJO0FBQ0g7QUFDSjtBQUNKO0FBQ0o7O0FBRUQ7QUFDSTtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0g7QUFDRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSTtBQUNBO0FBQ0k7QUFDSDtBQUNEO0FBQ0E7QUFDQTtBQUNIO0FBQ0o7QUFDSjs7QUFFRDtBQUNBO0FBQ0k7QUFDSTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0o7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQVZSO0FBWUg7QUFDRDtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDSTtBQUNIO0FBQ0c7QUFDSDtBQUNEO0FBQ0g7QUFDRDtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDSTtBQUNIO0FBQ0c7QUFDSDtBQUNEO0FBQ0g7O0FBRUQ7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7O0FBRUQ7QUFDQTtBQUNJO0FBRUE7QUFFQTtBQUNIOztBQUVEO0FBQ0k7QUFDSTtBQUNBO0FBQ0g7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNIO0FBQ0Q7QUFDQTs7QUFFQTtBQWhOSzs7Ozs7Ozs7OztBQ05UOzs7QUFHQTtBQUNJOztBQUVBOztBQUlBO0FBQ0E7QUFDSTtBQUNBO0FBQ0g7O0FBRUQ7QUFDSTtBQUNBO0FBQ0k7QUFDQTtBQUZVO0FBSWQ7QUFDSDs7QUFFRDtBQUNJO0FBQ0E7QUFDSTtBQUNBO0FBQ0k7QUFDQTtBQUNIO0FBQ0Q7QUFDSDtBQUNHO0FBQ0E7QUFDSTtBQUNJO0FBQ0E7QUFDSjtBQUNJO0FBQ0E7QUFDSjtBQUNJO0FBQ0E7QUFDSjtBQUNJO0FBQ0E7QUFaUjtBQWNBO0FBQ0E7QUFDSTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSTtBQUNIO0FBQ0c7QUFDSTtBQUNBO0FBQ0E7QUFDSTtBQUNJO0FBQ0g7QUFDSjtBQUNKO0FBQ0Q7QUFDSDtBQUNKO0FBQ0o7QUFDSjtBQUNKO0FBQ0Q7QUFDSTtBQUNBO0FBQ0k7QUFDQTtBQUNJO0FBQ0E7QUFDSTtBQUNBO0FBQ0g7QUFDSjtBQUNKO0FBQ0Q7QUFDSDs7QUFFRDtBQUNJO0FBQ0g7O0FBekZJOzs7Ozs7Ozs7O0FDSFQ7QUFDQTtBQUNJOztBQUVBO0FBQ0k7QUFDQTs7QUFFQTtBQUNJO0FBQ0E7QUFDQTtBQUhVO0FBS2Q7QUFDSTtBQUNBO0FBQ0E7QUFIaUI7QUFLckI7QUFDSTtBQUNBO0FBQ0E7QUFIWTtBQWRSOztBQXFCWjtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFIVTtBQUtkO0FBQ0g7O0FBRUQ7QUFDSTtBQUNBO0FBQ0E7QUFDSTtBQUNJO0FBQ0g7QUFDRztBQUNJO0FBQ0E7QUFDSDtBQUNHO0FBQ0g7QUFDSjtBQUNKO0FBQ0Q7QUFDSDs7QUFFRDtBQUNJO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDSTtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7QUFDSjtBQUNKO0FBQ0Q7QUFDQTtBQUNIOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDSTtBQUNBO0FBQ0E7QUFDSTtBQUNBO0FBQ0k7QUFDSDtBQUNEO0FBQ0g7O0FBRUQ7QUFDQTtBQUNBO0FBQ0k7QUFBQTtBQUNBO0FBQ0k7QUFDSDtBQUNHO0FBQ0g7QUFDRztBQUNIO0FBQ0o7QUFDRDtBQUNBO0FBQ0k7QUFDSTtBQUNBO0FBQ0E7QUFDSTtBQUNIO0FBQ0c7QUFDQTtBQUNIO0FBQ0o7QUFDSjs7QUFFRDtBQUNIOztBQUVEO0FBQ0k7QUFDSTtBQUNJO0FBQ0g7QUFDSjtBQUNEO0FBQ0g7O0FBRUQ7QUFDSTtBQUNBO0FBQ0k7QUFDSTtBQUNBO0FBQ0g7QUFDSjtBQUNEO0FBQ0k7QUFDQTtBQUNIO0FBQ0o7O0FBRUQ7QUFDQTtBQUNJO0FBQ0k7QUFDQTtBQUNBO0FBQ0k7QUFDSDtBQUNKO0FBQ0o7O0FBRUQ7O0FBRUE7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNJO0FBQ0k7QUFDQTtBQUNBO0FBQ0o7O0FBRUk7QUFDSjtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0o7QUFDSTtBQWRSO0FBZ0JIOztBQUVEO0FBQ0k7QUFDSTtBQUNJO0FBQ0E7QUFGQztBQUlMO0FBQ0k7QUFDQTtBQUZDO0FBSUw7QUFDSTtBQUNBO0FBRkM7QUFJTDtBQUNJO0FBQ0E7QUFGQztBQUlMO0FBQ0k7QUFDQTtBQUZDO0FBSUw7QUFDSTtBQUNBO0FBRkM7QUFJTDtBQUNJO0FBQ0E7QUFGQztBQXpCRjtBQThCVjs7QUFuT0k7Ozs7Ozs7Ozs7QUNEVDs7QUFFQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNJO0FBQ0k7QUFDQTtBQUNIO0FBQ0Q7QUFDSTtBQUNBO0FBQ0E7QUFDSTtBQUNBO0FBQ0g7QUFDSjtBQUNHO0FBQ0k7QUFDQTtBQUNJO0FBQ0g7QUFDRztBQUNJO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDSTtBQUNBO0FBQ0g7QUFDSjtBQUNKO0FBQ0o7QUFDRDtBQUNIO0FBQ0o7QUFDSjs7QUFFRDtBQUNBO0FBQ0k7QUFDSTtBQUNBO0FBQ0E7QUFDSDtBQUNKOztBQUVEO0FBQ0E7QUFDSTtBQUNJO0FBQ0E7QUFDSDtBQUNKO0FBekRjOztBQTZEbkI7Ozs7Ozs7Ozs7QUMvREE7QUFBa0Q7QUFBcUM7O0FBRXZGO0FBQ0E7QUFDQTtBQUNBO0FBQStEO0FBQzNEO0FBQ0g7QUFDRDtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDSDtBQUNEO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDSTtBQUNIO0FBQ0Q7QUFDSTtBQUNIO0FBQ0o7QUFDRDtBQUNBO0FBQ0k7QUFDSDtBQUNEO0FBQ0k7QUFDSTtBQUNIO0FBQ0Q7QUFDSTtBQUNBO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDSTtBQUNJO0FBQ0g7QUFDSjtBQUNHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0k7QUFDSDtBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0k7QUFDSDtBQUNKO0FBQ0o7QUFDRDtBQUNJO0FBQ0g7QUFDRDtBQUNJO0FBQ0k7QUFDSDtBQUNKO0FBQ0Q7QUFDSDtBQUNHO0FBQ0g7QUFDSjtBQUNEO0FBQ0E7QUFDSTtBQUNJO0FBQ0E7QUFDSDtBQUNHO0FBQ0g7QUFDSjs7QUFFRDtBQUNJO0FBQ0k7QUFDSTtBQUNBO0FBQ0g7QUFDRztBQUNIO0FBQ0Q7QUFDSDtBQUNHO0FBQ0g7QUFDSjtBQUNEO0FBQ0E7QUFHQTtBQUNJO0FBQ0E7QUFDQTtBQUNIOztBQUVEO0FBQ0k7QUFDQTtBQUNBO0FBQ0g7O0FBRUQ7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNJO0FBQ0k7QUFBZ0Q7QUFBYTtBQUM3RDtBQUNIO0FBQ0Q7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBZ0I7QUFDWjtBQUNBO0FBQ0g7QUFDRztBQUNIO0FBQ0o7QUFDSjtBQUNEO0FBQ0g7O0FBRUQ7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0k7QUFDQTtBQUNIO0FBQ0Q7QUFDSDs7QUFFRDtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSDs7QUFFRDtBQUNJO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNJO0FBQ0E7QUFDSTtBQUNJO0FBQ0g7QUFDRDtBQUNIO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDSTtBQUVIO0FBQ0o7QUFDRDtBQUNIOztBQUVEO0FBQ0k7QUFDSTtBQUNJO0FBQ0E7QUFDQTtBQUNKO0FBQ0k7QUFDQTtBQUNBO0FBQ0o7QUFDSTtBQUNBO0FBQ0E7QUFDSjtBQUFTO0FBQ0w7QUFDQTtBQUNBO0FBQ0k7QUFDQTtBQUNIO0FBQ0c7QUFDQTtBQUNIO0FBQ0Q7QUFDSTtBQUFpQjtBQUNiO0FBQ0g7QUFDRDtBQUFlO0FBQ1g7QUFDQTtBQUNBO0FBQ0k7QUFDQTtBQUNJO0FBQ0g7QUFDRztBQUNIO0FBQ0Q7QUFDSDtBQUNEO0FBQ0g7QUFDRDtBQUFTO0FBQUM7QUFDTjtBQUNBO0FBQ0k7QUFDSTtBQUNIO0FBQ0c7QUFDSDtBQUNKO0FBQ0o7QUEzQkw7QUE2QkE7QUFDSDtBQXJETDtBQXVEQTtBQUNIOztBQUVEOzs7O0FBSUE7QUFDSTtBQUNBO0FBQ0k7QUFDSDtBQUNHO0FBQ0g7QUFDRDtBQUNBO0FBQWtDO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQTRGO0FBQ3hGO0FBQ0E7QUFDSTtBQUNBO0FBQ0g7QUFDRztBQUNIO0FBQ0Q7QUFDQTtBQUNJO0FBQ0g7QUFDRztBQUNIO0FBQ0Q7QUFDSTtBQUNBO0FBQ0g7QUFDSjtBQUNHO0FBQ0g7QUFDSjtBQUNEO0FBQ0g7O0FBRUQ7QUFDSTtBQUNJO0FBQ0k7QUFDQTtBQUNKO0FBQ0k7QUFDQTtBQUNKO0FBQ0k7QUFDQTtBQUNKO0FBQ0k7QUFDQTtBQVpSO0FBY0g7O0FBRUQ7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNJO0FBQ0g7QUFDRDtBQUNIOztBQUVEO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDSTtBQUNBO0FBQ0g7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNJO0FBQ0E7QUFDSDtBQUNKOztBQUVEO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNJO0FBQ0E7QUFDSDtBQUNEO0FBQ0E7QUFDSDs7QUFFRDtBQUNJO0FBQ0E7QUFDQTtBQUNIOztBQUVEO0FBQ0k7QUFDSDs7QUFFRDtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSTtBQUNBO0FBQ0g7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNJO0FBQ0E7QUFDSDtBQUNEO0FBQ0g7O0FBRUQ7QUFDSTtBQUNIOztBQUVEO0FBQ0k7QUFDSDtBQUNEO0FBQ0k7QUFDSDs7QUFFRDtBQUNJO0FBQ0g7O0FBRUQ7QUFDSTtBQUNBO0FBQ0k7QUFDQTtBQUNJO0FBQ0g7QUFDRztBQUNIO0FBQ0c7QUFDSDtBQUNHO0FBQ0g7QUFDSjtBQUNEO0FBQUE7QUFDQTtBQUNJO0FBQ0E7QUFDSDtBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSTtBQUNBO0FBQ0g7QUFDRDtBQUNBO0FBQ0g7O0FBRUQ7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNJO0FBQ0g7QUFDRDtBQUNBO0FBQUE7QUFDQTtBQUNJO0FBQ0E7QUFDSTtBQUNIO0FBQ0c7QUFDSDtBQUNHO0FBQ0g7QUFDRztBQUNIO0FBQ0Q7QUFDSTtBQUNIO0FBQ0o7QUFDRDtBQUNIO0FBQ0Q7Ozs7Ozs7Ozs7QUNyY0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFJQTtBQUNBO0FBQ0k7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDSDs7QUFFRDtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDSTtBQUNBO0FBQ0g7QUFDRztBQUNIO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDSTtBQUNIO0FBQ0Q7QUFDSTtBQUNIO0FBQ0Q7QUFDSDs7QUFFRDtBQUNJO0FBQ0k7QUFDQTtBQUNJO0FBQ0E7QUFDSDtBQUNKO0FBQ0Q7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSDtBQUNEO0FBQ0E7O0FBRUE7QUFDSTtBQUNBO0FBQ0g7QUFDSjtBQUNEO0FBQ0k7QUFDQTtBQUNBO0FBQ0g7O0FBRUQ7QUFDSTtBQUNJO0FBQ0E7QUFDSDtBQUNKOztBQUVEO0FBQ0k7QUFDSDs7QUFFRDtBQUNJO0FBRUg7O0FBRUQ7QUFDQTtBQUNJOztBQUVBO0FBQ0E7QUFDSTtBQUNBO0FBQ0k7QUFDSDtBQUNEO0FBQ0g7QUFDRztBQUNBO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFIcUI7QUFLekI7QUFDSDtBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7QUFDRDtBQUNJO0FBQ0k7QUFDSTtBQUNBO0FBQ0o7QUFDSTtBQUxSO0FBT0g7O0FBRUQ7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNJO0FBQ0E7QUFDQTtBQUNIOztBQUVEO0FBQ0E7QUFDQTtBQUNJO0FBQ0E7QUFDSDtBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0k7QUFDQTtBQUNIOztBQUdEO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNIO0FBQ0c7QUFDQTtBQUNBO0FBQ0g7QUFDRDtBQUNIOztBQUVEO0FBQ0E7QUFDSTtBQUNBO0FBQ0g7QUFDRDtBQUNBO0FBQ0k7QUFDSDtBQUNEO0FBQ0E7QUFDSTtBQUNJO0FBQ0g7QUFDRDtBQUNJO0FBQ0g7QUFDSjs7QUFFRDs7QUFFQTtBQUNBO0FBQ0k7QUFDSDs7QUFFRDtBQUNBO0FBQ0k7QUFDSTtBQUNBO0FBQ0g7QUFDRDtBQUNBO0FBQ0k7QUFDQTtBQUFnQztBQUM1QjtBQUNBO0FBQ0g7QUFDSjtBQUNKOztBQUVEO0FBQ0E7QUFDSTtBQUNBO0FBQ0k7QUFDSTtBQUNBO0FBQ0o7QUFDSTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0o7QUFDSTtBQVpSO0FBY0E7QUFDSDs7QUFFRDtBQUNBO0FBQ0k7QUFDSTtBQUNJO0FBQ0E7QUFDSTtBQUNIO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0o7QUFDSTtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNIO0FBQ0Q7QUFDSjtBQUNJO0FBdkJSO0FBeUJIOztBQUVEO0FBQ0E7O0FBRUk7QUFDSTtBQUNJO0FBQ0E7O0FBRUE7QUFDQTtBQUNJO0FBQ0E7QUFDSDtBQUNEO0FBQ0o7QUFDSTtBQUNBOztBQUVBO0FBQ0E7QUFDSTtBQUNBO0FBQ0g7QUFDRDtBQUNKO0FBQ0k7QUFDQTtBQUNKO0FBQ0k7QUF6QlI7QUEyQkE7QUFDSDs7QUFFRDs7QUFFQTtBQUNBO0FBQ0k7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNJO0FBQ0k7QUFDSTtBQUNBO0FBQ0E7QUFDSjtBQUNJO0FBQ0E7QUFDQTtBQUNKO0FBQ0k7QUFDQTtBQUNBO0FBQ0o7QUFDSTtBQUNBO0FBQ0k7QUFDSTtBQUNIO0FBQ0o7QUFDRDtBQUNKO0FBQ0k7QUFDQTtBQUNBO0FBQ0o7QUFDSTtBQUNBO0FBQ0E7QUFDSjtBQUNJO0FBOUJSO0FBZ0NIO0FBQ0o7QUFDRDtBQUNBO0FBQ0k7QUFDSTs7QUFFQTtBQUNJO0FBQ0k7QUFDSTtBQUNBO0FBQ0o7QUFDSTtBQUNBO0FBQ0o7QUFDSTtBQVJSO0FBVUg7QUFDRDtBQUNBO0FBQ0g7QUFDSjs7QUFFRDs7QUFFQTtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDSTtBQUNBO0FBQ0k7QUFDQTtBQUNIO0FBQ0o7QUFDSjtBQUNEO0FBQ0E7QUFDSTtBQUNJO0FBQ0g7QUFDSjtBQUNEO0FBQ0E7QUFDSTtBQUNBO0FBQ0g7O0FBelpvQjs7QUF1YXpCOzs7Ozs7Ozs7O0FDL2FBOztBQUVBO0FBQ0k7QUFDSTs7QUFHSjtBQUNBO0FBQ0k7QUFDSDs7QUFFRDtBQUNBO0FBQ0k7QUFDQTtBQUNIO0FBQ0Q7QUFDSTtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7QUFDRDtBQUNJO0FBQ0E7QUFDSTs7QUFFQTtBQUNBO0FBQ0E7QUFDSDtBQUNKO0FBQ0Q7QUFDSDtBQUNHO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7O0FBRUQ7QUFDSTtBQUNBO0FBQ0g7QUFDSjs7QUFsRHFCOzs7Ozs7Ozs7O0FDRjFCOztBQUVBO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7O0FBRUQ7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNIO0FBQ0Q7QUFDSTtBQUNIO0FBQ0Q7QUFDQTtBQUNJO0FBQ0E7QUFDSTtBQUNBO0FBQ0g7QUFDRDtBQUNIO0FBQ0Q7QUFDQTtBQUNJO0FBQUE7QUFDQTtBQUNJO0FBQ0E7QUFDSDtBQUNEO0FBQ0g7O0FBRUQ7QUFDSTtBQUNBO0FBQ0E7QUFDSTtBQUNBO0FBQ0g7QUFDRDtBQUNBO0FBQ0E7QUFDSTtBQUNBO0FBQ0g7QUFDRDtBQUNIO0FBQ0Q7QUFDSTs7QUFFQTtBQUNJO0FBQ0k7QUFDSTtBQUNKO0FBQ0k7QUFDSjtBQUNJO0FBQ0o7QUFDSTtBQUNBO0FBQ0o7QUFDSTs7QUFFSjtBQUNJO0FBZFI7QUFnQkg7QUFDRztBQUNBO0FBQ0E7QUFDSDtBQUNKOztBQWxGbUI7O0FBc0Z4QjtBQUNBO0FBQ0k7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUhRO0FBS1o7QUFDSTtBQUNIO0FBQ0Q7QUFDSTtBQUNIOztBQUVEO0FBQ0E7QUFDSTtBQUNBO0FBQ0k7QUFDSTtBQUNBO0FBQ0o7QUFDSTtBQUNBO0FBQ0o7QUFDSTtBQUNBO0FBQTJCO0FBQThDO0FBQ3pFO0FBQ0o7QUFDSTtBQVpSO0FBY0E7QUFDQTtBQUNIO0FBQ0Q7QUFDSTtBQUNJO0FBQ0k7QUFDQTtBQUNIO0FBQ0Q7QUFDSDtBQUNEO0FBQ0E7QUFDQTtBQUNIO0FBQ0Q7QUFDSTtBQUNJO0FBQ0E7QUFDSDtBQUNEO0FBQ0k7QUFDSTtBQUNBO0FBQ0k7QUFDQTtBQUNIO0FBQ0o7QUFDRztBQUNBO0FBQ0E7QUFDSDtBQUNKO0FBQ0o7O0FBRUQ7QUFDSTtBQUNJO0FBQ0E7QUFDSDtBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSTtBQUNJO0FBQ0k7QUFDQTtBQUNKO0FBQ0k7QUFDQTtBQUNBO0FBQ0o7QUFDSTtBQUNBO0FBQ0E7QUFDSjtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFqQlI7QUFtQkg7O0FBRUQ7QUFDQTtBQUNBO0FBQ0g7O0FBRUQ7QUFDQTtBQUNJO0FBQ0g7O0FBRUQ7QUFDSTtBQUNBO0FBQ0E7QUFDSDtBQS9HbUI7O0FBa0h4Qjs7Ozs7Ozs7OztBQzVNQTs7QUFFQTtBQUNJO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBR0o7QUFDQTtBQUNJOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7O0FBRUQ7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNIO0FBQ0Q7QUFDSTtBQUNBO0FBQ0k7QUFDSDs7QUFFRDtBQUNIO0FBQ0Q7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNIO0FBQ0Q7QUFDSTtBQUNBO0FBQ0k7QUFDSTtBQUNIO0FBQ0o7QUFDSjs7QUFFRDs7QUFFQTtBQUNJO0FBQ0g7O0FBRUQ7QUFDSTtBQUNBO0FBQ0E7QUFDSTtBQUNIO0FBQ0c7QUFDQTtBQUNIOztBQUVEO0FBQ0k7QUFDSTtBQUNIO0FBQ0c7QUFDSDtBQUNKO0FBQ0c7QUFDQTtBQUNBO0FBQ0g7QUFDRDtBQUNIOztBQUVEOztBQUVBO0FBQ0E7QUFDSTtBQUNIO0FBQ0Q7QUFDSTtBQUNIO0FBQ0Q7QUFDSTtBQUNIOztBQUVEOztBQUVBO0FBQ0E7QUFDSTtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0g7QUFDRDtBQUNIO0FBQ0Q7QUFDQTtBQUNJO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDSDtBQUNEO0FBQ0g7O0FBRUQ7QUFDQTtBQUNJO0FBQ0E7QUFDSTtBQUNBO0FBQ0g7QUFDSjs7QUFFRDtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0k7QUFDSDtBQUNKOztBQUVEOztBQUVBO0FBQ0E7QUFDSTtBQUNIOztBQUVEOztBQUVBO0FBQ0E7QUFDSTtBQUNIOztBQUdEO0FBQ0E7QUFDSTtBQUNBO0FBRUg7QUFDRDs7QUF4S0s7Ozs7Ozs7Ozs7QUNGVDs7QUFFQTtBQUNJO0FBQ0E7QUFDSTtBQUNIO0FBQ0Q7QUFDQTtBQUNJO0FBQ0g7QUFDRDtBQUNBO0FBQ0k7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNJO0FBQUE7QUFDQTtBQUNIO0FBQXlCO0FBQWI7QUFDYjtBQUNIO0FBQ0Q7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDSTtBQUNBO0FBQ0g7QUFDRDtBQUNBO0FBQTZCO0FBQTdCO0FBRUE7QUFDSTtBQUNBO0FBQ0g7QUFDRDtBQUNIO0FBQ0Q7QUFDQTtBQUNJO0FBQ0g7QUFDRDtBQUNBO0FBQ0k7QUFDQTtBQUNIOztBQUVEO0FBQ0k7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNJO0FBQ0k7QUFDSTtBQUNJO0FBQ0E7QUFDSDtBQUNKO0FBQ0Q7QUFDSTtBQUNJO0FBQ0E7QUFDSDtBQUNKO0FBQ0o7QUFDRDtBQUNBO0FBQ0E7QUFDSDtBQUNKO0FBQ0Q7QUFDQTtBQUNIOztBQUVEO0FBQ0E7QUFDSTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSTtBQUNJO0FBRUE7QUFDSDtBQUNEO0FBQ0E7QUFDQTtBQUNJO0FBQ0g7QUFDRztBQUNIO0FBQ0o7QUFDRDtBQUNIO0FBQ0Q7QUFDSTtBQUNBO0FBQ0k7QUFDSDtBQUNEO0FBQ0g7QUFDRDtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDSDtBQUNEO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNIOztBQUVEO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNIO0FBQ0Q7QUFDQTtBQUNJO0FBQ0k7QUFDQTtBQUNJO0FBQ0g7QUFDSjtBQUNHO0FBQ0E7QUFDSTtBQUNBOztBQUVBO0FBQ0k7QUFDSTtBQUNIO0FBQ0c7QUFDSDtBQUNKOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7QUFDSjtBQUNKOztBQUVEO0FBQ0E7QUFDSTtBQUNBO0FBQ0g7O0FBak1POztBQW1OWjs7Ozs7Ozs7OztBQ3JOQTs7QUFFQTs7QUFFSTtBQUNJO0FBQ0E7QUFGbUI7O0FBS3ZCO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFKaUI7O0FBT3JCO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTGdCOztBQVFwQjtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFKc0I7O0FBTzFCO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFHSjtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBR0o7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNBOztBQUdKO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQWJrQjs7QUFnQnRCO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDQTs7QUFHSjtBQUNJO0FBQ0E7QUFDQTtBQUhpQjs7QUFNckI7QUFDSTtBQUNBO0FBQ0E7QUFIcUI7QUFLekI7QUFDSTtBQUNBO0FBQ0E7QUFIc0I7O0FBTTFCO0FBQ0E7QUFDSTtBQUNBO0FBRmdCOztBQUtwQjtBQUNBOztBQUlBO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUdKO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7O0FBR0o7QUFDQTtBQUNJO0FBQ0E7QUFDQTs7QUFHSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7O0FBR0o7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFSaUI7O0FBV3JCO0FBQ0E7QUFDSTtBQUNBOztBQUdKO0FBQ0E7QUFDSTs7QUFHSjtBQUNJO0FBQ0E7QUFGdUI7QUF4TWQ7O0FBOE1qQjs7Ozs7Ozs7OztBQ2hOQTtBQUNJO0FBQ0k7QUFDQTtBQUNBO0FBSFE7O0FBTVo7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNJO0FBQ0g7QUFDSjs7QUFFRDtBQUNJO0FBQ0g7O0FBRUQ7QUFDSTtBQUNBO0FBQ0g7O0FBRUQ7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNJO0FBQ0k7QUFDQTtBQUNJO0FBQ0E7QUFDSTtBQUNJO0FBQ0E7QUFDQTtBQUNIO0FBQ0Q7QUFDSDtBQUNKO0FBQ0Q7QUFDQTtBQUNBO0FBQ0g7QUFDSjtBQUNKOztBQUVEO0FBQ0k7QUFDQTtBQUNJO0FBQ0E7QUFDSDtBQUNHO0FBQ0E7QUFDSDtBQUNHO0FBQ0E7QUFDSDtBQUNHO0FBQ0E7QUFDSDtBQUNEO0FBQ0E7QUFDSTtBQUNJO0FBQ0E7QUFDSTtBQUNBO0FBQ0g7QUFDRztBQUNBO0FBQ0g7QUFDSjtBQUNKO0FBQ0o7O0FBRUQ7QUFDSTtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDSDtBQUNKOztBQUVEO0FBQ0k7QUFDSTtBQUNIO0FBQ0o7O0FBRUQ7QUFDSTtBQUNBO0FBQ0g7O0FBRUQ7QUFDSTtBQUNBO0FBQ0E7QUFDSTtBQUNIO0FBQ0c7QUFDSDtBQUNEOztBQUVBO0FBQ0E7QUFDSDtBQUNEO0FBQ0k7O0FBRUE7QUFDSTtBQUNJO0FBQ0k7QUFDQTtBQUNIO0FBQ0c7QUFDQTtBQUNJO0FBQ0k7QUFDQTtBQUNKO0FBQ0k7QUFDSTtBQUNBO0FBQ0g7QUFDRDtBQUNKO0FBQ0k7QUFDQTtBQVpSO0FBY0g7QUFDSjtBQUNHO0FBQ0g7QUFDSjtBQUNHO0FBQ0k7QUFDSTtBQUNIO0FBQ0o7QUFDSjtBQUNKOztBQUVEO0FBQ0k7QUFDSDs7QUF6SnFCIiwic291cmNlc0NvbnRlbnQiOlsiLy/pn7PmlYjnrqHnkIblmahcclxuLy8gbXVzaWMg5piv6Z+z5LmQ77ybIHNvdW5k5piv6Z+z5pWIXHJcbnZhciBhdWRpb01nciA9IGNjLkNsYXNzKHtcclxuICAgIGN0b3IgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5fbXVzaWNWb2x1bWUgPSAxOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+mfs+S5kOmfs+mHj+Wkp+Wwj1xyXG4gICAgICAgIHRoaXMuX3NvdW5kVm9sdW1lID0gMTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/pn7PmlYjpn7Pph4/lpKflsI9cclxuICAgICAgICAvL3RoaXMuX2RpY3RfYXVkaW9Db25maWcgPSB7J211c2ljJzp0cnVlLCdzb3VuZCc6dHJ1ZX07ICAgICAgICAgICAgICAgICAgLy/pn7PkuZDpn7PmlYjnmoTphY3nva5cclxuICAgICAgICB0aGlzLl9kaWN0X2F1ZGlvQ29uZmlnID0gbnVsbDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+mfs+S5kOmfs+aViOeahOmFjee9rlxyXG4gICAgICAgIHRoaXMuX2JnTXVzaWNJRCA9IC0xOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v6IOM5pmv6Z+z5LmQXHJcbiAgICAgICAgdGhpcy5fYmdNdXNpY05hbWUgPSBudWxsOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+iDjOaZr+mfs+S5kFxyXG4gICAgICAgIHRoaXMuX2lzUmVsb2FkUGxhdGZvcm0gPSBmYWxzZTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5piv5ZCm5bey57uP5Yqg6L295aSn5Y6F6Z+z5pWIXHJcbiAgICAgICAgdGhpcy5faXNSZWxvYWRHYW1lID0gZmFsc2U7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/mmK/lkKblt7Lnu4/liqDovb3muLjmiI/miL/pl7Tpn7PmlYhcclxuICAgICAgICB0aGlzLl9yZWxvYWRQbGF0Zm9ybVVSTCA9ICcnOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+S9v+eUqOmfs+mikeagvOW8j+eahOWKoOi9vei3r+WKslxyXG4gICAgICAgIHRoaXMuX3JlbG9hZEdhbWVSb29tVVJMID0gJyc7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5L2/55So6Z+z6aKR5qC85byP55qE5Yqg6L296Lev5YqyXHJcbiAgICAgICAgdGhpcy5fZGljdF9hdWRpb1VybCA9IHt9OyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5a2Y5pS+5omA5pyJ6Z+z5pWI55qE5ZCN5a2X5a+55bqU6Lev5b6EXHJcbiAgICAgICAgLy/njq/looPmo4DmtYtcclxuICAgICAgICB0aGlzLl9lbnZpcm9ubWVudENvbmZpcm0oKTtcclxuICAgIH0sXHJcblxyXG4gICAgLy/mkq3mlL7pn7PkuZBcclxuICAgIHBsYXlNdXNpYyA6IGZ1bmN0aW9uIChhdWRpb0lEKSB7XHJcbiAgICAgICAgaWYoIWF1ZGlvSUQpIGF1ZGlvSUQgPSAxOTtcclxuICAgICAgICB2YXIgbXVzaWNOYW1lID0gdGhpcy5nZXRBdWRpb05hbWUoYXVkaW9JRCk7XHJcbiAgICAgICAgaWYodGhpcy5fbXVzaWNWb2x1bWUgPD0gMCl7XHJcbiAgICAgICAgICAgIC8v5pqC5YGc6Z+z5LmQXHJcbiAgICAgICAgICAgIGlmKHRoaXMuX2JnTXVzaWNOYW1lKSB7XHJcbiAgICAgICAgICAgICAgICBjYy5hdWRpb0VuZ2luZS5zdG9wKHRoaXMuX2JnTXVzaWNJRCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9iZ011c2ljTmFtZSA9IG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgLy/lvIDlkK/pn7PkuZBcclxuICAgICAgICAgICAgaWYobXVzaWNOYW1lKXtcclxuICAgICAgICAgICAgICAgIGlmKHRoaXMuX2JnTXVzaWNOYW1lICE9PSBtdXNpY05hbWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAvL+aNoumfs+S5kFxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2JnTXVzaWNOYW1lID0gbXVzaWNOYW1lO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB1cmwgPSB0aGlzLmdldEF1ZGlvKHRoaXMuX2JnTXVzaWNOYW1lKTtcclxuICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKCfmkq3mlL7og4zmma/pn7PkuZAnK3VybClcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9iZ011c2ljSUQgPSBjYy5hdWRpb0VuZ2luZS5wbGF5KHVybCwgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy90aGlzLl9iZ011c2ljSUQgPSBjYy5hdWRpb0VuZ2luZS5wbGF5TXVzaWModXJsLCB0cnVlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAvL2lmKHRoaXMuX2JnTXVzaWNOYW1lKSB7XHJcbiAgICAgICAgICAgICAgICAvLyAgICAvL+aSreaUvuS4iuasoeeahOmfs+S5kFxyXG4gICAgICAgICAgICAgICAgLy8gICAgY2MuYXVkaW9FbmdpbmUucmVzdW1lKHRoaXMuX2JnTXVzaWNJRCk7XHJcbiAgICAgICAgICAgICAgICAvL31cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgLy/mkq3mlL7pn7PmlYhcclxuICAgIHBsYXlTb3VuZCA6IGZ1bmN0aW9uIChhdWRpb0lEKSB7XHJcbiAgICAgICAgaWYodGhpcy5fc291bmRWb2x1bWUgPD0gMCkgcmV0dXJuO1xyXG4gICAgICAgIHZhciB1cmwgPSB0aGlzLmdldEF1ZGlvKHRoaXMuZ2V0QXVkaW9OYW1lKGF1ZGlvSUQpKTtcclxuICAgICAgICAvL2NvbnNvbGUubG9nKCfmkq3mlL7pn7PmlYgnK3VybCk7XHJcbiAgICAgICAgcmV0dXJuIGNjLmF1ZGlvRW5naW5lLnBsYXkodXJsLCBmYWxzZSk7XHJcbiAgICAgICAgLy9yZXR1cm4gY2MuYXVkaW9FbmdpbmUucGxheUVmZmVjdCh1cmwsIGZhbHNlKTtcclxuICAgIH0sXHJcblxyXG4gICAgLy/osIPmlbTpn7PkuZDlpKflsI9cclxuICAgIHNldE11c2ljVm9sdW1lIDogZnVuY3Rpb24gKG51bSkge1xyXG4gICAgICAgIHRoaXMuX211c2ljVm9sdW1lID0gbnVtO1xyXG4gICAgICAgIHRoaXMucGxheU11c2ljKCk7XHJcbiAgICB9LFxyXG5cclxuICAgIC8v6LCD5pW06Z+z5pWI5aSn5bCPXHJcbiAgICBzZXRTb3VuZFZvbHVtZSA6IGZ1bmN0aW9uIChudW0pIHtcclxuICAgICAgICB0aGlzLl9zb3VuZFZvbHVtZSA9IG51bTtcclxuICAgIH0sXHJcblxyXG4gICAgLy/lgZzmraLmn5DkuKrpn7PmlYhcclxuICAgIHN0b3BBdWRpbyA6IGZ1bmN0aW9uIChhdWRpb0lEKSB7XHJcbiAgICAgICAgY2MuYXVkaW9FbmdpbmUuc3RvcChhdWRpb0lEKTtcclxuICAgIH0sXHJcblxyXG4gICAgLy/lgZzmraLpn7PkuZBcclxuICAgIHN0b3BNdXNpYyA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZih0aGlzLl9iZ011c2ljTmFtZSkge1xyXG4gICAgICAgICAgICBjYy5hdWRpb0VuZ2luZS5zdG9wKHRoaXMuX2JnTXVzaWNJRCk7XHJcbiAgICAgICAgICAgIHRoaXMuX2JnTXVzaWNOYW1lID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIC8v6I635Y+W6Z+z6aKR5paH5Lu2XHJcbiAgICBnZXRBdWRpbyA6IGZ1bmN0aW9uIChhdWRpb05hbWUpIHtcclxuICAgICAgICBpZighdGhpcy5fZGljdF9hdWRpb1VybFthdWRpb05hbWVdKSByZXR1cm4gY2MudXJsLnJhdyhHX1RPT0wuZm9ybWF0U3RyKEdfUkVTX1VSTC5hdWRpb1VybCwgYXVkaW9OYW1lKSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RpY3RfYXVkaW9VcmxbYXVkaW9OYW1lXVxyXG4gICAgfSxcclxuXHJcbiAgICAvL+iOt+WPlumfs+S5kOaYr+WQpuato+WcqOaSreaUvlxyXG4gICAgZ2V0SXNQbGF5TXVzaWMgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYodGhpcy5fYmdNdXNpY05hbWUgJiYgdGhpcy5fbXVzaWNWb2x1bWUgPiAwKSByZXR1cm4gdHJ1ZVxyXG4gICAgICAgIHJldHVybiBmYWxzZVxyXG4gICAgfSxcclxuXHJcbiAgICAvLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuICAgIC8v6I635Y+W6Z+z5pWI6YWN572uXHJcbiAgICBnZXRBdWRpb0NvbmZpZyA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZGljdF9hdWRpb0NvbmZpZ1xyXG4gICAgfSxcclxuICAgIC8v6K6+572u6Z+z5pWI6YWN572uXHJcbiAgICBzZXRBdWRpb0NvbmZpZyA6IGZ1bmN0aW9uIChkaWN0KSB7XHJcbiAgICAgICAgdGhpcy5zZXRNdXNpY1ZvbHVtZShkaWN0Lm11c2ljID8gMSA6IDApO1xyXG4gICAgICAgIHRoaXMuc2V0U291bmRWb2x1bWUoZGljdC5zb3VuZCA/IDEgOiAwKTtcclxuICAgICAgICB0aGlzLl9kaWN0X2F1ZGlvQ29uZmlnID0gZGljdDtcclxuICAgIH0sXHJcbiAgICAvL+S/neWtmOmfs+S5kOmFjee9rlxyXG4gICAgc2F2ZU11c2ljQ29uZmlnIDogZnVuY3Rpb24gKGlzUGxheSkge1xyXG4gICAgICAgIHRoaXMuc2V0TXVzaWNWb2x1bWUoaXNQbGF5ID8gMSA6IDApO1xyXG4gICAgICAgIHRoaXMuX2RpY3RfYXVkaW9Db25maWcubXVzaWMgPSBpc1BsYXk7XHJcbiAgICB9LFxyXG4gICAgLy/kv53lrZjpn7PmlYjphY3nva5cclxuICAgIHNhdmVTb3VuZENvbmZpZyA6IGZ1bmN0aW9uIChpc1BsYXkpIHtcclxuICAgICAgICB0aGlzLnNldFNvdW5kVm9sdW1lKGlzUGxheSA/IDEgOiAwKTtcclxuICAgICAgICB0aGlzLl9kaWN0X2F1ZGlvQ29uZmlnLnNvdW5kID0gaXNQbGF5O1xyXG4gICAgfSxcclxuICAgIC8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4gICAgLy/ojrflj5bmn5DkuKrpn7PpopHnmoTlkI3lrZdcclxuICAgIGdldEF1ZGlvTmFtZSA6IGZ1bmN0aW9uIChhdWRpb0lEKSB7XHJcbiAgICAgICAgdmFyIHRhYmxlT2JqID0gR0cudGFibGVNZ3IuZ2V0VGFibGUoR19SRVNfVVJMLmRpY3RfdGFibGVzTmFtZS5hdWRpb05hbWUpO1xyXG4gICAgICAgIHZhciBkYXRhID0gdGFibGVPYmouZ2V0RGF0YUJ5SUQoYXVkaW9JRCk7XHJcbiAgICAgICAgaWYoZGF0YSkgcmV0dXJuIGRhdGEuYXVkaW9OYW1lO1xyXG4gICAgICAgIHJldHVybiBudWxsXHJcbiAgICB9LFxyXG5cclxuICAgIC8v6aKE5Yqg6L296Z+z6aKR6LWE5rqQXHJcbiAgICAvL3JlbG9hZEF1ZGlvIDogZnVuY3Rpb24gKGNhbGxCYWNrKSB7XHJcbiAgICAvLyAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICAvLyAgICBjYy5sb2FkZXIubG9hZFJlc0RpcignU291bmRzJywgZnVuY3Rpb24gKGVyciwgYXVkaW9MaXN0KSB7XHJcbiAgICAvLyAgICAgICAgdmFyIGlzT2sgPSBmYWxzZTtcclxuICAgIC8vICAgICAgICBpZighZXJyKXtcclxuICAgIC8vICAgICAgICAgICAgdmFyIGNvbnRlbnQgPSBhdWRpb0xpc3RbMF07XHJcbiAgICAvLyAgICAgICAgICAgIHZhciBpbmRleCA9IGNvbnRlbnQubGFzdEluZGV4T2YoJy8nKTtcclxuICAgIC8vICAgICAgICAgICAgc2VsZi5fYmFzZVBsYXRmb3JtVXJsID0gY29udGVudC5zdWJzdHJpbmcoMCwgaW5kZXgrMSkrc2VsZi5fYXVkaW9Gb3JtYXRTdHI7XHJcbiAgICAvLyAgICAgICAgICAgIGlzT2sgPSB0cnVlO1xyXG4gICAgLy8gICAgICAgIH1lbHNlIHtcclxuICAgIC8vICAgICAgICAgICAgLy/liqDovb3pn7PmlYjlj5HnlJ/pl67pophcclxuICAgIC8vICAgICAgICB9XHJcbiAgICAvLyAgICAgICAgaWYoY2FsbEJhY2spe1xyXG4gICAgLy8gICAgICAgICAgICBjYWxsQmFjayhpc09rKTtcclxuICAgIC8vICAgICAgICAgICAgY2FsbEJhY2sgPSBudWxsO1xyXG4gICAgLy8gICAgICAgIH1cclxuICAgIC8vICAgIH0pXHJcbiAgICAvL30sXHJcblxyXG4gICAgLy/liqDovb3lpKfljoXpn7PmlYhcclxuICAgIHJlbG9hZFBsYXRmb3JtQXVkaW8gOiBmdW5jdGlvbiAoY2FsbEJhY2spIHtcclxuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICAgICAgY2MubG9hZGVyLmxvYWRSZXNEaXIodGhpcy5fcmVsb2FkUGxhdGZvcm1VUkwsIGZ1bmN0aW9uIChlcnIsIGF1ZGlvTGlzdCkge1xyXG4gICAgICAgICAgICB2YXIgaXNPayA9IGZhbHNlO1xyXG4gICAgICAgICAgICBpZighZXJyKXtcclxuICAgICAgICAgICAgICAgIHZhciBhdWRpb1VybCwgdXJsRW5kLGF1ZGlvTmFtZTtcclxuICAgICAgICAgICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCBhdWRpb0xpc3QubGVuZ3RoOyBpICsrKXtcclxuICAgICAgICAgICAgICAgICAgICBhdWRpb1VybCA9IGF1ZGlvTGlzdFtpXVxyXG4gICAgICAgICAgICAgICAgICAgIHVybEVuZCA9IGF1ZGlvVXJsLnN1YnN0cmluZyhhdWRpb1VybC5sYXN0SW5kZXhPZignLycpKzEsIGF1ZGlvVXJsLmxlbmd0aCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYXVkaW9OYW1lID0gdXJsRW5kLnNwbGl0KCcuJylbMF07XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5fZGljdF9hdWRpb1VybFthdWRpb05hbWVdID0gYXVkaW9Vcmw7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBzZWxmLl9pc1JlbG9hZFBsYXRmb3JtID0gdHJ1ZTtcclxuICAgICAgICAgICAgfWVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy/liqDovb3pn7PmlYjlj5HnlJ/pl67pophcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZihjYWxsQmFjayl7XHJcbiAgICAgICAgICAgICAgICBjYWxsQmFjayhpc09rKTtcclxuICAgICAgICAgICAgICAgIGNhbGxCYWNrID0gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICB9LFxyXG5cclxuICAgIC8v5Yqg6L295ri45oiP5oi/6Ze05YaF55qE6Z+z5pWIXHJcbiAgICByZWxvYWRHYW1lQXVkaW8gOiBmdW5jdGlvbiAoY2FsbEJhY2spIHtcclxuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICAgICAgY2MubG9hZGVyLmxvYWRSZXNEaXIodGhpcy5fcmVsb2FkR2FtZVJvb21VUkwsIGZ1bmN0aW9uIChlcnIsIGF1ZGlvTGlzdCkge1xyXG4gICAgICAgICAgICBpZighZXJyKXtcclxuICAgICAgICAgICAgICAgIC8v5rKh5pyJ5Yqg6L296ZSZ6K+vXHJcbiAgICAgICAgICAgICAgICB2YXIgYXVkaW9VcmwsIHVybEVuZCxhdWRpb05hbWU7XHJcbiAgICAgICAgICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgYXVkaW9MaXN0Lmxlbmd0aDsgaSArKyl7XHJcbiAgICAgICAgICAgICAgICAgICAgYXVkaW9VcmwgPSBhdWRpb0xpc3RbaV1cclxuICAgICAgICAgICAgICAgICAgICB1cmxFbmQgPSBhdWRpb1VybC5zdWJzdHJpbmcoYXVkaW9VcmwubGFzdEluZGV4T2YoJy8nKSsxLCBhdWRpb1VybC5sZW5ndGgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGF1ZGlvTmFtZSA9IHVybEVuZC5zcGxpdCgnLicpWzBdO1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuX2RpY3RfYXVkaW9VcmxbYXVkaW9OYW1lXSA9IGF1ZGlvVXJsO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgc2VsZi5faXNSZWxvYWRHYW1lID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZihjYWxsQmFjayl7XHJcbiAgICAgICAgICAgICAgICBjYWxsQmFjaygpO1xyXG4gICAgICAgICAgICAgICAgY2FsbEJhY2sgPSBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgIH0sXHJcbiAgICBnZXRJc1JlbG9hZFBsYXRmb3JtIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9pc1JlbG9hZFBsYXRmb3JtXHJcbiAgICB9LFxyXG4gICAgZ2V0SXNSZWxvYWRHYW1lIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9pc1JlbG9hZEdhbWVcclxuICAgIH0sXHJcblxyXG4gICAgLy/lubPlj7DpibTlrppcclxuICAgIF9lbnZpcm9ubWVudENvbmZpcm0gOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgLy9zd2l0Y2ggKGNjLnN5cy5vcyl7XHJcbiAgICAgICAgLy8gICAgY2FzZSBjYy5zeXMuT1NfQU5EUk9JRDpcclxuICAgICAgICAvLyAgICAgICAgLy9hbmRyb2lk5omL5py655Sob2dnXHJcbiAgICAgICAgLy8gICAgICAgIC8vdGhpcy5fcmVsb2FkUGxhdGZvcm1VUkwgPSAnU291bmRzL29nZ19wbGF0Zm9ybSc7XHJcbiAgICAgICAgLy8gICAgICAgIC8vdGhpcy5fcmVsb2FkR2FtZVJvb21VUkwgPSAnU291bmRzL29nZ19nYW1lUm9vbSc7XHJcbiAgICAgICAgLy8gICAgICAgIHRoaXMuX3JlbG9hZFBsYXRmb3JtVVJMID0gJ1NvdW5kcy9tcDNfcGxhdGZvcm0nO1xyXG4gICAgICAgIC8vICAgICAgICB0aGlzLl9yZWxvYWRHYW1lUm9vbVVSTCA9ICdTb3VuZHMvbXAzX2dhbWVSb29tJztcclxuICAgICAgICAvLyAgICAgICAgYnJlYWtcclxuICAgICAgICAvLyAgICBjYXNlIGNjLnN5cy5PU19JT1M6XHJcbiAgICAgICAgLy8gICAgICAgIC8vaW9z5omL5py655SobXAzXHJcbiAgICAgICAgLy8gICAgICAgIHRoaXMuX3JlbG9hZFBsYXRmb3JtVVJMID0gJ1NvdW5kcy9tcDNfcGxhdGZvcm0nO1xyXG4gICAgICAgIC8vICAgICAgICB0aGlzLl9yZWxvYWRHYW1lUm9vbVVSTCA9ICdTb3VuZHMvbXAzX2dhbWVSb29tJztcclxuICAgICAgICAvLyAgICAgICAgYnJlYWtcclxuICAgICAgICAvLyAgICBkZWZhdWx0OlxyXG4gICAgICAgIC8vICAgICAgICBicmVha1xyXG4gICAgICAgIC8vfVxyXG4gICAgICAgIGlmKGNjLnN5cy5pc05hdGl2ZSl7XHJcbiAgICAgICAgICAgIHRoaXMuX3JlbG9hZFBsYXRmb3JtVVJMID0gJ1NvdW5kcy9tcDNfcGxhdGZvcm0nO1xyXG4gICAgICAgICAgICB0aGlzLl9yZWxvYWRHYW1lUm9vbVVSTCA9ICdTb3VuZHMvbXAzX2dhbWVSb29tJztcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgdmFyIGF1ZGlvID0gbmV3IEF1ZGlvKCk7XHJcbiAgICAgICAgICAgIGlmKGF1ZGlvLmNhblBsYXlUeXBlKFwiYXVkaW8vbXAzXCIpKXtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3JlbG9hZFBsYXRmb3JtVVJMID0gJ1NvdW5kcy9tcDNfcGxhdGZvcm0nO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fcmVsb2FkR2FtZVJvb21VUkwgPSAnU291bmRzL21wM19nYW1lUm9vbSc7XHJcbiAgICAgICAgICAgIH1lbHNlIGlmKGF1ZGlvLmNhblBsYXlUeXBlKFwiYXVkaW8vb2dnXCIpKXtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3JlbG9hZFBsYXRmb3JtVVJMID0gJ1NvdW5kcy9vZ2dfcGxhdGZvcm0nO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fcmVsb2FkR2FtZVJvb21VUkwgPSAnU291bmRzL29nZ19nYW1lUm9vbSc7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIC8vIHJlbGVhc2VBdWRpbyA6IGZ1bmN0aW9uICgpIHtcclxuICAgIC8vICAgICBjYy5sb2FkZXIucmVsZWFzZShjYy51cmwucmF3KFwicmVzb3VyY2VzL3NvdW5kcy9cIiArIHVybCkpO1xyXG4gICAgLy8gfVxyXG59KVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBhdWRpb01ncjsiLCIvL+eugOWNleWfuuexu++8jOWunueOsOaMiemSrueahOazqOWGjOS4jumHiuaUvlxyXG5cclxuY2MuQ2xhc3Moe1xyXG4gICAgZXh0ZW5kczogY2MuQ29tcG9uZW50LFxyXG4gICAgX2xpc3RfcmVnaXN0ZXJCdG4gOiBudWxsLCAgICAgICAgICAgICAgICAgICAvL+azqOWGjOS6i+S7tueahOaMiemSrumbhuWQiFxyXG4gICAgcHJvcGVydGllczoge1xyXG5cclxuICAgIH0sXHJcblxyXG4gICAgLy8gdXNlIHRoaXMgZm9yIGluaXRpYWxpemF0aW9uXHJcbiAgICBvbkxvYWQ6IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICB9LFxyXG5cclxuICAgIC8v5rOo5YaM5oyJ6ZKu54K55Ye75pWI5p6cXHJcbiAgICByZWdpc3RlckJ1dHRvbiA6IGZ1bmN0aW9uIChub2RlLCBjYWxsQmFjaywgdGFyZ2V0LCB1c2VyRGF0YSwgaXNOb1NjYWxlKSB7XHJcbiAgICAgICAgaWYoIW5vZGUpIHJldHVybjtcclxuICAgICAgICBpZighdGhpcy5fbGlzdF9yZWdpc3RlckJ0bikgdGhpcy5fbGlzdF9yZWdpc3RlckJ0biA9IFtdO1xyXG4gICAgICAgIG5vZGUuX2lzVG91Y2hFbmFibGVkRXggPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuX2xpc3RfcmVnaXN0ZXJCdG4ucHVzaChbbm9kZSwgY2FsbEJhY2ssIHRhcmdldF0pO1xyXG4gICAgICAgIG5vZGUub24oY2MuTm9kZS5FdmVudFR5cGUuVE9VQ0hfU1RBUlQsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICAvL2lmKGV2ZW50LnRhcmdldC5faXNUb3VjaEVuYWJsZWRFeCkgZXZlbnQudGFyZ2V0LnNjYWxlID0gR19Db25maWdfY2xhc3NpYy5zY2FsZV9idXR0b25Ub3VjaDtcclxuICAgICAgICAgICAgaWYoZXZlbnQudGFyZ2V0Ll9pc1RvdWNoRW5hYmxlZEV4KSB7XHJcbiAgICAgICAgICAgICAgICBpZighaXNOb1NjYWxlKXtcclxuICAgICAgICAgICAgICAgICAgICBpZighZXZlbnQudGFyZ2V0Lmxhc3RTY2FsZSkgZXZlbnQudGFyZ2V0Lmxhc3RTY2FsZSA9IGV2ZW50LnRhcmdldC5zY2FsZTtcclxuICAgICAgICAgICAgICAgICAgICBldmVudC50YXJnZXQuc2NhbGUgPSBldmVudC50YXJnZXQubGFzdFNjYWxlICogMC45O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgR0cuYXVkaW9NZ3IucGxheVNvdW5kKDE3KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sIHRhcmdldCk7XHJcbiAgICAgICAgbm9kZS5vbihjYy5Ob2RlLkV2ZW50VHlwZS5UT1VDSF9FTkQsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICBpZihldmVudC50YXJnZXQubGFzdFNjYWxlKSBldmVudC50YXJnZXQuc2NhbGUgPSBldmVudC50YXJnZXQubGFzdFNjYWxlXHJcbiAgICAgICAgICAgIGlmKGV2ZW50LnRhcmdldC5faXNUb3VjaEVuYWJsZWRFeCkgY2FsbEJhY2suY2FsbCh0YXJnZXQsIGV2ZW50LCB1c2VyRGF0YSk7XHJcbiAgICAgICAgfSwgdGFyZ2V0KTtcclxuICAgICAgICBub2RlLm9uKGNjLk5vZGUuRXZlbnRUeXBlLlRPVUNIX0NBTkNFTCwgZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgIGlmKGV2ZW50LnRhcmdldC5sYXN0U2NhbGUpIGV2ZW50LnRhcmdldC5zY2FsZSA9IGV2ZW50LnRhcmdldC5sYXN0U2NhbGVcclxuICAgICAgICB9LCB0YXJnZXQpO1xyXG4gICAgfSxcclxuICAgIC8v6K6+572u5oyJ6ZKu5piv5ZCm5Y+v55SoXHJcbiAgICBzZXRCdG5FbmFibGUgOiBmdW5jdGlvbiAobm9kZSwgaXNFbmFibGUsIGlzTm9HcmF5KSB7XHJcbiAgICAgICAgaWYoaXNFbmFibGUpe1xyXG4gICAgICAgICAgICBub2RlLm9wYWNpdHkgPSAyNTU7XHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIGlmKCFpc05vR3JheSkgbm9kZS5vcGFjaXR5ID0gMjU1ICogR19Db25maWdfY29tbW9uLmJ0bkdyYXlWYWx1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGJ0biA9IG5vZGUuZ2V0Q29tcG9uZW50KGNjLkJ1dHRvbik7XHJcbiAgICAgICAgaWYoYnRuKWJ0bi5lbmFibGVkID0gaXNFbmFibGU7XHJcbiAgICAgICAgbm9kZS5faXNUb3VjaEVuYWJsZWRFeCA9IGlzRW5hYmxlO1xyXG4gICAgfSxcclxuXHJcbiAgICAvL+iOt+WPluaYr+WQpuWPr+eUqFxyXG4gICAgZ2V0SXNCdG5FbmFibGUgOiBmdW5jdGlvbiAobm9kZSkge1xyXG4gICAgICAgIHJldHVybiBub2RlLl9pc1RvdWNoRW5hYmxlZEV4XHJcbiAgICB9LFxyXG5cclxuICAgIC8v6YeK5pS+5LqL5Lu2LOi/memHjOazqOWGjOeahOaJjeiDveWcqOi/memHjOmHiuaUvlxyXG4gICAgcmVsZWFzZUJ1dHRvbkV2ZW50IDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmKCF0aGlzLl9saXN0X3JlZ2lzdGVyQnRuKSByZXR1cm47XHJcbiAgICAgICAgdmFyIHBhcm0xLHBhcm0yLHBhcm0zO1xyXG4gICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCB0aGlzLl9saXN0X3JlZ2lzdGVyQnRuLmxlbmd0aDsgaSArKyl7XHJcbiAgICAgICAgICAgIHBhcm0xID0gdGhpcy5fbGlzdF9yZWdpc3RlckJ0bltpXVswXTtcclxuICAgICAgICAgICAgcGFybTIgPSB0aGlzLl9saXN0X3JlZ2lzdGVyQnRuW2ldWzFdO1xyXG4gICAgICAgICAgICBwYXJtMyA9IHRoaXMuX2xpc3RfcmVnaXN0ZXJCdG5baV1bMl07XHJcbiAgICAgICAgICAgIHBhcm0xLm9mZihjYy5Ob2RlLkV2ZW50VHlwZS5UT1VDSF9TVEFSVCwgcGFybTIsIHBhcm0zKTtcclxuICAgICAgICAgICAgcGFybTEub2ZmKGNjLk5vZGUuRXZlbnRUeXBlLlRPVUNIX0VORCwgcGFybTIsIHBhcm0zKTtcclxuICAgICAgICAgICAgcGFybTEub2ZmKGNjLk5vZGUuRXZlbnRUeXBlLlRPVUNIX0NBTkNFTCwgcGFybTIsIHBhcm0zKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5fbGlzdF9yZWdpc3RlckJ0biA9IG51bGw7XHJcbiAgICB9LFxyXG5cclxuICAgIG9uRGVzdHJveSA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLnJlbGVhc2VCdXR0b25FdmVudCgpO1xyXG4gICAgfSxcclxuXHJcbiAgICAvLyBjYWxsZWQgZXZlcnkgZnJhbWUsIHVuY29tbWVudCB0aGlzIGZ1bmN0aW9uIHRvIGFjdGl2YXRlIHVwZGF0ZSBjYWxsYmFja1xyXG4gICAgLy8gdXBkYXRlOiBmdW5jdGlvbiAoZHQpIHtcclxuXHJcbiAgICAvLyB9LFxyXG59KTtcclxuIiwiLy/lvLnnqpfliJfooajnlYzpnaLnmoTniLbnsbtcclxuXHJcblxyXG5jYy5DbGFzcyh7XHJcbiAgICBleHRlbmRzOiByZXF1aXJlKCdCYXNlVUknKSxcclxuXHJcbiAgICBwcm9wZXJ0aWVzOiB7XHJcbiAgICAgICAgX3BhcmVudENvbXAgOiBudWxsLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/lrrnlmajnmoTohJrmnKxcclxuXHJcbiAgICAgICAgbm9kZV9jbG9zZUJ0biA6IHtcclxuICAgICAgICAgICAgZGVmYXVsdCA6IG51bGwsXHJcbiAgICAgICAgICAgIHR5cGUgOiBjYy5Ob2RlLFxyXG4gICAgICAgICAgICBkaXNwbGF5TmFtZSA6ICflhbPpl63mjInpkq4nXHJcbiAgICAgICAgfSxcclxuICAgICAgICBwcmVmYWJfbGVmdEJ1dHRvbiA6IHtcclxuICAgICAgICAgICAgZGVmYXVsdCA6IG51bGwsXHJcbiAgICAgICAgICAgIHR5cGUgOiBjYy5QcmVmYWIsXHJcbiAgICAgICAgICAgIGRpc3BsYXlOYW1lIDogJ+W3pui+ueaMiemSrumihOWItuS9kydcclxuICAgICAgICB9LFxyXG4gICAgICAgIGNvbXBfbGVmdEJ0bkNvbnRhaW5lciA6IHtcclxuICAgICAgICAgICAgZGVmYXVsdCA6IG51bGwsXHJcbiAgICAgICAgICAgIHR5cGUgOiByZXF1aXJlKCdPYmpfZGVhbFNjcm9sbCcpLFxyXG4gICAgICAgICAgICBkaXNwbGF5TmFtZSA6ICflt6bovrnmjInpkq7lrrnlmagnXHJcbiAgICAgICAgfSxcclxuICAgICAgICBwcmVmYWJfaXRlbSA6IHtcclxuICAgICAgICAgICAgZGVmYXVsdCA6IG51bGwsXHJcbiAgICAgICAgICAgIHR5cGUgOiBjYy5QcmVmYWIsXHJcbiAgICAgICAgICAgIGRpc3BsYXlOYW1lIDogJ+aVsOaNruadoeebridcclxuICAgICAgICB9LFxyXG4gICAgICAgIGNvbXBfaXRlbUNvbnRhaW5lciA6IHtcclxuICAgICAgICAgICAgZGVmYXVsdCA6IG51bGwsXHJcbiAgICAgICAgICAgIHR5cGUgOiByZXF1aXJlKCdPYmpfZGVhbFNjcm9sbCcpLFxyXG4gICAgICAgICAgICBkaXNwbGF5TmFtZSA6ICfmnaHnm67lrrnlmagnXHJcbiAgICAgICAgfSxcclxuICAgIH0sXHJcblxyXG4gICAgLy8gdXNlIHRoaXMgZm9yIGluaXRpYWxpemF0aW9uXHJcbiAgICBvbkxvYWQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLl9yZWdpc3RlckNsb3NlRXZlbnQoKTtcclxuICAgIH0sXHJcblxyXG4gICAgYmluZENvbnRhaW5lciA6IGZ1bmN0aW9uIChjb21wKSB7XHJcbiAgICAgICAgdGhpcy5fcGFyZW50Q29tcCA9IGNvbXA7XHJcbiAgICB9LFxyXG5cclxuICAgIHNob3dMYXllciA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLl9zdXBlcigpO1xyXG5cclxuICAgICAgICBpZih0aGlzLl9wYXJlbnRDb21wICYmIHRoaXMuX3BhcmVudENvbXAuc2V0R3JheUxheWVySXNTaG93KSB0aGlzLl9wYXJlbnRDb21wLnNldEdyYXlMYXllcklzU2hvdyh0cnVlKTtcclxuICAgIH0sXHJcblxyXG4gICAgaGlkZUxheWVyIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuX3N1cGVyKCk7XHJcblxyXG4gICAgICAgIGlmKHRoaXMuX3BhcmVudENvbXAgJiYgdGhpcy5fcGFyZW50Q29tcC5zZXRHcmF5TGF5ZXJJc1Nob3cpIHRoaXMuX3BhcmVudENvbXAuc2V0R3JheUxheWVySXNTaG93KGZhbHNlKTtcclxuICAgIH0sXHJcblxyXG4gICAgc2V0RGF0YSA6IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICB9LFxyXG5cclxuICAgIF9yZWdpc3RlckNsb3NlRXZlbnQgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYodGhpcy5ub2RlX2Nsb3NlQnRuKSB0aGlzLnJlZ2lzdGVyQnV0dG9uKHRoaXMubm9kZV9jbG9zZUJ0biwgdGhpcy5fb25DbGlja19jbG9zZSwgdGhpcyk7XHJcbiAgICB9LFxyXG5cclxuICAgIF9vbkNsaWNrX2Nsb3NlIDogZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgdGhpcy5oaWRlTGF5ZXIoKTtcclxuICAgIH0sXHJcblxyXG4gICAgLy8gY2FsbGVkIGV2ZXJ5IGZyYW1lLCB1bmNvbW1lbnQgdGhpcyBmdW5jdGlvbiB0byBhY3RpdmF0ZSB1cGRhdGUgY2FsbGJhY2tcclxuICAgIC8vIHVwZGF0ZTogZnVuY3Rpb24gKGR0KSB7XHJcblxyXG4gICAgLy8gfSxcclxufSk7XHJcbiIsIi8v566h55CG5Zmo55qE54i257G7XHJcblxyXG5jYy5DbGFzcyh7XHJcbiAgICBleHRlbmRzOiBjYy5Db21wb25lbnQsXHJcblxyXG4gICAgcHJvcGVydGllczoge1xyXG4gICAgICAgIF9pc0FETGltaXQgOiBudWxsLCAgICAgICAgICAgICAgICAgIC8v5piv5ZCm6ZmQ5Yi25YWs5ZGK55qE5pKt5pS+XHJcbiAgICB9LFxyXG5cclxuICAgIC8vIHVzZSB0aGlzIGZvciBpbml0aWFsaXphdGlvblxyXG4gICAgb25Mb2FkOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgR0cud2ViSGFuZGxlci5hZGFwdFNjZW5lU2l6ZSgpO1xyXG4gICAgICAgIEdHLmN1ck1nciA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy5hZGRMb25nTGlzdGVuKCk7XHJcbiAgICAgICAgR0cuc2V0SXNMb2FkaW5nKGZhbHNlKTtcclxuXHJcbiAgICAgICAgdGhpcy5faXNBRExpbWl0ID0gbnVsbDtcclxuICAgIH0sXHJcblxyXG4gICAgLy/lnKjmuLjmiI/mmoLlgZznmoTml7blgJnvvIzov5jpnIDopoHmjIHnu63mm7TmlrDov5vmiL/kv6Hmga9cclxuICAgIHVwZGF0ZUVudGVySG9tZURhdGEgOiBmdW5jdGlvbiAocmVjdkRhdGEpIHtcclxuICAgICAgICBpZighdGhpcy5fZW50ZXJIb21lRGF0YSkgcmV0dXJuO1xyXG4gICAgICAgIGlmKHRoaXMuX2VudGVySG9tZURhdGEubWF0Y2guYmVnaW5UaW1lTmV4dCAhPSByZWN2RGF0YS5tYXRjaC5iZWdpblRpbWVOZXh0KXtcclxuICAgICAgICAgICAgLy/ov5vlhaXliLDkuIvkuIDlsYDmr5TotZtcclxuICAgICAgICAgICAgdGhpcy5faXNQYXVzZU92ZXJNYXRjaCA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuX2VudGVySG9tZURhdGEuc2VhdHMgPSByZWN2RGF0YS5zZWF0cztcclxuICAgICAgICB0aGlzLl9lbnRlckhvbWVEYXRhLm1hdGNoLmRlYWxlciA9IHJlY3ZEYXRhLm1hdGNoLmRlYWxlcjtcclxuICAgICAgICB0aGlzLl9lbnRlckhvbWVEYXRhLm1hdGNoLmJlZ2luVGltZU5leHQgPSByZWN2RGF0YS5tYXRjaC5iZWdpblRpbWVOZXh0O1xyXG4gICAgICAgIHRoaXMuX2VudGVySG9tZURhdGEubWF0Y2guc2V0dGxlVGltZSA9IHJlY3ZEYXRhLm1hdGNoLnNldHRsZVRpbWU7XHJcbiAgICAgICAgaWYocmVjdkRhdGEucG9rZXIpIHRoaXMuX2VudGVySG9tZURhdGEucG9rZXIgPSByZWN2RGF0YS5wb2tlcjtcclxuICAgIH0sXHJcbiAgICAvL+S9v+eUqOacgOaWsOeahOi/m+aIv+S/oeaBr+WIt+aWsOmhtemdolxyXG4gICAgcmVmcmVzaEhvbWUgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYoR19Db25maWdfY29tbW9uLmlzTG9jYWwpIHJldHVybjtcclxuICAgICAgICBpZih0aGlzLm5ldF9zZXRIb21lRGF0YSAmJiB0aGlzLl9lbnRlckhvbWVEYXRhKSB0aGlzLm5ldF9zZXRIb21lRGF0YSh0aGlzLl9lbnRlckhvbWVEYXRhKTtcclxuICAgIH0sXHJcbiAgICAvL+W9k+aaguWBnOeahOaXtuWAmeinpuWPkeivpeWHveaVsFxyXG4gICAgd2hlblBhdXNlR2FtZSA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLl9pc1BhdXNlT3Zlck1hdGNoID0gZmFsc2U7XHJcbiAgICB9LFxyXG4gICAgLy/lvZPmgaLlpI3muLjmiI/nmoTml7blgJnop6blj5Hor6Xlh73mlbBcclxuICAgIHdoZW5SZXN1bWVHYW1lIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmKHRoaXMuY29tcF91aUxheWVyKXtcclxuICAgICAgICAgICAgdGhpcy5jb21wX3VpTGF5ZXIuY2xvc2VBbGxVSSgpO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICAvL+iuvue9rue7k+eul+S/oeaBr+eahOaVsOaNrlxyXG4gICAgc2V0QmV0dGluZ0VuZEluZm8gOiBmdW5jdGlvbiAocmVjdkRhdGEpIHtcclxuXHJcbiAgICB9LFxyXG5cclxuICAgIC8v5q+P5bGA5byA5bGA77yM5pWI6aqM546p5a626Ieq5bex55qE5pWw5o2u5piv5ZCm5q2j5bi4XHJcbiAgICBjaGVja015c2VsZkluZm8gOiBmdW5jdGlvbiAoaW5mbykge1xyXG4gICAgICAgIGlmKCFpbmZvIHx8IGluZm8ubGVuZ3RoIDwgMSkge1xyXG4gICAgICAgICAgICBHRy50aXBzTWdyLnNob3dDb25maXJtVGlwX09ORShHX0NISU5FU0Uubm9NeXNlbGYsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIEdHLmV4aXRHYW1lKCk7XHJcbiAgICAgICAgICAgIH0uYmluZCh0aGlzKSk7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZVxyXG4gICAgICAgIH1lbHNlIHJldHVybiB0cnVlXHJcbiAgICB9LFxyXG4gICAgXHJcbiAgICBzZXRBZExpbWl0IDogZnVuY3Rpb24gKGlzTGltaXQpIHtcclxuICAgICAgICB0aGlzLl9pc0FETGltaXQgPSBpc0xpbWl0O1xyXG4gICAgfSxcclxuXHJcbiAgICBnZXRBZElzTGltaXQgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2lzQURMaW1pdFxyXG4gICAgfSxcclxuXHJcbiAgICAvLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblxyXG4gICAgLy/mt7vliqDplb/nm5HlkKxcclxuICAgIGFkZExvbmdMaXN0ZW4gOiBmdW5jdGlvbigpe1xyXG4gICAgICAgIC8v5byC5Zyw55m76ZmGXHJcbiAgICAgICAgR0cuc29ja2V0TWdyLnJlZ2lzdGVyTG9uZyhOZXRUeXBlLnJfcGFzc2l2ZU91dCwgdGhpcy5uZXRfcGFzc2l2ZU91dC5iaW5kKHRoaXMpKTtcclxuICAgICAgICAvL+WNleeLrOeahHRpcFxyXG4gICAgICAgIEdHLnNvY2tldE1nci5yZWdpc3RlckxvbmcoTmV0VHlwZS5yX3RpcHMsIHRoaXMubmV0X3RpcERhdGEuYmluZCh0aGlzKSk7XHJcbiAgICAgICAgLy/ot5Hpqaznga9cclxuICAgICAgICBHRy5zb2NrZXRNZ3IucmVnaXN0ZXJMb25nKE5ldFR5cGUucl9nZXRBbm5vdW5jZW1lbnQsIHRoaXMubmV0X2dldEFubm91bmNlbWVudC5iaW5kKHRoaXMpKTtcclxuICAgICAgICAvL+a4uOaIsumVv+aXtumXtOayoeacieaTjeS9nFxyXG4gICAgICAgIEdHLnNvY2tldE1nci5yZWdpc3RlckxvbmcoTmV0VHlwZS5yX2lkbGVUaW1lT3V0LCB0aGlzLm5ldF9pZGxlVGltZU91dC5iaW5kKHRoaXMpKTtcclxuICAgIH0sXHJcbiAgICAvL3RpcCDljZXni6zlj5HpgIHov4fmnaXnmoTkuovku7ZcclxuICAgIG5ldF90aXBEYXRhIDogZnVuY3Rpb24gKHJlY3ZEYXRhKSB7XHJcbiAgICAgICAgLy/mnKrnmbvpmYbvvIzor7fnmbvpmYZcclxuICAgICAgICBpZihyZWN2RGF0YS5jb2RlID09IEdfVFlQRS5zZXJ2ZXJDb2RlVHlwZS5uZWVkTG9naW4pe1xyXG4gICAgICAgICAgICBHRy50aXBzTWdyLnNob3dDb25maXJtVGlwX09ORShyZWN2RGF0YS50aXAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIEdHLmxvZ2luU29ja2V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZihHRy5zb2NrZXRNZ3IuZ2V0SXNDb25uZWN0ZWQoKSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIEdHLmV4aXRIb21lKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIEdHLmV4aXRHYW1lKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0uYmluZCh0aGlzKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIC8v5byC5Zyw55m76ZmGXHJcbiAgICBuZXRfcGFzc2l2ZU91dCA6IGZ1bmN0aW9uIChyZWN2RGF0YSkge1xyXG4gICAgICAgIEdHLnNvY2tldE1nci5zZXRUaW1lT3V0TGltaXQodHJ1ZSk7XHJcbiAgICAgICAgR0cudGlwc01nci5zaG93Q29uZmlybVRpcF9PTkUocmVjdkRhdGEudGlwLnRpcCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBHRy5leGl0R2FtZSgpO1xyXG4gICAgICAgIH0uYmluZCh0aGlzKSk7XHJcbiAgICB9LFxyXG4gICAgLy/mnInlhazlkYpcclxuICAgIG5ldF9nZXRBbm5vdW5jZW1lbnQgOiBmdW5jdGlvbiAocmVjdkRhdGEpIHtcclxuICAgICAgICB2YXIgdGlwID0gcmVjdkRhdGEudGlwO1xyXG4gICAgICAgIGlmKHRpcC5jb2RlICE9IEdfVFlQRS5zZXJ2ZXJDb2RlVHlwZS5zdWNjZXNzKSB7XHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHRpcC50aXApO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvL3JlY3ZEYXRhLmFubm91bmNlbWVudFR5cGVcclxuICAgICAgICAvL3JlY3ZEYXRhLnRpdGxlXHJcbiAgICAgICAgLy9yZWN2RGF0YS5jb250ZW50XHJcbiAgICAgICAgaWYodGhpcy5faXNBRExpbWl0KSByZXR1cm47XHJcbiAgICAgICAgR0cudGlwc01nci5hZGROb3RpY2UocmVjdkRhdGEuY29udGVudCk7XHJcbiAgICB9LFxyXG4gICAgLy/nmb7kurrigJTigJTmuLjmiI/kuK3plb/ml7bpl7TmsqHmnInlgZrmk43kvZxcclxuICAgIG5ldF9pZGxlVGltZU91dCA6IGZ1bmN0aW9uIChyZWN2RGF0YSkge1xyXG5cclxuICAgICAgICBHRy50aXBzTWdyLnNob3dDb25maXJtVGlwX09ORShyZWN2RGF0YS50aXAudGlwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIEdHLmV4aXRIb21lKCk7XHJcbiAgICAgICAgfS5iaW5kKHRoaXMpKTtcclxuICAgIH0sXHJcblxyXG4gICAgb25EZXN0cm95IDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIEdHLnNvY2tldE1nci5jYW5jZWxBbGxMb25nTGlzdGVuKCk7XHJcbiAgICB9LFxyXG5cclxuICAgIC8vIGNhbGxlZCBldmVyeSBmcmFtZSwgdW5jb21tZW50IHRoaXMgZnVuY3Rpb24gdG8gYWN0aXZhdGUgdXBkYXRlIGNhbGxiYWNrXHJcbiAgICAvLyB1cGRhdGU6IGZ1bmN0aW9uIChkdCkge1xyXG5cclxuICAgIC8vIH0sXHJcbn0pO1xyXG4iLCIvL+aJgOacieaYvuekuueahFVJ55qE54i257G7XHJcblxyXG5jYy5DbGFzcyh7XHJcbiAgICBleHRlbmRzOiByZXF1aXJlKCdBdXRvRGVhbGluZycpLFxyXG5cclxuICAgIHByb3BlcnRpZXM6IHtcclxuICAgICAgICBfaXNSZWxlYXNlIDogbnVsbCwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+aYr+WQpuWcqOWFs+mXreeahOaXtuWAmemHiuaUvlxyXG4gICAgICAgIF91aU5hbWUgOiBudWxsLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL3Vp5ZCN5a2XXHJcbiAgICB9LFxyXG5cclxuICAgIC8vIHVzZSB0aGlzIGZvciBpbml0aWFsaXphdGlvblxyXG4gICAgb25Mb2FkOiBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgfSxcclxuXHJcbiAgICBzaG93TGF5ZXIgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5ub2RlLmFjdGl2ZSA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5hZGRUb3VjaExpbWl0KCk7XHJcbiAgICB9LFxyXG4gICAgaGlkZUxheWVyIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuY2FuY2VsVG91Y2hMaW1pdCgpO1xyXG4gICAgICAgIGlmKHRoaXMuX2lzUmVsZWFzZSkgdGhpcy5ub2RlLmRlc3Ryb3koKTtcclxuICAgICAgICBlbHNlIHRoaXMubm9kZS5hY3RpdmUgPSBmYWxzZTtcclxuICAgIH0sXHJcblxyXG4gICAgYWRkVG91Y2hMaW1pdCA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgY29tcCA9IHRoaXMuX2dldFRvdWNoTGltaXRDb21wKCk7XHJcbiAgICAgICAgaWYoY29tcCkgY29tcC5hZGRUb3VjaExpbWl0KCk7XHJcbiAgICB9LFxyXG4gICAgY2FuY2VsVG91Y2hMaW1pdCA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgY29tcCA9IHRoaXMuX2dldFRvdWNoTGltaXRDb21wKCk7XHJcbiAgICAgICAgaWYoY29tcCkgY29tcC5jYW5jZWxUb3VjaExpbWl0KCk7XHJcbiAgICB9LFxyXG4gICAgX2dldFRvdWNoTGltaXRDb21wIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmKCF0aGlzLl90b3VjaExpbWl0Q29tcCkge1xyXG4gICAgICAgICAgICB0aGlzLl90b3VjaExpbWl0Q29tcCA9IHRoaXMubm9kZS5wYXJlbnQuZ2V0Q29tcG9uZW50KCdPYmpfdG91Y2hMaW1pdCcpXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLl90b3VjaExpbWl0Q29tcFxyXG4gICAgfSxcclxuXHJcbiAgICBzZXRJc1JlbGVhc2UgOiBmdW5jdGlvbiAoaXNSZWxlYXNlKSB7XHJcbiAgICAgICAgdGhpcy5faXNSZWxlYXNlID0gaXNSZWxlYXNlO1xyXG4gICAgfSxcclxuICAgIHNldFVJTmFtZSA6IGZ1bmN0aW9uICh1aU5hbWUpIHtcclxuICAgICAgICB0aGlzLl91aU5hbWUgPSB1aU5hbWU7XHJcbiAgICB9LFxyXG4gICAgZ2V0VUlOYW1lIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl91aU5hbWVcclxuICAgIH0sXHJcblxyXG4gICAgLy8gY2FsbGVkIGV2ZXJ5IGZyYW1lLCB1bmNvbW1lbnQgdGhpcyBmdW5jdGlvbiB0byBhY3RpdmF0ZSB1cGRhdGUgY2FsbGJhY2tcclxuICAgIC8vIHVwZGF0ZTogZnVuY3Rpb24gKGR0KSB7XHJcblxyXG4gICAgLy8gfSxcclxufSk7XHJcbiIsIi8v55m+5Lq65aSn5oiYXHJcblxyXG52YXIgX2luZGV4VG9JdGVtU3RyID0ge1xyXG4gICAgMDonU1BBREVfVycsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/pu5HmoYPotaJcclxuICAgIDE6J1NQQURFX0wnLFxyXG4gICAgMjonSEVBUlRfVycsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5pa554mH6LWiXHJcbiAgICAzOidIRUFSVF9MJyxcclxuICAgIDQ6J0NMVUJfVycsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5qKF6Iqx6LWiXHJcbiAgICA1OidDTFVCX0wnLFxyXG4gICAgNjonRElBTU9ORF9XJywgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+e6ouahg+i1olxyXG4gICAgNzonRElBTU9ORF9MJyxcclxufVxyXG52YXIgX2l0ZW1Ub0luZGV4ID0ge1xyXG4gICAgJ1NQQURFX1cnOicwJywgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+m7keahg+i1olxyXG4gICAgJ1NQQURFX0wnOicxJyxcclxuICAgICdIRUFSVF9XJzonMicsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5pa554mH6LWiXHJcbiAgICAnSEVBUlRfTCc6JzMnLFxyXG4gICAgJ0NMVUJfVyc6JzQnLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+aiheiKsei1olxyXG4gICAgJ0NMVUJfTCc6JzUnLFxyXG4gICAgJ0RJQU1PTkRfVyc6JzYnLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v57qi5qGD6LWiXHJcbiAgICAnRElBTU9ORF9MJzonNycsXHJcbn1cclxuXHJcbnZhciBpbml0RGF0YSA9IHtcclxuICAgIG15c2VsZkRhdGEgOiBudWxsLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+eOqeWutuiHquW3seeahOaVsOaNrlxyXG4gICAgb3RoZXJzRGF0YSA6IG51bGwsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5YW25LuW546p5a6255qE5pWw5o2uXHJcbiAgICBkZWFsZXJEYXRhIDogbnVsbCwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/luoTlrrbnmoTmlbDmja5cclxuICAgIGhvbWVEYXRhIDogbnVsbCwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/miL/pl7TphY3nva7nmoTmlbDmja5cclxufVxyXG5cclxuY2MuQ2xhc3Moe1xyXG4gICAgZXh0ZW5kczogcmVxdWlyZSgnQmFzZU1hbmFnZXInKSxcclxuXHJcbiAgICBwcm9wZXJ0aWVzOiB7XHJcbiAgICAgICAgX2dhbWVTdGF0ZSA6IG51bGwsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+a4uOaIj+i/m+eoi1xyXG4gICAgICAgIF9pZGxlVGlwIDogbnVsbCwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/mj5DnpLrkvJHmga/kuK3nmoR0aXBcclxuICAgICAgICBfZ3JhYlRpcCA6IG51bGwsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5o+Q56S65oqV5rOo5Lit55qEdGlwXHJcbiAgICAgICAgX2lzTXlEZWFsZXIgOiBudWxsLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+W6hOWutuaYr+WQpuaYr+iHquW3sVxyXG5cclxuICAgICAgICBfZW50ZXJIb21lRGF0YSA6IG51bGwsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5YWl5oi/5L+h5oGvXHJcbiAgICAgICAgX2hvbWVJRCA6IG51bGwsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/miL/pl7RJRFxyXG4gICAgICAgIF9tYXRjaElEIDogbnVsbCwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v6LWb5LqLSURcclxuICAgICAgICBfbmV4dFN0YXJ0VGltZSA6IG51bGwsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5LiL5bGA6LWb5LqL5byA5aeL5pe26Ze054K5XHJcbiAgICAgICAgX2N1ckVuZEdyYWJUaW1lIDogbnVsbCwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+W9k+WJjei1m+S6i+e7k+adn+aXtumXtOeCuVxyXG4gICAgICAgIF9wbGF5ZXJJRCA6IG51bGwsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v546p5a626Ieq5bex55qESURcclxuICAgICAgICBfbWF4QmV0dGluZ1RpbWVzIDogbnVsbCwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+acgOWkp+aKleazqOasoeaVsFxyXG4gICAgICAgIF9tYXhCZXR0aW5nR29sZCA6IG51bGwsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5pyA5aSn5oqV5rOo6YeR5biBXHJcbiAgICAgICAgX2NoaXBWYWx1ZUxpc3QgOiBudWxsLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/nrbnnoIHpgInpobnlgLxcclxuICAgICAgICBfaG9tZU5hbWUgOiBudWxsLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/miL/pl7TlkI3lrZdcclxuICAgICAgICBfbWF0Y2hFbmREYXRhIDogbnVsbCwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/nu5Pnrpfkv6Hmga9cclxuICAgICAgICBfZGVhbGVyTmV0VHlwZSA6IG51bGwsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5b2T5YmN6K+35rGC55qE5piv5LiK5bqE6L+Y5piv57ut5bqE6L+Y5piv6K+35rGC5YiX6KGo55qE57G75Z6LXHJcbiAgICAgICAgX21pbkRlYWxlckdvbGQgOiBudWxsLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/mnIDlsI/kuIrluoTph5Hpop1cclxuICAgICAgICBfaXNQYXVzZU92ZXJNYXRjaCA6IG51bGwsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5pqC5YGc55qE5pe25YCZ5piv5ZCm6L+b5YWl5paw55qE5LiA5bGAXHJcbiAgICAgICAgX2lzRGVhbGVyU2lnbiA6IG51bGwsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+aYr+WQpuaYr+W6hOWutlxyXG4gICAgICAgIF9kaWN0X2lkbGVCZXR0aW5nIDogbnVsbCwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5ZCD55Oc576k5LyX55qE5oqV5rOo6K6w5b2VXHJcblxyXG4gICAgICAgIGNvbXBfdG9wRWZmZWN0IDoge1xyXG4gICAgICAgICAgICBkZWZhdWx0IDogbnVsbCxcclxuICAgICAgICAgICAgdHlwZSA6IHJlcXVpcmUoJ0J1bGwxMDBfdG9wRWZmZWN0JyksXHJcbiAgICAgICAgICAgIGRpc3BsYXlOYW1lIDogJ+WKqOeUu+WuueWZqCdcclxuICAgICAgICB9LFxyXG4gICAgICAgIGNvbXBfcG9rZXJMYXllciA6IHtcclxuICAgICAgICAgICAgZGVmYXVsdCA6IG51bGwsXHJcbiAgICAgICAgICAgIHR5cGUgOiByZXF1aXJlKCdCdWxsMTAwX3Bva2VyQ29udGFpbmVyJyksXHJcbiAgICAgICAgICAgIGRpc3BsYXlOYW1lIDogJ+WNoeeJjOWuueWZqCdcclxuICAgICAgICB9LFxyXG4gICAgICAgIGNvbXBfcGxheWVyc0xheWVyIDoge1xyXG4gICAgICAgICAgICBkZWZhdWx0IDogbnVsbCxcclxuICAgICAgICAgICAgdHlwZSA6IHJlcXVpcmUoJ0J1bGwxMDBfcGxheWVyQ29udGFpbmVyJyksXHJcbiAgICAgICAgICAgIGRpc3BsYXlOYW1lIDogJ+eOqeWutuWuueWZqCdcclxuICAgICAgICB9LFxyXG4gICAgICAgIGNvbXBfdGFibGVzTGF5ZXIgOiB7XHJcbiAgICAgICAgICAgIGRlZmF1bHQgOiBudWxsLFxyXG4gICAgICAgICAgICB0eXBlIDogcmVxdWlyZSgnQnVsbDEwMF90YWJsZUNvbnRhaW5lcicpLFxyXG4gICAgICAgICAgICBkaXNwbGF5TmFtZSA6ICfmoYzlrZDlrrnlmagnXHJcbiAgICAgICAgfSxcclxuICAgICAgICBjb21wX2dvbGRzTGF5ZXIgOiB7XHJcbiAgICAgICAgICAgIGRlZmF1bHQgOiBudWxsLFxyXG4gICAgICAgICAgICB0eXBlIDogcmVxdWlyZSgnT2JqX2dvbGRzQ29udGFpbmVyJyksXHJcbiAgICAgICAgICAgIGRpc3BsYXlOYW1lIDogJ+mHkeW4geWuueWZqCdcclxuICAgICAgICB9LFxyXG4gICAgICAgIGNvbXBfYnRuc0xheWVyIDoge1xyXG4gICAgICAgICAgICBkZWZhdWx0IDogbnVsbCxcclxuICAgICAgICAgICAgdHlwZSA6IHJlcXVpcmUoJ0J1bGwxMDBfYnRuQ29udGFpbmVyJyksXHJcbiAgICAgICAgICAgIGRpc3BsYXlOYW1lIDogJ+W6lemDqOaMiemSruWuueWZqCdcclxuICAgICAgICB9LFxyXG4gICAgICAgIGNvbXBfdWlMYXllciA6IHtcclxuICAgICAgICAgICAgZGVmYXVsdCA6IG51bGwsXHJcbiAgICAgICAgICAgIHR5cGUgOiByZXF1aXJlKCdPYmpfdWlDb250YWluZXInKSxcclxuICAgICAgICAgICAgZGlzcGxheU5hbWUgOiAn56qX5Y+j55WM6Z2i5a655ZmoJ1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgY29tcF9wb2tlclJlc3VsdExheWVyIDoge1xyXG4gICAgICAgICAgICBkZWZhdWx0IDogbnVsbCxcclxuICAgICAgICAgICAgdHlwZSA6IHJlcXVpcmUoJ0J1bGwxMDBfcG9rZXJSZXN1bHRDb250YWluZXInKSxcclxuICAgICAgICAgICAgZGlzcGxheU5hbWUgOiAn5Y2h54mM57uT5p6c5pi+56S65a655ZmoJ1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgbGFiZWxfYmV0dGluZ1RpbWVzIDoge1xyXG4gICAgICAgICAgICBkZWZhdWx0IDogbnVsbCxcclxuICAgICAgICAgICAgdHlwZSA6IGNjLkxhYmVsLFxyXG4gICAgICAgICAgICBkaXNwbGF5TmFtZSA6ICfmipXms6jmrKHmlbAnXHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgbm9kZV9kaXlUaXAgOiB7XHJcbiAgICAgICAgICAgIGRlZmF1bHQgOiBudWxsLFxyXG4gICAgICAgICAgICB0eXBlIDogY2MuTm9kZSxcclxuICAgICAgICAgICAgZGlzcGxheU5hbWUgOiAndGlwJ1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgLy8gdXNlIHRoaXMgZm9yIGluaXRpYWxpemF0aW9uXHJcbiAgICBvbkxvYWQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBHRy5idWxsMTAwTWdyID0gdGhpcztcclxuICAgICAgICB0aGlzLl9zdXBlcigpO1xyXG4gICAgICAgIHRoaXMuX2lzRGVhbGVyU2lnbiA9IGZhbHNlO1xyXG5cclxuICAgICAgICB0aGlzLl9iZXR0aW5nVGltZXNTdHIgPSBHX0NISU5FU0UubGltaXRCZXR0aW5nO1xyXG4gICAgICAgIHRoaXMuX2lzUGF1c2VPdmVyTWF0Y2ggPSB0cnVlO1xyXG4gICAgfSxcclxuXHJcbiAgICAvL+acrOWcsOa1i+ivleaXtuWAmeS9v+eUqOeahOaVsOaNrlxyXG4gICAgX2luaXRMb2NhbERhdGEgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYoR19Db25maWdfY29tbW9uLmlzTG9jYWwpe1xyXG4gICAgICAgICAgICB2YXIgY2hpcCA9IFsxMDAsIDUwMCwgMTAwMCwgMjAwMCwgNTAwMF07XHJcbiAgICAgICAgICAgIHZhciBpbml0RGF0YSA9IHtcclxuICAgICAgICAgICAgICAgIG15c2VsZkRhdGEgOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2hvb3NlRGljdCA6IGNoaXAsXHJcbiAgICAgICAgICAgICAgICAgICAgcm9vbU5hbWUgOiBudWxsXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgb3RoZXJzRGF0YSA6IFt7XHJcbiAgICAgICAgICAgICAgICAgICAgcGxheWVyIDoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2luOiA3NTY4LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpY29uOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBuaWNrbmFtZTogXCJibGFjazFcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGxheWVySWQ6IDUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVzYWJsZUJhbGFuY2U6IDc1NjgsXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBzZWF0SW5kZXg6IDFcclxuICAgICAgICAgICAgICAgIH0se1xyXG4gICAgICAgICAgICAgICAgICAgIHBsYXllciA6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29pbjogNzU2OCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWNvbjogbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmlja25hbWU6IFwiYmxhY2tcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGxheWVySWQ6IDUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVzYWJsZUJhbGFuY2U6IDc1NjgsXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBzZWF0SW5kZXg6IDJcclxuICAgICAgICAgICAgICAgIH0se1xyXG4gICAgICAgICAgICAgICAgICAgIHBsYXllciA6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29pbjogODg4ODg4LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpY29uOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBuaWNrbmFtZTogXCJzb2xpZGVyXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBsYXllcklkOiA2LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB1c2FibGVCYWxhbmNlOiA4ODg4ODgsXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBzZWF0SW5kZXg6IDNcclxuICAgICAgICAgICAgICAgIH0se1xyXG4gICAgICAgICAgICAgICAgICAgIHBsYXllciA6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29pbjogODg4ODg4LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpY29uOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBuaWNrbmFtZTogXCJqaW5cIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGxheWVySWQ6IDcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVzYWJsZUJhbGFuY2U6IDg4ODg4OCxcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHNlYXRJbmRleDogNFxyXG4gICAgICAgICAgICAgICAgfSx7XHJcbiAgICAgICAgICAgICAgICAgICAgcGxheWVyIDoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2luOiA4ODg4ODgsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGljb246IG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5pY2tuYW1lOiBcImppbjFcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGxheWVySWQ6IDgsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVzYWJsZUJhbGFuY2U6IDg4ODg4OCxcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHNlYXRJbmRleDogNVxyXG4gICAgICAgICAgICAgICAgfSx7XHJcbiAgICAgICAgICAgICAgICAgICAgcGxheWVyIDoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2luOiA4ODg4ODgsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGljb246IG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5pY2tuYW1lOiBcImppbjJcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGxheWVySWQ6IDksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVzYWJsZUJhbGFuY2U6IDg4ODg4OCxcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHNlYXRJbmRleDogNlxyXG4gICAgICAgICAgICAgICAgfSx7XHJcbiAgICAgICAgICAgICAgICAgICAgcGxheWVyIDoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2luOiA4ODg4ODgsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGljb246IG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5pY2tuYW1lOiBcImppbjNcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGxheWVySWQ6IDksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVzYWJsZUJhbGFuY2U6IDg4ODg4OCxcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHNlYXRJbmRleDogN1xyXG4gICAgICAgICAgICAgICAgfV0sXHJcbiAgICAgICAgICAgICAgICBkZWFsZXJEYXRhIDoge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvaW46IDI5NzMwMCxcclxuICAgICAgICAgICAgICAgICAgICBpY29uOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgIG5pY2tuYW1lOiBcIuezu+e7n+Wkp+eJm1wiLFxyXG4gICAgICAgICAgICAgICAgICAgIHBsYXllcklkOiA3LFxyXG4gICAgICAgICAgICAgICAgICAgIHVzYWJsZUJhbGFuY2U6IDc0MzI1LFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGhvbWVEYXRhIDoge1xyXG4gICAgICAgICAgICAgICAgICAgIHJvb21JZCA6IDEsXHJcbiAgICAgICAgICAgICAgICAgICAgdXNlcklkIDogNixcclxuICAgICAgICAgICAgICAgICAgICBiZXRUaW1lcyA6IDEwMCxcclxuICAgICAgICAgICAgICAgICAgICBtYXRjaElkIDogMSxcclxuICAgICAgICAgICAgICAgICAgICAvL2JlZ2luVGltZU5leHQgOiAxNDg3NTU3NjUxMDgzLFxyXG4gICAgICAgICAgICAgICAgICAgIGJlZ2luVGltZU5leHQgOiAxNDg3NTU5NDg5MjI1LFxyXG4gICAgICAgICAgICAgICAgICAgIC8vc2V0dGxlVGltZSA6IDE0ODc1NTc2NTEwODMsXHJcbiAgICAgICAgICAgICAgICAgICAgc2V0dGxlVGltZSA6IDE0ODc1NTk0NzQyMjUsXHJcbiAgICAgICAgICAgICAgICAgICAgYmV0Q2hpcCA6IGNoaXAsXHJcbiAgICAgICAgICAgICAgICAgICAgbWluRGVhbGVyR29sZCA6IDEwMDAwMCxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5faW5pdEluSG9tZURhdGEoaW5pdERhdGEpO1xyXG5cclxuICAgICAgICAgICAgLy/mmK/lkKblvIDlsYDliKTlrppcclxuICAgICAgICAgICAgdmFyIHNlcnZlclRpbWUgPSAxNDg3NTU5NDg0MDEyO1xyXG4gICAgICAgICAgICBpZih0aGlzLl9uZXh0U3RhcnRUaW1lID4gc2VydmVyVGltZSAmJiBzZXJ2ZXJUaW1lID49IHRoaXMuX2N1ckVuZEdyYWJUaW1lKXtcclxuICAgICAgICAgICAgICAgIC8v5pyq5byA5bGAXHJcbiAgICAgICAgICAgICAgICB2YXIgc2VjcyA9IHRoaXMuX2dldE9mZlNlY29uZHMoc2VydmVyVGltZSwgdGhpcy5fbmV4dFN0YXJ0VGltZSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNtZF93YWl0KHNlY3MsIHRoaXMuY21kX3N0YXJ0UmVhZHkuYmluZCh0aGlzKSk7XHJcbiAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgLy/lt7Lnu4/lvIDlsYBcclxuICAgICAgICAgICAgICAgIHRoaXMuX2dpdmVQb2tlcnModHJ1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9ZWxzZXtcclxuXHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIC8v5Yid5aeL5YyW5oi/6Ze05b+F6aG76KaB5pyJ55qE5pWw5o2uXHJcbiAgICBfaW5pdEluSG9tZURhdGEgOiBmdW5jdGlvbiAoaW5pdERhdGEpIHtcclxuICAgICAgICAvL+aIv+mXtOmFjee9rueahOaVsOaNrlxyXG4gICAgICAgIGlmKGluaXREYXRhLmhvbWVEYXRhKXtcclxuICAgICAgICAgICAgdmFyIGRhdGEgPSBpbml0RGF0YS5ob21lRGF0YTtcclxuICAgICAgICAgICAgaWYoIXRoaXMuX2hvbWVJRCkgdGhpcy5faG9tZUlEID0gZGF0YS5yb29tSWQ7XHJcbiAgICAgICAgICAgIHRoaXMuX21hdGNoSUQgPSBkYXRhLm1hdGNoSWQ7XHJcbiAgICAgICAgICAgIHRoaXMuX25leHRTdGFydFRpbWUgPSBkYXRhLmJlZ2luVGltZU5leHQ7XHJcbiAgICAgICAgICAgIHRoaXMuX2N1ckVuZEdyYWJUaW1lID0gZGF0YS5zZXR0bGVUaW1lO1xyXG4gICAgICAgICAgICBpZihkYXRhLm1pbkRlYWxlckdvbGQpIHRoaXMuX21pbkRlYWxlckdvbGQgPSBkYXRhLm1pbkRlYWxlckdvbGQ7XHJcbiAgICAgICAgICAgIGlmKGRhdGEuYmV0VGltZXMpIHRoaXMuX21heEJldHRpbmdUaW1lcyA9IGRhdGEuYmV0VGltZXM7XHJcbiAgICAgICAgICAgIGlmKGRhdGEuYmV0Q2hpcCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fY2hpcFZhbHVlTGlzdCA9IGRhdGEuYmV0Q2hpcDtcclxuICAgICAgICAgICAgICAgIHRoaXMuX21heEJldHRpbmdHb2xkID0gdGhpcy5fbWF4QmV0dGluZ1RpbWVzICogZGF0YS5iZXRDaGlwW2RhdGEuYmV0Q2hpcC5sZW5ndGggLSAxXTtcclxuICAgICAgICAgICAgICAgIC8v6K6+572u5Yid5aeL5YyW5pWw5o2u6KGo546wXHJcbiAgICAgICAgICAgICAgICB0aGlzLmNvbXBfYnRuc0xheWVyLmluaXRDaGlwQnRuKGRhdGEuYmV0Q2hpcCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYoZGF0YS51c2VySWQpIHtcclxuICAgICAgICAgICAgICAgIEdHLmdldFBsYXllcigpLnNldFBsYXllcklEKGRhdGEudXNlcklkKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3BsYXllcklEID0gR0cuZ2V0UGxheWVyKCkuZ2V0UGxheWVySUQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAvL+eOqeWutuiHquW3seeahOaVsOaNrlxyXG4gICAgICAgIC8v5YW25LuW546p5a6255qE5pWw5o2uXHJcbiAgICAgICAgLy/luoTlrrbnmoTmlbDmja5cclxuICAgICAgICB0aGlzLmNvbXBfcGxheWVyc0xheWVyLnNldFN0YXJ0SW5mbyhpbml0RGF0YS5vdGhlcnNEYXRhLCBpbml0RGF0YS5teXNlbGZEYXRhLCBpbml0RGF0YS5kZWFsZXJEYXRhKTtcclxuXHJcbiAgICAgICAgLy/liKTlrprluoTlrrZcclxuICAgICAgICBpZihpbml0RGF0YS5kZWFsZXJEYXRhKXtcclxuICAgICAgICAgICAgaWYoaW5pdERhdGEuZGVhbGVyRGF0YS5wbGF5ZXJJZCA9PSBHRy5nZXRQbGF5ZXJJRCgpKXtcclxuICAgICAgICAgICAgICAgIC8v6Ieq5bex5piv5bqE5a62XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldEJvdHRvbUlzU2hvdyhmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9pc0RlYWxlclNpZ24gPSB0cnVlO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRCb3R0b21Jc1Nob3codHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAvL+a4hemZpOW6hOWtl+eJueaViFxyXG4gICAgICAgICAgICAgICAgdGhpcy5jb21wX3BsYXllcnNMYXllci5nZXRNeXNlbGZFZmZlY3RDb21wKCkuY2xlYXJEZWFsZXJXb3JkQW5pKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgLy/liJ3lp4vmipXms6jmrKHmlbBcclxuICAgICAgICB0aGlzLnNldEJldHRpbmdUaW1lcyh0aGlzLl9tYXhCZXR0aW5nVGltZXMpO1xyXG4gICAgfSxcclxuXHJcbiAgICBzdGFydCA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBHRy50aXBzTWdyLnNldFRleHRUaXAodGhpcy5ub2RlX2RpeVRpcC5nZXRDb21wb25lbnQoJ09ial90eHRUaXAnKSk7XHJcbiAgICAgICAgdGhpcy5yZXNldFNob3coKTtcclxuXHJcbiAgICAgICAgaWYoR19Db25maWdfY29tbW9uLmlzTG9jYWwpe1xyXG4gICAgICAgICAgICB0aGlzLl9pbml0TG9jYWxEYXRhKCk7XHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIHRoaXMuYWRkTG9uZ0xpc3Rlbk9uU3RhcnQoKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBob21lRGF0YSA9IEdHLmdldFBsYXllcigpLmdldEluSG9tZURhdGEoKTtcclxuICAgICAgICAgICAgaWYoaG9tZURhdGEpe1xyXG4gICAgICAgICAgICAgICAgaWYoaG9tZURhdGEubmV0X3Jlc2V0SG9tZURhdGEpe1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2RlYWxJbkhvbWVOZXREYXRhKGhvbWVEYXRhLm5ldF9pbkhvbWVEYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUVudGVySG9tZURhdGEoaG9tZURhdGEubmV0X3Jlc2V0SG9tZURhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVmcmVzaEhvbWUoKTtcclxuICAgICAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubmV0X3NldEhvbWVEYXRhKGhvbWVEYXRhLm5ldF9pbkhvbWVEYXRhKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgdGVzdEV4aXRCdG4gOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgLy90aGlzLmNvbXBfdWlMYXllci5zaG93UGxheWVyTGlzdCgpO1xyXG4gICAgICAgIC8vdmFyIHRpbWUxID0gbmV3IERhdGUoMTQ4NzgzNTgxMDE1Nik7XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZygn5pe2OicrdGltZTEuZ2V0SG91cnMoKSsn5YiGOicrdGltZTEuZ2V0TWludXRlcygpKyfnp5I6Jyt0aW1lMS5nZXRTZWNvbmRzKCkpXHJcbiAgICAgICAgLy92YXIgdGltZTIgPSBuZXcgRGF0ZSgxNDg3ODM1Nzk1MTU2KTtcclxuICAgICAgICAvL2NvbnNvbGUubG9nKCfml7Y6Jyt0aW1lMi5nZXRIb3VycygpKyfliIY6Jyt0aW1lMi5nZXRNaW51dGVzKCkrJ+enkjonK3RpbWUyLmdldFNlY29uZHMoKSlcclxuICAgICAgICAvL3RoaXMuX2dpdmVQb2tlcnModHJ1ZSk7XHJcbiAgICAgICAgLy9HRy50aXBzTWdyLmFkZE5vdGljZSgn5aW95aW95aW95aW95aW95aW95aW95aW95aW95aW95aW95aW95aW95aW95aW95aW95aW95aW95aW95aW9Jyk7XHJcbiAgICAgICAgcmV0dXJuIHRydWVcclxuICAgICAgICAvL1xyXG4gICAgICAgIC8vdmFyIHRpbWUxID0gbmV3IERhdGUoMTQ4NzU5NjQzNzkxMik7XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZygn5pe2OicrdGltZTEuZ2V0SG91cnMoKSsn5YiGOicrdGltZTEuZ2V0TWludXRlcygpKyfnp5I6Jyt0aW1lMS5nZXRTZWNvbmRzKCkpXHJcbiAgICAgICAgLy92YXIgdGltZTIgPSBuZXcgRGF0ZSgxNDg3NTk2NDIyOTEyKTtcclxuICAgICAgICAvL2NvbnNvbGUubG9nKCfml7Y6Jyt0aW1lMi5nZXRIb3VycygpKyfliIY6Jyt0aW1lMi5nZXRNaW51dGVzKCkrJ+enkjonK3RpbWUyLmdldFNlY29uZHMoKSlcclxuICAgIH0sXHJcblxyXG4gICAgLy/lvIDlkK/kvJHmga/ml7bpl7TnmoTml7blgJnnmoTmuIXnkIZcclxuICAgIF9jbGVhckJ5V2FpdCA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLmdldE15c2VsZkNvbXAoKS5jbGVhckJldHRpbmdHb2xkKCk7XHJcbiAgICB9LFxyXG5cclxuXHJcbiAgICAvL+a4uOaIj+a1geeoiz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblxyXG4gICAgLy/miafooYzmuLjmiI/kvJHmga9cclxuICAgIGNtZF93YWl0IDogZnVuY3Rpb24gKHJldGFpblRpbWUsIGNhbGxGdW5jKSB7XHJcbiAgICAgICAgdGhpcy5fZ2FtZVN0YXRlID0gR19UWVBFLmJ1bGwxMDBTdGF0ZS53YWl0O1xyXG4gICAgICAgIGlmKHRoaXMuX2dyYWJUaXAgJiYgdGhpcy5fZ3JhYlRpcC5nZXRJc1Nob3coKSl7XHJcbiAgICAgICAgICAgIHRoaXMuX2dyYWJUaXAuZm9yY2VFbmQoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5jb21wX3RhYmxlc0xheWVyLnNldFRhYmxlVG91Y2hFbmFibGUoZmFsc2UpO1xyXG4gICAgICAgIHZhciB0aW1lMSA9IG5ldyBEYXRlKEdHLnNvY2tldE1nci5nZXRTZXJ2ZXJUaW1lKCkpO1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCflvZPliY3vvJrml7Y6Jyt0aW1lMS5nZXRIb3VycygpKyfliIY6Jyt0aW1lMS5nZXRNaW51dGVzKCkrJ+enkjonK3RpbWUxLmdldFNlY29uZHMoKSlcclxuICAgICAgICB2YXIgdGltZTIgPSBuZXcgRGF0ZSh0aGlzLl9uZXh0U3RhcnRUaW1lKTtcclxuICAgICAgICAvLyBjb25zb2xlLmxvZygn5LiL5qyh5byA5bGA77ya5pe2OicrdGltZTIuZ2V0SG91cnMoKSsn5YiGOicrdGltZTIuZ2V0TWludXRlcygpKyfnp5I6Jyt0aW1lMi5nZXRTZWNvbmRzKCkpXHJcbiAgICAgICAgaWYodGhpcy5faWRsZVRpcCAmJiB0aGlzLl9pZGxlVGlwLmdldElzU2hvdygpKSB7XHJcbiAgICAgICAgICAgIC8v5bey57uP5a2Y5Zyo6K+ldGlwXHJcbiAgICAgICAgICAgIHRoaXMuX2lkbGVUaXAuZm9yY2VDaGFuZ2VDb3VudERvd24ocmV0YWluVGltZSk7XHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIHZhciBkYXRhT2JqID0ge1xyXG4gICAgICAgICAgICAgICAgdGlwSW5kZXggOiAxOSxcclxuICAgICAgICAgICAgICAgIGlzQ291bnREb3duIDogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIHNob3dQb3MgOiB0aGlzLm5vZGVfZGl5VGlwLnBvc2l0aW9uLFxyXG4gICAgICAgICAgICAgICAgLy9jYWxsQmFjayA6IHRoaXMub25fYmVmb3JlU3RhcnQuYmluZCh0aGlzKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGRhdGFPYmoucmV0YWluVGltZSA9IHJldGFpblRpbWU7XHJcbiAgICAgICAgICAgIGlmKGNhbGxGdW5jKSBkYXRhT2JqLmNhbGxCYWNrID0gY2FsbEZ1bmM7XHJcbiAgICAgICAgICAgIHRoaXMuX2lkbGVUaXAgPSBHRy50aXBzTWdyLnNob3dPbmx5T25lKGRhdGFPYmopO1xyXG4gICAgICAgICAgICAvL3RoaXMuX2lkbGVUaXAuc2V0SXNTaG93KHRydWUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5fY2xlYXJCeVdhaXQoKTtcclxuXHJcbiAgICB9LFxyXG5cclxuICAgIC8v5oqV5rOo5YmN55qE5Yqo55S7XHJcbiAgICBjbWRfc3RhcnRSZWFkeSA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLl9nYW1lU3RhdGUgPSBHX1RZUEUuYnVsbDEwMFN0YXRlLnN0YXJ0UmVhZHk7XHJcbiAgICAgICAgaWYodGhpcy5faWRsZVRpcCAmJiB0aGlzLl9pZGxlVGlwLmdldElzU2hvdygpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2lkbGVUaXAuZm9yY2VFbmQoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy/luoTlrrbluoTlrZfnibnmlYjmmL7npLpcclxuICAgICAgICB0aGlzLmNvbXBfcGxheWVyc0xheWVyLmdldERlYWxlcldvcmRFZmZlY3RDb21wKCkucGxheURlYWxlcldvcmRBbmkoKTtcclxuXHJcbiAgICAgICAgdGhpcy5jb21wX3RvcEVmZmVjdC5wbGF5U3RhcnRHYW1lQW5pKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgLy90aGlzLmNvbXBfdG9wRWZmZWN0LnBsYXlTdGFydEJldHRpbmdBbmkoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAvL1xyXG4gICAgICAgICAgICAvL30uYmluZCh0aGlzKSk7XHJcbiAgICAgICAgICAgIHZhciBzZWNzO1xyXG4gICAgICAgICAgICBpZihHX0NvbmZpZ19jb21tb24uaXNMb2NhbCl7XHJcbiAgICAgICAgICAgICAgICBzZWNzID0gMTA7XHJcbiAgICAgICAgICAgIH1lbHNlIHtcclxuICAgICAgICAgICAgICAgIHNlY3MgPSB0aGlzLl9nZXRPZmZTZWNvbmRzKEdHLnNvY2tldE1nci5nZXRTZXJ2ZXJUaW1lKCksIHRoaXMuX2N1ckVuZEdyYWJUaW1lKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvL2lmKHRoaXMuZ2V0TXlzZWxmQ29tcCgpLmdldElzRGVhbGVyKCkpIHRoaXMuY21kX3N0YXJ0QmV0dGluZyhzZWNzKTtcclxuICAgICAgICAgICAgLy9lbHNle1xyXG4gICAgICAgICAgICAvLyAgICBpZighR19Db25maWdfY29tbW9uLmlzTG9jYWwpIHNlY3MgPSB0aGlzLl9nZXRPZmZTZWNvbmRzKEdHLnNvY2tldE1nci5nZXRTZXJ2ZXJUaW1lKCksIHRoaXMuX2N1ckVuZEdyYWJUaW1lKTtcclxuICAgICAgICAgICAgLy8gICAgdGhpcy5jbWRfc3RhcnRCZXR0aW5nKHNlY3MpO1xyXG4gICAgICAgICAgICAvL31cclxuICAgICAgICAgICAgdGhpcy5jbWRfc3RhcnRCZXR0aW5nKHNlY3MpO1xyXG4gICAgICAgIH0uYmluZCh0aGlzKSk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmdldE15c2VsZkNvbXAoKS5nZXRJc0RlYWxlcigpKSB7Ly/lpoLmnpzmmK/luoTlrrblvIDlp4vliqjnlLvmkq3mlL7lrozlsLHov5vlhaXnrYnlvoXnjqnlrrbmipXms6jlgJLorqHml7ZcclxuICAgICAgICAgICAgdGhpcy5fZ2l2ZVBva2Vycyh0cnVlKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLl9naXZlUG9rZXJzKGZhbHNlKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgX2dpdmVQb2tlcnMgOiBmdW5jdGlvbiAoaXNPdmVyQW5pKSB7XHJcbiAgICAgICAgLy/lj5HniYxcclxuICAgICAgICBpZihpc092ZXJBbmkpe1xyXG4gICAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGRlYWxlclBva2VyUG9zID0gc2VsZi5jb21wX3BsYXllcnNMYXllci5nZXREZWFsZXJQb2tlclBvcygpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHBva2VyUG9zTGlzdCA9IHNlbGYuY29tcF90YWJsZXNMYXllci5nZXRUYWJsZVBva2VyUG9zKCk7XHJcbiAgICAgICAgICAgICAgICBwb2tlclBvc0xpc3QucHVzaChkZWFsZXJQb2tlclBvcyk7XHJcbiAgICAgICAgICAgICAgICBzZWxmLmNvbXBfcG9rZXJMYXllci5naXZlQ292ZXJQb2tlcnMocG9rZXJQb3NMaXN0LCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy/lj5HniYznu5PmnZ9cclxuICAgICAgICAgICAgICAgIH0uYmluZChzZWxmKSwgaXNPdmVyQW5pKTtcclxuICAgICAgICAgICAgfSwgMTAwKVxyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICB2YXIgZGVhbGVyUG9rZXJQb3MgPSB0aGlzLmNvbXBfcGxheWVyc0xheWVyLmdldERlYWxlclBva2VyUG9zKCk7XHJcbiAgICAgICAgICAgIHZhciBwb2tlclBvc0xpc3QgPSB0aGlzLmNvbXBfdGFibGVzTGF5ZXIuZ2V0VGFibGVQb2tlclBvcygpO1xyXG4gICAgICAgICAgICBwb2tlclBvc0xpc3QucHVzaChkZWFsZXJQb2tlclBvcyk7XHJcbiAgICAgICAgICAgIHRoaXMuY29tcF9wb2tlckxheWVyLmdpdmVDb3ZlclBva2Vycyhwb2tlclBvc0xpc3QsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIC8v5Y+R54mM57uT5p2fXHJcbiAgICAgICAgICAgIH0uYmluZCh0aGlzKSwgaXNPdmVyQW5pKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgLy/lvIDlp4vmipXms6hcclxuICAgIGNtZF9zdGFydEJldHRpbmcgOiBmdW5jdGlvbiAocmV0YWluVGltZSkge1xyXG4gICAgICAgIHZhciBpc0RlYWxlciA9IHRoaXMuZ2V0TXlzZWxmQ29tcCgpLmdldElzRGVhbGVyKCk7XHJcbiAgICAgICAgaWYgKCFpc0RlYWxlcikge1xyXG4gICAgICAgICAgICB0aGlzLmNvbXBfdGFibGVzTGF5ZXIuc2V0VGFibGVUb3VjaEVuYWJsZSh0cnVlKTtcclxuICAgICAgICAgICAgdGhpcy5jb21wX2J0bnNMYXllci5yZWZyZXNoQ2FuQ2hvb3NlQnRuKCk7XHJcbiAgICAgICAgICAgIC8vIHRoaXMucmVmcmVzaEJ0bkNob29zZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgc2Vjcz0wO1xyXG4gICAgICAgIHZhciBkYXRhT2JqID0ge1xyXG4gICAgICAgICAgICB0aXBJbmRleCA6IDE4LFxyXG4gICAgICAgICAgICBzaG93UG9zIDogdGhpcy5ub2RlX2RpeVRpcC5wb3NpdGlvbixcclxuICAgICAgICAgICAgaXNDb3VudERvd24gOiB0cnVlLFxyXG4gICAgICAgICAgICBjYWxsQmFjayA6IHRoaXMuY21kX2JldHRpbmdFbmQuYmluZCh0aGlzKVxyXG4gICAgICAgIH1cclxuICAgICAgICBkYXRhT2JqLnJldGFpblRpbWUgPSByZXRhaW5UaW1lO1xyXG4gICAgICAgIC8v5piv5bqE5a625YCS6K6h5pe25pi+56S65YaF5a655pu/5o2iXHJcbiAgICAgICAgaWYoR19Db25maWdfY29tbW9uLmlzTG9jYWwpIGRhdGFPYmoucmV0YWluVGltZSA9IDEwO1xyXG4gICAgICAgIGlmKGlzRGVhbGVyKSBkYXRhT2JqLnNob3dTdHIgPSBHX0NISU5FU0UuaXNEZWFsZXJUaXA7XHJcbiAgICAgICAgdGhpcy5fZ3JhYlRpcCA9IEdHLnRpcHNNZ3Iuc2hvd09ubHlPbmUoZGF0YU9iaik7XHJcbiAgICB9LFxyXG5cclxuICAgIC8v5oqV5rOo57uT5p2fXHJcbiAgICBjbWRfYmV0dGluZ0VuZCA6IGZ1bmN0aW9uICh0YXJnZXQpIHtcclxuICAgICAgICB0aGlzLmNvbXBfdGFibGVzTGF5ZXIuc2V0VGFibGVUb3VjaEVuYWJsZShmYWxzZSk7XHJcbiAgICAgICAgdGhpcy5jb21wX2J0bnNMYXllci5zZXRCdG5Hcm91cEVuYWJsZShmYWxzZSk7XHJcbiAgICAgICAgaWYodGhpcy5fZ3JhYlRpcCAmJiB0aGlzLl9ncmFiVGlwLmdldElzU2hvdygpKXtcclxuICAgICAgICAgICAgdGhpcy5fZ3JhYlRpcC5mb3JjZUVuZCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy/mmL7npLrkvJHmga/kuK1cclxuICAgICAgICB2YXIgc2VjcztcclxuICAgICAgICBpZihHX0NvbmZpZ19jb21tb24uaXNMb2NhbCl7XHJcbiAgICAgICAgICAgIHRoaXMuX3dpbkRpY3QgPSB7MDoxLDI6MSw1OjEsNzoxfTtcclxuICAgICAgICAgICAgdmFyIGRhdGFMaXN0ID0gW107XHJcbiAgICAgICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCA1OyBpICsrKXtcclxuICAgICAgICAgICAgICAgIHZhciBwb2tlckluZm8gPSBbXTtcclxuICAgICAgICAgICAgICAgIGZvcih2YXIgaiA9IDA7IGogPCA1OyBqICsrKXtcclxuICAgICAgICAgICAgICAgICAgICBwb2tlckluZm8ucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBva2VySW5kZXggOiAxMyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgaXNPcGVuIDogZmFsc2VcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZGF0YUxpc3QucHVzaChwb2tlckluZm8pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhciBwb2tlclZhbHVlTGlzdCA9IFsxMCwyLDMsNCw1XVxyXG5cclxuICAgICAgICAgICAgdGhpcy5faW5pdE1hdGNoRW5kRGF0YSgpO1xyXG4gICAgICAgICAgICB0aGlzLl9tYXRjaEVuZERhdGEucG9rZXJzSW5mb0xpc3QgPSBkYXRhTGlzdDtcclxuICAgICAgICAgICAgdGhpcy5fbWF0Y2hFbmREYXRhLnBva2Vyc1Jlc3VsdExpc3QgPSBwb2tlclZhbHVlTGlzdDtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuX21hdGNoRW5kRGF0YS5teXNlbGZJbmZvID0ge1xyXG4gICAgICAgICAgICAgICAgY2hhbmdlR29sZCA6IDQ0NDQ0KihHX1RPT0wuZ2V0UmFuZG9tQm9vbCgpPzE6LTEpLFxyXG4gICAgICAgICAgICAgICAgbGVhdmVHb2xkIDogOTk5NjY2LFxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgdGhpcy5fbWF0Y2hFbmREYXRhLmRlYWxlckluZm8gPSB7XHJcbiAgICAgICAgICAgICAgICBsZWF2ZUdvbGQgOiA4ODg4ODg4LFxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgdGhpcy5fbWF0Y2hFbmREYXRhLm90aGVyc0luZm8gPSB7XHJcbiAgICAgICAgICAgICAgICAyOntcclxuICAgICAgICAgICAgICAgICAgICBjaGFuZ2VHb2xkIDogMTExMTEqKEdfVE9PTC5nZXRSYW5kb21Cb29sKCk/MTotMSksXHJcbiAgICAgICAgICAgICAgICAgICAgbGVhdmVHb2xkIDogMzMzMzMsXHJcbiAgICAgICAgICAgICAgICAgICAgbmFtZSA6ICfpu5HkuroxJyxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAzOntcclxuICAgICAgICAgICAgICAgICAgICBjaGFuZ2VHb2xkIDogNDQ0NDQqKEdfVE9PTC5nZXRSYW5kb21Cb29sKCk/MTotMSksXHJcbiAgICAgICAgICAgICAgICAgICAgbGVhdmVHb2xkIDogOTk5NjY2LFxyXG4gICAgICAgICAgICAgICAgICAgIG5hbWUgOiAn6buR5Lq6MicsXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICBzZWNzID0gMTA7XHJcbiAgICAgICAgICAgIHRoaXMuY21kX3dhaXQoc2Vjcyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZih0aGlzLl93aW5EaWN0KXtcclxuICAgICAgICAgICAgLy/noa7orqTmjqXmlLbliLDkuobnu5Pnrpfkv6Hmga/vvIzmiY3og73nu6fnu61cclxuICAgICAgICAgICAgdGhpcy5jb21wX3RvcEVmZmVjdC5wbGF5QmV0dGluZ0VuZChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9zaG93V2hlbkdvdEVuZEluZm8oKTtcclxuICAgICAgICAgICAgfS5iaW5kKHRoaXMpKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgLy/mmL7npLrnu5Pnrpfkv6Hmga9cclxuICAgIF9zaG93V2hlbkdvdEVuZEluZm8gOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYoIXRoaXMuX21hdGNoRW5kRGF0YSkge1xyXG4gICAgICAgICAgICB0aGlzLl9yZXNldEdhbWVXaGVuRW5kKCk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy/orr7nva7ljaHniYzkv6Hmga9cclxuICAgICAgICBpZih0aGlzLl9tYXRjaEVuZERhdGEucG9rZXJzSW5mb0xpc3QgJiYgdGhpcy5fbWF0Y2hFbmREYXRhLnBva2Vyc1Jlc3VsdExpc3Qpe1xyXG4gICAgICAgICAgICB0aGlzLmNvbXBfcG9rZXJMYXllci5zZXRQb2tlcnNEYXRhKHRoaXMuX21hdGNoRW5kRGF0YS5wb2tlcnNJbmZvTGlzdCwgdGhpcy5fbWF0Y2hFbmREYXRhLnBva2Vyc1Jlc3VsdExpc3QpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvL+W8gOeJjFxyXG4gICAgICAgIC8vaWYoIXRoaXMuX3dpbkRpY3QpIHRoaXMuX3dpbkRpY3QgPSB7MDoxLDI6MSw1OjEsNzoxfTtcclxuICAgICAgICBpZih0aGlzLl93aW5EaWN0KSB0aGlzLmNvbXBfcG9rZXJMYXllci5vcGVuUG9rZXJzKHRoaXMuX3dpbkRpY3QpO1xyXG4gICAgICAgIHZhciBhY3QxID0gY2MuZGVsYXlUaW1lKDMpO1xyXG4gICAgICAgIHRoaXMubm9kZS5ydW5BY3Rpb24oY2Muc2VxdWVuY2UoYWN0MSwgY2MuY2FsbEZ1bmMoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAvL+iuvue9rueOqeWutuS/oeaBryzlpLTlg4/kuIrnmoTph5HluIHlop7lh4/mlYjmnpxcclxuICAgICAgICAgICAgaWYodGhpcy5fbWF0Y2hFbmREYXRhLmRlYWxlckluZm8pIHRoaXMuY29tcF9wbGF5ZXJzTGF5ZXIuZ2V0RGVhbGVyQ29tcCgpLnNldEdvbGRWYWx1ZSh0aGlzLl9tYXRjaEVuZERhdGEuZGVhbGVySW5mby5sZWF2ZUdvbGQpO1xyXG4gICAgICAgICAgICBpZih0aGlzLl9tYXRjaEVuZERhdGEubXlzZWxmSW5mbyl7XHJcbiAgICAgICAgICAgICAgICB2YXIgbXlzZWxmQ29tcCA9IHRoaXMuZ2V0TXlzZWxmQ29tcCgpO1xyXG4gICAgICAgICAgICAgICAgbXlzZWxmQ29tcC5zZXRHb2xkVmFsdWUodGhpcy5fbWF0Y2hFbmREYXRhLm15c2VsZkluZm8ubGVhdmVHb2xkKTtcclxuICAgICAgICAgICAgICAgIG15c2VsZkNvbXAuc2hvd0dvbGRDaGFuZ2UodGhpcy5fbWF0Y2hFbmREYXRhLm15c2VsZkluZm8uY2hhbmdlR29sZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYodGhpcy5fbWF0Y2hFbmREYXRhLm90aGVyc0luZm8pe1xyXG4gICAgICAgICAgICAgICAgdmFyIHBsYXllckluZm8sIHBsYXllckNvbXA7XHJcbiAgICAgICAgICAgICAgICBmb3IodmFyIHNlYXRJbmRleCBpbiB0aGlzLl9tYXRjaEVuZERhdGEub3RoZXJzSW5mbyl7XHJcbiAgICAgICAgICAgICAgICAgICAgcGxheWVySW5mbyA9IHRoaXMuX21hdGNoRW5kRGF0YS5vdGhlcnNJbmZvW3NlYXRJbmRleF07XHJcbiAgICAgICAgICAgICAgICAgICAgaWYocGxheWVySW5mbyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBsYXllckNvbXAgPSB0aGlzLmNvbXBfcGxheWVyc0xheWVyLmdldFBsYXllckNvbXAoc2VhdEluZGV4KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYocGxheWVyQ29tcCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/ov5nkuKrml7blgJnojrflj5bliLDnmoTkvZnpop3mmK/mgLvpop1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vcGxheWVyQ29tcC5zZXRHb2xkVmFsdWUocGxheWVySW5mby5sZWF2ZUdvbGQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxheWVyQ29tcC5zaG93R29sZENoYW5nZShwbGF5ZXJJbmZvLmNoYW5nZUdvbGQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuX29wZW5Qb2tlckVuZCgpO1xyXG4gICAgICAgIH0sIHRoaXMpKSk7XHJcbiAgICB9LFxyXG4gICAgLy/lvIDniYzlkI7nmoTlpITnkIZcclxuICAgIF9vcGVuUG9rZXJFbmQgOiBmdW5jdGlvbiAodGFyZ2V0KSB7XHJcbiAgICAgICAgLy90aGlzLl9tYXRjaEVuZERhdGEgPSBudWxsO1xyXG4gICAgICAgIC8v56e75Yqo6YeR5biBXHJcbiAgICAgICAgdGhpcy5jb21wX3BsYXllcnNMYXllci5mbHlXaW5Hb2xkKHRoaXMuX3dpbkRpY3QpO1xyXG4gICAgICAgIC8v5pi+56S657uT5p6c6Z2i5p2/XHJcbiAgICAgICAgdmFyIGFjdCA9IGNjLmRlbGF5VGltZSgyKTtcclxuICAgICAgICB0aGlzLm5vZGUucnVuQWN0aW9uKGNjLnNlcXVlbmNlKGFjdCwgY2MuY2FsbEZ1bmMoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgZGF0YSA9IHt9XHJcbiAgICAgICAgICAgIGlmKHRoaXMuX21hdGNoRW5kRGF0YSl7XHJcbiAgICAgICAgICAgICAgICBpZih0aGlzLl9tYXRjaEVuZERhdGEubXlzZWxmSW5mbykgZGF0YS5teUNoYW5nZUdvbGQgPSB0aGlzLl9tYXRjaEVuZERhdGEubXlzZWxmSW5mby5jaGFuZ2VHb2xkO1xyXG4gICAgICAgICAgICAgICAgaWYodGhpcy5fbWF0Y2hFbmREYXRhLm90aGVyc0luZm8pIGRhdGEub3RoZXJzSW5mbyA9IHRoaXMuX21hdGNoRW5kRGF0YS5vdGhlcnNJbmZvO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jb21wX3RvcEVmZmVjdC5zaG93UmVzdWx0RWZmZWN0KGRhdGEsIHRoaXMuX3Jlc2V0R2FtZVdoZW5FbmQuYmluZCh0aGlzKSk7XHJcbiAgICAgICAgICAgIH1lbHNlIHRoaXMuX3Jlc2V0R2FtZVdoZW5FbmQoKTtcclxuICAgICAgICB9LCB0aGlzKSkpO1xyXG4gICAgfSxcclxuICAgIC8v5byA54mM5pi+56S65a6M5oiQ5ZCO77yM6L+b6KGM5paw55qE5YCS6K6h5pe2XHJcbiAgICBfcmVzZXRHYW1lV2hlbkVuZCA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLmNoYW5nZUlkbGVUaXAoKTtcclxuICAgICAgICBpZihHX0NvbmZpZ19jb21tb24uaXNMb2NhbCl7XHJcbiAgICAgICAgICAgIHRoaXMucmVzZXRTaG93KCk7XHJcbiAgICAgICAgICAgIHRoaXMuX2luaXRMb2NhbERhdGEoKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIC8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cclxuICAgIC8v5riF55CG55WM6Z2i5Lit55qE5omA5pyJ5pi+56S65pWI5p6cXHJcbiAgICByZXNldFNob3cgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5ub2RlLnN0b3BBbGxBY3Rpb25zKCk7XHJcbiAgICAgICAgLy/nrqHnkIblmajkuK3nmoTlrZjlgqjmlbDmja5cclxuICAgICAgICB0aGlzLl9pc015RGVhbGVyID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5fd2luRGljdCA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5fbWF0Y2hFbmREYXRhID0gbnVsbDtcclxuICAgICAgICAvL+eOqeWutlxyXG4gICAgICAgIC8vdGhpcy5jb21wX3BsYXllcnNMYXllci5jbGVhckFsbCgpO1xyXG4gICAgICAgIC8v5Y2h54mMXHJcbiAgICAgICAgdGhpcy5jb21wX3Bva2VyTGF5ZXIuY2xlYXJBbGwoKTtcclxuICAgICAgICAvL+WmguaenOW3sue7j+e7k+adn+S4gOWxgO+8jOWImea4heeQhuS7peS4i+aVsOaNrlxyXG4gICAgICAgIGlmKHRoaXMuX2lzUGF1c2VPdmVyTWF0Y2gpIHtcclxuICAgICAgICAgICAgLy/ph5HluIFcclxuICAgICAgICAgICAgdGhpcy5jb21wX2dvbGRzTGF5ZXIuY2xlYXJBbGwoKTtcclxuICAgICAgICAgICAgLy/moYzlrZBcclxuICAgICAgICAgICAgdGhpcy5jb21wX3RhYmxlc0xheWVyLmluaXRBbGxUYWJsZXMoKTtcclxuICAgICAgICAgICAgLy/muIXnkIblkIPnk5znvqTkvJfnmoTmipXms6jorrDlvZVcclxuICAgICAgICAgICAgdGhpcy5fZGljdF9pZGxlQmV0dGluZyA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgdGhpcy5faXNQYXVzZU92ZXJNYXRjaCA9IHRydWU7XHJcbiAgICAgICAgLy/mjInpkq5cclxuICAgICAgICB0aGlzLmNvbXBfYnRuc0xheWVyLnNldFN0YXJ0SW5mbygpO1xyXG4gICAgICAgIC8v5Yqo55S754m55pWIXHJcbiAgICAgICAgdGhpcy5jb21wX3RvcEVmZmVjdC5jbGVhckFsbCgpO1xyXG4gICAgICAgIC8vdGlw5o+Q56S6XHJcbiAgICAgICAgLy9HRy50aXBzTWdyLmZvcmNlU3RvcEFsbFRpcHMoKTtcclxuICAgICAgICAvL+aYvuekuuW6lemDqOeahOaMiemSruWSjOWktOWDj1xyXG4gICAgICAgIC8vIHRoaXMuc2V0Qm90dG9tSXNTaG93KHRydWUpO1xyXG4gICAgICAgIC8v6ZqQ6JeP5LiK5bqE5YiX6KGoXHJcbiAgICAgICAgdmFyIGNvbXAgPSB0aGlzLmNvbXBfdWlMYXllci5nZXRVSUNvbXAoR19SRVNfVVJMLnVpTmFtZS5kZWFsZXJMaXN0KVxyXG4gICAgICAgIGlmKGNvbXApIGNvbXAuaGlkZUxheWVyKCk7XHJcbiAgICAgICAgLy/muIXnkIbljaHniYznu5PmnpzmmL7npLpcclxuICAgICAgICB0aGlzLmNvbXBfcG9rZXJSZXN1bHRMYXllci5jbGVhckFsbCgpO1xyXG4gICAgfSxcclxuICAgIC8v5qC55o2u55So5oi35pON5L2c5oqV5pS+6YeR5biBXHJcbiAgICAvL2ZseUdvbGQgOiBmdW5jdGlvbiAoZ29sZExpc3QpIHtcclxuICAgIC8vICAgIHRoaXMuY29tcF9nb2xkc0xheWVyLmZseUdvbGRzKGdvbGRMaXN0KTtcclxuICAgIC8vfSxcclxuICAgIC8v546p5a6254K55Ye75LqG5p+Q5Liq5qGM5a2QXHJcbiAgICB0b3VjaFRhYmxlIDogZnVuY3Rpb24gKHRhYmxlSW5kZXgsIHBvc0xpc3QpIHtcclxuICAgICAgICBpZih0aGlzLmdldE15c2VsZkNvbXAoKS5nZXRJc0RlYWxlcigpKXtcclxuICAgICAgICAgICAgLy/mmK/luoTlrrZcclxuICAgICAgICAgICAgcmV0dXJuXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgZGF0YU9iaiA9IEdfT0JKLmRhdGFfYnVsbEJldHRpbmcoKTtcclxuICAgICAgICBkYXRhT2JqLnRhYmxlSW5kZXggPSB0YWJsZUluZGV4O1xyXG4gICAgICAgIGRhdGFPYmoucG9zTGlzdCA9IHBvc0xpc3Q7XHJcbiAgICAgICAgZGF0YU9iai5pc01pbmUgPSB0cnVlO1xyXG5cclxuICAgICAgICAvL+iusOW9leeOqeWutuS6i+S7tlxyXG4gICAgICAgIHRoaXMuZ2V0TXlzZWxmQ29tcCgpLnRvdWNoVGFibGUoZGF0YU9iaiwgdGhpcy5fdG91Y2hUYWJsZVN1Y2Nlc3MuYmluZCh0aGlzKSk7XHJcbiAgICB9LFxyXG4gICAgLy/mipXms6jmiJDlip/lkI7nmoTooajnjrBcclxuICAgIF90b3VjaFRhYmxlU3VjY2VzcyA6IGZ1bmN0aW9uIChiZXR0aW5nRGF0YSkge1xyXG4gICAgICAgIHZhciB0YWJsZUluZGV4ID0gYmV0dGluZ0RhdGEudGFibGVJbmRleDtcclxuICAgICAgICB2YXIgcG9zTGlzdCA9IGJldHRpbmdEYXRhLnBvc0xpc3Q7XHJcbiAgICAgICAgLy/mlbTnkIbph5HluIHpo57ooYzpnIDopoHnmoTkv6Hmga9cclxuICAgICAgICAvL3ZhciBmbHlEYXRhTGlzdCA9IFtdO1xyXG4gICAgICAgIC8vZm9yKHZhciBpID0gMDsgaSA8IHBvc0xpc3QubGVuZ3RoOyBpICsrKXtcclxuICAgICAgICAvLyAgICB2YXIgZGF0YU9iaiA9IHtcclxuICAgICAgICAvLyAgICAgICAgc3RhcnRQb3MgOiBiZXR0aW5nRGF0YS5zdGFydFBvcyxcclxuICAgICAgICAvLyAgICAgICAgdGFyZ2V0UG9zIDogcG9zTGlzdFtpXSxcclxuICAgICAgICAvLyAgICAgICAgdGFibGVJbmRleCA6IHRhYmxlSW5kZXgsXHJcbiAgICAgICAgLy8gICAgICAgIGNhbGxGdW5jIDogbnVsbFxyXG4gICAgICAgIC8vICAgIH1cclxuICAgICAgICAvLyAgICBmbHlEYXRhTGlzdC5wdXNoKGRhdGFPYmopO1xyXG4gICAgICAgIC8vfVxyXG4gICAgICAgIC8v5pi+56S65qGM5a2Q55qE5oqV5rOo5oiQ5Yqf5L+h5oGvXHJcbiAgICAgICAgdGhpcy5jb21wX3RhYmxlc0xheWVyLnNldEJldHRpbmdTdWNjZXNzKHRhYmxlSW5kZXgsIGJldHRpbmdEYXRhLmdvbGRWYWx1ZSwgYmV0dGluZ0RhdGEuaXNNaW5lKTtcclxuICAgICAgICAvL+aYvuekuumHkeW4geeahOmjnuihjFxyXG4gICAgICAgIC8vdGhpcy5mbHlHb2xkKGZseURhdGFMaXN0KTtcclxuICAgICAgICB2YXIgZmx5RGF0YUxpc3QgPSBHX09CSi5kYXRhX2ZseUdvbGRfcGxheWVyVG9UYWJsZSgpO1xyXG4gICAgICAgIGZseURhdGFMaXN0LnRhYmxlSW5kZXggPSB0YWJsZUluZGV4O1xyXG4gICAgICAgIGZseURhdGFMaXN0LmdvbGROdW0gPSBiZXR0aW5nRGF0YS5wb3NMaXN0Lmxlbmd0aDtcclxuICAgICAgICBmbHlEYXRhTGlzdC5zdGFydFBvcyA9IGJldHRpbmdEYXRhLnN0YXJ0UG9zO1xyXG4gICAgICAgIHRoaXMuY29tcF9nb2xkc0xheWVyLnBsYXllclRvVGFibGUoZmx5RGF0YUxpc3QpO1xyXG4gICAgfSxcclxuICAgIC8v6YeR5biB57uT566X5pWI5p6cXHJcbiAgICBnb2xkUmVjb3ZlciA6IGZ1bmN0aW9uIChyZWNvdmVyRGljdCwgdGFyZ2V0UG9zKSB7XHJcbiAgICAgICAgdmFyIGdvbGROdW07XHJcbiAgICAgICAgZm9yKHZhciB0YWJsZUluZGV4IGluIHJlY292ZXJEaWN0KXtcclxuICAgICAgICAgICAgZ29sZE51bSA9IHJlY292ZXJEaWN0W3RhYmxlSW5kZXhdO1xyXG5cclxuICAgICAgICAgICAgdmFyIGZseURhdGFMaXN0ID0gR19PQkouZGF0YV9mbHlHb2xkX3RhYmxlVG9QbGF5ZXIoKTtcclxuICAgICAgICAgICAgZmx5RGF0YUxpc3QudGFibGVJbmRleCA9IHRhYmxlSW5kZXg7XHJcbiAgICAgICAgICAgIGZseURhdGFMaXN0LmdvbGROdW0gPSBnb2xkTnVtO1xyXG4gICAgICAgICAgICBmbHlEYXRhTGlzdC50YXJnZXRQb3MgPSB0YXJnZXRQb3M7XHJcbiAgICAgICAgICAgIHRoaXMuY29tcF9nb2xkc0xheWVyLnRhYmxlVG9QbGF5ZXIoZmx5RGF0YUxpc3QpO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICAvL+WIt+aWsOaMiemSrueahOetueeggeaYvuekuue7k+aenFxyXG4gICAgcmVmcmVzaEJ0bkNob29zZSA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAvLyB0aGlzLmNvbXBfYnRuc0xheWVyLnNldEJ0bkdyb3VwRW5hYmxlKHRydWUpO1xyXG4gICAgICAgIC8vIHRoaXMuY29tcF9idG5zTGF5ZXIuY2hhbmdlQmV0KCk7Ly/kuIvms6jlvIDlp4vkuYvlkI7orr7nva7lj6/mirzms6jnmoTmjInpkq5cclxuICAgICAgICAvLyB2YXIgY2hvb3NlID0gdGhpcy5nZXRNeXNlbGZDb21wKCkuZ2V0Q2hvb3NlQ2hpcCgpO1xyXG4gICAgICAgIC8vIHRoaXMuY29tcF9idG5zTGF5ZXIuY2hvb3NlTW9uZXkoY2hvb3NlKTtcclxuICAgIH0sXHJcbiAgICAvL+aYvuekuuafkOW8oOahjOWtkOeahOiDnOWIqSwg5Zyo5Y2h54mM5a655Zmo5Lit77yM5omT5byA5omA5pyJ5Y2h54mM5ZCO6LCD55SoXHJcbiAgICBzaG93VGFibGVXaW4gOiBmdW5jdGlvbiAodGFibGVJbmRleCwgbXVsdGlwbGUpIHtcclxuICAgICAgICB0aGlzLmNvbXBfdGFibGVzTGF5ZXIuc2hvd1RhYmxlV2luKHRhYmxlSW5kZXgsIG11bHRpcGxlKTtcclxuICAgIH0sXHJcblxyXG4gICAgLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuXHJcbiAgICAvL+aYvuekuuS4iuW6hOWIl+ihqOeql+WPo1xyXG4gICAgc2hvd1VJX2RlYWxlckxpc3QgOiBmdW5jdGlvbiAoZGF0YU9iaikge1xyXG4gICAgICAgIHZhciBsYXllckNvbXAgPSB0aGlzLmNvbXBfdWlMYXllci5hZGRVSShHX1JFU19VUkwudWlOYW1lLmRlYWxlckxpc3QsIGZ1bmN0aW9uIChsYXllckNvbXApIHtcclxuICAgICAgICAgICAgaWYoZGF0YU9iail7XHJcbiAgICAgICAgICAgICAgICBsYXllckNvbXAuc2hvd0xheWVyKCk7XHJcbiAgICAgICAgICAgICAgICBsYXllckNvbXAuc2V0RGF0YShkYXRhT2JqKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSxcclxuICAgIC8v5pi+56S6546p5a625YiX6KGo56qX5Y+jXHJcbiAgICBzaG93VUlfcGxheWVyTGlzdCA6IGZ1bmN0aW9uIChkYXRhT2JqKSB7XHJcbiAgICAgICAgdmFyIGxheWVyQ29tcCA9IHRoaXMuY29tcF91aUxheWVyLmFkZFVJKEdfUkVTX1VSTC51aU5hbWUucGxheWVyTGlzdCwgZnVuY3Rpb24gKGxheWVyQ29tcCkge1xyXG4gICAgICAgICAgICBsYXllckNvbXAuc2V0RGF0YShkYXRhT2JqKTtcclxuICAgICAgICB9KTtcclxuICAgIH0sXHJcbiAgICAvL+aYvuekuui1sOWKv+WbvuWIl+ihqOeql+WPo1xyXG4gICAgc2hvd1VJX3RyZW5kTGlzdCA6IGZ1bmN0aW9uIChkYXRhT2JqKSB7XHJcbiAgICAgICAgdmFyIGxheWVyQ29tcCA9IHRoaXMuY29tcF91aUxheWVyLmFkZFVJKEdfUkVTX1VSTC51aU5hbWUuYnVsbDEwMFRyZW5kLCBmdW5jdGlvbiAobGF5ZXJDb21wKSB7XHJcbiAgICAgICAgICAgIGxheWVyQ29tcC5zZXREYXRhKGRhdGFPYmopO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSxcclxuICAgIC8v5pi+56S66KeE5YiZ56qX5Y+jXHJcbiAgICBzaG93VUlfcnVsZXMgOiBmdW5jdGlvbiAoZGF0YU9iaikge1xyXG4gICAgICAgIHZhciBsYXllckNvbXAgPSB0aGlzLmNvbXBfdWlMYXllci5hZGRVSShHX1JFU19VUkwudWlOYW1lLnJ1bGVzSW5Ib21lLCBmdW5jdGlvbiAobGF5ZXJDb21wKSB7XHJcbiAgICAgICAgICAgIGxheWVyQ29tcC5zaG93TGF5ZXIoKTtcclxuICAgICAgICAgICAgbGF5ZXJDb21wLnNldERhdGEoZGF0YU9iaik7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9LFxyXG5cclxuICAgIC8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09IOaaguWBnOWQjuacjeWKoeWZqOaVsOaNruWkhOeQhlxyXG5cclxuICAgIC8v6YeN5paw5L+u5pS55oqV5rOo5pyf6Ze05YCS6K6h5pe25pWw5YC8XHJcbiAgICBjaGFuZ2VHcmFiVGlwIDogZnVuY3Rpb24gKG51bSkge1xyXG4gICAgICAgIHZhciBzZWNzID0gdGhpcy5fZ2V0T2ZmU2Vjb25kcyhHRy5zb2NrZXRNZ3IuZ2V0U2VydmVyVGltZSgpLCB0aGlzLl9jdXJFbmRHcmFiVGltZSk7XHJcbiAgICAgICAgaWYodGhpcy5fZ3JhYlRpcCAmJiB0aGlzLl9ncmFiVGlwLmdldElzU2hvdygpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2dyYWJUaXAuZm9yY2VDaGFuZ2VDb3VudERvd24oc2Vjcyk7XHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIC8v5oqV5rOo5Yqo55S75pyq5omn6KGM5a6M5oiQXHJcbiAgICAgICAgICAgIHRoaXMuY29tcF90b3BFZmZlY3QuY2xlYXJBbGwoKTtcclxuXHJcbiAgICAgICAgICAgIGlmKHRoaXMuY29tcF9wb2tlckxheWVyLmdldElzR2l2ZVBva2VyRW5kKCkpe1xyXG4gICAgICAgICAgICAgICAgLy/lt7Lnu4/lj5HlrozniYxcclxuICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAvL+acquWPkeeJjFxyXG4gICAgICAgICAgICAgICAgdGhpcy5fZ2l2ZVBva2Vycyh0cnVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLmNtZF9zdGFydEJldHRpbmcoc2Vjcyk7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIC8v6YeN5paw5L+u5pS55LyR5oGv5pyf6Ze05YCS6K6h5pe25pWw5YC8XHJcbiAgICBjaGFuZ2VJZGxlVGlwIDogZnVuY3Rpb24gKG51bSkge1xyXG4gICAgICAgIGlmKHRoaXMuX2lkbGVUaXAgJiYgdGhpcy5faWRsZVRpcC5nZXRJc1Nob3coKSkge1xyXG4gICAgICAgICAgICB2YXIgc2VjcyA9IHRoaXMuX2dldE9mZlNlY29uZHMoR0cuc29ja2V0TWdyLmdldFNlcnZlclRpbWUoKSwgdGhpcy5fbmV4dFN0YXJ0VGltZSk7XHJcbiAgICAgICAgICAgIGlmKG51bSkgc2VjcyA9IG51bTtcclxuICAgICAgICAgICAgdGhpcy5faWRsZVRpcC5mb3JjZUNoYW5nZUNvdW50RG93bihzZWNzKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgLy/ph43mlrDorr7nva7mipXms6jkv6Hmga9cclxuICAgIHJlc2V0VGFibGVHb2xkIDogZnVuY3Rpb24gKGdvbGRMaXN0KSB7XHJcbiAgICAgICAgaWYoIWdvbGRMaXN0IHx8IGdvbGRMaXN0Lmxlbmd0aCA8IDEpIHJldHVybjtcclxuXHJcbiAgICAgICAgdmFyIG5ldEJlYW5EYXRhO1xyXG4gICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCBnb2xkTGlzdC5sZW5ndGg7IGkgKyspe1xyXG4gICAgICAgICAgICBuZXRCZWFuRGF0YSA9IGdvbGRMaXN0W2ldO1xyXG4gICAgICAgICAgICB2YXIgYXJlYVZhbHVlID0gcGFyc2VJbnQobmV0QmVhbkRhdGEuaXRlbS5zcGxpdCgnXycpWzBdKTtcclxuICAgICAgICAgICAgaWYobmV0QmVhbkRhdGEuc2VhdEluZGV4PT09dGhpcy5nZXRNeXNlbGZDb21wKCkuZ2V0U2VhdEluZGV4KCkpY29udGludWU7XHJcbiAgICAgICAgICAgIHZhciBkYXRhT2JqID0ge307XHJcbiAgICAgICAgICAgIHZhciBwbGF5ZXJDb21wID0gdGhpcy5jb21wX3BsYXllcnNDb250YWluZXIuZ2V0Q29tcEJ5SW5kZXgobmV0QmVhbkRhdGEuc2VhdEluZGV4KTtcclxuXHJcbiAgICAgICAgICAgIGRhdGFPYmouZ29sZFZhbHVlID0gbmV0QmVhbkRhdGEuZ29sZDtcclxuICAgICAgICAgICAgZGF0YU9iaiA9IHBsYXllckNvbXAudG91Y2hHcmFiQXJlYV9vdGhlcihkYXRhT2JqKTtcclxuICAgICAgICAgICAgZGF0YU9iaiA9IHRoaXMuY29tcF90YWJsZXNDb250YWluZXIudG91Y2hPbmVUYWJsZShhcmVhVmFsdWUsIGRhdGFPYmopO1xyXG4gICAgICAgICAgICBpZihkYXRhT2JqLmNhbGxGdW5jKSBkYXRhT2JqLmNhbGxGdW5jKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcblxyXG4gICAgLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09ICDluoTlrrbnmoTnm7jlhbPmk43kvZxcclxuXHJcbiAgICAvL+ivt+axguS4iuW6hOWIl+ihqFxyXG4gICAgc2VuZF9nZXREZWFsZXJMaXN0IDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmKEdfQ29uZmlnX2NvbW1vbi5pc0xvY2FsKXtcclxuICAgICAgICAgICAgdmFyIGRlYWxlckluZm8gPSB7XHJcbiAgICAgICAgICAgICAgICBwbGF5ZXJJZDo5LC8v546p5a62aWRcclxuICAgICAgICAgICAgICAgIGljb246JycsLy/njqnlrrblpLTlg49cclxuICAgICAgICAgICAgICAgIG5pY2tuYW1lOifnjqnlrrYxJywvL+eOqeWutuaYteensFxyXG4gICAgICAgICAgICAgICAgY29pbjoyMTAwMDAsLy/njqnlrrbkvZnpop1cclxuICAgICAgICAgICAgICAgIG1heERlYWxlckNvaW46MjEwMDAwLCAvLyDmnIDlpKfkuIrluoTph5Hpop1cclxuICAgICAgICAgICAgICAgIHVzYWJsZUJhbGFuY2UgOiAyMDAwMDAsIC8v5Y+v55So6YeR6aKdXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHZhciBwbGF5ZXJMaXN0ID0gW1xyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHBsYXllcklkIDogMSxcclxuICAgICAgICAgICAgICAgICAgICBoZWFkSW1nIDogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgbmlja25hbWUgOiAn546p5a62MycsXHJcbiAgICAgICAgICAgICAgICAgICAgY29pbiA6IDk5OTk5LFxyXG4gICAgICAgICAgICAgICAgICAgIHVzYWJsZUJhbGFuY2UgOiAxMTExMSxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgcGxheWVySWQgOiAyLFxyXG4gICAgICAgICAgICAgICAgICAgIGhlYWRJbWcgOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICBuaWNrbmFtZSA6ICfnjqnlrrYyJyxcclxuICAgICAgICAgICAgICAgICAgICBjb2luIDogOTk5OTksXHJcbiAgICAgICAgICAgICAgICAgICAgdXNhYmxlQmFsYW5jZSA6IDExMTExLFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBdXHJcbiAgICAgICAgICAgIHZhciBkYXRhT2JqID0ge1xyXG4gICAgICAgICAgICAgICAgLy9teUdvbGQgOiBHRy5idWxsMTAwTWdyLmdldE15c2VsZkNvbXAoKS5nZXRHb2xkVmFsdWUoKSxcclxuICAgICAgICAgICAgICAgIG15R29sZCA6IGRlYWxlckluZm8udXNhYmxlQmFsYW5jZSxcclxuICAgICAgICAgICAgICAgIGRlYWxlckluZm8gOiBkZWFsZXJJbmZvLFxyXG4gICAgICAgICAgICAgICAgcmFua0xpc3QgOiBwbGF5ZXJMaXN0LFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuc2hvd1VJX2RlYWxlckxpc3QoZGF0YU9iaik7XHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIHZhciBuZXREYXRhID0ge31cclxuICAgICAgICAgICAgdGhpcy5zZXREZWFsZXJOZXRUeXBlKEdfVFlQRS5kZWFsZXJOZXRUeXBlLmdldExpc3QpO1xyXG4gICAgICAgICAgICBHRy5zb2NrZXRNZ3IuU2VuZE1zZyhOZXRUeXBlLnNfYnVsbDEwMF9nZXREZWFsZXJMaXN0LCBuZXREYXRhKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgLy/or7fmsYLkuIrluoRcclxuICAgIHNlbmRfdXBEZWFsZXIgOiBmdW5jdGlvbiAoc2VuZEdvbGQpIHtcclxuICAgICAgICBpZihHX0NvbmZpZ19jb21tb24uaXNMb2NhbCkge1xyXG4gICAgICAgICAgICB2YXIgZGVhbGVySW5mbyA9IHtcclxuICAgICAgICAgICAgICAgIHBsYXllcklkOjYsLy/njqnlrrZpZFxyXG4gICAgICAgICAgICAgICAgaWNvbjonJywvL+eOqeWutuWktOWDj1xyXG4gICAgICAgICAgICAgICAgbmlja25hbWU6J+eOqeWutjEnLC8v546p5a625pi156ewXHJcbiAgICAgICAgICAgICAgICBjb2luOjExMDAwMCwvL+eOqeWutuS9meminVxyXG4gICAgICAgICAgICAgICAgbWF4RGVhbGVyQ29pbjoxMTAwMDAsIC8vIOacgOWkp+S4iuW6hOmHkeminVxyXG4gICAgICAgICAgICAgICAgdXNhYmxlQmFsYW5jZSA6IDEwMDAwMCwgLy/lj6/nlKjph5Hpop1cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgdmFyIHBsYXllckxpc3QgPSBbXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgcGxheWVySWQgOiAxLFxyXG4gICAgICAgICAgICAgICAgICAgIGhlYWRJbWcgOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICBuaWNrbmFtZSA6ICfnjqnlrrYzJyxcclxuICAgICAgICAgICAgICAgICAgICBjb2luIDogOTk5OTksXHJcbiAgICAgICAgICAgICAgICAgICAgdXNhYmxlQmFsYW5jZSA6IDExMTExLFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBwbGF5ZXJJZCA6IDIsXHJcbiAgICAgICAgICAgICAgICAgICAgaGVhZEltZyA6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgIG5pY2tuYW1lIDogJ+eOqeWutjInLFxyXG4gICAgICAgICAgICAgICAgICAgIGNvaW4gOiA5OTk5OSxcclxuICAgICAgICAgICAgICAgICAgICB1c2FibGVCYWxhbmNlIDogMTExMTEsXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHBsYXllcklkIDogMyxcclxuICAgICAgICAgICAgICAgICAgICBoZWFkSW1nIDogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgbmlja25hbWUgOiAn546p5a62NScsXHJcbiAgICAgICAgICAgICAgICAgICAgY29pbiA6IDk5MDksXHJcbiAgICAgICAgICAgICAgICAgICAgdXNhYmxlQmFsYW5jZSA6IDExMDEsXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIF1cclxuICAgICAgICAgICAgdmFyIGRhdGFPYmogPSB7XHJcbiAgICAgICAgICAgICAgICAvL215R29sZCA6IEdHLmJ1bGwxMDBNZ3IuZ2V0TXlzZWxmQ29tcCgpLmdldEdvbGRWYWx1ZSgpLFxyXG4gICAgICAgICAgICAgICAgbXlHb2xkIDogZGVhbGVySW5mby51c2FibGVCYWxhbmNlLFxyXG4gICAgICAgICAgICAgICAgZGVhbGVySW5mbyA6IGRlYWxlckluZm8sXHJcbiAgICAgICAgICAgICAgICByYW5rTGlzdCA6IHBsYXllckxpc3QsXHJcbiAgICAgICAgICAgICAgICB0aXBTdHIgOiAn5LiK5bqE5oiQ5Yqf77yB77yB77yBJ1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhciBjb21wID0gdGhpcy5jb21wX3VpTGF5ZXIuZ2V0VUlDb21wKEdfUkVTX1VSTC51aU5hbWUuZGVhbGVyTGlzdClcclxuICAgICAgICAgICAgaWYoY29tcCkgY29tcC51cERlYWxlclN1Y2Nlc3MoZGF0YU9iaik7XHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIHZhciBuZXREYXRhID0ge1xyXG4gICAgICAgICAgICAgICAgY29pbiA6IHNlbmRHb2xkXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHRoaXMuc2V0RGVhbGVyTmV0VHlwZShHX1RZUEUuZGVhbGVyTmV0VHlwZS51cERlYWxlcik7XHJcbiAgICAgICAgICAgIEdHLnNvY2tldE1nci5TZW5kTXNnKE5ldFR5cGUuc19idWxsMTAwX2RlYWxlclVwLCBuZXREYXRhKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgLy/or7fmsYLkuIvluoRcclxuICAgIHNlbmRfZG93bkRlYWxlciA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgaXNEZWFsZXIgPSB0aGlzLmdldE15c2VsZkNvbXAoKS5nZXRJc0RlYWxlcigpO1xyXG4gICAgICAgIGlmIChpc0RlYWxlcikge1xyXG4gICAgICAgICAgICBHRy50aXBzTWdyLnNob3dDb25maXJtVGlwX1RXTyhHX0NISU5FU0UuZ2l2ZVVwRGVhbGVyMiwgdGhpcy5fY29tbWl0RG93bkRlYWxlci5iaW5kKHRoaXMpKTtcclxuICAgICAgICAgICAgdmFyIGNvbXAgPSB0aGlzLmNvbXBfdWlMYXllci5nZXRVSUNvbXAoR19SRVNfVVJMLnVpTmFtZS5kZWFsZXJMaXN0KVxyXG4gICAgICAgICAgICBpZihjb21wKSBjb21wLmhpZGVMYXllcigpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2NvbW1pdERvd25EZWFsZXIoKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgLy/noa7orqTkuIvluoRcclxuICAgIF9jb21taXREb3duRGVhbGVyIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBuZXREYXRhID0ge307XHJcbiAgICAgICAgR0cuc29ja2V0TWdyLlNlbmRNc2coTmV0VHlwZS5zX2J1bGwxMDBfZGVhbGVyRG93biwgbmV0RGF0YSk7XHJcblxyXG4gICAgfSxcclxuICAgIC8v6K+35rGC57ut5bqEICBjYW5jZWxDYWxsRnVuYzog5Y+W5raI57ut5bqE55qE5pe25YCZ6LCD55SoXHJcbiAgICBzZW5kX2NvbnRpbnVlRGVhbGVyIDogZnVuY3Rpb24gKHNlbmRHb2xkLCBjYW5jZWxDYWxsRnVuYykge1xyXG4gICAgICAgIEdHLnRpcHNNZ3Iuc2hvd0NvbmZpcm1UaXBfVFdPKEdfVE9PTC5mb3JtYXRTdHIoR19DSElORVNFLmNvbnRpbnVlRGVhbGVyLCBzZW5kR29sZCksIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdGhpcy5jb21taXRDb250aW51ZURlYWxlcihzZW5kR29sZCk7XHJcbiAgICAgICAgfS5iaW5kKHRoaXMpLCBjYW5jZWxDYWxsRnVuYylcclxuICAgIH0sXHJcbiAgICAvL+S4u+WKqOehruiupOe7reW6hOWutlxyXG4gICAgY29tbWl0Q29udGludWVEZWFsZXIgOiBmdW5jdGlvbiAoc2VuZEdvbGQpIHtcclxuICAgICAgICB2YXIgbmV0RGF0YSA9IHtcclxuICAgICAgICAgICAgY29pbiA6IHNlbmRHb2xkXHJcbiAgICAgICAgfTtcclxuICAgICAgICBHRy5idWxsMTAwTWdyLnNldERlYWxlck5ldFR5cGUoR19UWVBFLmRlYWxlck5ldFR5cGUuY29udGludWVEZWFsZXIpO1xyXG4gICAgICAgIEdHLnNvY2tldE1nci5TZW5kTXNnKE5ldFR5cGUuc19idWxsMTAwX2RlYWxlckNvbnRpbnVlLCBuZXREYXRhKTtcclxuICAgIH0sXHJcblxyXG4gICAgLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuXHJcbiAgICAvL+S4iuW6hOWQjumakOiXj+W6lemDqFxyXG4gICAgc2V0Qm90dG9tSXNTaG93IDogZnVuY3Rpb24gKGlzU2hvdykge1xyXG4gICAgICAgIHRoaXMuY29tcF9idG5zTGF5ZXIuc2V0Qm90dG9tSXNTaG93KGlzU2hvdyk7XHJcbiAgICAgICAgLy/njqnlrrbluoTlrZfnibnmlYjmmL7npLpcclxuICAgICAgICB0aGlzLmNvbXBfcGxheWVyc0xheWVyLmdldE15c2VsZkVmZmVjdENvbXAoKS5wbGF5RGVhbGVyV29yZEFuaSgpO1xyXG4gICAgICAgIC8vIHRoaXMuY29tcF9wbGF5ZXJzTGF5ZXIuc2V0TXlzZWxmSXNTaG93KGlzU2hvdyk7XHJcbiAgICB9LFxyXG4gICAgLy/orr7nva7lvZPliY3ngrnlh7vor7fmsYLnmoTluoTlrrbnm7jlhbPnmoTor7fmsYLnsbvlnotcclxuICAgIHNldERlYWxlck5ldFR5cGUgOiBmdW5jdGlvbiAodHlwZSkge1xyXG4gICAgICAgIHRoaXMuX2RlYWxlck5ldFR5cGUgPSB0eXBlO1xyXG4gICAgfSxcclxuICAgIC8v6K6+572u5oqV5rOo5qyh5pWw55qE5pi+56S6XHJcbiAgICBzZXRCZXR0aW5nVGltZXMgOiBmdW5jdGlvbiAodGltZXMpIHtcclxuICAgICAgICB0aGlzLmxhYmVsX2JldHRpbmdUaW1lcy5zdHJpbmcgPSBHX1RPT0wuZm9ybWF0U3RyKHRoaXMuX2JldHRpbmdUaW1lc1N0ciwgdGltZXMpO1xyXG4gICAgfSxcclxuXHJcbiAgICAvL+mAmui/h+eJueaViOWxguaYvuekuuWNoeeJjOeahOe7k+aenFxyXG4gICAgc2hvd1Bva2VyUmVzdWx0IDogZnVuY3Rpb24gKHBvcywgcG9rZXJWYWx1ZSkge1xyXG4gICAgICAgIHRoaXMuY29tcF9wb2tlclJlc3VsdExheWVyLnNob3dQb2tlclJlc3VsdChwb3MsIHBva2VyVmFsdWUpO1xyXG4gICAgfSxcclxuXHJcbiAgICAvL+iOt+WPlueOqeWutuaTjeS9nOaXtueahOS9jee9rlxyXG4gICAgZ2V0TXlzZWxmUG9zIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmNvbXBfcGxheWVyc0xheWVyLmdldE15c2VsZlBvcygpXHJcbiAgICB9LFxyXG4gICAgLy/ojrflj5bnjqnlrrblr7nosaFcclxuICAgIGdldE15c2VsZkNvbXAgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY29tcF9wbGF5ZXJzTGF5ZXIuZ2V0TXlzZWxmQ29tcCgpXHJcbiAgICB9LFxyXG4gICAgLy/ojrflj5blnKjluqfkvY3kuIrnmoTnjqnlrrZcclxuICAgIGdldFBsYXllckNvbXBJblNpdGUgOiBmdW5jdGlvbiAoc2VhdEluZGV4KSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY29tcF9wbGF5ZXJzTGF5ZXIuZ2V0UGxheWVyQ29tcChzZWF0SW5kZXgpO1xyXG4gICAgfSxcclxuICAgIC8v6I635Y+W546p5a625b2T5YmN5oqV5rOo6ZyA6KaB6aOe6KGM55qE6YeR5biB5pWw6YePXHJcbiAgICBnZXRNeXNlbGZGbHlHb2xkTnVtIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldE15c2VsZkNvbXAoKS5nZXRGbHlHb2xkTnVtKClcclxuICAgIH0sXHJcbiAgICAvL+iOt+WPlueOqeWutuW9k+WJjeaKleazqOmcgOimgeWinuWKoOeahOmHkeW4geaVsOmHj1xyXG4gICAgZ2V0TXlzZWxmQmV0R29sZFZhbHVlIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldE15c2VsZkNvbXAoKS5nZXRDaG9vc2VHb2xkVmFsdWUoKVxyXG4gICAgfSxcclxuICAgIC8v6I635Y+W6YeR5biB55qE5a696auYXHJcbiAgICBnZXRHb2xkSW1nU2l6ZSA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5jb21wX2dvbGRzTGF5ZXIuZ2V0R29sZFNpemUoKVxyXG4gICAgfSxcclxuICAgIC8v6I635Y+W5pyA5aSn55qE5oqV5rOo6YeR6aKdXHJcbiAgICBnZXRNYXhCZXR0aW5nR29sZCA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fbWF4QmV0dGluZ0dvbGRcclxuICAgIH0sXHJcbiAgICAvL+iOt+WPluacgOWkp+eahOaKleazqOasoeaVsFxyXG4gICAgZ2V0TWF4QmV0dGluZ1RpbWVzIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9tYXhCZXR0aW5nVGltZXNcclxuICAgIH0sXHJcbiAgICBnZXRNYXRjaElEIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9tYXRjaElEXHJcbiAgICB9LFxyXG4gICAgZ2V0QnRuc0NvbXAgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY29tcF9idG5zTGF5ZXI7XHJcbiAgICB9LFxyXG4gICAgLy/lvZPnn6XpgZPmoYzlrZDnmoTntKLlvJXnmoTml7blgJnvvIzlj6/ku6Xojrflj5blj5blpKfnmoTmoLzlrZDnmoTntKLlvJVcclxuICAgIGdldEJpZ1RhYmxlSW5kZXggOiBmdW5jdGlvbiAoaW5kZXgpIHtcclxuICAgICAgICByZXR1cm4gaW5kZXgqMlxyXG4gICAgfSxcclxuICAgIC8v5b2T55+l6YGT5qGM5a2Q55qE57Si5byV55qE5pe25YCZ77yM5Y+v5Lul6I635Y+W5Y+W5bCP55qE5qC85a2Q55qE57Si5byVXHJcbiAgICBnZXRNaW5UYWJsZUluZGV4IDogZnVuY3Rpb24gKGluZGV4KSB7XHJcbiAgICAgICAgcmV0dXJuIGluZGV4KjIrMVxyXG4gICAgfSxcclxuICAgIC8v5b2T55+l6YGT5qGM5a2Q55qE5aSn5bCP57Si5byV55qE5pe25YCZ77yM5qGM5a2Q5a655Zmo5Lit55qE5qGM5a2Q57Si5byVXHJcbiAgICBnZXRUYWJsZUNvbnRhaW5lckluZGV4IDogZnVuY3Rpb24gKGluZGV4KSB7XHJcbiAgICAgICAgdmFyIGNvbnRhaW5lckluZGV4O1xyXG4gICAgICAgIGlmKGluZGV4JTI9PTApe1xyXG4gICAgICAgICAgICAvL+WBtuaVsFxyXG4gICAgICAgICAgICBjb250YWluZXJJbmRleCA9IGluZGV4LzI7XHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIGNvbnRhaW5lckluZGV4ID0gKGluZGV4LTEpLzI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBjb250YWluZXJJbmRleFxyXG4gICAgfSxcclxuICAgIC8v6I635Y+W5qGM5a2Q57Si5byV5a+55bqU55qE5oqV5rOo6aG56KGo56S6XHJcbiAgICBnZXRJdGVtQnlUYWJsZUluZGV4IDogZnVuY3Rpb24gKHRhYmxlSW5kZXgpIHtcclxuICAgICAgICByZXR1cm4gX2luZGV4VG9JdGVtU3RyW3RhYmxlSW5kZXhdXHJcbiAgICB9LFxyXG4gICAgLy/ojrflj5bmipXms6jpobnooajnpLrlr7nlupTnmoTmoYzlrZDntKLlvJVcclxuICAgIGdldFRhYmxlSW5kZXhCeUl0ZW0gOiBmdW5jdGlvbiAoaXRlbVN0cikge1xyXG4gICAgICAgIHJldHVybiBfaXRlbVRvSW5kZXhbaXRlbVN0cl1cclxuICAgIH0sXHJcbiAgICAvL+iOt+WPluetueeggemAiemhueWAvFxyXG4gICAgZ2V0Q2hpcFZhbHVlTGlzdCA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fY2hpcFZhbHVlTGlzdFxyXG4gICAgfSxcclxuICAgIC8v6I635Y+W6L+b5oi/5L+h5oGvXHJcbiAgICBnZXRFbnRlckhvbWVEYXRhIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9lbnRlckhvbWVEYXRhXHJcbiAgICB9LFxyXG4gICAgLy/ojrflj5blvZPliY3mr5TotZvmmK/lkKblt7Lnu4/lvIDlsYBcclxuICAgIGdldElzQmV0U3RhcnQgOiBmdW5jdGlvbiAoX25leHRTdGFydFRpbWUsIF9jdXJFbmRHcmFiVGltZSkge1xyXG4gICAgICAgIGlmKCFfbmV4dFN0YXJ0VGltZSkgX25leHRTdGFydFRpbWUgPSB0aGlzLl9uZXh0U3RhcnRUaW1lO1xyXG4gICAgICAgIGlmKCFfY3VyRW5kR3JhYlRpbWUpIF9jdXJFbmRHcmFiVGltZSA9IHRoaXMuX2N1ckVuZEdyYWJUaW1lO1xyXG4gICAgICAgIHZhciBzZXJ2ZXJUaW1lID0gR0cuc29ja2V0TWdyLmdldFNlcnZlclRpbWUoKTtcclxuICAgICAgICBpZihfbmV4dFN0YXJ0VGltZSA+IHNlcnZlclRpbWUgJiYgc2VydmVyVGltZSA+PSBfY3VyRW5kR3JhYlRpbWUpe1xyXG4gICAgICAgICAgICAvL+acquW8gOWxgFxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2VcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRydWVcclxuICAgIH0sXHJcbiAgICAvL+iOt+WPluaIv+mXtOWQjeWtl1xyXG4gICAgZ2V0SG9tZU5hbWUgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2hvbWVOYW1lXHJcbiAgICB9LFxyXG4gICAgLy/ojrflj5bmiL/pl7RJRFxyXG4gICAgZ2V0SG9tZUlEIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9ob21lSURcclxuICAgIH0sXHJcbiAgICAvL+aYr+WQpuW3sue7j+aKleazqFxyXG4gICAgZ2V0SXNCZXR0aW5nIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldE15c2VsZkNvbXAoKS5nZXRJc0JldHRpbmcoKTtcclxuICAgIH0sXHJcbiAgICAvL+iOt+WPluacgOWwj+S4iuW6hOmHkeminVxyXG4gICAgZ2V0TWluRGVhbGVyR29sZCA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fbWluRGVhbGVyR29sZFxyXG4gICAgfSxcclxuICAgIC8v5pys5Zyw5piv5ZCm5Li65bqE5a6254q25oCBXHJcbiAgICBnZXREZWFsZXJTdGF0ZSA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5faXNEZWFsZXJTaWduO1xyXG4gICAgfSxcclxuICAgIC8v6I635Y+W5qGM5a2Q5a655ZmoXHJcbiAgICBnZXRUYWJsZUNvbnRhaW5lciA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5jb21wX3RhYmxlc0xheWVyXHJcbiAgICB9LFxyXG4gICAgLy/ojrflj5bph5HluIHlrrnlmahcclxuICAgIGdldEdvbGRDb250YWluZXIgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY29tcF9nb2xkc0xheWVyXHJcbiAgICB9LFxyXG4gICAgLy/ojrflj5blkIPnk5znvqTkvJfnmoTmipXms6jkvY3nva5cclxuICAgIGdldElkbGVCZXR0aW5nUG9zIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmNvbXBfYnRuc0xheWVyLmdldElkbGVCZXR0aW5nUG9zKClcclxuICAgIH0sXHJcbiAgICAvL+iOt+WPluWQg+eTnOe+pOS8l+eahOaKleazqOiusOW9lVxyXG4gICAgZ2V0SWRsZUJldHRpbmcgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RpY3RfaWRsZUJldHRpbmdcclxuICAgIH0sXHJcbiAgICAvL+esrOS4gOasoei/m+WFpea4uOaIj+aYr+WQpuWPr+aKvOazqFxyXG4gICAgZ2V0Rmlyc3RCZXR0aW5nOiBmdW5jdGlvbiBnZXRJc1dhaXQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3N0YXJ0R2FtZTtcclxuICAgIH0sXHJcblxyXG4gICAgLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PeWinuWKoOWvueeOqeWutuiHquW3semHkemineWPmOWMlueahOebkeWQrFxyXG5cclxuICAgIGFkZE15R29sZExpc3RlbmVyIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuX2xpc3RlbmVyTmFtZSA9IEdHLkxpc3RlbmVyLnJlZ2lzdGVyRnVuYyhHX1RZUEUuZ2xvYmFsTGlzdGVuZXIucGxheWVyR29sZCwgdGhpcy5vbl9nb2xkQ2hhbmdlLmJpbmQodGhpcykpO1xyXG4gICAgfSxcclxuICAgIG9uX2dvbGRDaGFuZ2UgOiBmdW5jdGlvbiAobGlzdGVuZXJOYW1lLCBkYXRhT2JqKSB7XHJcbiAgICAgICAgaWYodGhpcy5ub2RlLmFjdGl2ZSl7XHJcbiAgICAgICAgICAgIHZhciBkYXRhT2JqID0gR19PQkouZGF0YV9zZWxmTWF0Y2hFbmREYXRhKCk7XHJcbiAgICAgICAgICAgIGRhdGFPYmoubGVhdmVHb2xkID0gcGFyc2VJbnQoZGF0YU9iai5iYWxhbmNlKTtcclxuICAgICAgICAgICAgdGhpcy5zZXRNYXRjaEVuZE15U2VsZkRhdGEoZGF0YU9iaik7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcblxyXG4gICAgLy/orr7nva7nu5Pnrpfml7blgJnoh6rlt7HnmoTph5HluIHkv6Hmga9cclxuICAgIHNldE1hdGNoRW5kTXlTZWxmRGF0YSA6IGZ1bmN0aW9uIChkYXRhT2JqKSB7XHJcbiAgICAgICAgdGhpcy5faW5pdE1hdGNoRW5kRGF0YSgpO1xyXG4gICAgICAgIC8vdmFyIGRhdGFPYmogPSBHX09CSi5kYXRhX3NlbGZNYXRjaEVuZERhdGEoKTtcclxuICAgICAgICBpZighdGhpcy5fbWF0Y2hFbmREYXRhLm15c2VsZkluZm8pIHRoaXMuX21hdGNoRW5kRGF0YS5teXNlbGZJbmZvID0gR19PQkouZGF0YV9zZWxmTWF0Y2hFbmREYXRhKCk7XHJcbiAgICAgICAgaWYoT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGRhdGFPYmouY2hhbmdlR29sZCk9PT0nW29iamVjdCBOdW1iZXJdJykge1xyXG4gICAgICAgICAgICB0aGlzLl9tYXRjaEVuZERhdGEubXlzZWxmSW5mby5jaGFuZ2VHb2xkID0gZGF0YU9iai5jaGFuZ2VHb2xkO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZihPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoZGF0YU9iai5sZWF2ZUdvbGQpPT09J1tvYmplY3QgTnVtYmVyXScpIHtcclxuICAgICAgICAgICAgdGhpcy5fbWF0Y2hFbmREYXRhLm15c2VsZkluZm8ubGVhdmVHb2xkID0gZGF0YU9iai5sZWF2ZUdvbGQ7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIC8v5b2T5pyJ5ZCD55Oc576k5LyX5oqV5rOo55qE5pe25YCZ6K6w5b2V5L+h5oGvXHJcbiAgICBfYWRkSWRsZUJldHRpbmcgOiBmdW5jdGlvbiAodGFibGVJbmRleCwgZ29sZEltZ051bSkge1xyXG4gICAgICAgIGlmKCF0aGlzLl9kaWN0X2lkbGVCZXR0aW5nKSB0aGlzLl9kaWN0X2lkbGVCZXR0aW5nID0ge307XHJcbiAgICAgICAgaWYoIXRoaXMuX2RpY3RfaWRsZUJldHRpbmdbdGFibGVJbmRleF0pIHRoaXMuX2RpY3RfaWRsZUJldHRpbmdbdGFibGVJbmRleF0gPSBnb2xkSW1nTnVtO1xyXG4gICAgICAgIGVsc2UgdGhpcy5fZGljdF9pZGxlQmV0dGluZ1t0YWJsZUluZGV4XSArPSBnb2xkSW1nTnVtXHJcbiAgICB9LFxyXG4gICAgLy/liJ3lp4vljJbnu5Pnrpfkv6Hmga9cclxuICAgIF9pbml0TWF0Y2hFbmREYXRhIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmKCF0aGlzLl9tYXRjaEVuZERhdGEpIHRoaXMuX21hdGNoRW5kRGF0YSA9IEdfT0JKLmRhdGFfbWF0Y2hFbmQoKTtcclxuICAgIH0sXHJcblxyXG4gICAgLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cclxuICAgIGFkZExvbmdMaXN0ZW5PblN0YXJ0IDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIEdHLnNvY2tldE1nci5yZWdpc3RlckxvbmcoTmV0VHlwZS5yX2J1bGwxMDBfcmVTdGFydEdhbWUsIHRoaXMubmV0X3Jlc2V0R2FtZURhdGEuYmluZCh0aGlzKSk7XHJcbiAgICAgICAgR0cuc29ja2V0TWdyLnJlZ2lzdGVyTG9uZyhOZXRUeXBlLnJfZ3JhYkVuZCwgdGhpcy5uZXRfYmV0dGluZ0VuZC5iaW5kKHRoaXMpKTtcclxuICAgICAgICBHRy5zb2NrZXRNZ3IucmVnaXN0ZXJMb25nKE5ldFR5cGUucl9vdGhlckdyYWIsIHRoaXMubmV0X290aGVyR3JhYi5iaW5kKHRoaXMpKTtcclxuICAgICAgICBHRy5zb2NrZXRNZ3IucmVnaXN0ZXJMb25nKE5ldFR5cGUucl9taW5lSGF2ZUdyYWIsIHRoaXMubmV0X21pbmVIYXNHcmFiLmJpbmQodGhpcykpO1xyXG4gICAgICAgIEdHLnNvY2tldE1nci5yZWdpc3RlckxvbmcoTmV0VHlwZS5yX29uZUluSG9tZSwgdGhpcy5uZXRfc29tZU9uZUluSG9tZS5iaW5kKHRoaXMpKTtcclxuXHJcbiAgICAgICAgR0cuc29ja2V0TWdyLnJlZ2lzdGVyTG9uZyhOZXRUeXBlLnJfZ3JhYl9leGl0UmV0dXJuLCB0aGlzLm5ldF9leGl0SG9tZS5iaW5kKHRoaXMpKTtcclxuICAgICAgICAvLyBHRy5zb2NrZXRNZ3IucmVnaXN0ZXJMb25nKE5ldFR5cGUucl9pZGxlVGltZU91dCwgdGhpcy5uZXRfaWRsZVRpbWVPdXQuYmluZCh0aGlzKSk7XHJcbiAgICAgICAgR0cuc29ja2V0TWdyLnJlZ2lzdGVyTG9uZyhOZXRUeXBlLnJfYnVsbDEwMF9kZWFsZXJEb3duV2FybmluZywgdGhpcy5uZXRfZGVhbGVyQ29udGludWVXYXJuaW5nLmJpbmQodGhpcykpO1xyXG4gICAgICAgIEdHLnNvY2tldE1nci5yZWdpc3RlckxvbmcoTmV0VHlwZS5yX2J1bGwxMDBfZGVhbGVyTGlzdFJldHVybiwgdGhpcy5uZXRfcmV0dXJuRGVhbGVyTGlzdC5iaW5kKHRoaXMpKTtcclxuICAgICAgICBHRy5zb2NrZXRNZ3IucmVnaXN0ZXJMb25nKE5ldFR5cGUucl9idWxsMTAwX2Rvd25EZWFsZXJSZXR1cm4sIHRoaXMubmV0X3JldHVybkRvd25EZWFsZXIuYmluZCh0aGlzKSk7XHJcbiAgICB9LFxyXG5cclxuICAgIC8v55m+5Lq64oCU4oCU6L+b5YWl5oi/6Ze05o6l5pS25Yiw55qE5L+h5oGvXHJcbiAgICBuZXRfc2V0SG9tZURhdGEgOiBmdW5jdGlvbiAocmVjdkRhdGEpIHtcclxuICAgICAgICB2YXIgdGlwID0gcmVjdkRhdGEudGlwO1xyXG4gICAgICAgIGlmKHRpcC5jb2RlICE9IEdfVFlQRS5zZXJ2ZXJDb2RlVHlwZS5zdWNjZXNzKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5fZGVhbEluSG9tZU5ldERhdGEocmVjdkRhdGEpO1xyXG4gICAgICAgIC8v5piv5ZCm5byA5bGA5Yik5a6aXHJcbiAgICAgICAgdmFyIHNlcnZlclRpbWUgPSBHRy5zb2NrZXRNZ3IuZ2V0U2VydmVyVGltZSgpO1xyXG4gICAgICAgIGlmKHNlcnZlclRpbWUgPCB0aGlzLl9jdXJFbmRHcmFiVGltZSl7XHJcbiAgICAgICAgICAgIC8v5oqV5rOo5pe26Ze0XHJcbiAgICAgICAgICAgIGlmKHRoaXMuX2lkbGVUaXAgJiYgdGhpcy5faWRsZVRpcC5nZXRJc1Nob3coKSkge1xyXG4gICAgICAgICAgICAgICAgLy/lt7Lnu4/lrZjlnKjor6V0aXBcclxuICAgICAgICAgICAgICAgIHRoaXMuX2lkbGVUaXAuZm9yY2VFbmQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLnJlc2V0U2hvdygpO1xyXG4gICAgICAgICAgICB0aGlzLl9zdGFydEdhbWUgPSB0cnVlO1xyXG4gICAgICAgICAgICB2YXIgc2VjcyA9IHRoaXMuX2dldE9mZlNlY29uZHMoR0cuc29ja2V0TWdyLmdldFNlcnZlclRpbWUoKSwgdGhpcy5fY3VyRW5kR3JhYlRpbWUpO1xyXG4gICAgICAgICAgICB0aGlzLmNtZF9zdGFydEJldHRpbmcoc2Vjcyk7XHJcbiAgICAgICAgICAgIHRoaXMuX2dpdmVQb2tlcnModHJ1ZSk7XHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIC8v5pyq5byA5bGAXHJcbiAgICAgICAgICAgIHRoaXMuX2lzUGF1c2VPdmVyTWF0Y2ggPSB0cnVlO1xyXG4gICAgICAgICAgICB0aGlzLnJlc2V0U2hvdygpO1xyXG4gICAgICAgICAgICB0aGlzLl9zdGFydEdhbWUgPSBmYWxzZTtcclxuICAgICAgICAgICAgdmFyIHNlY3MgPSB0aGlzLl9nZXRPZmZTZWNvbmRzKHNlcnZlclRpbWUsIHRoaXMuX25leHRTdGFydFRpbWUpO1xyXG4gICAgICAgICAgICBpZihzZWNzIDw9IDApe1xyXG4gICAgICAgICAgICAgICAgLy/ljaHml7bpl7TngrnkuoYs55u05o6l5byA5aeL5oqV5rOoXHJcbiAgICAgICAgICAgICAgICBzZWNzID0gdGhpcy5fZ2V0T2ZmU2Vjb25kcyhHRy5zb2NrZXRNZ3IuZ2V0U2VydmVyVGltZSgpLCB0aGlzLl9jdXJFbmRHcmFiVGltZSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNtZF9zdGFydEJldHRpbmcoc2Vjcyk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9naXZlUG9rZXJzKHRydWUpO1xyXG4gICAgICAgICAgICB9ZWxzZSB0aGlzLmNtZF93YWl0KHNlY3MpO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgLy/lpITnkIbov5vmiL/kv6Hmga9cclxuICAgIF9kZWFsSW5Ib21lTmV0RGF0YSA6IGZ1bmN0aW9uIChyZWN2RGF0YSkge1xyXG4gICAgICAgIHRoaXMuX2VudGVySG9tZURhdGEgPSByZWN2RGF0YTtcclxuICAgICAgICB2YXIgbWF0Y2ggPSByZWN2RGF0YS5tYXRjaDtcclxuXHJcbiAgICAgICAgdmFyIHRpbWUxID0gbmV3IERhdGUoR0cuc29ja2V0TWdyLmdldFNlcnZlclRpbWUoKSk7XHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ+W9k+WJje+8muaXtjonK3RpbWUxLmdldEhvdXJzKCkrJ+WIhjonK3RpbWUxLmdldE1pbnV0ZXMoKSsn56eSOicrdGltZTEuZ2V0U2Vjb25kcygpKVxyXG4gICAgICAgIHZhciB0aW1lMiA9IG5ldyBEYXRlKG1hdGNoLmJlZ2luVGltZU5leHQpO1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCfkuIvmrKHlvIDlsYDvvJrml7Y6Jyt0aW1lMi5nZXRIb3VycygpKyfliIY6Jyt0aW1lMi5nZXRNaW51dGVzKCkrJ+enkjonK3RpbWUyLmdldFNlY29uZHMoKSlcclxuXHJcbiAgICAgICAgdmFyIGlkID0gR0cuZ2V0UGxheWVySUQoKTtcclxuICAgICAgICB2YXIgaW5pdERhdGEgPSB7XHJcbiAgICAgICAgICAgIG15c2VsZkRhdGEgOiB7XHJcbiAgICAgICAgICAgICAgICBjaG9vc2VEaWN0IDogcmVjdkRhdGEuYmV0Q2hpcCxcclxuICAgICAgICAgICAgICAgIHJvb21OYW1lIDogcmVjdkRhdGEucm9vbU5hbWUsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIG90aGVyc0RhdGEgOiByZWN2RGF0YS5zZWF0cyxcclxuICAgICAgICAgICAgZGVhbGVyRGF0YSA6IG1hdGNoLmRlYWxlcixcclxuICAgICAgICAgICAgaG9tZURhdGEgOiB7XHJcbiAgICAgICAgICAgICAgICByb29tSWQgOiByZWN2RGF0YS5yb29tSWQsXHJcbiAgICAgICAgICAgICAgICB1c2VySWQgOiBpZCxcclxuICAgICAgICAgICAgICAgIGJldFRpbWVzIDogcmVjdkRhdGEuYmV0VGltZXMsXHJcbiAgICAgICAgICAgICAgICBtYXRjaElkIDogbWF0Y2gubWF0Y2hJZCxcclxuICAgICAgICAgICAgICAgIGJlZ2luVGltZU5leHQgOiBtYXRjaC5iZWdpblRpbWVOZXh0LFxyXG4gICAgICAgICAgICAgICAgc2V0dGxlVGltZSA6IG1hdGNoLnNldHRsZVRpbWUsXHJcbiAgICAgICAgICAgICAgICBiZXRDaGlwIDogcmVjdkRhdGEuYmV0Q2hpcCxcclxuICAgICAgICAgICAgICAgIG1pbkRlYWxlckdvbGQgOiByZWN2RGF0YS5taW5EZWFsZXJDb2luLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLl9pbml0SW5Ib21lRGF0YShpbml0RGF0YSk7XHJcbiAgICB9LFxyXG5cclxuICAgIC8v55m+5Lq64oCU4oCU6YeN5paw6K6+572u5byA5bGA5pWw5o2uXHJcbiAgICBuZXRfcmVzZXRHYW1lRGF0YSA6IGZ1bmN0aW9uIChyZWN2RGF0YSkge1xyXG4gICAgICAgIEdHLnRpcHNNZ3IuY2xlYXJDb25maXJtKCk7IC8v5riF55CG6KKr5Yqo57ut5bqEXHJcblxyXG4gICAgICAgIHZhciB0aXAgPSByZWN2RGF0YS50aXA7XHJcbiAgICAgICAgaWYodGlwLmNvZGUgIT0gR19UWVBFLnNlcnZlckNvZGVUeXBlLnN1Y2Nlc3MpIHtcclxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2codGlwLnRpcCk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy/lsYDkv6Hmga9cclxuICAgICAgICB0aGlzLnVwZGF0ZUVudGVySG9tZURhdGEocmVjdkRhdGEpO1xyXG4gICAgICAgIHZhciBtYXRjaCA9IHJlY3ZEYXRhLm1hdGNoO1xyXG4gICAgICAgIHZhciBpbml0RGF0YSA9IHtcclxuICAgICAgICAgICAgbXlzZWxmRGF0YSA6IHtcclxuICAgICAgICAgICAgICAgIGNob29zZURpY3QgOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgcm9vbU5hbWUgOiBudWxsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIG90aGVyc0RhdGEgOiByZWN2RGF0YS5zZWF0cyxcclxuICAgICAgICAgICAgZGVhbGVyRGF0YSA6IG1hdGNoLmRlYWxlcixcclxuICAgICAgICAgICAgaG9tZURhdGEgOiB7XHJcbiAgICAgICAgICAgICAgICByb29tSWQgOiByZWN2RGF0YS5yb29tSWQsXHJcbiAgICAgICAgICAgICAgICB1c2VySWQgOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgYmV0VGltZXMgOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgbWF0Y2hJZCA6IG1hdGNoLm1hdGNoSWQsXHJcbiAgICAgICAgICAgICAgICBiZWdpblRpbWVOZXh0IDogbWF0Y2guYmVnaW5UaW1lTmV4dCxcclxuICAgICAgICAgICAgICAgIHNldHRsZVRpbWUgOiBtYXRjaC5zZXR0bGVUaW1lLFxyXG4gICAgICAgICAgICAgICAgYmV0Q2hpcCA6IG51bGwsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuX2luaXRJbkhvbWVEYXRhKGluaXREYXRhKTtcclxuICAgICAgICB0aGlzLnJlc2V0U2hvdygpO1xyXG4gICAgICAgIHRoaXMuY21kX3N0YXJ0UmVhZHkoKTtcclxuICAgIH0sXHJcblxyXG4gICAgLy/nmb7kurrigJTigJTnu5PmnZ/mipXms6jvvIzov5vlhaXnu5PnrpdcclxuICAgIG5ldF9iZXR0aW5nRW5kIDogZnVuY3Rpb24gKHJlY3ZEYXRhKSB7XHJcbiAgICAgICAgdmFyIGlzUmlnaHQgPSB0aGlzLnNldEJldHRpbmdFbmRJbmZvKHJlY3ZEYXRhKTtcclxuICAgICAgICAvL+e7k+adn+aKleazqO+8jOi/m+WFpee7k+eul1xyXG4gICAgICAgIGlmKGlzUmlnaHQpIHtcclxuICAgICAgICAgICAgdGhpcy5jbWRfYmV0dGluZ0VuZCgpO1xyXG4gICAgICAgICAgICB2YXIgc2VjcyA9IHRoaXMuX2dldE9mZlNlY29uZHMoR0cuc29ja2V0TWdyLmdldFNlcnZlclRpbWUoKSwgdGhpcy5fbmV4dFN0YXJ0VGltZSk7XHJcbiAgICAgICAgICAgIHRoaXMuY21kX3dhaXQoc2Vjcyk7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICAvL+eZvuS6uuKAlOKAlOiuvue9rue7k+eul+S/oeaBr+eahOaVsOaNrlxyXG4gICAgc2V0QmV0dGluZ0VuZEluZm8gOiBmdW5jdGlvbiAocmVjdkRhdGEpIHtcclxuICAgICAgICB2YXIgdGlwID0gcmVjdkRhdGEudGlwO1xyXG4gICAgICAgIHN3aXRjaCAodGlwLmNvZGUpe1xyXG4gICAgICAgICAgICBjYXNlIEdfVFlQRS5zZXJ2ZXJDb2RlVHlwZS5zdWNjZXNzOlxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgR19UWVBFLnNlcnZlckNvZGVUeXBlLm5vQmV0dGluZzpcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuX3N1cGVyKHJlY3ZEYXRhKTtcclxuXHJcbiAgICAgICAgdGhpcy5fd2luRGljdCA9IHt9O1xyXG4gICAgICAgIHZhciBwb2tlckluZGV4LCBkYXRhTGlzdCA9IFtdO1xyXG4gICAgICAgIHZhciBwb2tlckRhdGEsIGRlYWxlck9kZHM7XHJcbiAgICAgICAgdmFyIHBva2VyVmFsdWVMaXN0ID0gW107XHJcbiAgICAgICAgZm9yKHZhciBpID0gMDtpIDwgcmVjdkRhdGEucG9rZXJzLmxlbmd0aDsgaSArKyl7XHJcbiAgICAgICAgICAgIHBva2VyRGF0YSA9IHJlY3ZEYXRhLnBva2Vyc1tpXTtcclxuICAgICAgICAgICAgdmFyIHBva2VyTGlzdCA9IHBva2VyRGF0YVsnY29kZSddLnNwbGl0KFwiLFwiKTsvL+esrOS4gOS4quaYr+W6hOWutlxyXG4gICAgICAgICAgICB2YXIgcG9rZXJJbmZvID0gW107XHJcbiAgICAgICAgICAgIGZvcih2YXIgaiA9IDA7IGogPCBwb2tlckxpc3QubGVuZ3RoOyBqICsrKXtcclxuICAgICAgICAgICAgICAgIHBva2VySW5kZXggPSBwYXJzZUludChwb2tlckxpc3Rbal0pO1xyXG4gICAgICAgICAgICAgICAgaWYoIWlzTmFOKHBva2VySW5kZXgpKXtcclxuICAgICAgICAgICAgICAgICAgICBwb2tlckluZm8ucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBva2VySW5kZXggOiBwb2tlckluZGV4LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpc09wZW4gOiBmYWxzZVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGRhdGFMaXN0LnB1c2gocG9rZXJJbmZvKTtcclxuICAgICAgICAgICAgcG9rZXJWYWx1ZUxpc3QucHVzaChwb2tlckRhdGEuY2FyZHNQb2ludCk7XHJcbiAgICAgICAgICAgIGlmIChpID4gMCkge1xyXG4gICAgICAgICAgICAgICAgLy/ljrvpmaTluoTlrrbnu5PmnpxcclxuICAgICAgICAgICAgICAgIGlmKHBva2VyRGF0YS5yZXN1bHQgPT0gJ1dJTicpe1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3dpbkRpY3RbdGhpcy5nZXRCaWdUYWJsZUluZGV4KGktMSldID0gTWF0aC5tYXgocG9rZXJEYXRhLm9kZHMsIGRlYWxlck9kZHMpO1xyXG4gICAgICAgICAgICAgICAgfWVsc2UgaWYocG9rZXJEYXRhLnJlc3VsdCA9PSAnTE9TRScpe1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3dpbkRpY3RbdGhpcy5nZXRNaW5UYWJsZUluZGV4KGktMSldID0gTWF0aC5tYXgocG9rZXJEYXRhLm9kZHMsIGRlYWxlck9kZHMpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9ZWxzZSBkZWFsZXJPZGRzID0gcG9rZXJEYXRhLm9kZHM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vdGhpcy5jb21wX3Bva2VyTGF5ZXIuc2V0UG9rZXJzRGF0YShkYXRhTGlzdCwgcG9rZXJWYWx1ZUxpc3QpO1xyXG5cclxuICAgICAgICB0aGlzLl9pbml0TWF0Y2hFbmREYXRhKCk7XHJcbiAgICAgICAgdGhpcy5fbWF0Y2hFbmREYXRhLnBva2Vyc0luZm9MaXN0ID0gZGF0YUxpc3Q7XHJcbiAgICAgICAgdGhpcy5fbWF0Y2hFbmREYXRhLnBva2Vyc1Jlc3VsdExpc3QgPSBwb2tlclZhbHVlTGlzdDtcclxuXHJcbiAgICAgICAgLy/nu5PnrpfnmoTml7blgJnmm7TmlrDluqfkvY3kuIrnmoTlhbbku5bnjqnlrrbkv6Hmga9cclxuICAgICAgICB2YXIgc2VhdHMgPSByZWN2RGF0YS5wbGF5ZXJzO1xyXG4gICAgICAgIGlmKHNlYXRzKXtcclxuICAgICAgICAgICAgdGhpcy5fbWF0Y2hFbmREYXRhLm90aGVyc0luZm8gPSB7fTtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzZWF0cy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgdmFyIHBsYXllciA9IHNlYXRzW2ldO1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChwbGF5ZXIuc2VhdEluZGV4KXtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIEdfREFUQS5nZXREZWFsZXJTZWF0SW5kZXgoKTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy/luoTlrrbliankvZnph5HluIFcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy90aGlzLmNvbXBfcGxheWVyc0xheWVyLmdldERlYWxlckNvbXAoKS5zZXRHb2xkVmFsdWUocGxheWVyLmRlYWxlckJhbGFuY2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9tYXRjaEVuZERhdGEuZGVhbGVySW5mbyA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5nZUdvbGQgOiBwbGF5ZXIuY29pbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlYXZlR29sZCA6IHBsYXllci5iYWxhbmNlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIEdfREFUQS5nZXRJZGxlUGxheWVyc1NlYXRJbmRleCgpOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9tYXRjaEVuZERhdGEub3RoZXJzSW5mb1twbGF5ZXIuc2VhdEluZGV4XSA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5nZUdvbGQgOiBwbGF5ZXIuY29pbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlYXZlR29sZCA6IHBsYXllci5iYWxhbmNlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZSA6IHBsYXllci5uaWNrbmFtZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljb24gOiBwbGF5ZXIuaWNvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0cnVlXHJcbiAgICB9LFxyXG5cclxuICAgIC8v55m+5Lq64oCU4oCU57uT5p2f5oqV5rOo77yM6YeR6ZKx55qE5Y+Y5YyW5pWw5o2uKOW9k+acieS6uuaKleazqOaXtuWAme+8jOaJjeS8mui/m+WFpei/meS4quaOpeWPoylcclxuICAgIG5ldF9taW5lSGFzR3JhYiA6IGZ1bmN0aW9uIChyZWN2RGF0YSkge1xyXG5cclxuICAgICAgICB2YXIgdGlwID0gcmVjdkRhdGEudGlwO1xyXG4gICAgICAgIGlmKHRpcC5jb2RlICE9IEdfVFlQRS5zZXJ2ZXJDb2RlVHlwZS5zdWNjZXNzKSB7XHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHRpcC50aXApO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgbXlJbmZvID0gcmVjdkRhdGEucGxheWVyO1xyXG4gICAgICAgIHZhciBkYXRhT2JqID0gR19PQkouZGF0YV9zZWxmTWF0Y2hFbmREYXRhKCk7XHJcbiAgICAgICAgZGF0YU9iai5jaGFuZ2VHb2xkID0gcGFyc2VJbnQobXlJbmZvLmNvaW4pO1xyXG4gICAgICAgIGRhdGFPYmoubGVhdmVHb2xkID0gcGFyc2VJbnQobXlJbmZvLmJhbGFuY2UpO1xyXG4gICAgICAgIHRoaXMuc2V0TWF0Y2hFbmRNeVNlbGZEYXRhKGRhdGFPYmopO1xyXG4gICAgfSxcclxuXHJcbiAgICAvL+eZvuS6uuKAlOKAlOW9k+acieafkOS4queOqeWutuaKleazqCzljIXmi6zoh6rlt7FcclxuICAgIG5ldF9vdGhlckdyYWIgOiBmdW5jdGlvbiAocmVjdkRhdGEpIHtcclxuICAgICAgICB2YXIgdGlwID0gcmVjdkRhdGEudGlwO1xyXG4gICAgICAgIGlmKHRpcC5jb2RlICE9IEdfVFlQRS5zZXJ2ZXJDb2RlVHlwZS5zdWNjZXNzKSB7XHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHRpcC50aXApO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBvdGhlcnMgPSByZWN2RGF0YS5iZXRzLCBuZXRCZWFuRGF0YTtcclxuICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgb3RoZXJzLmxlbmd0aDsgaSArKyl7XHJcbiAgICAgICAgICAgIG5ldEJlYW5EYXRhID0gb3RoZXJzW2ldO1xyXG4gICAgICAgICAgICB2YXIgdGFibGVJbmRleCA9IHRoaXMuZ2V0VGFibGVJbmRleEJ5SXRlbShuZXRCZWFuRGF0YS5pdGVtKTtcclxuICAgICAgICAgICAgdmFyIHNlYXRJbmRleCA9IG5ldEJlYW5EYXRhLnNlYXRJbmRleDtcclxuICAgICAgICAgICAgdmFyIGdvbGRJbWdOdW09IEdfQ29uZmlnX2dyYWIubnVtX290aGVyR3JhYkdvbGROdW07XHJcbiAgICAgICAgICAgIC8v5pW055CG5oqV5rOo5L+h5oGvXHJcbiAgICAgICAgICAgIHZhciBkYXRhT2JqID0gR19PQkouZGF0YV9idWxsQmV0dGluZygpO1xyXG4gICAgICAgICAgICBkYXRhT2JqLnRhYmxlSW5kZXggPSB0YWJsZUluZGV4O1xyXG4gICAgICAgICAgICBkYXRhT2JqLnBvc0xpc3QgPSB0aGlzLmNvbXBfdGFibGVzTGF5ZXIuZ2V0R29sZFBvc0xpc3QodGFibGVJbmRleCwgZ29sZEltZ051bSk7XHJcbiAgICAgICAgICAgIGRhdGFPYmouZ29sZFZhbHVlID0gbmV0QmVhbkRhdGEuZ29sZDtcclxuICAgICAgICAgICAgZGF0YU9iai5pc01pbmUgPSBmYWxzZTtcclxuICAgICAgICAgICAgLy/moLnmja7luqfkvY3liKTlrprvvIzmipXms6jnjqnlrrbouqvku71cclxuICAgICAgICAgICAgc3dpdGNoIChzZWF0SW5kZXgpe1xyXG4gICAgICAgICAgICAgICAgY2FzZSB0aGlzLmdldE15c2VsZkNvbXAoKS5nZXRTZWF0SW5kZXgoKTpcclxuICAgICAgICAgICAgICAgICAgICAvL+WcqOW6p+S9jeS4iueahOiHquW3seeahOaKleazqFxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgICAgICAgICBjYXNlIEdfREFUQS5nZXRJZGxlUGxheWVyc1NlYXRJbmRleCgpOlxyXG4gICAgICAgICAgICAgICAgICAgIC8v5ZCD55Oc576k5LyXXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YU9iai5zdGFydFBvcyA9IHRoaXMuY29tcF9idG5zTGF5ZXIuZ2V0SWRsZUJldHRpbmdQb3MoKTtcclxuICAgICAgICAgICAgICAgICAgICBkYXRhT2JqLmdvbGROdW0gPSBnb2xkSW1nTnVtO1xyXG4gICAgICAgICAgICAgICAgICAgIC8v6Ieq5bex5rKh5Zyo5bqn5L2N5LiK5Y+I5pyJ5oq85rOo6KaB5omj5o6J546p5a625YiX6KGo5Lit6Ieq5bex55qE5oqV5rOo6aKdXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLmdldE15c2VsZkNvbXAoKS5nZXRTZWF0SW5kZXgoKSAmJiB0aGlzLmdldE15c2VsZkNvbXAoKS5nZXRJc0JldHRpbmcoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL+WmguaenOi/meS4quWQg+eTnOe+pOS8l+aYr+iHquW3sVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhT2JqLmdvbGRWYWx1ZSA9IHRoaXMuZ2V0TXlzZWxmQ29tcCgpLnJlZHVjZUdvbGRFWChkYXRhT2JqLmdvbGRWYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChkYXRhT2JqLmdvbGRWYWx1ZSA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy/mnInlhbbku5bnmoTlkIPnk5znvqTkvJfmipXms6hcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fYWRkSWRsZUJldHRpbmcoZGF0YU9iai50YWJsZUluZGV4LCBkYXRhT2JqLmdvbGROdW0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl90b3VjaFRhYmxlU3VjY2VzcyhkYXRhT2JqKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWtcclxuICAgICAgICAgICAgICAgIGNhc2UgR19EQVRBLmdldERlYWxlclNlYXRJbmRleCgpOlxyXG4gICAgICAgICAgICAgICAgICAgIC8v5bqE5a62XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWtcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgLy/mraPluLjluqfkvY3kuIrnjqnlrrZcclxuICAgICAgICAgICAgICAgICAgICB2YXIgcGxheWVyQ29tcCA9IHRoaXMuZ2V0UGxheWVyQ29tcEluU2l0ZShzZWF0SW5kZXgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKHBsYXllckNvbXApIHBsYXllckNvbXAudG91Y2hUYWJsZShkYXRhT2JqLCB0aGlzLl90b3VjaFRhYmxlU3VjY2Vzcy5iaW5kKHRoaXMpKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVha1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICAvL+eZvuS6uuKAlOKAlOacieS6uuWFpeW6p1xyXG4gICAgbmV0X3NvbWVPbmVJbkhvbWUgOiBmdW5jdGlvbiAocmVjdkRhdGEpIHtcclxuXHJcbiAgICAgICAgdmFyIHRpcCA9IHJlY3ZEYXRhLnRpcDtcclxuICAgICAgICBpZih0aXAuY29kZSAhPSBHX1RZUEUuc2VydmVyQ29kZVR5cGUuc3VjY2Vzcykge1xyXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZyh0aXAudGlwKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIHBsYXllciwgcGxheWVyTGlzdCA9IHJlY3ZEYXRhLnNlYXRzLCBteVBsYXllcklEID0gR0cuZ2V0UGxheWVySUQoKTtcclxuICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgcGxheWVyTGlzdC5sZW5ndGg7IGkgKyspe1xyXG4gICAgICAgICAgICBwbGF5ZXIgPSBwbGF5ZXJMaXN0W2ldO1xyXG4gICAgICAgICAgICBpZighcGxheWVyIHx8IHBsYXllci5wbGF5ZXIucGxheWVySWQgPT0gbXlQbGF5ZXJJRCkgY29udGludWU7XHJcbiAgICAgICAgICAgIHRoaXMuY29tcF9wbGF5ZXJzTGF5ZXIub25lUGxheWVySW5zZXJ0KHBsYXllci5zZWF0SW5kZXgsIHBsYXllci5wbGF5ZXIpO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgLy/nmb7kurrigJTigJTnu63luoTorablkYou5Zyo5bqE5pe25YCZ77yM5aaC5p6c6YeR6aKd5LiN6Laz77yM5Lya5pyJ6K2m5ZGKO1xyXG4gICAgbmV0X2RlYWxlckNvbnRpbnVlV2FybmluZyA6IGZ1bmN0aW9uIChyZWN2RGF0YSkge1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCfkuIrluoTmiJDlip/vvIznu63luoTorablkYos6YeR6aKd5LiN6LazPT09PT0nKVxyXG4gICAgICAgIHZhciB0aXAgPSByZWN2RGF0YS50aXA7XHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ3RpcC50aXA9PT0nK3RpcC50aXApO1xyXG4gICAgICAgIHN3aXRjaCAodGlwLmNvZGUpe1xyXG4gICAgICAgICAgICBjYXNlIEdfVFlQRS5zZXJ2ZXJDb2RlVHlwZS5zdWNjZXNzOlxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgR19UWVBFLnNlcnZlckNvZGVUeXBlLnVwRGVhbGVyRXJyMjpcclxuICAgICAgICAgICAgICAgIC8v6YeR5biB5LiN6Laz5LiK5bqE6YeR6aKdXHJcbiAgICAgICAgICAgICAgICBHRy50aXBzTWdyLnNob3dTeXN0ZW0odGlwLnRpcCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBHX1RZUEUuc2VydmVyQ29kZVR5cGUudXBEZWFsZXJTdWNjZXNzOlxyXG4gICAgICAgICAgICAgICAgLy/mga3llpzmgqjvvIzmiJDkuLrmnKzlsYDluoTlrrYhICDmmL7npLogMiDnp5JcclxuICAgICAgICAgICAgICAgIEdHLnRpcHNNZ3Iuc2hvd1N5c3RlbShHX0NISU5FU0UudXBEZWFsZXJTdWNjZXNzLCBudWxsLCAyKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIEdfVFlQRS5zZXJ2ZXJDb2RlVHlwZS5jb250aW51ZUZhaWwxOlxyXG4gICAgICAgICAgICAgICAgLy/luoTlrrbph5HluIHkuI3otrPnu63luoRcclxuICAgICAgICAgICAgICAgIEdHLnRpcHNNZ3Iuc2hvd0NvbmZpcm1UaXBfT05FKHRpcC50aXApXHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBHX1RZUEUuc2VydmVyQ29kZVR5cGUuZG93bkRlYWxlcjQ6XHJcbiAgICAgICAgICAgICAgICAvL+aCqOWJqeS9memHkeW4geS4jei2syzlt7LkuIvluoQh6KKr5Yqo5LiL5bqEICAg57O757uf5o+Q56S6ICDmjInpkq7mmL7npLrnva7ngbBcclxuICAgICAgICAgICAgICAgIEdHLnRpcHNNZ3Iuc2hvd0NvbmZpcm1UaXBfT05FKHRpcC50aXApO1xyXG4gICAgICAgICAgICAgICAgaWYodGhpcy5nZXRNeXNlbGZDb21wKCkuZ2V0SXNEZWFsZXIoKSl7XHJcblxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgR19UWVBFLnNlcnZlckNvZGVUeXBlLndhcm5EZWFsZXIxOlxyXG4gICAgICAgICAgICAgICAgLy/lj4vmg4Xmj5DnpLo6IOaCqOeahOS4iuW6hOi1hOmHkeS4jei2szgwJe+8jOivt+WPiuaXtue7reW6hO+8geaYvuekuiA0IOenklxyXG4gICAgICAgICAgICAgICAgR0cudGlwc01nci5zaG93U3lzdGVtKEdfQ0hJTkVTRS5kb3duRGVhbGVyV2FybmluZywgbnVsbCwgNCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBHX1RZUEUuc2VydmVyQ29kZVR5cGUuY29udGludWVGYWlsMjpcclxuICAgICAgICAgICAgICAgIC8v5bqE5a626KKr5Yqo57ut5bqEXHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbmRfY29udGludWVEZWFsZXIocmVjdkRhdGEuY29pbiwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8v5pS+5byD6KKr5Yqo57ut5bqEXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRCb3R0b21Jc1Nob3codHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICB9LmJpbmQodGhpcykpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWtcclxuICAgICAgICAgICAgY2FzZSBHX1RZUEUuc2VydmVyQ29kZVR5cGUuZG93bkRlYWxlcjM6XHJcbiAgICAgICAgICAgICAgICAvL+W6hOWutuiiq+WKqOS4i+W6hFxyXG4gICAgICAgICAgICAgICAgR0cudGlwc01nci5zaG93Q29uZmlybVRpcF9PTkUodGlwLnRpcClcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIEdHLnRpcHNNZ3Iuc2hvd0NvbmZpcm1UaXBfT05FKHRpcC5jb2RlICsgdGlwLnRpcClcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIC8v55m+5Lq64oCU4oCU6I635Y+W5LiK5bqE5YiX6KGo55qE6L+U5ZueKOS4iuW6hO+8jOe7reW6hOWSjOivt+axguS4iuW6hOWIl+ihqOmDveaYr+i/lOWbnui/meS4quaOpeWPoylcclxuICAgIG5ldF9yZXR1cm5EZWFsZXJMaXN0IDogZnVuY3Rpb24gKHJlY3ZEYXRhKSB7XHJcbiAgICAgICAgdmFyIHRpcCA9IHJlY3ZEYXRhLnRpcDtcclxuICAgICAgICAvL2lmKHRpcC5jb2RlICE9IEdfVFlQRS5zZXJ2ZXJDb2RlVHlwZS5zdWNjZXNzKSB7XHJcbiAgICAgICAgLy8gICAgY29uc29sZS5sb2codGlwLnRpcCk7XHJcbiAgICAgICAgLy8gICAgdGhpcy5fZGVhbGVyTmV0VHlwZSA9IG51bGw7XHJcbiAgICAgICAgLy8gICAgcmV0dXJuO1xyXG4gICAgICAgIC8vfVxyXG5cclxuICAgICAgICBzd2l0Y2ggKHRpcC5jb2RlKXtcclxuICAgICAgICAgICAgY2FzZSBHX1RZUEUuc2VydmVyQ29kZVR5cGUuc3VjY2VzczpcclxuICAgICAgICAgICAgICAgIC8v6K+35rGC5oiQ5YqfXHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBHX1RZUEUuc2VydmVyQ29kZVR5cGUuY29udGludWVTdWNjZXNzOlxyXG4gICAgICAgICAgICAgICAgLy/nu63luoTmiJDlip9cclxuXHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBHX1RZUEUuc2VydmVyQ29kZVR5cGUuY29udGludWVGYWlsMTpcclxuICAgICAgICAgICAgICAgIC8v5Li75Yqo57ut5bqE77yM5L2Z6aKd5LiN6Laz5o+Q56S6XHJcbiAgICAgICAgICAgICAgICBHRy50aXBzTWdyLnNob3dDb25maXJtVGlwX09ORSh0aXAudGlwKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgY2FzZSBHX1RZUEUuc2VydmVyQ29kZVR5cGUudXBEZWFsZXJFcnIyOlxyXG4gICAgICAgICAgICAgICAgLy/njqnlrrbph5HluIHkuI3otrPmnIDkvY7kuIrluoTkvZnpop1cclxuICAgICAgICAgICAgICAgIEdHLnRpcHNNZ3Iuc2hvd1N5c3RlbSh0aXAudGlwLCBudWxsLCAyKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgY2FzZSBHX1RZUEUuc2VydmVyQ29kZVR5cGUuY29udGludWVGYWlsMzpcclxuICAgICAgICAgICAgICAgIC8v57ut5bqE6YeR6aKd5Li66Z2e5rOV5pWw5YC8XHJcbiAgICAgICAgICAgICAgICBHRy50aXBzTWdyLnNob3dTeXN0ZW0odGlwLnRpcCwgbnVsbCwgMik7Ly82MDAwMTTmj5DnpLpcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgY2FzZSBHX1RZUEUuc2VydmVyQ29kZVR5cGUuZG93bkRlYWxlcjU6XHJcbiAgICAgICAgICAgICAgICAvL+S4i+W6hOS5i+WQjuWPiOe7reW6hFxyXG4gICAgICAgICAgICAgICAgR0cudGlwc01nci5zaG93Q29uZmlybVRpcF9PTkUodGlwLnRpcCk7Ly82MDAwMTnmj5DnpLpcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIEdHLnRpcHNNZ3Iuc2hvd0NvbmZpcm1UaXBfT05FKHRpcC5jb2RlICsgdGlwLnRpcClcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBkZWFsZXJJbmZvID0gcmVjdkRhdGEuZGVza0RlYWxlcjtcclxuICAgICAgICB2YXIgcGxheWVyTGlzdCA9IHJlY3ZEYXRhLnBsYXllcnM7XHJcbiAgICAgICAgdmFyIGRhdGFPYmogPSB7XHJcbiAgICAgICAgICAgIG15R29sZCA6IHJlY3ZEYXRhLmRlYWxlci5tYXhEZWFsZXJDb2luLFxyXG4gICAgICAgICAgICBkZWFsZXJJbmZvIDogZGVhbGVySW5mbyxcclxuICAgICAgICAgICAgcmFua0xpc3QgOiBwbGF5ZXJMaXN0LFxyXG4gICAgICAgICAgICB0aXBTdHIgOiAnJ1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy/orr7nva7lvZPliY3njqnlrrbnmoTlj6/nlKjph5HluIFcclxuICAgICAgICB0aGlzLmdldE15c2VsZkNvbXAoKS5zZXRHb2xkVmFsdWUocmVjdkRhdGEuZGVhbGVyLmNvaW4pO1xyXG4gICAgICAgIC8v5bqE5a626YeR5biB5pu05pawXHJcbiAgICAgICAgaWYgKHRoaXMuZ2V0TXlzZWxmQ29tcCgpLmdldElzRGVhbGVyKCkpIHtcclxuICAgICAgICAgICAgdGhpcy5jb21wX3BsYXllcnNMYXllci5nZXREZWFsZXJDb21wKCkuc2V0R29sZFZhbHVlKHJlY3ZEYXRhLmRlc2tEZWFsZXIudXNhYmxlQmFsYW5jZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzd2l0Y2ggKHRoaXMuX2RlYWxlck5ldFR5cGUpe1xyXG4gICAgICAgICAgICBjYXNlIEdfVFlQRS5kZWFsZXJOZXRUeXBlLnVwRGVhbGVyOlxyXG4gICAgICAgICAgICAgICAgLy/kuIrluoRcclxuICAgICAgICAgICAgICAgIGRhdGFPYmoudGlwU3RyID0gR19DSElORVNFLmRlYWxlclN1Y2Nlc3M7XHJcbiAgICAgICAgICAgICAgICB2YXIgY29tcCA9IHRoaXMuY29tcF91aUxheWVyLmdldFVJQ29tcChHX1JFU19VUkwudWlOYW1lLmRlYWxlckxpc3QpXHJcbiAgICAgICAgICAgICAgICBpZihjb21wKSBjb21wLnVwRGVhbGVyU3VjY2VzcyhkYXRhT2JqKTtcclxuICAgICAgICAgICAgICAgIC8vdGhpcy5zZXRCb3R0b21Jc1Nob3coZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWtcclxuICAgICAgICAgICAgY2FzZSBHX1RZUEUuZGVhbGVyTmV0VHlwZS5jb250aW51ZURlYWxlcjpcclxuICAgICAgICAgICAgICAgIC8v57ut5bqEXHJcbiAgICAgICAgICAgICAgICBkYXRhT2JqLnRpcFN0ciA9IEdfQ0hJTkVTRS5jb250aW51ZURlYWxlclN1Y2Nlc3M7XHJcbiAgICAgICAgICAgICAgICB2YXIgY29tcCA9IHRoaXMuY29tcF91aUxheWVyLmdldFVJQ29tcChHX1JFU19VUkwudWlOYW1lLmRlYWxlckxpc3QpXHJcbiAgICAgICAgICAgICAgICBpZihjb21wKSBjb21wLnVwRGVhbGVyU3VjY2VzcyhkYXRhT2JqKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgICAgIGNhc2UgR19UWVBFLmRlYWxlck5ldFR5cGUuZ2V0TGlzdDpcclxuICAgICAgICAgICAgICAgIC8v6I635Y+W5LiK5bqE5YiX6KGoXHJcbiAgICAgICAgICAgICAgICB0aGlzLnNob3dVSV9kZWFsZXJMaXN0KGRhdGFPYmopO1xyXG4gICAgICAgICAgICAgICAgYnJlYWtcclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuX2RlYWxlck5ldFR5cGUgPSBudWxsO1xyXG4gICAgfSxcclxuXHJcbiAgICAvL+eZvuS6uuKAlOKAlOS4i+W6hOivt+axgueahOWbnuiwg1xyXG4gICAgbmV0X3JldHVybkRvd25EZWFsZXIgOiBmdW5jdGlvbiAocmVjdkRhdGEpIHtcclxuICAgICAgICB2YXIgdGlwID0gcmVjdkRhdGEudGlwO1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKHRpcC50aXApO1xyXG4gICAgICAgIHN3aXRjaCAodGlwLmNvZGUpe1xyXG4gICAgICAgICAgICBjYXNlIEdfVFlQRS5zZXJ2ZXJDb2RlVHlwZS5zdWNjZXNzOlxyXG4gICAgICAgICAgICAgICAgYnJlYWtcclxuICAgICAgICAgICAgY2FzZSBHX1RZUEUuc2VydmVyQ29kZVR5cGUuZG93bkRlYWxlcjE6XHJcbiAgICAgICAgICAgICAgICAvL+acrOi6q+WcqOW6hOeahOaDheWGteS4i+S4i+W6hFxyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRCb3R0b21Jc1Nob3codHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICB2YXIgdGlwT2JqID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRpcEluZGV4IDogMTksXHJcbiAgICAgICAgICAgICAgICAgICAgc2hvd1N0ciA6IEdfQ0hJTkVTRS5kb3duU3VjY2VzcyxcclxuICAgICAgICAgICAgICAgICAgICBpc0NvdW50RG93biA6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgIHNob3dQb3MgOiBHX0RBVEEuZ2V0Q2VudGVyVGlwUG9zKCksXHJcbiAgICAgICAgICAgICAgICAgICAgLy9jYWxsQmFjayA6IHRoaXMub25fYmVmb3JlU3RhcnQuYmluZCh0aGlzKVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gR0cudGlwc01nci5zaG93VHh0VGlwKHRpcE9iaik7XHJcbiAgICAgICAgICAgICAgICAvL+aCqOW3sue7j+aIkOWKn+S4i+W6hCDmmL7npLogMiDnp5JcclxuICAgICAgICAgICAgICAgIEdHLnRpcHNNZ3Iuc2hvd1N5c3RlbShHX0NISU5FU0UuZG93blN1Y2Nlc3MsIG51bGwsIDIpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGNvbXAgPSB0aGlzLmNvbXBfdWlMYXllci5nZXRVSUNvbXAoR19SRVNfVVJMLnVpTmFtZS5kZWFsZXJMaXN0KVxyXG4gICAgICAgICAgICAgICAgaWYoY29tcCkgY29tcC5zZXRCdG5TaG93KGZhbHNlKTtcclxuICAgICAgICAgICAgICAgIC8v5LiL5bqE5riF6Zmk5bqE5a2X54m55pWIXHJcbiAgICAgICAgICAgICAgICB0aGlzLmNvbXBfcGxheWVyc0xheWVyLmdldE15c2VsZkVmZmVjdENvbXAoKS5jbGVhckRlYWxlcldvcmRBbmkoKTtcclxuICAgICAgICAgICAgICAgIC8v5pu05paw5oqi5bqE5oyJ6ZKu5piv5ZCm5Y+v55SoXHJcbiAgICAgICAgICAgICAgICB0aGlzLmNvbXBfcGxheWVyc0xheWVyLnNldFVwRGVhbGVyQnRuRW5hYmxlKGZhbHNlKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgICAgIGNhc2UgR19UWVBFLnNlcnZlckNvZGVUeXBlLmRvd25EZWFsZXIyOlxyXG4gICAgICAgICAgICAgICAgLy/lnKjkuIrluoTliJfooajkuK3vvIzkvYbmmK/lubbmnKrkuIrluoTnmoTmg4XlhrXkuIvkuIvluoRcclxuICAgICAgICAgICAgICAgIHZhciBkZWFsZXJJbmZvID0gcmVjdkRhdGEuZGVza0RlYWxlcjtcclxuICAgICAgICAgICAgICAgIHZhciBwbGF5ZXJMaXN0ID0gcmVjdkRhdGEucGxheWVycztcclxuICAgICAgICAgICAgICAgIHZhciBkYXRhT2JqID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIG15R29sZDogcmVjdkRhdGEuZGVhbGVyLm1heERlYWxlckNvaW4sXHJcbiAgICAgICAgICAgICAgICAgICAgZGVhbGVySW5mbzogZGVhbGVySW5mbyxcclxuICAgICAgICAgICAgICAgICAgICByYW5rTGlzdDogcGxheWVyTGlzdCxcclxuICAgICAgICAgICAgICAgICAgICB0aXBTdHI6ICcnXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgZGF0YU9iai50aXBTdHIgPSBHX0NISU5FU0UuZ2l2ZVVwRGVhbGVyMVxyXG4gICAgICAgICAgICAgICAgLy/mm7TmlrDkuIrluoTliJfooajmlbDmja5cclxuICAgICAgICAgICAgICAgIHZhciBjb21wID0gdGhpcy5jb21wX3VpTGF5ZXIuZ2V0VUlDb21wKEdfUkVTX1VSTC51aU5hbWUuZGVhbGVyTGlzdClcclxuICAgICAgICAgICAgICAgIGlmKGNvbXApIGNvbXAuZG93bkRlYWxlclN1Y2Nlc3MoZGF0YU9iaik7XHJcbiAgICAgICAgICAgICAgICAvL+aCqOW3suS7juS4iuW6hOWIl+ihqOmAgOWHuuernuW6hFxyXG4gICAgICAgICAgICAgICAgR0cudGlwc01nci5zaG93U3lzdGVtKEdfQ0hJTkVTRS5naXZlVXBEZWFsZXIxLCBudWxsLCAyKTtcclxuICAgICAgICAgICAgICAgIC8v5pu05paw546p5a625pWw5o2uXHJcbiAgICAgICAgICAgICAgICB0aGlzLmdldE15c2VsZkNvbXAoKS5zZXRHb2xkVmFsdWUoZGF0YU9iai5teUdvbGQpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgR19UWVBFLnNlcnZlckNvZGVUeXBlLmRvd25EZWFsZXIzOlxyXG4gICAgICAgICAgICAgICAgLy/kvaDlt7Lnu4/kuIvluoTvvIzvvIjkuI3noa7lrprlhbfkvZPlvJXnlKjmg4XlhrUs5Y+v6IO95piv5pys6Lqr5rKh5pyJ5Y+C5LiO56ue5bqE5Lmf5rKh5pyJ5LiK5bqEXHJcbiAgICAgICAgICAgICAgICAvL+WmguaenOi/mOWcqOW6hOWwseabtOaUueaKvOazqOaMiemSrlxyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRCb3R0b21Jc1Nob3codHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICB2YXIgdGlwT2JqID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRpcEluZGV4IDogMTksXHJcbiAgICAgICAgICAgICAgICAgICAgc2hvd1N0ciA6IEdfQ0hJTkVTRS5kb3duU3VjY2VzcyxcclxuICAgICAgICAgICAgICAgICAgICBpc0NvdW50RG93biA6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgIHNob3dQb3MgOiBHX0RBVEEuZ2V0Q2VudGVyVGlwUG9zKCksXHJcbiAgICAgICAgICAgICAgICAgICAgLy9jYWxsQmFjayA6IHRoaXMub25fYmVmb3JlU3RhcnQuYmluZCh0aGlzKVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gR0cudGlwc01nci5zaG93VHh0VGlwKHRpcE9iaik7XHJcbiAgICAgICAgICAgICAgICAvL+aCqOW3sue7j+aIkOWKn+S4i+W6hFxyXG4gICAgICAgICAgICAgICAgR0cudGlwc01nci5zaG93U3lzdGVtKEdfQ0hJTkVTRS5kb3duU3VjY2VzcywgbnVsbCwgMik7XHJcbiAgICAgICAgICAgICAgICBicmVha1xyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgYnJlYWtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5faXNEZWFsZXJTaWduID0gZmFsc2U7XHJcbiAgICB9LFxyXG5cclxuICAgIC8v55m+5Lq64oCU4oCU6YCA5Ye65oi/6Ze055qE6K+35rGCXHJcbiAgICBuZXRfZXhpdEhvbWUgOiBmdW5jdGlvbiAocmVjdkRhdGEpIHtcclxuXHJcbiAgICAgICAgdmFyIHRpcCA9IHJlY3ZEYXRhLnRpcDtcclxuICAgICAgICBpZih0aXAuY29kZSAhPSBHX1RZUEUuc2VydmVyQ29kZVR5cGUuc3VjY2Vzcykge1xyXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZyh0aXAudGlwKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgR0cuZXhpdEhvbWUoKTtcclxuICAgIH0sXHJcblxyXG4gICAgLy/nmb7kurrigJTigJTmuLjmiI/kuK3plb/ml7bpl7TmsqHmnInlgZrmk43kvZxcclxuICAgIG5ldF9pZGxlVGltZU91dCA6IGZ1bmN0aW9uIChyZWN2RGF0YSkge1xyXG5cclxuICAgICAgICBHRy50aXBzTWdyLnNob3dDb25maXJtVGlwX09ORShyZWN2RGF0YS50aXAudGlwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIEdHLmV4aXRIb21lKCk7XHJcbiAgICAgICAgfS5iaW5kKHRoaXMpKTtcclxuICAgIH0sXHJcblxyXG4gICAgX2dldE9mZlNlY29uZHMgOiBmdW5jdGlvbiAoc3RhcnRUaW1lLCBlbmRUaW1lKSB7XHJcbiAgICAgICAgcmV0dXJuIEdHLnNvY2tldE1nci5nZXRPZmZTZWNvbmRzKHN0YXJ0VGltZSwgZW5kVGltZSk7XHJcbiAgICB9LFxyXG5cclxuICAgIC8vIGNhbGxlZCBldmVyeSBmcmFtZSwgdW5jb21tZW50IHRoaXMgZnVuY3Rpb24gdG8gYWN0aXZhdGUgdXBkYXRlIGNhbGxiYWNrXHJcbiAgICAvLyB1cGRhdGU6IGZ1bmN0aW9uIChkdCkge1xyXG5cclxuICAgIC8vIH0sXHJcblxyXG4gICAgLy89PT09PT09PT09PT09PT09PT09PT09PT11aeihqOeOsFxyXG5cclxuICAgIC8v5oqW5Yqo5ri45oiPXHJcbiAgICBzaGFrZUdhbWUgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIG9mZiA9IDI7XHJcbiAgICAgICAgdmFyIG9mZjIgPSBvZmYqMjtcclxuICAgICAgICB2YXIgdGltZSA9IDAuMDc7XHJcbiAgICAgICAgdmFyIGFjdDEgPSBjYy5tb3ZlQnkodGltZSwgLW9mZjIsIDApO1xyXG4gICAgICAgIHZhciBhY3QyID0gY2MubW92ZUJ5KHRpbWUsIG9mZjIqMiwgMCk7XHJcbiAgICAgICAgdmFyIGFjdDMgPSBjYy5tb3ZlQnkodGltZSwgLW9mZjIsIDApO1xyXG4gICAgICAgIHZhciBhY3Q0ID0gY2MubW92ZUJ5KHRpbWUsIG9mZjIsIDApO1xyXG4gICAgICAgIHZhciBhY3Q1ID0gY2MubW92ZUJ5KHRpbWUsIC1vZmYsIDApO1xyXG4gICAgICAgIHRoaXMubm9kZS5ydW5BY3Rpb24oY2Muc2VxdWVuY2UoYWN0MSxhY3QyLGFjdDMsYWN0NCxhY3Q1KSk7XHJcbiAgICB9LFxyXG5cclxuICAgIG9uRGVzdHJveSA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLl9zdXBlcigpO1xyXG4gICAgICAgIEdHLmJ1bGwxMDBNZ3IgPSBudWxsO1xyXG4gICAgICAgIEdHLkxpc3RlbmVyLmRlbExpc3RlbihHX1RZUEUuZ2xvYmFsTGlzdGVuZXIucGxheWVyR29sZCwgdGhpcy5fbGlzdGVuZXJOYW1lKTtcclxuICAgIH1cclxufSk7XHJcbiIsIi8v55m+5Lq65aSn5oiY5oyJ6ZKu566h55CG57G7XHJcblxyXG5cclxuY2MuQ2xhc3Moe1xyXG4gICAgZXh0ZW5kczogcmVxdWlyZSgnQXV0b0RlYWxpbmcnKSxcclxuXHJcbiAgICBwcm9wZXJ0aWVzOiB7XHJcbiAgICAgICAgX2xhc3RCdG4gOiBudWxsLFxyXG5cclxuICAgICAgICBub2RlX2J0bkdyb3VwIDogY2MuTm9kZSxcclxuICAgICAgICAvLyBub2RlX2VmZmVjdE9uQnV0dG9uIDogY2MuTm9kZSxcclxuICAgICAgICBub2RlX2VmZmVjdFVuZGVyQnV0dG9uIDogY2MuTm9kZSxcclxuICAgICAgICBub2RlX2V4aXRIb21lQnRuIDogY2MuTm9kZSxcclxuXHJcbiAgICAgICAgbm9kZV9yaWdodEJ0bjEgOiBjYy5Ob2RlLFxyXG4gICAgICAgIG5vZGVfcmlnaHRCdG4yIDogY2MuTm9kZSxcclxuICAgICAgICBub2RlX3JpZ2h0QnRuMyA6IGNjLk5vZGUsXHJcblxyXG4gICAgICAgIG5vZGVfY29udGludWVEZWFsZXIgOiB7XHJcbiAgICAgICAgICAgIGRlZmF1bHQgOiBudWxsLFxyXG4gICAgICAgICAgICB0eXBlIDogY2MuTm9kZSxcclxuICAgICAgICAgICAgZGlzcGxheU5hbWUgOiAn57ut5bqE5oyJ6ZKu5a655ZmoJ1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgLy8gdXNlIHRoaXMgZm9yIGluaXRpYWxpemF0aW9uXHJcbiAgICBvbkxvYWQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLl9idG5Db21wTmFtZSA9ICdPYmpfb3B0aW9uQnV0dG9uJztcclxuICAgICAgICB0aGlzLl9pc0FkYXB0UG9zID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5fcmVnaXN0ZXJBbGxCdG4oKTtcclxuICAgIH0sXHJcblxyXG4gICAgaW5pdENoaXBCdG4gOiBmdW5jdGlvbiAodmFsdWVEaWN0KSB7XHJcbiAgICAgICAgdGhpcy5fc2V0QnRuSW5mbyh2YWx1ZURpY3QpO1xyXG4gICAgfSxcclxuXHJcbiAgICBzZXRTdGFydEluZm8gOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5zZXRCdG5Hcm91cEVuYWJsZShmYWxzZSk7XHJcbiAgICB9LFxyXG5cclxuICAgIF9yZWdpc3RlckFsbEJ0biA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgYnRucyA9IHRoaXMubm9kZV9idG5Hcm91cC5jaGlsZHJlbjtcclxuICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgYnRucy5sZW5ndGg7IGkgKyspe1xyXG4gICAgICAgICAgICB0aGlzLnJlZ2lzdGVyQnV0dG9uKGJ0bnNbaV0sIHRoaXMuT25DbGlja19jaG9vc2VNb25leSwgdGhpcywgcGFyc2VJbnQoaSksIHRydWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnJlZ2lzdGVyQnV0dG9uKHRoaXMubm9kZV9leGl0SG9tZUJ0biwgdGhpcy5PbkNsaWNrX2V4aXQsIHRoaXMpO1xyXG4gICAgICAgIC8vdGhpcy5ub2RlX2V4aXRIb21lQnRuLmdldENvbXBvbmVudCgnT2JqX2xlZnRUb3BNZW51JykuYmluZEZ1bmModGhpcy5PbkNsaWNrX2V4aXQuYmluZCh0aGlzKSk7XHJcblxyXG4gICAgICAgIHRoaXMucmVnaXN0ZXJCdXR0b24odGhpcy5ub2RlX3JpZ2h0QnRuMSwgdGhpcy5PbkNsaWNrX3JpZ2h0MSwgdGhpcyk7XHJcbiAgICAgICAgdGhpcy5yZWdpc3RlckJ1dHRvbih0aGlzLm5vZGVfcmlnaHRCdG4yLCB0aGlzLk9uQ2xpY2tfcmlnaHQyLCB0aGlzKTtcclxuICAgICAgICB0aGlzLnJlZ2lzdGVyQnV0dG9uKHRoaXMubm9kZV9yaWdodEJ0bjMsIHRoaXMuT25DbGlja19yaWdodDMsIHRoaXMpO1xyXG5cclxuICAgICAgICB2YXIgY29udGludWVEZWFsZXIgPSB0aGlzLm5vZGVfY29udGludWVEZWFsZXIuY2hpbGRyZW5bMF07XHJcbiAgICAgICAgdmFyIGRvd25EZWFsZXIgPSB0aGlzLm5vZGVfY29udGludWVEZWFsZXIuY2hpbGRyZW5bMV07XHJcbiAgICAgICAgdGhpcy5yZWdpc3RlckJ1dHRvbihjb250aW51ZURlYWxlciwgdGhpcy5PbkNsaWNrX2NvbnRpbnVlRGVhbGVyLCB0aGlzKTtcclxuICAgICAgICB0aGlzLnJlZ2lzdGVyQnV0dG9uKGRvd25EZWFsZXIsIHRoaXMuT25DbGlja19sZWF2ZURlYWxlciwgdGhpcyk7XHJcbiAgICB9LFxyXG4gICAgT25DbGlja19jaG9vc2VNb25leSA6IGZ1bmN0aW9uIChldmVudCwgdXNlckRhdGEpIHtcclxuICAgICAgICB2YXIgY2hvb3NlTGV2ZWwgPSBwYXJzZUludCh1c2VyRGF0YSk7XHJcbiAgICAgICAgdGhpcy5fc2hvd0Nob29zZUVmZmVjdChldmVudC50YXJnZXQpO1xyXG5cclxuICAgICAgICB2YXIgcGxheWVyQ2hvb3NlID0gY2hvb3NlTGV2ZWwgKyAxO1xyXG4gICAgICAgIEdHLmJ1bGwxMDBNZ3IuZ2V0TXlzZWxmQ29tcCgpLmNob29zZUNoaXAocGxheWVyQ2hvb3NlKTtcclxuICAgIH0sXHJcbiAgICBPbkNsaWNrX2V4aXQgOiBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICB2YXIgaXNDb250aW51ZSA9IEdHLmJ1bGwxMDBNZ3IudGVzdEV4aXRCdG4oKTtcclxuICAgICAgICBpZighaXNDb250aW51ZSkgcmV0dXJuO1xyXG5cclxuICAgICAgICBpZihHX0NvbmZpZ19jb21tb24uaXNMb2NhbCl7XHJcbiAgICAgICAgICAgIEdHLnRpcHNNZ3Iuc2hvd0NvbmZpcm1UaXBfVFdPKEdfQ0hJTkVTRS5leGl0VGV4dDEsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIEdHLmV4aXRIb21lKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICByZXR1cm5cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmKEdHLmJ1bGwxMDBNZ3IuZ2V0SXNCZXR0aW5nKCkpe1xyXG4gICAgICAgICAgICBHRy50aXBzTWdyLnNob3dDb25maXJtVGlwX1RXTyhHX0NISU5FU0UuZXhpdFRleHQxLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbmV0RGF0YSA9IHtcclxuICAgICAgICAgICAgICAgICAgICByb29tSWQgOiBHRy5idWxsMTAwTWdyLmdldEhvbWVJRCgpLFxyXG4gICAgICAgICAgICAgICAgICAgIGlzQnJlYWsgOiB0cnVlXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBHRy5zb2NrZXRNZ3IuU2VuZE1zZyhOZXRUeXBlLnNfZ3JhYl9FeGl0LCBuZXREYXRhKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChHRy5idWxsMTAwTWdyLmdldE15c2VsZkNvbXAoKS5nZXRJc0RlYWxlcigpICYmIEdHLmJ1bGwxMDBNZ3IuZ2V0RGVhbGVyU3RhdGUoKSkge1xyXG4gICAgICAgICAgICBHRy50aXBzTWdyLnNob3dDb25maXJtVGlwX1RXTyhHX0NISU5FU0UuZXhpdFRleHQzLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbmV0RGF0YSA9IHtcclxuICAgICAgICAgICAgICAgICAgICByb29tSWQ6IEdHLmJ1bGwxMDBNZ3IuZ2V0SG9tZUlEKCksXHJcbiAgICAgICAgICAgICAgICAgICAgaXNCcmVhazogdHJ1ZVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgR0cuc29ja2V0TWdyLlNlbmRNc2coTmV0VHlwZS5zX2dyYWJfRXhpdCwgbmV0RGF0YSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0gZWxzZXtcclxuICAgICAgICAgICAgdmFyIG5ldERhdGEgPSB7XHJcbiAgICAgICAgICAgICAgICByb29tSWQgOiBHRy5idWxsMTAwTWdyLmdldEhvbWVJRCgpLFxyXG4gICAgICAgICAgICAgICAgaXNCcmVhayA6IHRydWVcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBHRy5zb2NrZXRNZ3IuU2VuZE1zZyhOZXRUeXBlLnNfZ3JhYl9FeGl0LCBuZXREYXRhKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgLy/poa/npLrnjqnlrrbliJfooahcclxuICAgIE9uQ2xpY2tfcmlnaHQxIDogZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgR0cuYnVsbDEwME1nci5zaG93VUlfcGxheWVyTGlzdCgpO1xyXG4gICAgfSxcclxuICAgIC8v6aGv56S65ri45oiP6KeE5YiZXHJcbiAgICBPbkNsaWNrX3JpZ2h0MiA6IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgIHZhciBkYXRhID0gR19UWVBFLmdhbWVNb2R1bGUuYnVsbDEwMDtcclxuICAgICAgICBHRy5idWxsMTAwTWdyLnNob3dVSV9ydWxlcyhkYXRhKTtcclxuICAgIH0sXHJcbiAgICAvL+mhr+ekuui1sOWLouWcllxyXG4gICAgT25DbGlja19yaWdodDMgOiBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICBHRy5idWxsMTAwTWdyLnNob3dVSV90cmVuZExpc3QoR0cuYnVsbDEwME1nci5nZXRIb21lSUQoKSk7XHJcbiAgICB9LFxyXG5cclxuICAgIC8v54K55Ye757ut5bqEXHJcbiAgICBPbkNsaWNrX2NvbnRpbnVlRGVhbGVyIDogZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgR0cuYnVsbDEwME1nci5zZW5kX2dldERlYWxlckxpc3QoKTtcclxuICAgIH0sXHJcbiAgICAvL+eCueWHu+S4i+W6hFxyXG4gICAgT25DbGlja19sZWF2ZURlYWxlciA6IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgIEdHLmJ1bGwxMDBNZ3Iuc2VuZF9kb3duRGVhbGVyKCk7XHJcbiAgICB9LFxyXG5cclxuICAgIF9zZXRCdG5JbmZvIDogZnVuY3Rpb24gKHZhbHVlRGljdCkge1xyXG4gICAgICAgIHZhciBidG5zID0gdGhpcy5ub2RlX2J0bkdyb3VwLmNoaWxkcmVuLCBpbmRleDtcclxuICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgYnRucy5sZW5ndGg7IGkgKyspe1xyXG4gICAgICAgICAgICBpbmRleCA9IHBhcnNlSW50KGkpO1xyXG4gICAgICAgICAgICBidG5zW2ldLnRhZyA9IHZhbHVlRGljdFtpbmRleF07XHJcbiAgICAgICAgICAgIGJ0bnNbaV0uZ2V0Q29tcG9uZW50KHRoaXMuX2J0bkNvbXBOYW1lKS5zaG93TW9uZXkodmFsdWVEaWN0W2luZGV4XSwgZmFsc2UpO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICBjaG9vc2VNb25leSA6IGZ1bmN0aW9uIChpbmRleCkge1xyXG4gICAgICAgIHZhciBidG4gPSB0aGlzLl9nZXRCdG5CeUluZGV4KGluZGV4KTtcclxuICAgICAgICAvL+iOt+WPluesrOS4gOasoei/m+aIv+aYr+WQpuWPr+S4i+azqFxyXG4gICAgICAgIHRoaXMuaXNCZXR0aW5nID0gR0cuYnVsbDEwME1nci5nZXRGaXJzdEJldHRpbmcoKTtcclxuICAgICAgICB0aGlzLl9zaG93Q2hvb3NlRWZmZWN0KGJ0bik7XHJcbiAgICB9LFxyXG5cclxuICAgIC8vbW92ZSB0b3VjaCBlZmZlY3RcclxuICAgIF9zaG93Q2hvb3NlRWZmZWN0IDogZnVuY3Rpb24gKHRhcmdldEJ0bikge1xyXG4gICAgICAgIHRoaXMuX2Nob29zZUJ0bih0YXJnZXRCdG4pO1xyXG5cclxuICAgICAgICAvL2VmZmVjdFxyXG4gICAgICAgIC8vIHRoaXMubm9kZV9lZmZlY3RPbkJ1dHRvbi5hY3RpdmUgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMubm9kZV9lZmZlY3RVbmRlckJ1dHRvbi5hY3RpdmUgPSB0cnVlO1xyXG5cclxuICAgICAgICAvLyB0aGlzLm5vZGVfZWZmZWN0T25CdXR0b24ucG9zaXRpb24gPSBjYy5wKHRhcmdldEJ0bi54LCB0YXJnZXRCdG4ueSk7O1xyXG4gICAgICAgIHRoaXMubm9kZV9lZmZlY3RVbmRlckJ1dHRvbi54ID0gdGFyZ2V0QnRuLng7XHJcbiAgICAgICAgdGhpcy5ub2RlX2VmZmVjdFVuZGVyQnV0dG9uLnkgPSAtdGFyZ2V0QnRuLmhlaWdodCowLjY1O1xyXG4gICAgICAgIC8v5Yia6L+b5YWl5ri45oiP5aaC5p6c5Y+v5LiL5rOoIOW8uuWItuiHqumAguW6lFxyXG4gICAgICAgIC8vIGlmICh0aGlzLmlzQmV0dGluZyAmJiAhdGhpcy5faXNBZGFwdFBvcykge1xyXG4gICAgICAgIC8vICAgICB0aGlzLm5vZGVfZWZmZWN0VW5kZXJCdXR0b24ucG9zaXRpb24gPSBHX1RPT0wuYWRhcHRQb3ModGhpcy5ub2RlX2VmZmVjdFVuZGVyQnV0dG9uLnBvc2l0aW9uKTtcclxuICAgICAgICAvLyAgICAgdmFyIHNpemUgPSBHX1RPT0wuYWRhcHRTaXplKHRhcmdldEJ0bi53aWR0aCwgdGFyZ2V0QnRuLmhlaWdodCk7XHJcbiAgICAgICAgLy8gICAgIHRoaXMubm9kZV9lZmZlY3RVbmRlckJ1dHRvbi53aWR0aCA9IHNpemUud2lkdGg7XHJcbiAgICAgICAgLy8gICAgIHRoaXMuX2lzQWRhcHRQb3MgPSB0cnVlO1xyXG4gICAgICAgIC8vIH0gZWxzZSB7XHJcbiAgICAgICAgLy8gICAgIHRoaXMubm9kZV9lZmZlY3RVbmRlckJ1dHRvbi53aWR0aCA9IHRhcmdldEJ0bi53aWR0aDtcclxuICAgICAgICAvLyB9XHJcbiAgICAgICAgLy8vL2FuaVxyXG4gICAgICAgIC8vIC8vdGhpcy5ub2RlX2VmZmVjdE9uQnV0dG9uLmdldENvbXBvbmVudChjYy5BbmltYXRpb24pLnBsYXkoKTtcclxuICAgIH0sXHJcbiAgICBfaGlkZUVmZmVjdCA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAvLyB0aGlzLm5vZGVfZWZmZWN0T25CdXR0b24uYWN0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5ub2RlX2VmZmVjdFVuZGVyQnV0dG9uLmFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgfSxcclxuXHJcblxyXG4gICAgLy9idXR0b24gdG91Y2ggbW92ZSB1cFxyXG4gICAgX2Nob29zZUJ0biA6IGZ1bmN0aW9uICh0YXJnZXRCdG4pIHtcclxuICAgICAgICB0aGlzLl9jYW5jZWxDaG9vc2UoKTtcclxuICAgICAgICB0YXJnZXRCdG4uZ2V0Q29tcG9uZW50KHRoaXMuX2J0bkNvbXBOYW1lKS5zaG93TW9uZXkobnVsbCwgdHJ1ZSk7XHJcbiAgICAgICAgLy90YXJnZXRCdG4ueSArPSB0YXJnZXRCdG4uaGVpZ2h0LzI7XHJcbiAgICAgICAgdGhpcy5zZXRCdG5FbmFibGUodGFyZ2V0QnRuLCBmYWxzZSwgdHJ1ZSk7XHJcbiAgICAgICAgdGhpcy5fbGFzdEJ0biA9IHRhcmdldEJ0bjtcclxuICAgIH0sXHJcbiAgICBfY2FuY2VsQ2hvb3NlIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmKHRoaXMuX2xhc3RCdG4pe1xyXG4gICAgICAgICAgICB0aGlzLl9oaWRlRWZmZWN0KCk7XHJcbiAgICAgICAgICAgIHRoaXMuX2xhc3RCdG4uZ2V0Q29tcG9uZW50KHRoaXMuX2J0bkNvbXBOYW1lKS5zaG93TW9uZXkobnVsbCwgZmFsc2UpO1xyXG4gICAgICAgICAgICB0aGlzLnNldEJ0bkVuYWJsZSh0aGlzLl9sYXN0QnRuLCB0cnVlKTtcclxuICAgICAgICAgICAgdGhpcy5fbGFzdEJ0bi55ID0gMDtcclxuICAgICAgICAgICAgdGhpcy5fbGFzdEJ0biA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICBzZXRCdG5Hcm91cEVuYWJsZSA6IGZ1bmN0aW9uIChpc0VuYWJsZSkge1xyXG4gICAgICAgIHRoaXMuX2NhbmNlbENob29zZSgpO1xyXG4gICAgICAgIHZhciBidG5Hcm91cCA9IHRoaXMubm9kZV9idG5Hcm91cC5jaGlsZHJlbjtcclxuICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgYnRuR3JvdXAubGVuZ3RoOyBpICsrKXtcclxuICAgICAgICAgICAgdGhpcy5zZXRCdG5FbmFibGUoYnRuR3JvdXBbaV0sIGlzRW5hYmxlKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIHJlZnJlc2hDYW5DaG9vc2VCdG4gOiBmdW5jdGlvbiAodXNlR29sZCkge1xyXG4gICAgICAgIGlmKCF0aGlzLl9saXN0X215R3JhYk9wdGlvbikgdGhpcy5fbGlzdF9teUdyYWJPcHRpb24gPSBHRy5idWxsMTAwTWdyLmdldE15c2VsZkNvbXAoKS5nZXRNb25leUNob29zZURpY3QoKTtcclxuICAgICAgICB2YXIgYnRuR3JvdXAgPSB0aGlzLm5vZGVfYnRuR3JvdXAuY2hpbGRyZW47XHJcbiAgICAgICAgaWYoIUdfREFUQS5pc051bWJlcih1c2VHb2xkKSkgdXNlR29sZCA9IEdHLmJ1bGwxMDBNZ3IuZ2V0TXlzZWxmQ29tcCgpLmdldFVzYWJsZUJhbGFuY2UoKTtcclxuICAgICAgICB2YXIgdGFyZ2V0Q2hvb3NlID0gbnVsbDtcclxuXHJcbiAgICAgICAgZm9yKHZhciBvcHRpb24gPSAwOyBvcHRpb24gPCB0aGlzLl9saXN0X215R3JhYk9wdGlvbi5sZW5ndGg7IG9wdGlvbiArKyl7XHJcbiAgICAgICAgICAgIGlmKHRoaXMuX2xpc3RfbXlHcmFiT3B0aW9uW29wdGlvbl0gPD0gdXNlR29sZCl7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldEJ0bkVuYWJsZShidG5Hcm91cFtvcHRpb25dLCB0cnVlKTtcclxuICAgICAgICAgICAgICAgIHRhcmdldENob29zZSA9IHBhcnNlSW50KG9wdGlvbik7XHJcbiAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgaWYodGhpcy5fbGFzdEJ0biAmJiB0aGlzLl9sYXN0QnRuLnRhZyA9PSB0aGlzLl9saXN0X215R3JhYk9wdGlvbltvcHRpb25dKXtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9jYW5jZWxDaG9vc2UoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0QnRuRW5hYmxlKGJ0bkdyb3VwW29wdGlvbl0sIGZhbHNlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAvL+WmguaenOacieWPlua2iOmAieS4reetueegge+8jOmcgOimgemHjeaWsOmAieaLqeetueeggVxyXG4gICAgICAgIGlmKCF0aGlzLl9sYXN0QnRuICYmIEdfREFUQS5pc051bWJlcih0YXJnZXRDaG9vc2UpKXtcclxuICAgICAgICAgICAgLy/kv53mjIHkuIrmrKHnmoTpgInmi6lcclxuICAgICAgICAgICAgdmFyIGxhc3RDaG9vc2UgPSBHRy5idWxsMTAwTWdyLmdldE15c2VsZkNvbXAoKS5nZXRDaG9vc2VDaGlwKCkgLSAxO1xyXG4gICAgICAgICAgICBpZihsYXN0Q2hvb3NlIDwgdGFyZ2V0Q2hvb3NlKSB0YXJnZXRDaG9vc2UgPSBsYXN0Q2hvb3NlO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5fc2hvd0Nob29zZUVmZmVjdChidG5Hcm91cFt0YXJnZXRDaG9vc2VdKTtcclxuICAgICAgICAgICAgR0cuYnVsbDEwME1nci5nZXRNeXNlbGZDb21wKCkuY2hvb3NlQ2hpcCh0YXJnZXRDaG9vc2UrMSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICAvL+aYr+WQpuaYvuekuue7reW6hOWSjOS4i+W6hOeahOaMiemSrlxyXG4gICAgX3NldElzU2hvd0RlYWxlckJ0biA6IGZ1bmN0aW9uIChpc1Nob3cpIHtcclxuICAgICAgICB0aGlzLm5vZGVfY29udGludWVEZWFsZXIuYWN0aXZlID0gaXNTaG93O1xyXG4gICAgfSxcclxuICAgIC8v6ZqQ6JeP5bqV6YOo55qE5omA5pyJ5oyJ6ZKuXHJcbiAgICBzZXRCb3R0b21Jc1Nob3cgOiBmdW5jdGlvbiAoaXNTaG93KSB7XHJcbiAgICAgICAgdGhpcy5zZXRCdG5Hcm91cEVuYWJsZShmYWxzZSk7XHJcbiAgICAgICAgdGhpcy5ub2RlX2J0bkdyb3VwLmFjdGl2ZSA9IGlzU2hvdztcclxuICAgICAgICB0aGlzLl9zZXRJc1Nob3dEZWFsZXJCdG4oIWlzU2hvdyk7XHJcbiAgICB9LFxyXG5cclxuICAgIF9nZXRCdG5CeUluZGV4IDogZnVuY3Rpb24gKGluZGV4KSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubm9kZV9idG5Hcm91cC5jaGlsZHJlbltpbmRleC0xXVxyXG4gICAgfSxcclxuXHJcbiAgICAvL+iOt+WPluWQg+eTnOe+pOS8l+aKleazqOi1t+eCuVxyXG4gICAgZ2V0SWRsZUJldHRpbmdQb3MgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHBvcyA9IHRoaXMubm9kZV9yaWdodEJ0bjEucG9zaXRpb247XHJcbiAgICAgICAgdmFyIGJhc2VQb3MgPSB0aGlzLm5vZGVfcmlnaHRCdG4xLnBhcmVudC5wYXJlbnQucG9zaXRpb247XHJcbiAgICAgICAgdmFyIHBvc1ggPSBwb3MueCArIHRoaXMubm9kZV9yaWdodEJ0bjEucGFyZW50LngrYmFzZVBvcy54O1xyXG4gICAgICAgIHZhciBwb3NZID0gcG9zLnkgKyB0aGlzLm5vZGVfcmlnaHRCdG4xLnBhcmVudC55K2Jhc2VQb3MueSArIHRoaXMubm9kZV9yaWdodEJ0bjEuaGVpZ2h0LzI7XHJcbiAgICAgICAgcmV0dXJuIGNjLnAocG9zWCwgcG9zWSlcclxuICAgIH0sXHJcblxyXG4gICAgLy8gY2FsbGVkIGV2ZXJ5IGZyYW1lLCB1bmNvbW1lbnQgdGhpcyBmdW5jdGlvbiB0byBhY3RpdmF0ZSB1cGRhdGUgY2FsbGJhY2tcclxuICAgIC8vIHVwZGF0ZTogZnVuY3Rpb24gKGR0KSB7XHJcblxyXG4gICAgLy8gfSxcclxufSk7XHJcbiIsIi8v546p5a625a+56LGhXHJcblxyXG5jYy5DbGFzcyh7XHJcbiAgICBleHRlbmRzOiBjYy5Db21wb25lbnQsXHJcblxyXG4gICAgcHJvcGVydGllczoge1xyXG4gICAgICAgIF9jaG9vc2VDaGlwIDogbnVsbCwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+mAieaLqeeahOetueeggVxyXG4gICAgICAgIF9pc0hhbmRsZSA6IG51bGwsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/mmK/lkKbmmK/mk43kvZzkvY1cclxuICAgICAgICBfZGljdF9iZXRSZWNvcmQgOiBudWxsLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/mipXms6jorrDlvZVcclxuICAgICAgICBfcGxheWVySUQgOiBudWxsLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v546p5a62SURcclxuICAgICAgICBfc2l0ZUluZGV4IDogbnVsbCwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5bqn5L2N57Si5byVXHJcbiAgICAgICAgX3RvdWNoVGFibGVDYWxsRnVuYyA6IG51bGwsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v54K55Ye75oqV5rOo5Yy65Z+f55qE5Zue6LCDXHJcbiAgICAgICAgX2RhdGFfYmV0dGluZyA6IG51bGwsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/lvZPliY3mipXms6jpnIDopoHnmoTkv6Hmga/lr7nosaFcXFxyXG5cclxuICAgICAgICBfYmV0dGluZ1RpbWVzIDogbnVsbCwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5b2T5YmN5oqV5rOo5qyh5pWwXHJcbiAgICAgICAgX3NlYXRNeXNlbGZDb21wIDogbnVsbCwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+W6p+S9jeS4iueahOiHquW3seeOqeWutlxyXG4gICAgICAgIF9kZWFsZXJNeXNlbGZDb21wIDogbnVsbCwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5bqE5a625bqn5L2N5LiK55qE6Ieq5bexXHJcbiAgICAgICAgX2lzRGVhbGVyIDogbnVsbCwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/mmK/lkKbmmK/luoTlrrZcclxuICAgICAgICBfaXNTZW5kaW5nIDogbnVsbCwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+aYr+WQpuato+WcqOaKleazqOivt+axglxyXG5cclxuICAgICAgICBub2RlX2hlYWRJbWcgOiB7XHJcbiAgICAgICAgICAgIGRlZmF1bHQgOiBudWxsLFxyXG4gICAgICAgICAgICB0eXBlIDogY2MuTm9kZSxcclxuICAgICAgICAgICAgZGlzcGxheU5hbWUgOiAn546p5a625aS05YOPJ1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgbm9kZV9wbGF5ZXJOYW1lIDoge1xyXG4gICAgICAgICAgICBkZWZhdWx0IDogbnVsbCxcclxuICAgICAgICAgICAgdHlwZSA6IGNjLk5vZGUsXHJcbiAgICAgICAgICAgIGRpc3BsYXlOYW1lIDogJ+eOqeWutuWQjeWtlydcclxuICAgICAgICB9LFxyXG4gICAgICAgIG5vZGVfcm9vbU5hbWUgOiB7XHJcbiAgICAgICAgICAgIGRlZmF1bHQgOiBudWxsLFxyXG4gICAgICAgICAgICB0eXBlIDogY2MuTm9kZSxcclxuICAgICAgICAgICAgZGlzcGxheU5hbWUgOiAn5oi/6Ze05ZCN5a2XJ1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgbm9kZV9vd25lckdvbGQgOiB7XHJcbiAgICAgICAgICAgIGRlZmF1bHQgOiBudWxsLFxyXG4gICAgICAgICAgICB0eXBlIDogY2MuTm9kZSxcclxuICAgICAgICAgICAgZGlzcGxheU5hbWUgOiAn546p5a626YeR5biB54i25bGCJ1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgcHJlZmFiX2dvbGRSZXN1bHRFZmZlY3QgOiB7XHJcbiAgICAgICAgICAgIGRlZmF1bHQgOiBudWxsLFxyXG4gICAgICAgICAgICB0eXBlIDogY2MuUHJlZmFiLFxyXG4gICAgICAgICAgICBkaXNwbGF5TmFtZSA6ICfph5HluIHlop7lh4/nibnmlYgnXHJcbiAgICAgICAgfSxcclxuICAgIH0sXHJcblxyXG4gICAgLy8gdXNlIHRoaXMgZm9yIGluaXRpYWxpemF0aW9uXHJcbiAgICBvbkxvYWQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLl9wYXJ0X2dvbGQgPSB0aGlzLmdldENvbXBvbmVudCgnUGFydF9wbGF5ZXJCbG9ja19Hb2xkJyk7XHJcbiAgICAgICAgdGhpcy5fcGFydF9nb2xkLmJpbmRCbG9jayh0aGlzKTtcclxuICAgICAgICB0aGlzLl9sYWJlbF9nb2xkID0gdGhpcy5ub2RlX293bmVyR29sZC5jaGlsZHJlblswXS5nZXRDb21wb25lbnQoY2MuTGFiZWwpO1xyXG5cclxuICAgICAgICAvL+WktOWDj+S4iumHkeW4gee7k+aenOeJueaViFxyXG4gICAgICAgIHRoaXMuX2dvbGRSZXN1bHRDb21wTmFtZSA9ICdPYmpfZ29sZFJlc3VsdEVmZmVjdCc7XHJcbiAgICAgICAgLy/nrbnnoIHlr7nlupTph5HluIFcclxuICAgICAgICB0aGlzLl9kaWN0X2dvbGRNYXRjaCA9IEdfQ29uZmlnX2J1bGwxMDAuZGljdF9iZXRHb2xkTnVtO1xyXG4gICAgICAgIC8v5aS05YOP5LiK5aKe5YeP6YeR5biB6aOe6KGM5pe26Ze0XHJcbiAgICAgICAgLy90aGlzLl9nb2xkUmVzdWx0Rmx5VGltZSA9IEdfQ29uZmlnX2dyYWIudGltZV9nb2xkT25IZWFkO1xyXG4gICAgICAgIHRoaXMuX2dvbGRSZXN1bHRGbHlUaW1lID0gMC40O1xyXG4gICAgICAgIHRoaXMuX2lzU2VuZGluZyA9IGZhbHNlO1xyXG5cclxuICAgICAgICB0aGlzLnNldERlZmF1bHRDaG9vc2UoKTtcclxuICAgIH0sXHJcblxyXG4gICAgLy/liJ3lp4vorr7nva7njqnlrrbkv6Hmga9cclxuICAgIHNldFBsYXllckRhdGEgOiBmdW5jdGlvbiAoZGF0YU9iaikge1xyXG4gICAgICAgIHRoaXMubm9kZS5hY3RpdmUgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuX2RpY3RfYmV0UmVjb3JkID0gbnVsbDtcclxuICAgICAgICB0aGlzLl9wYXJ0X2dvbGQuc2V0QmV0dGluZ0dvbGQoMCk7XHJcbiAgICAgICAgdGhpcy5fYmV0dGluZ1RpbWVzID0gMDtcclxuICAgICAgICB0aGlzLl9kYXRhX2JldHRpbmcgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuX2lzRGVhbGVyID0gZGF0YU9iai5pc0RlYWxlcjtcclxuICAgICAgICB0aGlzLnNldERlZmF1bHRDaG9vc2UoKTtcclxuICAgICAgICB0aGlzLl9wbGF5ZXJJRCA9IGRhdGFPYmoucGxheWVySWQ7XHJcbiAgICAgICAgdGhpcy5fc2l0ZUluZGV4ID0gZGF0YU9iai5zZWF0SW5kZXg7XHJcblxyXG4gICAgICAgIHRoaXMuX3NldEhlYWRJbWcoZGF0YU9iai5pY29uKTtcclxuICAgICAgICB0aGlzLl9zZXRQbGF5ZXJOYW1lKGRhdGFPYmoubmlja25hbWUpO1xyXG4gICAgICAgIHRoaXMuc2V0R29sZFZhbHVlKGRhdGFPYmouY29pbik7XHJcbiAgICAgICAgdGhpcy5fcGFydF9nb2xkLnNldFVzYWJsZUJhbGFuY2UoZGF0YU9iai51c2FibGVCYWxhbmNlKTtcclxuICAgIH0sXHJcblxyXG4gICAgLy/orr7nva7mk43kvZzkvY3nmoTmlbDmja5cclxuICAgIHNldEhhbmRsZUluZm8gOiBmdW5jdGlvbiAoaGFuZGxlSW5mbykge1xyXG4gICAgICAgIGlmKGhhbmRsZUluZm8uY2hvb3NlRGljdCkgdGhpcy5fZGljdF9nb2xkVmFsdWVNYXRjaCA9IGhhbmRsZUluZm8uY2hvb3NlRGljdDtcclxuICAgICAgICAvL+aIv+mXtOWQjeWtl1xyXG4gICAgICAgIHRoaXMuX3NldFJvb21OYW1lKGhhbmRsZUluZm8ucm9vbU5hbWUpO1xyXG4gICAgfSxcclxuICAgIC8v57uR5a6a5bqn5L2N5LiK55qE546p5a62XHJcbiAgICBiaW5kU2VhdE15c2VsZiA6IGZ1bmN0aW9uIChteXNlbGZDb21wKSB7XHJcbiAgICAgICAgdGhpcy5fc2VhdE15c2VsZkNvbXAgPSBteXNlbGZDb21wO1xyXG4gICAgfSxcclxuICAgIC8v6Ieq5bex5piv5bqE5a6255qE5pe25YCZ77yM57uR5a6a5bqE5a626ISa5pysXHJcbiAgICBiaW5kTXlEZWFsZXIgOiBmdW5jdGlvbiAobXlzZWxmQ29tcCkge1xyXG4gICAgICAgIHRoaXMuX2RlYWxlck15c2VsZkNvbXAgPSBteXNlbGZDb21wO1xyXG4gICAgfSxcclxuXHJcbiAgICAvL+iuvue9rum7mOiupOeahOetueeggemAieaLqSjlpoLmnpzlt7Lnu4/pgInmi6nov4fnrbnnoIHkuoblsLHkuI3opoHph43nva7kuoYpXHJcbiAgICBzZXREZWZhdWx0Q2hvb3NlIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmKCF0aGlzLl9jaG9vc2VDaGlwKSB0aGlzLl9jaG9vc2VDaGlwID0gMTtcclxuICAgIH0sXHJcbiAgICAvL+mAieaLqeS4gOS4quetueeggVxyXG4gICAgY2hvb3NlQ2hpcCA6IGZ1bmN0aW9uIChjaG9vc2UpIHtcclxuICAgICAgICB0aGlzLl9jaG9vc2VDaGlwID0gY2hvb3NlO1xyXG4gICAgfSxcclxuICAgIHNldEdvbGRWYWx1ZSA6IGZ1bmN0aW9uICh2YWx1ZSkge1xyXG4gICAgICAgIGlmKCF2YWx1ZSkgdmFsdWUgPSAwO1xyXG4gICAgICAgIHRoaXMuX3BhcnRfZ29sZC5zZXRCYWxhbmNlKHZhbHVlKTtcclxuXHJcbiAgICAgICAgLy/kvY3nva7kuIrnmoToh6rlt7FcclxuICAgICAgICBpZih0aGlzLl9zZWF0TXlzZWxmQ29tcCl7XHJcbiAgICAgICAgICAgIHRoaXMuX3NlYXRNeXNlbGZDb21wLnNldEdvbGRWYWx1ZSh2YWx1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIHNldElzSGFuZGxlIDogZnVuY3Rpb24gKGlzSGFuZGxlKSB7XHJcbiAgICAgICAgdGhpcy5faXNIYW5kbGUgPSBpc0hhbmRsZTtcclxuICAgIH0sXHJcbiAgICBoaWRlUGxheWVyIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMubm9kZS5hY3RpdmUgPSBmYWxzZTtcclxuICAgIH0sXHJcbiAgICBzZXRDaG9vc2VHb2xkVmFsdWUgOiBmdW5jdGlvbiAoZGljdCkge1xyXG4gICAgICAgIHRoaXMuX2RpY3RfZ29sZFZhbHVlTWF0Y2ggPSBkaWN0O1xyXG4gICAgfSxcclxuICAgIC8v6K6+572u546p5a625piv5ZCm5piv5bqE5a6277yM5Zug5Li65bey57uP5rKh5pyJ5q+P5bGA5Yi35paw546p5a625L+h5oGv77yM5omA5Lul6ZyA6KaB5Li75Yqo6K6+572uXHJcbiAgICBzZXRJc0RlYWxlciA6IGZ1bmN0aW9uIChpc0RlYWxlcikge1xyXG4gICAgICAgIHRoaXMuX2lzRGVhbGVyID0gaXNEZWFsZXI7XHJcbiAgICB9LFxyXG5cclxuICAgIC8vPT09PT09PT09PT09PT09PT09PT1nZXRcclxuXHJcbiAgICAvL+iOt+WPluW3sue7j+mAieaLqeeahOetueeggemcgOimgemjnuihjOeahOmHkeW4geaVsOmHj1xyXG4gICAgZ2V0Rmx5R29sZE51bSA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZGljdF9nb2xkTWF0Y2hbdGhpcy5fY2hvb3NlQ2hpcF1cclxuICAgIH0sXHJcbiAgICBnZXRDaG9vc2VDaGlwIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9jaG9vc2VDaGlwXHJcbiAgICB9LFxyXG4gICAgZ2V0Q2hvb3NlR29sZFZhbHVlIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9kaWN0X2dvbGRWYWx1ZU1hdGNoW3RoaXMuX2Nob29zZUNoaXAtMV1cclxuICAgIH0sXHJcbiAgICBnZXRNb25leUNob29zZURpY3QgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RpY3RfZ29sZFZhbHVlTWF0Y2g7XHJcbiAgICB9LFxyXG4gICAgZ2V0V29ybGRQb3MgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgLy9pZih0aGlzLl9pc0hhbmRsZSkgcmV0dXJuIHRoaXMubm9kZS5wb3NpdGlvbjtcclxuICAgICAgICAvL2Vsc2V7XHJcbiAgICAgICAgLy8gICAgcmV0dXJuIHRoaXMubm9kZS5wYXJlbnQucG9zaXRpb25cclxuICAgICAgICAvL31cclxuICAgICAgICB2YXIgcGFyZW50UG9zID0gdGhpcy5ub2RlLnBhcmVudC5wb3NpdGlvbjtcclxuICAgICAgICByZXR1cm4gY2MucCh0aGlzLm5vZGUueCtwYXJlbnRQb3MueCwgdGhpcy5ub2RlLnkrcGFyZW50UG9zLnkpXHJcbiAgICB9LFxyXG4gICAgLy/ojrflj5bnjqnlrrbnmoTmipXms6jorrDlvZVcclxuICAgIGdldEJldFJlY29yZCA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZGljdF9iZXRSZWNvcmQ7XHJcbiAgICB9LFxyXG4gICAgZ2V0SXNTaG93IDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLm5vZGUuYWN0aXZlXHJcbiAgICB9LFxyXG4gICAgZ2V0U2VhdEluZGV4IDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9zaXRlSW5kZXhcclxuICAgIH0sXHJcbiAgICAvL+iOt+WPluW9k+WJjeWJqeS9meWkmuWwkemHkeW4gVxyXG4gICAgZ2V0R29sZFZhbHVlIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9wYXJ0X2dvbGQuZ2V0QmFsYW5jZSgpXHJcbiAgICB9LFxyXG4gICAgLy/mmK/lkKblnKjmnKzlsYDlt7Lnu4/mipXms6jov4dcclxuICAgIGdldElzQmV0dGluZyA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gQm9vbGVhbih0aGlzLl9wYXJ0X2dvbGQuZ2V0QmV0dGluZ0dvbGQoKSlcclxuICAgIH0sXHJcbiAgICAvL+aYr+WQpuaYr+W6hOWutlxyXG4gICAgZ2V0SXNEZWFsZXIgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2lzRGVhbGVyXHJcbiAgICB9LFxyXG4gICAgLy/ojrflj5bnjqnlrrZJRFxyXG4gICAgZ2V0UGxheWVySUQgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3BsYXllcklEXHJcbiAgICB9LFxyXG4gICAgLy/ojrflj5blt7Lnu4/mipXms6jnmoTph5HluIHmlbDpop1cclxuICAgIGdldEhhc0JldHRpbmdHb2xkIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9wYXJ0X2dvbGQuZ2V0QmV0dGluZ0dvbGQoKVxyXG4gICAgfSxcclxuICAgIC8v6I635Y+W5Y+v55So5L2Z6aKdXHJcbiAgICBnZXRVc2FibGVCYWxhbmNlIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9wYXJ0X2dvbGQuZ2V0VXNhYmxlQmFsYW5jZSgpO1xyXG4gICAgfSxcclxuXHJcbiAgICAvL+a4heeQhuaKleazqOiusOW9lVxyXG4gICAgY2xlYXJCZXR0aW5nR29sZCA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLl9wYXJ0X2dvbGQuc2V0QmV0dGluZ0dvbGQoMCk7XHJcbiAgICAgICAgdGhpcy5fcGFydF9nb2xkLnNldEdvbGRWYWx1ZUVYKDApO1xyXG4gICAgfSxcclxuXHJcbiAgICAvL+aKleazqOmHkemine+8jOS7heeUqOS6juiHquW3seaYr+WQg+eTnOe+pOS8l+eahOaXtuWAmVxyXG4gICAgcmVkdWNlR29sZEVYIDogZnVuY3Rpb24gKGNoYW5nZUdvbGQpIHtcclxuICAgICAgICB2YXIgZ29sZFZhbHVlID0gdGhpcy5fcGFydF9nb2xkLmdldEdvbGRWYWx1ZUVYKCk7XHJcbiAgICAgICAgaWYoZ29sZFZhbHVlID49IGNoYW5nZUdvbGQpe1xyXG4gICAgICAgICAgICB0aGlzLl9wYXJ0X2dvbGQucGF5R29sZFZhbHVlRVgoY2hhbmdlR29sZCk7XHJcbiAgICAgICAgICAgIHJldHVybiAwO1xyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICB2YXIgdmFsdWUgPSBjaGFuZ2VHb2xkIC0gZ29sZFZhbHVlO1xyXG4gICAgICAgICAgICB0aGlzLl9wYXJ0X2dvbGQuc2V0R29sZFZhbHVlRVgoMCk7XHJcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZVxyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PeWBmuaKleazqOeahOivt+axglxyXG5cclxuICAgIC8v54K55Ye75qGM5a2Q55qE5aSn5oiW6ICF5bCPXHJcbiAgICB0b3VjaFRhYmxlIDogZnVuY3Rpb24gKGdyYWJJbmZvLCBjYWxsRnVuYykge1xyXG4gICAgICAgIHRoaXMuX3RvdWNoVGFibGVDYWxsRnVuYyA9IGNhbGxGdW5jO1xyXG4gICAgICAgIGdyYWJJbmZvLnN0YXJ0UG9zID0gdGhpcy5nZXRXb3JsZFBvcygpO1xyXG4gICAgICAgIGdyYWJJbmZvLmdvbGROdW0gPSB0aGlzLmdldEZseUdvbGROdW0oKTtcclxuICAgICAgICBpZighdGhpcy5faXNIYW5kbGUgfHwgR19Db25maWdfY29tbW9uLmlzTG9jYWwpe1xyXG4gICAgICAgICAgICAvL+S4jeaYr+WcqOeOqeWutuiHquW3seaIluiAheWPquaYr+WNleacuuaooeW8j1xyXG4gICAgICAgICAgICB2YXIgbW9uZXkgPSBncmFiSW5mby5nb2xkVmFsdWU7XHJcbiAgICAgICAgICAgIGdyYWJJbmZvLmdvbGROdW0gPSBHX0NvbmZpZ19ncmFiLm51bV9vdGhlckdyYWJHb2xkTnVtO1xyXG4gICAgICAgICAgICB0aGlzLl9kYXRhX2JldHRpbmcgPSBncmFiSW5mbztcclxuICAgICAgICAgICAgdGhpcy5fc2V0VG91Y2hUYWJsZURhdGEobW9uZXksIHRoaXMuZ2V0R29sZFZhbHVlKCktbW9uZXkpO1xyXG4gICAgICAgICAgICByZXR1cm5cclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgaWYodGhpcy5faXNTZW5kaW5nKXtcclxuICAgICAgICAgICAgICAgIHJldHVyblxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGdyYWJJbmZvLmdvbGRWYWx1ZSA9IHRoaXMuZ2V0Q2hvb3NlR29sZFZhbHVlKCk7XHJcbiAgICAgICAgICAgIHRoaXMuX2RhdGFfYmV0dGluZyA9IGdyYWJJbmZvO1xyXG4gICAgICAgICAgICAvL+WPr+S7peaKleazqFxyXG4gICAgICAgICAgICB2YXIgbmV0RGF0YSA9IHtcclxuICAgICAgICAgICAgICAgIG1hdGNoSWQ6IEdHLmJ1bGwxMDBNZ3IuZ2V0TWF0Y2hJRCgpLC8v6LWb5LqLaWQgIGludFxyXG4gICAgICAgICAgICAgICAgdHlwZTpHX1RZUEUubmV0X2dhbWVNb2R1bGUuYnVsbDEwMCwvL+aKleazqOexu+WeiyBzdHJpbmdcclxuICAgICAgICAgICAgICAgIGl0ZW06R0cuYnVsbDEwME1nci5nZXRJdGVtQnlUYWJsZUluZGV4KGdyYWJJbmZvLnRhYmxlSW5kZXgpLC8v5oqV5rOo6aG5IHN0cmluZ1xyXG4gICAgICAgICAgICAgICAgZ29sZDpncmFiSW5mby5nb2xkVmFsdWUsLy/mipXms6jpop0gaW50XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5faXNTZW5kaW5nID0gdHJ1ZTtcclxuICAgICAgICAgICAgR0cuc29ja2V0TWdyLlNlbmRNc2coTmV0VHlwZS5zX2RvR3JhYiwgbmV0RGF0YSk7XHJcbiAgICAgICAgICAgIEdHLnNvY2tldE1nci5yZWdpc3RlckxvbmcoTmV0VHlwZS5yX2RvR3JhYl9yZXR1cm4sIHRoaXMubmV0X2dyYWJSZXR1cm4uYmluZCh0aGlzKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICAvL+eZvuS6uuKAlOKAlOaKleazqOaIkOWKn+WQjui/lOWbnueahOWHveaVsFxyXG4gICAgbmV0X2dyYWJSZXR1cm4gOiBmdW5jdGlvbiAocmVjRGF0YSkge1xyXG4gICAgICAgIHRoaXMuX2lzU2VuZGluZyA9IGZhbHNlO1xyXG5cclxuICAgICAgICB2YXIgdGlwID0gcmVjRGF0YS50aXA7XHJcbiAgICAgICAgaWYodGlwLmNvZGUgIT0gR19UWVBFLnNlcnZlckNvZGVUeXBlLnN1Y2Nlc3MpIHtcclxuICAgICAgICAgICAgdmFyIGRhdGFPYmogPSB7XHJcbiAgICAgICAgICAgICAgICB0aXBJbmRleCA6IDE5LFxyXG4gICAgICAgICAgICAgICAgcmV0YWluVGltZSA6IDMsXHJcbiAgICAgICAgICAgICAgICBzaG93U3RyIDogdGlwLnRpcCxcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBHRy50aXBzTWdyLnNob3dUeHRUaXAoZGF0YU9iailcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvL+i1m+S6i+S4jeWtmOWcqOi4ouWHulxyXG4gICAgICAgIGlmICh0aXAuY29kZSA9PSBHX1RZUEUuc2VydmVyQ29kZVR5cGUubWF0Y2hOb25FeGlzdGVudCkge1xyXG4gICAgICAgICAgICAvL3ZhciBuZXREYXRhID0ge1xyXG4gICAgICAgICAgICAvLyAgICByb29tSWQ6IEdHLmJ1bGwxMDBNZ3IuZ2V0SG9tZUlEKCksXHJcbiAgICAgICAgICAgIC8vICAgIGlzQnJlYWs6IHRydWVcclxuICAgICAgICAgICAgLy99O1xyXG4gICAgICAgICAgICAvL0dHLnNvY2tldE1nci5TZW5kTXNnKE5ldFR5cGUuc19ncmFiX0V4aXQsIG5ldERhdGEpO1xyXG4gICAgICAgICAgICBHRy5leGl0SG9tZSgpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgYmV0dGluZ1ZhbHVlID0gcmVjRGF0YS5iZXQuZ29sZDtcclxuICAgICAgICB2YXIgbGVhdmVWYWx1ZSA9IHJlY0RhdGEubmJTZWxmLmJhbGFuY2U7XHJcbiAgICAgICAgdGhpcy5fc2V0VG91Y2hUYWJsZURhdGEoYmV0dGluZ1ZhbHVlLCBsZWF2ZVZhbHVlLCByZWNEYXRhLm5iU2VsZi51c2FibGVCYWxhbmNlKTtcclxuICAgICAgICAvL+aKvOazqOi/h+eoi+S4reabtOaWsOaKvOazqOaMiemSru+8iOe9rueBsO+8iVxyXG4gICAgICAgIEdHLmJ1bGwxMDBNZ3IuZ2V0QnRuc0NvbXAoKS5yZWZyZXNoQ2FuQ2hvb3NlQnRuKHJlY0RhdGEubmJTZWxmLnVzYWJsZUJhbGFuY2UpO1xyXG4gICAgfSxcclxuXHJcbiAgICBfc2V0VG91Y2hUYWJsZURhdGEgOiBmdW5jdGlvbiAoYmV0dGluZ1ZhbHVlLCBsZWF2ZVZhbHVlLCB1c2FibGVCYWxhbmNlKSB7XHJcbiAgICAgICAgLy/ph43nu4TmipXms6jkv6Hmga/lr7nosaFcclxuICAgICAgICBpZighdGhpcy5fZGF0YV9iZXR0aW5nKSByZXR1cm47XHJcbiAgICAgICAgdmFyIGRhdGFPYmogPSBHX09CSi5kYXRhX2J1bGxCZXR0aW5nKCk7XHJcbiAgICAgICAgZm9yKHZhciBhdHRyTmFtZSBpbiB0aGlzLl9kYXRhX2JldHRpbmcpe1xyXG4gICAgICAgICAgICBpZihhdHRyTmFtZSkgZGF0YU9ialthdHRyTmFtZV0gPSB0aGlzLl9kYXRhX2JldHRpbmdbYXR0ck5hbWVdO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLl9kYXRhX2JldHRpbmcgPSBudWxsO1xyXG5cclxuICAgICAgICBkYXRhT2JqLmdvbGRWYWx1ZSA9IGJldHRpbmdWYWx1ZTtcclxuICAgICAgICAvL+abtOaWsOaKleazqOmHkemineaxoOS/oeaBr1xyXG4gICAgICAgIHRoaXMuX3BhcnRfZ29sZC5hZGRCZXR0aW5nR29sZChkYXRhT2JqLmdvbGRWYWx1ZSk7XHJcbiAgICAgICAgdGhpcy5fcGFydF9nb2xkLmFkZEdvbGRWYWx1ZUVYKGRhdGFPYmouZ29sZFZhbHVlKTtcclxuICAgICAgICAvL+abtOaWsOS9memineS/oeaBr1xyXG4gICAgICAgIHRoaXMuc2V0R29sZFZhbHVlKGxlYXZlVmFsdWUpO1xyXG4gICAgICAgIC8v5pu05paw5Y+v55So5L2Z6aKd5L+h5oGvXHJcbiAgICAgICAgdGhpcy5fcGFydF9nb2xkLnNldFVzYWJsZUJhbGFuY2UodXNhYmxlQmFsYW5jZSk7XHJcbiAgICAgICAgLy/orrDlvZXmipXms6jkv6Hmga9cclxuICAgICAgICB0aGlzLl90b3VjaFRhYmxlU3VjY2VzcyhkYXRhT2JqLnRhYmxlSW5kZXgsIGRhdGFPYmouZ29sZE51bSk7XHJcbiAgICAgICAgdGhpcy5fYmV0dGluZ1RpbWVzICs9IDE7XHJcbiAgICAgICAgLy8gR0cuYnVsbDEwME1nci5zZXRCZXR0aW5nVGltZXModGhpcy5fYmV0dGluZ1RpbWVzKTtcclxuICAgICAgICBpZih0aGlzLl90b3VjaFRhYmxlQ2FsbEZ1bmMpe1xyXG4gICAgICAgICAgICB0aGlzLl90b3VjaFRhYmxlQ2FsbEZ1bmMoZGF0YU9iaik7XHJcbiAgICAgICAgICAgIHRoaXMuX3RvdWNoVGFibGVDYWxsRnVuYyA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICAvL+aKleazqOaIkOWKn+WQjuiusOW9leaKleazqOS/oeaBr1xyXG4gICAgX3RvdWNoVGFibGVTdWNjZXNzIDogZnVuY3Rpb24gKHRhYmxlSW5kZXgsIGdvbGRJbWdOdW0pIHtcclxuICAgICAgICBpZighdGhpcy5fZGljdF9iZXRSZWNvcmQpIHRoaXMuX2RpY3RfYmV0UmVjb3JkID0ge307XHJcbiAgICAgICAgaWYoIXRoaXMuX2RpY3RfYmV0UmVjb3JkW3RhYmxlSW5kZXhdKSB0aGlzLl9kaWN0X2JldFJlY29yZFt0YWJsZUluZGV4XSA9IGdvbGRJbWdOdW07XHJcbiAgICAgICAgZWxzZSB0aGlzLl9kaWN0X2JldFJlY29yZFt0YWJsZUluZGV4XSArPSBnb2xkSW1nTnVtXHJcbiAgICB9LFxyXG5cclxuICAgIC8v6I635Y+W5bqE5a625Y2h54mM55qE5L2N572uXHJcbiAgICBnZXREZWFsZXJQb2tlclBvcyA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAvL+WNoeeJjOS9jee9ruaYr+W6hOWutuS4reW/g+eCueWBj+W3plxyXG4gICAgICAgIHZhciBwb2tlck9mZlggPSAwLjQ7XHJcbiAgICAgICAgdmFyIGNvbnRhaW5lclBvcyA9IHRoaXMubm9kZS5wYXJlbnQucG9zaXRpb247XHJcbiAgICAgICAgdmFyIHBvcyA9IGNjLnAodGhpcy5ub2RlLngtdGhpcy5ub2RlLndpZHRoKjAuNSp0aGlzLm5vZGUuc2NhbGUqcG9rZXJPZmZYK2NvbnRhaW5lclBvcy54LCB0aGlzLm5vZGUueS10aGlzLm5vZGUuaGVpZ2h0KjAuNSp0aGlzLm5vZGUuc2NhbGUrY29udGFpbmVyUG9zLnkpXHJcbiAgICAgICAgcmV0dXJuIHBvc1xyXG4gICAgfSxcclxuXHJcbiAgICAvL3Vp6KGo546w55u45YWzPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cclxuICAgIF9zZXRIZWFkSW1nIDogZnVuY3Rpb24gKGltYWdlTmFtZSkge1xyXG4gICAgICAgIEdfVE9PTC5zZXRIZWFkSW1nKHRoaXMubm9kZV9oZWFkSW1nLCBpbWFnZU5hbWUpO1xyXG4gICAgfSxcclxuXHJcbiAgICBfc2V0UGxheWVyTmFtZSA6IGZ1bmN0aW9uIChwbGF5ZXJOYW1lKSB7XHJcbiAgICAgICAgaWYoIXBsYXllck5hbWUpIHBsYXllck5hbWUgPSAnJztcclxuICAgICAgICBwbGF5ZXJOYW1lID0gR19UT09MLmdldE5hbWVMaW1pdChwbGF5ZXJOYW1lLCAxMCwgdHJ1ZSk7XHJcbiAgICAgICAgdGhpcy5ub2RlX3BsYXllck5hbWUuZ2V0Q29tcG9uZW50KGNjLkxhYmVsKS5zdHJpbmcgPSBwbGF5ZXJOYW1lO1xyXG4gICAgfSxcclxuXHJcbiAgICBfc2V0Um9vbU5hbWUgOiBmdW5jdGlvbiAocm9vbU5hbWUpIHtcclxuICAgICAgICBpZihyb29tTmFtZSA9PT0gdW5kZWZpbmVkKSByb29tTmFtZT0gJyc7XHJcbiAgICAgICAgaWYodGhpcy5ub2RlX3Jvb21OYW1lICYmIHJvb21OYW1lKSB0aGlzLm5vZGVfcm9vbU5hbWUuZ2V0Q29tcG9uZW50KGNjLkxhYmVsKS5zdHJpbmcgPSByb29tTmFtZTtcclxuICAgIH0sXHJcblxyXG4gICAgc2hvd0dvbGRWYWx1ZSA6IGZ1bmN0aW9uICh2YWx1ZSkge1xyXG4gICAgICAgIHRoaXMuX2xhYmVsX2dvbGQuc3RyaW5nID0gR19UT09MLmNoYW5nZU1vbmV5KHZhbHVlKTtcclxuICAgIH0sXHJcblxyXG4gICAgLy/mmL7npLrnjqnlrrbmlbDlgLznmoTlop7lh49cclxuICAgIHNob3dHb2xkQ2hhbmdlIDogZnVuY3Rpb24gKHZhbHVlKSB7XHJcbiAgICAgICAgLy/ph5HpkrHmsqHmnInlj5jljJZcclxuICAgICAgICAvL+mHkemSseWPmOWMluato+aIluiAhei0n1xyXG4gICAgICAgIC8vdmFyIGRpciA9IEdfVE9PTC5nZXRSYW5kb21Cb29sKCkgPyAxIDogLTE7XHJcbiAgICAgICAgdGhpcy5fc2hvd0dvbGRDb3VudCh2YWx1ZSk7XHJcbiAgICB9LFxyXG4gICAgLy/mmL7npLrnjqnlrrbmlbDlgLznibnmlYhcclxuICAgIF9zaG93R29sZENvdW50IDogZnVuY3Rpb24gKGNvdW50KSB7XHJcbiAgICAgICAgaWYoIWNvdW50KSByZXR1cm47XHJcblxyXG4gICAgICAgIHZhciBsYWJlbE5vZGUgPSBjYy5pbnN0YW50aWF0ZSh0aGlzLnByZWZhYl9nb2xkUmVzdWx0RWZmZWN0KTtcclxuICAgICAgICBsYWJlbE5vZGUucGFyZW50ID0gdGhpcy5ub2RlO1xyXG4gICAgICAgIGxhYmVsTm9kZS56SW5kZXggPSAyO1xyXG5cclxuICAgICAgICBsYWJlbE5vZGUuZ2V0Q29tcG9uZW50KHRoaXMuX2dvbGRSZXN1bHRDb21wTmFtZSkuc2hvd0dyYWJHb2xkKGNvdW50KTtcclxuXHJcbiAgICAgICAgbGFiZWxOb2RlLnNjYWxlID0gMC4xO1xyXG4gICAgICAgIHZhciBwYXJlbnRTY2FsZSwgd2lkdGhPZmY7XHJcbiAgICAgICAgd2lkdGhPZmYgPSB0aGlzLm5vZGUud2lkdGgqMC4zO1xyXG4gICAgICAgIGlmKHRoaXMuX2lzSGFuZGxlKXtcclxuICAgICAgICAgICAgcGFyZW50U2NhbGUgPSB0aGlzLm5vZGUuc2NhbGU7XHJcbiAgICAgICAgfWVsc2Uge1xyXG4gICAgICAgICAgICBwYXJlbnRTY2FsZSA9IHRoaXMubm9kZS5wYXJlbnQuc2NhbGU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmKHRoaXMubm9kZS54ID4gY2MudmlzaWJsZVJlY3Qud2lkdGgvMikgd2lkdGhPZmYqPSAtMTtcclxuICAgICAgICB2YXIgdGltZSA9IHRoaXMuX2dvbGRSZXN1bHRGbHlUaW1lO1xyXG4gICAgICAgIHZhciBhY3QxID0gY2MubW92ZVRvKHRpbWUsIHdpZHRoT2ZmLCB0aGlzLm5vZGUuaGVpZ2h0KjAuNCk7XHJcbiAgICAgICAgdmFyIGFjdDIgPSBjYy5zY2FsZVRvKHRpbWUsIDEpO1xyXG4gICAgICAgIHZhciBhY3QzID0gY2MuZGVsYXlUaW1lKHRpbWUqMik7XHJcbiAgICAgICAgbGFiZWxOb2RlLnJ1bkFjdGlvbihjYy5zZXF1ZW5jZShjYy5zcGF3bihhY3QxLGFjdDIpLGFjdDMsY2MuY2FsbEZ1bmModGhpcy5fbGFiZWxNb3ZlRW5kLCB0aGlzLCBjb3VudCkpKVxyXG4gICAgfSxcclxuICAgIF9sYWJlbE1vdmVFbmQgOiBmdW5jdGlvbiAodGFyZ2V0LCBjb3VudCkge1xyXG4gICAgICAgIHRhcmdldC5kZXN0cm95KCk7XHJcbiAgICB9LFxyXG5cclxuICAgIG9uRGVzdHJveSA6IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICB9LFxyXG5cclxuICAgIC8vIGNhbGxlZCBldmVyeSBmcmFtZSwgdW5jb21tZW50IHRoaXMgZnVuY3Rpb24gdG8gYWN0aXZhdGUgdXBkYXRlIGNhbGxiYWNrXHJcbiAgICAvLyB1cGRhdGU6IGZ1bmN0aW9uIChkdCkge1xyXG5cclxuICAgIC8vIH0sXHJcbn0pO1xyXG4iLCIvL+aJgOacieeOqeWutuWuueWZqOeuoeeQhlxyXG5cclxuLy/luqfkvY3ntKLlvJVzZWF0SW5kZXjmmK/ku44x5byA5aeL55qEXHJcblxyXG4vL3ZhciBwbGF5ZXJEYXRhID0ge1xyXG4vLyAgICBuaWNrbmFtZSA6IGNvbnRlbnQubmlja25hbWUsXHJcbi8vICAgIGljb24gOiBjb250ZW50Lmljb24sXHJcbi8vICAgIHBsYXllcklkIDogY29udGVudC5wbGF5ZXJJZCxcclxuLy8gICAgY29pbiA6IGNvbnRlbnQuY29pbixcclxuLy8gICAgbW9uZXlDaG9vc2UgOiAwLFxyXG4vLyAgICBzZWF0SW5kZXggOiBzZWF0SW5kZXhcclxuLy99XHJcblxyXG5jYy5DbGFzcyh7XHJcbiAgICBleHRlbmRzOiByZXF1aXJlKCdBdXRvRGVhbGluZycpLFxyXG5cclxuICAgIHByb3BlcnRpZXM6IHtcclxuICAgICAgICBfZGljdF9wbGF5ZXJDb21wIDogbnVsbCwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5bqn5L2N5LiK55qE546p5a626ISa5pysXHJcbiAgICAgICAgX3BsYXllck51bSA6IG51bGwsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/lnLrkuIrnmoTnjqnlrrbmlbDph49cclxuXHJcbiAgICAgICAgbm9kZV9wbGF5ZXJDb250YWluZXIgOiB7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5omA5pyJ546p5a6255qE5a655Zmo77yM5bqE5a625ZKM6Ieq5bex6Zmk5aSWXHJcbiAgICAgICAgICAgIGRlZmF1bHQgOiBudWxsLFxyXG4gICAgICAgICAgICB0eXBlIDogY2MuTm9kZSxcclxuICAgICAgICAgICAgZGlzcGxheU5hbWUgOiAn5omA5pyJ546p5a625a655ZmoJ1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgbm9kZV9idG5HcmFiRGVhbGVyIDogeyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/miqLluoTmjInpkq5cclxuICAgICAgICAgICAgZGVmYXVsdCA6IG51bGwsXHJcbiAgICAgICAgICAgIHR5cGUgOiBjYy5Ob2RlLFxyXG4gICAgICAgICAgICBkaXNwbGF5TmFtZSA6ICfmiqLluoTmjInpkq4nXHJcbiAgICAgICAgfSxcclxuICAgICAgICBub2RlX215c2VsZiA6IHtcclxuICAgICAgICAgICAgZGVmYXVsdCA6IG51bGwsXHJcbiAgICAgICAgICAgIHR5cGUgOiBjYy5Ob2RlLFxyXG4gICAgICAgICAgICBkaXNwbGF5TmFtZSA6ICfnjqnlrrboh6rlt7EnXHJcbiAgICAgICAgfSxcclxuICAgICAgICBub2RlX2RlYWxlciA6IHtcclxuICAgICAgICAgICAgZGVmYXVsdCA6IG51bGwsXHJcbiAgICAgICAgICAgIHR5cGUgOiBjYy5Ob2RlLFxyXG4gICAgICAgICAgICBkaXNwbGF5TmFtZSA6ICfluoTlrrYnXHJcbiAgICAgICAgfSxcclxuICAgICAgICBwcmVmYWJfcGxheWVyIDoge1xyXG4gICAgICAgICAgICBkZWZhdWx0IDogbnVsbCxcclxuICAgICAgICAgICAgdHlwZSA6IGNjLlByZWZhYixcclxuICAgICAgICAgICAgZGlzcGxheU5hbWUgOiAn5bqn5L2N5LiK55qE546p5a62J1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgY29tcF9zZWF0c0NvbnRhaW5lciA6IHtcclxuICAgICAgICAgICAgZGVmYXVsdCA6IG51bGwsXHJcbiAgICAgICAgICAgIHR5cGUgOiByZXF1aXJlKCdPYmpfc2VhdHNDb250YWluZXInKSxcclxuICAgICAgICAgICAgZGlzcGxheU5hbWUgOiAn5bqn5L2N5a655ZmoJ1xyXG4gICAgICAgIH0sXHJcbiAgICB9LFxyXG5cclxuICAgIC8vIHVzZSB0aGlzIGZvciBpbml0aWFsaXphdGlvblxyXG4gICAgb25Mb2FkOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5fZGljdF9wbGF5ZXJDb21wID0ge307XHJcbiAgICAgICAgdGhpcy5fcGxheWVyTnVtID0gMDtcclxuICAgICAgICB0aGlzLl9wbGF5ZXJDb21wTmFtZSA9ICdCdWxsMTAwX3BsYXllckJsb2NrJztcclxuICAgICAgICB0aGlzLl9kZWxhZXJXb3JkQ29tcE5hbWUgPSAnT2JqX2RlYWxlcldvcmRFZmZlY3QnO1xyXG4gICAgICAgIHRoaXMucmVnaXN0ZXJCdXR0b24odGhpcy5ub2RlX2J0bkdyYWJEZWFsZXIsIHRoaXMuT25DbGlja19ncmFiRGVhbGVyLCB0aGlzKTtcclxuXHJcbiAgICAgICAgdGhpcy5nZXRNeXNlbGZDb21wKCkuc2V0SXNIYW5kbGUodHJ1ZSk7XHJcbiAgICB9LFxyXG5cclxuICAgIC8v54K55Ye75LqG5LiK5bqE5oyJ6ZKuXHJcbiAgICBPbkNsaWNrX2dyYWJEZWFsZXIgOiBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICBHRy5idWxsMTAwTWdyLnNlbmRfZ2V0RGVhbGVyTGlzdCgpO1xyXG4gICAgfSxcclxuXHJcbiAgICAvL3NlYXRJbmZvTGlzdO+8muW6p+S9jeS4iueahOeOqeWutu+8m3NlbGZJbmZv6Ieq5bex77ybZGVhbGVySW5mb+W6hOWutlxyXG4gICAgc2V0U3RhcnRJbmZvIDogZnVuY3Rpb24gKHNlYXRJbmZvTGlzdCwgc2VsZkluZm8sIGRlYWxlckluZm8pIHtcclxuICAgICAgICAvL+aVtOeQhuW6p+S9jeS/oeaBr1xyXG4gICAgICAgIHZhciBkaWN0UGxheWVyID0ge307XHJcbiAgICAgICAgdmFyIHNlbGZJRCA9IEdHLmdldFBsYXllcigpLmdldFBsYXllcklEKCk7XHJcbiAgICAgICAgdmFyIGxpc3RMZW4gPSBzZWF0SW5mb0xpc3QubGVuZ3RoLCBzZWF0SW5kZXgsIG9uZVBsYXllciwgY29udGVudCwgcGxheWVyQ29tcDtcclxuICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgbGlzdExlbjsgaSArKyl7XHJcbiAgICAgICAgICAgIG9uZVBsYXllciA9IHNlYXRJbmZvTGlzdFtpXTtcclxuICAgICAgICAgICAgc2VhdEluZGV4ID0gb25lUGxheWVyWydzZWF0SW5kZXgnXTtcclxuICAgICAgICAgICAgY29udGVudCA9IG9uZVBsYXllclsncGxheWVyJ107XHJcbiAgICAgICAgICAgIGNvbnRlbnQuc2VhdEluZGV4ID0gc2VhdEluZGV4O1xyXG4gICAgICAgICAgICBkaWN0UGxheWVyW3NlYXRJbmRleF0gPSBjb250ZW50O1xyXG4gICAgICAgIH1cclxuICAgICAgICAvL+agueaNruS/oeaBr+aOp+WItuS9jee9ruS4iueOqeWutueahOaYvumakFxyXG4gICAgICAgIC8v5pi+56S65pyJ5pWw5o2u55qE546p5a62XHJcbiAgICAgICAgZm9yKHZhciBzZWF0SW5kZXggaW4gZGljdFBsYXllcil7XHJcbiAgICAgICAgICAgIGNvbnRlbnQgPSBkaWN0UGxheWVyW3NlYXRJbmRleF07XHJcbiAgICAgICAgICAgIC8v5LuO5YiX6KGo5Lit6I635Y+W5bGe5LqO6Ieq5bex55qE5L+h5oGvXHJcbiAgICAgICAgICAgIGlmKGNvbnRlbnQgJiYgY29udGVudC5wbGF5ZXJJZCA9PSBzZWxmSUQpIHtcclxuICAgICAgICAgICAgICAgIGZvcih2YXIgYXR0ck5hbWUgaW4gY29udGVudCl7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoYXR0ck5hbWUgPT0gJ3NlYXRJbmRleCcgJiYgY29udGVudFthdHRyTmFtZV0gPT0gMCkgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZkluZm9bYXR0ck5hbWVdID0gY29udGVudFthdHRyTmFtZV07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy/luqfkvY3lj7fku44x5byA5aeLXHJcbiAgICAgICAgICAgIGlmKHNlYXRJbmRleCA8IDEpIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAvL+acieeOqeWutuaVsOaNrlxyXG4gICAgICAgICAgICBwbGF5ZXJDb21wID0gdGhpcy5fYWRkT25lUGxheWVyKHNlYXRJbmRleCk7XHJcbiAgICAgICAgICAgIGlmKHBsYXllckNvbXApIHtcclxuICAgICAgICAgICAgICAgIHBsYXllckNvbXAuc2V0UGxheWVyRGF0YShjb250ZW50KTtcclxuICAgICAgICAgICAgICAgIGlmKGNvbnRlbnQgJiYgY29udGVudC5wbGF5ZXJJZCA9PSBzZWxmSUQpIHRoaXMuZ2V0TXlzZWxmQ29tcCgpLmJpbmRTZWF0TXlzZWxmKHBsYXllckNvbXApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8v6ZqQ6JeP5rKh5pyJ5pWw5o2u55qE5L2N572uXHJcbiAgICAgICAgdmFyIHNpdGVOdW0gPSB0aGlzLmNvbXBfc2VhdHNDb250YWluZXIuZ2V0U2VhdHNOdW0oKTtcclxuICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgc2l0ZU51bTsgaSArKyl7XHJcbiAgICAgICAgICAgIHNlYXRJbmRleCA9IGkrMTtcclxuICAgICAgICAgICAgaWYoIWRpY3RQbGF5ZXJbc2VhdEluZGV4XSkgdGhpcy5fcmVtb3ZlT25lUGxheWVyKHNlYXRJbmRleCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8v5LuO5bqE5a625pWw5o2u5Lit6I635Y+W546p5a626Ieq5bex55qE5pWw5o2uXHJcbiAgICAgICAgdmFyIGlzRGVhbGVyID0gQm9vbGVhbihzZWxmSUQgPT0gZGVhbGVySW5mby5wbGF5ZXJJZCk7XHJcbiAgICAgICAgc2VsZkluZm8uaXNEZWFsZXIgPSBpc0RlYWxlcjtcclxuICAgICAgICBpZiAoc2VsZkluZm8uaXNEZWFsZXIpIHtcclxuICAgICAgICAgICAgZm9yICh2YXIgYXR0ck5hbWUgaW4gZGVhbGVySW5mbykge1xyXG4gICAgICAgICAgICAgICAgc2VsZkluZm9bYXR0ck5hbWVdID0gZGVhbGVySW5mb1thdHRyTmFtZV07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy/luoTlrrbkuIrluoTmjInpkq7kuI3lj6/nlKhcclxuICAgICAgICAgICAgdGhpcy5zZXRVcERlYWxlckJ0bkVuYWJsZShmYWxzZSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy/njqnlrrbkuIrluoTmjInpkq7lj6/nlKhcclxuICAgICAgICAgICAgdGhpcy5zZXRVcERlYWxlckJ0bkVuYWJsZSh0cnVlKTtcclxuICAgICAgICAgICAgLy9pZighR0cuYnVsbDEwME1nci5jaGVja015c2VsZkluZm8oc2VhdEluZm9MaXN0KSkgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZihzZWxmSW5mby5wbGF5ZXJJZCkgdGhpcy5zZXRPd25lckluZm8oc2VsZkluZm8pO1xyXG4gICAgICAgIHRoaXMuc2V0RGVhbGVySW5mbyhkZWFsZXJJbmZvKTtcclxuXHJcbiAgICAgICAgLy/lvZPliY3oh6rlt7HmmK/luoTlrrbnmoTml7blgJnoh6rlt7HnjqnlrrbpnIDopoHmmL7npLrnmoTmmK/lj6/nlKjkvZnpop3ogIzkuI3mmK/lhajpop1cclxuICAgICAgICBpZihpc0RlYWxlcil7XHJcbiAgICAgICAgICAgIC8v5Zug5Li65paw55qE5py65Yi25bey57uP5rKh5pyJ57uZ5LqI546p5a6255qE5L+h5oGv77yM5Li65LqG5pu05paw6YeR6aKd5omA5Lul5Y+q6IO95LuO5bqE5a625L+h5oGv5Lit6K6h566XXHJcbiAgICAgICAgICAgIHRoaXMuZ2V0TXlzZWxmQ29tcCgpLnNldEdvbGRWYWx1ZShzZWxmSW5mby5jb2luKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5nZXRNeXNlbGZDb21wKCkuc2V0SXNEZWFsZXIoaXNEZWFsZXIpO1xyXG4gICAgfSxcclxuXHJcbiAgICBzZXRPd25lckluZm8gOiBmdW5jdGlvbiAoc2VsZkluZm8pIHtcclxuICAgICAgICB0aGlzLmdldE15c2VsZkNvbXAoKS5zZXRQbGF5ZXJEYXRhKHNlbGZJbmZvKTtcclxuICAgICAgICB0aGlzLmdldE15c2VsZkNvbXAoKS5zZXRIYW5kbGVJbmZvKHNlbGZJbmZvKTtcclxuICAgIH0sXHJcbiAgICBzZXREZWFsZXJJbmZvIDogZnVuY3Rpb24gKGRlYWxlckluZm8pIHtcclxuICAgICAgICB2YXIgbmV3RGVhbGVySW5mbyA9IHt9O1xyXG4gICAgICAgIGZvcih2YXIgYXR0ck5hbWUgaW4gZGVhbGVySW5mbyl7XHJcbiAgICAgICAgICAgIG5ld0RlYWxlckluZm9bYXR0ck5hbWVdID0gZGVhbGVySW5mb1thdHRyTmFtZV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIG5ld0RlYWxlckluZm8uY29pbiA9IGRlYWxlckluZm8udXNhYmxlQmFsYW5jZTtcclxuICAgICAgICB0aGlzLmdldERlYWxlckNvbXAoKS5zZXRQbGF5ZXJEYXRhKG5ld0RlYWxlckluZm8pO1xyXG4gICAgfSxcclxuXHJcbiAgICAvL+acieS4gOS4queOqeWutuS4remAlOi/m+WFpVxyXG4gICAgb25lUGxheWVySW5zZXJ0IDogZnVuY3Rpb24gKHNlYXRJbmRleCwgcGxheWVyRGF0YSkge1xyXG4gICAgICAgIHZhciByZWcgPSAvXlxcKz9bMS05XVswLTldKiQvO1xyXG4gICAgICAgIGlmIChyZWcudGVzdChzZWF0SW5kZXgpKSB7XHJcbiAgICAgICAgICAgIHBsYXllckRhdGEuc2VhdEluZGV4ID0gc2VhdEluZGV4O1xyXG4gICAgICAgICAgICB0aGlzLl9oaWRlUGxheWVyKHNlYXRJbmRleCwgcGxheWVyRGF0YS5wbGF5ZXJJZCk7XHJcbiAgICAgICAgICAgIHZhciBwbGF5ZXJDb21wID0gdGhpcy5fYWRkT25lUGxheWVyKHNlYXRJbmRleCk7XHJcbiAgICAgICAgICAgIGlmKHBsYXllckNvbXApIHBsYXllckNvbXAuc2V0UGxheWVyRGF0YShwbGF5ZXJEYXRhKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIC8v5Yig6Zmk6YeN5aSN55qE546p5a6277yM57uT5p2f5pys5bGA5pe25YCZ77yM6YeN5aSN6L+b5Ye65oi/6Ze05Lya5Ye6546w5aSa5Liq5ZCM5qC3546p5a62XHJcbiAgICBfaGlkZVBsYXllciA6IGZ1bmN0aW9uICh0YXJnZXRJbmRleCwgcGxheWVySUQpIHtcclxuICAgICAgICB2YXIgcGxheWVyQ29tcDtcclxuICAgICAgICBmb3IodmFyIHNlYXRJbmRleCBpbiB0aGlzLl9kaWN0X3BsYXllckNvbXApe1xyXG4gICAgICAgICAgICBwbGF5ZXJDb21wID0gdGhpcy5fZGljdF9wbGF5ZXJDb21wW3NlYXRJbmRleF07XHJcbiAgICAgICAgICAgIGlmKHNlYXRJbmRleCA9PSB0YXJnZXRJbmRleCl7XHJcbiAgICAgICAgICAgICAgICAvL+aJvuWIsOS9jee9rlxyXG4gICAgICAgICAgICAgICAgLy9pZihwbGF5ZXJDb21wKSBwbGF5ZXJDb21wLnNldFBsYXllckRhdGEocGxheWVyRGF0YSk7XHJcbiAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgaWYocGxheWVyQ29tcCAmJiBwbGF5ZXJDb21wLmdldFBsYXllcklEKCkgPT0gcGxheWVySUQpe1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3JlbW92ZU9uZVBsYXllcihzZWF0SW5kZXgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIC8v5aKe5Yqg5LiA5Liq5LiK5Zy6546p5a62XHJcbiAgICBfYWRkT25lUGxheWVyIDogZnVuY3Rpb24gKHNpdGVJbmRleCkge1xyXG4gICAgICAgIHZhciBwbGF5ZXJDb21wID0gdGhpcy5fZGljdF9wbGF5ZXJDb21wW3NpdGVJbmRleF07XHJcbiAgICAgICAgaWYoIXBsYXllckNvbXApe1xyXG4gICAgICAgICAgICB2YXIgcGxheWVyID0gY2MuaW5zdGFudGlhdGUodGhpcy5wcmVmYWJfcGxheWVyKTtcclxuICAgICAgICAgICAgcGxheWVyLnBhcmVudCA9IHRoaXMubm9kZV9wbGF5ZXJDb250YWluZXI7XHJcblxyXG4gICAgICAgICAgICB2YXIgcG9zID0gdGhpcy5jb21wX3NlYXRzQ29udGFpbmVyLmFkZE9uZVBsYXllcihzaXRlSW5kZXgpO1xyXG4gICAgICAgICAgICBwb3MgPSBHX1RPT0wuYWRhcHRQb3MocG9zKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBzaXplID0gR19UT09MLmFkYXB0U2l6ZShwbGF5ZXIud2lkdGgsIHBsYXllci5oZWlnaHQpO1xyXG4gICAgICAgICAgICBwbGF5ZXIud2lkdGggPSBzaXplLndpZHRoO1xyXG4gICAgICAgICAgICBwbGF5ZXIuaGVpZ2h0ID0gc2l6ZS5oZWlnaHQ7XHJcblxyXG4gICAgICAgICAgICBwbGF5ZXIucG9zaXRpb24gPSBwb3M7XHJcbiAgICAgICAgICAgIHBsYXllckNvbXAgPSBwbGF5ZXIuZ2V0Q29tcG9uZW50KHRoaXMuX3BsYXllckNvbXBOYW1lKTtcclxuICAgICAgICAgICAgdGhpcy5fZGljdF9wbGF5ZXJDb21wW3NpdGVJbmRleF0gPSBwbGF5ZXJDb21wO1xyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICB0aGlzLmNvbXBfc2VhdHNDb250YWluZXIuYWRkT25lUGxheWVyKHNpdGVJbmRleCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuX3BsYXllck51bSArPSAxO1xyXG4gICAgICAgIHJldHVybiBwbGF5ZXJDb21wO1xyXG4gICAgfSxcclxuICAgIC8v5LiA5Liq546p5a6256a75Zy6XHJcbiAgICBfcmVtb3ZlT25lUGxheWVyIDogZnVuY3Rpb24gKHNpdGVJbmRleCkge1xyXG4gICAgICAgIHZhciBwbGF5ZXJDb21wID0gdGhpcy5fZGljdF9wbGF5ZXJDb21wW3NpdGVJbmRleF07XHJcbiAgICAgICAgaWYoIXBsYXllckNvbXAgfHwgIXBsYXllckNvbXAuZ2V0SXNTaG93KCkpIHJldHVyblxyXG4gICAgICAgIHBsYXllckNvbXAuaGlkZVBsYXllcigpO1xyXG4gICAgICAgIHRoaXMuY29tcF9zZWF0c0NvbnRhaW5lci5vbmVQbGF5ZXJMZWF2ZShzaXRlSW5kZXgpO1xyXG4gICAgICAgIHRoaXMuX3BsYXllck51bSAtPSAxO1xyXG4gICAgfSxcclxuXHJcbiAgICAvL+aYvuekuuaJgOacieeOqeWutueahOmHkeW4geWinuWHj+eJueaViFxyXG4gICAgc2hvd0dvbGRDaGFuZ2VFZmZlY3QgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHBsYXllcjtcclxuICAgICAgICBmb3IodmFyIHNpdGVJbmRleCBpbiB0aGlzLl9kaWN0X3BsYXllckNvbXApe1xyXG4gICAgICAgICAgICBwbGF5ZXIgPSB0aGlzLl9kaWN0X3BsYXllckNvbXBbc2l0ZUluZGV4XTtcclxuICAgICAgICAgICAgaWYocGxheWVyKXtcclxuICAgICAgICAgICAgICAgIHBsYXllci5zaG93R29sZENoYW5nZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vbWluZVxyXG4gICAgICAgIHRoaXMuZ2V0TXlzZWxmQ29tcCgpLnNob3dHb2xkQ2hhbmdlKCk7XHJcbiAgICB9LFxyXG5cclxuICAgIC8vPT09PT09PT09PT09PT09PT09PT09PT1cclxuXHJcbiAgICAvL+WcuuS4iueahOmHkeW4gee7k+eulyAgd2luRGljdCA9IHswOjEsIDI6MSwgNDoxfSwgIHvmoYzlrZDntKLlvJXvvJrmmK/lkKbog5zliKl9XHJcbiAgICBmbHlXaW5Hb2xkIDogZnVuY3Rpb24gKHdpbkRpY3QpIHtcclxuICAgICAgICB2YXIgaXNNb3ZlR29sZCA9IGZhbHNlO1xyXG4gICAgICAgIC8v6Ieq5bex55qE6YeR5biB57uT566XXHJcbiAgICAgICAgdmFyIHJlY29yZERpY3Q7XHJcbiAgICAgICAgdmFyIGNvbXAgPSB0aGlzLmdldE15c2VsZkNvbXAoKTtcclxuICAgICAgICByZWNvcmREaWN0ID0gY29tcC5nZXRCZXRSZWNvcmQoKTtcclxuICAgICAgICBpZihyZWNvcmREaWN0KXtcclxuICAgICAgICAgICAgdmFyIG5ld0RpY3QgPSB0aGlzLl9nZXRXaW5Hb2xkRGljdCh3aW5EaWN0LCByZWNvcmREaWN0KTtcclxuICAgICAgICAgICAgdGhpcy5fbW92ZUdvbGQobmV3RGljdCwgY29tcC5nZXRXb3JsZFBvcygpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy/lhbbku5bnjqnlrrbnmoTog5zliKnph5HluIHnp7vliqhcclxuICAgICAgICB2YXIgcGxheWVyQ29tcDtcclxuICAgICAgICBmb3IodmFyIHNlYXRJbmRleCBpbiB0aGlzLl9kaWN0X3BsYXllckNvbXApe1xyXG4gICAgICAgICAgICBwbGF5ZXJDb21wID0gdGhpcy5fZGljdF9wbGF5ZXJDb21wW3NlYXRJbmRleF07XHJcbiAgICAgICAgICAgIGlmKHBsYXllckNvbXAuZ2V0UGxheWVySUQoKSA9PSBHRy5nZXRQbGF5ZXJJRCgpKSBjb250aW51ZTtcclxuICAgICAgICAgICAgaWYocGxheWVyQ29tcCAmJiBwbGF5ZXJDb21wLmdldElzU2hvdygpKXtcclxuICAgICAgICAgICAgICAgIHJlY29yZERpY3QgPSBwbGF5ZXJDb21wLmdldEJldFJlY29yZCgpO1xyXG4gICAgICAgICAgICAgICAgaWYocmVjb3JkRGljdCl7XHJcbiAgICAgICAgICAgICAgICAgICAgaXNNb3ZlR29sZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5ld0RpY3QgPSB0aGlzLl9nZXRXaW5Hb2xkRGljdCh3aW5EaWN0LCByZWNvcmREaWN0KTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9tb3ZlR29sZChuZXdEaWN0LCBwbGF5ZXJDb21wLmdldFdvcmxkUG9zKCkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8v5piv5ZCm5pyJ5ZCD55Oc576k5LyX6LWi6ZKxXHJcbiAgICAgICAgcmVjb3JkRGljdCA9IEdHLmJ1bGwxMDBNZ3IuZ2V0SWRsZUJldHRpbmcoKTtcclxuICAgICAgICBpZihyZWNvcmREaWN0KXtcclxuICAgICAgICAgICAgaXNNb3ZlR29sZCA9IHRydWU7XHJcbiAgICAgICAgICAgIHZhciBuZXdEaWN0ID0gdGhpcy5fZ2V0V2luR29sZERpY3Qod2luRGljdCwgcmVjb3JkRGljdCk7XHJcbiAgICAgICAgICAgIHRoaXMuX21vdmVHb2xkKG5ld0RpY3QsIEdHLmJ1bGwxMDBNZ3IuZ2V0SWRsZUJldHRpbmdQb3MoKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvL+W6hOWutuWbnuaUtuWJqeS9meeahOmHkeW4gVxyXG4gICAgICAgIHZhciBnb2xkQ29udGFpbmVyID0gdGhpcy5nZXRHb2xkQ29udGFpbmVyKCk7XHJcbiAgICAgICAgdmFyIGlzRmx5ID0gZ29sZENvbnRhaW5lci5yZWNvdmVyQWxsR29sZCh0aGlzLmdldERlYWxlckNvbXAoKS5nZXRXb3JsZFBvcygpKTtcclxuICAgICAgICBpZihpc0ZseSkgaXNNb3ZlR29sZCA9IHRydWU7XHJcblxyXG4gICAgICAgIGlmKGlzTW92ZUdvbGQpIEdHLmF1ZGlvTWdyLnBsYXlTb3VuZCgxOCk7XHJcbiAgICB9LFxyXG5cclxuICAgIF9nZXRXaW5Hb2xkRGljdCA6IGZ1bmN0aW9uICh3aW5EaWN0LCByZWNvcmREaWN0KSB7XHJcbiAgICAgICAgdmFyIHRhYmxlVHlwZSwgbmV3RGljdCA9IHt9O1xyXG4gICAgICAgIGZvcih2YXIgdGFibGVJbmRleCBpbiB3aW5EaWN0KXtcclxuICAgICAgICAgICAgdGFibGVUeXBlID0gd2luRGljdFt0YWJsZUluZGV4XTtcclxuICAgICAgICAgICAgaWYodGFibGVUeXBlICYmIHJlY29yZERpY3RbdGFibGVJbmRleF0pe1xyXG4gICAgICAgICAgICAgICAgbmV3RGljdFt0YWJsZUluZGV4XSA9IHJlY29yZERpY3RbdGFibGVJbmRleF07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG5ld0RpY3RcclxuICAgIH0sXHJcbiAgICAvL+mHkeW4gee7k+eul+enu+WKqFxyXG4gICAgX21vdmVHb2xkIDogZnVuY3Rpb24gKHJlY292ZXJEaWN0LCB0YXJnZXRQb3MpIHtcclxuICAgICAgICB2YXIgZ29sZE51bSwgZ29sZENvbnRhaW5lciA9IHRoaXMuZ2V0R29sZENvbnRhaW5lcigpO1xyXG4gICAgICAgIGZvcih2YXIgdGFibGVJbmRleCBpbiByZWNvdmVyRGljdCl7XHJcbiAgICAgICAgICAgIGdvbGROdW0gPSByZWNvdmVyRGljdFt0YWJsZUluZGV4XTtcclxuXHJcbiAgICAgICAgICAgIHZhciBmbHlEYXRhTGlzdCA9IEdfT0JKLmRhdGFfZmx5R29sZF90YWJsZVRvUGxheWVyKCk7XHJcbiAgICAgICAgICAgIGZseURhdGFMaXN0LnRhYmxlSW5kZXggPSB0YWJsZUluZGV4O1xyXG4gICAgICAgICAgICBmbHlEYXRhTGlzdC5nb2xkTnVtID0gZ29sZE51bTtcclxuICAgICAgICAgICAgZmx5RGF0YUxpc3QudGFyZ2V0UG9zID0gdGFyZ2V0UG9zO1xyXG4gICAgICAgICAgICBnb2xkQ29udGFpbmVyLnRhYmxlVG9QbGF5ZXIoZmx5RGF0YUxpc3QpO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgLy/orr7nva7njqnlrrbmk43kvZzkvY3nva7nmoTmmL7pmpBcclxuICAgIHNldE15c2VsZklzU2hvdyA6IGZ1bmN0aW9uIChpc1Nob3cpIHtcclxuICAgICAgICB0aGlzLm5vZGVfbXlzZWxmLmFjdGl2ZSA9IGlzU2hvdztcclxuICAgIH0sXHJcbiAgICAvL+iuvue9ruaKouW6hOaMiemSruaYr+WQpuWPr+eUqFxyXG4gICAgc2V0VXBEZWFsZXJCdG5FbmFibGUgOiBmdW5jdGlvbiAoaXNFbmFibGUpIHtcclxuICAgICAgICB0aGlzLnNldEJ0bkVuYWJsZSh0aGlzLm5vZGVfYnRuR3JhYkRlYWxlcixpc0VuYWJsZSk7XHJcbiAgICB9LFxyXG5cclxuICAgIC8vPT09PT09PT09PT09PT09PT09PT09PT1cclxuXHJcbiAgICAvL+iOt+WPluW6hOWutueahOWNoeeJjOS9jee9rlxyXG4gICAgZ2V0RGVhbGVyUG9rZXJQb3MgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0RGVhbGVyQ29tcCgpLmdldERlYWxlclBva2VyUG9zKCk7XHJcbiAgICB9LFxyXG4gICAgLy/ojrflj5bnjqnlrrboh6rlt7FcclxuICAgIGdldE15c2VsZkNvbXAgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubm9kZV9teXNlbGYuZ2V0Q29tcG9uZW50KHRoaXMuX3BsYXllckNvbXBOYW1lKVxyXG4gICAgfSxcclxuICAgIC8v6I635Y+W546p5a625bqE5a2X54m55pWIXHJcbiAgICBnZXRNeXNlbGZFZmZlY3RDb21wIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBteXNlbGZDb21wID0gdGhpcy5nZXRNeXNlbGZDb21wKCk7XHJcbiAgICAgICAgdmFyIGNoaWxkID0gbXlzZWxmQ29tcC5ub2RlLmdldENoaWxkQnlOYW1lKCdiYW5rZXJNYXJrJyk7XHJcbiAgICAgICAgdmFyIGNvbXA7XHJcbiAgICAgICAgaWYoY2hpbGQpe1xyXG4gICAgICAgICAgICBjb21wID0gY2hpbGQuZ2V0Q29tcG9uZW50KHRoaXMuX2RlbGFlcldvcmRDb21wTmFtZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBjb21wXHJcbiAgICB9LFxyXG4gICAgZ2V0TXlzZWxmUG9zIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLm5vZGVfbXlzZWxmLnBvc2l0aW9uXHJcbiAgICB9LFxyXG4gICAgLy/ojrflj5bluoTlrrZcclxuICAgIGdldERlYWxlckNvbXAgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubm9kZV9kZWFsZXIuZ2V0Q29tcG9uZW50KHRoaXMuX3BsYXllckNvbXBOYW1lKVxyXG4gICAgfSxcclxuICAgIC8v6I635Y+W5bqE5a625bqE5a2X54m55pWIXHJcbiAgICBnZXREZWFsZXJXb3JkRWZmZWN0Q29tcCA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgZGVhbGVyQ29tcCA9IHRoaXMuZ2V0RGVhbGVyQ29tcCgpO1xyXG4gICAgICAgIHZhciBjaGlsZCA9IGRlYWxlckNvbXAubm9kZS5nZXRDaGlsZEJ5TmFtZSgnYmFua2VyTWFyaycpO1xyXG4gICAgICAgIHZhciBjb21wO1xyXG4gICAgICAgIGlmKGNoaWxkKXtcclxuICAgICAgICAgICAgY29tcCA9IGNoaWxkLmdldENvbXBvbmVudCh0aGlzLl9kZWxhZXJXb3JkQ29tcE5hbWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gY29tcFxyXG4gICAgfSxcclxuICAgIC8v6I635Y+W5Zyo5bqn5L2N5LiK55qE546p5a626ISa5pysXHJcbiAgICBnZXRQbGF5ZXJDb21wIDogZnVuY3Rpb24gKHNpdGVJbmRleCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9kaWN0X3BsYXllckNvbXBbc2l0ZUluZGV4XTtcclxuICAgIH0sXHJcbiAgICAvL+iOt+WPlumHkeW4geWuueWZqFxyXG4gICAgZ2V0R29sZENvbnRhaW5lciA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gR0cuYnVsbDEwME1nci5nZXRHb2xkQ29udGFpbmVyKCk7XHJcbiAgICB9LFxyXG5cclxuICAgIC8v5riF55CG5omA5pyJXHJcbiAgICBjbGVhckFsbCA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBmb3IodmFyIHNlYXRJbmRleCBpbiB0aGlzLl9kaWN0X3BsYXllckNvbXApe1xyXG4gICAgICAgICAgICB0aGlzLl9yZW1vdmVPbmVQbGF5ZXIoc2VhdEluZGV4KTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIC8vIGNhbGxlZCBldmVyeSBmcmFtZSwgdW5jb21tZW50IHRoaXMgZnVuY3Rpb24gdG8gYWN0aXZhdGUgdXBkYXRlIGNhbGxiYWNrXHJcbiAgICAvLyB1cGRhdGU6IGZ1bmN0aW9uIChkdCkge1xyXG5cclxuICAgIC8vIH0sXHJcbn0pO1xyXG4iLCIvL+WNoeeJjOWuueWZqFxyXG5cclxuXHJcbmNjLkNsYXNzKHtcclxuICAgIGV4dGVuZHM6IGNjLkNvbXBvbmVudCxcclxuXHJcbiAgICBwcm9wZXJ0aWVzOiB7XHJcbiAgICAgICAgX3Bvb2wgOiBudWxsLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/lr7nosaHlrrnlmahcclxuICAgICAgICBfc3RhcnRQb3MgOiBudWxsLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+W8gOWni+S9jee9rlxyXG4gICAgICAgIF9wb2tlck51bSA6IG51bGwsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5a2Y5Zyo55qE5Y2h54mM5pWw6YePXHJcbiAgICAgICAgX2RpY3RfcG9rZXJHcm91cCA6IG51bGwsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+WNoeeJjOWvueixoeeJjOe7hFxyXG4gICAgICAgIF9wb2tlclNpemUgOiBudWxsLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5Y2h54mM55qE5a696auYXHJcbiAgICAgICAgX2NvdmVyUG9rZXJDYWxsRnVuYyA6IG51bGwsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+aJgOacieiDjOmdouWNoeeJjOWPkeWujFxyXG4gICAgICAgIF9kaWN0X3dpbkxpc3QgOiBudWxsLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v6IOc5Yip55qE5Y2h54mMXHJcbiAgICAgICAgX2xpc3RfcG9rZXJSZXN1bHRWYWx1ZSA6IG51bGwsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+WNoeeJjOW8gOeJjOWQjueahOe7k+aenOaVsOWAvFxyXG4gICAgICAgIF9saXN0X3Bva2VyUG9zIDogbnVsbCwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+WNoeeJjOS9jee9ruS/oeaBr1xyXG4gICAgICAgIF9tYXhQb2tlck51bSA6IG51bGwsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5pyA5aSn55qE5Y2h54mM5pWw6YePXHJcbiAgICAgICAgX2xpc3RfaGlkZVBva2VycyA6IG51bGwsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/pmpDol4/nmoTljaHniYzliJfooahcclxuXHJcbiAgICAgICAgcHJlZmFiX3Bva2VyIDogY2MuUHJlZmFiLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/ljaHniYzlrrnlmahcclxuICAgIH0sXHJcblxyXG4gICAgLy8gdXNlIHRoaXMgZm9yIGluaXRpYWxpemF0aW9uXHJcbiAgICBvbkxvYWQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLl9wb2tlckNvbXBOYW1lID0gJ09ial9wb2tlcic7XHJcbiAgICAgICAgdGhpcy5fbGlzdF9oaWRlUG9rZXJzID0gW107XHJcbiAgICAgICAgdGhpcy5fcG9rZXJOdW0gPSAwO1xyXG5cclxuICAgICAgICAvL+WNoeeJjOmXtOmalFxyXG4gICAgICAgIHRoaXMuX29mZlBva2VyWCA9IDIwO1xyXG4gICAgICAgIC8v5Y+R54mM5pe26Ze06Ze06ZqUXHJcbiAgICAgICAgdGhpcy5fb2ZmR2l2ZVRpbWUgPSAwLjA4O1xyXG4gICAgICAgIC8v5q+P5Ymv54mM5LmL6Ze055qE5pe26Ze06Ze06ZqUXHJcbiAgICAgICAgdGhpcy5fb2ZmR3JvdXBUaW1lID0gMC4zO1xyXG4gICAgICAgIC8v5Y2V5byg5Y2h54mM56e75Yqo5pe26Ze0XHJcbiAgICAgICAgdGhpcy5fcG9rZXJNb3ZlVGltZSA9IDAuODtcclxuICAgICAgICAvL+S4gOWJr+eJjOacieWHoOW8oFxyXG4gICAgICAgIHRoaXMuX2dyb3VwUG9rZXJOdW0gPSA1O1xyXG4gICAgICAgIC8v5Y2h54mM56ys5LqM5Liq5Yqo5L2c56e75Yqo5pe26Ze0XHJcbiAgICAgICAgdGhpcy5fcG9rZXJNb3ZlVGltZTIgPSAwLjI7XHJcbiAgICAgICAgLy/lr7nljaHniYzov5vooYznvKnmlL5cclxuICAgICAgICB0aGlzLl9wb2tlclNjYWxlID0gMTtcclxuICAgICAgICAvL+W8gOeJjOmXtOmalFxyXG4gICAgICAgIHRoaXMuX29wZW5JbnRlcnZhbCA9IDAuNjtcclxuICAgIH0sXHJcblxyXG4gICAgLy/liIblj5Hnm5bkvY/nmoTniYxcclxuICAgIGdpdmVDb3ZlclBva2VycyA6IGZ1bmN0aW9uIChwb3NMaXN0LCBjYWxsRnVuYywgaXNPdmVyQW5pKSB7XHJcbiAgICAgICAgdGhpcy5fY292ZXJQb2tlckNhbGxGdW5jID0gY2FsbEZ1bmM7XHJcbiAgICAgICAgdGhpcy5fbWF4UG9rZXJOdW0gPSBwb3NMaXN0Lmxlbmd0aCAqIHRoaXMuX2dyb3VwUG9rZXJOdW07XHJcbiAgICAgICAgdGhpcy5fY2xlYXJQb2tlcnMoKTtcclxuICAgICAgICB0aGlzLl9wb2tlckRhdGEgPSBudWxsO1xyXG4gICAgICAgIGlmKHBvc0xpc3QpIHtcclxuICAgICAgICAgICAgdGhpcy5fbGlzdF9wb2tlclBvcyA9IHBvc0xpc3Q7XHJcbiAgICAgICAgICAgIHRoaXMuX3Bva2VyRGF0YSA9IHRoaXMuX2xpc3RfcG9rZXJQb3MuY29uY2F0KFtdKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYoaXNPdmVyQW5pKSB0aGlzLl9zaG93UG9rZXJHcm91cCgpO1xyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLl9naXZlUG9rZXJHcm91cCgpO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgLy/nm7TmjqXlsIbpnIDopoHnmoTniYzmmL7npLrlh7rmnaXvvIzkuI3lgZrliqjnlLtcclxuICAgIF9zaG93UG9rZXJHcm91cCA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgcG9zLCBwb3NMaXN0TGVuID0gdGhpcy5fcG9rZXJEYXRhLmxlbmd0aCwgcG9rZXIsIGN1ck51bTtcclxuICAgICAgICBmb3IodmFyIGkgPSBwb3NMaXN0TGVuLTE7IGkgPj0gMDsgaSAtLSl7XHJcbiAgICAgICAgICAgIHBvcyA9IHRoaXMuX3Bva2VyRGF0YVtpXTtcclxuICAgICAgICAgICAgZm9yKHZhciBqID0gMDsgaiA8IHRoaXMuX2dyb3VwUG9rZXJOdW07IGogKyspe1xyXG4gICAgICAgICAgICAgICAgcG9rZXIgPSB0aGlzLl9nZXRPbmVQb2tlcigpO1xyXG4gICAgICAgICAgICAgICAgaWYocG9rZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICBjdXJOdW0gPSB0aGlzLl9wb2tlck51bSV0aGlzLl9ncm91cFBva2VyTnVtO1xyXG4gICAgICAgICAgICAgICAgICAgIHBva2VyLnBvc2l0aW9uID0gY2MucChwb3MueCArIHRoaXMuX29mZlBva2VyWCpjdXJOdW0sIHBvcy55LXRoaXMuX3Bva2VyT2ZmWSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoIXRoaXMuX2RpY3RfcG9rZXJHcm91cFt0aGlzLl9nZXRHcm91cE51bSgpXSkgdGhpcy5fZGljdF9wb2tlckdyb3VwW3RoaXMuX2dldEdyb3VwTnVtKCldID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fZGljdF9wb2tlckdyb3VwW3RoaXMuX2dldEdyb3VwTnVtKCldLnB1c2gocG9rZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3Bva2VyTnVtICs9IDE7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYodGhpcy5fY292ZXJQb2tlckNhbGxGdW5jKXtcclxuICAgICAgICAgICAgdGhpcy5fY292ZXJQb2tlckNhbGxGdW5jKCk7XHJcbiAgICAgICAgICAgIHRoaXMuX2NvdmVyUG9rZXJDYWxsRnVuYyA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgICAvL+WPkeS4gOWJr+eJjFxyXG4gICAgX2dpdmVQb2tlckdyb3VwIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmKCF0aGlzLl9wb2tlckRhdGEgfHwgdGhpcy5fcG9rZXJEYXRhLmxlbmd0aCA8IDEpIHtcclxuICAgICAgICAgICAgLy/miYDmnInljaHniYzlj5HlroxcclxuICAgICAgICAgICAgaWYodGhpcy5fY292ZXJQb2tlckNhbGxGdW5jKXtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2NvdmVyUG9rZXJDYWxsRnVuYygpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fY292ZXJQb2tlckNhbGxGdW5jID0gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLl9mbHlOdW0gPSA1O1xyXG4gICAgICAgIHRoaXMuX2RpY3RfcG9rZXJHcm91cFt0aGlzLl9nZXRHcm91cE51bSgpXSA9IFtdO1xyXG4gICAgICAgIHZhciB0YXJnZXRQb3MgPSB0aGlzLl9wb2tlckRhdGEucG9wKCk7XHJcbiAgICAgICAgZm9yKHZhciBpID0gMDsgaSA8IHRoaXMuX2dyb3VwUG9rZXJOdW07IGkgKyspe1xyXG4gICAgICAgICAgICAvL+acgOWQjuWdkOagh+mcgOimgeiuoeeul+WNoeeJjOeahOWuvemrmFxyXG4gICAgICAgICAgICB0aGlzLl9mbHlPbmVQb2tlcih0YXJnZXRQb3MpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBHRy5hdWRpb01nci5wbGF5U291bmQoMTQpO1xyXG4gICAgfSxcclxuICAgIC8v56e75Yqo5Y2V5byg54mMXHJcbiAgICBfZmx5T25lUG9rZXIgOiBmdW5jdGlvbiAodGFyZ2V0UG9zKSB7XHJcbiAgICAgICAgdmFyIHBva2VyID0gdGhpcy5fZ2V0T25lUG9rZXIoKTtcclxuICAgICAgICBpZighdGFyZ2V0UG9zIHx8ICFwb2tlcikgcmV0dXJuO1xyXG4gICAgICAgIHZhciBjdXJOdW0gPSB0aGlzLl9wb2tlck51bSV0aGlzLl9ncm91cFBva2VyTnVtO1xyXG4gICAgICAgIHZhciBhY3QxID0gY2MuZGVsYXlUaW1lKHRoaXMuX29mZkdpdmVUaW1lKmN1ck51bSk7XHJcblxyXG4gICAgICAgIHZhciBuZWVkUG9zID0gY2MucCh0YXJnZXRQb3MueCwgdGFyZ2V0UG9zLnktdGhpcy5fcG9rZXJPZmZZKTtcclxuICAgICAgICB2YXIgYWN0MiA9IGNjLm1vdmVUbyhHX1RPT0wuZ2V0VW5pZm9ybVRpbWUocG9rZXIucG9zaXRpb24sIG5lZWRQb3MsIHRoaXMuX3Bva2VyTW92ZVRpbWUpLCBuZWVkUG9zKTtcclxuICAgICAgICBwb2tlci5zdG9wQWxsQWN0aW9ucygpO1xyXG4gICAgICAgIHBva2VyLnJ1bkFjdGlvbihjYy5zZXF1ZW5jZShhY3QxLGFjdDIsIGNjLmNhbGxGdW5jKHRoaXMuX29uZVBva2VyRmx5RW5kLCB0aGlzKSkpO1xyXG4gICAgICAgIHRoaXMuX2RpY3RfcG9rZXJHcm91cFt0aGlzLl9nZXRHcm91cE51bSgpXS5wdXNoKHBva2VyKTtcclxuICAgICAgICB0aGlzLl9wb2tlck51bSArPSAxO1xyXG4gICAgfSxcclxuICAgIF9vbmVQb2tlckZseUVuZCA6IGZ1bmN0aW9uICh0YXJnZXQpIHtcclxuICAgICAgICAvL+acieS4gOW8oOWNoeeJjOenu+WKqOe7k+adn1xyXG4gICAgICAgIHRoaXMuX2ZseU51bSAtPSAxO1xyXG4gICAgICAgIGlmKHRoaXMuX2ZseU51bSA8IDEpIHtcclxuICAgICAgICAgICAgdGhpcy5fc29ydFBva2VyT2ZmKCk7XHJcbiAgICAgICAgICAgIHZhciBhY3QgPSBjYy5kZWxheVRpbWUodGhpcy5fb2ZmR3JvdXBUaW1lKTtcclxuICAgICAgICAgICAgdGhpcy5ub2RlLnJ1bkFjdGlvbihjYy5zZXF1ZW5jZShhY3QsY2MuY2FsbEZ1bmModGhpcy5fZ2l2ZVBva2VyR3JvdXAsIHRoaXMpKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIC8v5oqK5Y+R5aW955qE54mM5pWj5byAXHJcbiAgICBfc29ydFBva2VyT2ZmIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBwb2tlckxpc3QgPSB0aGlzLl9kaWN0X3Bva2VyR3JvdXBbdGhpcy5fZ2V0R3JvdXBOdW0oKS0xXTtcclxuICAgICAgICB2YXIgbGVuID0gcG9rZXJMaXN0Lmxlbmd0aDtcclxuICAgICAgICB2YXIgcG9rZXI7XHJcbiAgICAgICAgZm9yKHZhciBpID0gMDsgaSA8IGxlbjsgaSArKyl7XHJcbiAgICAgICAgICAgIHBva2VyID0gcG9rZXJMaXN0W2ldO1xyXG4gICAgICAgICAgICBpZighcG9rZXIpIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICBwb2tlci5zdG9wQWxsQWN0aW9ucygpO1xyXG4gICAgICAgICAgICBwb2tlci5ydW5BY3Rpb24oY2MubW92ZUJ5KHRoaXMuX3Bva2VyTW92ZVRpbWUyLCB0aGlzLl9vZmZQb2tlclgqaSwwKSk7O1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgLy/orr7nva7ljaHniYznmoTkv6Hmga9cclxuICAgIHNldFBva2Vyc0RhdGEgOiBmdW5jdGlvbiAoZGF0YUxpc3QsIHBva2VyVmFsdWVMaXN0KSB7XHJcbiAgICAgICAgdGhpcy5fbGlzdF9wb2tlclJlc3VsdFZhbHVlID0gcG9rZXJWYWx1ZUxpc3Q7XHJcbiAgICAgICAgdmFyIHBva2VyR3JvdXAsIHBva2VyRGF0YSwgcG9rZXJOb2RlTGlzdCwgcG9rZXJHcm91cE51bSA9IHRoaXMuX2dldEdyb3VwTnVtKCk7XHJcbiAgICAgICAgZm9yKHZhciBpID0gMDsgaSA8IHBva2VyR3JvdXBOdW07IGkgKyspe1xyXG4gICAgICAgICAgICBwb2tlckdyb3VwID0gZGF0YUxpc3RbaV07XHJcbiAgICAgICAgICAgIHBva2VyTm9kZUxpc3QgPSB0aGlzLl9kaWN0X3Bva2VyR3JvdXBbaV07XHJcbiAgICAgICAgICAgIGlmKHBva2VyR3JvdXApe1xyXG4gICAgICAgICAgICAgICAgZm9yKHZhciBqID0gMDsgaiA8IHBva2VyR3JvdXAubGVuZ3RoOyBqICsrKXtcclxuICAgICAgICAgICAgICAgICAgICBwb2tlckRhdGEgPSBwb2tlckdyb3VwW2pdO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3NldE9uZVBva2VySW5mbyhwb2tlck5vZGVMaXN0W2pdLCBwb2tlckRhdGEucG9rZXJJbmRleCwgcG9rZXJEYXRhLmlzT3Blbik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgX3NldE9uZVBva2VySW5mbyA6IGZ1bmN0aW9uIChwb2tlciwgcG9rZXJJbmRleCwgaXNPcGVuKSB7XHJcbiAgICAgICAgdmFyIHBva2VySW5mbyA9IEdfREFUQS5nZXRQb2tlckluZm8ocG9rZXJJbmRleCk7XHJcbiAgICAgICAgdmFyIHBva2VyQ29tcCA9IHBva2VyLmdldENvbXBvbmVudCh0aGlzLl9wb2tlckNvbXBOYW1lKTtcclxuICAgICAgICBwb2tlckNvbXAuc2V0UG9rZXJJbmZvKHBva2VySW5mby5wb2tlclR5cGUsIHBva2VySW5mby5wb2tlclZhbHVlLCBpc09wZW4pO1xyXG4gICAgfSxcclxuXHJcbiAgICAvL+W8gOeJjFxyXG4gICAgb3BlblBva2VycyA6IGZ1bmN0aW9uIChkaWN0KSB7XHJcbiAgICAgICAgdGhpcy5fZGljdF93aW5MaXN0ID0gZGljdDtcclxuICAgICAgICB0aGlzLl9vcGVuR3JvdXBJbmRleCA9IDA7XHJcbiAgICAgICAgdGhpcy5fb3Blbk9uZUdyb3VwKCk7XHJcbiAgICB9LFxyXG4gICAgLy/lvIDlkK/kuIDlia/niYxcclxuICAgIF9vcGVuT25lR3JvdXAgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYodGhpcy5fcG9rZXJOdW0gPCAxKXtcclxuICAgICAgICAgICAgcmV0dXJuXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBwb2tlckxpc3QgPSB0aGlzLl9kaWN0X3Bva2VyR3JvdXBbdGhpcy5fb3Blbkdyb3VwSW5kZXhdO1xyXG4gICAgICAgIGlmKCFwb2tlckxpc3Qpe1xyXG4gICAgICAgICAgICAvL+WNoeeJjOWFqOmDqOaJk+W8gFxyXG4gICAgICAgICAgICByZXR1cm5cclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGNvbXAsIHBva2VySW5mbywgY2FsbEZ1bmMgPSB0aGlzLl9vcGVuQ2FsbEJhY2suYmluZCh0aGlzKTtcclxuICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgcG9rZXJMaXN0Lmxlbmd0aDsgaSArKyl7XHJcbiAgICAgICAgICAgIGNvbXAgPSBwb2tlckxpc3RbaV0uZ2V0Q29tcG9uZW50KHRoaXMuX3Bva2VyQ29tcE5hbWUpO1xyXG4gICAgICAgICAgICBjb21wLm9wZW5Qb2tlcihjYWxsRnVuYyk7XHJcbiAgICAgICAgICAgIGNhbGxGdW5jID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5fb3Blbkdyb3VwSW5kZXggKz0gMTtcclxuICAgICAgICBHRy5hdWRpb01nci5wbGF5U291bmQoMTYpO1xyXG4gICAgICAgIC8vdGhpcy5ub2RlLnJ1bkFjdGlvbihjYy5zZXF1ZW5jZShjYy5kZWxheVRpbWUodGhpcy5fb3BlbkludGVydmFsKSwgY2MuY2FsbEZ1bmModGhpcy5fb3Blbk9uZUdyb3VwLCB0aGlzKSkpO1xyXG4gICAgfSxcclxuICAgIF9vcGVuQ2FsbEJhY2sgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYodGhpcy5fb3Blbkdyb3VwSW5kZXggPiAxICYmIHRoaXMuX2RpY3Rfd2luTGlzdCl7XHJcbiAgICAgICAgICAgIHZhciB0YWJsZUluZGV4ID0gdGhpcy5fb3Blbkdyb3VwSW5kZXgtMjtcclxuICAgICAgICAgICAgdmFyIG1pbkluZGV4ID0gR0cuYnVsbDEwME1nci5nZXRNaW5UYWJsZUluZGV4KHRhYmxlSW5kZXgpO1xyXG4gICAgICAgICAgICB2YXIgYmlnSW5kZXggPSBHRy5idWxsMTAwTWdyLmdldEJpZ1RhYmxlSW5kZXgodGFibGVJbmRleCk7XHJcbiAgICAgICAgICAgIHZhciBjdXJJbmRleCA9IHRoaXMuX2RpY3Rfd2luTGlzdFtiaWdJbmRleF0gPyBiaWdJbmRleCA6IG1pbkluZGV4O1xyXG4gICAgICAgICAgICBHRy5idWxsMTAwTWdyLnNob3dUYWJsZVdpbihjdXJJbmRleCwgdGhpcy5fZGljdF93aW5MaXN0W2N1ckluZGV4XSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8v5pi+56S66L+Z5Ymv5Y2h54mM55qE5YC8XHJcbiAgICAgICAgdmFyIHZhbHVlID0gdGhpcy5fbGlzdF9wb2tlclJlc3VsdFZhbHVlW3RoaXMuX29wZW5Hcm91cEluZGV4LTFdO1xyXG4gICAgICAgIHZhciBwb3MgPSB0aGlzLl9saXN0X3Bva2VyUG9zW3RoaXMuX2xpc3RfcG9rZXJQb3MubGVuZ3RoIC0gdGhpcy5fb3Blbkdyb3VwSW5kZXhdO1xyXG4gICAgICAgIEdHLmJ1bGwxMDBNZ3Iuc2hvd1Bva2VyUmVzdWx0KGNjLnAocG9zLngrdGhpcy5fcG9rZXJTaXplLndpZHRoKjAuNSwgcG9zLnktK3RoaXMuX3Bva2VyU2l6ZS5oZWlnaHQqMC41KSwgdmFsdWUpO1xyXG4gICAgICAgIHZhciBhdWRpb0lEID0gdmFsdWUgPT0gMCA/IDExIDogdmFsdWU7XHJcbiAgICAgICAgR0cuYXVkaW9NZ3IucGxheVNvdW5kKGF1ZGlvSUQpO1xyXG4gICAgICAgIC8v5omT5byA5LiL5LiA5LuY54mMXHJcbiAgICAgICAgdGhpcy5fb3Blbk9uZUdyb3VwKCk7XHJcbiAgICB9LFxyXG5cclxuICAgIC8v5aKe5Yqg5LiA5byg5Y2h54mMXHJcbiAgICBfZ2V0T25lUG9rZXIgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYoIXRoaXMucHJlZmFiX3Bva2VyKSByZXR1cm4gbnVsbDtcclxuICAgICAgICAvL2lmKCF0aGlzLl9wb29sKSB0aGlzLl9wb29sID0gbmV3IGNjLk5vZGVQb29sKCdCdWxsMTAwX3Bva2VyQ29udGFpbmVyJyk7XHJcblxyXG4gICAgICAgIHZhciBwb2tlck5vZGUgPSB0aGlzLl9saXN0X2hpZGVQb2tlcnMucG9wKCk7XHJcbiAgICAgICAgaWYoIXBva2VyTm9kZSl7XHJcbiAgICAgICAgICAgIHBva2VyTm9kZSA9IGNjLmluc3RhbnRpYXRlKHRoaXMucHJlZmFiX3Bva2VyKTtcclxuICAgICAgICAgICAgaWYoIXRoaXMuX3Bva2VyU2l6ZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fcG9rZXJTaXplID0gcG9rZXJOb2RlLmdldENvbXBvbmVudCh0aGlzLl9wb2tlckNvbXBOYW1lKS5nZXRQb2tlclNpemUoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3Bva2VyT2ZmWSA9IHRoaXMuX3Bva2VyU2l6ZS5oZWlnaHQqdGhpcy5fcG9rZXJTY2FsZSowLjU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcG9rZXJOb2RlLnBhcmVudCA9IHRoaXMubm9kZTtcclxuICAgICAgICAgICAgcG9rZXJOb2RlLnNjYWxlID0gdGhpcy5fcG9rZXJTY2FsZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcG9rZXJOb2RlLnN0b3BBbGxBY3Rpb25zKCk7XHJcbiAgICAgICAgcG9rZXJOb2RlLmFjdGl2ZSA9IHRydWU7XHJcbiAgICAgICAgcG9rZXJOb2RlLnBvc2l0aW9uID0gdGhpcy5fZ2V0U3RhcnRQb3MoKTtcclxuICAgICAgICBwb2tlck5vZGUuZ2V0Q29tcG9uZW50KHRoaXMuX3Bva2VyQ29tcE5hbWUpLnNob3dQb2tlck5lZ2F0aXZlKCk7XHJcbiAgICAgICAgcmV0dXJuIHBva2VyTm9kZTtcclxuICAgIH0sXHJcblxyXG4gICAgX3JlbW92ZVBva2VyIDogZnVuY3Rpb24gKHBva2VyTm9kZSkge1xyXG4gICAgICAgIC8vcG9rZXJOb2RlLnN0b3BBbGxBY3Rpb25zKClcclxuICAgICAgICBwb2tlck5vZGUuZ2V0Q29tcG9uZW50KHRoaXMuX3Bva2VyQ29tcE5hbWUpLmNsZWFyQWxsQWN0aW9ucygpO1xyXG4gICAgICAgIHBva2VyTm9kZS5nZXRDb21wb25lbnQodGhpcy5fcG9rZXJDb21wTmFtZSkuc2hvd1Bva2VyTmVnYXRpdmUoKTtcclxuICAgICAgICBwb2tlck5vZGUuYWN0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgLy90aGlzLl9wb29sLnB1dChwb2tlck5vZGUpO1xyXG4gICAgICAgIHRoaXMuX2xpc3RfaGlkZVBva2Vycy5wdXNoKHBva2VyTm9kZSk7XHJcbiAgICB9LFxyXG5cclxuICAgIF9kZWxldGVQb2tlcnMgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgLy92YXIgcG9rZXIgPSB0aGlzLm5vZGUuY2hpbGRyZW47XHJcbiAgICAgICAgLy9mb3IodmFyIGtleSBpbiBwb2tlcil7XHJcbiAgICAgICAgLy8gICAgcG9rZXJba2V5XS5kZXN0cm95KCk7XHJcbiAgICAgICAgLy99XHJcbiAgICB9LFxyXG4gICAgX2NsZWFyUG9rZXJzIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuX3Bva2VyTnVtID0gMDtcclxuICAgICAgICB0aGlzLl9kaWN0X3Bva2VyR3JvdXAgPSB7fTtcclxuICAgICAgICB2YXIgcG9rZXJzID0gdGhpcy5ub2RlLmNoaWxkcmVuO1xyXG4gICAgICAgIHRoaXMuX2xpc3RfaGlkZVBva2VycyA9IFtdO1xyXG4gICAgICAgIHZhciBjb21wLCBwb2tlck51bSA9IHBva2Vycy5sZW5ndGg7XHJcbiAgICAgICAgZm9yKHZhciBpID0gcG9rZXJOdW0tMTsgaSA+PSAwOyBpIC0tKXtcclxuICAgICAgICAgICAgY29tcCA9IHBva2Vyc1tpXS5nZXRDb21wb25lbnQodGhpcy5fcG9rZXJDb21wTmFtZSk7XHJcbiAgICAgICAgICAgIGlmKGNvbXApIHRoaXMuX3JlbW92ZVBva2VyKHBva2Vyc1tpXSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICAvL+iOt+WPluWIneWni+S9jee9rlxyXG4gICAgX2dldFN0YXJ0UG9zIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmKCF0aGlzLl9zdGFydFBvcyl7XHJcbiAgICAgICAgICAgIHRoaXMuX3N0YXJ0UG9zID0gR19EQVRBLmdldEJvdHRvbVRpcFBvcygpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5fc3RhcnRQb3NcclxuICAgIH0sXHJcbiAgICAvL+iOt+WPluW9k+WJjeacieWHoOe7hOWNoeeJjFxyXG4gICAgX2dldEdyb3VwTnVtIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiBNYXRoLmZsb29yKHRoaXMuX3Bva2VyTnVtL3RoaXMuX2dyb3VwUG9rZXJOdW0pXHJcbiAgICB9LFxyXG4gICAgLy/ojrflj5blvZPliY3mmK/lkKblt7Lnu4/lj5HlrozlrozmlbTnmoTniYxcclxuICAgIGdldElzR2l2ZVBva2VyRW5kIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiAhQm9vbGVhbih0aGlzLl9jb3ZlclBva2VyQ2FsbEZ1bmMpXHJcbiAgICB9LFxyXG5cclxuICAgIC8v5riF55CG5omA5pyJXHJcbiAgICBjbGVhckFsbCA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLl9jbGVhclBva2VycygpO1xyXG4gICAgICAgIHRoaXMuX2RpY3Rfd2luTGlzdCA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5ub2RlLnN0b3BBbGxBY3Rpb25zKCk7XHJcbiAgICB9LFxyXG5cclxuICAgIG9uRGVzdHJveSA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLl9kZWxldGVQb2tlcnMoKTtcclxuICAgICAgICBpZih0aGlzLl9wb29sKSB0aGlzLl9wb29sLmNsZWFyKCk7XHJcbiAgICB9LFxyXG5cclxuXHJcbiAgICAvLyBjYWxsZWQgZXZlcnkgZnJhbWUsIHVuY29tbWVudCB0aGlzIGZ1bmN0aW9uIHRvIGFjdGl2YXRlIHVwZGF0ZSBjYWxsYmFja1xyXG4gICAgLy8gdXBkYXRlOiBmdW5jdGlvbiAoZHQpIHtcclxuXHJcbiAgICAvLyB9LFxyXG59KTtcclxuIiwiLy/mmL7npLrljaHniYznmoTnu5PmnpxcclxuXHJcbmNjLkNsYXNzKHtcclxuICAgIGV4dGVuZHM6IGNjLkNvbXBvbmVudCxcclxuXHJcbiAgICBwcm9wZXJ0aWVzOiB7XHJcbiAgICAgICAgcHJlZmFiX3Bva2VyUmVzdWx0IDoge1xyXG4gICAgICAgICAgICBkZWZhdWx0IDogbnVsbCxcclxuICAgICAgICAgICAgdHlwZSA6IGNjLlByZWZhYixcclxuICAgICAgICAgICAgZGlzcGxheU5hbWUgOiAn5Y2h54mM57uT5p6cJ1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgLy8gdXNlIHRoaXMgZm9yIGluaXRpYWxpemF0aW9uXHJcbiAgICBvbkxvYWQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLl9wb2tlclJlc3VsdENvbXBOYW1lID0gJ09ial9vblBva2VyUmVzdWx0JztcclxuICAgIH0sXHJcblxyXG4gICAgc2hvd1Bva2VyUmVzdWx0IDogZnVuY3Rpb24gKHBvcywgcG9rZXJWYWx1ZSkge1xyXG4gICAgICAgIGlmKCF0aGlzLl9saXN0X3Bva2VyUmVzdWx0KSB0aGlzLl9saXN0X3Bva2VyUmVzdWx0ID0gW107XHJcblxyXG4gICAgICAgIHZhciByZXN1bHRDb21wLCByZXN1bHROb2RlLCBuZWVkQ29tcDtcclxuICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgdGhpcy5fbGlzdF9wb2tlclJlc3VsdC5sZW5ndGg7IGkgKyspe1xyXG4gICAgICAgICAgICByZXN1bHRDb21wID0gdGhpcy5fbGlzdF9wb2tlclJlc3VsdFtpXTtcclxuICAgICAgICAgICAgaWYocmVzdWx0Q29tcCAmJiAhcmVzdWx0Q29tcC5nZXRJc1Nob3coKSl7XHJcbiAgICAgICAgICAgICAgICAvL+aciemakOiXj+eahOWNoeeJjFxyXG4gICAgICAgICAgICAgICAgbmVlZENvbXAgPSByZXN1bHRDb21wO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYoIW5lZWRDb21wKSB7XHJcbiAgICAgICAgICAgIHJlc3VsdE5vZGUgPSBjYy5pbnN0YW50aWF0ZSh0aGlzLnByZWZhYl9wb2tlclJlc3VsdCk7XHJcbiAgICAgICAgICAgIHJlc3VsdE5vZGUucGFyZW50ID0gdGhpcy5ub2RlO1xyXG4gICAgICAgICAgICBuZWVkQ29tcCA9IHJlc3VsdE5vZGUuZ2V0Q29tcG9uZW50KHRoaXMuX3Bva2VyUmVzdWx0Q29tcE5hbWUpO1xyXG4gICAgICAgICAgICB0aGlzLl9saXN0X3Bva2VyUmVzdWx0LnB1c2gobmVlZENvbXApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBuZWVkQ29tcC5zaG93UmVzdWx0KHBvcywgcG9rZXJWYWx1ZSwgdHJ1ZSk7XHJcbiAgICB9LFxyXG4gICAgX2NsZWFyUG9rZXJSZXN1bHQgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYodGhpcy5fbGlzdF9wb2tlclJlc3VsdCl7XHJcbiAgICAgICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCB0aGlzLl9saXN0X3Bva2VyUmVzdWx0Lmxlbmd0aDsgaSArKyl7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9saXN0X3Bva2VyUmVzdWx0W2ldLmhpZGVPblBva2VyUmVzdWx0KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIGNsZWFyQWxsIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuX2NsZWFyUG9rZXJSZXN1bHQoKTtcclxuICAgIH0sXHJcblxyXG4gICAgLy8gY2FsbGVkIGV2ZXJ5IGZyYW1lLCB1bmNvbW1lbnQgdGhpcyBmdW5jdGlvbiB0byBhY3RpdmF0ZSB1cGRhdGUgY2FsbGJhY2tcclxuICAgIC8vIHVwZGF0ZTogZnVuY3Rpb24gKGR0KSB7XHJcblxyXG4gICAgLy8gfSxcclxufSk7XHJcbiIsIi8v5pi+56S655m+5Lq655qE6LWb5LqL57uT5p6c55WM6Z2iXHJcblxyXG5cclxuY2MuQ2xhc3Moe1xyXG4gICAgZXh0ZW5kczogY2MuQ29tcG9uZW50LFxyXG5cclxuICAgIHByb3BlcnRpZXM6IHtcclxuICAgICAgICBfbGlzdF9yYW5rSGVhZCA6IG51bGwsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+aOkuihjOeahOWktOWDj+WIl+ihqFxyXG4gICAgICAgIF93aW5Db2xvciA6IG51bGwsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/og5zliKnnmoTpopzoibJcclxuICAgICAgICBfbG9zZUNvbG9yIDogbnVsbCwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5aSx6LSl55qE6aKc6ImyXHJcblxyXG4gICAgICAgIG5vZGVfbXlXaW5Hb2xkIDoge1xyXG4gICAgICAgICAgICBkZWZhdWx0IDogbnVsbCxcclxuICAgICAgICAgICAgdHlwZSA6IGNjLk5vZGUsXHJcbiAgICAgICAgICAgIGRpc3BsYXlOYW1lIDogJ+iHquW3sei1oueahOmSsSdcclxuICAgICAgICB9LFxyXG4gICAgICAgIHByZWZhYl9oZWFkIDoge1xyXG4gICAgICAgICAgICBkZWZhdWx0IDogbnVsbCxcclxuICAgICAgICAgICAgdHlwZSA6IGNjLlByZWZhYixcclxuICAgICAgICAgICAgZGlzcGxheU5hbWUgOiAn5aS05YOPJ1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgbm9kZV9jb250YWluZXIgOiB7XHJcbiAgICAgICAgICAgIGRlZmF1bHQgOiBudWxsLFxyXG4gICAgICAgICAgICB0eXBlIDogY2MuTm9kZSxcclxuICAgICAgICAgICAgZGlzcGxheU5hbWUgOiAn5aS05YOP5a655ZmoJ1xyXG4gICAgICAgIH0sXHJcbiAgICB9LFxyXG5cclxuICAgIC8vIHVzZSB0aGlzIGZvciBpbml0aWFsaXphdGlvblxyXG4gICAgb25Mb2FkOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5faGVhZENvbXBOYW1lID0gJ09ial93aW5SYW5rSGVhZCc7XHJcbiAgICAgICAgdGhpcy5fbG9zZUNvbG9yID0gbmV3IGNjLkNvbG9yKDE5OSwxOTksMTk5KTtcclxuICAgIH0sXHJcblxyXG4gICAgLy/mmL7npLrnu5PmnpxcclxuICAgIHNob3dSZXN1bHQgOiBmdW5jdGlvbiAoZGF0YU9iaikge1xyXG4gICAgICAgIHRoaXMubm9kZS5hY3RpdmUgPSB0cnVlO1xyXG4gICAgICAgIHZhciBteUNoYW5nZUdvbGQgPSBkYXRhT2JqLm15Q2hhbmdlR29sZDtcclxuICAgICAgICBpZighbXlDaGFuZ2VHb2xkKSBteUNoYW5nZUdvbGQgPSAwO1xyXG4gICAgICAgIHRoaXMuX3NldEdvbGRWYWx1ZShteUNoYW5nZUdvbGQpO1xyXG5cclxuICAgICAgICB2YXIgZGF0YUxpc3QgPSBbXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIG5hbWUgOiAn5Lq6MScsXHJcbiAgICAgICAgICAgICAgICBhZGRHb2xkIDogOTlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIF07XHJcbiAgICAgICAgdmFyIHJhbmtEaWN0ID0gZGF0YU9iai5vdGhlcnNJbmZvO1xyXG4gICAgICAgIGlmKHJhbmtEaWN0KSB7XHJcbiAgICAgICAgICAgIGRhdGFMaXN0ID0gW107XHJcbiAgICAgICAgICAgIHZhciBpbmZvO1xyXG4gICAgICAgICAgICBmb3IodmFyIHNlYXRJbmRleCBpbiByYW5rRGljdCl7XHJcbiAgICAgICAgICAgICAgICBpbmZvID0gcmFua0RpY3Rbc2VhdEluZGV4XTtcclxuICAgICAgICAgICAgICAgIHZhciBjaGFuZ2VHb2xkID0gaW5mby5jaGFuZ2VHb2xkO1xyXG4gICAgICAgICAgICAgICAgaWYoY2hhbmdlR29sZCA+IDApe1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGFMaXN0LnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lIDogaW5mby5uYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhZGRHb2xkIDpjaGFuZ2VHb2xkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpY29uIDogaW5mby5pY29uXHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLl9zaG93UmFuayhkYXRhTGlzdCk7XHJcbiAgICB9LFxyXG5cclxuICAgIF9zaG93UmFuayA6IGZ1bmN0aW9uIChkYXRhTGlzdCkge1xyXG4gICAgICAgIHZhciBoZWFkcyA9IHRoaXMubm9kZV9jb250YWluZXIuY2hpbGRyZW47XHJcbiAgICAgICAgdmFyIGxlbiA9IGhlYWRzLmxlbmd0aCwgaGVhZCwgZGF0YTtcclxuICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgaGVhZHMubGVuZ3RoOyBpICsrKXtcclxuICAgICAgICAgICAgaGVhZCA9IGhlYWRzW2ldLmdldENvbXBvbmVudCh0aGlzLl9oZWFkQ29tcE5hbWUpO1xyXG4gICAgICAgICAgICBpZihoZWFkKXtcclxuICAgICAgICAgICAgICAgIGRhdGEgPSBkYXRhTGlzdFtpXTtcclxuICAgICAgICAgICAgICAgIGlmKGRhdGEpe1xyXG4gICAgICAgICAgICAgICAgICAgIGhlYWQuc2V0SXNTaG93KHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGhlYWQuc2V0RGF0YShkYXRhKTtcclxuICAgICAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgICAgIGhlYWQuc2V0SXNTaG93KGZhbHNlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgX3NldEdvbGRWYWx1ZSA6IGZ1bmN0aW9uIChuZXdWYWx1ZSkge1xyXG4gICAgICAgIHZhciBpc1BsdXMgPSBCb29sZWFuKG5ld1ZhbHVlID4gMCk7XHJcbiAgICAgICAgdGhpcy5fc2V0TXlHb2xkQ29sb3IoaXNQbHVzKTtcclxuICAgICAgICB2YXIgc2hvd1N0cjtcclxuICAgICAgICBpZihpc1BsdXMpIHNob3dTdHIgPSAnKycrbmV3VmFsdWU7XHJcbiAgICAgICAgZWxzZSBzaG93U3RyID0gbmV3VmFsdWUrJyc7XHJcbiAgICAgICAgdGhpcy5ub2RlX215V2luR29sZC5nZXRDb21wb25lbnQoY2MuTGFiZWwpLnN0cmluZyA9IHNob3dTdHI7XHJcbiAgICB9LFxyXG5cclxuICAgIF9zZXRJc1Nob3cgOiBmdW5jdGlvbiAoaXNTaG93KSB7XHJcbiAgICAgICAgdGhpcy5ub2RlLmFjdGl2ZSA9IGlzU2hvdztcclxuICAgIH0sXHJcblxyXG4gICAgX3NldE15R29sZENvbG9yIDogZnVuY3Rpb24gKGlzV2luKSB7XHJcbiAgICAgICAgaWYoaXNXaW4pe1xyXG4gICAgICAgICAgICBpZih0aGlzLl93aW5Db2xvcikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ub2RlX215V2luR29sZC5jb2xvciA9IHRoaXMuX3dpbkNvbG9yO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fd2luQ29sb3IgPSBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIGlmKCF0aGlzLl93aW5Db2xvcikgdGhpcy5fd2luQ29sb3IgPSB0aGlzLm5vZGVfbXlXaW5Hb2xkLmNvbG9yO1xyXG4gICAgICAgICAgICB0aGlzLm5vZGVfbXlXaW5Hb2xkLmNvbG9yID0gdGhpcy5fbG9zZUNvbG9yO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgLy8gY2FsbGVkIGV2ZXJ5IGZyYW1lLCB1bmNvbW1lbnQgdGhpcyBmdW5jdGlvbiB0byBhY3RpdmF0ZSB1cGRhdGUgY2FsbGJhY2tcclxuICAgIC8vIHVwZGF0ZTogZnVuY3Rpb24gKGR0KSB7XHJcblxyXG4gICAgLy8gfSxcclxufSk7XHJcbiIsIi8v5a2Y5pS+5omA5pyJ55qE5qGM5a2QXHJcblxyXG5cclxuY2MuQ2xhc3Moe1xyXG4gICAgZXh0ZW5kczogY2MuQ29tcG9uZW50LFxyXG5cclxuICAgIHByb3BlcnRpZXM6IHtcclxuICAgICAgICBwcmVmYWJfdGFibGUgOiBjYy5QcmVmYWIsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5qGM5a2Q6aKE5Yi25L2TXHJcbiAgICB9LFxyXG5cclxuICAgIC8vIHVzZSB0aGlzIGZvciBpbml0aWFsaXphdGlvblxyXG4gICAgb25Mb2FkOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5fdGFibGVDb21wTmFtZSA9ICdCdWxsMTAwX3RhYmxlJztcclxuXHJcbiAgICAgICAgLy90aGlzLl9hZGRUYWJsZXMoKTtcclxuICAgIH0sXHJcblxyXG4gICAgX2FkZFRhYmxlcyA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgdGFibGVOdW0gPSA0O1xyXG4gICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCB0YWJsZU51bTsgaSArKyl7XHJcbiAgICAgICAgICAgIHZhciB0YWJsZSA9IGNjLmluc3RhbnRpYXRlKHRoaXMucHJlZmFiX3RhYmxlKTtcclxuICAgICAgICAgICAgaWYoIXRhYmxlKSBjb250aW51ZTtcclxuICAgICAgICAgICAgdGFibGUucGFyZW50ID0gdGhpcy5ub2RlO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgLy/liJ3lp4vljJbmiYDmnInnmoTmoYzlrZBcclxuICAgIGluaXRBbGxUYWJsZXMgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHRhYmxlcyA9IHRoaXMubm9kZS5jaGlsZHJlbjtcclxuICAgICAgICB2YXIgdGFibGUsY29tcDtcclxuICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgdGFibGVzLmxlbmd0aDsgaSArKyl7XHJcbiAgICAgICAgICAgIHRhYmxlID0gdGFibGVzW2ldO1xyXG4gICAgICAgICAgICBjb21wID0gdGFibGUuZ2V0Q29tcG9uZW50KHRoaXMuX3RhYmxlQ29tcE5hbWUpO1xyXG4gICAgICAgICAgICBpZihjb21wKSBjb21wLmluaXRUYWJsZShpKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIC8v6I635Y+W5q+P5byg5qGM5a2Q5a+55bqU55qE5Y2h54mM55qE5L2N572uXHJcbiAgICBnZXRUYWJsZVBva2VyUG9zIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciB0YWJsZXMgPSB0aGlzLm5vZGUuY2hpbGRyZW47XHJcbiAgICAgICAgdmFyIHRhYmxlLGNvbXAsIHBvc0xpc3QgPSBbXTtcclxuICAgICAgICBmb3IodmFyIGkgPSB0YWJsZXMubGVuZ3RoLTE7IGkgPj0gMDsgaSAtLSl7XHJcbiAgICAgICAgICAgIHRhYmxlID0gdGFibGVzW2ldO1xyXG4gICAgICAgICAgICBjb21wID0gdGFibGUuZ2V0Q29tcG9uZW50KHRoaXMuX3RhYmxlQ29tcE5hbWUpO1xyXG4gICAgICAgICAgICBpZihjb21wKSB7XHJcbiAgICAgICAgICAgICAgICBwb3NMaXN0LnB1c2goY29tcC5nZXRQb2tlclBvcygpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcG9zTGlzdFxyXG4gICAgfSxcclxuXHJcbiAgICAvL+W8gOWQr+aJgOacieahjOWtkOeahOeCueWHu+WKn+iDvVxyXG4gICAgc2V0VGFibGVUb3VjaEVuYWJsZSA6IGZ1bmN0aW9uIChpc0VuYWJsZSkge1xyXG4gICAgICAgIHZhciB0YWJsZXMgPSB0aGlzLm5vZGUuY2hpbGRyZW47XHJcbiAgICAgICAgdmFyIHRhYmxlLGNvbXA7XHJcbiAgICAgICAgZm9yKHZhciBpID0gMDsgaSA8IHRhYmxlcy5sZW5ndGg7IGkgKyspe1xyXG4gICAgICAgICAgICB0YWJsZSA9IHRhYmxlc1tpXTtcclxuICAgICAgICAgICAgY29tcCA9IHRhYmxlLmdldENvbXBvbmVudCh0aGlzLl90YWJsZUNvbXBOYW1lKTtcclxuICAgICAgICAgICAgaWYoY29tcCkgY29tcC5zZXRUb3VjaEVuYWJsZShpc0VuYWJsZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICAvL+aYvuekuuafkOW8oOahjOWtkOeahOiDnOWIqeWksei0peaDheWGtVxyXG4gICAgc2hvd1RhYmxlV2luIDogZnVuY3Rpb24gKHRhYmxlSW5kZXgsIHNob3dXaW4pIHtcclxuICAgICAgICB2YXIgdGFibGVzID0gdGhpcy5ub2RlLmNoaWxkcmVuO1xyXG4gICAgICAgIHZhciBjb250YWluZXJJbmRleCA9IEdHLmJ1bGwxMDBNZ3IuZ2V0VGFibGVDb250YWluZXJJbmRleCh0YWJsZUluZGV4KTtcclxuICAgICAgICB2YXIgdGFibGUgPSB0YWJsZXNbY29udGFpbmVySW5kZXhdO1xyXG4gICAgICAgIGlmKHRhYmxlKXtcclxuICAgICAgICAgICAgdmFyIGNvbXAgPSB0YWJsZS5nZXRDb21wb25lbnQodGhpcy5fdGFibGVDb21wTmFtZSk7XHJcbiAgICAgICAgICAgIGlmKGNvbXApIHtcclxuICAgICAgICAgICAgICAgIGNvbXAuc2hvd1dpbih0YWJsZUluZGV4LCBzaG93V2luKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgLy/ojrflj5blr7nlupTmoYzlrZDntKLlvJXnmoTvvIzlpJrkuKrpmo/mnLrph5HluIHkvY3nva5cclxuICAgIGdldEdvbGRQb3NMaXN0IDogZnVuY3Rpb24gKHRhYmxlSW5kZXgsIGdvbGROdW0pIHtcclxuICAgICAgICB2YXIgdGFibGVzID0gdGhpcy5ub2RlLmNoaWxkcmVuO1xyXG4gICAgICAgIHZhciBjb250YWluZXJJbmRleCA9IEdHLmJ1bGwxMDBNZ3IuZ2V0VGFibGVDb250YWluZXJJbmRleCh0YWJsZUluZGV4KTtcclxuICAgICAgICB2YXIgdGFibGUgPSB0YWJsZXNbY29udGFpbmVySW5kZXhdO1xyXG4gICAgICAgIGlmKHRhYmxlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0YWJsZS5nZXRDb21wb25lbnQodGhpcy5fdGFibGVDb21wTmFtZSkuZ2V0R29sZFBvc0xpc3QodGFibGVJbmRleCwgZ29sZE51bSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBudWxsXHJcbiAgICB9LFxyXG5cclxuICAgIC8v6K6+572u5qGM5a2Q55qE5oiQ5Yqf5oqV5rOo5L+h5oGvXHJcbiAgICBzZXRCZXR0aW5nU3VjY2VzcyA6IGZ1bmN0aW9uICh0YWJsZUluZGV4LCBnb2xkVmFsdWUsIGlzTWluZSkge1xyXG4gICAgICAgIHZhciB0YWJsZXMgPSB0aGlzLm5vZGUuY2hpbGRyZW47XHJcbiAgICAgICAgdmFyIGNvbnRhaW5lckluZGV4ID0gR0cuYnVsbDEwME1nci5nZXRUYWJsZUNvbnRhaW5lckluZGV4KHRhYmxlSW5kZXgpO1xyXG4gICAgICAgIHZhciB0YWJsZSA9IHRhYmxlc1tjb250YWluZXJJbmRleF07XHJcbiAgICAgICAgaWYodGFibGUpIHtcclxuICAgICAgICAgICAgLy/orr7nva7oh6rlt7HmoYzlrZDnmoTmiJDlip/mipXms6jkv6Hmga9cclxuICAgICAgICAgICAgaWYgKGlzTWluZSkgdGFibGUuZ2V0Q29tcG9uZW50KHRoaXMuX3RhYmxlQ29tcE5hbWUpLnNldE15c2VsZkJldHRpbmdTdWNjZXNzKHRhYmxlSW5kZXgsIGdvbGRWYWx1ZSk7XHJcbiAgICAgICAgICAgIGVsc2UgdGFibGUuZ2V0Q29tcG9uZW50KHRoaXMuX3RhYmxlQ29tcE5hbWUpLnNldEJldHRpbmdTdWNjZXNzKHRhYmxlSW5kZXgsIGdvbGRWYWx1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIC8vIGNhbGxlZCBldmVyeSBmcmFtZSwgdW5jb21tZW50IHRoaXMgZnVuY3Rpb24gdG8gYWN0aXZhdGUgdXBkYXRlIGNhbGxiYWNrXHJcbiAgICAvLyB1cGRhdGU6IGZ1bmN0aW9uIChkdCkge1xyXG5cclxuICAgIC8vIH0sXHJcbn0pO1xyXG4iLCIvL+S4gOW8oOi1jOahjFxyXG5cclxuY2MuQ2xhc3Moe1xyXG4gICAgZXh0ZW5kczogY2MuQ29tcG9uZW50LFxyXG5cclxuICAgIHByb3BlcnRpZXM6IHtcclxuICAgICAgICBfdHlwZVZhbHVlIDogbnVsbCwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+ivpeahjOi1jOeJjOeahOexu+Wei+WAvFxyXG4gICAgICAgIF9wb29sIDogbnVsbCwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+aUvue9rumHkeW4geeahOWuueWZqFxyXG4gICAgICAgIF9iaWdUYWJsZUluZGV4IDogbnVsbCwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5b2T5YmN5qGM5a2Q55qE57Si5byVLOWQjOaXtuS5n+aYr+WPluWkp+eahOahjOWtkOeahOe0ouW8lVxyXG4gICAgICAgIF9taW5UYWJsZUluZGV4IDogbnVsbCwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5piv5Y+W5bCP55qE5qGM5a2Q55qE57Si5byVXHJcbiAgICAgICAgX2JpZ0NlbnRlclBvcyA6IG51bGwsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/lt6bovrnnmoTph5HluIHlnZDmoIfkuK3lv4NcclxuICAgICAgICBfbWluQ2VudGVyUG9zIDogbnVsbCwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+WPs+i+ueeahOmHkeW4geWdkOagh+S4reW/g1xyXG4gICAgICAgIF93aW5UYWJsZVR5cGUgOiBudWxsLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v6IOc5Yip55qE5qGM5a2Q57G75Z6LXHJcblxyXG4gICAgICAgIF9iaWdHb2xkTnVtIDogbnVsbCwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/lt6bovrnph5HluIFcclxuICAgICAgICBfbWluR29sZE51bSA6IG51bGwsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/lj7Povrnph5HluIFcclxuICAgICAgICBfYmlnTXlHb2xkTnVtIDogbnVsbCwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5bem6L656YeR5biBXHJcbiAgICAgICAgX21pbk15R29sZE51bSA6IG51bGwsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/lj7Povrnph5HluIFcclxuXHJcbiAgICAgICAgbm9kZV9iaWcgOiBjYy5Ob2RlLFxyXG4gICAgICAgIG5vZGVfbWluIDogY2MuTm9kZSxcclxuICAgICAgICBmcmFtZV9iaWdMaWdodCA6IGNjLlNwcml0ZUZyYW1lLFxyXG4gICAgICAgIGZyYW1lX21pbkxpZ2h0IDogY2MuU3ByaXRlRnJhbWUsXHJcbiAgICAgICAgLy/mmL7npLrph5HluIHnmoTkuIrkuItsYWJlbFxyXG4gICAgICAgIG5vZGVfYmlnVXBMYWJlbCA6IHtcclxuICAgICAgICAgICAgZGVmYXVsdCA6IG51bGwsXHJcbiAgICAgICAgICAgIHR5cGUgOiBjYy5Ob2RlLFxyXG4gICAgICAgICAgICBkaXNwbGF5TmFtZSA6ICfmirzlpKfmgLvpop3oioLngrknXHJcbiAgICAgICAgfSxcclxuICAgICAgICBub2RlX2JpZ0Rvd25MYWJlbCA6IHtcclxuICAgICAgICAgICAgZGVmYXVsdCA6IG51bGwsXHJcbiAgICAgICAgICAgIHR5cGUgOiBjYy5Ob2RlLFxyXG4gICAgICAgICAgICBkaXNwbGF5TmFtZSA6ICfoh6rlt7HmirzlpKfoioLngrknXHJcbiAgICAgICAgfSxcclxuICAgICAgICBub2RlX21pblVwTGFiZWwgOiB7XHJcbiAgICAgICAgICAgIGRlZmF1bHQgOiBudWxsLFxyXG4gICAgICAgICAgICB0eXBlIDogY2MuTm9kZSxcclxuICAgICAgICAgICAgZGlzcGxheU5hbWUgOiAn5oq85bCP5oC76aKd6IqC54K5J1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgbm9kZV9taW5Eb3duTGFiZWwgOiB7XHJcbiAgICAgICAgICAgIGRlZmF1bHQgOiBudWxsLFxyXG4gICAgICAgICAgICB0eXBlIDogY2MuTm9kZSxcclxuICAgICAgICAgICAgZGlzcGxheU5hbWUgOiAn6Ieq5bex5oq85bCP6IqC54K5J1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgbm9kZV93aW5GcmFtZSA6IHtcclxuICAgICAgICAgICAgZGVmYXVsdCA6IG51bGwsXHJcbiAgICAgICAgICAgIHR5cGUgOiBjYy5Ob2RlLFxyXG4gICAgICAgICAgICBkaXNwbGF5TmFtZSA6ICfog5zliKnnibnmlYjmoYYnXHJcbiAgICAgICAgfSxcclxuICAgICAgICBsYWJlbF9sZWZ0VXAgOiB7XHJcbiAgICAgICAgICAgIGRlZmF1bHQgOiBudWxsLFxyXG4gICAgICAgICAgICB0eXBlIDogY2MuTGFiZWwsXHJcbiAgICAgICAgICAgIGRpc3BsYXlOYW1lIDogJ+aJgOacieeOqeWutuaKvOWkp+mHkeW4geaAu+minSdcclxuICAgICAgICB9LFxyXG4gICAgICAgIGxhYmVsX3JpZ2h0VXAgOiB7XHJcbiAgICAgICAgICAgIGRlZmF1bHQgOiBudWxsLFxyXG4gICAgICAgICAgICB0eXBlIDogY2MuTGFiZWwsXHJcbiAgICAgICAgICAgIGRpc3BsYXlOYW1lIDogJ+aJgOacieeOqeWutuaKvOWwj+mHkeW4geaAu+minSdcclxuICAgICAgICB9LFxyXG4gICAgfSxcclxuXHJcbiAgICAvLyB1c2UgdGhpcyBmb3IgaW5pdGlhbGl6YXRpb25cclxuICAgIG9uTG9hZDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuX3Njcm9sbENvbXBOYW1lID0gJ09ial9zY3JvbGxWYWx1ZSc7XHJcblxyXG4gICAgICAgIC8v5Y2h54mMWOS9jee9ruWBj+enu1xyXG4gICAgICAgIHRoaXMuX3Bva2VyT2ZmWCA9IDAuNDtcclxuICAgICAgICB0aGlzLl93aW5Db2xvciA9IHRoaXMubm9kZV9iaWdEb3duTGFiZWwuY2hpbGRyZW5bMV0uY29sb3I7XHJcbiAgICAgICAgdGhpcy5fbG9zdENvbG9yID0gbmV3IGNjLkNvbG9yKDE4OSwxODgsMTg4KTtcclxuICAgIH0sXHJcblxyXG4gICAgLy/liJ3lp4vljJbotYzmoYxcclxuICAgIGluaXRUYWJsZSA6IGZ1bmN0aW9uIChfaW5kZXgpIHtcclxuICAgICAgICB0aGlzLl9zZXRUYWJsZUluZGV4KF9pbmRleCk7XHJcbiAgICAgICAgdGhpcy5fc2V0QmlnTXVsdGlwbGUoMCk7XHJcbiAgICAgICAgdGhpcy5fc2V0TWluTXVsdGlwbGUoMCk7XHJcblxyXG4gICAgICAgIHRoaXMuX3NldEJpZ0Rvd25Hb2xkKDApO1xyXG4gICAgICAgIHRoaXMuX3NldEJpZ1VwR29sZCgwKTtcclxuICAgICAgICB0aGlzLl9zZXRNaW5Eb3duR29sZCgwKTtcclxuICAgICAgICB0aGlzLl9zZXRNaW5VcEdvbGQoMCk7XHJcbiAgICAgICAgdGhpcy5yZXNldFdpblNob3coKTtcclxuICAgIH0sXHJcblxyXG4gICAgb25DbGlja19iaWcgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIG1nciA9IEdHLmJ1bGwxMDBNZ3I7XHJcbiAgICAgICAgdmFyIGdvbGROdW0gPSBtZ3IuZ2V0TXlzZWxmRmx5R29sZE51bSgpO1xyXG4gICAgICAgIG1nci50b3VjaFRhYmxlKHRoaXMuX2JpZ1RhYmxlSW5kZXgsIHRoaXMuX2dldEJpZ0dvbGRQb3MoZ29sZE51bSkpO1xyXG4gICAgfSxcclxuICAgIG9uQ2xpY2tfbWluIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBtZ3IgPSBHRy5idWxsMTAwTWdyO1xyXG4gICAgICAgIHZhciBnb2xkTnVtID0gR0cuYnVsbDEwME1nci5nZXRNeXNlbGZGbHlHb2xkTnVtKCk7XHJcbiAgICAgICAgR0cuYnVsbDEwME1nci50b3VjaFRhYmxlKHRoaXMuX21pblRhYmxlSW5kZXgsIHRoaXMuX2dldE1pbkdvbGRQb3MoZ29sZE51bSkpO1xyXG4gICAgfSxcclxuXHJcbiAgICAvL+aKleazqOaIkOWKn+WQjuaYvuekuuivpeahjOWtkOeahOaKleazqOS/oeaBr1xyXG4gICAgc2V0QmV0dGluZ1N1Y2Nlc3MgOiBmdW5jdGlvbiAodGFibGVJbmRleCwgZ29sZFZhbHVlKSB7XHJcbiAgICAgICAgaWYodGFibGVJbmRleCUyID09IDApe1xyXG4gICAgICAgICAgICAvL+aJgOacieeOqeWutuaKvOWkp+aAu+mineaYvuekulxyXG4gICAgICAgICAgICB0aGlzLl9iaWdHb2xkTnVtICs9IGdvbGRWYWx1ZTtcclxuICAgICAgICAgICAgdGhpcy5fc2V0QmlnVXBHb2xkKHRoaXMuX2JpZ0dvbGROdW0pO1xyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAvL+aJgOacieeOqeWutuaKvOWwj+aAu+mineaYvuekulxyXG4gICAgICAgICAgICB0aGlzLl9taW5Hb2xkTnVtICs9IGdvbGRWYWx1ZTtcclxuICAgICAgICAgICAgdGhpcy5fc2V0TWluVXBHb2xkKHRoaXMuX21pbkdvbGROdW0pO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgLy/oh6rlt7HmipXms6jmiJDlip/lkI7mmL7npLror6XmoYzlrZDnmoTmipXms6jkv6Hmga9cclxuICAgIHNldE15c2VsZkJldHRpbmdTdWNjZXNzIDogZnVuY3Rpb24gKHRhYmxlSW5kZXgsIGdvbGRWYWx1ZSkge1xyXG4gICAgICAgIGlmKHRhYmxlSW5kZXglMiA9PSAwKXtcclxuICAgICAgICAgICAgLy/oh6rlt7HmirzlpKdcclxuICAgICAgICAgICAgdGhpcy5fYmlnTXlHb2xkTnVtICs9IGdvbGRWYWx1ZTtcclxuICAgICAgICAgICAgdGhpcy5fc2V0QmlnRG93bkdvbGQodGhpcy5fYmlnTXlHb2xkTnVtKTtcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgLy/oh6rlt7HmirzlsI9cclxuICAgICAgICAgICAgdGhpcy5fbWluTXlHb2xkTnVtICs9IGdvbGRWYWx1ZTtcclxuICAgICAgICAgICAgdGhpcy5fc2V0TWluRG93bkdvbGQodGhpcy5fbWluTXlHb2xkTnVtKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5zZXRCZXR0aW5nU3VjY2Vzcyh0YWJsZUluZGV4LCBnb2xkVmFsdWUpO1xyXG4gICAgfSxcclxuXHJcbiAgICAvL+aYvuekuuivpeahjOWtkOS4iumHkeW4geeahOiDnOWIqVxyXG4gICAgc2hvd1dpbiA6IGZ1bmN0aW9uICh0YWJsZUluZGV4LCBtdWx0aXBsZSkge1xyXG4gICAgICAgIC8v5Yy65Z+f5YCN5pWwXHJcbiAgICAgICAgdmFyIGJldHRpbmdMYWJlbD1udWxsLCBjdXJHb2xkVmFsdWUgPSBudWxsO1xyXG4gICAgICAgIGlmKCFtdWx0aXBsZSkgbXVsdGlwbGUgPSAxO1xyXG4gICAgICAgIGlmKCF0aGlzLl9maXJzdEJpZ0ltZykgdGhpcy5fZmlyc3RCaWdJbWcgPSB0aGlzLm5vZGVfYmlnLmdldENvbXBvbmVudChjYy5TcHJpdGUpLnNwcml0ZUZyYW1lO1xyXG4gICAgICAgIGlmKCF0aGlzLl9maXJzdE1pbkltZykgdGhpcy5fZmlyc3RNaW5JbWcgPSB0aGlzLm5vZGVfbWluLmdldENvbXBvbmVudChjYy5TcHJpdGUpLnNwcml0ZUZyYW1lO1xyXG4gICAgICAgIHRoaXMubm9kZV93aW5GcmFtZS5hY3RpdmUgPSB0cnVlO1xyXG4gICAgICAgIC8vdGhpcy5ub2RlX3dpbkZyYW1lLndpZHRoID0gdGhpcy5ub2RlX2JpZy5wYXJlbnQud2lkdGgqMS4xNTtcclxuXHJcbiAgICAgICAgaWYodGFibGVJbmRleCUyID09IDApe1xyXG4gICAgICAgICAgICAvL+Wkp1xyXG4gICAgICAgICAgICB0aGlzLl93aW5UYWJsZVR5cGUgPSBHX1RZUEUudGFibGVUeXBlLmJpZztcclxuICAgICAgICAgICAgdGhpcy5ub2RlX2JpZy5nZXRDb21wb25lbnQoY2MuU3ByaXRlKS5zcHJpdGVGcmFtZSA9IHRoaXMuZnJhbWVfYmlnTGlnaHQ7XHJcbiAgICAgICAgICAgIHRoaXMubm9kZV93aW5GcmFtZS54ID0gdGhpcy5ub2RlX2JpZy5wYXJlbnQueDtcclxuICAgICAgICAgICAgaWYodGhpcy5fYmlnTXlHb2xkTnVtID4gMCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fc2V0QmlnTXVsdGlwbGUobXVsdGlwbGUpO1xyXG4gICAgICAgICAgICAgICAgYmV0dGluZ0xhYmVsID0gdGhpcy5ub2RlX2JpZ0Rvd25MYWJlbC5jaGlsZHJlblsxXS5nZXRDb21wb25lbnQoY2MuTGFiZWwpO1xyXG4gICAgICAgICAgICAgICAgY3VyR29sZFZhbHVlID0gdGhpcy5fYmlnTXlHb2xkTnVtO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vbG9zdFxyXG4gICAgICAgICAgICBpZih0aGlzLl9taW5NeUdvbGROdW0gPiAwKXtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3NldE1pbk11bHRpcGxlKG11bHRpcGxlKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3NldE1pbkRvd25Hb2xkKHRoaXMuX21pbk15R29sZE51bSoobXVsdGlwbGUpLCB0cnVlKVxyXG4gICAgICAgICAgICAgICAgdGhpcy5ub2RlX21pbkRvd25MYWJlbC5jaGlsZHJlblswXS5jb2xvciA9IHRoaXMuX2xvc3RDb2xvcjtcclxuICAgICAgICAgICAgICAgIHRoaXMubm9kZV9taW5Eb3duTGFiZWwuY2hpbGRyZW5bMV0uY29sb3IgPSB0aGlzLl9sb3N0Q29sb3I7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgLy/lsI9cclxuICAgICAgICAgICAgdGhpcy5fd2luVGFibGVUeXBlID0gR19UWVBFLnRhYmxlVHlwZS5taW47XHJcbiAgICAgICAgICAgIHRoaXMubm9kZV9taW4uZ2V0Q29tcG9uZW50KGNjLlNwcml0ZSkuc3ByaXRlRnJhbWUgPSB0aGlzLmZyYW1lX21pbkxpZ2h0O1xyXG4gICAgICAgICAgICB0aGlzLm5vZGVfd2luRnJhbWUueCA9IHRoaXMubm9kZV9taW4ucGFyZW50Lng7XHJcbiAgICAgICAgICAgIGlmKHRoaXMuX21pbk15R29sZE51bSA+IDApIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3NldE1pbk11bHRpcGxlKG11bHRpcGxlKTtcclxuICAgICAgICAgICAgICAgIGJldHRpbmdMYWJlbCA9IHRoaXMubm9kZV9taW5Eb3duTGFiZWwuY2hpbGRyZW5bMV0uZ2V0Q29tcG9uZW50KGNjLkxhYmVsKTtcclxuICAgICAgICAgICAgICAgIGN1ckdvbGRWYWx1ZSA9IHRoaXMuX21pbk15R29sZE51bTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy9sb3N0XHJcbiAgICAgICAgICAgIGlmKHRoaXMuX2JpZ015R29sZE51bSA+IDApe1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fc2V0QmlnTXVsdGlwbGUobXVsdGlwbGUpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fc2V0QmlnRG93bkdvbGQodGhpcy5fYmlnTXlHb2xkTnVtKihtdWx0aXBsZSksIHRydWUpXHJcbiAgICAgICAgICAgICAgICB0aGlzLm5vZGVfYmlnRG93bkxhYmVsLmNoaWxkcmVuWzBdLmNvbG9yID0gdGhpcy5fbG9zdENvbG9yO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ub2RlX2JpZ0Rvd25MYWJlbC5jaGlsZHJlblsxXS5jb2xvciA9IHRoaXMuX2xvc3RDb2xvcjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYoYmV0dGluZ0xhYmVsKXtcclxuICAgICAgICAgICAgLy/og5zliKnljLrln5/mnInmipXms6hcclxuICAgICAgICAgICAgdmFyIGRhdGFPYmogPSB7XHJcbiAgICAgICAgICAgICAgICBzdGFydE51bSA6IDAsXHJcbiAgICAgICAgICAgICAgICB0YXJnZXROdW0gOiBjdXJHb2xkVmFsdWUqKG11bHRpcGxlKSxcclxuICAgICAgICAgICAgICAgIGxhYmVsIDogYmV0dGluZ0xhYmVsLFxyXG4gICAgICAgICAgICAgICAgZm9ybWF0U3RyIDogJycsXHJcbiAgICAgICAgICAgICAgICBjYWxsRnVuYyA6IHRoaXMuX3Njcm9sbENhbGwuYmluZCh0aGlzKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMubm9kZS5nZXRDb21wb25lbnQodGhpcy5fc2Nyb2xsQ29tcE5hbWUpLnNjcm9sbExhYmVsKGRhdGFPYmopO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICAvL+iDnOWIqea7muWKqOe7k+adn1xyXG4gICAgX3Njcm9sbENhbGwgOiBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgfSxcclxuICAgIC8v5riF55CG6IOc5Yip55qE5pi+56S6XHJcbiAgICByZXNldFdpblNob3cgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5ub2RlX3dpbkZyYW1lLmFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgICAgIHN3aXRjaCAodGhpcy5fd2luVGFibGVUeXBlKXtcclxuICAgICAgICAgICAgY2FzZSBHX1RZUEUudGFibGVUeXBlLmJpZzpcclxuICAgICAgICAgICAgICAgIHRoaXMubm9kZV9iaWcuZ2V0Q29tcG9uZW50KGNjLlNwcml0ZSkuc3ByaXRlRnJhbWUgPSB0aGlzLl9maXJzdEJpZ0ltZztcclxuICAgICAgICAgICAgICAgIHRoaXMubm9kZV9taW5Eb3duTGFiZWwuY2hpbGRyZW5bMF0uY29sb3IgPSB0aGlzLl93aW5Db2xvcjtcclxuICAgICAgICAgICAgICAgIHRoaXMubm9kZV9taW5Eb3duTGFiZWwuY2hpbGRyZW5bMV0uY29sb3IgPSB0aGlzLl93aW5Db2xvcjtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIEdfVFlQRS50YWJsZVR5cGUubWluOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5ub2RlX21pbi5nZXRDb21wb25lbnQoY2MuU3ByaXRlKS5zcHJpdGVGcmFtZSA9IHRoaXMuX2ZpcnN0TWluSW1nO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ub2RlX2JpZ0Rvd25MYWJlbC5jaGlsZHJlblswXS5jb2xvciA9IHRoaXMuX3dpbkNvbG9yO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ub2RlX2JpZ0Rvd25MYWJlbC5jaGlsZHJlblsxXS5jb2xvciA9IHRoaXMuX3dpbkNvbG9yO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIC8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cclxuICAgIHNldFRvdWNoRW5hYmxlIDogZnVuY3Rpb24gKGlzRW5hYmxlKSB7XHJcbiAgICAgICAgdmFyIGJpZ1BhcmVudCA9IHRoaXMubm9kZV9iaWcucGFyZW50O1xyXG4gICAgICAgIHZhciBtaW5QYXJlbnQgPSB0aGlzLm5vZGVfbWluLnBhcmVudDtcclxuICAgICAgICBpZihpc0VuYWJsZSl7XHJcbiAgICAgICAgICAgIGJpZ1BhcmVudC5vbihjYy5Ob2RlLkV2ZW50VHlwZS5UT1VDSF9TVEFSVCwgdGhpcy5vbkNsaWNrX2JpZywgdGhpcyk7XHJcbiAgICAgICAgICAgIG1pblBhcmVudC5vbihjYy5Ob2RlLkV2ZW50VHlwZS5UT1VDSF9TVEFSVCwgdGhpcy5vbkNsaWNrX21pbiwgdGhpcyk7XHJcbiAgICAgICAgfWVsc2Uge1xyXG4gICAgICAgICAgICBiaWdQYXJlbnQub2ZmKGNjLk5vZGUuRXZlbnRUeXBlLlRPVUNIX1NUQVJULCB0aGlzLm9uQ2xpY2tfYmlnLCB0aGlzKTtcclxuICAgICAgICAgICAgbWluUGFyZW50Lm9mZihjYy5Ob2RlLkV2ZW50VHlwZS5UT1VDSF9TVEFSVCwgdGhpcy5vbkNsaWNrX21pbiwgdGhpcyk7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICAvL+iOt+WPlumaj+acuueahOmHkeW4geS9jee9rlxyXG4gICAgZ2V0R29sZFBvc0xpc3QgOiBmdW5jdGlvbiAodGFibGVJbmRleCwgZ29sZE51bSkge1xyXG4gICAgICAgIHZhciBwb3NMaXN0O1xyXG4gICAgICAgIGlmKHRhYmxlSW5kZXglMiA9PSAwKXtcclxuICAgICAgICAgICAgLy/lpKdcclxuICAgICAgICAgICAgcG9zTGlzdCA9IHRoaXMuX2dldEJpZ0dvbGRQb3MoZ29sZE51bSk7XHJcbiAgICAgICAgfWVsc2UgcG9zTGlzdCA9IHRoaXMuX2dldE1pbkdvbGRQb3MoZ29sZE51bSk7XHJcbiAgICAgICAgcmV0dXJuIHBvc0xpc3RcclxuICAgIH0sXHJcbiAgICBfZ2V0QmlnR29sZFBvcyA6IGZ1bmN0aW9uIChudW0pIHtcclxuICAgICAgICBpZighbnVtKSBudW0gPSAxO1xyXG4gICAgICAgIHZhciBnb2xkUG9zLCBwb3NMaXN0ID0gW107XHJcbiAgICAgICAgZm9yKHZhciBpID0gMDsgaSA8IG51bTsgaSArKyl7XHJcbiAgICAgICAgICAgIGdvbGRQb3MgPSB0aGlzLl9pbml0R29sZFBvcygpO1xyXG4gICAgICAgICAgICBnb2xkUG9zLnggKz0gdGhpcy5fYmlnQ2VudGVyUG9zLng7XHJcbiAgICAgICAgICAgIGdvbGRQb3MueSArPSB0aGlzLl9iaWdDZW50ZXJQb3MueTtcclxuICAgICAgICAgICAgcG9zTGlzdC5wdXNoKGdvbGRQb3MpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcG9zTGlzdFxyXG4gICAgfSxcclxuICAgIF9nZXRNaW5Hb2xkUG9zIDogZnVuY3Rpb24gKG51bSkge1xyXG4gICAgICAgIGlmKCFudW0pIG51bSA9IDE7XHJcbiAgICAgICAgdmFyIGdvbGRQb3MsIHBvc0xpc3QgPSBbXTtcclxuICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgbnVtOyBpICsrKXtcclxuICAgICAgICAgICAgZ29sZFBvcyA9IHRoaXMuX2luaXRHb2xkUG9zKCk7XHJcbiAgICAgICAgICAgIGdvbGRQb3MueCArPSB0aGlzLl9taW5DZW50ZXJQb3MueDtcclxuICAgICAgICAgICAgZ29sZFBvcy55ICs9IHRoaXMuX21pbkNlbnRlclBvcy55O1xyXG4gICAgICAgICAgICBwb3NMaXN0LnB1c2goZ29sZFBvcyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBwb3NMaXN0XHJcbiAgICB9LFxyXG4gICAgX2luaXRHb2xkUG9zIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBwYXJlbnRTY2FsZSA9IHRoaXMubm9kZS5wYXJlbnQuc2NhbGU7XHJcbiAgICAgICAgdmFyIGJpZ0JHID0gdGhpcy5ub2RlX2JpZy5wYXJlbnQ7XHJcbiAgICAgICAgaWYoIXRoaXMuX2JpZ0NlbnRlclBvcyl7XHJcbiAgICAgICAgICAgIHZhciBwYXJlbnRQb3MgPSB0aGlzLm5vZGUucGFyZW50LnBvc2l0aW9uO1xyXG4gICAgICAgICAgICB2YXIgY29udGFpbmVyUG9zID0gdGhpcy5ub2RlLnBhcmVudC5wYXJlbnQucG9zaXRpb247XHJcbiAgICAgICAgICAgIHZhciBtaW5CRyA9IHRoaXMubm9kZV9taW4ucGFyZW50O1xyXG4gICAgICAgICAgICB0aGlzLl9iaWdDZW50ZXJQb3MgPSBjYy5wKHBhcmVudFBvcy54ICsgKHRoaXMubm9kZS54ICsgYmlnQkcueCkqcGFyZW50U2NhbGUrY29udGFpbmVyUG9zLngsIHBhcmVudFBvcy55ICsgKHRoaXMubm9kZS55ICsgYmlnQkcueSkqcGFyZW50U2NhbGUrY29udGFpbmVyUG9zLnkpO1xyXG4gICAgICAgICAgICB0aGlzLl9taW5DZW50ZXJQb3MgPSBjYy5wKHBhcmVudFBvcy54ICsgKHRoaXMubm9kZS54ICsgbWluQkcueCkqcGFyZW50U2NhbGUrY29udGFpbmVyUG9zLngsIHBhcmVudFBvcy55ICsgKHRoaXMubm9kZS55ICsgbWluQkcueSkqcGFyZW50U2NhbGUrY29udGFpbmVyUG9zLnkpO1xyXG4gICAgICAgICAgICB0aGlzLl9nb2xkSGVpZ2h0ID0gKGJpZ0JHLmhlaWdodCowLjUtdGhpcy5ub2RlX2JpZ0Rvd25MYWJlbC5oZWlnaHQpKnBhcmVudFNjYWxlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy/lgYforr7ph5HluIHnmoTlrr3luqbkuLror6XlgLxcclxuICAgICAgICB2YXIgZ29sZFdpZHRoMiA9IHRoaXMuX2dldEdvbGRTaXplKCkud2lkdGgqMC41KjAuNTtcclxuICAgICAgICB2YXIgZGlyO1xyXG5cclxuICAgICAgICB2YXIgbWF4WCA9IGJpZ0JHLndpZHRoKjAuNSpwYXJlbnRTY2FsZS1nb2xkV2lkdGgyO1xyXG4gICAgICAgIHZhciBnb2xkWCA9IEdfVE9PTC5nZXRSYW5kb21BcmVhKDAsIG1heFgpO1xyXG4gICAgICAgIGRpciA9IEdfVE9PTC5nZXRSYW5kb21Cb29sKCkgPyAxIDogLTE7XHJcbiAgICAgICAgZ29sZFgqPWRpcjtcclxuXHJcbiAgICAgICAgdmFyIG1heFkgPSB0aGlzLl9nb2xkSGVpZ2h0LWdvbGRXaWR0aDI7XHJcbiAgICAgICAgdmFyIGdvbGRZID0gR19UT09MLmdldFJhbmRvbUFyZWEoMCwgbWF4WSk7XHJcbiAgICAgICAgZGlyID0gR19UT09MLmdldFJhbmRvbUJvb2woKSA/IDEgOiAtMTtcclxuICAgICAgICBnb2xkWSo9ZGlyO1xyXG4gICAgICAgIHJldHVybiBjYy5wKGdvbGRYLCBnb2xkWSlcclxuICAgIH0sXHJcblxyXG4gICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgLy/miYDmnInnjqnlrrbmirzlpKfmgLvpop1cclxuICAgIF9zZXRCaWdVcEdvbGQgOiBmdW5jdGlvbiAoZ29sZE51bSkge1xyXG4gICAgICAgIGlmKCFnb2xkTnVtKXtcclxuICAgICAgICAgICAgdGhpcy5fYmlnR29sZE51bSA9IDA7XHJcbiAgICAgICAgICAgIHRoaXMubm9kZV9iaWdVcExhYmVsLmFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICB0aGlzLmxhYmVsX2xlZnRVcC5zdHJpbmcgPSAnJztcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgdGhpcy5ub2RlX2JpZ1VwTGFiZWwuYWN0aXZlID0gdHJ1ZTtcclxuICAgICAgICAgICAgdmFyIGxhYmVsTm9kZSA9IHRoaXMubGFiZWxfbGVmdFVwO1xyXG4gICAgICAgICAgICBpZihsYWJlbE5vZGUpIGxhYmVsTm9kZS5zdHJpbmcgPSBHX1RPT0wuY2hhbmdlTW9uZXkoZ29sZE51bSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIC8v5omA5pyJ546p5a625oq85bCP5oC76aKdXHJcbiAgICBfc2V0TWluVXBHb2xkIDogZnVuY3Rpb24gKGdvbGROdW0pIHtcclxuICAgICAgICBpZighZ29sZE51bSl7XHJcbiAgICAgICAgICAgIHRoaXMuX21pbkdvbGROdW0gPSAwO1xyXG4gICAgICAgICAgICB0aGlzLm5vZGVfbWluVXBMYWJlbC5hY3RpdmUgPSBmYWxzZTtcclxuICAgICAgICAgICAgdGhpcy5sYWJlbF9yaWdodFVwLnN0cmluZyA9ICcnO1xyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICB0aGlzLm5vZGVfbWluVXBMYWJlbC5hY3RpdmUgPSB0cnVlO1xyXG4gICAgICAgICAgICB2YXIgbGFiZWxOb2RlID0gdGhpcy5sYWJlbF9yaWdodFVwO1xyXG4gICAgICAgICAgICBpZihsYWJlbE5vZGUpIGxhYmVsTm9kZS5zdHJpbmcgPSBHX1RPT0wuY2hhbmdlTW9uZXkoZ29sZE51bSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICAvL+iHquW3seaKvOazqOWkp+aYvuekulxyXG4gICAgX3NldEJpZ0Rvd25Hb2xkIDogZnVuY3Rpb24gKGdvbGROdW0sIGlzTG9zZVNob3cpIHtcclxuICAgICAgICBpZighZ29sZE51bSl7XHJcbiAgICAgICAgICAgIHRoaXMuX2JpZ015R29sZE51bSA9IDA7XHJcbiAgICAgICAgICAgIHRoaXMubm9kZV9iaWdEb3duTGFiZWwuYWN0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIHRoaXMubm9kZV9iaWdEb3duTGFiZWwuYWN0aXZlID0gdHJ1ZTtcclxuICAgICAgICAgICAgdmFyIGxhYmVsTm9kZSA9IHRoaXMubm9kZV9iaWdEb3duTGFiZWwuY2hpbGRyZW5bMV07XHJcbiAgICAgICAgICAgIHZhciBnb2xkO1xyXG4gICAgICAgICAgICBpZihsYWJlbE5vZGUpIGdvbGQgPSBHX1RPT0wuY2hhbmdlTW9uZXkoZ29sZE51bSk7XHJcbiAgICAgICAgICAgIGlmIChpc0xvc2VTaG93KSBnb2xkID0gJy0nICsgZ29sZDsvL+i+k+mSseaYvuekuuS4ui1cclxuICAgICAgICAgICAgbGFiZWxOb2RlLmdldENvbXBvbmVudChjYy5MYWJlbCkuc3RyaW5nID0gZ29sZDtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgLy/orr7nva7mirzlpKfnmoTml7blgJnlgI3mlbDnmoTkvY3nva5cclxuICAgIF9zZXRCaWdNdWx0aXBsZSA6IGZ1bmN0aW9uIChtdWx0aXBsZSkge1xyXG4gICAgICAgIHZhciBsYWJlbE5vZGUgPSB0aGlzLm5vZGVfYmlnRG93bkxhYmVsLmNoaWxkcmVuWzBdO1xyXG4gICAgICAgIGlmKGxhYmVsTm9kZSkge1xyXG4gICAgICAgICAgICB2YXIgc3RyID0gJycsIHJpZ2h0Tm9kZSA9IHRoaXMubm9kZV9iaWdEb3duTGFiZWwuY2hpbGRyZW5bMV07XHJcbiAgICAgICAgICAgIGlmKG11bHRpcGxlKSB7XHJcbiAgICAgICAgICAgICAgICBzdHIgPSBcIlhcIittdWx0aXBsZTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2NoYW5nZURvd25MYWJlbChyaWdodE5vZGUsIHRydWUpO1xyXG4gICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2NoYW5nZURvd25MYWJlbChyaWdodE5vZGUsIGZhbHNlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBsYWJlbE5vZGUuZ2V0Q29tcG9uZW50KGNjLkxhYmVsKS5zdHJpbmcgPSBzdHI7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICAvL+iHquW3seaKvOazqOWwj+aYvuekulxyXG4gICAgX3NldE1pbkRvd25Hb2xkIDogZnVuY3Rpb24gKGdvbGROdW0sIGlzTG9zZVNob3cpIHtcclxuICAgICAgICBpZighZ29sZE51bSl7XHJcbiAgICAgICAgICAgIHRoaXMuX21pbk15R29sZE51bSA9IDA7XHJcbiAgICAgICAgICAgIHRoaXMubm9kZV9taW5Eb3duTGFiZWwuYWN0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIHRoaXMubm9kZV9taW5Eb3duTGFiZWwuYWN0aXZlID0gdHJ1ZTtcclxuICAgICAgICAgICAgdmFyIGxhYmVsTm9kZSA9IHRoaXMubm9kZV9taW5Eb3duTGFiZWwuY2hpbGRyZW5bMV07XHJcbiAgICAgICAgICAgIHZhciBnb2xkO1xyXG4gICAgICAgICAgICBpZihsYWJlbE5vZGUpIGdvbGQgPSBHX1RPT0wuY2hhbmdlTW9uZXkoZ29sZE51bSk7XHJcbiAgICAgICAgICAgIGlmIChpc0xvc2VTaG93KSBnb2xkID0gJy0nICsgZ29sZDsvL+i+k+mSseaYvuekuuS4ui1cclxuICAgICAgICAgICAgbGFiZWxOb2RlLmdldENvbXBvbmVudChjYy5MYWJlbCkuc3RyaW5nID0gZ29sZDtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgLy/orr7nva7mirzlsI/nmoTml7blgJnlgI3mlbDnmoTkvY3nva5cclxuICAgIF9zZXRNaW5NdWx0aXBsZSA6IGZ1bmN0aW9uIChtdWx0aXBsZSkge1xyXG4gICAgICAgIHZhciBsYWJlbE5vZGUgPSB0aGlzLm5vZGVfbWluRG93bkxhYmVsLmNoaWxkcmVuWzBdO1xyXG4gICAgICAgIGlmKGxhYmVsTm9kZSkge1xyXG4gICAgICAgICAgICB2YXIgc3RyID0gJycsIHJpZ2h0Tm9kZSA9IHRoaXMubm9kZV9taW5Eb3duTGFiZWwuY2hpbGRyZW5bMV07XHJcbiAgICAgICAgICAgIGlmKG11bHRpcGxlKSB7XHJcbiAgICAgICAgICAgICAgICBzdHIgPSBcIlhcIittdWx0aXBsZTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2NoYW5nZURvd25MYWJlbChyaWdodE5vZGUsIHRydWUpO1xyXG4gICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2NoYW5nZURvd25MYWJlbChyaWdodE5vZGUsIGZhbHNlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBsYWJlbE5vZGUuZ2V0Q29tcG9uZW50KGNjLkxhYmVsKS5zdHJpbmcgPSBzdHI7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICAvL+iuvue9ruW6lemDqGxhYmVs6ZqP552A5YCN5pWw5piv5ZCm5pi+56S66ICM5Y+Y5YyW5L2N572uXHJcbiAgICBfY2hhbmdlRG93bkxhYmVsIDogZnVuY3Rpb24gKGN1ckxhYmVsLCBpc1JpZ2h0KSB7XHJcbiAgICAgICAgaWYoaXNSaWdodCl7XHJcbiAgICAgICAgICAgIGN1ckxhYmVsLmFuY2hvclggPSAxO1xyXG4gICAgICAgICAgICBjdXJMYWJlbC54ID0gY3VyTGFiZWwucGFyZW50LndpZHRoKjAuNDM7XHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIGN1ckxhYmVsLmFuY2hvclggPSAwLjU7XHJcbiAgICAgICAgICAgIGN1ckxhYmVsLnggPSAwO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICAvL+iuvue9rue0ouW8leS/oeaBr1xyXG4gICAgX3NldFRhYmxlSW5kZXggOiBmdW5jdGlvbiAoaW5kZXgpIHtcclxuICAgICAgICB0aGlzLl9iaWdUYWJsZUluZGV4ID0gR0cuYnVsbDEwME1nci5nZXRCaWdUYWJsZUluZGV4KGluZGV4KTtcclxuICAgICAgICB0aGlzLl9taW5UYWJsZUluZGV4ID0gR0cuYnVsbDEwME1nci5nZXRNaW5UYWJsZUluZGV4KGluZGV4KTtcclxuICAgIH0sXHJcblxyXG5cclxuICAgIC8v6I635Y+W5qGM5a2Q5bqV5LiL5Y2h54mM55qE5L2N572uXHJcbiAgICBnZXRQb2tlclBvcyA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgcGFyZW50UG9zID0gdGhpcy5ub2RlLnBhcmVudC5wb3NpdGlvbjtcclxuICAgICAgICB2YXIgc2NhbGUgPSB0aGlzLm5vZGUucGFyZW50LnNjYWxlO1xyXG4gICAgICAgIHZhciBub2RlUG9zID0gdGhpcy5ub2RlLnBvc2l0aW9uO1xyXG4gICAgICAgIHZhciBwb3NYID0gcGFyZW50UG9zLnggKyBub2RlUG9zLngqc2NhbGUgLSB0aGlzLm5vZGUud2lkdGgqMC41KnNjYWxlKnRoaXMuX3Bva2VyT2ZmWDtcclxuICAgICAgICB2YXIgcG9zWSA9IHBhcmVudFBvcy55ICsgbm9kZVBvcy55KnNjYWxlIC0gdGhpcy5ub2RlLmhlaWdodCowLjU1KnNjYWxlO1xyXG4gICAgICAgIHZhciBjb250aWFuZXJQYXJlbnRQb3MgPSB0aGlzLm5vZGUucGFyZW50LnBhcmVudC5wb3NpdGlvbjtcclxuICAgICAgICByZXR1cm4gY2MucChwb3NYK2NvbnRpYW5lclBhcmVudFBvcy54LCBwb3NZK2NvbnRpYW5lclBhcmVudFBvcy55KVxyXG4gICAgfSxcclxuICAgIC8v6I635Y+W54i26IqC54K555qE5Z2Q5qCHXHJcbiAgICBfZ2V0UGFyZW50UG9zIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBwYXJlbnRQb3MgPSB0aGlzLm5vZGUucGFyZW50LnBvc2l0aW9uO1xyXG4gICAgICAgIHZhciBzY2FsZSA9IHRoaXMubm9kZS5wYXJlbnQuc2NhbGVcclxuICAgICAgICByZXR1cm4gY2MucChwYXJlbnRQb3MueCpzY2FsZSwgcGFyZW50UG9zLnkqc2NhbGUpXHJcbiAgICB9LFxyXG4gICAgLy/ojrflj5bph5HluIHnmoTlrr3pq5hcclxuICAgIF9nZXRHb2xkU2l6ZSA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZighdGhpcy5fZ29sZFNpemUpe1xyXG4gICAgICAgICAgICB0aGlzLl9nb2xkU2l6ZSA9IEdHLmJ1bGwxMDBNZ3IuZ2V0R29sZEltZ1NpemUoKVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5fZ29sZFNpemVcclxuICAgIH0sXHJcblxyXG4gICAgLy8gY2FsbGVkIGV2ZXJ5IGZyYW1lLCB1bmNvbW1lbnQgdGhpcyBmdW5jdGlvbiB0byBhY3RpdmF0ZSB1cGRhdGUgY2FsbGJhY2tcclxuICAgIC8vIHVwZGF0ZTogZnVuY3Rpb24gKGR0KSB7XHJcblxyXG4gICAgLy8gfSxcclxufSk7XHJcbiIsIi8v5pS+5Zyo5ri45oiP5pyA5LiK6Z2i55qE54m55pWIXHJcblxyXG5cclxuY2MuQ2xhc3Moe1xyXG4gICAgZXh0ZW5kczogY2MuQ29tcG9uZW50LFxyXG5cclxuICAgIHByb3BlcnRpZXM6IHtcclxuICAgICAgICBfYmV0dGluZ0NhbGxGdW5jIDogbnVsbCwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/lvIDlp4vmipXms6jliqjnlLvnmoTlm57osINcclxuICAgICAgICBfc3RhcnRDYWxsRnVuYyA6IG51bGwsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5byA5aeL5ri45oiP5Yqo55S755qE5Zue6LCDXHJcbiAgICAgICAgX3Jlc3VsdERhdGEgOiBudWxsLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+e7k+eul+eVjOmdouS4reeahOaVsOaNrlxyXG5cclxuICAgICAgICBwcmVmYWJfc3RhcnQgOiB7XHJcbiAgICAgICAgICAgIGRlZmF1bHQgOiBudWxsLFxyXG4gICAgICAgICAgICB0eXBlIDogY2MuUHJlZmFiLFxyXG4gICAgICAgICAgICBkaXNwbGF5TmFtZSA6ICflvIDlp4vmuLjmiI/liqjnlLsnXHJcbiAgICAgICAgfSxcclxuICAgICAgICBwcmVmYWJfYmV0dGluZyA6IHtcclxuICAgICAgICAgICAgZGVmYXVsdCA6IG51bGwsXHJcbiAgICAgICAgICAgIHR5cGUgOiBjYy5QcmVmYWIsXHJcbiAgICAgICAgICAgIGRpc3BsYXlOYW1lIDogJ+W8gOWni+aKleazqOWKqOeUuydcclxuICAgICAgICB9LFxyXG4gICAgICAgIHByZWZhYl93aW4gOiB7XHJcbiAgICAgICAgICAgIGRlZmF1bHQgOiBudWxsLFxyXG4gICAgICAgICAgICB0eXBlIDogY2MuUHJlZmFiLFxyXG4gICAgICAgICAgICBkaXNwbGF5TmFtZSA6ICfog5zliKnliqjnlLsnXHJcbiAgICAgICAgfSxcclxuICAgICAgICBwcmVmYWJfbG9zZSA6IHtcclxuICAgICAgICAgICAgZGVmYXVsdCA6IG51bGwsXHJcbiAgICAgICAgICAgIHR5cGUgOiBjYy5QcmVmYWIsXHJcbiAgICAgICAgICAgIGRpc3BsYXlOYW1lIDogJ+Wksei0peWKqOeUuydcclxuICAgICAgICB9LFxyXG4gICAgICAgIHByZWZhYl9zaG93UmVzdWx0IDoge1xyXG4gICAgICAgICAgICBkZWZhdWx0IDogbnVsbCxcclxuICAgICAgICAgICAgdHlwZSA6IGNjLlByZWZhYixcclxuICAgICAgICAgICAgZGlzcGxheU5hbWUgOiAn57uT5p6c5pi+56S65a655ZmoJ1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgbm9kZV9ncmF5TGF5ZXIgOiB7XHJcbiAgICAgICAgICAgIGRlZmF1bHQgOiBudWxsLFxyXG4gICAgICAgICAgICB0eXBlIDogY2MuTm9kZSxcclxuICAgICAgICAgICAgZGlzcGxheU5hbWUgOiAn54Gw6Imy5bGCJ1xyXG4gICAgICAgIH0sXHJcbiAgICB9LFxyXG5cclxuICAgIC8vIHVzZSB0aGlzIGZvciBpbml0aWFsaXphdGlvblxyXG4gICAgb25Mb2FkOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5fd2luQW5pTmFtZSA9ICdwbGF0Zm9ybV93aW4nO1xyXG4gICAgICAgIHRoaXMuX2xvc2VBbmlOYW1lID0gJ3BsYXRmb3JtX2xvc2UnO1xyXG4gICAgICAgIHRoaXMuX3Jlc3VsdENvbXBOYW1lID0gJ0J1bGwxMDBfc2hvd1Jlc3VsdCc7XHJcbiAgICAgICAgdGhpcy5fcG9rZXJSZXN1bHRDb21wTmFtZSA9ICdPYmpfb25Qb2tlclJlc3VsdCc7XHJcbiAgICB9LFxyXG5cclxuICAgIC8v5byA5aeL5ri45oiPXHJcbiAgICBwbGF5U3RhcnRHYW1lQW5pIDogZnVuY3Rpb24gKGNhbGxGdW5jKSB7XHJcbiAgICAgICAgdGhpcy5wbGF5U3RhcnRBbmkoJ2dyYWJfc3RhcnQnLGNhbGxGdW5jKTtcclxuICAgICAgICBHRy5hdWRpb01nci5wbGF5U291bmQoMTMpO1xyXG4gICAgfSxcclxuICAgIC8v5pKt5pS+5byA5aeL5Yqo55S7XHJcbiAgICBwbGF5U3RhcnRBbmkgOiBmdW5jdGlvbiAoYW5pTmFtZSwgY2FsbEZ1bmMpIHtcclxuICAgICAgICBpZighYW5pTmFtZSkgYW5pTmFtZSA9ICcnO1xyXG4gICAgICAgIHRoaXMuX3N0YXJ0Q2FsbEZ1bmMgPSBjYWxsRnVuYztcclxuICAgICAgICBpZighdGhpcy5fc3RhcnRBbmkpe1xyXG4gICAgICAgICAgICB0aGlzLl9zdGFydEFuaSA9IGNjLmluc3RhbnRpYXRlKHRoaXMucHJlZmFiX3N0YXJ0KTtcclxuICAgICAgICAgICAgdGhpcy5fc3RhcnRBbmkucGFyZW50ID0gdGhpcy5ub2RlO1xyXG4gICAgICAgICAgICAvL2FuaS5zY2FsZSA9IEdfQ29uZmlnX2NvbW1vbi5mcmFtZVNjYWxlO1xyXG4gICAgICAgICAgICB2YXIgY29tcCA9IHRoaXMuX3N0YXJ0QW5pLmdldENvbXBvbmVudChkcmFnb25Cb25lcy5Bcm1hdHVyZURpc3BsYXkpO1xyXG4gICAgICAgICAgICAvL2NvbXAuYWRkRXZlbnRMaXN0ZW5lcihkcmFnb25Cb25lcy5FdmVudE9iamVjdC5GUkFNRV9FVkVOVCwgdGhpcy5fZnJhbWVFdmVudCwgdGhpcyk7XHJcbiAgICAgICAgICAgIGNvbXAuYWRkRXZlbnRMaXN0ZW5lcihkcmFnb25Cb25lcy5FdmVudE9iamVjdC5DT01QTEVURSwgdGhpcy5fc3RhcnRBbmlFbmQsIHRoaXMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5fc3RhcnRBbmkucG9zaXRpb24gPSB0aGlzLl9nZXRTdGFydEFuaVBvcygpO1xyXG4gICAgICAgIHRoaXMuX3N0YXJ0QW5pLmFjdGl2ZSA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5fc3RhcnRBbmkuZ2V0Q29tcG9uZW50KGRyYWdvbkJvbmVzLkFybWF0dXJlRGlzcGxheSkucGxheUFuaW1hdGlvbihhbmlOYW1lLCAxKTtcclxuICAgIH0sXHJcbiAgICBfc3RhcnRBbmlFbmQgOiBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAvL+WKqOeUu+e7k+adn1xyXG4gICAgICAgIGlmKHRoaXMuX3N0YXJ0QW5pKSB0aGlzLl9zdGFydEFuaS5hY3RpdmUgPSBmYWxzZTtcclxuICAgICAgICBpZih0aGlzLl9zdGFydENhbGxGdW5jKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3N0YXJ0Q2FsbEZ1bmMoKTtcclxuICAgICAgICAgICAgdGhpcy5fc3RhcnRDYWxsRnVuYyA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIF9mcmFtZUV2ZW50IDogZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgR0cuYnVsbDEwME1nci5zaGFrZUdhbWUoKTtcclxuICAgIH0sXHJcbiAgICAvL+a4heeQhuW8gOWni+WKqOeUu1xyXG4gICAgY2xlYXJTdGFydEFuaSA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZih0aGlzLl9zdGFydEFuaSkgdGhpcy5fc3RhcnRBbmkuYWN0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5fc3RhcnRDYWxsRnVuYyA9IG51bGw7XHJcbiAgICB9LFxyXG5cclxuICAgIC8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuXHJcbiAgICAvL+W8gOWni+aKleazqFxyXG4gICAgcGxheVN0YXJ0QmV0dGluZ0FuaSA6IGZ1bmN0aW9uIChjYWxsRnVuYykge1xyXG4gICAgICAgIHRoaXMucGxheUJldHRpbmdBbmkoJ3BsYXRmb3JtX2JldCcsY2FsbEZ1bmMpO1xyXG4gICAgfSxcclxuICAgIC8v5oqV5rOo57uT5p2fXHJcbiAgICBwbGF5QmV0dGluZ0VuZCA6IGZ1bmN0aW9uIChjYWxsRnVuYykge1xyXG4gICAgICAgIHRoaXMucGxheUJldHRpbmdBbmkoJ3BsYXRmb3JtX2JldE92ZXInLGNhbGxGdW5jKTtcclxuICAgIH0sXHJcbiAgICAvL+aSreaUvuW8gOWni+aKleazqOWKqOeUu1xyXG4gICAgcGxheUJldHRpbmdBbmkgOiBmdW5jdGlvbiAoYW5pTmFtZSwgY2FsbEZ1bmMpIHtcclxuICAgICAgICBpZighYW5pTmFtZSkgYW5pTmFtZSA9ICcnO1xyXG4gICAgICAgIHRoaXMuX2JldHRpbmdDYWxsRnVuYyA9IGNhbGxGdW5jO1xyXG4gICAgICAgIGlmKCF0aGlzLl9iZXR0aW5nQW5pKXtcclxuICAgICAgICAgICAgdGhpcy5fYmV0dGluZ0FuaSA9IGNjLmluc3RhbnRpYXRlKHRoaXMucHJlZmFiX2JldHRpbmcpO1xyXG4gICAgICAgICAgICB0aGlzLl9iZXR0aW5nQW5pLnBhcmVudCA9IHRoaXMubm9kZTtcclxuICAgICAgICAgICAgLy9hbmkuc2NhbGUgPSBHX0NvbmZpZ19jb21tb24uZnJhbWVTY2FsZTtcclxuICAgICAgICAgICAgdmFyIGNvbXAgPSB0aGlzLl9iZXR0aW5nQW5pLmdldENvbXBvbmVudChkcmFnb25Cb25lcy5Bcm1hdHVyZURpc3BsYXkpO1xyXG4gICAgICAgICAgICAvL2NvbXAuYWRkRXZlbnRMaXN0ZW5lcihkcmFnb25Cb25lcy5FdmVudE9iamVjdC5GUkFNRV9FVkVOVCwgdGhpcy5fZnJhbWVFdmVudCwgdGhpcyk7XHJcbiAgICAgICAgICAgIGNvbXAuYWRkRXZlbnRMaXN0ZW5lcihkcmFnb25Cb25lcy5FdmVudE9iamVjdC5DT01QTEVURSwgdGhpcy5fYmV0dGluZ0FuaUVuZCwgdGhpcyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuX2JldHRpbmdBbmkucG9zaXRpb24gPSB0aGlzLl9nZXRTdGFydEFuaVBvcygpO1xyXG4gICAgICAgIHRoaXMuX2JldHRpbmdBbmkuYWN0aXZlID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLl9iZXR0aW5nQW5pLmdldENvbXBvbmVudChkcmFnb25Cb25lcy5Bcm1hdHVyZURpc3BsYXkpLnBsYXlBbmltYXRpb24oYW5pTmFtZSwgMSk7XHJcbiAgICB9LFxyXG4gICAgX2JldHRpbmdBbmlFbmQgOiBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAvL+WKqOeUu+e7k+adn1xyXG4gICAgICAgIGlmKHRoaXMuX2JldHRpbmdBbmkpIHRoaXMuX2JldHRpbmdBbmkuYWN0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgaWYodGhpcy5fYmV0dGluZ0NhbGxGdW5jKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2JldHRpbmdDYWxsRnVuYygpO1xyXG4gICAgICAgICAgICB0aGlzLl9iZXR0aW5nQ2FsbEZ1bmMgPSBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICAvL+a4heeQhuW8gOWni+aKleazqOWKqOeUu1xyXG4gICAgY2xlYXJCZXR0aW5nQW5pIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmKHRoaXMuX2JldHRpbmdBbmkpIHtcclxuICAgICAgICAgICAgdGhpcy5fYmV0dGluZ0FuaS5hY3RpdmUgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5fYmV0dGluZ0NhbGxGdW5jID0gbnVsbDtcclxuICAgIH0sXHJcblxyXG4gICAgX2dldFN0YXJ0QW5pUG9zIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBkZXNpZ25TaXplID0gY2MudmlzaWJsZVJlY3Q7XHJcbiAgICAgICAgcmV0dXJuIGNjLnAoZGVzaWduU2l6ZS53aWR0aC8yLCBkZXNpZ25TaXplLmhlaWdodCowLjYpO1xyXG4gICAgfSxcclxuXHJcblxyXG4gICAgLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PeiDnOWIqeWKqOeUu1xyXG5cclxuICAgIC8v5pi+56S66IOc5Yip5oiW6ICF5aSx6LSlXHJcbiAgICBzaG93UmVzdWx0RWZmZWN0IDogZnVuY3Rpb24gKGRhdGEsIGNhbGxGdW5jKSB7XHJcbiAgICAgICAgaWYoZGF0YS5teUNoYW5nZUdvbGQgIT0gdW5kZWZpbmVkKXtcclxuICAgICAgICAgICAgdGhpcy5zZXRHcmF5SXNTaG93KHRydWUpO1xyXG4gICAgICAgICAgICBpZihkYXRhLm15Q2hhbmdlR29sZCA+IDApe1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fcGxheVdpbihkYXRhLCBjYWxsRnVuYyk7XHJcbiAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fcGxheUxvc2UoZGF0YSwgY2FsbEZ1bmMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfWVsc2Uge1xyXG4gICAgICAgICAgICBpZihjYWxsRnVuYyl7XHJcbiAgICAgICAgICAgICAgICBjYWxsRnVuYygpO1xyXG4gICAgICAgICAgICAgICAgY2FsbEZ1bmMgPSBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICBfcGxheVdpbiA6IGZ1bmN0aW9uIChkYXRhLCBjYWxsRnVuYykge1xyXG4gICAgICAgIHRoaXMuX3Jlc3VsdERhdGEgPSBkYXRhO1xyXG4gICAgICAgIHRoaXMuX3dpbkNhbGxGdW5jID0gY2FsbEZ1bmM7XHJcbiAgICAgICAgaWYoIXRoaXMuX3dpbkFuaSl7XHJcbiAgICAgICAgICAgIHRoaXMuX3dpbkFuaSA9IGNjLmluc3RhbnRpYXRlKHRoaXMucHJlZmFiX3dpbik7XHJcbiAgICAgICAgICAgIHRoaXMuX3dpbkFuaS5wYXJlbnQgPSB0aGlzLm5vZGU7XHJcbiAgICAgICAgICAgIHZhciBjb21wID0gdGhpcy5fd2luQW5pLmdldENvbXBvbmVudChkcmFnb25Cb25lcy5Bcm1hdHVyZURpc3BsYXkpO1xyXG4gICAgICAgICAgICBjb21wLmFkZEV2ZW50TGlzdGVuZXIoZHJhZ29uQm9uZXMuRXZlbnRPYmplY3QuQ09NUExFVEUsIHRoaXMuX3dpbkVuZCwgdGhpcyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuX3dpbkFuaS5wb3NpdGlvbiA9IHRoaXMuX2dldFJlc3VsdEFuaVBvcygpO1xyXG4gICAgICAgIHRoaXMuX3dpbkFuaS5hY3RpdmUgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuX3dpbkFuaS5nZXRDb21wb25lbnQoZHJhZ29uQm9uZXMuQXJtYXR1cmVEaXNwbGF5KS5wbGF5QW5pbWF0aW9uKHRoaXMuX3dpbkFuaU5hbWUsIDEpO1xyXG4gICAgICAgIEdHLmF1ZGlvTWdyLnBsYXlTb3VuZCgyMik7XHJcbiAgICB9LFxyXG4gICAgX3dpbkVuZCA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLl9nZXRSZXN1bHRDb21wKCkuc2hvd1Jlc3VsdCh0aGlzLl9yZXN1bHREYXRhKTtcclxuICAgICAgICB0aGlzLl93aW5BbmkucnVuQWN0aW9uKGNjLnNlcXVlbmNlKGNjLmRlbGF5VGltZSgyKSwgY2MuY2FsbEZ1bmMoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB0aGlzLl93aW5BbmkuYWN0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHRoaXMuX2dldFJlc3VsdENvbXAoKS5fc2V0SXNTaG93KGZhbHNlKTtcclxuICAgICAgICAgICAgdGhpcy5zZXRHcmF5SXNTaG93KGZhbHNlKTtcclxuICAgICAgICAgICAgaWYodGhpcy5fd2luQ2FsbEZ1bmMpe1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fd2luQ2FsbEZ1bmMoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3dpbkNhbGxGdW5jID0gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sIHRoaXMpKSk7XHJcbiAgICB9LFxyXG5cclxuICAgIF9jbGVhcldpbiA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZih0aGlzLl93aW5Bbmkpe1xyXG4gICAgICAgICAgICB0aGlzLl9nZXRSZXN1bHRDb21wKCkuX3NldElzU2hvdyhmYWxzZSk7XHJcbiAgICAgICAgICAgIHRoaXMuX3dpbkFuaS5zdG9wQWxsQWN0aW9ucygpO1xyXG4gICAgICAgICAgICB0aGlzLl93aW5BbmkuYWN0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHRoaXMuX3dpbkNhbGxGdW5jID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIC8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT3lpLHotKXliqjnlLtcclxuXHJcbiAgICBfcGxheUxvc2UgOiBmdW5jdGlvbiAoZGF0YSwgY2FsbEZ1bmMpIHtcclxuICAgICAgICB0aGlzLl9yZXN1bHREYXRhID0gZGF0YTtcclxuICAgICAgICB0aGlzLl9sb3NlQ2FsbEZ1bmMgPSBjYWxsRnVuYztcclxuICAgICAgICBpZighdGhpcy5fbG9zZUFuaSl7XHJcbiAgICAgICAgICAgIHRoaXMuX2xvc2VBbmkgPSBjYy5pbnN0YW50aWF0ZSh0aGlzLnByZWZhYl9sb3NlKTtcclxuICAgICAgICAgICAgdGhpcy5fbG9zZUFuaS5wYXJlbnQgPSB0aGlzLm5vZGU7XHJcbiAgICAgICAgICAgIHZhciBjb21wID0gdGhpcy5fbG9zZUFuaS5nZXRDb21wb25lbnQoZHJhZ29uQm9uZXMuQXJtYXR1cmVEaXNwbGF5KTtcclxuICAgICAgICAgICAgY29tcC5hZGRFdmVudExpc3RlbmVyKGRyYWdvbkJvbmVzLkV2ZW50T2JqZWN0LkNPTVBMRVRFLCB0aGlzLl9sb3NlRW5kLCB0aGlzKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5fbG9zZUFuaS5wb3NpdGlvbiA9IHRoaXMuX2dldFJlc3VsdEFuaVBvcygpO1xyXG4gICAgICAgIHRoaXMuX2xvc2VBbmkuYWN0aXZlID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLl9sb3NlQW5pLmdldENvbXBvbmVudChkcmFnb25Cb25lcy5Bcm1hdHVyZURpc3BsYXkpLnBsYXlBbmltYXRpb24odGhpcy5fbG9zZUFuaU5hbWUsIDEpO1xyXG4gICAgICAgIEdHLmF1ZGlvTWdyLnBsYXlTb3VuZCgyMSk7XHJcbiAgICB9LFxyXG4gICAgX2xvc2VFbmQgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5fZ2V0UmVzdWx0Q29tcCgpLnNob3dSZXN1bHQodGhpcy5fcmVzdWx0RGF0YSk7XHJcblxyXG4gICAgICAgIHRoaXMuX2xvc2VBbmkucnVuQWN0aW9uKGNjLnNlcXVlbmNlKGNjLmRlbGF5VGltZSgyKSwgY2MuY2FsbEZ1bmMoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB0aGlzLl9sb3NlQW5pLmFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICB0aGlzLl9nZXRSZXN1bHRDb21wKCkuX3NldElzU2hvdyhmYWxzZSk7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0R3JheUlzU2hvdyhmYWxzZSk7XHJcbiAgICAgICAgICAgIGlmKHRoaXMuX2xvc2VDYWxsRnVuYyl7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9sb3NlQ2FsbEZ1bmMoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2xvc2VDYWxsRnVuYyA9IG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LCB0aGlzKSkpO1xyXG4gICAgfSxcclxuXHJcbiAgICBfZ2V0UmVzdWx0Q29tcCA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZighdGhpcy5fcmVzdWx0Q29tcCl7XHJcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSBjYy5pbnN0YW50aWF0ZSh0aGlzLnByZWZhYl9zaG93UmVzdWx0KTtcclxuICAgICAgICAgICAgdGhpcy5ub2RlLmFkZENoaWxkKHJlc3VsdCwgNSk7XHJcbiAgICAgICAgICAgIGlmKHRoaXMuX3dpbkFuaSkgcmVzdWx0LnBvc2l0aW9uID0gdGhpcy5fd2luQW5pLnBvc2l0aW9uO1xyXG4gICAgICAgICAgICBpZih0aGlzLl9sb3NlQW5pKSByZXN1bHQucG9zaXRpb24gPSB0aGlzLl9sb3NlQW5pLnBvc2l0aW9uO1xyXG4gICAgICAgICAgICB0aGlzLl9yZXN1bHRDb21wID0gcmVzdWx0LmdldENvbXBvbmVudCh0aGlzLl9yZXN1bHRDb21wTmFtZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLl9yZXN1bHRDb21wXHJcbiAgICB9LFxyXG4gICAgX2NsZWFyTG9zZSA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZih0aGlzLl9sb3NlQW5pKXtcclxuICAgICAgICAgICAgdGhpcy5fZ2V0UmVzdWx0Q29tcCgpLl9zZXRJc1Nob3coZmFsc2UpO1xyXG4gICAgICAgICAgICB0aGlzLl9sb3NlQW5pLnN0b3BBbGxBY3Rpb25zKCk7XHJcbiAgICAgICAgICAgIHRoaXMuX2xvc2VBbmkuYWN0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHRoaXMuX2xvc2VDYWxsRnVuYyA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICBfZ2V0UmVzdWx0QW5pUG9zIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBkZXNpZ25TaXplID0gY2MudmlzaWJsZVJlY3Q7XHJcbiAgICAgICAgcmV0dXJuIGNjLnAoZGVzaWduU2l6ZS53aWR0aC8yLCBkZXNpZ25TaXplLmhlaWdodCowLjgpO1xyXG4gICAgfSxcclxuXHJcbiAgICAvLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PeeBsOiJsuWxglxyXG5cclxuICAgIHNldEdyYXlJc1Nob3cgOiBmdW5jdGlvbiAoaXNTaG93KSB7XHJcbiAgICAgICAgaWYodGhpcy5ub2RlX2dyYXlMYXllcikgdGhpcy5ub2RlX2dyYXlMYXllci5hY3RpdmUgPSBpc1Nob3c7XHJcbiAgICB9LFxyXG5cclxuICAgIGdldEdyYXlMYXllciA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5ub2RlX2dyYXlMYXllclxyXG4gICAgfSxcclxuXHJcbiAgICAvL+a4heeQhuaJgOaciVxyXG4gICAgY2xlYXJBbGwgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5jbGVhckJldHRpbmdBbmkoKTtcclxuICAgICAgICB0aGlzLmNsZWFyU3RhcnRBbmkoKTtcclxuICAgICAgICB0aGlzLl9jbGVhcldpbigpO1xyXG4gICAgICAgIHRoaXMuX2NsZWFyTG9zZSgpO1xyXG4gICAgICAgIHRoaXMuc2V0R3JheUlzU2hvdyhmYWxzZSk7XHJcbiAgICB9LFxyXG5cclxuICAgIC8vIGNhbGxlZCBldmVyeSBmcmFtZSwgdW5jb21tZW50IHRoaXMgZnVuY3Rpb24gdG8gYWN0aXZhdGUgdXBkYXRlIGNhbGxiYWNrXHJcbiAgICAvLyB1cGRhdGU6IGZ1bmN0aW9uIChkdCkge1xyXG5cclxuICAgIC8vIH0sXHJcbn0pO1xyXG4iLCIvKipcclxuICogQ3JlYXRlZCBieSBsZW5vdm8gb24gMjAxNy8yLzE2LlxyXG4gKi9cclxuXHJcbi8v5aS65a6d5qih5byP55qE6YWN572uXHJcbnZhciBidWxsMTAwID0ge1xyXG4gICAgZGljdF9iZXRHb2xkTnVtIDogezE6MSwyOjEsMzozLDQ6Myw1OjV9LCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v562556CB6YCJ6aG55a+55bqU6YeR5biB5pWw6YePXHJcbiAgICBkZWFsZXJTbGlkZXJJbnRlcnZhbCA6IDEwMDAwLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/kuIrluoTov5vluqbmnaHlop7lh4/pl7TpmpTmlbDlgLxcclxufVxyXG5cclxuXHJcbndpbmRvdy5HX0NvbmZpZ19idWxsMTAwID0gYnVsbDEwMDsiLCIvL+aJgOacieeahOmdnue8lui+keWZqOS4reeahOS4reaWh+mFjee9rlxyXG5cclxudmFyIGNoaW5lc2UgPSB7XHJcbiAgICAvL3RpcDAxIDogJ+ivt+aKouW6hDogJXMnLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+W8gOWni+aKouW6hFxyXG4gICAgLy90aXAwMiA6ICfor7fpgInmi6nkuIvliIblgI3mlbA6ICVzJywgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/or7fpgInmi6nkuIvliIblgI3mlbBcclxuICAgIGRlYWxlckdvbGRUZXh0MSA6ICfkuIrluoTmnIDkvY7ph5Hpop3kuLonLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+S4iuW6hOmHkemineeahOmZkOWItlxyXG4gICAgZGVhbGVyR29sZFRleHQyIDogJ+mHkemSseS4jei2syzkuIrluoToh7PlsJHpnIDopoEnLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL1xyXG4gICAgZGVhbGVyR29sZFRleHQzIDogJ+aCqOW3suaYr+W9k+WJjeW6hOWutu+8gScsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5bey57uP5Zyo5bqEXHJcbiAgICBkZWFsZXJHb2xkVGV4dDQgOiAn5oKo55uu5YmN5LiK5bqE5o6S5bqP77ya56ysJXPkvY3vvIEnLFxyXG4gICAgZXhpdFRleHQxIDogJ+W9k+WJjea4uOaIj+acque7k+adn++8jOmAgOWHuueUseezu+e7n+S7o+aJkz8nLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vXHJcbiAgICBleGl0VGV4dDIgOiAn5L2g56Gu5a6a6KaB6YCA5Ye65ri45oiP77yfJyxcclxuICAgIGV4aXRUZXh0MyA6ICfmgqjlt7LlgZrluoQs5by65Yi25LiL5bqE57O757uf5YiZ57un57ut5biu5oKo5omT5a6M5pys5bGAIScsXHJcbiAgICBkZWFsZXJTdWNjZXNzIDogJ+S4iuW6hOaIkOWKnyEhIScsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL1xyXG4gICAgY29udGludWVEZWFsZXJTdWNjZXNzIDogJ+e7reW6hOaIkOWKnyEnLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL1xyXG4gICAgZ2l2ZVVwRGVhbGVyMSA6ICfmgqjlt7Lku47kuIrluoTliJfooajpgIDlh7rnq57luoQnLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+i/mOS4jeaYr+W6hOWutlxyXG4gICAgZ2l2ZVVwRGVhbGVyMiA6ICfmgqjlt7LlnKjluoQs5LiL5bqE57O757uf5bCG5biu5oKo5omT5a6M5pys5bGAPycsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/lt7Lnu4/lnKjluoTkuoZcclxuICAgIGRvd25TdWNjZXNzIDogJ+aCqOW3sue7j+aIkOWKn+S4i+W6hCEnLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vXHJcbiAgICBjb250aW51ZURlYWxlciA6ICfmraTlsYDnu5PmnZ/lkI7mgqjlsIbpnaLkuLTkuIvluoTljbHpmanvvIzmmK/lkKbpnIDopoHnu63luoTvvIHmnIDkvY7nu63luoTph5Hpop3kuLolcycsXHJcbiAgICBsaW1pdEJldHRpbmcgOiAn5pys5qGM6ZmQ5oqVJXPmrKEnLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+eZvuS6uuahjOWtkOWPs+S4i+inkuS4i+azqOasoeaVsOaPkOekulxyXG4gICAgYmV0dGluZ1RpbWVzIDogJ+W9k+WJjeaKleazqOasoeaVsDogJXMnLFxyXG4gICAgaXNEZWFsZXJUaXAgOiAn6K+3562J5b6F546p5a625oqV5rOoKCVzKScsXHJcbiAgICBpbnRvUm9vbUxpbWl0MSA6ICfmgqjmnInmnKrlrozmiJDnmoTniYzlsYDvvIzor7fnrYnlvoXniYzlsYDnu5PmnZ/vvIEnLFxyXG4gICAgZXhjaGFuZ2VQYWdlTGVmdCA6IFsn5LuK5aSp5pWw5o2uJywn5pio5aSp5pWw5o2uJywn5YmN5aSp5pWw5o2uJ10sICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+WPr+WIh+aPm+eVjOmdoueahOW3pui+ueS/oeaBr1xyXG4gICAgLy/ns7vnu5/mj5DnpLpcclxuICAgIHVwRGVhbGVyU3VjY2VzcyA6ICfmga3llpzmgqjvvIzmiJDkuLrmnKzlsYDluoTlrrYhJyxcclxuICAgIGRvd25EZWFsZXJXYXJuaW5nIDogJ+WPi+aDheaPkOekujog5oKo55qE5LiK5bqE6LWE6YeR5LiN6LazODAl77yM6K+35Y+K5pe257ut5bqE77yBJyxcclxuICAgIGRvd25EZWFsZXJTdWNjZXNzIDogJ+aCqOW3suS4i+W6hCEnLFxyXG4gICAgbm9NeXNlbGYgOiAn5rKh5pyJ546p5a625pWw5o2uJywgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vXHJcbiAgICBpblRvUm9vbUxpbWl0OiAn4omlICcsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5oi/6Ze05YiX6KGo6aKE5Yi25L2TXHJcbiAgICBub1JlY29yZDogJ+acrOWRqOaaguaXoOaVsOaNricsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/mjpLooYzmppzmnaHnm67mmL7npLpcclxuICAgIHVwcGVyTGltaXQ6Jzk5OTnlhYYnLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+mHkeW4geS4iumZkOaAu+aYvuekulxyXG4gICAgd2luTWF0Y2g6ICfog5wnLFxyXG4gICAgbG9zZU1hdGNoOiAn6LSfJyxcclxuICAgIG5vdEludm9sdmVkTWF0Y2g6ICfmnKrlj4LkuI4nLFxyXG4gICAgdHVybk91dDogJ+i9rOWHuicsXHJcbiAgICByZWNoYXJnZTogJ+WFheWAvCcsXHJcbiAgICBkZWFsZXI6ICflvZPluoQnLFxyXG59XHJcblxyXG53aW5kb3cuR19DSElORVNFID0gY2hpbmVzZTsiLCIvL+WcqOe7j+WFuOaooeW8j+WvueaImOS4reS9v+eUqOWIsOeahOW4uOeUqOmFjee9rlxyXG5cclxudmFyIGNsYXNzaWNDb25maWcgPSB7XHJcbiAgICAvL251bV9maXJzdEdpdmUgOiA0LCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v6aaW5qyh5Y+R54mM5pWw6YePXHJcbiAgICAvL251bV9tYXhQbGF5ZXIgOiA1LCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5pyA5aSn546p5a625pWw6YePXHJcbiAgICAvL251bV9tYXhDaG9vc2UgOiAzLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v55yL54mM55qE5pe25YCZ6IO96YCJ5Lit55qE5pyA5aSn5Y2h54mM5pWw6YePXHJcblxyXG4gICAgLy9sZW5fYmV0d2Vlbk90aGVyUG9rZXIgOiAyNSwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5Y+C5oiY546p5a625Lik5byg5Y2h54mM5LmL6Ze055qE6Ze06ZqUXHJcbiAgICAvL2xlbl9iZXR3ZWVuTXlQb2tlciA6IDEzNSwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+eOqeWutuiHquW3seaLpeacieeahOS4pOW8oOWNoeeJjOS5i+mXtOeahOmXtOmalFxyXG4gICAgLy90aW1lX2dpdmVQb2tlciA6IDAuMSwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+WPkeavj+W8oOeJjOeahOmXtOmalFxyXG4gICAgLy90aW1lX3Bva2VyRmx5IDogMC44LCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+WNoeeJjOenu+WKqOmcgOimgeeahOaXtumXtFxyXG4gICAgLy9zY2FsZV9ub015UG9rZXIgOiAwLjUsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+ebluS9j+eahOWNoeeJjOeahOe8qeaUvueoi+W6plxyXG4gICAgLy9udW1fcG9rZXJVcCA6IDMwLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+eCueWHu+WNoeeJjOWQjuWQkeS4iuenu+WKqOeahOmrmOW6plxyXG4gICAgLy90aW1lX2RlYWxlck1vdmUgOiAwLjIsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+aKouW6hOeJueaViOenu+WKqOmXtOmalFxyXG4gICAgLy90aW1lX2NvbmZpcm1EZWFsZXIgOiAxLjUsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+ehruWumuW6hOWutueJueaViOaMgee7reaXtumXtFxyXG4gICAgLy90aW1lX2dvbGRGbHkgOiAwLjMsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+mHkeW4gemjnuihjOeahOaXtumXtFxyXG4gICAgLy9udW1fZ29sZEdyb3VwIDogMTAsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5LiA5qyh6aOe6KGM55qE6YeR5biB6YePXHJcbiAgICAvL1xyXG4gICAgLy90aW1lX3Nob3dHb2xkIDogMC4wOCwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+aYvuekuuWNleS4qumHkeW4gemXtOmalFxyXG4gICAgLy9saXN0X2NlbnRlclByb2dyZXNzVGltZSA6IFswLjcsMC4yXSwgICAgICAgICAgICAgICAgICAgICAgICAvL+S4remXtOWchuW9oui/m+W6puadoeWAkuiuoeaXtjrlj4LmlbAxOuesrOS4gOS4quW8gOWni+WPmOWMluminOiJsuWNoOaAu+aXtumXtOeahOavlOS+i++8m+WPguaVsDI656ys5LqM5Liq5Y+Y5YyWXHJcbiAgICAvL3RpbWVfcGFnZVJlc3VsdCA6IFswLjMsMC44LDEuM10sICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+e7k+eul+mdouadvyx0aW1lMTrog5zliKnmloflrZfliqjkvZzvvJt0aW1lMjrog4zmma/liqjkvZw7IHRpbWUz5Zu+5qCH5Yqo5L2cXHJcbiAgICAvL3RpbWVfcG9rZXJSZXN1bHRTaG93IDogMC41LCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5Y2h54mM5LiK6Z2i55qE57uT5p6c54m55pWI5pi+56S655qE5pe26Ze0XHJcbiAgICAvL3NjYWxlX3Bva2VyUmVzdWx0U2hvdyA6IDEuMiwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5Y2h54mM5LiK5pa557uT5p6c54m55pWI5pyA5aSn5YCN5pWwXHJcbiAgICAvL2xpc3RfYmFja2dyb3VuZEVmZmVjdDEgOiBbMS4wLCAxLjNdLCAgICAgICAgICAgICAgICAgICAgICAgIC8v6IOM5pmv54m55pWIMSDvvJrlj4LmlbAx77ya57yp5pS+5pe26Ze077yM5Y+C5pWwMu+8mue8qeaUvuWAjeaVsFxyXG4gICAgLy90aW1lX3Bva2VyUmVzdWx0SW50ZXJ2YWwgOiAwLjUsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+S+neasoeaYvuekuuWNoeeJjOe7k+aenOeahOmXtOmalFxyXG4gICAgLy9saXN0X2dvbGRBZGRGbHkgOiBbMC44LCAwLjgsIDAuNV0sICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/lop7liqDph5HluIHmlYjmnpzlj4LmlbAx77ya6aOe5Ye65Y6755qE5pe26Ze077yM5Y+C5pWwMu+8mumjnuWbnmxhYmVs55qE5pe26Ze077yM5Y+C5pWwM++8muS4remXtOWBnOmhv+eahOmXtOmalFxyXG4gICAgLy9saXN0X2dvbGRMb3N0Rmx5IDogWzAuOCwgMS4wLCAwLjNdLCAgICAgICAgICAgICAgICAgICAgICAgICAgLy/lh4/lsJHph5HluIHmlYjmnpzlj4LmlbAx77ya6aOe5Ye65Y6755qE5pe26Ze077yM5Y+C5pWwMu+8muS4remXtOWBnOmhv+eahOaXtumXtO+8jOWPguaVsDPvvJrmtojlpLHoirHotLnnmoTml7bpl7RcclxuICAgIC8vbnVtX3Bva2VyUmVzdWx0T2ZmIDogNDUsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+WNoeeJjOS4iumdoue7k+aenOaYvuekuuefq+ato1xyXG4gICAgLy9udW1fZGVhbGVyRWZmTW92ZVN0ZXAgOiAyLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v6K+l5pWw5YC85LmY5Lul5b2T5YmN546p5a625pWwPT3pmo/mnLrluoTlrrbmlYjmnpzlv4Xlrprnp7vliqjmraXmlbBcclxuXHJcbiAgICAvL251bV9nb2xkRmlyc3RPZmYgOiAxNSwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/po57ooYzph5HluIHliJ3lp4vkvY3nva7lgY/np7vph49cclxufVxyXG5cclxud2luZG93LkdfQ29uZmlnX2NsYXNzaWMgPSBjbGFzc2ljQ29uZmlnOyIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IGxlbm92byBvbiAyMDE2LzEyLzI5LlxyXG4gKi9cclxuXHJcbi8v5omA5pyJ5a+55oiY5qih5byP6YCa55So55qE6YWN572uXHJcbnZhciBjb21tb24gPSB7XHJcbiAgICB2ZXJzaW9uIDogJzEuMC4xJywgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5ri45oiP54mI5pysXHJcbiAgICBpc0xvY2FsIDogZmFsc2UsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5piv5ZCm6LWw5pys5ZywXHJcbiAgICBmcmFtZVNjYWxlIDogMC41LCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v55WM6Z2i57yp5pS+5qCH5YeGXHJcbiAgICBib3R0b21UaXBQb3MgOiBjYy5wKGNjLnZpc2libGVSZWN0LndpZHRoKjAuNSwgY2MudmlzaWJsZVJlY3QuaGVpZ2h0KjAuMSksXHJcbiAgICB0aW1lX3RpcERlZmF1bHQgOiAzLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/msqHmnInorr7nva7ml7bpl7TvvIzpu5jorqTlrZjlnKjnmoTml7bplb9cclxuICAgIG51bV9tYXhOYW1lTGVuIDogMTAsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+acgOWkp+eahOWQjeWtl+mVv+W6pizotoXov4fnmoTliJnnlKjnnIHnlaXlj7fmmL7npLos5oyJ5a2X56ym5a695bqmXHJcblxyXG4gICAgc2NhbGVfbW92ZUdvbGQgOiAwLjUsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v56e75Yqo5Lit55qE6YeR5biB55qE57yp5pS+5q+U5L6LXHJcblxyXG4gICAgc2hvd1RyZW5kSXRlbXMgOiA1LCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+aYvuekuui1sOWKv+WbvuadoeebruS6lOS4qlxyXG4gICAgY29ubmVjdFRpbWVPdXQgOiAzLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLzPnp5LotoXml7ZcclxuICAgIGRlZmF1bHRWb2x1bWUgOiAxLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/pu5jorqTpn7Pph4/lpKflsI9cclxuICAgIG5vdGljZV9zcGVlZCA6IDI0MCwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/ot5Hpqaznga/np7vliqjpgJ/luqZcclxuICAgIG5vdGljZV9zaG93VGltZSA6IDQsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/ot5Hpqaznga/ljZXmnaHlrZjlnKjml7bpl7RcclxuICAgIFxyXG4gICAgLy9idG5HcmF5VmFsdWUgOiAwLjMsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/mjInpkq7nva7ngbDnmoTpgI/mmI7luqZcclxuICAgIC8vdGltZV9jb25maXJtVGlwU2hvdyA6IDAuNCwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/noa7orqTmoYbmmL7npLrlh7rnjrDml7bpl7RcclxuICAgIC8vc2NhbGVfY29uZmlybVRpcE1heCA6IDEuMiwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/noa7orqTmoYbmnIDlpKfnvKnmlL5cclxuICAgIC8vbnVtX211bHRpcGxlVmFsdWVPZmYgOiAxMiwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/lgI3mlbDmjInpkq7vvIzmlbDlgLzmmL7npLrlpKfkuo4xMOWQjueahOWBj+enu1xyXG4gICAgLy9kaWN0X21vbmV5VW5pdCA6IHtcclxuICAgIC8vICAgIDEwMDAwOiAn5LiHJyxcclxuICAgIC8vICAgIDEwMDAwMDAwMCA6ICfkur8nLFxyXG4gICAgLy99LCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v6LaF6L+H5pWw6aKd5ZCO5pi+56S66YeR6ZKx5Y2V5L2NXHJcbiAgICAvL3RpbWVfZXllRWZmZWN0IDogWzEuNSwgMi4wXSwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/nnLznnZvkuIrnmoTnibnmlYjvvIx0aW1lMTrnp7vliqjml7bpl7TvvIx0aW1lMu+8muWBnOmhv+aXtumXtFxyXG4gICAgLy90aW1lX3Bva2VyT3BlbiA6IDAuNiwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/nv7vniYzmtojogJfnmoTml7bpl7TvvIzliIbkuKTmrrVcclxuXHJcbiAgICBuYXRpdmVIcmVmIDogJ2h0dHA6Ly8xOTIuMTY4LjAuMTAwL3BsYXllci8nLCAgICAgICAgICAgIC8v5pys5Zyw6K+35rGC55qE5Zyw5Z2AXHJcbn1cclxuXHJcblxyXG53aW5kb3cuR19Db25maWdfY29tbW9uID0gY29tbW9uOyIsIi8v6YWN572u5byx572R6LWE5rqQ6K+35rGC6Lev5b6E5Y+K5Y+C5pWwXHJcblxyXG52YXIgd2Vla05ldHdvcmtVcmwgPSB7XHJcbiAgICBsb2dpblRva2VuVXJsIDogJ3VzZXIvdG9rZW4uaHRtbCcsLy90b2tlbuiOt+WPllxyXG4gICAgbG9naW5Ub1NldFVybCA6ICd1c2VyL3ZvaWNlU2V0Lmh0bWwnLC8v5aOw6Z+z6K6+572u6I635Y+WXHJcbiAgICBnZXRTeXN0ZW1TZXRVcmwgOiAnZ2FtZS9wbGF5ZXJTeXNTZXQuaHRtbCcsLy/orr7nva7ojrflj5ZcclxuICAgIHNhdmVTeXN0ZW1TZXRVcmwgOiAnZ2FtZS9wbGF5ZXJTeXNTZXRTYXZlLmh0bWwnLC8v5aOw6Z+z6K6+572u5L+d5a2YKG11c2ljQ2xhc3M6dHJ1ZSwgc291bmRDbGFzczp0cnVlLCBnYW1lVHlwZTonRE9VX05JVScpXHJcbiAgICB0aW1lZFJlZnJlc2hVcmwgOiAndXNlci9hbGl2ZS5odG1sJywvL+WumuaXtuWIt+aWsFxyXG4gICAgbG9nb3V0IDogJ3Bhc3Nwb3J0L2xvZ291dC5odG1sJywvL+ehruWumumAgOWHuua4uOaIj1xyXG4gICAgbG9naW4gOiAncGFzc3BvcnQvbG9naW4uaHRtbCcsLy/nmbvlvZXmuLjmiI9cclxuXHJcbiAgICBwZXJzb25hbEluZm9VcmwgOiAnZ2FtZS9wbGF5ZXJJbmZvLmh0bWwnLC8v6I635Y+W546p5a625L+h5oGvXHJcbiAgICBwbGF5ZXJUcmVhc3VyZXNVcmwgOiAnZ2FtZS9zdGF0aXN0aWNzL3RyZWFzdXJlcy5odG1sJywvL+iOt+WPluWvjOixquamnOaVsOaNrlxyXG4gICAgcGxheWVyUHJvZml0VXJsIDogJ2dhbWUvc3RhdGlzdGljcy9wcm9maXRzLmh0bWwnLC8v6I635Y+W55uI5Yip5qac5pWw5o2uICDpnIDopoFnYW1lSWQg55uu5YmN5Li6MVxyXG4gICAgZ2FtZVJvb21MaXN0VXJsIDogJ2dhbWUvcm9vbXMuaHRtbCcsLy/ojrflj5bmiL/pl7TliJfooagg6ZyA6KaB5ri45oiP546p5rOVIGdhbWVNb2RlbE5hbWVcclxuXHJcbiAgICBhbm5vdW5jZW1lbnRVcmwgOiAnJywvL+WFrOWRiuWGheWuueiOt+WPllxyXG4gICAgcnVsZXNVcmwgOiAnJywvL+inhOWImeWGheWuueiOt+WPllxyXG4gICAgcmVjb3JkVXJsIDogJ2dhbWUvc3RhdGlzdGljcy91c2VyL3JlY29yZHMuaHRtbCcsLy/orrDlvZXlhoXlrrnojrflj5YgIOmcgOimgVwiZ2FtZUlkXCI6MSwgZGF0ZUNsYXNzOjAsMSwyLCBwYWdlU2l6ZTogMjBcclxuICAgIGFjY291bnRVcmwgOiAncGxheWVyUmVjaGFyZ2UvcGxheWVyQWNjb3VudFJlY29yZC5odG1sJywvL+i0puebruWGheWuueiOt+WPliAg6ZyA6KaBXCJnYW1lSWRcIjoxLCBkYXRlQ2xhc3M6MCwxLDIsIHBhZ2VTaXplOiAyMFxyXG4gICAgdHJlbmRVcmwgOiAnZ2FtZS9jaGFydC9pbm5pbmcuaHRtbCcsIC8v6LWw5Yq/5Zu+5pWw5o2u6I635Y+WICAgICDpnIDopoEgXCJnYW1lTW9kZWxJZFwiOiBNb2RlbElkLCAgXCJnYW1lUm9vbUlkXCI6IHJvb21JZFxyXG4gICAgcGxheWVyTGlzdFVybCA6ICdnYW1lL2J1bGwxMDAvcGxheWVyTGlzdC5odG1sJywvL+eOqeWutuWIl+ihqCAg6ZyA6KaB5ri45oiP546p5rOVXHJcbn1cclxuXHJcbndpbmRvdy5HX0RJQUxPR19VUkwgPSB3ZWVrTmV0d29ya1VybDtcclxuXHJcblxyXG4vLyB2YXIgd2Vla05ldHdvcmtVcmwgPSB7XHJcbi8vICAgICBsb2dpblRva2VuVXJsIDogJy91c2VyL3Rva2VuLmh0bWwnLC8vdG9rZW7ojrflj5ZcclxuLy8gICAgIGxvZ2luVG9TZXRVcmwgOiAnL3VzZXIvdm9pY2VTZXQuaHRtbCcsLy/lo7Dpn7Porr7nva7ojrflj5ZcclxuLy8gICAgIGdldFN5c3RlbVNldFVybCA6ICcvZ2FtZS9wbGF5ZXJTeXNTZXQuaHRtbCcsLy/orr7nva7ojrflj5ZcclxuLy8gICAgIHNhdmVTeXN0ZW1TZXRVcmwgOiAnL2dhbWUvcGxheWVyU3lzU2V0U2F2ZS5odG1sJywvL+WjsOmfs+iuvue9ruS/neWtmChtdXNpY0NsYXNzOnRydWUsIHNvdW5kQ2xhc3M6dHJ1ZSwgZ2FtZVR5cGU6J0RPVV9OSVUnKVxyXG4vLyAgICAgdGltZWRSZWZyZXNoVXJsIDogJy91c2VyL2FsaXZlLmh0bWwnLC8v5a6a5pe25Yi35pawXHJcbi8vICAgICBsb2dvdXQgOiAnL3Bhc3Nwb3J0L2xvZ291dC5odG1sJywvL+ehruWumumAgOWHuua4uOaIj1xyXG4vL1xyXG4vLyAgICAgcGVyc29uYWxJbmZvVXJsIDogJy9nYW1lL3BsYXllckluZm8uaHRtbCcsLy/ojrflj5bnjqnlrrbkv6Hmga9cclxuLy8gICAgIHBsYXllclRyZWFzdXJlc1VybCA6ICdnYW1lL3N0YXRpc3RpY3MvdHJlYXN1cmVzLmh0bWwnLC8v6I635Y+W5a+M6LGq5qac5pWw5o2uXHJcbi8vICAgICBwbGF5ZXJQcm9maXRVcmwgOiAnL2dhbWUvc3RhdGlzdGljcy9wcm9maXRzLmh0bWwnLC8v6I635Y+W55uI5Yip5qac5pWw5o2uICDpnIDopoFnYW1lSWQg55uu5YmN5Li6MVxyXG4vLyAgICAgZ2FtZVJvb21MaXN0VXJsIDogJy9nYW1lL3Jvb21zLmh0bWwnLC8v6I635Y+W5oi/6Ze05YiX6KGoIOmcgOimgea4uOaIj+eOqeazlSBnYW1lTW9kZWxOYW1lXHJcbi8vXHJcbi8vICAgICBhbm5vdW5jZW1lbnRVcmwgOiAnJywvL+WFrOWRiuWGheWuueiOt+WPllxyXG4vLyAgICAgcnVsZXNVcmwgOiAnJywvL+inhOWImeWGheWuueiOt+WPllxyXG4vLyAgICAgcmVjb3JkVXJsIDogJy9nYW1lL3N0YXRpc3RpY3MvdXNlci9yZWNvcmRzLmh0bWwnLC8v6K6w5b2V5YaF5a656I635Y+WICDpnIDopoFcImdhbWVJZFwiOjEsIGRhdGVDbGFzczowLDEsMiwgcGFnZVNpemU6IDIwXHJcbi8vICAgICBhY2NvdW50VXJsIDogJy9wbGF5ZXJSZWNoYXJnZS9wbGF5ZXJBY2NvdW50UmVjb3JkLmh0bWwnLC8v6LSm55uu5YaF5a656I635Y+WICDpnIDopoFcImdhbWVJZFwiOjEsIGRhdGVDbGFzczowLDEsMiwgcGFnZVNpemU6IDIwXHJcbi8vICAgICB0cmVuZFVybCA6ICdnYW1lL2NoYXJ0L2lubmluZy5odG1sJywgLy/otbDlir/lm77mlbDmja7ojrflj5YgICAgIOmcgOimgSBcImdhbWVNb2RlbElkXCI6IE1vZGVsSWQsICBcImdhbWVSb29tSWRcIjogcm9vbUlkXHJcbi8vICAgICBwbGF5ZXJMaXN0VXJsIDogJ2dhbWUvYnVsbDEwMC9wbGF5ZXJMaXN0Lmh0bWwnLC8v546p5a625YiX6KGoICDpnIDopoHmuLjmiI/njqnms5VcclxuLy8gfSIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IGxlbm92byBvbiAyMDE2LzEyLzI5LlxyXG4gKi9cclxuXHJcbi8v5aS65a6d5qih5byP55qE6YWN572uXHJcbnZhciBncmFiID0ge1xyXG4gICAgbnVtX290aGVyR3JhYkdvbGROdW0gOiAyLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/lhbbku5bnjqnlrrbmipXms6jnmoTml7blgJnpo57ooYznmoTph5HluIHmlbDph49cclxuICAgIHRpbWVfZ3JhYldpbGxFbmQgOiAyLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+i3neemu+aKleazqOe7k+adn+WJqeS9meivpeenkuaVsOeahOaXtuWAmeS4jeaSreaUvuWPkeeJjOWKqOeUu1xyXG4gICAgbnVtX3dpblBva2VyT2ZmIDogMTUsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5pyJ54mb5pe25YCZ77yM5ZCO6Z2i5Lik5byg54mM5aKe5Yqg55qE6Ze06ZqUXHJcbiAgICB0aW1lX2dvbGRGbHlPbkhlYWQgOiAxLjUsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/lpLTlg4/kuIrph5HluIHlop7lh4/po57ooYzpnIDopoHnqbrlh7rmnaXnmoTml7bpl7RcclxuXHJcbiAgICAvL3RpbWVfZ29sZEZseV9BZGQgOiAwLjMsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+aKvOazqOaXtuWAme+8jOmHkeW4geeahOenu+WKqOaXtumXtFxyXG4gICAgLy90aW1lX2dvbGRGbHlfUmVzdWx0IDogMC41LCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/orqHnrpfmlLbnm4rnmoTml7blgJnvvIzph5HluIHnmoTnp7vliqjml7bpl7RcclxuICAgIC8vdGltZV9nb2xkRmx5X2RlbGF5IDogMC4xLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v6YeR5biB6aOe6KGM77yM6YeR5biB6Ze06ZqUXHJcbiAgICAvL251bV9nb2xkSW1nQXJlYSA6IDAuMywgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+mHkeW4geWcqOaKleazqOWMuuaYvuekuueahOiMg+WbtD3mnIDlpKfojIPlm7TnmoTnmb7liIbmr5RcclxuICAgIC8vZGljdF9tb3ZlR29sZE51bSA6IHsxOjEsMjoxLDM6Miw0OjMsNTo0fSwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/njqnlrrbmipXms6jml7blgJnlop7liqDnmoTph5HluIHlm77niYfmlbDph49cclxuICAgIC8vbnVtX3Bva2VyT2ZmWCA6IDAuMzUsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+WNoeeJjOS5i+mXtOeahOmXtOmalD3ljaHniYzlrr3nmoTnmb7liIbmr5RcclxuICAgIC8vdGltZV9wb2tlck1vdmUgOiAwLjUsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5Y2h54mM56e75Yqo6Iqx6LS555qE5pe26Ze0XHJcbiAgICAvL2RlbGF5VGltZV9wb2tlck1vdmUgOiAwLjA1LCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v6aOe5Ye65Y2h54mM55qE6Ze06ZqUXHJcbiAgICAvL3RpbWVfb3Blbk1vdmVQb2tlciA6IDAuMiwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5bqE5a625byA54mM5pe25YCZ77yM54mM56e75Yqo6ICX5pe2XHJcbiAgICAvL3RpbWVfc2hvd0ZsYWcgOiAzLjUsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+i1oumSseaXl+W4nOS/neaMgeaYvuekuueahOaXtumVv1xyXG4gICAgLy90aW1lX2dvbGRPbkhlYWQgOiAwLjUsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/lpLTlg4/kuIrpnaLph5HluIHlgLznp7vliqjpgJ/luqZcclxuICAgIC8vdGltZV9vcGVuRGVsYXkgOiAwLjUsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5byA54mM6Ze06ZqUXHJcbn1cclxuXHJcblxyXG53aW5kb3cuR19Db25maWdfZ3JhYiA9IGdyYWI7IiwiLy/phY3nva7otYTmupDnmoTot6/lvoTmiJbogIXotYTmupDnmoTlkI3lrZdcclxuXHJcbnZhciByZXNVUkwgPSB7XHJcbiAgICBhdGxhc19tdWx0aXBsZUltZ05hbWUgOiB7IC8v5oyJ6ZKu5LiK55qE5YCN5pWw5Zu+54mHXHJcbiAgICAgICAgMDonY29tbV90ZXh0X2RvbnQnLFxyXG4gICAgICAgIGltZ05hbWUgOiAnY29tbV90ZXh0XycsXHJcbiAgICB9LFxyXG4gICAgYXRsYXNfcG9rZXJSZXN1bHQgOiB7ICAgICAgIC8v5Y2h54mM5LiK6Z2i55qE54mM6Z2i57uT5p6cXHJcbiAgICAgICAgcmVzdWx0SW1nTmFtZSA6ICdjb21tX3RleHRfbGlzdF9hY2NvcmRpbmdfJyxcclxuICAgICAgICBub1Jlc3VsdCA6ICdjb21tX3RleHRfbGlzdF9hY2NvcmRpbmdfbm8nLFxyXG4gICAgICAgIGRvbnQgOiAnY29tbV90ZXh0X2xpc3RfYWNjb3JkaW5nX29rJyxcclxuICAgIH0sXHJcbiAgICBhdGxhc19jaG9vc2VNdWx0aXBsZU5hbWUgOiB7ICAgICAgICAvL+WktOWDj+aXgei+ueeahOaKouWHoOWSjOS4i+WIhuWAjeaVsOWbvueJh1xyXG4gICAgICAgIGRlYWxlcl8wOidTY2VuZV9DbGFzc2ljX2J1cWFpbmcwMicsXHJcbiAgICAgICAgZGVhbGVyXzE6J1NjZW5lX0NsYXNzaWNfcXpfMScsXHJcbiAgICAgICAgZGVhbGVyXzI6J1NjZW5lX0NsYXNzaWNfcXpfMicsXHJcbiAgICAgICAgZGVhbGVyXzM6J1NjZW5lX0NsYXNzaWNfcXpfMycsXHJcbiAgICAgICAgZGVhbGVyXzQ6J1NjZW5lX0NsYXNzaWNfcXpfNCcsXHJcbiAgICAgICAgc2NvcmVfNTonU2NlbmVfQ2xhc3NpY194NScsXHJcbiAgICAgICAgc2NvcmVfMTA6J1NjZW5lX0NsYXNzaWNfeDEwJyxcclxuICAgICAgICBzY29yZV8xNTonU2NlbmVfQ2xhc3NpY194MTUnLFxyXG4gICAgICAgIHNjb3JlXzI1OidTY2VuZV9DbGFzc2ljX3gyNScsXHJcbiAgICB9LFxyXG4gICAgLy/noa7lrprluoTlrrblkI7nmoTnibnmlYhcclxuICAgIGFuaV9nZXREZWFsZXJOYW1lIDoge1xyXG4gICAgICAgIGhvcml6b250YWwgOiAnR2V0RGVhbGVyMDEnLFxyXG4gICAgICAgIHZlcnRpY2FsIDogJ0dldERlYWxlcjAyJyxcclxuICAgIH0sXHJcbiAgICAvL+iOt+WPlumHkeW4geaXtuWAmeeahOWktOWDj+eJueaViFxyXG4gICAgYW5pX2dldEdvbGRPbkhlYWROYW1lIDoge1xyXG4gICAgICAgIGhvcml6b250YWwgOiAnR29sZE9uSGVhZF9ob3Jpem9udGFsJyxcclxuICAgICAgICB2ZXJ0aWNhbCA6ICdHb2xkT25IZWFkX3ZlcnRpY2FsJyxcclxuICAgIH0sXHJcbiAgICAvL+W8gOWni+WKqOeUu1xyXG4gICAgYm9uZUFuaSA6IHtcclxuICAgICAgICBsb2FkaW5nIDogJ0JvbmVBbmlfbG9hZGluZycsICAgICAgICAgICAgICAgIC8v5Yqg6L295LitXHJcbiAgICAgICAgbWF0Y2hpbmcgOiAnQm9uZUFuaV9sb2FkaW5nX2RhdGluZycsICAgICAgICAvL+mAn+mFjeS4rVxyXG4gICAgfSxcclxuICAgIC8v5Y2h54mM5Z+656GA55qE5pi+56S6XHJcbiAgICBwb2tlclR5cGUgOiB7XHJcbiAgICAgICAgYmxvY2tNaW4gOiAnY29tbW9uX2NhcmRfZl8wMicsICAgICAgICAgICAgICAgICAvL+aWueWdl+Wwj1xyXG4gICAgICAgIGJsb2NrTWF4IDogJ2NvbW1vbl9jYXJkX2ZfMDEnLCAgICAgICAgICAgICAgICAgLy/mlrnlnZflpKdcclxuICAgICAgICBibGFja0hlYXJ0TWluIDogJ2NvbW1vbl9jYXJkX2hfMDInLCAgICAgICAgICAgLy/pu5HoibLmoYPlv4PlsI9cclxuICAgICAgICBibGFja0hlYXJ0TWF4IDogJ2NvbW1vbl9jYXJkX2hfMDEnLCAgICAgICAgICAgLy/pu5HoibLmoYPlv4PlpKdcclxuICAgICAgICByZWRIZWFydE1pbiA6ICdjb21tb25fY2FyZF9ob25nXzAyJywgICAgICAgICAgLy/nuqLoibLmoYPlv4PlsI9cclxuICAgICAgICByZWRIZWFydE1heCA6ICdjb21tb25fY2FyZF9ob25nXzAxJywgICAgICAgICAgLy/nuqLoibLmoYPlv4PlpKdcclxuICAgICAgICBmbG93ZXJNaW4gOiAnY29tbW9uX2NhcmRfbWVpXzAyJywgICAgICAgICAgICAgLy/mooXoirHlsI9cclxuICAgICAgICBmbG93ZXJNYXggOiAnY29tbW9uX2NhcmRfbWVpXzAxJywgICAgICAgICAgICAgLy/mooXoirHlpKdcclxuICAgICAgICB2YWx1ZV9KIDogJ2NvbW1vbl9jYXJkX0onLCAgICAgICAgICAgICAgICAgICAgIC8v5Y2h54mMaueahOeJjOWei+aYvuekulxyXG4gICAgICAgIHZhbHVlX1EgOiAnY29tbW9uX2NhcmRfUScsICAgICAgICAgICAgICAgICAgICAgLy/ljaHniYxR55qE54mM5Z6L5pi+56S6XHJcbiAgICAgICAgdmFsdWVfSyA6ICdjb21tb25fY2FyZF9rJywgICAgICAgICAgICAgICAgICAgICAvL+WNoeeJjEvnmoTniYzlnovmmL7npLpcclxuICAgIH0sXHJcbiAgICAvL+ihqOWQjeaemuS4vlxyXG4gICAgZGljdF90YWJsZXNOYW1lIDoge1xyXG4gICAgICAgIHBsYXRmb3JtQ29uZmlnIDogJycsXHJcbiAgICAgICAgY29tbW9uQ29uZmlnIDogJ0NvbW1vbkNvbmZpZycsXHJcbiAgICAgICAgY29tbW9uTG9hZGluZyA6ICdDb21tb25fbG9hZGluZ1RpcHMnLFxyXG4gICAgICAgIC8vY2xhc3NpY0NvbmZpZyA6ICdDbGFzc2ljX21haW5Db25maWcnLFxyXG4gICAgICAgIGNoaW5lc2UgOiAnQ2hpbmVzZScsXHJcbiAgICAgICAgZ3JhYkNvbmZpZyA6ICdHcmFiX21haW5Db25maWcnLFxyXG4gICAgICAgIC8vYnVsbDEwMENvbmZpZyA6ICdCdWxsMTAwX21haW5Db25maWcnLFxyXG4gICAgICAgIGF1ZGlvTmFtZSA6ICdFbnVtX2F1ZGlvTmFtZScsXHJcbiAgICB9LFxyXG5cclxuICAgIC8vdWnnlYzpnaJcclxuICAgIHVpTmFtZSA6IGNjLkVudW0oe1xyXG4gICAgICAgIGFjY291bnQgOiAnUHJlZmFiX2RpYWxvZ19hY2NvdW50JywgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/otKbnm67nlYzpnaJcclxuICAgICAgICBhbm5vdW5jZW1lbnQgOiAnUHJlZmFiX2RpYWxvZ19hbm5vdW5jZW1lbnQnLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/lhazlkYrnlYzpnaJcclxuICAgICAgICBkZWFsZXJMaXN0IDogJ1ByZWZhYl9kaWFsb2dfZGVhbGVyTGlzdCcsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5LiK5bqE5YiX6KGo55WM6Z2iXHJcbiAgICAgICAgcGxheWVyTGlzdCA6ICdQcmVmYWJfZGlhbG9nX3BsYXllckxpc3QnLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+eOqeWutuWIl+ihqOeVjOmdolxyXG4gICAgICAgIHJlY29yZCA6ICdQcmVmYWJfZGlhbG9nX3JlY29yZCcsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v6K6w5b2V55WM6Z2iXHJcbiAgICAgICAgcnVsZXMgOiAnUHJlZmFiX2RpYWxvZ19ydWxlcycsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/op4TliJnnlYzpnaJcclxuICAgICAgICBydWxlc0luSG9tZSA6ICdQcmVmYWJfZGlhbG9nX3J1bGVzSW5Ib21lJywgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5oi/6Ze05YaF55qE6KeE5YiZ55WM6Z2iXHJcbiAgICAgICAgc3lzdGVtU2V0IDogJ1ByZWZhYl9kaWFsb2dfc2V0JywgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/ns7vnu5/orr7nva7nlYzpnaJcclxuICAgICAgICBidWxsMTAwVHJlbmQgOiAnUHJlZmFiX2RpYWxvZ19idWxsMTAwVHJlbmQnLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+eZvuS6uui1sOWKv+WbvueVjOmdolxyXG4gICAgICAgIGdyYWJUcmVuZCA6ICdQcmVmYWJfZGlhbG9nX2dyYWJUcmVuZCcsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+aKvOWunei1sOWKv+WbvueVjOmdolxyXG5cclxuICAgIH0pLFxyXG5cclxuICAgIC8v6Z+z5pWI6Lev5b6EXHJcbiAgICBhdWRpb1VybCA6ICdyZXNvdXJjZXMvU291bmRzLyVzLm1wMycsXHJcbn1cclxud2luZG93LkdfUkVTX1VSTCA9IHJlc1VSTDsiLCIvKipcclxuICogQ3JlYXRlZCBieSBsZW5vdm8gb24gMjAxNi8xMi8zMC5cclxuICovXHJcblxyXG4vL+a4uOaIj+aVsOaNrueahOWJquaOpeiOt+WPluaWueW8j1xyXG52YXIgZ2FtZURhdGEgPSB7XHJcbiAgICBfY3VySGFzaCA6IG51bGwsLy/orrDlvZXliLfmlrDpobXpnaLliY3nmoTlnLrmma9cclxuICAgIC8vdGFibGVEYXRhXHJcbiAgICBnZXRDaGluZXNlIDogZnVuY3Rpb24gKGtleUlEKSB7XHJcbiAgICAgICAgdmFyIHRhYmxlID0gR0cudGFibGVNZ3IuZ2V0VGFibGUoR19SRVNfVVJMLmRpY3RfdGFibGVzTmFtZS5jaGluZXNlKTtcclxuICAgICAgICBpZighdGFibGUpIHJldHVybiBudWxsO1xyXG4gICAgICAgIHJldHVybiB0YWJsZS5nZXREYXRhQnlJRChrZXlJRCk7XHJcbiAgICB9LFxyXG4gICAgZ2V0Qm90dG9tVGlwUG9zIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBkZXNpZ25TaXplID0gY2Mudmlldy5nZXREZXNpZ25SZXNvbHV0aW9uU2l6ZSgpO1xyXG4gICAgICAgIHJldHVybiBjYy5wKGRlc2lnblNpemUud2lkdGgqMC41LCBkZXNpZ25TaXplLmhlaWdodCowLjE3KVxyXG4gICAgfSxcclxuICAgIGdldFRvcFRpcFBvcyA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgZGVzaWduU2l6ZSA9IGNjLnZpZXcuZ2V0RGVzaWduUmVzb2x1dGlvblNpemUoKTtcclxuICAgICAgICByZXR1cm4gY2MucChkZXNpZ25TaXplLndpZHRoKjAuNSwgZGVzaWduU2l6ZS5oZWlnaHQqMC44KVxyXG4gICAgfSxcclxuICAgIGdldENlbnRlclRpcFBvcyA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgZGVzaWduU2l6ZSA9IGNjLnZpZXcuZ2V0RGVzaWduUmVzb2x1dGlvblNpemUoKTtcclxuICAgICAgICByZXR1cm4gY2MucChkZXNpZ25TaXplLndpZHRoKjAuNSwgZGVzaWduU2l6ZS5oZWlnaHQqMC41NSlcclxuICAgIH0sXHJcbiAgICAvL+agueaNrue0ouW8leiOt+WPluWNoeeJjOeahOWAvOWSjOexu+Wei1xyXG4gICAgZ2V0UG9rZXJJbmZvIDogZnVuY3Rpb24gKGluZGV4KSB7XHJcbiAgICAgICAgdGhpcy5wb2tlclZhbHVlID0gKGluZGV4Pj4yKSsxOyAvLzEtMTPlr7nlupRB5YiwS1xyXG4gICAgICAgIHRoaXMucG9rZXJUeXBlID0gNC0oaW5kZXgmMyk7Ly8xLTTlr7nlupTpu5HmoYPvvIznuqLmoYPvvIzmooXoirHvvIzmlrnlnZdcclxuICAgICAgICByZXR1cm4gdGhpc1xyXG4gICAgfSxcclxuXHJcbiAgICAvL+iOt+WPluWbvueJh+ivt+axguaOpeWPo+i3r+W+hFxyXG4gICAgZ2V0UmVzTmV0Um9vdCA6IGZ1bmN0aW9uIChyZXNVcmwpIHtcclxuICAgICAgICAvL3JldHVybiAnaHR0cDovLzE5Mi4xNjguMC4xMDk6ODA4MC9zdGF0aWMvJytyZXNVcmxcclxuICAgICAgICBpZihHX0NvbmZpZ19jb21tb24uaXNMb2NhbCl7XHJcbiAgICAgICAgICAgIHZhciB1cmwgPSB0aGlzLmdldExvY2FsSHJlZigpO1xyXG4gICAgICAgICAgICB2YXIgcG9pbnRJbmRleCA9IHVybC5sYXN0SW5kZXhPZignOicpO1xyXG4gICAgICAgICAgICB1cmwgPSB1cmwuc3Vic3RyaW5nKDAsIHBvaW50SW5kZXgrNSk7XHJcbiAgICAgICAgICAgIHVybCs9Jy9zdGF0aWMvJztcclxuICAgICAgICAgICAgcmV0dXJuIHVybCtyZXNVcmxcclxuICAgICAgICB9ZWxzZSByZXR1cm4gcmVzUm9vdCsnLycrcmVzVXJsXHJcbiAgICB9LFxyXG4gICAgZ2V0TG9jYWxIcmVmIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmKHdpbmRvdy5sb2NhdGlvbil7XHJcbiAgICAgICAgICAgIHJldHVybiB3aW5kb3cubG9jYXRpb24uaHJlZjtcclxuICAgICAgICB9ZWxzZSByZXR1cm4gJ2h0dHA6Ly8xOTIuMTY4LjAuMTA5OjgwODAnXHJcbiAgICB9LFxyXG4gICAgLy/ojrflj5blkIPnk5znvqTkvJfnmoTluqfkvY1JRFxyXG4gICAgZ2V0SWRsZVBsYXllcnNTZWF0SW5kZXggOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIC0yXHJcbiAgICB9LFxyXG4gICAgLy/ojrflj5bluoTlrrbnmoTluqfkvY3moIflj7dcclxuICAgIGdldERlYWxlclNlYXRJbmRleCA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gLTFcclxuICAgIH0sXHJcbiAgICAvL+iOt+WPluWcuuaZr+eahOWQjeWtl1xyXG4gICAgZ2V0U2NlbmVOYW1lIDogZnVuY3Rpb24gKHNjZW5lVHlwZSkge1xyXG4gICAgICAgIHZhciBzY2VuZU5hbWU7XHJcbiAgICAgICAgc3dpdGNoIChwYXJzZUludChzY2VuZVR5cGUpKXtcclxuICAgICAgICAgICAgY2FzZSBHX1RZUEUuZ2FtZU1vZHVsZS5idWxsMTAwOlxyXG4gICAgICAgICAgICAgICAgc2NlbmVOYW1lID0gJ1Bva2VyX0J1bGwxMDAnO1xyXG4gICAgICAgICAgICAgICAgYnJlYWtcclxuICAgICAgICAgICAgY2FzZSBHX1RZUEUuZ2FtZU1vZHVsZS5jbGFzc2ljOlxyXG4gICAgICAgICAgICAgICAgc2NlbmVOYW1lID0gJ1Bva2VyX2NsYXNzaWMnO1xyXG4gICAgICAgICAgICAgICAgYnJlYWtcclxuICAgICAgICAgICAgY2FzZSBHX1RZUEUuZ2FtZU1vZHVsZS5ncmFiOlxyXG4gICAgICAgICAgICAgICAgc2NlbmVOYW1lID0gJ1Bva2VyX0dyYWInO1xyXG4gICAgICAgICAgICAgICAgYnJlYWtcclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBzY2VuZU5hbWVcclxuICAgIH0sXHJcblxyXG4gICAgLy/ojrflj5bmuLjmiI/miYDlpITnmoTlubPlj7BcclxuICAgIGdldE9TIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHN3aXRjaCAoY2Muc3lzLm9zKXtcclxuICAgICAgICAgICAgY2FzZSBjYy5zeXMuT1NfQU5EUk9JRDpcclxuICAgICAgICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgICAgIGNhc2UgY2Muc3lzLk9TX0lPUzpcclxuICAgICAgICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICBicmVha1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gY2Muc3lzLm9zXHJcbiAgICB9LFxyXG4gICAgLy/ojrflj5bmtY/op4jlmajnsbvlnotcclxuICAgIGdldEJyb3dzZXJUeXBlIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHN3aXRjaCAoY2Muc3lzLmJyb3dzZXJUeXBlKXtcclxuICAgICAgICAgICAgY2FzZSBjYy5zeXMuQlJPV1NFUl9UWVBFX1FROlxyXG4gICAgICAgICAgICAgICAgYnJlYWtcclxuICAgICAgICAgICAgY2FzZSBjYy5zeXMuQlJPV1NFUl9UWVBFX1NBRkFSSTpcclxuICAgICAgICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgICAgIGNhc2UgY2Muc3lzLkJST1dTRVJfVFlQRV9BTkRST0lEOlxyXG4gICAgICAgICAgICAgICAgYnJlYWtcclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBjYy5zeXMuYnJvd3NlclR5cGVcclxuICAgIH0sXHJcblxyXG4gICAgLy/moLnmja7ov5vmiL/nsbvlnovojrflj5bov5vmuLjmiI/miL/ml7blgJnpnIDopoHnmoTor7fmsYLnsbvlnotcclxuICAgIGdldEVudGVySG9tZU1vZGVsIDogZnVuY3Rpb24gKGVudGVyVHlwZSkge1xyXG4gICAgICAgIHZhciBnYW1lVHlwZTtcclxuICAgICAgICBzd2l0Y2ggKHBhcnNlSW50KGVudGVyVHlwZSkpe1xyXG4gICAgICAgICAgICBjYXNlIEdfVFlQRS5nYW1lTW9kdWxlLmJ1bGwxMDA6XHJcbiAgICAgICAgICAgICAgICBnYW1lVHlwZSA9IEdfVFlQRS5uZXRfZ2FtZU1vZHVsZS5idWxsMTAwO1xyXG4gICAgICAgICAgICAgICAgYnJlYWtcclxuICAgICAgICAgICAgY2FzZSBHX1RZUEUuZ2FtZU1vZHVsZS5ncmFiOlxyXG4gICAgICAgICAgICAgICAgZ2FtZVR5cGUgPSBHX1RZUEUubmV0X2dhbWVNb2R1bGUuZ3JhYjtcclxuICAgICAgICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgICAgIGNhc2UgR19UWVBFLmdhbWVNb2R1bGUuY2xhc3NpYzpcclxuICAgICAgICAgICAgICAgIGdhbWVUeXBlID0gR19UWVBFLm5ldF9nYW1lTW9kdWxlLmNsYXNzaWM7XHJcbiAgICAgICAgICAgICAgICBicmVha1xyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgYnJlYWtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGdhbWVUeXBlXHJcbiAgICB9LFxyXG5cclxuICAgIC8v5Yik5a6a5piv5ZCm5piv5b6u5L+h5rWP6KeI5ZmoXHJcbiAgICBnZXRJc1dpblhpbiA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgdWEgPSB3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpO1xyXG4gICAgICAgIGlmKHVhLm1hdGNoKC9NaWNyb01lc3Nlbmdlci9pKSA9PSAnbWljcm9tZXNzZW5nZXInKXtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIGlzTnVtYmVyIDogZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICByZXR1cm4gQm9vbGVhbihPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoZGF0YSk9PT0nW29iamVjdCBOdW1iZXJdJylcclxuICAgIH0sXHJcblxyXG4gICAgLy89PT09PT09PT09PT09PT09PT09PT09PT09ICBjb29raWUgbmFtZSA9IHBva2VyX3Jvb21JbmZvXHJcblxyXG4gICAgLy/ojrflj5bkuIrmrKHnmbvpmYbnmoTlnLrmma9cclxuICAgIGdldExhc3RTY2VuZUhhc2ggOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYoY2Muc3lzLmlzTmF0aXZlKXtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBoYXNoRGF0YSA9IHRoaXMuX2dldENvb2tpZSgncG9rZXJfcm9vbUluZm8nKTtcclxuICAgICAgICAvLyB2YXIgaGFzaERhdGEgPSBkb2N1bWVudC5jb29raWU7XHJcbiAgICAgICAgaWYoIWhhc2hEYXRhKSByZXR1cm4gbnVsbDtcclxuICAgICAgICB2YXIgZGF0YSA9IHtcclxuICAgICAgICAgICAgZW50ZXJUeXBlIDogbnVsbCxcclxuICAgICAgICAgICAgcm9vbUlkIDogbnVsbFxyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgc3RyTGlzdCA9IGhhc2hEYXRhLnNwbGl0KCctJyk7XHJcbiAgICAgICAgdmFyIGVudGVyVHlwZSA9IHN0ckxpc3RbMF07XHJcbiAgICAgICAgaWYoIWVudGVyVHlwZSkgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgZGF0YS5lbnRlclR5cGUgPSBlbnRlclR5cGU7XHJcbiAgICAgICAgZGF0YS5yb29tSWQgPSBwYXJzZUludChzdHJMaXN0WzFdKTtcclxuICAgICAgICByZXR1cm4gZGF0YVxyXG4gICAgfSxcclxuICAgIC8v6K6+572u5b2T5YmN55qE5Zy65pmvXHJcbiAgICBzZXRDdXJTY2VuZUhhc2ggOiBmdW5jdGlvbiAoZW50ZXJUeXBlLCByb29tSWQpIHtcclxuICAgICAgICBpZihjYy5zeXMuaXNOYXRpdmUpe1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuX3NldENvb2tpZSgncG9rZXJfcm9vbUluZm8nLCBlbnRlclR5cGUrXCItXCIrcm9vbUlkKTtcclxuICAgIH0sXHJcbiAgICBfc2V0Q29va2llIDogZnVuY3Rpb24obmFtZSx2YWx1ZSkge1xyXG4gICAgICAgIC8vIHZhciBEYXlzID0gMC41O1xyXG4gICAgICAgIC8vIHZhciBleHAgPSBuZXcgRGF0ZSgpO1xyXG4gICAgICAgIC8vIGV4cC5zZXRUaW1lKGV4cC5nZXRUaW1lKCkgKyBEYXlzKjI0KjYwKjYwKjEwMDApO1xyXG4gICAgICAgIC8vIGRvY3VtZW50LmNvb2tpZSA9IG5hbWUgKyBcIj1cIisgZW5jb2RlVVJJICh2YWx1ZSkgKyBcIjtleHBpcmVzPVwiICsgZXhwLnRvR01UU3RyaW5nKCk7XHJcbiAgICAgICAgZG9jdW1lbnQuY29va2llID0gbmFtZSArIFwiPVwiKyBlbmNvZGVVUkkgKHZhbHVlKSArIFwiO1wiXHJcbiAgICB9LFxyXG4gICAgX2dldENvb2tpZSA6IGZ1bmN0aW9uKG5hbWUpIHtcclxuICAgICAgICB2YXIgYXJyLHJlZz1uZXcgUmVnRXhwKFwiKF58IClcIituYW1lK1wiPShbXjtdKikoO3wkKVwiKTtcclxuICAgICAgICBpZihhcnI9ZG9jdW1lbnQuY29va2llLm1hdGNoKHJlZykpXHJcbiAgICAgICAgICAgIHJldHVybiBlbmNvZGVVUklDb21wb25lbnQoYXJyWzJdKTtcclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfSxcclxuXHJcbiAgICAvLz09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuXHJcbiAgICAvL+iuvue9ruWvjOixquamnFxyXG4gICAgc2V0UmljaERhdGEgOiBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgIHRoaXMuX3JpY2hEYXRhID0ge307XHJcbiAgICAgICAgZm9yKHZhciBrZXkgaW4gZGF0YSl7XHJcbiAgICAgICAgICAgIHRoaXMuX3JpY2hEYXRhW2tleV0gPSBkYXRhW2tleV07XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIC8v6K6+572u55uI5Yip5qac5Y2VXHJcbiAgICBzZXRHYWluc0RhdGEgOiBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgIHRoaXMuX2dhaW5zRGF0YSA9IHt9O1xyXG4gICAgICAgIGZvcih2YXIga2V5IGluIGRhdGEpe1xyXG4gICAgICAgICAgICB0aGlzLl9nYWluc0RhdGFba2V5XSA9IGRhdGFba2V5XTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgLy/ojrflj5blr4zosarmppxcclxuICAgIGdldFJpY2hEYXRhIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmKEdfQ29uZmlnX2NvbW1vbi5pc0xvY2FsKXtcclxuICAgICAgICAgICAgdmFyIF9yaWNoUmFua0RhdGEgPSB7fTtcclxuICAgICAgICAgICAgX3JpY2hSYW5rRGF0YS5jb2RlID0gMTtcclxuICAgICAgICAgICAgX3JpY2hSYW5rRGF0YS5kYXRhID0gW107XHJcbiAgICAgICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCAzOyBpICsrKXtcclxuICAgICAgICAgICAgICAgIF9yaWNoUmFua0RhdGEuZGF0YS5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICBuaWNrbmFtZTonOTk3XycraSxcclxuICAgICAgICAgICAgICAgICAgICB3YWxsZXRiYWxhbmNlOjY2NyxcclxuICAgICAgICAgICAgICAgICAgICBhdmF0YXJ1cmw6JycsXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gX3JpY2hSYW5rRGF0YVxyXG4gICAgICAgIH1lbHNlIHJldHVybiB0aGlzLl9yaWNoRGF0YVxyXG4gICAgfSxcclxuICAgIC8v6I635Y+W55uI5Yip5qac5Y2VXHJcbiAgICBnZXRHYWluc0RhdGEgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYoR19Db25maWdfY29tbW9uLmlzTG9jYWwpe1xyXG4gICAgICAgICAgICB2YXIgX2dhaW5zUmFua0RhdGEgPSB7fTtcclxuICAgICAgICAgICAgX2dhaW5zUmFua0RhdGEuY29kZSA9IDE7XHJcbiAgICAgICAgICAgIF9nYWluc1JhbmtEYXRhLmRhdGEgPSBbXTtcclxuICAgICAgICAgICAgZm9yKHZhciBpID0gMDsgaSA8IDIwOyBpICsrKXtcclxuICAgICAgICAgICAgICAgIF9nYWluc1JhbmtEYXRhLmRhdGEucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgbmlja25hbWU6JzExMTEnLFxyXG4gICAgICAgICAgICAgICAgICAgIHdhbGxldGJhbGFuY2U6MzMzMyxcclxuICAgICAgICAgICAgICAgICAgICBhdmF0YXJ1cmw6JycsXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gX2dhaW5zUmFua0RhdGFcclxuICAgICAgICB9ZWxzZSByZXR1cm4gdGhpcy5fZ2FpbnNEYXRhXHJcbiAgICB9LFxyXG4gICAgLy89PT09PT09PT09PT09PT09PT09PT09XHJcblxyXG4gICAgLy/ojrflj5bmiL/pl7TliJfooajnmoRqc29u6YWN572uXHJcbiAgICBnZXRSb29tTGlzdEpzb24gOiBmdW5jdGlvbiAoY2FsbEZ1bmMpIHtcclxuICAgICAgICBpZighdGhpcy5fcm9vbUxpc3RKc29uKXtcclxuICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgICAgICAgICBzZWxmLl9yb29tTGlzdEpzb24gPSBudWxsO1xyXG4gICAgICAgICAgICBjYy5sb2FkZXIubG9hZChHX0RBVEEuZ2V0UmVzTmV0Um9vdCgnY29uZmlnL3Jvb20uZGF0YS5qc29uJyksIGZ1bmN0aW9uKGVyciwgZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgaWYoZXJyKXtcclxuXHJcbiAgICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLl9yb29tTGlzdEpzb24gPSBkYXRhO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYoY2FsbEZ1bmMpe1xyXG4gICAgICAgICAgICAgICAgICAgIGNhbGxGdW5jKHNlbGYuX3Jvb21MaXN0SnNvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FsbEZ1bmMgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gR0cucGxhdGZvcm1NZ3Iuc2hvd1Jvb21VSShzZWxmLl9yb29tUHJlZmFiTmFtZSwgZnVuY3Rpb24gKHJvb21Db21wKSB7XHJcbiAgICAgICAgICAgICAgICAvLyAgICAgaWYgKHJvb21Db21wKSB7XHJcbiAgICAgICAgICAgICAgICAvLyAgICAgICAgIHNlbGYuX2NvbXBIb21lTGlzdCA9IHJvb21Db21wO1xyXG4gICAgICAgICAgICAgICAgLy8gICAgICAgICBzZWxmLl9yZXF1ZXN0RW50ZXIoZW50ZXJUeXBlLCBpc05vRWZmZWN0KTtcclxuICAgICAgICAgICAgICAgIC8vICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIGlmKGNhbGxGdW5jKXtcclxuICAgICAgICAgICAgICAgIGNhbGxGdW5jKHRoaXMuX3Jvb21MaXN0SnNvbik7XHJcbiAgICAgICAgICAgICAgICBjYWxsRnVuYyA9IG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9LFxyXG59XHJcblxyXG53aW5kb3cuR19EQVRBID0gZ2FtZURhdGE7IiwiLy/mlbTkuKrmuLjmiI/lvIDlp4vliY3nmoTlpITnkIZcclxuXHJcbi8v5a+55bqUR19UWVBFLmdhbWVNb2R1bGVcclxudmFyIGdhbWVNb2R1bGUgPSBjYy5FbnVtKHtcclxuICAgIHBsYXRmb3JtIDogMCxcclxuICAgIGJ1bGwxMDAgOiAxLFxyXG4gICAgZ3JhYiA6IDIsXHJcbiAgICBjbGFzc2ljIDogM1xyXG59KVxyXG5cclxuY2MuQ2xhc3Moe1xyXG4gICAgZXh0ZW5kczogY2MuQ29tcG9uZW50LFxyXG5cclxuICAgIHByb3BlcnRpZXM6IHtcclxuICAgICAgICBfZ2FtZVN0YXRlIDogbnVsbCxcclxuXHJcbiAgICAgICAgbm9kZV9nYW1lU2NlbmUgOiB7XHJcbiAgICAgICAgICAgIGRlZmF1bHQgOiBudWxsLFxyXG4gICAgICAgICAgICB0eXBlIDogY2MuTm9kZSxcclxuICAgICAgICAgICAgZGlzcGxheU5hbWUgOiAn5pW05Liq5ri45oiP55qE54i25bGCJ1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZ2FtZVR5cGUgOiB7XHJcbiAgICAgICAgICAgIGRlZmF1bHQgOiAwLFxyXG4gICAgICAgICAgICB0eXBlOiBnYW1lTW9kdWxlLFxyXG4gICAgICAgICAgICBkaXNwbGF5TmFtZSA6ICfmuLjmiI/mqKHlvI8nXHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICAvLyB1c2UgdGhpcyBmb3IgaW5pdGlhbGl6YXRpb25cclxuICAgIG9uTG9hZDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8vdGhpcy5ub2RlX2dhbWVTY2VuZS5hY3RpdmUgPSBmYWxzZTtcclxuICAgICAgICAvL+S4tOaXtueahOWkhOeQhuaWueahiO+8jOWIh+aNouS4jeWQjOeahOWcuuaZr1xyXG4gICAgICAgIC8vaWYod2luZG93LkdfSW5Sb29tVHlwZSAmJiB3aW5kb3cuR19JblJvb21UeXBlICE9IHRoaXMuZ2FtZVR5cGUpe1xyXG4gICAgICAgIC8vICAgIHN3aXRjaCAod2luZG93LkdfSW5Sb29tVHlwZSl7XHJcbiAgICAgICAgLy8gICAgICAgIGNhc2UgR19UWVBFLmdhbWVNb2R1bGUuYnVsbDEwMDpcclxuICAgICAgICAvLyAgICAgICAgICAgIGNjLmRpcmVjdG9yLnByZWxvYWRTY2VuZSgnUG9rZXJfQnVsbDEwMCcsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAvLyAgICAgICAgICAgICAgICBjYy5kaXJlY3Rvci5sb2FkU2NlbmUoJ1Bva2VyX0J1bGwxMDAnKTtcclxuICAgICAgICAvLyAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIC8vICAgICAgICAgICAgYnJlYWtcclxuICAgICAgICAvLyAgICAgICAgY2FzZSBHX1RZUEUuZ2FtZU1vZHVsZS5ncmFiOlxyXG4gICAgICAgIC8vICAgICAgICAgICAgY2MuZGlyZWN0b3IucHJlbG9hZFNjZW5lKCdQb2tlcl9HcmFiJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8vICAgICAgICAgICAgICAgIGNjLmRpcmVjdG9yLmxvYWRTY2VuZSgnUG9rZXJfR3JhYicpO1xyXG4gICAgICAgIC8vICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgLy8gICAgICAgICAgICBicmVha1xyXG4gICAgICAgIC8vICAgICAgICBjYXNlIEdfVFlQRS5nYW1lTW9kdWxlLmNsYXNzaWM6XHJcbiAgICAgICAgLy8gICAgICAgICAgICBjYy5kaXJlY3Rvci5wcmVsb2FkU2NlbmUoJ1Bva2VyX2NsYXNzaWMnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgY2MuZGlyZWN0b3IubG9hZFNjZW5lKCdQb2tlcl9jbGFzc2ljJyk7XHJcbiAgICAgICAgLy8gICAgICAgICAgICB9KTtcclxuICAgICAgICAvLyAgICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgLy8gICAgICAgIGNhc2UgR19UWVBFLmdhbWVNb2R1bGUucGxhdGZvcm06XHJcbiAgICAgICAgLy8gICAgICAgICAgICBjYy5kaXJlY3Rvci5wcmVsb2FkU2NlbmUoJ1BsYXRmb3JtJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8vICAgICAgICAgICAgICAgIGNjLmRpcmVjdG9yLmxvYWRTY2VuZSgnUGxhdGZvcm0nKTtcclxuICAgICAgICAvLyAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIC8vICAgICAgICAgICAgYnJlYWtcclxuICAgICAgICAvLyAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAvLyAgICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgLy8gICAgfVxyXG4gICAgICAgIC8vICAgIHJldHVyblxyXG4gICAgICAgIC8vfVxyXG5cclxuICAgICAgICAvL+S4gOS6m+WKqOeUu+aViOaenOWcqOiEj+efqeW9ouS4i+WPkeeUn+mUmeivr1xyXG4gICAgICAgIC8vaWYgKGNjLl9yZW5kZXJUeXBlID09PSBjYy5nYW1lLlJFTkRFUl9UWVBFX0NBTlZBUykge1xyXG4gICAgICAgIC8vICAgIGNjLnJlbmRlcmVyLmVuYWJsZURpcnR5UmVnaW9uKGZhbHNlKTtcclxuICAgICAgICAvLyAgICBjYy52aWV3LmVuYWJsZVJldGluYSh0cnVlKTtcclxuICAgICAgICAvL31cclxuXHJcbiAgICAgICAgLy90aGlzLl9yZWxvYWRUYWJsZSgpO1xyXG4gICAgfSxcclxuXHJcbiAgICBfcmVsb2FkVGFibGUgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHRhYmxlcyA9IFtdO1xyXG4gICAgICAgIHN3aXRjaCAodGhpcy5nYW1lVHlwZSl7XHJcbiAgICAgICAgICAgIGNhc2UgZ2FtZU1vZHVsZS5wbGF0Zm9ybTpcclxuICAgICAgICAgICAgICAgIC8vdGFibGVzLnB1c2goR19SRVNfVVJMLmRpY3RfdGFibGVzTmFtZS5wbGF0Zm9ybUNvbmZpZyk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBnYW1lTW9kdWxlLmNsYXNzaWM6XHJcbiAgICAgICAgICAgICAgICAvL3RhYmxlcy5wdXNoKEdfUkVTX1VSTC5kaWN0X3RhYmxlc05hbWUuY2xhc3NpY0NvbmZpZyk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBnYW1lTW9kdWxlLmdyYWI6XHJcbiAgICAgICAgICAgICAgICB0YWJsZXMucHVzaChHX1JFU19VUkwuZGljdF90YWJsZXNOYW1lLmdyYWJDb25maWcpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgZ2FtZU1vZHVsZS5idWxsMTAwOlxyXG4gICAgICAgICAgICAgICAgLy90YWJsZXMucHVzaChHX1JFU19VUkwuZGljdF90YWJsZXNOYW1lLmJ1bGwxMDBDb25maWcpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgICAgdGFibGVzLnB1c2goR19SRVNfVVJMLmRpY3RfdGFibGVzTmFtZS5jb21tb25Db25maWcpO1xyXG4gICAgICAgIHRhYmxlcy5wdXNoKEdfUkVTX1VSTC5kaWN0X3RhYmxlc05hbWUuY2hpbmVzZSk7XHJcbiAgICAgICAgdGFibGVzLnB1c2goR19SRVNfVVJMLmRpY3RfdGFibGVzTmFtZS5hdWRpb05hbWUpO1xyXG4gICAgICAgIHRhYmxlcy5wdXNoKEdfUkVTX1VSTC5kaWN0X3RhYmxlc05hbWUuZ3JhYkNvbmZpZyk7XHJcbiAgICAgICAgR0cudGFibGVNZ3IucmVsb2FkVGFibGVzKHRhYmxlcywgdGhpcy5fYWRkQ29uZmlnQ2FsbEZ1bmMuYmluZCh0aGlzKSk7XHJcbiAgICB9LFxyXG5cclxuICAgIC8v5Yqg6L296YWN572u5paH5Lu257uT5p2fXHJcbiAgICBfYWRkQ29uZmlnQ2FsbEZ1bmMgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5fZ2FtZVN0YXRlID0gR19UWVBFLndlYkdhbWVTdGF0ZS5ydW5uaW5nO1xyXG5cclxuICAgICAgICAvL+e7j+WFuOeci+eJjOeahOS4u+imgemFjee9rlxyXG4gICAgICAgIHN3aXRjaCAodGhpcy5nYW1lVHlwZSl7XHJcbiAgICAgICAgICAgIGNhc2UgZ2FtZU1vZHVsZS5wbGF0Zm9ybTpcclxuICAgICAgICAgICAgICAgIC8vdmFyIHRhYmxlID0gR0cudGFibGVNZ3IuZ2V0VGFibGUoR19SRVNfVVJMLmRpY3RfdGFibGVzTmFtZS5wbGF0Zm9ybUNvbmZpZyk7XHJcbiAgICAgICAgICAgICAgICAvL2lmKHRhYmxlKSB7XHJcbiAgICAgICAgICAgICAgICAvL1xyXG4gICAgICAgICAgICAgICAgLy99XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBnYW1lTW9kdWxlLmNsYXNzaWM6XHJcbiAgICAgICAgICAgICAgICB2YXIgdGFibGUgPSBHRy50YWJsZU1nci5nZXRUYWJsZShHX1JFU19VUkwuZGljdF90YWJsZXNOYW1lLmNsYXNzaWNDb25maWcpO1xyXG4gICAgICAgICAgICAgICAgaWYodGFibGUpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZGF0YU9iaiA9IHRhYmxlLmdldEZpcnN0RGF0YSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2FkZENvbmZpZyhHX0NvbmZpZ19jbGFzc2ljLCBkYXRhT2JqKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIGdhbWVNb2R1bGUuZ3JhYjpcclxuICAgICAgICAgICAgICAgIHZhciB0YWJsZSA9IEdHLnRhYmxlTWdyLmdldFRhYmxlKEdfUkVTX1VSTC5kaWN0X3RhYmxlc05hbWUuZ3JhYkNvbmZpZyk7XHJcbiAgICAgICAgICAgICAgICBpZih0YWJsZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBkYXRhT2JqID0gdGFibGUuZ2V0Rmlyc3REYXRhKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fYWRkQ29uZmlnKEdfQ29uZmlnX2dyYWIsIGRhdGFPYmopO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgZ2FtZU1vZHVsZS5idWxsMTAwOlxyXG4gICAgICAgICAgICAgICAgdmFyIHRhYmxlID0gR0cudGFibGVNZ3IuZ2V0VGFibGUoR19SRVNfVVJMLmRpY3RfdGFibGVzTmFtZS5idWxsMTAwQ29uZmlnKTtcclxuICAgICAgICAgICAgICAgIGlmKHRhYmxlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRhdGFPYmogPSB0YWJsZS5nZXRGaXJzdERhdGEoKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9hZGRDb25maWcoR19Db25maWdfZ3JhYiwgZGF0YU9iaik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIHRhYmxlID0gR0cudGFibGVNZ3IuZ2V0VGFibGUoR19SRVNfVVJMLmRpY3RfdGFibGVzTmFtZS5jb21tb25Db25maWcpO1xyXG4gICAgICAgIGlmKHRhYmxlKSB7XHJcbiAgICAgICAgICAgIHZhciBkYXRhT2JqID0gdGFibGUuZ2V0Rmlyc3REYXRhKCk7XHJcbiAgICAgICAgICAgIHRoaXMuX2FkZENvbmZpZyhHX0NvbmZpZ19jb21tb24sIGRhdGFPYmopO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLm5vZGVfZ2FtZVNjZW5lLmFjdGl2ZSA9IHRydWU7XHJcbiAgICB9LFxyXG5cclxuICAgIC8v5aKe5Yqg6YWN572u5L+h5oGvXHJcbiAgICBfYWRkQ29uZmlnIDogZnVuY3Rpb24gKHRhcmdldE9iamVjdCwgYWRkT2JqZWN0KSB7XHJcbiAgICAgICAgaWYoYWRkT2JqZWN0KXtcclxuICAgICAgICAgICAgZm9yKHZhciBhdHRyTmFtZSBpbiBhZGRPYmplY3Qpe1xyXG4gICAgICAgICAgICAgICAgdGFyZ2V0T2JqZWN0W2F0dHJOYW1lXSA9IGFkZE9iamVjdFthdHRyTmFtZV07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIGdldEdhbWVTdGF0ZSA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZ2FtZVN0YXRlXHJcbiAgICB9LFxyXG5cclxuICAgIGdldEdhbWVUeXBlIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdhbWVUeXBlXHJcbiAgICB9LFxyXG5cclxuICAgIG9uRGVzdHJveSA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBjYy5nYW1lLm9mZihjYy5nYW1lLkVWRU5UX0hJREUsIHRoaXMuX3BhdXNlV2ViR2FtZSwgdGhpcyk7XHJcbiAgICAgICAgY2MuZ2FtZS5vZmYoY2MuZ2FtZS5FVkVOVF9TSE9XLCB0aGlzLl9yZXN1bWVXZWJHYW1lLCB0aGlzKTtcclxuICAgIH0sXHJcblxyXG4gICAgLy8gY2FsbGVkIGV2ZXJ5IGZyYW1lLCB1bmNvbW1lbnQgdGhpcyBmdW5jdGlvbiB0byBhY3RpdmF0ZSB1cGRhdGUgY2FsbGJhY2tcclxuICAgIC8vIHVwZGF0ZTogZnVuY3Rpb24gKGR0KSB7XHJcblxyXG4gICAgLy8gfSxcclxufSk7XHJcbiIsIi8v5YWo5bGA55qE5LqL5Lu255uR5ZCs5LiO5rS+6YCBXHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IGNjLkNsYXNzKHtcclxuICAgIHByb3BlcnRpZXM6IHtcclxuICAgICAgICBfZGljdF9saXN0ZW5lcnMgOiBudWxsLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/miYDmnInnm5HlkKxcclxuICAgICAgICBfbGlzdGVuZXJJbmRleCA6IG51bGwsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/nm5HlkKzntKLlvJVcclxuICAgICAgICBfbGlzdF9kZWxJbmRleCA6IG51bGwsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/lj6/nlKjnmoTntKLlvJVcclxuICAgIH0sXHJcblxyXG4gICAgLy8gdXNlIHRoaXMgZm9yIGluaXRpYWxpemF0aW9uXHJcbiAgICBjdG9yOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5fZGljdF9saXN0ZW5lcnMgPSB7fTtcclxuICAgICAgICB0aGlzLl9saXN0X2RlbEluZGV4ID0gW107XHJcbiAgICAgICAgdGhpcy5fbGlzdGVuZXJJbmRleCA9IDA7XHJcbiAgICB9LFxyXG5cclxuICAgIC8v5aKe5Yqg55uR5ZCsXHJcbiAgICByZWdpc3RlckZ1bmMgOiBmdW5jdGlvbiAoZXZlbnRUeXBlLCBjYWxsRnVuYykge1xyXG4gICAgICAgIGlmKCF0aGlzLl9kaWN0X2xpc3RlbmVyc1tldmVudFR5cGVdKSB0aGlzLl9kaWN0X2xpc3RlbmVyc1tldmVudFR5cGVdID0ge307XHJcbiAgICAgICAgdmFyIGxpc3RlbmVyTmFtZSA9IGNhbGxGdW5jLm5hbWUrJ18nK3RoaXMuX2dldExpc3RlbmVySW5kZXgoKTtcclxuICAgICAgICB0aGlzLl9kaWN0X2xpc3RlbmVyc1tldmVudFR5cGVdW2xpc3RlbmVyTmFtZV0gPSBjYWxsRnVuYztcclxuICAgICAgICByZXR1cm4gbGlzdGVuZXJOYW1lXHJcbiAgICB9LFxyXG5cclxuICAgIC8v5Y676Zmk55uR5ZCsXHJcbiAgICBkZWxMaXN0ZW4gOiBmdW5jdGlvbiAoZXZlbnRUeXBlLCBsaXN0ZW5lck5hbWUpIHtcclxuICAgICAgICBpZighdGhpcy5fZGljdF9saXN0ZW5lcnNbZXZlbnRUeXBlXSkgcmV0dXJuO1xyXG4gICAgICAgIGlmKHRoaXMuX2RpY3RfbGlzdGVuZXJzW2V2ZW50VHlwZV1bbGlzdGVuZXJOYW1lXSl7XHJcbiAgICAgICAgICAgIHRoaXMuX3doZW5DYW5jZWxMaXN0ZW5lcihsaXN0ZW5lck5hbWUpO1xyXG4gICAgICAgICAgICAvL+aciei/meS4quebkeWQrFxyXG4gICAgICAgICAgICBkZWxldGUgdGhpcy5fZGljdF9saXN0ZW5lcnNbZXZlbnRUeXBlXVtsaXN0ZW5lck5hbWVdO1xyXG4gICAgICAgICAgICBpZihPYmplY3Qua2V5cyh0aGlzLl9kaWN0X2xpc3RlbmVyc1tldmVudFR5cGVdKS5sZW5ndGggPCAxKSB0aGlzLl9kaWN0X2xpc3RlbmVyc1tldmVudFR5cGVdID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIC8v5rS+6YCB55uR5ZCs55qE5LqL5Lu2XHJcbiAgICBkaXNwYXRjaEV2ZW50RVggOiBmdW5jdGlvbiAoZXZlbnRUeXBlLCBkYXRhKSB7XHJcbiAgICAgICAgdmFyIGxpc3RlbmVyc0xpc3QgPSB0aGlzLl9kaWN0X2xpc3RlbmVyc1tldmVudFR5cGVdO1xyXG4gICAgICAgIGlmKGxpc3RlbmVyc0xpc3Qpe1xyXG4gICAgICAgICAgICAvL+WtmOWcqOebkeWQrOWvueixoVxyXG4gICAgICAgICAgICB2YXIgY2FsbEZ1bmM7XHJcbiAgICAgICAgICAgIGZvcih2YXIgbmFtZSBpbiBsaXN0ZW5lcnNMaXN0KXtcclxuICAgICAgICAgICAgICAgIGNhbGxGdW5jID0gbGlzdGVuZXJzTGlzdFtuYW1lXTtcclxuICAgICAgICAgICAgICAgIGlmKGNjLmlzVmFsaWQoY2FsbEZ1bmMpKXtcclxuICAgICAgICAgICAgICAgICAgICBjYWxsRnVuYyhuYW1lLCBkYXRhKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgX3doZW5DYW5jZWxMaXN0ZW5lciA6IGZ1bmN0aW9uIChsaXN0ZW5lck5hbWUpIHtcclxuICAgICAgICB2YXIgaW5kZXhMaXN0ID0gbGlzdGVuZXJOYW1lLnNwbGl0KCdfJyk7XHJcbiAgICAgICAgdmFyIGxpc3RlbmVySW5kZXggPSBpbmRleExpc3RbaW5kZXhMaXN0Lmxlbmd0aCAtIDFdO1xyXG4gICAgICAgIHRoaXMuX2xpc3RfZGVsSW5kZXgucHVzaChsaXN0ZW5lckluZGV4KTtcclxuICAgIH0sXHJcbiAgICAvL+iOt+WPluWPr+eUqOeahOebkeWQrOe0ouW8lVxyXG4gICAgX2dldExpc3RlbmVySW5kZXggOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYodGhpcy5fbGlzdF9kZWxJbmRleFswXSl7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9saXN0X2RlbEluZGV4LnNwbGljZSgwLDEpO1xyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICB0aGlzLl9saXN0ZW5lckluZGV4ICs9IDE7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9saXN0ZW5lckluZGV4XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbn0pO1xyXG4iLCIvL+mFjee9ruWFqOWxgOS9v+eUqOeahOeuoeeQhuWZqFxyXG52YXIgZ2cgPSBnZyB8fCB7fTtcclxud2luZG93LkdHID0gZ2c7XHJcblxyXG4vL+e7j+WFuOWvueaImOeuoeeQhuWZqFxyXG5HRy5jbGFzc2ljTWdyID0gbnVsbDtcclxuLy/lpLrlrp3lr7nmiJhcclxuR0cuZ3JhYk1nciA9IG51bGw7XHJcbi8v5aSn5Y6F566h55CGXHJcbkdHLnBsYXRmb3JtTWdyID0gbnVsbDtcclxuLy/nmb7kurrlpKfmiJjnrqHnkIZcclxuR0cuYnVsbDEwME1nciA9IG51bGw7XHJcbi8v6I635Y+W5b2T5YmN5ri45oiP55qE566h55CG5ZmoLS0tLS0tLS0tLS0tLS0tLS0tLS3mr4/mrKHmjqjlh7rlnLrmma/vvIzpnIDopoHlsIblvZPliY3nmoTlnLrmma/nrqHnkIblmajnva7nqbpcclxuR0cuZ2V0TW9kdWxlTWdyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIG1nckxpc3QgPSBbR0cuZ3JhYk1nciwgR0cuY2xhc3NpY01nciwgR0cucGxhdGZvcm1NZ3IsIEdHLmJ1bGwxMDBNZ3JdO1xyXG4gICAgZm9yKHZhciBpID0gMDsgaSA8IG1nckxpc3QubGVuZ3RoOyBpICsrKXtcclxuICAgICAgICBpZihtZ3JMaXN0W2ldKSByZXR1cm4gbWdyTGlzdFtpXTtcclxuICAgIH1cclxuICAgIHJldHVybiBudWxsO1xyXG59XHJcbkdHLmN1ck1nciA9IG51bGw7XHJcblxyXG5cclxuLy/lvLnnqpfmj5DnpLrnrqHnkIblmahcclxuR0cudGlwc01nciA9IG51bGw7XHJcbi8v5omA5pyJ6aKE5Yqg6L296LWE5rqQ566h55CGXHJcbkdHLnJlc01nciA9IG51bGw7XHJcblxyXG5cclxuLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblxyXG4vL+eOqeWutuWvueixoVxyXG5HRy5fcGxheWVyID0gbnVsbDtcclxuR0cuZ2V0UGxheWVyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgaWYoIXRoaXMuX3BsYXllcil7XHJcbiAgICAgICAgdmFyIHBsYXllciA9IHJlcXVpcmUoJ01fUGxheWVyJyk7XHJcbiAgICAgICAgdGhpcy5fcGxheWVyID0gbmV3IHBsYXllcigpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRoaXMuX3BsYXllcjtcclxufVxyXG5HRy5nZXRQbGF5ZXJJRCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHJldHVybiB0aGlzLmdldFBsYXllcigpLmdldFBsYXllcklEKCk7XHJcbn1cclxuLy/lvLHogZTnvZHnrqHnkIblmahcclxuR0cuaHR0cE1nciA9IEdHLmh0dHBNZ3IgfHwgKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgaHR0cCA9IHJlcXVpcmUoJ0hUVFBNZ3InKTtcclxuICAgICAgICByZXR1cm4gbmV3IGh0dHAoKVxyXG4gICAgfSkoKTtcclxuXHJcbi8vc29ja2V0572R57uc6K+35rGC566h55CG5ZmoXHJcbkdHLnNvY2tldE1nciA9ICBHRy5zb2NrZXRNZ3IgfHwgKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgc29ja2V0ID0gcmVxdWlyZSgnU29ja2V0TWdyJyk7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBzb2NrZXQoKVxyXG4gICAgfSkoKTtcclxuXHJcbi8v6YWN572u5paH5Lu2566h55CG5ZmoXHJcbkdHLnRhYmxlTWdyID0gIEdHLnRhYmxlTWdyIHx8IChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHRhYmxlTWdyID0gcmVxdWlyZSgnVGFibGVzTWdyJyk7XHJcbiAgICAgICAgcmV0dXJuIG5ldyB0YWJsZU1ncigpXHJcbiAgICB9KSgpO1xyXG5cclxuLy/phY3nva7mlofku7bnrqHnkIblmahcclxuR0cuYXVkaW9NZ3IgPSAgR0cuYXVkaW9NZ3IgfHwgKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgYXVkaW9NZ3IgPSByZXF1aXJlKCdBdWRpb01ncicpO1xyXG4gICAgICAgIHJldHVybiBuZXcgYXVkaW9NZ3IoKVxyXG4gICAgfSkoKTtcclxuXHJcbi8v5YWo5bGA55qE55uR5ZCs566h55CGXHJcbkdHLkxpc3RlbmVyID0gIEdHLkxpc3RlbmVyIHx8IChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIExpc3RlbmVyID0gcmVxdWlyZSgnR2xvYmFsX2xpc3RlbmVyJyk7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBMaXN0ZW5lcigpXHJcbiAgICB9KSgpO1xyXG4vL+acgOS4iumdoueahOinpuaRuOWxglxyXG5HRy50b3BUb3VjaExheWVyID0gR0cudG9wVG91Y2hMYXllciB8fCAoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciB0b3BMYXllciA9IHJlcXVpcmUoJ01fVG9wUmVxdWVzdExheWVyJyk7XHJcbiAgICAgICAgcmV0dXJuIG5ldyB0b3BMYXllcigpXHJcbiAgICB9KSgpO1xyXG5cclxuLy/otYTmupDnrqHnkIblmahcclxuR0cucmVzTWdyID0gR0cucmVzTWdyIHx8IChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIG1nciA9IHJlcXVpcmUoJ1JlbG9hZFJlc01ncicpO1xyXG4gICAgICAgIHJldHVybiBuZXcgbWdyKClcclxuICAgIH0pKClcclxuXHJcbi8vc29ja2V05pWw5o2u6K+35rGC566h55CG5ZmoXHJcbkdHLnNfcmVxdWVzdE1nciA9IEdHLnNfcmVxdWVzdE1nciB8fCAoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBtZ3IgPSByZXF1aXJlKCdTb2NrZXRSZXF1ZXN0TWdyJyk7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBtZ3IoKVxyXG4gICAgfSkoKVxyXG5cclxuLy93ZWLnm7jlhbPmk43kvZxcclxuR0cud2ViSGFuZGxlciA9IEdHLndlYkhhbmRsZXIgfHwgKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgaGFuZGxlciA9IHJlcXVpcmUoJ1dlYk1vYmlsZV9oYW5kbGVyJyk7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBoYW5kbGVyKCk7XHJcbiAgICB9KSgpXHJcblxyXG4vLz09PT09PT09PT09PT09PT09PT09PT09PT1cclxuXHJcbi8v5b2T5YmN55qE5ri45oiP54q25oCBXHJcbkdHLmdldEdhbWVTdGF0ZSA9IGZ1bmN0aW9uKCl7XHJcbiAgICByZXR1cm4gdGhpcy5fZ2FtZVN0YXRlXHJcbn1cclxuXHJcbi8v5b2T5YmN55qE5ri45oiP5qih5byPXHJcbkdHLmdldEdhbWVUeXBlID0gZnVuY3Rpb24oKXtcclxuICAgIHZhciBjYW52YXMgPSBjYy5maW5kKCdDYW52YXMnKTtcclxuICAgIGlmKGNhbnZhcyl7XHJcbiAgICAgICAgdmFyIHN0YXJ0Q29tcCA9IGNhbnZhcy5nZXRDb21wb25lbnQoJ0dhbWVTdGFydCcpO1xyXG4gICAgICAgIGlmKHN0YXJ0Q29tcCl7XHJcbiAgICAgICAgICAgIHJldHVybiBzdGFydENvbXAuZ2V0R2FtZVR5cGUoKVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBudWxsXHJcbn1cclxuXHJcbi8v6YCA5Ye66LWb5LqL5omA5Zyo55qE5oi/6Ze0XHJcbkdHLmV4aXRIb21lID0gZnVuY3Rpb24gKCkge1xyXG4gICAgLy/pnIDopoHlop7liqDkuIDkuKrmraPlnKjpgIDlh7rnmoTpgLvovpHvvIznu5nph4rmlL7nvJPlrZjkuIDlrprnmoTml7bpl7RcclxuICAgIHZhciBkYXRhT2JqID0ge1xyXG4gICAgICAgIGdhbWVUeXBlIDogdGhpcy5nZXRHYW1lVHlwZSgpLFxyXG4gICAgfVxyXG4gICAgdGhpcy5nZXRQbGF5ZXIoKS5zZXRPdXRIb21lRGF0YShkYXRhT2JqKTtcclxuICAgIEdfREFUQS5zZXRDdXJTY2VuZUhhc2goJycsMCk7XHJcbiAgICBHRy5jaGFuZ2VTY2VuZShHX1RZUEUuc2NlbmVOYW1lLnBsYXRmb3JtKTtcclxufVxyXG5cclxuLy/pgIDlh7rmuLjmiI9cclxuR0cuZXhpdEdhbWUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICBHRy5odHRwTWdyLnNlbmRIdHRwUmVxdWVzdChHX0RJQUxPR19VUkwubG9nb3V0LCBudWxsLCBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgIGlmKGRhdGEpe1xyXG4gICAgICAgICAgICBjYy5kaXJlY3Rvci5lbmQoKTtcclxuICAgICAgICAgICAgbG9jYXRpb24ucmVwbGFjZShsb2NhdGlvbi5ocmVmKVxyXG4gICAgICAgIH1cclxuICAgIH0uYmluZCh0aGlzKSk7XHJcbn1cclxuXHJcbi8v5Yqg6L295Zy65pmvXHJcbkdHLmNoYW5nZVNjZW5lID0gZnVuY3Rpb24gKHNjZW5lTmFtZSkge1xyXG4gICAgR0cuZ2V0UGxheWVyKCkuc2V0UmVsb2FkU2NlbmVJbmZvKHtcclxuICAgICAgICBzY2VuZU5hbWUgOiBzY2VuZU5hbWVcclxuICAgIH0pO1xyXG4gICAgY2MuZGlyZWN0b3IucHJlbG9hZFNjZW5lKCdJbkhvbWVMb2FkaW5nJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGNjLmRpcmVjdG9yLmxvYWRTY2VuZSgnSW5Ib21lTG9hZGluZycpO1xyXG4gICAgfSk7XHJcbn07XHJcblxyXG4vL+WPkei1t+aYr+WQpumHjei/nueahOivt+axgjsgY2FsbEZ1bmMgOiDngrnlh7vnoa7lrprlkI7nmoTlm57osINcclxuR0cuc2hvd1JlY29ubmVjdCA9IGZ1bmN0aW9uIChjYWxsRnVuYykge1xyXG4gICAgaWYoR0cudGlwc01ncil7XHJcbiAgICAgICAgdmFyIHRhYmxlRGF0YSA9IEdfREFUQS5nZXRDaGluZXNlKDYyKTtcclxuICAgICAgICBHRy50aXBzTWdyLnNob3dDb25maXJtVGlwX1RXTyh0YWJsZURhdGEuY29udGVudCwgY2FsbEZ1bmMsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgLy/nm7TmjqXlhbPpl63muLjmiI9cclxuICAgICAgICAgICAgY2MuZGlyZWN0b3IuZW5kKCk7XHJcbiAgICAgICAgICAgIGxvY2F0aW9uLnJlcGxhY2UobG9jYXRpb24uaHJlZilcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxyXG5cclxuLy/mmK/lkKbmraPlnKjliqDovb3kuK1cclxuR0cuZ2V0SXNMb2FkaW5nID0gZnVuY3Rpb24gKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2lzTG9hZGluZ1xyXG59XHJcbi8v5q2j5Zyo5Yqg6L295LitXHJcbkdHLnNldElzTG9hZGluZyA9IGZ1bmN0aW9uIChpc0xvYWRpbmcpIHtcclxuICAgIHRoaXMuX2lzTG9hZGluZyA9IGlzTG9hZGluZztcclxufVxyXG4vL+eZu+mZhnNvY2tldFxyXG5HRy5sb2dpblNvY2tldCA9IGZ1bmN0aW9uIChmdW5jKSB7XHJcbiAgICAvL+eZu+mZhnNvY2tldFxyXG4gICAgR0cuc29ja2V0TWdyLlNlbmRNc2coTmV0VHlwZS5zX2xvZ2luLHtcclxuICAgICAgICB0b2tlbiA6IEdHLmdldFBsYXllcigpLmdldFBsYXllclRva2VuKCksXHJcbiAgICAgICAgdXNlcklkIDogR0cuZ2V0UGxheWVyKCkuZ2V0VUlEKClcclxuICAgIH0sIGZ1bmMpO1xyXG59O1xyXG5cclxuR0cuX2lzRmlyc3RFbnRlclBsYXRmb3JtID0gdHJ1ZTtcclxuR0cuX2dhbWVTdGF0ZSA9IG51bGw7Ly/muLjmiI/mmoLlgZzlkozlvIDlp4vnmoTnirbmgIFcclxuLy/liJrnmbvpmYblkI7nmoTlpITnkIZcclxuR0cud2hlbkdhbWVTdGFydCA9IGZ1bmN0aW9uIChjYWxsQmFjaykge1xyXG4gICAgaWYoIUdHLl9pc0ZpcnN0RW50ZXJQbGF0Zm9ybSkgcmV0dXJuIGZhbHNlO1xyXG4gICAgY2MuZ2FtZS5jb25maWcuc2hvd0ZQUyA9IGZhbHNlO1xyXG4gICAgLy/liJ3mrKHov5vlhaXmuLjmiI9cclxuICAgIEdHLl9pc0ZpcnN0RW50ZXJQbGF0Zm9ybSA9IGZhbHNlO1xyXG4gICAgLy/oh6rnlLHml4vovaxcclxuICAgIC8vIGNjLnZpZXcuc2V0T3JpZW50YXRpb24oY2MubWFjcm8uT1JJRU5UQVRJT05fQVVUTyk7XHJcbiAgICAvL+WinuWKoOa4uOaIj+aaguWBnOWSjOW8gOWni+eahOebkeWQrFxyXG4gICAgdGhpcy5fZ2FtZVN0YXRlID0gR19UWVBFLndlYkdhbWVTdGF0ZS5ydW5uaW5nO1xyXG4gICAgaWYoIWNjLnN5cy5pc05hdGl2ZSAmJiBkb2N1bWVudCl7XHJcbiAgICAgICAgR0cud2ViSGFuZGxlci5nYW1lU3RhcnQoKTtcclxuICAgIH1lbHNle1xyXG4gICAgICAgIGNjLmdhbWUub24oY2MuZ2FtZS5FVkVOVF9ISURFLCB0aGlzLl9wYXVzZVdlYkdhbWUsIHRoaXMpO1xyXG4gICAgICAgIGNjLmdhbWUub24oY2MuZ2FtZS5FVkVOVF9TSE9XLCB0aGlzLl9yZXN1bWVXZWJHYW1lLCB0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICAvL+WKoOi9veihqOagvOmFjee9rlxyXG4gICAgdmFyIHRhYmxlcyA9IFtdO1xyXG4gICAgdGFibGVzLnB1c2goR19SRVNfVVJMLmRpY3RfdGFibGVzTmFtZS5jb21tb25Db25maWcpO1xyXG4gICAgdGFibGVzLnB1c2goR19SRVNfVVJMLmRpY3RfdGFibGVzTmFtZS5jaGluZXNlKTtcclxuICAgIHRhYmxlcy5wdXNoKEdfUkVTX1VSTC5kaWN0X3RhYmxlc05hbWUuYXVkaW9OYW1lKTtcclxuICAgIHRhYmxlcy5wdXNoKEdfUkVTX1VSTC5kaWN0X3RhYmxlc05hbWUuZ3JhYkNvbmZpZyk7XHJcbiAgICBHRy50YWJsZU1nci5yZWxvYWRUYWJsZXModGFibGVzLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgLy/liqDovb3pn7PmlYjphY3nva5cclxuICAgICAgICBHRy5hdWRpb01nci5yZWxvYWRQbGF0Zm9ybUF1ZGlvKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYoY2FsbEJhY2spe1xyXG4gICAgICAgICAgICAgICAgY2FsbEJhY2soKTtcclxuICAgICAgICAgICAgICAgIGNhbGxCYWNrID0gbnVsbDtcclxuXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gY2MuZ2FtZS5zZXRGcmFtZVJhdGUoNDkpO1xyXG4gICAgcmV0dXJuIHRydWVcclxufVxyXG5HRy5fcGF1c2VXZWJHYW1lID0gZnVuY3Rpb24gKCkge1xyXG4gICAgaWYodGhpcy5fZ2FtZVN0YXRlID09IEdfVFlQRS53ZWJHYW1lU3RhdGUucGF1c2UpIHJldHVybjtcclxuICAgIHRoaXMuX2dhbWVTdGF0ZSA9IEdfVFlQRS53ZWJHYW1lU3RhdGUucGF1c2U7XHJcbiAgICAvL2NjLkF1ZGlvLnVzZVdlYkF1ZGlvID0gdHJ1ZVxyXG4gICAgY2MuYXVkaW9FbmdpbmUucGF1c2VBbGwoKTtcclxuICAgIEdHLmF1ZGlvTWdyLnN0b3BNdXNpYygpO1xyXG4gICAgdmFyIG1nciA9IEdHLmN1ck1ncjtcclxuICAgIGlmKG1nciAmJiBtZ3Iud2hlblBhdXNlR2FtZSl7XHJcbiAgICAgICAgbWdyLndoZW5QYXVzZUdhbWUoKTtcclxuICAgIH1cclxuICAgIGNjLnN5cy5nYXJiYWdlQ29sbGVjdCgpO1xyXG59O1xyXG5HRy5fcmVzdW1lV2ViR2FtZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgIGlmKHRoaXMuX2dhbWVTdGF0ZSA9PSBHX1RZUEUud2ViR2FtZVN0YXRlLnJ1bm5pbmcpIHJldHVybjtcclxuICAgIHRoaXMuX2dhbWVTdGF0ZSA9IEdfVFlQRS53ZWJHYW1lU3RhdGUucnVubmluZztcclxuICAgIGNjLmF1ZGlvRW5naW5lLnJlc3VtZUFsbCgpO1xyXG4gICAgR0cuYXVkaW9NZ3IucGxheU11c2ljKCk7XHJcbiAgICB2YXIgbWdyID0gR0cuY3VyTWdyO1xyXG4gICAgaWYobWdyICYmIG1nci53aGVuUmVzdW1lR2FtZSl7XHJcbiAgICAgICAgbWdyLndoZW5SZXN1bWVHYW1lKCk7XHJcbiAgICB9XHJcbiAgICBHRy5zb2NrZXRNZ3IucGFyc2VQYXVzZUluZm8oKTtcclxufTsiLCIvL+aKvOWuneezu+e7n+eahOeuoeeQhlxyXG5cclxuY2MuQ2xhc3Moe1xyXG4gICAgZXh0ZW5kczogcmVxdWlyZSgnQmFzZU1hbmFnZXInKSxcclxuXHJcbiAgICBwcm9wZXJ0aWVzOiB7XHJcbiAgICAgICAgX2dhbWVTdGF0ZSA6IG51bGwsXHJcblxyXG4gICAgICAgIC8vZGF0YVxyXG4gICAgICAgIF9saXN0X3dpblJlc3VsdCA6IG51bGwsXHJcbiAgICAgICAgX21heEJldHRpbmdHb2xkIDogbnVsbCxcclxuICAgICAgICBfaG9tZUlEIDogbnVsbCwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v6K+l5oi/6Ze055qESURcclxuICAgICAgICBfbWF4QmV0dGluZ1RpbWVzIDogbnVsbCwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/mnIDlpKfmipXms6jmrKHmlbBcclxuICAgICAgICBfbGlzdF9wb2tlckluZGV4IDogbnVsbCwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/mnKzlsYDmiYDmnInljaHniYznmoTntKLlvJVcclxuICAgICAgICBfbWF0Y2hJRCA6IG51bGwsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v6LWb5LqLSURcclxuICAgICAgICBfcGxheWVySUQgOiBudWxsLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v546p5a626Ieq5bex55qESURcclxuICAgICAgICBfbmV4dFN0YXJ0VGltZSA6IG51bGwsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5LiL5qyh6LWb5LqL5byA5aeL55qE5pe26Ze05oizXHJcbiAgICAgICAgX2N1ckVuZEdyYWJUaW1lIDogbnVsbCwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+W9k+WJjeWxgOaKleazqOe7k+adn+aXtumXtFxyXG4gICAgICAgIF9lbnRlckhvbWVEYXRhIDogbnVsbCwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/ov5vmiL/kv6Hmga9cclxuICAgICAgICBfaWRsZVRpcCA6IG51bGwsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+aPkOekuuS8keaBr+S4reeahHRpcFxyXG4gICAgICAgIF9ncmFiVGlwIDogbnVsbCwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5o+Q56S65oqV5rOo5Lit55qEdGlwXHJcbiAgICAgICAgX2lzUGF1c2VPdmVyTWF0Y2ggOiBudWxsLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+aaguWBnOeahOaXtuWAmeaYr+WQpui/m+WFpeaWsOeahOS4gOWxgFxyXG4gICAgICAgIF9kaWN0X2lkbGVCZXR0aW5nIDogbnVsbCwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/lkIPnk5znvqTkvJfnmoTmipXms6jorrDlvZVcclxuXHJcbiAgICAgICAgY29tcF90b3BMYXllciA6IHtcclxuICAgICAgICAgICAgZGVmYXVsdCA6IG51bGwsXHJcbiAgICAgICAgICAgIHR5cGUgOiByZXF1aXJlKCdHcmFiX3RvcExheWVyJyksXHJcbiAgICAgICAgICAgIGRpc3BsYXlOYW1lIDogJ+mhtumDqOWxgidcclxuICAgICAgICB9LFxyXG4gICAgICAgIGNvbXBfZ29sZENvbnRhaW5lciA6IHtcclxuICAgICAgICAgICAgZGVmYXVsdCA6IG51bGwsXHJcbiAgICAgICAgICAgIHR5cGUgOiByZXF1aXJlKCdHcmFiX2dvbGRDb250YWluZXInKSxcclxuICAgICAgICAgICAgZGlzcGxheU5hbWUgOiAn6YeR5biB5a655ZmoJ1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgY29tcF9wbGF5ZXJzQ29udGFpbmVyIDoge1xyXG4gICAgICAgICAgICBkZWZhdWx0IDogbnVsbCxcclxuICAgICAgICAgICAgdHlwZSA6IHJlcXVpcmUoJ0dyYWJfcGxheWVyc0xheWVyJyksXHJcbiAgICAgICAgICAgIGRpc3BsYXlOYW1lIDogJ+eOqeWutuWuueWZqCdcclxuICAgICAgICB9LFxyXG4gICAgICAgIGNvbXBfYnRuc0NvbnRhaW5lciA6IHtcclxuICAgICAgICAgICAgZGVmYXVsdCA6IG51bGwsXHJcbiAgICAgICAgICAgIHR5cGUgOiByZXF1aXJlKCdHcmFiX2J0bkNvbnRhaW5lcicpLFxyXG4gICAgICAgICAgICBkaXNwbGF5TmFtZSA6ICflupXpg6jmjInpkq4nXHJcbiAgICAgICAgfSxcclxuICAgICAgICBjb21wX3RhYmxlc0NvbnRhaW5lciA6IHtcclxuICAgICAgICAgICAgZGVmYXVsdCA6IG51bGwsXHJcbiAgICAgICAgICAgIHR5cGUgOiByZXF1aXJlKCdHcmFiX3RhYmxlc0xheWVyJyksXHJcbiAgICAgICAgICAgIGRpc3BsYXlOYW1lIDogJ+WOi+S9j+agvOWtkOWxgidcclxuICAgICAgICB9LFxyXG4gICAgICAgIGNvbXBfcG9rZXJzTGF5ZXIgOiB7XHJcbiAgICAgICAgICAgIGRlZmF1bHQgOiBudWxsLFxyXG4gICAgICAgICAgICB0eXBlIDogcmVxdWlyZSgnR3JhYl9wb2tlckxheWVyJyksXHJcbiAgICAgICAgICAgIGRpc3BsYXlOYW1lIDogJ+WNoeeJjOWxgidcclxuICAgICAgICB9LFxyXG4gICAgICAgIGNvbXBfdWlMYXllciA6IHtcclxuICAgICAgICAgICAgZGVmYXVsdCA6IG51bGwsXHJcbiAgICAgICAgICAgIHR5cGUgOiByZXF1aXJlKCdPYmpfdWlDb250YWluZXInKSxcclxuICAgICAgICAgICAgZGlzcGxheU5hbWUgOiAn56qX5Y+jVUnlsYInXHJcbiAgICAgICAgfSxcclxuICAgICAgICBsYWJlbF9iZXR0aW5nVGltZXMgOiB7XHJcbiAgICAgICAgICAgIGRlZmF1bHQgOiBudWxsLFxyXG4gICAgICAgICAgICB0eXBlIDogY2MuTGFiZWwsXHJcbiAgICAgICAgICAgIGRpc3BsYXlOYW1lIDogJ+aKleazqOasoeaVsCdcclxuICAgICAgICB9LFxyXG4gICAgICAgIG5vZGVfZGl5VGlwIDoge1xyXG4gICAgICAgICAgICBkZWZhdWx0IDogbnVsbCxcclxuICAgICAgICAgICAgdHlwZSA6IGNjLk5vZGUsXHJcbiAgICAgICAgICAgIGRpc3BsYXlOYW1lIDogJ3RpcCdcclxuICAgICAgICB9LFxyXG4gICAgfSxcclxuXHJcbiAgICAvLyB1c2UgdGhpcyBmb3IgaW5pdGlhbGl6YXRpb25cclxuICAgIG9uTG9hZDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIEdHLmdyYWJNZ3IgPSB0aGlzO1xyXG4gICAgICAgIHRoaXMuX3N1cGVyKCk7XHJcblxyXG4gICAgICAgIHRoaXMuX2xpc3RfcG9rZXJJbmRleCA9IFtdO1xyXG4gICAgICAgIHRoaXMuX2xpc3Rfd2luUmVzdWx0ID0gW107XHJcbiAgICAgICAgdGhpcy5faXNQYXVzZU92ZXJNYXRjaCA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5fYmV0dGluZ1RpbWVzU3RyID0gR19DSElORVNFLmxpbWl0QmV0dGluZztcclxuICAgICAgICB0aGlzLmNvbXBfdG9wRWZmZWN0ID0gdGhpcy5jb21wX3RvcExheWVyLmdldFRvcEVmZmVjdCgpO1xyXG4gICAgfSxcclxuXHJcbiAgICBzdGFydCA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBHRy50aXBzTWdyLnNldFRleHRUaXAodGhpcy5ub2RlX2RpeVRpcC5nZXRDb21wb25lbnQoJ09ial90eHRUaXAnKSk7XHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ+a4uOaIj+eJiOacrCcrR19Db25maWdfY29tbW9uLnZlcnNpb24pXHJcbiAgICAgICAgaWYoR19Db25maWdfY29tbW9uLmlzTG9jYWwpe1xyXG5cclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgdGhpcy5hZGRMb25nTGlzdGVuT25TdGFydCgpO1xyXG5cclxuICAgICAgICAgICAgdmFyIGhvbWVEYXRhID0gR0cuZ2V0UGxheWVyKCkuZ2V0SW5Ib21lRGF0YSgpO1xyXG4gICAgICAgICAgICBpZihob21lRGF0YSl7XHJcbiAgICAgICAgICAgICAgICBpZihob21lRGF0YS5uZXRfcmVzZXRIb21lRGF0YSl7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fZGVhbEluSG9tZU5ldERhdGEoaG9tZURhdGEubmV0X2luSG9tZURhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlRW50ZXJIb21lRGF0YShob21lRGF0YS5uZXRfcmVzZXRIb21lRGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoSG9tZSgpO1xyXG4gICAgICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5uZXRfc2V0SG9tZURhdGEoaG9tZURhdGEubmV0X2luSG9tZURhdGEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICAvLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Pea4uOaIj+a1geeoi1xyXG5cclxuICAgIHJlc2V0U2hvdyA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLm5vZGUuc3RvcEFsbEFjdGlvbnMoKTtcclxuICAgICAgICB0aGlzLmNvbXBfcG9rZXJzTGF5ZXIuc2V0U3RhcnRJbmZvKHRoaXMuY29tcF9idG5zQ29udGFpbmVyLmdldFdoZWVsUG9zKCksIHRoaXMuY29tcF9wbGF5ZXJzQ29udGFpbmVyLmdldFBva2VyUG9zKCkpO1xyXG5cclxuICAgICAgICAvL+aaguWBnOeahOaXtuWAmeWmguaenOW3sue7j+mHjeaWsOW8gOWxgFxyXG4gICAgICAgIGlmKHRoaXMuX2lzUGF1c2VPdmVyTWF0Y2gpe1xyXG4gICAgICAgICAgICB0aGlzLl9saXN0X3Bva2VySW5kZXggPSBbXTtcclxuICAgICAgICAgICAgdGhpcy5fbGlzdF93aW5SZXN1bHQgPSBbXTtcclxuICAgICAgICAgICAgLy/ljaHniYxcclxuICAgICAgICAgICAgdGhpcy5jb21wX3Bva2Vyc0xheWVyLmNsZWFyRGF0YSgpO1xyXG4gICAgICAgICAgICAvL+eCueWHu+WMuuWfn1xyXG4gICAgICAgICAgICB0aGlzLmNvbXBfdGFibGVzQ29udGFpbmVyLmNsZWFyRGF0YSgpO1xyXG4gICAgICAgICAgICAvL+emgeeUqOeCueWHu1xyXG4gICAgICAgICAgICB0aGlzLmNvbXBfdGFibGVzQ29udGFpbmVyLnNldFRvdWNoRW5hYmxlKGZhbHNlKTtcclxuICAgICAgICAgICAgLy/muIXnkIblkIPnk5znvqTkvJfmipXms6jkv6Hmga9cclxuICAgICAgICAgICAgdGhpcy5fZGljdF9pZGxlQmV0dGluZyA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuX2lzUGF1c2VPdmVyTWF0Y2ggPSB0cnVlO1xyXG4gICAgICAgIC8v6L+Q5Yqo55qE6YeR5biBXHJcbiAgICAgICAgdGhpcy5jb21wX2dvbGRDb250YWluZXIuY2xlYXJBbGwoKTtcclxuICAgICAgICAvL+eOqeWutlxyXG4gICAgICAgIHRoaXMuY29tcF9wbGF5ZXJzQ29udGFpbmVyLmNsZWFyRGF0YSgpO1xyXG4gICAgICAgIC8v5bqV6YOo5oyJ6ZKuXHJcbiAgICAgICAgdGhpcy5jb21wX2J0bnNDb250YWluZXIuc2V0QnRuR3JvdXBFbmFibGUoZmFsc2UpO1xyXG4gICAgICAgIC8v54m55pWIXHJcbiAgICAgICAgdGhpcy5jb21wX3RvcEVmZmVjdC5jbGVhckFsbCgpO1xyXG4gICAgfSxcclxuXHJcbiAgICBvbl9XYWl0IDogZnVuY3Rpb24gKHdhaXRUaW1lLCBjYWxsRnVuYykge1xyXG4gICAgICAgIHRoaXMuc2V0R2FtZVN0YXRlKEdfVFlQRS5ncmFiU3RhdGUud2FpdCk7XHJcbiAgICAgICAgaWYodGhpcy5fZ3JhYlRpcCAmJiB0aGlzLl9ncmFiVGlwLmdldElzU2hvdygpKXtcclxuICAgICAgICAgICAgdGhpcy5fZ3JhYlRpcC5mb3JjZUVuZCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgdGltZTEgPSBuZXcgRGF0ZShHRy5zb2NrZXRNZ3IuZ2V0U2VydmVyVGltZSgpKTtcclxuICAgICAgICAvL2NvbnNvbGUubG9nKCflvZPliY3vvJrml7Y6Jyt0aW1lMS5nZXRIb3VycygpKyfliIY6Jyt0aW1lMS5nZXRNaW51dGVzKCkrJ+enkjonK3RpbWUxLmdldFNlY29uZHMoKSlcclxuICAgICAgICB2YXIgdGltZTIgPSBuZXcgRGF0ZSh0aGlzLl9uZXh0U3RhcnRUaW1lKTtcclxuICAgICAgICAvL2NvbnNvbGUubG9nKCfkuIvmrKHlvIDlsYDvvJrml7Y6Jyt0aW1lMi5nZXRIb3VycygpKyfliIY6Jyt0aW1lMi5nZXRNaW51dGVzKCkrJ+enkjonK3RpbWUyLmdldFNlY29uZHMoKSlcclxuICAgICAgICBpZih0aGlzLl9pZGxlVGlwICYmIHRoaXMuX2lkbGVUaXAuZ2V0SXNTaG93KCkpIHtcclxuICAgICAgICAgICAgLy/lt7Lnu4/lrZjlnKjor6V0aXBcclxuICAgICAgICAgICAgLy92YXIgc2VydmVyVGltZSA9IEdHLnNvY2tldE1nci5nZXRTZXJ2ZXJUaW1lKCk7XHJcbiAgICAgICAgICAgIC8vdmFyIHNlY3MgPSB0aGlzLl9nZXRPZmZTZWNvbmRzKHNlcnZlclRpbWUsIHRoaXMuX25leHRTdGFydFRpbWUpO1xyXG4gICAgICAgICAgICB0aGlzLl9pZGxlVGlwLmZvcmNlQ2hhbmdlQ291bnREb3duKHdhaXRUaW1lKTtcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgdmFyIGRhdGFPYmogPSB7XHJcbiAgICAgICAgICAgICAgICB0aXBJbmRleCA6IDE5LFxyXG4gICAgICAgICAgICAgICAgaXNDb3VudERvd24gOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgc2hvd1BvcyA6IHRoaXMubm9kZV9kaXlUaXAucG9zaXRpb24sXHJcbiAgICAgICAgICAgICAgICBjYWxsQmFjayA6IG51bGxcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBkYXRhT2JqLnJldGFpblRpbWUgPSB3YWl0VGltZTtcclxuICAgICAgICAgICAgaWYoY2FsbEZ1bmMpIGRhdGFPYmouY2FsbEJhY2sgPSBjYWxsRnVuYztcclxuICAgICAgICAgICAgdGhpcy5faWRsZVRpcCA9IEdHLnRpcHNNZ3Iuc2hvd09ubHlPbmUoZGF0YU9iaik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuX2NsZWFyQnlXYWl0KCk7XHJcbiAgICB9LFxyXG5cclxuICAgIG9uX2JlZm9yZVN0YXJ0IDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuc2V0R2FtZVN0YXRlKEdfVFlQRS5ncmFiU3RhdGUucmVhZHlTdGFydCk7XHJcbiAgICAgICAgdGhpcy5jb21wX3RvcEVmZmVjdC5wbGF5R2FtZVN0YXJ0QW5pKHRoaXMub25fc3RhcnRUb3VjaFRhYmxlcy5iaW5kKHRoaXMpKTtcclxuICAgICAgICB0aGlzLm9uX2dpdmVPbmVQb2tlcigpO1xyXG4gICAgfSxcclxuXHJcbiAgICBvbl9naXZlT25lUG9rZXIgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5zZXRHYW1lU3RhdGUoR19UWVBFLmdyYWJTdGF0ZS5naXZlUG9rZXIpXHJcblxyXG4gICAgICAgIC8vdGhpcy5jb21wX3Bva2Vyc0xheWVyLmFkZFBva2Vycyhbe1xyXG4gICAgICAgIC8vICAgIHBva2VySW5kZXggOiB0aGlzLl9saXN0X3Bva2VySW5kZXhbMF0sXHJcbiAgICAgICAgLy8gICAgaXNPcGVuIDogdHJ1ZVxyXG4gICAgICAgIC8vfV0sIHRoaXMuX2xpc3Rfd2luUmVzdWx0WzBdKTtcclxuXHJcbiAgICAgICAgdmFyIHBva2VyRGF0YSA9IEdfT0JKLmRhdGFfZ3JhYlBva2VySW5mbygpO1xyXG4gICAgICAgIHBva2VyRGF0YS5wb2tlckluZm9MaXN0ID0gW3tcclxuICAgICAgICAgICAgcG9rZXJJbmRleCA6IHRoaXMuX2xpc3RfcG9rZXJJbmRleFswXSxcclxuICAgICAgICAgICAgaXNPcGVuIDogdHJ1ZVxyXG4gICAgICAgIH1dXHJcbiAgICAgICAgcG9rZXJEYXRhLnN0YXJ0UG9rZXJJbmRleCA9IDE7XHJcbiAgICAgICAgcG9rZXJEYXRhLnBva2VyUmVzdWx0ID0gdGhpcy5fbGlzdF93aW5SZXN1bHRbMF07XHJcbiAgICAgICAgcG9rZXJEYXRhLmlzRmx5RWZmZWN0ID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgdGhpcy5jb21wX3Bva2Vyc0xheWVyLnNob3dQb2tlckVYKHBva2VyRGF0YSk7XHJcbiAgICB9LFxyXG5cclxuICAgIC8vb25fYmVmb3JlVG91Y2hUYWJsZSA6IGZ1bmN0aW9uICgpIHtcclxuICAgIC8vICAgIHRoaXMuc2V0R2FtZVN0YXRlKEdfVFlQRS5ncmFiU3RhdGUucmVhZHlUb3VjaFRhYmxlKVxyXG4gICAgLy8gICAgdGhpcy5jb21wX3RvcEVmZmVjdC5wbGF5VG91Y2hTdGFydEFuaSh0aGlzLm9uX3N0YXJ0VG91Y2hUYWJsZXMuYmluZCh0aGlzKSk7XHJcbiAgICAvL30sXHJcblxyXG4gICAgb25fc3RhcnRUb3VjaFRhYmxlcyA6IGZ1bmN0aW9uIChyZXRhaW5UaW1lKSB7XHJcbiAgICAgICAgdGhpcy5zZXRHYW1lU3RhdGUoR19UWVBFLmdyYWJTdGF0ZS50b3VjaFRhYmxlcylcclxuICAgICAgICBpZih0aGlzLl9pZGxlVGlwICYmIHRoaXMuX2lkbGVUaXAuZ2V0SXNTaG93KCkpe1xyXG4gICAgICAgICAgICB0aGlzLl9pZGxlVGlwLmZvcmNlRW5kKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuY29tcF90YWJsZXNDb250YWluZXIuc2V0VG91Y2hFbmFibGUodHJ1ZSk7XHJcbiAgICAgICAgdGhpcy5jb21wX2J0bnNDb250YWluZXIucmVmcmVzaEdyYWJPcHRpb24oKTtcclxuICAgICAgICBpZih0aGlzLl9ncmFiVGlwICYmIHRoaXMuX2dyYWJUaXAuZ2V0SXNTaG93KCkpIHtcclxuICAgICAgICAgICAgdGhpcy5fZ3JhYlRpcC5mb3JjZUNoYW5nZUNvdW50RG93bihyZXRhaW5UaW1lKTtcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgdmFyIHNlY3M7XHJcbiAgICAgICAgICAgIHZhciBkYXRhT2JqID0ge1xyXG4gICAgICAgICAgICAgICAgdGlwSW5kZXggOiAxOCxcclxuICAgICAgICAgICAgICAgIHNob3dQb3MgOiB0aGlzLm5vZGVfZGl5VGlwLnBvc2l0aW9uLFxyXG4gICAgICAgICAgICAgICAgaXNDb3VudERvd24gOiB0cnVlXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYoR19Db25maWdfY29tbW9uLmlzTG9jYWwpe1xyXG4gICAgICAgICAgICAgICAgc2VjcyA9IDY7XHJcbiAgICAgICAgICAgICAgICBkYXRhT2JqLmNhbGxCYWNrID0gdGhpcy5fdG91Y2hUYWJsZUVuZC5iaW5kKHRoaXMpO1xyXG4gICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgIHNlY3MgPSB0aGlzLl9nZXRPZmZTZWNvbmRzKEdHLnNvY2tldE1nci5nZXRTZXJ2ZXJUaW1lKCksIHRoaXMuX2N1ckVuZEdyYWJUaW1lKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZihyZXRhaW5UaW1lKSBzZWNzID0gcmV0YWluVGltZTtcclxuICAgICAgICAgICAgZGF0YU9iai5yZXRhaW5UaW1lID0gc2VjcztcclxuICAgICAgICAgICAgdGhpcy5fZ3JhYlRpcCA9IEdHLnRpcHNNZ3Iuc2hvd09ubHlPbmUoZGF0YU9iaik7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICBfdG91Y2hUYWJsZUVuZCA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLmNvbXBfdGFibGVzQ29udGFpbmVyLnNldFRvdWNoRW5hYmxlKGZhbHNlKTtcclxuICAgICAgICB0aGlzLmNvbXBfYnRuc0NvbnRhaW5lci5zZXRCdG5Hcm91cEVuYWJsZShmYWxzZSk7XHJcbiAgICAgICAgaWYoR19Db25maWdfY29tbW9uLmlzTG9jYWwpe1xyXG4gICAgICAgICAgICB2YXIgbmV0RGF0YSA9IHtcclxuICAgICAgICAgICAgICAgIHBva2Vyczpbe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiczMywzNCw0LDM2LDInLC8v54mM57uEIHN0cmluZyAxMe+8jDEyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9kZHM6MSwvL+WAjeaVsFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXJkc1BvaW50OnBhcnNlSW50KDUpLC8v54K55pWwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBdXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy90aGlzLm5ldF9ncmFiRW5kKG5ldERhdGEpO1xyXG4gICAgICAgICAgICB2YXIgcG9rZXJJbmZvID0gdGhpcy5zZXRCZXR0aW5nRW5kSW5mbyhuZXREYXRhKTtcclxuICAgICAgICAgICAgaWYocG9rZXJJbmZvKSB0aGlzLmNvbXBfdG9wRWZmZWN0LnBsYXlHcmFiRG9uZUFuaSh0aGlzLm9uX2dpdmVGaXZlUG9rZXJzLmJpbmQodGhpcyksIHBva2VySW5mbyk7XHJcbiAgICAgICAgICAgIHRoaXMub25fV2FpdCgxNSk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmNvbXBfcGxheWVyc0NvbnRhaW5lci5zZXRNeXNlbGZNb25leSh0aGlzLmdldFdpbkdvbGQoKSwgNTg4ODgpO1xyXG4gICAgICAgICAgICAvL+W6hOWutuWJqeS9memHkeW4gVxyXG4gICAgICAgICAgICB0aGlzLmNvbXBfcGxheWVyc0NvbnRhaW5lci5nZXRTeXN0ZW1Db21wKCkuc2V0R29sZFZhbHVlKDg4ODg4ODg4KTtcclxuICAgICAgICB9ZWxzZXtcclxuXHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICBvbl9naXZlRml2ZVBva2VycyA6IGZ1bmN0aW9uIChwb2tlckluZm8pIHtcclxuICAgICAgICB0aGlzLnNldEdhbWVTdGF0ZShHX1RZUEUuZ3JhYlN0YXRlLmdpdmVQb2tlcilcclxuICAgICAgICB2YXIgcG9rZXJEYXRhID0gR19PQkouZGF0YV9ncmFiUG9rZXJJbmZvKCk7XHJcbiAgICAgICAgcG9rZXJEYXRhLnBva2VySW5mb0xpc3QgPSBwb2tlckluZm87XHJcbiAgICAgICAgcG9rZXJEYXRhLnBva2VyUmVzdWx0ID0gdGhpcy5fbGlzdF93aW5SZXN1bHRbMF07XHJcbiAgICAgICAgcG9rZXJEYXRhLmlzRmx5RWZmZWN0ID0gdHJ1ZTtcclxuICAgICAgICBwb2tlckRhdGEuc3RhcnRQb2tlckluZGV4ID0gMjtcclxuICAgICAgICBwb2tlckRhdGEuY2FsbEZ1bmMgPSB0aGlzLl9naXZlRml2ZVBva2Vyc0VuZC5iaW5kKHRoaXMpO1xyXG4gICAgICAgIHRoaXMuY29tcF9wb2tlcnNMYXllci5zaG93UG9rZXJFWChwb2tlckRhdGEpO1xyXG4gICAgfSxcclxuXHJcbiAgICBfZ2l2ZUZpdmVQb2tlcnNFbmQgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHRpbWUgPSBHX0NvbmZpZ19ncmFiLnRpbWVfb3BlbkRlbGF5O1xyXG4gICAgICAgIHZhciBhY3QgPSBjYy5kZWxheVRpbWUodGltZSk7XHJcbiAgICAgICAgdGhpcy5ub2RlLnJ1bkFjdGlvbihjYy5zZXF1ZW5jZShhY3QsIGNjLmNhbGxGdW5jKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgLy90aGlzLmNvbXBfcG9rZXJzTGF5ZXIucmVzZXRQb2tlckluZm8oKTtcclxuICAgICAgICAgICAgdGhpcy5jb21wX3Bva2Vyc0xheWVyLm9wZW5Qb2tlcnModGhpcy5vbl9zaG93UmVzdWx0LmJpbmQodGhpcykpO1xyXG4gICAgICAgIH0sIHRoaXMpKSk7XHJcbiAgICB9LFxyXG5cclxuICAgIG9uX3Nob3dSZXN1bHQgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5zZXRHYW1lU3RhdGUoR19UWVBFLmdyYWJTdGF0ZS5zaG93RmxhZyk7XHJcblxyXG4gICAgICAgIGlmKHRoaXMuX2xpc3Rfd2luUmVzdWx0Lmxlbmd0aCA8IDEpIHJldHVybjtcclxuICAgICAgICB2YXIgcG9rZXJSZXN1bHQsIHRhYmxlUG9zO1xyXG4gICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCB0aGlzLl9saXN0X3dpblJlc3VsdC5sZW5ndGg7IGkgKyspe1xyXG4gICAgICAgICAgICBwb2tlclJlc3VsdCA9IHRoaXMuX2xpc3Rfd2luUmVzdWx0W2ldO1xyXG4gICAgICAgICAgICB0YWJsZVBvcyA9IHRoaXMuY29tcF90YWJsZXNDb250YWluZXIuc2V0VGFibGVXaW4ocG9rZXJSZXN1bHQpO1xyXG4gICAgICAgICAgICB0aGlzLmNvbXBfdG9wRWZmZWN0LnBsYXlPbmVGbGFnKHRhYmxlUG9zKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5jb21wX3RhYmxlc0NvbnRhaW5lci5zaG93T3duZXJHb2xkKHRoaXMuZ2V0TXlzZWxmQ29tcCgpLmdldEFsbEdyYWJUYWJsZSgpKTtcclxuXHJcbiAgICAgICAgdGhpcy5ub2RlLnJ1bkFjdGlvbihjYy5zZXF1ZW5jZShjYy5kZWxheVRpbWUoR19Db25maWdfZ3JhYi50aW1lX3Nob3dGbGFnKSwgY2MuY2FsbEZ1bmModGhpcy5vbl9mbHlHb2xkLCB0aGlzKSkpO1xyXG4gICAgfSxcclxuICAgIC8v6YeR5biB55qE6aOe6KGMXHJcbiAgICBvbl9mbHlHb2xkIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuc2V0R2FtZVN0YXRlKEdfVFlQRS5ncmFiU3RhdGUuZmx5R29sZCk7XHJcbiAgICAgICAgdGhpcy5jb21wX3BsYXllcnNDb250YWluZXIuc2V0V2luVGFibGVSZXN1bHQodGhpcy5fbGlzdF93aW5SZXN1bHQpO1xyXG4gICAgICAgIHRoaXMubm9kZS5ydW5BY3Rpb24oY2Muc2VxdWVuY2UoY2MuZGVsYXlUaW1lKDEpLCBjYy5jYWxsRnVuYyhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIC8v6YeR5biB6aOe6KGM57uT5p2f5ZCO55qE6KGo546wXHJcbiAgICAgICAgICAgIHRoaXMuX2ZseUdvbGRFbmQoKTtcclxuICAgICAgICB9LCB0aGlzKSkpXHJcbiAgICB9LFxyXG4gICAgX2ZseUdvbGRFbmQgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGlzU2hvdyA9IHRoaXMuY29tcF9wbGF5ZXJzQ29udGFpbmVyLnNob3dBbGxHb2xkUmVzdWx0KCk7XHJcbiAgICAgICAgaWYoaXNTaG93KXtcclxuICAgICAgICAgICAgdmFyIGFjdCA9IGNjLmRlbGF5VGltZShHX0NvbmZpZ19ncmFiLnRpbWVfZ29sZEZseU9uSGVhZCk7XHJcbiAgICAgICAgICAgIHRoaXMubm9kZS5ydW5BY3Rpb24oY2Muc2VxdWVuY2UoYWN0LCBjYy5jYWxsRnVuYyh0aGlzLm9uX3Nob3dHb2xkUmVzdWx0RW5kLCB0aGlzKSkpO1xyXG4gICAgICAgIH1lbHNlIHRoaXMub25fc2hvd0dvbGRSZXN1bHRFbmQoKTtcclxuICAgIH0sXHJcbiAgICAvL+aYvuekuuWktOWDj+S4iueahOmHkeW4geWinuWHj+e7k+adn1xyXG4gICAgb25fc2hvd0dvbGRSZXN1bHRFbmQgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5nZXRNeXNlbGZDb21wKCkucmVzZXRTaG93R29sZCgpO1xyXG4gICAgICAgIC8vdGhpcy5yZXNldFNob3coKTtcclxuICAgICAgICBpZihHX0NvbmZpZ19jb21tb24uaXNMb2NhbCl7XHJcbiAgICAgICAgICAgIHRoaXMub25fYmVmb3JlU3RhcnQoKTtcclxuICAgICAgICB9ZWxzZSB7XHJcblxyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cclxuICAgIC8v54K55Ye75oqV5rOo5Yy65Z+fXHJcbiAgICBwbGF5TXlHb2xkTW92ZSA6IGZ1bmN0aW9uIChkYXRhT2JqKSB7XHJcbiAgICAgICAgZGF0YU9iai5pc01pbmUgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuZ2V0TXlzZWxmQ29tcCgpLnRvdWNoR3JhYkFyZWEoZGF0YU9iaiwgdGhpcy5fb3duZXJHcmFiQ29udGludWUuYmluZCh0aGlzKSk7XHJcbiAgICB9LFxyXG4gICAgLy/mnI3liqHnq6/mipXms6jmiJDlip9cclxuICAgIF9vd25lckdyYWJDb250aW51ZSA6IGZ1bmN0aW9uIChkYXRhT2JqKSB7XHJcbiAgICAgICAgaWYoZGF0YU9iai5nb2xkVmFsdWUgPiAwKXtcclxuICAgICAgICAgICAgdGhpcy5jb21wX2dvbGRDb250YWluZXIubW92ZUFkZEdvbGRzKGRhdGFPYmosIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIC8v5omA5pyJ6YeR5biB6aOe6KGM5a6M5q+VXHJcbiAgICAgICAgICAgIH0uYmluZCh0aGlzKSk7XHJcbiAgICAgICAgICAgIC8v6K+35rGC5oiQ5Yqf5YiZ6ams5LiK5Yi35paw5qGM5a2Q5LiK55qE6YeR6aKd5L+h5oGvXHJcbiAgICAgICAgICAgIHRoaXMuY29tcF90YWJsZXNDb250YWluZXIuZ2V0VGFibGUoZGF0YU9iai50YWJsZUluZGV4KS5hZGRPd25lckdvbGQoZGF0YU9iai5nb2xkVmFsdWUpO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICAvL+e7k+eul+enu+WKqOmHkeW4gVxyXG4gICAgcGxheVJlc3VsdEdvbGRNb3ZlIDogZnVuY3Rpb24gKGRhdGFMaXN0KSB7XHJcbiAgICAgICAgLy9pZihkYXRhTGlzdC5sZW5ndGggPCAxKSB0aGlzLl9mbHlHb2xkRW5kKCk7XHJcbiAgICAgICAgLy9lbHNlXHJcbiAgICAgICAgdGhpcy5jb21wX2dvbGRDb250YWluZXIuZmx5UmVzdWx0R29sZChkYXRhTGlzdCk7XHJcbiAgICB9LFxyXG5cclxuICAgIHNldEdhbWVTdGF0ZSA6IGZ1bmN0aW9uICh0eXBlKSB7XHJcbiAgICAgICAgdmFyIGxhc3RUeXBlID0gdGhpcy5fZ2FtZVN0YXRlO1xyXG4gICAgICAgIHRoaXMuX2dhbWVTdGF0ZSA9IHR5cGU7XHJcbiAgICAgICAgc3dpdGNoICh0eXBlKXtcclxuICAgICAgICAgICAgY2FzZSBHX1RZUEUuZ3JhYlN0YXRlLndhaXQ6XHJcbiAgICAgICAgICAgICAgICAvL+etieW+heW8gOWni1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgR19UWVBFLmdyYWJTdGF0ZS5yZWFkeVN0YXJ0OlxyXG4gICAgICAgICAgICAgICAgLy/lvIDlp4vliqjnlLtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIEdfVFlQRS5ncmFiU3RhdGUuZ2l2ZVBva2VyOlxyXG4gICAgICAgICAgICAgICAgLy/lj5HniYxcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIEdfVFlQRS5ncmFiU3RhdGUucmVhZHlUb3VjaFRhYmxlOlxyXG4gICAgICAgICAgICAgICAgLy/lh4blpIfmirzms6hcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIEdfVFlQRS5ncmFiU3RhdGUudG91Y2hUYWJsZXM6XHJcbiAgICAgICAgICAgICAgICAvL+mAieWMuuWfn+aKvOazqFxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgR19UWVBFLmdyYWJTdGF0ZS5zaG93RmxhZzpcclxuICAgICAgICAgICAgICAgIC8v5pi+56S66IOc5Yip5peX5bicXHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBHX1RZUEUuZ3JhYlN0YXRlLmZseUdvbGQ6XHJcbiAgICAgICAgICAgICAgICAvL+e7k+eul+mHkeW4gVxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgR19UWVBFLmdyYWJTdGF0ZS5pc0JldHRpbmc6XHJcbiAgICAgICAgICAgICAgICAvL+acieS4i+azqCAg5Yi35paw5Zue5Yiw5oi/6Ze05YiX6KGoXHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIHRoaXMuX2dhbWVTdGF0ZSA9IGxhc3RUeXBlO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICAvL+WcqOmHjeaWsOiuvue9rueOqeWutuS/oeaBr+eahOaXtuWAmeabtOaWsOaMiemSruWAjeaVsFxyXG4gICAgaW5pdEJ1dHRvbkluZm8gOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5jb21wX2J0bnNDb250YWluZXIuc2V0U3RhcnRJbmZvKCk7XHJcbiAgICB9LFxyXG5cclxuICAgIC8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cclxuICAgIC8v6YeN5paw5L+u5pS55LyR5oGv5pyf6Ze05YCS6K6h5pe25pWw5YC8XHJcbiAgICBjaGFuZ2VJZGxlVGlwIDogZnVuY3Rpb24gKG51bSkge1xyXG4gICAgICAgIGlmKHRoaXMuX2lkbGVUaXAgJiYgdGhpcy5faWRsZVRpcC5nZXRJc1Nob3coKSkge1xyXG4gICAgICAgICAgICB2YXIgc2VjcyA9IHRoaXMuX2dldE9mZlNlY29uZHMoR0cuc29ja2V0TWdyLmdldFNlcnZlclRpbWUoKSwgdGhpcy5fbmV4dFN0YXJ0VGltZSk7XHJcbiAgICAgICAgICAgIHRoaXMuX2lkbGVUaXAuZm9yY2VDaGFuZ2VDb3VudERvd24oc2Vjcyk7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIC8v6YeN5paw5L+u5pS55oqV5rOo5pyf6Ze05YCS6K6h5pe25pWw5YC8XHJcbiAgICBjaGFuZ2VHcmFiVGlwIDogZnVuY3Rpb24gKG51bSkge1xyXG4gICAgICAgIHZhciBzZWNzID0gdGhpcy5fZ2V0T2ZmU2Vjb25kcyhHRy5zb2NrZXRNZ3IuZ2V0U2VydmVyVGltZSgpLCB0aGlzLl9jdXJFbmRHcmFiVGltZSk7XHJcbiAgICAgICAgaWYodGhpcy5fZ3JhYlRpcCAmJiB0aGlzLl9ncmFiVGlwLmdldElzU2hvdygpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2dyYWJUaXAuZm9yY2VDaGFuZ2VDb3VudERvd24oc2Vjcyk7XHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIC8v5oqV5rOo5Yqo55S75pyq5omn6KGM5a6M5oiQXHJcbiAgICAgICAgICAgIHRoaXMuY29tcF90b3BFZmZlY3QuY2xlYXJBbGwoKTtcclxuXHJcbiAgICAgICAgICAgIGlmKCF0aGlzLmNvbXBfcG9rZXJzTGF5ZXIuZ2V0UG9rZXJOdW0oKSl7XHJcbiAgICAgICAgICAgICAgICAvL+i/mOayoeacieWPkeesrOS4gOW8oOeJjFxyXG4gICAgICAgICAgICAgICAgLy90aGlzLmNvbXBfcG9rZXJzTGF5ZXIuYWRkUG9rZXJzKFt7XHJcbiAgICAgICAgICAgICAgICAvLyAgICBwb2tlckluZGV4IDogdGhpcy5fbGlzdF9wb2tlckluZGV4WzBdLFxyXG4gICAgICAgICAgICAgICAgLy8gICAgaXNPcGVuIDogdHJ1ZVxyXG4gICAgICAgICAgICAgICAgLy99XSwgdGhpcy5fbGlzdF93aW5SZXN1bHRbMF0pO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBwb2tlckRhdGEgPSBHX09CSi5kYXRhX2dyYWJQb2tlckluZm8oKTtcclxuICAgICAgICAgICAgICAgIHBva2VyRGF0YS5wb2tlckluZm9MaXN0ID0gW3tcclxuICAgICAgICAgICAgICAgICAgICBwb2tlckluZGV4IDogdGhpcy5fbGlzdF9wb2tlckluZGV4WzBdLFxyXG4gICAgICAgICAgICAgICAgICAgIGlzT3BlbiA6IHRydWVcclxuICAgICAgICAgICAgICAgIH1dXHJcbiAgICAgICAgICAgICAgICBwb2tlckRhdGEucG9rZXJSZXN1bHQgPSB0aGlzLl9saXN0X3dpblJlc3VsdFswXTtcclxuICAgICAgICAgICAgICAgIHBva2VyRGF0YS5pc0ZseUVmZmVjdCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgcG9rZXJEYXRhLnN0YXJ0UG9rZXJJbmRleCA9IDE7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNvbXBfcG9rZXJzTGF5ZXIuc2hvd1Bva2VyRVgocG9rZXJEYXRhKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5vbl9zdGFydFRvdWNoVGFibGVzKHNlY3MpO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICAvL+mHjeaWsOiuvue9ruaKleazqOS/oeaBr1xyXG4gICAgLy9yZXNldFRhYmxlR29sZCA6IGZ1bmN0aW9uIChnb2xkTGlzdCkge1xyXG4gICAgLy8gICAgaWYoIWdvbGRMaXN0IHx8IGdvbGRMaXN0Lmxlbmd0aCA8IDEpIHJldHVybjtcclxuICAgIC8vXHJcbiAgICAvLyAgICB2YXIgbmV0QmVhbkRhdGE7XHJcbiAgICAvLyAgICBmb3IodmFyIGkgPSAwOyBpIDwgZ29sZExpc3QubGVuZ3RoOyBpICsrKXtcclxuICAgIC8vICAgICAgICBuZXRCZWFuRGF0YSA9IGdvbGRMaXN0W2ldO1xyXG4gICAgLy8gICAgICAgIHZhciBhcmVhVmFsdWUgPSBwYXJzZUludChuZXRCZWFuRGF0YS5pdGVtLnNwbGl0KCdfJylbMF0pO1xyXG4gICAgLy8gICAgICAgIGlmKG5ldEJlYW5EYXRhLnNlYXRJbmRleD09PXRoaXMuZ2V0TXlzZWxmQ29tcCgpLmdldFNlYXRJbmRleCgpKWNvbnRpbnVlO1xyXG4gICAgLy8gICAgICAgIHZhciBkYXRhT2JqID0ge307XHJcbiAgICAvLyAgICAgICAgdmFyIHBsYXllckNvbXAgPSB0aGlzLmNvbXBfcGxheWVyc0NvbnRhaW5lci5nZXRDb21wQnlJbmRleChuZXRCZWFuRGF0YS5zZWF0SW5kZXgpO1xyXG4gICAgLy9cclxuICAgIC8vICAgICAgICBkYXRhT2JqLmdvbGRWYWx1ZSA9IG5ldEJlYW5EYXRhLmdvbGQ7XHJcbiAgICAvLyAgICAgICAgZGF0YU9iaiA9IHBsYXllckNvbXAudG91Y2hHcmFiQXJlYV9vdGhlcihkYXRhT2JqKTtcclxuICAgIC8vICAgICAgICBkYXRhT2JqID0gdGhpcy5jb21wX3RhYmxlc0NvbnRhaW5lci50b3VjaE9uZVRhYmxlKGFyZWFWYWx1ZSwgZGF0YU9iaik7XHJcbiAgICAvLyAgICAgICAgaWYoZGF0YU9iai5jYWxsRnVuYykgZGF0YU9iai5jYWxsRnVuYygpO1xyXG4gICAgLy8gICAgfVxyXG4gICAgLy99LFxyXG5cclxuICAgIC8v5pi+56S656qX5Y+jdWlcclxuICAgIHNob3dEaWFsb2dVSSA6IGZ1bmN0aW9uICh1aU5hbWUsIGNhbGxCYWNrKSB7XHJcbiAgICAgICAgdGhpcy5jb21wX3VpTGF5ZXIuYWRkVUkodWlOYW1lLCBjYWxsQmFjayk7XHJcbiAgICB9LFxyXG5cclxuICAgIC8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4gICAgLy/orr7nva7mipXms6jmrKHmlbDnmoTmmL7npLpcclxuICAgIHNldEJldHRpbmdUaW1lcyA6IGZ1bmN0aW9uICh0aW1lcykge1xyXG4gICAgICAgIHRoaXMubGFiZWxfYmV0dGluZ1RpbWVzLnN0cmluZyA9IEdfVE9PTC5mb3JtYXRTdHIodGhpcy5fYmV0dGluZ1RpbWVzU3RyLCB0aW1lcyk7XHJcbiAgICB9LFxyXG5cclxuXHJcbiAgICBnZXRHYW1lU3RhdGUgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2dhbWVTdGF0ZVxyXG4gICAgfSxcclxuICAgIGdldE15c2VsZkNvbXAgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY29tcF9wbGF5ZXJzQ29udGFpbmVyLmdldE15c2VsZkNvbXAoKVxyXG4gICAgfSxcclxuICAgIGdldFRhYmxlIDogZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmNvbXBfdGFibGVzQ29udGFpbmVyLmdldFRhYmxlKHJlc3VsdCk7XHJcbiAgICB9LFxyXG4gICAgZ2V0QnRuc0NvbXAgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY29tcF9idG5zQ29udGFpbmVyO1xyXG4gICAgfSxcclxuICAgIGdldE1heEdyYWJHb2xkIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9tYXhCZXR0aW5nR29sZFxyXG4gICAgfSxcclxuICAgIC8v5rWL6K+V55So77ya5Li75Yqo6K6h566X5Yy65Z+f6YeR5biB5YC8XHJcbiAgICBnZXRXaW5Hb2xkIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciB0YWJsZUluZGV4LCBnb2xkTnVtLCB3aW5MaXN0PVtdO1xyXG4gICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCB0aGlzLl9saXN0X3dpblJlc3VsdC5sZW5ndGg7IGkgKyspe1xyXG4gICAgICAgICAgICB0YWJsZUluZGV4ID0gdGhpcy5fbGlzdF93aW5SZXN1bHRbaV07XHJcbiAgICAgICAgICAgIGdvbGROdW0gPSB0aGlzLmdldE15c2VsZkNvbXAoKS5nZXRXaW5Hb2xkTnVtKHRhYmxlSW5kZXgpO1xyXG4gICAgICAgICAgICBpZihnb2xkTnVtKSB3aW5MaXN0LnB1c2godGFibGVJbmRleCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLmNvbXBfdGFibGVzQ29udGFpbmVyLmdldFdpbkdvbGQod2luTGlzdCk7XHJcbiAgICB9LFxyXG4gICAgLy/mr4/lsYDmnIDlpKfnmoTmipXms6jmrKHmlbBcclxuICAgIGdldE1heEdyYWJUaW1lcyA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fbWF4QmV0dGluZ1RpbWVzXHJcbiAgICB9LFxyXG4gICAgZ2V0TWF0Y2hJRCA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fbWF0Y2hJRFxyXG4gICAgfSxcclxuICAgIGdldE93bmVySUQgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3BsYXllcklEXHJcbiAgICB9LFxyXG4gICAgX2dldE9mZlNlY29uZHMgOiBmdW5jdGlvbiAoc3RhcnRUaW1lLCBlbmRUaW1lKSB7XHJcbiAgICAgICAgcmV0dXJuIEdHLnNvY2tldE1nci5nZXRPZmZTZWNvbmRzKHN0YXJ0VGltZSwgZW5kVGltZSk7XHJcbiAgICB9LFxyXG4gICAgZ2V0Q3VyR3JhYlJlc3VsdCA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fbGlzdF93aW5SZXN1bHRbMF1cclxuICAgIH0sXHJcbiAgICBnZXRIb21lSUQgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2hvbWVJRFxyXG4gICAgfSxcclxuICAgIC8v5piv5ZCm5bey57uP5oqV5rOo57uT5p2fXHJcbiAgICBnZXRJc0dyYWIgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0TXlzZWxmQ29tcCgpLmdldElzQmV0dGluZ0VuZCgpO1xyXG4gICAgfSxcclxuICAgIC8v6I635Y+W5b2T5YmN5q+U6LWb5piv5ZCm5bey57uP5byA5bGAXHJcbiAgICBnZXRJc0JldFN0YXJ0IDogZnVuY3Rpb24gKF9uZXh0U3RhcnRUaW1lLCBfY3VyRW5kR3JhYlRpbWUpIHtcclxuICAgICAgICBpZighX25leHRTdGFydFRpbWUpIF9uZXh0U3RhcnRUaW1lID0gdGhpcy5fbmV4dFN0YXJ0VGltZTtcclxuICAgICAgICBpZighX2N1ckVuZEdyYWJUaW1lKSBfY3VyRW5kR3JhYlRpbWUgPSB0aGlzLl9jdXJFbmRHcmFiVGltZTtcclxuICAgICAgICB2YXIgc2VydmVyVGltZSA9IEdHLnNvY2tldE1nci5nZXRTZXJ2ZXJUaW1lKCk7XHJcbiAgICAgICAgaWYoX25leHRTdGFydFRpbWUgPiBzZXJ2ZXJUaW1lICYmIHNlcnZlclRpbWUgPj0gX2N1ckVuZEdyYWJUaW1lKXtcclxuICAgICAgICAgICAgLy/mnKrlvIDlsYBcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0cnVlXHJcbiAgICB9LFxyXG4gICAgLy/nrKzkuIDmrKHov5vlhaXmuLjmiI/mmK/lkKblj6/mirzms6hcclxuICAgIGdldEZpcnN0QmV0dGluZzogZnVuY3Rpb24gZ2V0SXNXYWl0KCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9zdGFydEdhbWU7XHJcbiAgICB9LFxyXG4gICAgLy/ojrflj5bov5vmiL/kv6Hmga9cclxuICAgIGdldEVudGVySG9tZURhdGEgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2VudGVySG9tZURhdGFcclxuICAgIH0sXHJcbiAgICAvL+iOt+WPluWQg+eTnOe+pOS8l+aKleazqOeahOS9jee9rlxyXG4gICAgZ2V0SWRsZUJldHRpbmdQb3MgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY29tcF9idG5zQ29udGFpbmVyLmdldElkbGVCZXR0aW5nUG9zKClcclxuICAgIH0sXHJcbiAgICAvL+iOt+WPluWQg+eTnOe+pOS8l+eahOaKleazqOiusOW9lVxyXG4gICAgZ2V0SWRsZUJldHRpbmcgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RpY3RfaWRsZUJldHRpbmdcclxuICAgIH0sXHJcbiAgICAvL+iOt+WPluaKleazqOWMuuWfn+WuueWZqFxyXG4gICAgZ2V0VGFibGVDb250YWluZXIgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY29tcF90YWJsZXNDb250YWluZXJcclxuICAgIH0sXHJcbiAgICAvL+iOt+WPluWNoeeJjOeahOaUvue9ruS9jee9rlxyXG4gICAgZ2V0UG9rZXJTaG93UG9zIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmNvbXBfcGxheWVyc0NvbnRhaW5lci5nZXRQb2tlclBvcygpXHJcbiAgICB9LFxyXG5cclxuXHJcbiAgICAvL+iusOW9leWQg+eTnOe+pOS8l+eahOaKleazqFxyXG4gICAgX3JlY29kZUlkbGVCZXR0aW5nIDogZnVuY3Rpb24gKHRhYmxlSW5kZXgsIGdvbGRJbWdOdW0pIHtcclxuICAgICAgICBpZighdGhpcy5fZGljdF9pZGxlQmV0dGluZykgdGhpcy5fZGljdF9pZGxlQmV0dGluZyA9IHt9O1xyXG4gICAgICAgIGlmKHRoaXMuX2RpY3RfaWRsZUJldHRpbmdbdGFibGVJbmRleF0pIHRoaXMuX2RpY3RfaWRsZUJldHRpbmdbdGFibGVJbmRleF0gKz0gZ29sZEltZ051bTtcclxuICAgICAgICBlbHNlIHRoaXMuX2RpY3RfaWRsZUJldHRpbmdbdGFibGVJbmRleF0gPSBnb2xkSW1nTnVtO1xyXG4gICAgfSxcclxuICAgIC8v5byA5ZCv5LyR5oGv5pe26Ze055qE5pe25YCZ55qE5riF55CGXHJcbiAgICBfY2xlYXJCeVdhaXQgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5nZXRNeXNlbGZDb21wKCkuY2xlYXJSZWNvcmQoKTtcclxuICAgIH0sXHJcblxyXG4gICAgLy9vbiBuZXQgLS0tLS0tLS0tLS1cclxuXHJcbiAgICBmb3JjZVN0YXJ0IDogZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICBpZiAoR19Db25maWdfY29tbW9uLmlzTG9jYWwpIHtcclxuICAgICAgICAgICAgdmFyIGNoaXAgPSBbMTAwLCA1MDAsIDEwMDAsIDIwMDBdO1xyXG4gICAgICAgICAgICB2YXIgaW5pdERhdGEgPSB7XHJcbiAgICAgICAgICAgICAgICBteXNlbGZEYXRhOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2hvb3NlRGljdDogY2hpcCxcclxuICAgICAgICAgICAgICAgICAgICByb29tTmFtZTogbnVsbFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIG90aGVyc0RhdGE6IFt7XHJcbiAgICAgICAgICAgICAgICAgICAgcGxheWVyOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvaW46IDc1NjgsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGljb246IG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5pY2tuYW1lOiBcImJsYWNrMVwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwbGF5ZXJJZDogNSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXNhYmxlQmFsYW5jZTogNzU2OCxcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHNlYXRJbmRleDogMVxyXG4gICAgICAgICAgICAgICAgfSwge1xyXG4gICAgICAgICAgICAgICAgICAgIHBsYXllcjoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2luOiA3NTY4LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpY29uOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBuaWNrbmFtZTogXCJibGFja1wiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwbGF5ZXJJZDogNSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXNhYmxlQmFsYW5jZTogNzU2OCxcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHNlYXRJbmRleDogMlxyXG4gICAgICAgICAgICAgICAgfSwge1xyXG4gICAgICAgICAgICAgICAgICAgIHBsYXllcjoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2luOiA4ODg4ODgsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGljb246IG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5pY2tuYW1lOiBcInNvbGlkZXJcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGxheWVySWQ6IDYsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVzYWJsZUJhbGFuY2U6IDg4ODg4OCxcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHNlYXRJbmRleDogM1xyXG4gICAgICAgICAgICAgICAgfSwge1xyXG4gICAgICAgICAgICAgICAgICAgIHBsYXllcjoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2luOiA4ODg4ODgsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGljb246IG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5pY2tuYW1lOiBcImppblwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwbGF5ZXJJZDogNyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXNhYmxlQmFsYW5jZTogODg4ODg4LFxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgc2VhdEluZGV4OiA0XHJcbiAgICAgICAgICAgICAgICB9LCB7XHJcbiAgICAgICAgICAgICAgICAgICAgcGxheWVyOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvaW46IDg4ODg4OCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWNvbjogbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmlja25hbWU6IFwiamluMVwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwbGF5ZXJJZDogOCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXNhYmxlQmFsYW5jZTogODg4ODg4LFxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgc2VhdEluZGV4OiA1XHJcbiAgICAgICAgICAgICAgICB9LCB7XHJcbiAgICAgICAgICAgICAgICAgICAgcGxheWVyOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvaW46IDg4ODg4OCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWNvbjogbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmlja25hbWU6IFwiamluMlwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwbGF5ZXJJZDogOSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXNhYmxlQmFsYW5jZTogODg4ODg4LFxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgc2VhdEluZGV4OiA2XHJcbiAgICAgICAgICAgICAgICB9LCB7XHJcbiAgICAgICAgICAgICAgICAgICAgcGxheWVyOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvaW46IDg4ODg4OCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWNvbjogbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmlja25hbWU6IFwiamluM1wiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwbGF5ZXJJZDogOSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXNhYmxlQmFsYW5jZTogODg4ODg4LFxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgc2VhdEluZGV4OiA3XHJcbiAgICAgICAgICAgICAgICB9XSxcclxuICAgICAgICAgICAgICAgIGRlYWxlckRhdGE6IHtcclxuICAgICAgICAgICAgICAgICAgICBjb2luOiAyOTczMDAsXHJcbiAgICAgICAgICAgICAgICAgICAgaWNvbjogbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICBuaWNrbmFtZTogXCLns7vnu5/lpKfniZtcIixcclxuICAgICAgICAgICAgICAgICAgICBwbGF5ZXJJZDogNyxcclxuICAgICAgICAgICAgICAgICAgICB1c2FibGVCYWxhbmNlOiA3NDMyNSxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBob21lRGF0YToge1xyXG4gICAgICAgICAgICAgICAgICAgIHJvb21JZDogMSxcclxuICAgICAgICAgICAgICAgICAgICB1c2VySWQ6IDYsXHJcbiAgICAgICAgICAgICAgICAgICAgYmV0VGltZXM6IDEwLFxyXG4gICAgICAgICAgICAgICAgICAgIG1hdGNoSWQ6IDEsXHJcbiAgICAgICAgICAgICAgICAgICAgLy9iZWdpblRpbWVOZXh0IDogMTQ4NzU1NzY1MTA4MyxcclxuICAgICAgICAgICAgICAgICAgICBiZWdpblRpbWVOZXh0OiAxNDg3NTU5NDg5MjI1LFxyXG4gICAgICAgICAgICAgICAgICAgIC8vc2V0dGxlVGltZSA6IDE0ODc1NTc2NTEwODMsXHJcbiAgICAgICAgICAgICAgICAgICAgc2V0dGxlVGltZTogMTQ4NzU1OTQ3NDIyNSxcclxuICAgICAgICAgICAgICAgICAgICBiZXRDaGlwOiBjaGlwLFxyXG4gICAgICAgICAgICAgICAgICAgIG1pbkRlYWxlckdvbGQ6IDEwMDAwMCxcclxuICAgICAgICAgICAgICAgICAgICBhcmVhSW5mbzp7MDoyLDE6MTMsMjoxMywzOjEzLDQ6MTMsNToxMyw2OjEzLDc6MTMsODoxMyw5OjEzLDEwOjEyfVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLl9pbml0SW5Ib21lRGF0YShpbml0RGF0YSk7XHJcblxyXG4gICAgICAgICAgICAvL+aYr+WQpuW8gOWxgOWIpOWumlxyXG4gICAgICAgICAgICB2YXIgc2VydmVyVGltZSA9IDE0ODc1NTk0ODQwMTI7XHJcbiAgICAgICAgICAgIGlmIChzZXJ2ZXJUaW1lIDwgdGhpcy5fY3VyRW5kR3JhYlRpbWUpIHtcclxuICAgICAgICAgICAgICAgIC8v5pyq5byA5bGAXHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlc2V0U2hvdygpO1xyXG4gICAgICAgICAgICAgICAgLy/mmK/lkKblnKjmuLjmiI/ov5vooYzkuIDljYrnmoTml7blgJnov5vlhaVcclxuICAgICAgICAgICAgICAgIHZhciBmaXJzdFBva2VySW5kZXggPSAzMDtcclxuICAgICAgICAgICAgICAgIHZhciBzZWNzID0gdGhpcy5fZ2V0T2ZmU2Vjb25kcyhzZXJ2ZXJUaW1lLCB0aGlzLl9jdXJFbmRHcmFiVGltZSk7XHJcbiAgICAgICAgICAgICAgICBpZihmaXJzdFBva2VySW5kZXggPiAwKXtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9saXN0X3Bva2VySW5kZXhbMF0gPSBmaXJzdFBva2VySW5kZXg7XHJcbiAgICAgICAgICAgICAgICAgICAgLy/muLjmiI/kuK3pgJTliqDlhaUs6K6h566X5Ymp5L2Z56eS5pWwXHJcbiAgICAgICAgICAgICAgICAgICAgaWYoc2VjcyA+IEdfQ29uZmlnX2dyYWIudGltZV9ncmFiV2lsbEVuZCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8v5YWF6Laz55qE5Y+R54mM5pe26Ze0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vdGhpcy5jb21wX3Bva2Vyc0xheWVyLmFkZFBva2Vycyhbe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAgICBwb2tlckluZGV4IDogZmlyc3RQb2tlckluZGV4LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAgICBpc09wZW4gOiB0cnVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vfV0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBva2VyRGF0YSA9IEdfT0JKLmRhdGFfZ3JhYlBva2VySW5mbygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwb2tlckRhdGEucG9rZXJJbmZvTGlzdCA9IFt7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb2tlckluZGV4IDogZmlyc3RQb2tlckluZGV4LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNPcGVuIDogdHJ1ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwb2tlckRhdGEucG9rZXJSZXN1bHQgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwb2tlckRhdGEuaXNGbHlFZmZlY3QgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcG9rZXJEYXRhLnN0YXJ0UG9rZXJJbmRleCA9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29tcF9wb2tlcnNMYXllci5zaG93UG9rZXJFWChwb2tlckRhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL+S4jeaSreaUvuWPkeeJjOWKqOeUu1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbXBfcG9rZXJzTGF5ZXIub25seVNob3dQb2tlcihbe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9rZXJJbmRleCA6IGZpcnN0UG9rZXJJbmRleCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzT3BlbiA6IHRydWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgfV0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIGVsc2UgY29uc29sZS5sb2coJ+W3sue7j+W8gOWxgO+8jOS9huayoeacieaUtuWIsOacjeWKoeerr+WNoeeJjOS/oeaBrycrZmlyc3RQb2tlckluZGV4KVxyXG4gICAgICAgICAgICAgICAgdGhpcy5vbl9zdGFydFRvdWNoVGFibGVzKHNlY3MpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy/lt7Lnu4/lvIDlsYBcclxuICAgICAgICAgICAgICAgIHRoaXMuX2lzUGF1c2VPdmVyTWF0Y2ggPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZXNldFNob3coKTtcclxuICAgICAgICAgICAgICAgIHZhciBzZWNzID0gdGhpcy5fZ2V0T2ZmU2Vjb25kcyhzZXJ2ZXJUaW1lLCB0aGlzLl9uZXh0U3RhcnRUaW1lKTtcclxuICAgICAgICAgICAgICAgIHRoaXMub25fV2FpdCgyLCB0aGlzLm9uX2JlZm9yZVN0YXJ0LmJpbmQodGhpcykpOztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcblxyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgdGVzdEdldFBva2VyIDogZnVuY3Rpb24gKGdldE51bSkge1xyXG4gICAgICAgIHZhciBwMSA9IFs0MCw0NCw0OCw1LDEwXTtcclxuICAgICAgICB2YXIgcDIgPSBbMzYsMzcsMzksMTAsMTFdO1xyXG4gICAgICAgIHZhciBwMyA9IFszOSw0MSw1MCwxMywyMl07XHJcbiAgICAgICAgdmFyIHA0ID0gWzUsMzEsMzgsMCwyOV07XHJcbiAgICAgICAgdmFyIHA1ID0gWzMzLDM0LDQsMzYsMl07XHJcbiAgICAgICAgdmFyIHBva2VyTGlzdCA9IFt7NTpwMX0sezY6cDJ9LHsxMDpwM30sezk6cDR9LHsxOnA1fV1cclxuICAgICAgICBpZighdGhpcy5fdGVzdFBva2VyTGlzdCkgdGhpcy5fdGVzdFBva2VyTGlzdCA9IHBva2VyTGlzdFtHX1RPT0wuZ2V0UmFuZG9tQXJlYSgwLCA0KV07XHJcbiAgICAgICAgaWYoZ2V0TnVtID09IDEpe1xyXG4gICAgICAgICAgICB2YXIgaW5mbz17fTtcclxuICAgICAgICAgICAgZm9yKHZhciBpID0gMDsgaSA8IHRoaXMuX3Rlc3RQb2tlckxpc3QubGVuZ3RoOyBpICsrKXtcclxuICAgICAgICAgICAgICAgIGluZm8udmFsdWUgPSBpO1xyXG4gICAgICAgICAgICAgICAgaW5mby5wb2tlckluZGV4ID0gdGhpcy5fdGVzdFBva2VyTGlzdFtpXVswXTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBpbmZvXHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIHZhciBpbmZvPXt9O1xyXG4gICAgICAgICAgICBmb3IodmFyIGtleSA9IDA7IGtleSA8IHRoaXMuX3Rlc3RQb2tlckxpc3QubGVuZ3RoOyBrZXkgKyspe1xyXG4gICAgICAgICAgICAgICAgaW5mby52YWx1ZSA9IGtleTtcclxuICAgICAgICAgICAgICAgIGluZm8ucG9rZXJJbmRleCA9IHRoaXMuX3Rlc3RQb2tlckxpc3Rba2V5XTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gaW5mb1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgLy/liJ3lp4vljJbmirzlrp3miL/pl7Tlv4XpobvopoHmnInnmoTmlbDmja5cclxuICAgIF9pbml0SW5Ib21lRGF0YSA6IGZ1bmN0aW9uIChpbml0RGF0YSkge1xyXG4gICAgICAgIC8v5oi/6Ze06YWN572u55qE5pWw5o2uXHJcbiAgICAgICAgaWYoaW5pdERhdGEuaG9tZURhdGEpe1xyXG4gICAgICAgICAgICB2YXIgZGF0YSA9IGluaXREYXRhLmhvbWVEYXRhO1xyXG4gICAgICAgICAgICBpZighdGhpcy5faG9tZUlEKSB0aGlzLl9ob21lSUQgPSBkYXRhLnJvb21JZDtcclxuICAgICAgICAgICAgaWYoIXRoaXMuX21hdGNoSUQpIHRoaXMuX21hdGNoSUQgPSBkYXRhLm1hdGNoSWQ7XHJcbiAgICAgICAgICAgIHRoaXMuX25leHRTdGFydFRpbWUgPSBkYXRhLmJlZ2luVGltZU5leHQ7XHJcbiAgICAgICAgICAgIHRoaXMuX2N1ckVuZEdyYWJUaW1lID0gZGF0YS5zZXR0bGVUaW1lO1xyXG4gICAgICAgICAgICAvL2lmKGRhdGEubWluRGVhbGVyR29sZCkgdGhpcy5fbWluRGVhbGVyR29sZCA9IGRhdGEubWluRGVhbGVyR29sZDtcclxuICAgICAgICAgICAgaWYoZGF0YS51c2VySWQpe1xyXG4gICAgICAgICAgICAgICAgR0cuZ2V0UGxheWVyKCkuc2V0UGxheWVySUQoZGF0YS51c2VySWQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8v5pyA5aSn5oqV5rOo5qyh5pWwXHJcbiAgICAgICAgICAgIGlmKGRhdGEuYmV0VGltZXMpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX21heEJldHRpbmdUaW1lcyA9IGRhdGEuYmV0VGltZXM7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldEJldHRpbmdUaW1lcyh0aGlzLl9tYXhCZXR0aW5nVGltZXMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8v562556CB6YCJ6aG5XHJcbiAgICAgICAgICAgIGlmKGRhdGEuYmV0Q2hpcCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fY2hpcFZhbHVlTGlzdCA9IGRhdGEuYmV0Q2hpcDtcclxuICAgICAgICAgICAgICAgIHRoaXMuX21heEJldHRpbmdHb2xkID0gdGhpcy5fbWF4QmV0dGluZ1RpbWVzICogZGF0YS5iZXRDaGlwW2RhdGEuYmV0Q2hpcC5sZW5ndGggLSAxXTtcclxuICAgICAgICAgICAgICAgIC8v6K6+572u5Yid5aeL5YyW5pWw5o2u6KGo546wXHJcbiAgICAgICAgICAgICAgICAvL3RoaXMuY29tcF9idG5zTGF5ZXIuaW5pdENoaXBCdG4oZGF0YS5iZXRDaGlwKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvL+aKleazqOWMuuWfn+WAjeaVsFxyXG4gICAgICAgICAgICBpZihkYXRhLmFyZWFJbmZvKXtcclxuICAgICAgICAgICAgICAgIHRoaXMuY29tcF90YWJsZXNDb250YWluZXIuc2V0U3RhcnRJbmZvKGRhdGEuYXJlYUluZm8pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8v546p5a626Ieq5bex55qE5pWw5o2uXHJcbiAgICAgICAgLy/lhbbku5bnjqnlrrbnmoTmlbDmja5cclxuICAgICAgICAvL+W6hOWutueahOaVsOaNrlxyXG4gICAgICAgIHRoaXMuY29tcF9wbGF5ZXJzQ29udGFpbmVyLnNldFN0YXJ0SW5mbyhpbml0RGF0YS5vdGhlcnNEYXRhLCBpbml0RGF0YS5teXNlbGZEYXRhLCBpbml0RGF0YS5kZWFsZXJEYXRhKTtcclxuICAgICAgICAvL+WIpOWumuW6hOWutlxyXG4gICAgICAgIGlmKGluaXREYXRhLmRlYWxlckRhdGEpe1xyXG4gICAgICAgICAgICBpZihpbml0RGF0YS5kZWFsZXJEYXRhLnBsYXllcklkID09IEdHLmdldFBsYXllcklEKCkpe1xyXG4gICAgICAgICAgICAgICAgLy/oh6rlt7HmmK/luoTlrrZcclxuICAgICAgICAgICAgICAgIC8vdGhpcy5zZXRCb3R0b21Jc1Nob3coZmFsc2UpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy90aGlzLnNldEJvdHRvbUlzU2hvdyh0cnVlKTtcclxuICAgICAgICAgICAgICAgIC8v5riF6Zmk5bqE5a2X54m55pWIXHJcbiAgICAgICAgICAgICAgICAvL3RoaXMuY29tcF9wbGF5ZXJzTGF5ZXIuZ2V0TXlzZWxmRWZmZWN0Q29tcCgpLmNsZWFyRGVhbGVyV29yZEFuaSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICAvL+i/m+WFpeaIv+mXtOaOpeaUtuWIsOeahOS/oeaBr1xyXG4gICAgbmV0X3NldEhvbWVEYXRhIDogZnVuY3Rpb24gKHJlY3ZEYXRhKSB7XHJcbiAgICAgICAgdmFyIHRpcCA9IHJlY3ZEYXRhLnRpcDtcclxuICAgICAgICBpZih0aXAuY29kZSAhPSBHX1RZUEUuc2VydmVyQ29kZVR5cGUuc3VjY2Vzcykge1xyXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZyh0aXAudGlwKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLl9kZWFsSW5Ib21lTmV0RGF0YShyZWN2RGF0YSk7XHJcblxyXG4gICAgICAgIC8v5piv5ZCm5byA5bGA5Yik5a6aXHJcbiAgICAgICAgdmFyIHNlcnZlclRpbWUgPSBHRy5zb2NrZXRNZ3IuZ2V0U2VydmVyVGltZSgpO1xyXG4gICAgICAgIC8vdmFyIGlzV2FpdCA9IHRoaXMuX25leHRTdGFydFRpbWUgPiBzZXJ2ZXJUaW1lICYmIHNlcnZlclRpbWUgPj0gdGhpcy5fY3VyRW5kR3JhYlRpbWU7XHJcbiAgICAgICAgaWYoc2VydmVyVGltZSA8IHRoaXMuX2N1ckVuZEdyYWJUaW1lKXtcclxuICAgICAgICAgICAgLy/lt7Lnu4/lvIDlsYBcclxuICAgICAgICAgICAgdGhpcy5yZXNldFNob3coKTtcclxuICAgICAgICAgICAgdGhpcy5fc3RhcnRHYW1lID0gdHJ1ZTtcclxuICAgICAgICAgICAgLy/mmK/lkKblnKjmuLjmiI/ov5vooYzkuIDljYrnmoTml7blgJnov5vlhaVcclxuICAgICAgICAgICAgdmFyIGZpcnN0UG9rZXJJbmRleCA9IHJlY3ZEYXRhLnBva2VyO1xyXG4gICAgICAgICAgICB2YXIgc2VjcyA9IHRoaXMuX2dldE9mZlNlY29uZHMoc2VydmVyVGltZSwgdGhpcy5fY3VyRW5kR3JhYlRpbWUpO1xyXG4gICAgICAgICAgICBpZihmaXJzdFBva2VySW5kZXggPj0gMCl7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9saXN0X3Bva2VySW5kZXhbMF0gPSBmaXJzdFBva2VySW5kZXg7XHJcbiAgICAgICAgICAgICAgICB2YXIgcG9rZXJEYXRhID0gR19PQkouZGF0YV9ncmFiUG9rZXJJbmZvKCk7XHJcbiAgICAgICAgICAgICAgICBwb2tlckRhdGEucG9rZXJJbmZvTGlzdCA9IFt7XHJcbiAgICAgICAgICAgICAgICAgICAgcG9rZXJJbmRleCA6IGZpcnN0UG9rZXJJbmRleCxcclxuICAgICAgICAgICAgICAgICAgICBpc09wZW4gOiB0cnVlXHJcbiAgICAgICAgICAgICAgICB9XTtcclxuICAgICAgICAgICAgICAgIHBva2VyRGF0YS5pc0ZseUVmZmVjdCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgcG9rZXJEYXRhLnN0YXJ0UG9rZXJJbmRleCA9IDE7XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5jb21wX3Bva2Vyc0xheWVyLnNob3dQb2tlckVYKHBva2VyRGF0YSk7XHJcbiAgICAgICAgICAgICAgICAvL+a4uOaIj+S4remAlOWKoOWFpSzorqHnrpfliankvZnnp5LmlbBcclxuICAgICAgICAgICAgICAgIC8vaWYoc2VjcyA+IEdfQ29uZmlnX2dyYWIudGltZV9ncmFiV2lsbEVuZCl7XHJcbiAgICAgICAgICAgICAgICAvLyAgICAvL+WFhei2s+eahOWPkeeJjOaXtumXtFxyXG4gICAgICAgICAgICAgICAgLy8gICAgdGhpcy5jb21wX3Bva2Vyc0xheWVyLmFkZFBva2Vycyhbe1xyXG4gICAgICAgICAgICAgICAgLy8gICAgICAgIHBva2VySW5kZXggOiBmaXJzdFBva2VySW5kZXgsXHJcbiAgICAgICAgICAgICAgICAvLyAgICAgICAgaXNPcGVuIDogdHJ1ZVxyXG4gICAgICAgICAgICAgICAgLy8gICAgfV0pO1xyXG4gICAgICAgICAgICAgICAgLy99ZWxzZXtcclxuICAgICAgICAgICAgICAgIC8vICAgIC8v5LiN5pKt5pS+5Y+R54mM5Yqo55S7XHJcbiAgICAgICAgICAgICAgICAvLyAgICB0aGlzLmNvbXBfcG9rZXJzTGF5ZXIub25seVNob3dQb2tlcihbe1xyXG4gICAgICAgICAgICAgICAgLy8gICAgICAgIHBva2VySW5kZXggOiBmaXJzdFBva2VySW5kZXgsXHJcbiAgICAgICAgICAgICAgICAvLyAgICAgICAgaXNPcGVuIDogdHJ1ZVxyXG4gICAgICAgICAgICAgICAgLy8gICAgfV0pO1xyXG4gICAgICAgICAgICAgICAgLy99XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gZWxzZSBjb25zb2xlLmxvZygn5bey57uP5byA5bGA77yM5L2G5rKh5pyJ5pS25Yiw5pyN5Yqh56uv5Y2h54mM5L+h5oGvJytmaXJzdFBva2VySW5kZXgpXHJcbiAgICAgICAgICAgIHRoaXMub25fc3RhcnRUb3VjaFRhYmxlcyhzZWNzKTtcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgLy/mnKrlvIDlsYBcclxuICAgICAgICAgICAgdGhpcy5faXNQYXVzZU92ZXJNYXRjaCA9IHRydWU7XHJcbiAgICAgICAgICAgIHRoaXMucmVzZXRTaG93KCk7XHJcbiAgICAgICAgICAgIHRoaXMuX3N0YXJ0R2FtZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICB2YXIgc2VjcyA9IHRoaXMuX2dldE9mZlNlY29uZHMoc2VydmVyVGltZSwgdGhpcy5fbmV4dFN0YXJ0VGltZSk7XHJcbiAgICAgICAgICAgIGlmKHNlY3MgPD0gMCl7XHJcbiAgICAgICAgICAgICAgICAvL+WNoeaXtumXtOeCueS6hiznm7TmjqXlvIDlp4vmipXms6hcclxuICAgICAgICAgICAgICAgIHZhciBmaXJzdFBva2VySW5kZXggPSByZWN2RGF0YS5wb2tlcjtcclxuICAgICAgICAgICAgICAgIHNlY3MgPSB0aGlzLl9nZXRPZmZTZWNvbmRzKHNlcnZlclRpbWUsIHRoaXMuX2N1ckVuZEdyYWJUaW1lKTtcclxuICAgICAgICAgICAgICAgIGlmKGZpcnN0UG9rZXJJbmRleCA+PSAwKXtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9saXN0X3Bva2VySW5kZXhbMF0gPSBmaXJzdFBva2VySW5kZXg7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHBva2VyRGF0YSA9IEdfT0JKLmRhdGFfZ3JhYlBva2VySW5mbygpO1xyXG4gICAgICAgICAgICAgICAgICAgIHBva2VyRGF0YS5wb2tlckluZm9MaXN0ID0gW3tcclxuICAgICAgICAgICAgICAgICAgICAgICAgcG9rZXJJbmRleCA6IGZpcnN0UG9rZXJJbmRleCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgaXNPcGVuIDogdHJ1ZVxyXG4gICAgICAgICAgICAgICAgICAgIH1dO1xyXG4gICAgICAgICAgICAgICAgICAgIHBva2VyRGF0YS5pc0ZseUVmZmVjdCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIHBva2VyRGF0YS5zdGFydFBva2VySW5kZXggPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29tcF9wb2tlcnNMYXllci5zaG93UG9rZXJFWChwb2tlckRhdGEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gZWxzZSBjb25zb2xlLmxvZygn5bey57uP5byA5bGA77yM5L2G5rKh5pyJ5pS25Yiw5pyN5Yqh56uv5Y2h54mM5L+h5oGvJytmaXJzdFBva2VySW5kZXgpXHJcbiAgICAgICAgICAgICAgICB0aGlzLm9uX3N0YXJ0VG91Y2hUYWJsZXMoc2Vjcyk7XHJcbiAgICAgICAgICAgIH1lbHNlIHRoaXMub25fV2FpdChzZWNzKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIC8v5oq85a6d4oCU4oCU5aSE55CG6K+35rGC5Yiw55qE6L+b5oi/5L+h5oGvXHJcbiAgICBfZGVhbEluSG9tZU5ldERhdGEgOiBmdW5jdGlvbiAocmVjdkRhdGEpIHtcclxuICAgICAgICB0aGlzLl9lbnRlckhvbWVEYXRhID0gcmVjdkRhdGE7XHJcbiAgICAgICAgdmFyIG1hdGNoID0gcmVjdkRhdGEubWF0Y2g7XHJcblxyXG4gICAgICAgIHZhciB0aW1lMSA9IG5ldyBEYXRlKEdHLnNvY2tldE1nci5nZXRTZXJ2ZXJUaW1lKCkpO1xyXG4gICAgICAgIC8vY29uc29sZS5sb2coJ+W9k+WJje+8muaXtjonK3RpbWUxLmdldEhvdXJzKCkrJ+WIhjonK3RpbWUxLmdldE1pbnV0ZXMoKSsn56eSOicrdGltZTEuZ2V0U2Vjb25kcygpKVxyXG4gICAgICAgIHZhciB0aW1lMiA9IG5ldyBEYXRlKG1hdGNoLnNldHRsZVRpbWUpO1xyXG4gICAgICAgIC8vY29uc29sZS5sb2coJ+S4i+asoeW8gOWxgO+8muaXtjonK3RpbWUyLmdldEhvdXJzKCkrJ+WIhjonK3RpbWUyLmdldE1pbnV0ZXMoKSsn56eSOicrdGltZTIuZ2V0U2Vjb25kcygpKVxyXG5cclxuICAgICAgICB2YXIgaWQgPSBHRy5nZXRQbGF5ZXJJRCgpO1xyXG4gICAgICAgIHZhciBpbml0RGF0YSA9IHtcclxuICAgICAgICAgICAgbXlzZWxmRGF0YSA6IHtcclxuICAgICAgICAgICAgICAgIGNob29zZURpY3QgOiByZWN2RGF0YS5iZXRDaGlwLFxyXG4gICAgICAgICAgICAgICAgcm9vbU5hbWUgOiByZWN2RGF0YS5yb29tTmFtZSxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgb3RoZXJzRGF0YSA6IHJlY3ZEYXRhLnNlYXRzLFxyXG4gICAgICAgICAgICBkZWFsZXJEYXRhIDogbWF0Y2guZGVhbGVyLFxyXG4gICAgICAgICAgICBob21lRGF0YSA6IHtcclxuICAgICAgICAgICAgICAgIHJvb21JZCA6IHJlY3ZEYXRhLnJvb21JZCxcclxuICAgICAgICAgICAgICAgIHVzZXJJZCA6IGlkLFxyXG4gICAgICAgICAgICAgICAgYmV0VGltZXMgOiByZWN2RGF0YS5iZXRUaW1lcyxcclxuICAgICAgICAgICAgICAgIG1hdGNoSWQgOiBtYXRjaC5tYXRjaElkLFxyXG4gICAgICAgICAgICAgICAgYmVnaW5UaW1lTmV4dCA6IG1hdGNoLmJlZ2luVGltZU5leHQsXHJcbiAgICAgICAgICAgICAgICBzZXR0bGVUaW1lIDogbWF0Y2guc2V0dGxlVGltZSxcclxuICAgICAgICAgICAgICAgIGJldENoaXAgOiByZWN2RGF0YS5iZXRDaGlwLFxyXG4gICAgICAgICAgICAgICAgbWluRGVhbGVyR29sZCA6IHJlY3ZEYXRhLm1pbkRlYWxlckNvaW4sXHJcbiAgICAgICAgICAgICAgICBhcmVhSW5mbyA6IHJlY3ZEYXRhLmJldEFyZWFzXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuX2luaXRJbkhvbWVEYXRhKGluaXREYXRhKTtcclxuICAgIH0sXHJcblxyXG4gICAgLy/ph43mlrDorr7nva7lvIDlsYDmlbDmja5cclxuICAgIG5ldF9yZXNldEdhbWVEYXRhIDogZnVuY3Rpb24gKHJlY3ZEYXRhKSB7XHJcbiAgICAgICAgdmFyIHRpcCA9IHJlY3ZEYXRhLnRpcDtcclxuICAgICAgICBpZih0aXAuY29kZSAhPSBHX1RZUEUuc2VydmVyQ29kZVR5cGUuc3VjY2Vzcykge1xyXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZyh0aXAudGlwKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnVwZGF0ZUVudGVySG9tZURhdGEocmVjdkRhdGEpO1xyXG4gICAgICAgIHRoaXMucmVzZXRTaG93KCk7XHJcbiAgICAgICAgdmFyIG1hdGNoID0gcmVjdkRhdGEubWF0Y2g7XHJcbiAgICAgICAgdmFyIGlkID0gR0cuZ2V0UGxheWVySUQoKTtcclxuICAgICAgICB2YXIgaW5pdERhdGEgPSB7XHJcbiAgICAgICAgICAgIG15c2VsZkRhdGEgOiB7XHJcbiAgICAgICAgICAgICAgICBjaG9vc2VEaWN0IDogbnVsbCxcclxuICAgICAgICAgICAgICAgIHJvb21OYW1lIDogbnVsbCxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgb3RoZXJzRGF0YSA6IHJlY3ZEYXRhLnNlYXRzLFxyXG4gICAgICAgICAgICBkZWFsZXJEYXRhIDogbWF0Y2guZGVhbGVyLFxyXG4gICAgICAgICAgICBob21lRGF0YSA6IHtcclxuICAgICAgICAgICAgICAgIC8vcm9vbUlkIDogcmVjdkRhdGEucm9vbUlkLFxyXG4gICAgICAgICAgICAgICAgLy91c2VySWQgOiBpZCxcclxuICAgICAgICAgICAgICAgIC8vYmV0VGltZXMgOiByZWN2RGF0YS5iZXRUaW1lcyxcclxuICAgICAgICAgICAgICAgIC8vbWF0Y2hJZCA6IG1hdGNoLm1hdGNoSWQsXHJcbiAgICAgICAgICAgICAgICBiZWdpblRpbWVOZXh0IDogbWF0Y2guYmVnaW5UaW1lTmV4dCxcclxuICAgICAgICAgICAgICAgIHNldHRsZVRpbWUgOiBtYXRjaC5zZXR0bGVUaW1lLFxyXG4gICAgICAgICAgICAgICAgLy9iZXRDaGlwIDogcmVjdkRhdGEuYmV0Q2hpcCxcclxuICAgICAgICAgICAgICAgIC8vbWluRGVhbGVyR29sZCA6IHJlY3ZEYXRhLm1pbkRlYWxlckNvaW4sXHJcbiAgICAgICAgICAgICAgICAvL2FyZWFJbmZvIDogcmVjdkRhdGEuYmV0QXJlYXNcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5faW5pdEluSG9tZURhdGEoaW5pdERhdGEpO1xyXG5cclxuICAgICAgICAvL+iusOW9leesrOS4gOW8oOWNoeeJjFxyXG4gICAgICAgIHRoaXMuX2xpc3RfcG9rZXJJbmRleFswXSA9IHJlY3ZEYXRhLnBva2VyO1xyXG4gICAgICAgIHRoaXMub25fYmVmb3JlU3RhcnQoKTtcclxuICAgIH0sXHJcblxyXG4gICAgLy/lvZPmnInmn5DkuKrnjqnlrrbmipXms6gs5YyF5ous6Ieq5bexXHJcbiAgICBuZXRfb3RoZXJHcmFiIDogZnVuY3Rpb24gKHJlY0RhdGEpIHtcclxuICAgICAgICB2YXIgdGlwID0gcmVjRGF0YS50aXA7XHJcbiAgICAgICAgaWYodGlwLmNvZGUgIT0gJzAnKSB7XHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHRpcC50aXApO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgb3RoZXJzID0gcmVjRGF0YS5iZXRzLCBuZXRCZWFuRGF0YTtcclxuICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgb3RoZXJzLmxlbmd0aDsgaSArKyl7XHJcbiAgICAgICAgICAgIG5ldEJlYW5EYXRhID0gb3RoZXJzW2ldO1xyXG4gICAgICAgICAgICAvL2lmKG5ldEJlYW5EYXRhLnNlYXRJbmRleD09PXRoaXMuZ2V0TXlzZWxmQ29tcCgpLmdldFNlYXRJbmRleCgpKWNvbnRpbnVlO1xyXG4gICAgICAgICAgICB2YXIgYXJlYVZhbHVlID0gcGFyc2VJbnQobmV0QmVhbkRhdGEuaXRlbS5zcGxpdCgnXycpWzBdKVxyXG4gICAgICAgICAgICAvL+aKleazqOS/oeaBr1xyXG4gICAgICAgICAgICB2YXIgYmV0dGluZ0RhdGEgPSBHX09CSi5kYXRhX2dyYWJCZXR0aW5nKCk7XHJcbiAgICAgICAgICAgIGJldHRpbmdEYXRhLmdvbGROdW0gPSBHX0NvbmZpZ19ncmFiLm51bV9vdGhlckdyYWJHb2xkTnVtO1xyXG4gICAgICAgICAgICBiZXR0aW5nRGF0YS5nb2xkVmFsdWUgPSBuZXRCZWFuRGF0YS5nb2xkO1xyXG4gICAgICAgICAgICBiZXR0aW5nRGF0YS50YWJsZUluZGV4ID0gYXJlYVZhbHVlO1xyXG4gICAgICAgICAgICBiZXR0aW5nRGF0YS5pc01pbmUgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIHN3aXRjaCAobmV0QmVhbkRhdGEuc2VhdEluZGV4KXtcclxuICAgICAgICAgICAgICAgIGNhc2UgdGhpcy5nZXRNeXNlbGZDb21wKCkuZ2V0U2VhdEluZGV4KCk6XHJcbiAgICAgICAgICAgICAgICAgICAgLy/oh6rlt7HnmoTmipXms6hcclxuICAgICAgICAgICAgICAgICAgICBicmVha1xyXG4gICAgICAgICAgICAgICAgY2FzZSBHX0RBVEEuZ2V0SWRsZVBsYXllcnNTZWF0SW5kZXgoKTpcclxuICAgICAgICAgICAgICAgICAgICAvL+WQg+eTnOe+pOS8l1xyXG4gICAgICAgICAgICAgICAgICAgIGJldHRpbmdEYXRhLnN0YXJ0UG9zID0gdGhpcy5jb21wX2J0bnNDb250YWluZXIuZ2V0SWRsZUJldHRpbmdQb3MoKTtcclxuICAgICAgICAgICAgICAgICAgICAvL+iHquW3seayoeWcqOW6p+S9jeS4iuWPiOacieaKvOazqOimgeaJo+aOieeOqeWutuWIl+ihqOS4reiHquW3seeahOaKleazqOminVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5nZXRNeXNlbGZDb21wKCkuZ2V0U2VhdEluZGV4KCkgJiYgdGhpcy5nZXRNeXNlbGZDb21wKCkuZ2V0SXNCZXR0aW5nRW5kKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy/lpoLmnpzov5nkuKrlkIPnk5znvqTkvJfmmK/oh6rlt7FcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmV0dGluZ0RhdGEuZ29sZFZhbHVlID0gdGhpcy5nZXRNeXNlbGZDb21wKCkucmVkdWNlR29sZEVYKGJldHRpbmdEYXRhLmdvbGRWYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChiZXR0aW5nRGF0YS5nb2xkVmFsdWUgPD0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgLy/mnInlhbbku5bnmoTlkIPnk5znvqTkvJfmipXms6hcclxuICAgICAgICAgICAgICAgICAgICBiZXR0aW5nRGF0YSA9IHRoaXMuY29tcF90YWJsZXNDb250YWluZXIudG91Y2hPbmVUYWJsZShiZXR0aW5nRGF0YS50YWJsZUluZGV4LCBiZXR0aW5nRGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb21wX2dvbGRDb250YWluZXIubW92ZUFkZEdvbGRzKGJldHRpbmdEYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9yZWNvZGVJZGxlQmV0dGluZyhiZXR0aW5nRGF0YS50YWJsZUluZGV4LCBiZXR0aW5nRGF0YS5nb2xkTnVtKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVha1xyXG4gICAgICAgICAgICAgICAgY2FzZSBHX0RBVEEuZ2V0RGVhbGVyU2VhdEluZGV4KCk6XHJcbiAgICAgICAgICAgICAgICAgICAgLy/luoTlrrZcclxuICAgICAgICAgICAgICAgICAgICBicmVha1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICAvL+ato+W4uOW6p+S9jeS4iueOqeWutlxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBwbGF5ZXJDb21wID0gdGhpcy5jb21wX3BsYXllcnNDb250YWluZXIuZ2V0Q29tcEJ5SW5kZXgobmV0QmVhbkRhdGEuc2VhdEluZGV4KTtcclxuICAgICAgICAgICAgICAgICAgICBpZihwbGF5ZXJDb21wKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJldHRpbmdEYXRhLnN0YXJ0UG9zID0gcGxheWVyQ29tcC5nZXRXb3JsZFBvcygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwbGF5ZXJDb21wLmRvQ2hvb3NlKGJldHRpbmdEYXRhLnRhYmxlSW5kZXgsIGJldHRpbmdEYXRhLmdvbGROdW0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBiZXR0aW5nRGF0YSA9IHRoaXMuY29tcF90YWJsZXNDb250YWluZXIudG91Y2hPbmVUYWJsZShiZXR0aW5nRGF0YS50YWJsZUluZGV4LCBiZXR0aW5nRGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb21wX2dvbGRDb250YWluZXIubW92ZUFkZEdvbGRzKGJldHRpbmdEYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVha1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICAvL+e7k+adn+aKleazqO+8jOi/m+WFpee7k+eul1xyXG4gICAgbmV0X2dyYWJFbmQgOiBmdW5jdGlvbiAocmVjdkRhdGEpIHtcclxuICAgICAgICB0aGlzLl90b3VjaFRhYmxlRW5kKCk7XHJcbiAgICAgICAgdmFyIHBva2VySW5mbyA9IHRoaXMuc2V0QmV0dGluZ0VuZEluZm8ocmVjdkRhdGEpO1xyXG4gICAgICAgIGlmKHBva2VySW5mbykgdGhpcy5jb21wX3RvcEVmZmVjdC5wbGF5R3JhYkRvbmVBbmkodGhpcy5vbl9naXZlRml2ZVBva2Vycy5iaW5kKHRoaXMpLCBwb2tlckluZm8pO1xyXG4gICAgICAgIHRoaXMub25fV2FpdCh0aGlzLl9nZXRPZmZTZWNvbmRzKEdHLnNvY2tldE1nci5nZXRTZXJ2ZXJUaW1lKCksIHRoaXMuX25leHRTdGFydFRpbWUpKTtcclxuICAgIH0sXHJcblxyXG4gICAgc2V0QmV0dGluZ0VuZEluZm8gOiBmdW5jdGlvbiAocmVjdkRhdGEpIHtcclxuICAgICAgICB2YXIgcG9rZXJJbmZvLCBwb2tlckluZGV4LCBwb2tlckRhdGE7XHJcbiAgICAgICAgaWYoR19Db25maWdfY29tbW9uLmlzTG9jYWwpIHtcclxuXHJcbiAgICAgICAgfSBlbHNle1xyXG4gICAgICAgICAgICB2YXIgdGlwID0gcmVjdkRhdGEudGlwO1xyXG4gICAgICAgICAgICBzd2l0Y2ggKHRpcC5jb2RlKXtcclxuICAgICAgICAgICAgICAgIGNhc2UgR19UWVBFLnNlcnZlckNvZGVUeXBlLnN1Y2Nlc3M6XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIEdfVFlQRS5zZXJ2ZXJDb2RlVHlwZS5ub0JldHRpbmc6XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5fc3VwZXIocmVjdkRhdGEpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvL+aVtOeQhuWNoeeJjOaVsOaNrlxyXG4gICAgICAgIHBva2VyRGF0YSA9IHJlY3ZEYXRhLnBva2Vyc1swXTtcclxuICAgICAgICB2YXIgcG9rZXJMaXN0ID0gcG9rZXJEYXRhWydjb2RlJ10uc3BsaXQoXCIsXCIpO1xyXG4gICAgICAgIHBva2VySW5mbyA9IFtdO1xyXG4gICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCBwb2tlckxpc3QubGVuZ3RoOyBpICsrKXtcclxuICAgICAgICAgICAgcG9rZXJJbmRleCA9IHBhcnNlSW50KHBva2VyTGlzdFtpXSk7XHJcbiAgICAgICAgICAgIGlmKCFpc05hTihwb2tlckluZGV4KSl7XHJcbiAgICAgICAgICAgICAgICBwb2tlckluZm8ucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgcG9rZXJJbmRleCA6IHBva2VySW5kZXgsXHJcbiAgICAgICAgICAgICAgICAgICAgaXNPcGVuIDogZmFsc2VcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLl9saXN0X3dpblJlc3VsdC5wdXNoKHBva2VyRGF0YS5jYXJkc1BvaW50KTtcclxuICAgICAgICAvL+WFtuS7lueOqeWutlxyXG4gICAgICAgIHZhciBwbGF5ZXJMaXN0ID0gcmVjdkRhdGEucGxheWVyc1xyXG4gICAgICAgIGlmKHBsYXllckxpc3Qpe1xyXG4gICAgICAgICAgICB2YXIgcGxheWVyLCBwbGF5ZXJDb21wO1xyXG4gICAgICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgcGxheWVyTGlzdC5sZW5ndGg7IGkgKyspe1xyXG4gICAgICAgICAgICAgICAgcGxheWVyID0gcGxheWVyTGlzdFtpXTtcclxuICAgICAgICAgICAgICAgIC8vaWYocGxheWVyLnBsYXllcklkID09IEdHLmdldFBsYXllcigpLmdldFBsYXllcklEKCkpIGNvbnRpbnVlO1xyXG5cclxuICAgICAgICAgICAgICAgIHN3aXRjaCAocGxheWVyLnNlYXRJbmRleCl7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBHX0RBVEEuZ2V0RGVhbGVyU2VhdEluZGV4KCk6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8v5bqE5a625Ymp5L2Z6YeR5biBXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29tcF9wbGF5ZXJzQ29udGFpbmVyLmdldFN5c3RlbUNvbXAoKS5zZXRHb2xkVmFsdWUocGxheWVyLmJhbGFuY2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIEdfREFUQS5nZXRJZGxlUGxheWVyc1NlYXRJbmRleCgpOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL+WcuuS4iueOqeWutlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwbGF5ZXJDb21wID0gdGhpcy5jb21wX3BsYXllcnNDb250YWluZXIuZ2V0Q29tcEJ5SW5kZXgocGxheWVyLnNlYXRJbmRleCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHBsYXllckNvbXApIHBsYXllckNvbXAuc2V0UmVzdWx0SW5mbyhwbGF5ZXIuY29pbiwgcGxheWVyLmJhbGFuY2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcG9rZXJJbmZvXHJcbiAgICB9LFxyXG5cclxuICAgIC8v57uT5p2f5oqV5rOo77yM5aaC5p6c6Ieq5bex5pyJ5oqV5rOo6KGM5Li6XHJcbiAgICBuZXRfbWluZUhhc0dyYWIgOiBmdW5jdGlvbiAocmVjdkRhdGEpIHtcclxuICAgICAgICB2YXIgdGlwID0gcmVjdkRhdGEudGlwO1xyXG4gICAgICAgIGlmKHRpcC5jb2RlICE9ICcwJykge1xyXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZyh0aXAudGlwKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIG15SW5mbyA9IHJlY3ZEYXRhLnBsYXllcjtcclxuICAgICAgICB0aGlzLmNvbXBfcGxheWVyc0NvbnRhaW5lci5zZXRNeXNlbGZNb25leShteUluZm8uY29pbiwgbXlJbmZvLmJhbGFuY2UpO1xyXG4gICAgfSxcclxuXHJcbiAgICAvL+acieS6uuWFpeW6p1xyXG4gICAgbmV0X3NvbWVPbmVJbkhvbWUgOiBmdW5jdGlvbiAocmVjRGF0YSkge1xyXG4gICAgICAgIHZhciB0aXAgPSByZWNEYXRhLnRpcDtcclxuICAgICAgICBpZih0aXAuY29kZSAhPSAnMCcpIHtcclxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2codGlwLnRpcCk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBwbGF5ZXIsIHBsYXllckxpc3QgPSByZWNEYXRhLnNlYXRzLCBteVBsYXllcklEID0gR0cuZ2V0UGxheWVySUQoKTtcclxuICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgcGxheWVyTGlzdC5sZW5ndGg7IGkgKyspe1xyXG4gICAgICAgICAgICBwbGF5ZXIgPSBwbGF5ZXJMaXN0W2ldO1xyXG4gICAgICAgICAgICBpZighcGxheWVyIHx8IHBsYXllci5wbGF5ZXIucGxheWVySWQgPT0gbXlQbGF5ZXJJRCkgY29udGludWU7XHJcbiAgICAgICAgICAgIHRoaXMuY29tcF9wbGF5ZXJzQ29udGFpbmVyLmVudGVyT25lUGxheWVyKHBsYXllci5zZWF0SW5kZXgsIHBsYXllci5wbGF5ZXIpO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgLy/pgIDlh7rmiL/pl7TnmoTor7fmsYJcclxuICAgIG5ldF9leGl0SG9tZSA6IGZ1bmN0aW9uIChyZWNEYXRhKSB7XHJcbiAgICAgICAgdmFyIHRpcCA9IHJlY0RhdGEudGlwO1xyXG4gICAgICAgIGlmKHRpcC5jb2RlICE9ICcwJykge1xyXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZyh0aXAudGlwKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgR0cuZXhpdEhvbWUoKTtcclxuICAgIH0sXHJcblxyXG4gICAgX2dldFdhaXRUaW1lU2VjIDogZnVuY3Rpb24gKHdhaXRUaW1lKSB7XHJcbiAgICAgICAgdmFyIHNlcnZlclRpbWUgPSBHRy5zb2NrZXRNZ3IuZ2V0U2VydmVyVGltZSgpO1xyXG4gICAgICAgIHZhciBkYXRlID0gbmV3IERhdGUod2FpdFRpbWUgLSBzZXJ2ZXJUaW1lKTtcclxuICAgICAgICByZXR1cm4gZGF0ZS5nZXRTZWNvbmRzKClcclxuICAgIH0sXHJcblxyXG5cclxuICAgIGFkZExvbmdMaXN0ZW5PblN0YXJ0IDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIEdHLnNvY2tldE1nci5yZWdpc3RlckxvbmcoTmV0VHlwZS5yX2dyYWJfcmVTdGFydEdhbWUsIHRoaXMubmV0X3Jlc2V0R2FtZURhdGEuYmluZCh0aGlzKSk7XHJcbiAgICAgICAgR0cuc29ja2V0TWdyLnJlZ2lzdGVyTG9uZyhOZXRUeXBlLnJfZ3JhYkVuZCwgdGhpcy5uZXRfZ3JhYkVuZC5iaW5kKHRoaXMpKTtcclxuICAgICAgICBHRy5zb2NrZXRNZ3IucmVnaXN0ZXJMb25nKE5ldFR5cGUucl9taW5lSGF2ZUdyYWIsIHRoaXMubmV0X21pbmVIYXNHcmFiLmJpbmQodGhpcykpO1xyXG4gICAgICAgIEdHLnNvY2tldE1nci5yZWdpc3RlckxvbmcoTmV0VHlwZS5yX29uZUluSG9tZSwgdGhpcy5uZXRfc29tZU9uZUluSG9tZS5iaW5kKHRoaXMpKTtcclxuICAgICAgICBHRy5zb2NrZXRNZ3IucmVnaXN0ZXJMb25nKE5ldFR5cGUucl9ncmFiX2V4aXRSZXR1cm4sIHRoaXMubmV0X2V4aXRIb21lLmJpbmQodGhpcykpO1xyXG4gICAgICAgIC8vIEdHLnNvY2tldE1nci5yZWdpc3RlckxvbmcoTmV0VHlwZS5yX2lkbGVUaW1lT3V0LCB0aGlzLm5ldF9pZGxlVGltZU91dC5iaW5kKHRoaXMpKTtcclxuICAgICAgICBHRy5zb2NrZXRNZ3IucmVnaXN0ZXJMb25nKE5ldFR5cGUucl9vdGhlckdyYWIsIHRoaXMubmV0X290aGVyR3JhYi5iaW5kKHRoaXMpKTtcclxuICAgIH0sXHJcblxyXG4gICAgLy8gY2FsbGVkIGV2ZXJ5IGZyYW1lLCB1bmNvbW1lbnQgdGhpcyBmdW5jdGlvbiB0byBhY3RpdmF0ZSB1cGRhdGUgY2FsbGJhY2tcclxuICAgIC8vIHVwZGF0ZTogZnVuY3Rpb24gKGR0KSB7XHJcblxyXG4gICAgLy8gfSxcclxuXHJcbiAgICBvbkRlc3Ryb3kgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5fc3VwZXIoKTtcclxuICAgICAgICBHRy5ncmFiTWdyID0gbnVsbDtcclxuICAgIH1cclxufSk7XHJcbiIsIi8v5oyJ6ZKu566h55CG57G7XHJcblxyXG5cclxuY2MuQ2xhc3Moe1xyXG4gICAgZXh0ZW5kczogcmVxdWlyZSgnQXV0b0RlYWxpbmcnKSxcclxuXHJcbiAgICBwcm9wZXJ0aWVzOiB7XHJcbiAgICAgICAgX2xhc3RCdG4gOiBudWxsLFxyXG5cclxuICAgICAgICBub2RlX2J0bkdyb3VwIDogY2MuTm9kZSxcclxuICAgICAgICAvLyBub2RlX2VmZmVjdE9uQnV0dG9uIDogY2MuTm9kZSxcclxuICAgICAgICBub2RlX2VmZmVjdFVuZGVyQnV0dG9uIDogY2MuTm9kZSxcclxuICAgICAgICBub2RlX2V4aXRIb21lQnRuIDogY2MuTm9kZSwgICAgICAgICAgICAgICAgIC8v6YCA5Ye65oi/6Ze055qE5oyJ6ZKuXHJcbiAgICAgICAgLy/lj7PkuIvop5LnmoTmjInpkq5cclxuICAgICAgICBub2RlX3BsYXllcnNMaXN0IDogY2MuTm9kZSxcclxuICAgICAgICBub2RlX3J1bGVzIDogY2MuTm9kZSxcclxuICAgICAgICBub2RlX3RyZW5kIDogY2MuTm9kZSxcclxuICAgIH0sXHJcblxyXG4gICAgLy8gdXNlIHRoaXMgZm9yIGluaXRpYWxpemF0aW9uXHJcbiAgICBvbkxvYWQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLl9pbml0KCk7XHJcblxyXG4gICAgICAgIHRoaXMuX3JlZ2lzdGVyQWxsQnRuKCk7XHJcbiAgICB9LFxyXG5cclxuICAgIHNldFN0YXJ0SW5mbyA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgdmFsdWVEaWN0ID0gR0cuZ3JhYk1nci5nZXRNeXNlbGZDb21wKCkuZ2V0TW9uZXlDaG9vc2VEaWN0KCk7XHJcbiAgICAgICAgdGhpcy5fc2V0QnRuSW5mbyh2YWx1ZURpY3QpO1xyXG5cclxuICAgICAgICB0aGlzLnNldEJ0bkdyb3VwRW5hYmxlKGZhbHNlKTtcclxuICAgIH0sXHJcblxyXG4gICAgX2luaXQgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5fYnRuQ29tcE5hbWUgPSAnT2JqX29wdGlvbkJ1dHRvbic7XHJcbiAgICAgICAgdGhpcy5faXNBZGFwdFBvcyA9IGZhbHNlO1xyXG4gICAgfSxcclxuXHJcbiAgICBfcmVnaXN0ZXJBbGxCdG4gOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGJ0bnMgPSB0aGlzLm5vZGVfYnRuR3JvdXAuY2hpbGRyZW47XHJcbiAgICAgICAgZm9yKHZhciBpID0gMDsgaSA8IGJ0bnMubGVuZ3RoOyBpICsrKXtcclxuICAgICAgICAgICAgdGhpcy5yZWdpc3RlckJ1dHRvbihidG5zW2ldLCB0aGlzLk9uQ2xpY2tfY2hvb3NlTW9uZXksIHRoaXMsIHBhcnNlSW50KGkpLCB0cnVlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy90aGlzLm5vZGVfZXhpdEhvbWVCdG4ucGFyZW50LmdldENvbXBvbmVudCgnT2JqX2xlZnRUb3BNZW51JykuYmluZEZ1bmModGhpcy5PbkNsaWNrX2V4aXQuYmluZCh0aGlzKSwgdGhpcy5PbkNsaWNrX2NoYW5nZURlc2suYmluZCh0aGlzKSk7XHJcbiAgICAgICAgdGhpcy5yZWdpc3RlckJ1dHRvbih0aGlzLm5vZGVfZXhpdEhvbWVCdG4sIHRoaXMuT25DbGlja19leGl0LCB0aGlzKTtcclxuICAgICAgICAvL+WPs+S4i+inkuaMiemSrlxyXG4gICAgICAgIHRoaXMucmVnaXN0ZXJCdXR0b24odGhpcy5ub2RlX3BsYXllcnNMaXN0LCB0aGlzLk9uQ2xpY2tfcGxheWVyTGlzdCwgdGhpcyk7XHJcbiAgICAgICAgdGhpcy5yZWdpc3RlckJ1dHRvbih0aGlzLm5vZGVfcnVsZXMsIHRoaXMuT25DbGlja19ydWxlcywgdGhpcyk7XHJcbiAgICAgICAgdGhpcy5yZWdpc3RlckJ1dHRvbih0aGlzLm5vZGVfdHJlbmQsIHRoaXMuT25DbGlja190cmVuZCwgdGhpcyk7XHJcbiAgICB9LFxyXG4gICAgLy/ngrnlh7vpgInkuK3nrbnnoIEgIHVzZXJEYXRh5LuOMOW8gOWni1xyXG4gICAgT25DbGlja19jaG9vc2VNb25leSA6IGZ1bmN0aW9uIChldmVudCwgdXNlckRhdGEpIHtcclxuICAgICAgICB0aGlzLmNob29zZU9wdGlvbih1c2VyRGF0YSk7XHJcbiAgICB9LFxyXG4gICAgLy/ngrnlh7vmjaLmoYxcclxuICAgIE9uQ2xpY2tfY2hhbmdlRGVzayA6IGZ1bmN0aW9uICgpIHt9LFxyXG4gICAgLy/ngrnlh7vpgIDlh7rmiL/pl7RcclxuICAgIE9uQ2xpY2tfZXhpdCA6IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgIGlmKEdfQ29uZmlnX2NvbW1vbi5pc0xvY2FsKXtcclxuICAgICAgICAgICAgR0cudGlwc01nci5zaG93Q29uZmlybVRpcF9UV08oR19DSElORVNFLmV4aXRUZXh0MSwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgR0cuZXhpdEhvbWUoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJldHVyblxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYoR0cuZ3JhYk1nci5nZXRJc0dyYWIoKSl7XHJcbiAgICAgICAgICAgIEdHLnRpcHNNZ3Iuc2hvd0NvbmZpcm1UaXBfVFdPKEdfQ0hJTkVTRS5leGl0VGV4dDEsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHZhciBuZXREYXRhID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIHJvb21JZCA6IEdHLmdyYWJNZ3IuZ2V0SG9tZUlEKCksXHJcbiAgICAgICAgICAgICAgICAgICAgaXNCcmVhayA6IHRydWVcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIEdHLnNvY2tldE1nci5TZW5kTXNnKE5ldFR5cGUuc19ncmFiX0V4aXQsIG5ldERhdGEpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgdmFyIG5ldERhdGEgPSB7XHJcbiAgICAgICAgICAgICAgICByb29tSWQgOiBHRy5ncmFiTWdyLmdldEhvbWVJRCgpLFxyXG4gICAgICAgICAgICAgICAgaXNCcmVhayA6IHRydWVcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBHRy5zb2NrZXRNZ3IuU2VuZE1zZyhOZXRUeXBlLnNfZ3JhYl9FeGl0LCBuZXREYXRhKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgfSxcclxuICAgIC8v54K55Ye7546p5a625YiX6KGoXHJcbiAgICBPbkNsaWNrX3BsYXllckxpc3QgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGRhdGEgPSAxO1xyXG4gICAgICAgIHZhciBsYXllciA9IEdHLmdyYWJNZ3Iuc2hvd0RpYWxvZ1VJKEdfUkVTX1VSTC51aU5hbWUucGxheWVyTGlzdCwgZnVuY3Rpb24gKGxheWVyKSB7XHJcbiAgICAgICAgICAgIGxheWVyLnNldERhdGEoZGF0YSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9LFxyXG4gICAgLy/ngrnlh7vmuLjmiI/op4TliJlcclxuICAgIE9uQ2xpY2tfcnVsZXMgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGRhdGEgPSBHX1RZUEUuZ2FtZU1vZHVsZS5ncmFiO1xyXG4gICAgICAgIHZhciBsYXllciA9IEdHLmdyYWJNZ3Iuc2hvd0RpYWxvZ1VJKEdfUkVTX1VSTC51aU5hbWUucnVsZXNJbkhvbWUsIGZ1bmN0aW9uIChsYXllcikge1xyXG4gICAgICAgICAgICBsYXllci5zaG93TGF5ZXIoKTtcclxuICAgICAgICAgICAgbGF5ZXIuc2V0RGF0YShkYXRhKTtcclxuICAgICAgICB9KTtcclxuICAgIH0sXHJcbiAgICAvL+eCueWHu+i1sOWKv+WbvuWIl+ihqFxyXG4gICAgT25DbGlja190cmVuZCA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgZGF0YSA9IEdHLmdyYWJNZ3IuZ2V0SG9tZUlEKCk7XHJcbiAgICAgICAgdmFyIGxheWVyID0gR0cuZ3JhYk1nci5zaG93RGlhbG9nVUkoR19SRVNfVVJMLnVpTmFtZS5ncmFiVHJlbmQsIGZ1bmN0aW9uIChsYXllcikge1xyXG4gICAgICAgICAgICBsYXllci5zZXREYXRhKGRhdGEpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSxcclxuXHJcbiAgICAvLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblxyXG4gICAgLy/pgInkuK3kuIDkuKrnrbnnoIEgIGluZGV4IOS7jjDlvIDlp4tcclxuICAgIGNob29zZU9wdGlvbiA6IGZ1bmN0aW9uIChjaG9vc2VMZXZlbCkge1xyXG4gICAgICAgIGNob29zZUxldmVsID0gcGFyc2VJbnQoY2hvb3NlTGV2ZWwpO1xyXG4gICAgICAgIEdHLmdyYWJNZ3IuZ2V0TXlzZWxmQ29tcCgpLnNldENob29zZUxldmVsKGNob29zZUxldmVsKTtcclxuICAgICAgICB0aGlzLl9zaG93Q2hvb3NlRWZmZWN0KHRoaXMuX2dldEJ0bkJ5SW5kZXgoY2hvb3NlTGV2ZWwpKTtcclxuICAgIH0sXHJcblxyXG4gICAgX3NldEJ0bkluZm8gOiBmdW5jdGlvbiAodmFsdWVEaWN0KSB7XHJcbiAgICAgICAgdmFyIGJ0bnMgPSB0aGlzLm5vZGVfYnRuR3JvdXAuY2hpbGRyZW4sIGluZGV4O1xyXG4gICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCBidG5zLmxlbmd0aDsgaSArKyl7XHJcbiAgICAgICAgICAgIGluZGV4ID0gcGFyc2VJbnQoaSk7XHJcbiAgICAgICAgICAgIGJ0bnNbaV0udGFnID0gdmFsdWVEaWN0W2luZGV4XTtcclxuICAgICAgICAgICAgYnRuc1tpXS5nZXRDb21wb25lbnQodGhpcy5fYnRuQ29tcE5hbWUpLnNob3dNb25leSh2YWx1ZURpY3RbaW5kZXhdLCBmYWxzZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIF9nZXRCdG5CeUluZGV4IDogZnVuY3Rpb24gKGluZGV4KSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubm9kZV9idG5Hcm91cC5jaGlsZHJlbltpbmRleF1cclxuICAgIH0sXHJcbiAgICBjaG9vc2VNb25leSA6IGZ1bmN0aW9uIChpbmRleCkge1xyXG4gICAgICAgIHZhciBidG4gPSB0aGlzLl9nZXRCdG5CeUluZGV4KGluZGV4KTtcclxuICAgICAgICAvL+iOt+WPluesrOS4gOasoei/m+aIv+aYr+WQpuWPr+S4i+azqFxyXG4gICAgICAgIHRoaXMuaXNCZXR0aW5nID0gR0cuZ3JhYk1nci5nZXRGaXJzdEJldHRpbmcoKTtcclxuICAgICAgICB0aGlzLl9zaG93Q2hvb3NlRWZmZWN0KGJ0bik7XHJcbiAgICB9LFxyXG5cclxuICAgIC8v5Yi35paw5oq85a6d5Y+v55So562556CB5pi+56S6XHJcbiAgICByZWZyZXNoR3JhYk9wdGlvbiA6IGZ1bmN0aW9uICh1c2VHb2xkKSB7XHJcbiAgICAgICAgaWYoIXRoaXMuX2xpc3RfbXlHcmFiT3B0aW9uKSB0aGlzLl9saXN0X215R3JhYk9wdGlvbiA9IEdHLmdyYWJNZ3IuZ2V0TXlzZWxmQ29tcCgpLmdldE1vbmV5Q2hvb3NlRGljdCgpO1xyXG4gICAgICAgIGlmKCFHX0RBVEEuaXNOdW1iZXIodXNlR29sZCkpIHVzZUdvbGQgPSBHRy5ncmFiTWdyLmdldE15c2VsZkNvbXAoKS5nZXRHb2xkVmFsdWUoKTtcclxuICAgICAgICB2YXIgdGFyZ2V0Q2hvb3NlID0gbnVsbDtcclxuICAgICAgICB2YXIgbGFzdENob29zZSA9IEdHLmdyYWJNZ3IuZ2V0TXlzZWxmQ29tcCgpLmdldENob29zZUxldmVsKClcclxuICAgICAgICB2YXIgYnRuR3JvdXAgPSB0aGlzLm5vZGVfYnRuR3JvdXAuY2hpbGRyZW5cclxuICAgICAgICBmb3IodmFyIG9wdGlvbiA9IDA7IG9wdGlvbiA8IHRoaXMuX2xpc3RfbXlHcmFiT3B0aW9uLmxlbmd0aDsgb3B0aW9uICsrKXtcclxuICAgICAgICAgICAgaWYodGhpcy5fbGlzdF9teUdyYWJPcHRpb25bb3B0aW9uXSA8PSB1c2VHb2xkKXtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0QnRuRW5hYmxlKGJ0bkdyb3VwW29wdGlvbl0sIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgdGFyZ2V0Q2hvb3NlID0gcGFyc2VJbnQob3B0aW9uKTtcclxuICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICBpZih0aGlzLl9sYXN0QnRuICYmIHRoaXMuX2xhc3RCdG4udGFnID09IHRoaXMuX2xpc3RfbXlHcmFiT3B0aW9uW29wdGlvbl0pe1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2NhbmNlbENob29zZSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRCdG5FbmFibGUoYnRuR3JvdXBbb3B0aW9uXSwgZmFsc2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8v5aaC5p6c5pyJ5Y+W5raI6YCJ5Lit562556CB77yM6ZyA6KaB6YeN5paw6YCJ5oup562556CBXHJcbiAgICAgICAgaWYoIXRoaXMuX2xhc3RCdG4gJiYgR19EQVRBLmlzTnVtYmVyKHRhcmdldENob29zZSkpe1xyXG4gICAgICAgICAgICAvL+S/neaMgeS4iuasoeeahOmAieaLqVxyXG4gICAgICAgICAgICBpZihHRy5ncmFiTWdyLmdldE15c2VsZkNvbXAoKS5nZXRDaG9vc2VMZXZlbCgpIDwgdGFyZ2V0Q2hvb3NlKSB0YXJnZXRDaG9vc2UgPSBHRy5ncmFiTWdyLmdldE15c2VsZkNvbXAoKS5nZXRDaG9vc2VMZXZlbCgpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5fc2hvd0Nob29zZUVmZmVjdChidG5Hcm91cFt0YXJnZXRDaG9vc2VdKTtcclxuICAgICAgICAgICAgR0cuZ3JhYk1nci5nZXRNeXNlbGZDb21wKCkuc2V0Q2hvb3NlTGV2ZWwodGFyZ2V0Q2hvb3NlKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIC8vPT09PT09PT09PT09PT09PT09PT09PT09PT096KGo546wXHJcblxyXG4gICAgLy/orr7nva7mjInpkq7nva7ngbBcclxuICAgIHNldEJ0bkdyb3VwRW5hYmxlIDogZnVuY3Rpb24gKGlzRW5hYmxlKSB7XHJcbiAgICAgICAgdGhpcy5fY2FuY2VsQ2hvb3NlKCk7XHJcbiAgICAgICAgdmFyIGJ0bkdyb3VwID0gdGhpcy5ub2RlX2J0bkdyb3VwLmNoaWxkcmVuO1xyXG4gICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCBidG5Hcm91cC5sZW5ndGg7IGkgKyspe1xyXG4gICAgICAgICAgICAvL+iuvue9ruafkOS4quaMiemSrue9rueBsFxyXG4gICAgICAgICAgICB0aGlzLnNldEJ0bkVuYWJsZShidG5Hcm91cFtpXSwgaXNFbmFibGUpO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG5cclxuICAgIC8v5oyJ6ZKu6YCJ5Lit5pWI5p6cXHJcbiAgICBfc2hvd0Nob29zZUVmZmVjdCA6IGZ1bmN0aW9uICh0YXJnZXRCdG4pIHtcclxuICAgICAgICBpZih0YXJnZXRCdG4pe1xyXG4gICAgICAgICAgICAvL+WPlua2iOS4iuasoeeahOmAieS4reaViOaenFxyXG4gICAgICAgICAgICB0aGlzLl9jYW5jZWxDaG9vc2UoKTtcclxuXHJcbiAgICAgICAgICAgIC8v5oyJ6ZKu6aKc6ImyXHJcbiAgICAgICAgICAgIHRhcmdldEJ0bi5nZXRDb21wb25lbnQodGhpcy5fYnRuQ29tcE5hbWUpLnNob3dNb25leShudWxsLCB0cnVlKTtcclxuICAgICAgICAgICAgLy/mjInpkq7lupXpg6jmlYjmnpxcclxuICAgICAgICAgICAgdGhpcy5fc2hvd1VuZGVyQnRuRWZmZWN0KHRhcmdldEJ0bik7XHJcbiAgICAgICAgICAgIC8v56aB55So6YCJ5Lit5oyJ6ZKu77yM5L2G5piv5LiN572u54GwXHJcbiAgICAgICAgICAgIHRoaXMuc2V0QnRuRW5hYmxlKHRhcmdldEJ0biwgZmFsc2UsIHRydWUpO1xyXG4gICAgICAgICAgICB0aGlzLl9sYXN0QnRuID0gdGFyZ2V0QnRuO1xyXG5cclxuICAgICAgICAgICAgLy/liJrov5vlhaXmuLjmiI/lpoLmnpzlj6/kuIvms6gg5by65Yi26Ieq6YCC5bqUXHJcbiAgICAgICAgICAgIC8vIGlmICh0aGlzLmlzQmV0dGluZyAmJiAhdGhpcy5faXNBZGFwdFBvcykge1xyXG4gICAgICAgICAgICAvLyAgICAgdGhpcy5ub2RlX2VmZmVjdFVuZGVyQnV0dG9uLnBvc2l0aW9uID0gR19UT09MLmFkYXB0UG9zKHRoaXMubm9kZV9lZmZlY3RVbmRlckJ1dHRvbi5wb3NpdGlvbik7XHJcbiAgICAgICAgICAgIC8vICAgICB2YXIgc2l6ZSA9IEdfVE9PTC5hZGFwdFNpemUodGFyZ2V0QnRuLndpZHRoLCB0YXJnZXRCdG4uaGVpZ2h0KTtcclxuICAgICAgICAgICAgLy8gICAgIHRoaXMubm9kZV9lZmZlY3RVbmRlckJ1dHRvbi53aWR0aCA9IHNpemUud2lkdGg7XHJcbiAgICAgICAgICAgIC8vICAgICB0aGlzLl9pc0FkYXB0UG9zID0gdHJ1ZTtcclxuICAgICAgICAgICAgLy8gfSBlbHNlIHtcclxuICAgICAgICAgICAgLy8gICAgIHRoaXMubm9kZV9lZmZlY3RVbmRlckJ1dHRvbi53aWR0aCA9IHRhcmdldEJ0bi53aWR0aDtcclxuICAgICAgICAgICAgLy8gfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy90aGlzLl9jaGFuZ2VCdG5Db2xvcih0YXJnZXRCdG4pO1xyXG4gICAgICAgIC8vXHJcbiAgICAgICAgLy8vL2VmZmVjdFxyXG4gICAgICAgIC8vLy8gLy90aGlzLm5vZGVfZWZmZWN0T25CdXR0b24uYWN0aXZlID0gdHJ1ZTtcclxuICAgICAgICAvL3RoaXMubm9kZV9lZmZlY3RVbmRlckJ1dHRvbi5hY3RpdmUgPSB0cnVlO1xyXG4gICAgICAgIC8vLy9cclxuICAgICAgICAvLy8vIC8vdGhpcy5ub2RlX2VmZmVjdE9uQnV0dG9uLnBvc2l0aW9uID0gY2MucCh0YXJnZXRCdG4ueCwgdGFyZ2V0QnRuLnkpOztcclxuICAgICAgICAvL3RoaXMubm9kZV9lZmZlY3RVbmRlckJ1dHRvbi54ID0gdGFyZ2V0QnRuLng7XHJcbiAgICAgICAgLy90aGlzLm5vZGVfZWZmZWN0VW5kZXJCdXR0b24ueSA9IC10YXJnZXRCdG4uaGVpZ2h0LzI7XHJcbiAgICAgICAgLy8vL+WImui/m+WFpea4uOaIj+WmguaenOWPr+S4i+azqCDlvLrliLboh6rpgILlupRcclxuICAgICAgICAvL2lmICh0aGlzLmlzQmV0dGluZyAmJiAhdGhpcy5faXNBZGFwdFBvcykge1xyXG4gICAgICAgIC8vICAgIHRoaXMubm9kZV9lZmZlY3RVbmRlckJ1dHRvbi5wb3NpdGlvbiA9IEdfVE9PTC5hZGFwdFBvcyh0aGlzLm5vZGVfZWZmZWN0VW5kZXJCdXR0b24ucG9zaXRpb24pO1xyXG4gICAgICAgIC8vICAgIHZhciBzaXplID0gR19UT09MLmFkYXB0U2l6ZSh0YXJnZXRCdG4ud2lkdGgsIHRhcmdldEJ0bi5oZWlnaHQpO1xyXG4gICAgICAgIC8vICAgIHRoaXMubm9kZV9lZmZlY3RVbmRlckJ1dHRvbi53aWR0aCA9IHNpemUud2lkdGg7XHJcbiAgICAgICAgLy8gICAgdGhpcy5faXNBZGFwdFBvcyA9IHRydWU7XHJcbiAgICAgICAgLy99IGVsc2Uge1xyXG4gICAgICAgIC8vICAgIHRoaXMubm9kZV9lZmZlY3RVbmRlckJ1dHRvbi53aWR0aCA9IHRhcmdldEJ0bi53aWR0aDtcclxuICAgICAgICAvL31cclxuICAgIH0sXHJcblxyXG4gICAgLy/lj5bmtojkuIrkuIDmrKHnmoTpgInkuK3mlYjmnpxcclxuICAgIF9jYW5jZWxDaG9vc2UgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYodGhpcy5fbGFzdEJ0bil7XHJcbiAgICAgICAgICAgIHRoaXMuX2hpZGVVbmRlckJ0bkVmZmVjdCgpO1xyXG4gICAgICAgICAgICB0aGlzLl9sYXN0QnRuLmdldENvbXBvbmVudCh0aGlzLl9idG5Db21wTmFtZSkuc2hvd01vbmV5KG51bGwsIGZhbHNlKTtcclxuICAgICAgICAgICAgdGhpcy5zZXRCdG5FbmFibGUodGhpcy5fbGFzdEJ0biwgdHJ1ZSk7XHJcbiAgICAgICAgICAgIHRoaXMuX2xhc3RCdG4gPSBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgLy/mmL7npLrmjInpkq7lupXpg6jmlYjmnpxcclxuICAgIF9zaG93VW5kZXJCdG5FZmZlY3QgOiBmdW5jdGlvbiAodGFyZ2V0QnRuKSB7XHJcbiAgICAgICAgdGhpcy5ub2RlX2VmZmVjdFVuZGVyQnV0dG9uLmFjdGl2ZSA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5ub2RlX2VmZmVjdFVuZGVyQnV0dG9uLnggPSB0YXJnZXRCdG4ueDtcclxuICAgICAgICB0aGlzLm5vZGVfZWZmZWN0VW5kZXJCdXR0b24ueSA9IC10YXJnZXRCdG4uaGVpZ2h0KjAuNjU7XHJcbiAgICB9LFxyXG4gICAgLy/pmpDol4/mjInpkq7nibnmlYhcclxuICAgIF9oaWRlVW5kZXJCdG5FZmZlY3QgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5ub2RlX2VmZmVjdFVuZGVyQnV0dG9uLmFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgfSxcclxuXHJcbiAgICAvLz09PT09PT09PT09PT09PT09PT09PT09PT09PT096I635Y+WXHJcblxyXG4gICAgLy/ojrflj5bova7lrZDoo4XppbDniannmoTkvY3nva5cclxuICAgIGdldFdoZWVsUG9zIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBkZXNpZ25TaXplID0gY2Mudmlldy5nZXREZXNpZ25SZXNvbHV0aW9uU2l6ZSgpO1xyXG4gICAgICAgIHJldHVybiBjYy5wKGRlc2lnblNpemUud2lkdGgqMC44LCBkZXNpZ25TaXplLmhlaWdodCowLjIpXHJcbiAgICB9LFxyXG4gICAgLy/ojrflj5blkIPnk5znvqTkvJfmipXms6jotbfngrlcclxuICAgIGdldElkbGVCZXR0aW5nUG9zIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBwb3MgPSB0aGlzLm5vZGVfcGxheWVyc0xpc3QucG9zaXRpb247XHJcbiAgICAgICAgdmFyIGJhc2VQb3MgPSB0aGlzLm5vZGVfcGxheWVyc0xpc3QucGFyZW50LnBhcmVudC5wb3NpdGlvbjtcclxuICAgICAgICB2YXIgcG9zWCA9IHBvcy54ICsgdGhpcy5ub2RlX3BsYXllcnNMaXN0LnBhcmVudC54K2Jhc2VQb3MueDtcclxuICAgICAgICB2YXIgcG9zWSA9IHBvcy55ICsgdGhpcy5ub2RlX3BsYXllcnNMaXN0LnBhcmVudC55K2Jhc2VQb3MueSArIHRoaXMubm9kZV9wbGF5ZXJzTGlzdC5oZWlnaHQvMjtcclxuICAgICAgICByZXR1cm4gY2MucChwb3NYLCBwb3NZKVxyXG4gICAgfSxcclxuICAgIC8v6I635Y+WdGlw5pi+56S655qE5L2N572uXHJcbiAgICAvLyBnZXRUaXBQb3MgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAvLyAgICAgcmV0dXJuIGNjLnAodGhpcy5ub2RlLngsIHRoaXMubm9kZS55ICsgdGhpcy5ub2RlLmhlaWdodCoxLjEpXHJcbiAgICAvLyB9LFxyXG4gICAgLy8gY2FsbGVkIGV2ZXJ5IGZyYW1lLCB1bmNvbW1lbnQgdGhpcyBmdW5jdGlvbiB0byBhY3RpdmF0ZSB1cGRhdGUgY2FsbGJhY2tcclxuICAgIC8vIHVwZGF0ZTogZnVuY3Rpb24gKGR0KSB7XHJcblxyXG4gICAgLy8gfSxcclxufSk7XHJcbiIsIi8v6YeR5biB5rWB5Yqo5pWI5p6c55qE5aSE55CG5bGCXHJcblxyXG4vL3ZhciBnb2xkSW5mbyA9IHtcclxuLy8gICAgc3RhcnRQb3MgOiBjYy5wKCksXHJcbi8vICAgIHRhcmdldFBvcyA6IGNjLnAoKSxcclxuLy8gICAgZ29sZE51bSA6IDQsXHJcbi8vICAgIHVzZXJEYXRhIDogJycsXHJcbi8vICAgIHRhYmxlSW5kZXggOiAxLFxyXG4vLyAgICBjYWxsRnVuYyA6ICcnLFxyXG4vL31cclxuXHJcbmNjLkNsYXNzKHtcclxuICAgIGV4dGVuZHM6IGNjLkNvbXBvbmVudCxcclxuXHJcbiAgICBwcm9wZXJ0aWVzOiB7XHJcbiAgICAgICAgX3Bvb2wgOiBudWxsLFxyXG4gICAgICAgIF9jYWxsRnVuYyA6IG51bGwsXHJcblxyXG4gICAgICAgIGZyYW1lX2dvbGQgOiBjYy5TcHJpdGVGcmFtZSxcclxuICAgIH0sXHJcblxyXG4gICAgLy8gdXNlIHRoaXMgZm9yIGluaXRpYWxpemF0aW9uXHJcbiAgICBvbkxvYWQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLl9nb2xkU2NhbGUgPSBHX0NvbmZpZ19jb21tb24uc2NhbGVfbW92ZUdvbGQ7XHJcbiAgICAgICAgdGhpcy5fYWRkR29sZFRpbWUgPSBHX0NvbmZpZ19ncmFiLnRpbWVfZ29sZEZseV9BZGQ7XHJcbiAgICAgICAgdGhpcy5fcmVzdWx0R29sZFRpbWUgPSBHX0NvbmZpZ19ncmFiLnRpbWVfZ29sZEZseV9SZXN1bHQ7XHJcblxyXG4gICAgICAgIHRoaXMuX3Bvb2wgPSBuZXcgY2MuTm9kZVBvb2woJ0dyYWJfZ29sZENvbnRhaW5lcicpO1xyXG4gICAgfSxcclxuXHJcbiAgICBtb3ZlQWRkR29sZHMgOiBmdW5jdGlvbiAoZ29sZEluZm8sIGNhbGxGdW5jKSB7XHJcbiAgICAgICAgLy90aGlzLl9jYWxsRnVuYyA9IGNhbGxGdW5jO1xyXG4gICAgICAgIEdHLmF1ZGlvTWdyLnBsYXlTb3VuZCgxNSk7XHJcbiAgICAgICAgdmFyIGdvbGQsYWN0MSwgYWN0MiwgZGVsYXlUaW1lPTAsIGRlbGF5VmFsdWUgPSBHX0NvbmZpZ19ncmFiLnRpbWVfZ29sZEZseV9kZWxheTtcclxuICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgZ29sZEluZm8uZ29sZE51bTsgaSArKyl7XHJcbiAgICAgICAgICAgIGdvbGQgPSB0aGlzLl9nZXRHb2xkKCk7XHJcbiAgICAgICAgICAgIGdvbGQucG9zaXRpb24gPSBnb2xkSW5mby5zdGFydFBvcztcclxuICAgICAgICAgICAgZ29sZC5fZmx5Q2FsbEZ1bmMgPSBnb2xkSW5mby5jYWxsRnVuYztcclxuXHJcbiAgICAgICAgICAgIGFjdDEgPSBjYy5kZWxheVRpbWUoZGVsYXlUaW1lKTtcclxuICAgICAgICAgICAgYWN0MiA9IGNjLm1vdmVUbyh0aGlzLl9hZGRHb2xkVGltZSwgZ29sZEluZm8udGFyZ2V0UG9zKTtcclxuICAgICAgICAgICAgZ29sZC5ydW5BY3Rpb24oY2Muc2VxdWVuY2UoYWN0MSwgYWN0MiwgY2MuY2FsbEZ1bmModGhpcy5fZmx5QWRkR29sZEVuZCwgdGhpcywgZ29sZEluZm8pKSk7XHJcbiAgICAgICAgICAgIGRlbGF5VGltZSArPSBkZWxheVZhbHVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZihnb2xkKSBnb2xkLl9lbmRDYWxsRnVuYyA9IGNhbGxGdW5jO1xyXG4gICAgfSxcclxuICAgIF9mbHlBZGRHb2xkRW5kIDogZnVuY3Rpb24gKHRhcmdldCwgZ29sZEluZm8pIHtcclxuICAgICAgICB2YXIgZ29sZCA9IHRhcmdldDtcclxuICAgICAgICBpZihnb2xkLl9mbHlDYWxsRnVuYykge1xyXG4gICAgICAgICAgICBnb2xkLl9mbHlDYWxsRnVuYygpO1xyXG4gICAgICAgICAgICBnb2xkLl9mbHlDYWxsRnVuYyA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmKGdvbGQuX2VuZENhbGxGdW5jKSB7XHJcbiAgICAgICAgICAgIGdvbGQuX2VuZENhbGxGdW5jKCk7XHJcbiAgICAgICAgICAgIGdvbGQuX2VuZENhbGxGdW5jID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5fcmVtb3ZlR29sZChnb2xkKTtcclxuICAgIH0sXHJcblxyXG4gICAgLy89PT09PT09PT09PT09PT09PT09PT09PT3ph43mnoTph5HluIHnmoTlm57mlLbmmL7npLpcclxuXHJcbiAgICBmbHlSZXN1bHRHb2xkIDogZnVuY3Rpb24gKGRhdGFMaXN0LCBjYWxsRnVuYykge1xyXG4gICAgICAgIGlmKCFkYXRhTGlzdCkgcmV0dXJuO1xyXG4gICAgICAgIHZhciBkYXRhT2JqO1xyXG4gICAgICAgIHRoaXMuX2NhbGxGdW5jID0gY2FsbEZ1bmM7XHJcbiAgICAgICAgZm9yKHZhciBpID0gMDsgaSA8IGRhdGFMaXN0Lmxlbmd0aDsgaSArKyl7XHJcbiAgICAgICAgICAgIGRhdGFPYmogPSBkYXRhTGlzdFtpXTtcclxuICAgICAgICAgICAgaWYoZGF0YU9iail7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9zZXRSZXN1bHRHb2xkcyhkYXRhT2JqKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICBfc2V0UmVzdWx0R29sZHMgOiBmdW5jdGlvbiAoZGF0YU9iaikge1xyXG4gICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCBkYXRhT2JqLmdvbGROdW07IGkgKyspe1xyXG4gICAgICAgICAgICB2YXIgZ29sZCA9IHRoaXMuX2dldEdvbGQoKTtcclxuICAgICAgICAgICAgdmFyIHRhYmxlID0gR0cuZ3JhYk1nci5nZXRUYWJsZShkYXRhT2JqLnRhYmxlSW5kZXgpO1xyXG4gICAgICAgICAgICB2YXIgc3RhcnRQb3MgPSB0YWJsZS5yZW1vdmVPbmVHb2xkSW1nKCk7XHJcbiAgICAgICAgICAgIGlmKCFzdGFydFBvcykgY29udGludWU7XHJcbiAgICAgICAgICAgIGdvbGQucG9zaXRpb24gPSBzdGFydFBvcztcclxuXHJcbiAgICAgICAgICAgIHZhciBhY3QxID0gY2MubW92ZVRvKHRoaXMuX3Jlc3VsdEdvbGRUaW1lLCBkYXRhT2JqLnRhcmdldFBvcyk7XHJcbiAgICAgICAgICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgICAgICAgICAgZ29sZC5ydW5BY3Rpb24oY2Muc2VxdWVuY2UoYWN0MSwgY2MuY2FsbEZ1bmMoZnVuY3Rpb24gKHRhcmdldCkge1xyXG4gICAgICAgICAgICAgICAgc2VsZi5fcmVtb3ZlR29sZCh0YXJnZXQpO1xyXG4gICAgICAgICAgICAgICAgaWYoc2VsZi5jYWxsQmFjayl7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5jYWxsQmFjaygpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuY2FsbEJhY2sgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LCB0aGlzLCB0aGlzLl9yZXN1bHRHb2xkTnVtKSkpO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgLy/liankvZnnmoTph5HluIHlhajpg6jnp7vliqjliLDns7vnu5/luoRcclxuICAgIHJlY29yZExlYXZlR29sZHMgOiBmdW5jdGlvbiAodGFyZ2V0UG9zKSB7XHJcblxyXG4gICAgfSxcclxuXHJcbiAgICAvL2FkZFJlc3VsdEdvbGRzIDogZnVuY3Rpb24gKGRhdGFMaXN0LCBjYWxsRnVuYykge1xyXG4gICAgLy8gICAgaWYoZGF0YUxpc3QubGVuZ3RoIDwgMSkgcmV0dXJuO1xyXG4gICAgLy8gICAgdGhpcy5fY2FsbEZ1bmMgPSBjYWxsRnVuYztcclxuICAgIC8vICAgIHRoaXMuX2xpc3RfcmVzdWx0R29sZCA9IGRhdGFMaXN0O1xyXG4gICAgLy8gICAgdGhpcy5fcmVzdWx0R29sZE51bSA9IDA7XHJcbiAgICAvL1xyXG4gICAgLy8gICAgdGhpcy5fdXBkYXRlX3Jlc3VsdEdvbGQoKTtcclxuICAgIC8vICAgIHRoaXMuc2NoZWR1bGUodGhpcy5fdXBkYXRlX3Jlc3VsdEdvbGQsIEdfQ29uZmlnX2dyYWIudGltZV9nb2xkRmx5X2RlbGF5KTtcclxuICAgIC8vICAgIEdHLmF1ZGlvTWdyLnBsYXlTb3VuZCgxOCk7XHJcbiAgICAvL30sXHJcbiAgICAvL191cGRhdGVfcmVzdWx0R29sZCA6IGZ1bmN0aW9uICgpIHtcclxuICAgIC8vICAgIGlmKHRoaXMuX2xpc3RfcmVzdWx0R29sZC5sZW5ndGggPiAwKXtcclxuICAgIC8vICAgICAgICB2YXIgZGF0YU9iaixnb2xkLHRhYmxlLGFjdDE7XHJcbiAgICAvLyAgICAgICAgZm9yKHZhciBpID0gdGhpcy5fbGlzdF9yZXN1bHRHb2xkLmxlbmd0aC0xOyBpID49IDA7IGkgLS0pe1xyXG4gICAgLy8gICAgICAgICAgICBkYXRhT2JqID0gdGhpcy5fbGlzdF9yZXN1bHRHb2xkW2ldO1xyXG4gICAgLy8gICAgICAgICAgICBpZihkYXRhT2JqLmdvbGROdW0gPiAwKXtcclxuICAgIC8vICAgICAgICAgICAgICAgIGdvbGQgPSB0aGlzLl9nZXRHb2xkKCk7XHJcbiAgICAvLyAgICAgICAgICAgICAgICB0aGlzLl9yZXN1bHRHb2xkTnVtICs9IDE7XHJcbiAgICAvL1xyXG4gICAgLy8gICAgICAgICAgICAgICAgdGFibGUgPSBHRy5ncmFiTWdyLmdldFRhYmxlKGRhdGFPYmoudGFibGVJbmRleCk7XHJcbiAgICAvLyAgICAgICAgICAgICAgICB0YWJsZS5yZW1vdmVPbmVHb2xkSW1nKCk7XHJcbiAgICAvLyAgICAgICAgICAgICAgICBnb2xkLnBvc2l0aW9uID0gdGFibGUuZ2V0V29ybGRQb3MoKTtcclxuICAgIC8vXHJcbiAgICAvLyAgICAgICAgICAgICAgICBhY3QxID0gY2MubW92ZVRvKHRoaXMuX3Jlc3VsdEdvbGRUaW1lLCBkYXRhT2JqLnRhcmdldFBvcyk7XHJcbiAgICAvLyAgICAgICAgICAgICAgICBnb2xkLnJ1bkFjdGlvbihjYy5zZXF1ZW5jZShhY3QxLCBjYy5jYWxsRnVuYyh0aGlzLl9mbHlSZXN1bHRHb2xkRW5kLCB0aGlzLCB0aGlzLl9yZXN1bHRHb2xkTnVtKSkpO1xyXG4gICAgLy8gICAgICAgICAgICAgICAgZGF0YU9iai5nb2xkTnVtIC09IDE7XHJcbiAgICAvLyAgICAgICAgICAgIH1lbHNlIHtcclxuICAgIC8vICAgICAgICAgICAgICAgIGlmKGRhdGFPYmouY2FsbEZ1bmMpIGRhdGFPYmouY2FsbEZ1bmMoZGF0YU9iai50YWJsZUluZGV4KTtcclxuICAgIC8vICAgICAgICAgICAgICAgIHRoaXMuX2xpc3RfcmVzdWx0R29sZC5zcGxpY2UoaSwgMSk7XHJcbiAgICAvLyAgICAgICAgICAgICAgICBpZih0aGlzLl9saXN0X3Jlc3VsdEdvbGQubGVuZ3RoIDw9IDApe1xyXG4gICAgLy8gICAgICAgICAgICAgICAgICAgIHRoaXMudW5zY2hlZHVsZSh0aGlzLl91cGRhdGVfcmVzdWx0R29sZCk7XHJcbiAgICAvLyAgICAgICAgICAgICAgICAgICAgdGhpcy5fbGlzdF9yZXN1bHRHb2xkID0gbnVsbDtcclxuICAgIC8vICAgICAgICAgICAgICAgIH1cclxuICAgIC8vICAgICAgICAgICAgfVxyXG4gICAgLy8gICAgICAgIH1cclxuICAgIC8vICAgIH1cclxuICAgIC8vfSxcclxuICAgIC8vX2ZseVJlc3VsdEdvbGRFbmQgOiBmdW5jdGlvbiAodGFyZ2V0LCB1c2VyRGF0YSkge1xyXG4gICAgLy8gICAgdGhpcy5fcmVtb3ZlR29sZCh0YXJnZXQpO1xyXG4gICAgLy8gICAgaWYoIXRoaXMuX2xpc3RfcmVzdWx0R29sZCAmJiB1c2VyRGF0YSA9PSB0aGlzLl9yZXN1bHRHb2xkTnVtKXtcclxuICAgIC8vICAgICAgICB0aGlzLl9yZXN1bHRHb2xkTnVtID0gMDtcclxuICAgIC8vICAgICAgICBpZih0aGlzLl9jYWxsRnVuYyl7XHJcbiAgICAvLyAgICAgICAgICAgIHRoaXMuX2NhbGxGdW5jKCk7XHJcbiAgICAvLyAgICAgICAgICAgIHRoaXMuX2NhbGxGdW5jID0gbnVsbDtcclxuICAgIC8vICAgICAgICB9XHJcbiAgICAvLyAgICB9XHJcbiAgICAvL30sXHJcblxyXG4gICAgX2dldEdvbGQgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGdvbGROb2RlID0gdGhpcy5fcG9vbC5nZXQoKTtcclxuICAgICAgICBpZighZ29sZE5vZGUpe1xyXG4gICAgICAgICAgICBnb2xkTm9kZSA9IG5ldyBjYy5Ob2RlKCk7XHJcbiAgICAgICAgICAgIHZhciBzcCA9IGdvbGROb2RlLmFkZENvbXBvbmVudChjYy5TcHJpdGUpO1xyXG4gICAgICAgICAgICBzcC5zcHJpdGVGcmFtZSA9IHRoaXMuZnJhbWVfZ29sZDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZ29sZE5vZGUucGFyZW50ID0gdGhpcy5ub2RlO1xyXG4gICAgICAgIGdvbGROb2RlLnNjYWxlID0gdGhpcy5fZ29sZFNjYWxlO1xyXG4gICAgICAgIGdvbGROb2RlLmFjdGl2ZSA9IHRydWU7XHJcbiAgICAgICAgcmV0dXJuIGdvbGROb2RlO1xyXG4gICAgfSxcclxuXHJcbiAgICBfcmVtb3ZlR29sZCA6IGZ1bmN0aW9uIChnb2xkZU5vZGUpIHtcclxuICAgICAgICBnb2xkZU5vZGUuYWN0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5fcG9vbC5wdXQoZ29sZGVOb2RlKTtcclxuICAgIH0sXHJcblxyXG4gICAgY2xlYXJBbGwgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5ub2RlLnN0b3BBbGxBY3Rpb25zKCk7XHJcbiAgICAgICAgdmFyIGdvbGRMaXN0ID0gdGhpcy5ub2RlLmNoaWxkcmVuO1xyXG4gICAgICAgIHZhciBudW0gPSBnb2xkTGlzdC5sZW5ndGg7XHJcbiAgICAgICAgZm9yKHZhciBpID0gbnVtLTE7IGkgPj0gMDsgaSAtLSl7XHJcbiAgICAgICAgICAgIHRoaXMuX3JlbW92ZUdvbGQoZ29sZExpc3RbaV0pO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgLy8gY2FsbGVkIGV2ZXJ5IGZyYW1lLCB1bmNvbW1lbnQgdGhpcyBmdW5jdGlvbiB0byBhY3RpdmF0ZSB1cGRhdGUgY2FsbGJhY2tcclxuICAgIC8vIHVwZGF0ZTogZnVuY3Rpb24gKGR0KSB7XHJcblxyXG4gICAgLy8gfSxcclxufSk7XHJcbiIsIi8v5Y2V5Liq5oqV5rOo5Yy65Z+f5qC85a2QXHJcblxyXG5cclxuY2MuQ2xhc3Moe1xyXG4gICAgZXh0ZW5kczogY2MuQ29tcG9uZW50LFxyXG5cclxuICAgIHByb3BlcnRpZXM6IHtcclxuICAgICAgICBfb3duZXJHb2xkIDogMCxcclxuICAgICAgICBfYXJlYUdvbGQgOiAwLFxyXG4gICAgICAgIF9nb2xkRnJhbWUgOiBudWxsLFxyXG4gICAgICAgIF9idWxsVHlwZSA6IG51bGwsXHJcbiAgICAgICAgX211bHRpcGxlIDogMSxcclxuICAgICAgICBfbWF4QWRhcHRHb2xkIDogbnVsbCxcclxuICAgICAgICBfY3VyR29sZE51bSA6IG51bGwsXHJcbiAgICAgICAgX2lzV2luIDogbnVsbCxcclxuXHJcbiAgICAgICAgbnVtX3Jlc3VsdCA6IHtcclxuICAgICAgICAgICAgZGVmYXVsdCA6IDAsXHJcbiAgICAgICAgICAgIHR5cGUgOiBjYy5JbnRlZ2VyLFxyXG4gICAgICAgICAgICBkaXNwbGF5TmFtZSA6ICfku6PooajnmoTnu5PmnpzlgLwnXHJcbiAgICAgICAgfSxcclxuICAgICAgICBsYWJlbF9tdWx0aXBsZSA6IHtcclxuICAgICAgICAgICAgZGVmYXVsdCA6IG51bGwsXHJcbiAgICAgICAgICAgIHR5cGUgOiBjYy5MYWJlbCxcclxuICAgICAgICAgICAgZGlzcGxheU5hbWUgOiAn5YCN5pWwJ1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgbm9kZV9nb2xkQ29udGFpbmVyIDoge1xyXG4gICAgICAgICAgICBkZWZhdWx0IDogbnVsbCxcclxuICAgICAgICAgICAgdHlwZSA6IGNjLk5vZGUsXHJcbiAgICAgICAgICAgIGRpc3BsYXlOYW1lIDogJ+mHkeW4geWuueWZqCdcclxuICAgICAgICB9LFxyXG4gICAgICAgIGxhYmVsX2FyZWFWYWx1ZSA6IHtcclxuICAgICAgICAgICAgZGVmYXVsdCA6IG51bGwsXHJcbiAgICAgICAgICAgIHR5cGUgOiBjYy5MYWJlbCxcclxuICAgICAgICAgICAgZGlzcGxheU5hbWUgOiAn5qC85a2Q5YaF5oC76YeR5biBJ1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgbGFiZWxfb3duZXJWYWx1ZSA6IHtcclxuICAgICAgICAgICAgZGVmYXVsdCA6IG51bGwsXHJcbiAgICAgICAgICAgIHR5cGUgOiBjYy5MYWJlbCxcclxuICAgICAgICAgICAgZGlzcGxheU5hbWUgOiAn5oqV5rOo5YC8J1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgbGFiZWxfcmVzdWx0TXVsdGlwbGUgOiB7XHJcbiAgICAgICAgICAgIGRlZmF1bHQgOiBudWxsLFxyXG4gICAgICAgICAgICB0eXBlIDogY2MuTGFiZWwsXHJcbiAgICAgICAgICAgIGRpc3BsYXlOYW1lIDogJ+e7k+aenOWAjeaVsCdcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIC8vIHVzZSB0aGlzIGZvciBpbml0aWFsaXphdGlvblxyXG4gICAgb25Mb2FkOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5faW5pdCgpO1xyXG4gICAgfSxcclxuXHJcbiAgICBfaW5pdCA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLl9vd25lckZvcm1hdFN0ciA9ICc8Yj4lczwvYj4nO1xyXG4gICAgICAgIC8vdGhpcy5fYXJlYUZvcm1hdFN0ciA9ICc8Yj4lczwvYj4nO1xyXG4gICAgICAgIC8vdGhpcy5fbXVsdGlwbGVGb3JtYXRTdHIgPSAnPGI+JXM8L2I+JztcclxuICAgICAgICAvL3RoaXMuX2FyZWFGb3JtYXRTdHIgPSAnJztcclxuICAgICAgICAvL3RoaXMuX211bHRpcGxlRm9ybWF0U3RyID0gJyc7XHJcbiAgICAgICAgLy90aGlzLm5vZGVfZ29sZENvbnRhaW5lci54ICs9IDIwMDtcclxuICAgICAgICB2YXIgcmF0ZSA9IEdfQ29uZmlnX2dyYWIubnVtX2dvbGRJbWdBcmVhO1xyXG4gICAgICAgIC8vIHRoaXMuX21pbkdvbGRYID0gLXRoaXMubm9kZS53aWR0aCpyYXRlKjEuMztcclxuICAgICAgICB0aGlzLl9tYXhHb2xkWCA9IHRoaXMubm9kZS53aWR0aCpyYXRlKjEuMztcclxuICAgICAgICAvLyB0aGlzLl9taW5Hb2xkWSA9IHRoaXMubm9kZS5oZWlnaHQqcmF0ZSowLjM1O1xyXG4gICAgICAgIHRoaXMuX21heEdvbGRZID0gLSB0aGlzLm5vZGUuaGVpZ2h0KnJhdGUqMC4zNVxyXG4gICAgICAgIHRoaXMuX21heEFkYXB0R29sZCA9IDUwO1xyXG4gICAgICAgIHRoaXMuX2N1ckdvbGROdW0gPSAwO1xyXG4gICAgICAgIHRoaXMuX2xvc2VDb2xvciA9IG5ldyBjYy5Db2xvcigyNTMsIDQxLDMxKTsgLy/lpLHotKXnmoTpopzoibJcclxuICAgICAgICB0aGlzLl93aW5Db2xvciA9IHRoaXMubGFiZWxfb3duZXJWYWx1ZS5ub2RlLmNvbG9yLCAvL+iDnOWIqeeahOminOiJslxyXG5cclxuXHJcbiAgICAgICAgdGhpcy5fZ29sZFNjYWxlID0gR19Db25maWdfZ3JhYi5zY2FsZV9tb3ZlR29sZDtcclxuICAgICAgICB0aGlzLmNvbXBfc2Nyb2xsVmFsdWUgPSB0aGlzLmdldENvbXBvbmVudCgnT2JqX3Njcm9sbFZhbHVlJyk7XHJcbiAgICB9LFxyXG5cclxuICAgIHNldEluZm8gOiBmdW5jdGlvbiAoZ29sZEZyYW1lLCBidWxsVHlwZSwgbXVsdGlwbGUpIHtcclxuICAgICAgICB0aGlzLl9nb2xkRnJhbWUgPSBnb2xkRnJhbWU7XHJcbiAgICAgICAgdGhpcy5fYnVsbFR5cGUgPSBidWxsVHlwZTtcclxuICAgICAgICB0aGlzLl9tdWx0aXBsZSA9IHBhcnNlSW50KG11bHRpcGxlKTtcclxuICAgIH0sXHJcblxyXG4gICAgY2xlYXJEYXRhIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuX293bmVyR29sZCA9IDA7XHJcbiAgICAgICAgdGhpcy5fYXJlYUdvbGQgPSAwO1xyXG4gICAgICAgIHRoaXMuX2lzV2luID0gZmFsc2U7XHJcblxyXG4gICAgICAgIHRoaXMuX3NldE11bHRpcGxlKCk7XHJcbiAgICAgICAgdGhpcy5fY2xlYXJHb2xkSW1nKCk7XHJcbiAgICAgICAgdGhpcy5sYWJlbF9hcmVhVmFsdWUuc3RyaW5nID0gJyc7XHJcbiAgICAgICAgdGhpcy5sYWJlbF9vd25lclZhbHVlLm5vZGUuY29sb3IgPSB0aGlzLl93aW5Db2xvcjsvL+iDnOWIqeminOiJslxyXG4gICAgICAgIHRoaXMuX3NldE93bmVyR29sZCgwKTtcclxuICAgIH0sXHJcblxyXG4gICAgT25DbGlja190YWJsZSA6IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgIHZhciBkYXRhT2JqID0gR19PQkouZGF0YV9ncmFiQmV0dGluZygpO1xyXG4gICAgICAgIGRhdGFPYmoudGFibGVJbmRleCA9IHRoaXMuZ2V0UmVzdWx0VHlwZSgpO1xyXG4gICAgICAgIGRhdGFPYmoudGFyZ2V0UG9zID0gdGhpcy5nZXRHb2xkQ2VudGVyUG9zKCk7XHJcbiAgICAgICAgZGF0YU9iai5jYWxsRnVuYyA9IHRoaXMuX2dvbGRBZGQuYmluZCh0aGlzKTtcclxuXHJcbiAgICAgICAgR0cuZ3JhYk1nci5wbGF5TXlHb2xkTW92ZShkYXRhT2JqKTtcclxuICAgIH0sXHJcbiAgICBfZ29sZEFkZCA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLl9hZGRPbmVHb2xkSW1nKCk7XHJcbiAgICB9LFxyXG5cclxuICAgIG90aGVyQWRkR29sZCA6IGZ1bmN0aW9uIChnb2xkSW5mbykge1xyXG4gICAgICAgIGdvbGRJbmZvLnRhcmdldFBvcyA9IHRoaXMuZ2V0V29ybGRQb3MoKTtcclxuICAgICAgICBnb2xkSW5mby5jYWxsRnVuYyA9IHRoaXMuX2dvbGRBZGQuYmluZCh0aGlzKTtcclxuXHJcbiAgICAgICAgdmFyIGFkZEdvbGRWYWx1ZSA9IGdvbGRJbmZvLmdvbGRWYWx1ZTtcclxuICAgICAgICBpZihnb2xkSW5mby5pc01pbmUpe1xyXG4gICAgICAgICAgICB0aGlzLmFkZE93bmVyR29sZChhZGRHb2xkVmFsdWUpOy8v6Ieq5bex5oq85rOoXHJcbiAgICAgICAgfWVsc2UgdGhpcy5fYWRkT3RoZXJzR29sZChhZGRHb2xkVmFsdWUpOy8v5LuW5Lq65oq85rOoXHJcbiAgICAgICAgcmV0dXJuIGdvbGRJbmZvXHJcbiAgICB9LFxyXG5cclxuICAgIC8v6Ieq5bex5oq85rOo5YC8XHJcbiAgICBhZGRPd25lckdvbGQgOiBmdW5jdGlvbiAoZ29sZFZhbHVlKSB7XHJcbiAgICAgICAgaWYoIWdvbGRWYWx1ZSkgcmV0dXJuO1xyXG4gICAgICAgIHRoaXMuX293bmVyR29sZCArPSBnb2xkVmFsdWU7XHJcbiAgICAgICAgdGhpcy5fc2V0T3duZXJHb2xkKHRoaXMuX293bmVyR29sZCk7XHJcbiAgICAgICAgdGhpcy5fYWRkT3RoZXJzR29sZChnb2xkVmFsdWUpO1xyXG4gICAgfSxcclxuICAgIC8v5LuW5Lq65oq85rOo5YC8XHJcbiAgICBfYWRkT3RoZXJzR29sZCA6IGZ1bmN0aW9uIChnb2xkVmFsdWUpIHtcclxuICAgICAgICBpZighZ29sZFZhbHVlKSBnb2xkVmFsdWUgPSAwO1xyXG4gICAgICAgIHRoaXMuX2FyZWFHb2xkICs9IGdvbGRWYWx1ZTtcclxuICAgICAgICB0aGlzLl9zZXRBcmVhR29sZCh0aGlzLl9hcmVhR29sZCk7XHJcbiAgICB9LFxyXG5cclxuICAgIF9zZXRPd25lckdvbGQgOiBmdW5jdGlvbiAoZ29sZE51bSkge1xyXG4gICAgICAgIGlmKCFnb2xkTnVtKXtcclxuICAgICAgICAgICAgdGhpcy5sYWJlbF9vd25lclZhbHVlLm5vZGUucGFyZW50LmFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICB0aGlzLmxhYmVsX293bmVyVmFsdWUubm9kZS5wYXJlbnQuYWN0aXZlID0gdHJ1ZTtcclxuICAgICAgICAgICAgLy90aGlzLmxhYmVsX293bmVyVmFsdWUuc3RyaW5nID0gR19UT09MLmZvcm1hdFN0cih0aGlzLl9vd25lckZvcm1hdFN0ciwgR19UT09MLmNoYW5nZU1vbmV5KGdvbGROdW0pKTtcclxuICAgICAgICAgICAgdGhpcy5sYWJlbF9vd25lclZhbHVlLnN0cmluZyA9IEdfVE9PTC5jaGFuZ2VNb25leShnb2xkTnVtKTtcclxuICAgICAgICAgICAgLy90aGlzLmxhYmVsX293bmVyVmFsdWUuc3RyaW5nID0gR19UT09MLmNoYW5nZU1vbmV5KGdvbGROdW0pO1xyXG4gICAgICAgICAgICB0aGlzLmxhYmVsX3Jlc3VsdE11bHRpcGxlLnN0cmluZyA9ICcnO1xyXG4gICAgICAgICAgICB0aGlzLl9jaGFuZ2VEb3duTGFiZWwodGhpcy5sYWJlbF9vd25lclZhbHVlLm5vZGUsIGZhbHNlKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgX3NldEFyZWFHb2xkIDogZnVuY3Rpb24gKGdvbGROdW0pIHtcclxuICAgICAgICBpZighZ29sZE51bSkgdGhpcy5sYWJlbF9hcmVhVmFsdWUuc3RyaW5nID0gJyc7XHJcbiAgICAgICAgZWxzZSB0aGlzLmxhYmVsX2FyZWFWYWx1ZS5zdHJpbmcgPSBHX1RPT0wuY2hhbmdlTW9uZXkoZ29sZE51bSk7XHJcbiAgICAgICAgLy9lbHNlIHRoaXMubGFiZWxfYXJlYVZhbHVlLnN0cmluZyA9IEdfVE9PTC5mb3JtYXRTdHIodGhpcy5fYXJlYUZvcm1hdFN0ciwgR19UT09MLmNoYW5nZU1vbmV5KGdvbGROdW0pKTtcclxuICAgIH0sXHJcblxyXG4gICAgc2hvd093bmVyUmVzdWx0IDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmKHRoaXMuX293bmVyR29sZCA8IDEpIHJldHVybjtcclxuICAgICAgICB2YXIgc2hvd1N0ciA9IEdfVE9PTC5jaGFuZ2VNb25leSh0aGlzLl9vd25lckdvbGQpO1xyXG4gICAgICAgIHRoaXMuX2NoYW5nZURvd25MYWJlbCh0aGlzLmxhYmVsX293bmVyVmFsdWUubm9kZSwgdGhpcy5faXNXaW4pO1xyXG4gICAgICAgIGlmKCF0aGlzLl9pc1dpbikge1xyXG4gICAgICAgICAgICBzaG93U3RyID0gJy0nK3Nob3dTdHI7XHJcbiAgICAgICAgICAgIHRoaXMubGFiZWxfcmVzdWx0TXVsdGlwbGUuc3RyaW5nID0gJyc7XHJcbiAgICAgICAgICAgIHRoaXMubGFiZWxfb3duZXJWYWx1ZS5zdHJpbmcgPSBzaG93U3RyO1xyXG4gICAgICAgICAgICB0aGlzLmxhYmVsX293bmVyVmFsdWUubm9kZS5jb2xvciA9IHRoaXMuX2xvc2VDb2xvcjsvL+Wksei0peminOiJslxyXG4gICAgICAgIH0gZWxzZXtcclxuICAgICAgICAgICAgLy/og5zliKlcclxuICAgICAgICAgICAgdGhpcy5sYWJlbF9yZXN1bHRNdWx0aXBsZS5zdHJpbmcgPSAnWCcrdGhpcy5fbXVsdGlwbGU7XHJcbiAgICAgICAgICAgIHZhciB3aW5WYWx1ZSA9IHRoaXMuX293bmVyR29sZCp0aGlzLl9tdWx0aXBsZTtcclxuICAgICAgICAgICAgdmFyIGRhdGFPYmogPSB7XHJcbiAgICAgICAgICAgICAgICBzdGFydE51bSA6IDAsXHJcbiAgICAgICAgICAgICAgICB0YXJnZXROdW0gOiB3aW5WYWx1ZSxcclxuICAgICAgICAgICAgICAgIGxhYmVsIDogdGhpcy5sYWJlbF9vd25lclZhbHVlLFxyXG4gICAgICAgICAgICAgICAgZm9ybWF0U3RyIDogJycsXHJcbiAgICAgICAgICAgICAgICBjYWxsRnVuYyA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmxhYmVsX293bmVyVmFsdWUuc3RyaW5nID0gR19UT09MLmNoYW5nZU1vbmV5KHdpblZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICAvL3RoaXMubGFiZWxfb3duZXJWYWx1ZS5ub2RlLmNvbG9yID0gdGhpcy5fd2luQ29sb3I7Ly/og5zliKnpopzoibJcclxuICAgICAgICAgICAgICAgIH0uYmluZCh0aGlzKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuY29tcF9zY3JvbGxWYWx1ZS5zY3JvbGxMYWJlbChkYXRhT2JqKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy90aGlzLmxhYmVsX293bmVyVmFsdWUuc3RyaW5nID0gR19UT09MLmZvcm1hdFN0cih0aGlzLl9vd25lckZvcm1hdFN0ciwgc2hvd1N0cik7XHJcbiAgICB9LFxyXG4gICAgLy/mu5rliqjph5HluIHnu5PmnZ9cclxuICAgIF9zY3JvbGxDYWxsIDogZnVuY3Rpb24gKCkge1xyXG5cclxuICAgIH0sXHJcbiAgICBfc2V0TXVsdGlwbGUgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHN0ciA9IHRoaXMuX211bHRpcGxlICsgJ+WAjSdcclxuICAgICAgICB0aGlzLmxhYmVsX211bHRpcGxlLnN0cmluZyA9IHN0cjtcclxuICAgIH0sXHJcbiAgICBfYWRkT25lR29sZEltZyA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZighdGhpcy5fZ29sZEZyYW1lKSByZXR1cm47XHJcblxyXG4gICAgICAgIHZhciByYXRlID0gdGhpcy5fY3VyR29sZE51bS90aGlzLl9tYXhBZGFwdEdvbGQ7XHJcbiAgICAgICAgcmF0ZSA9IE1hdGgubWluKE1hdGgubWF4KHJhdGUsIDAuNTUpLCAxKTtcclxuICAgICAgICB2YXIgaXNVcCA9IEdfVE9PTC5nZXRSYW5kb21Cb29sKCkgPyAxIDogLTE7XHJcbiAgICAgICAgdmFyIGdvbGRYID0gR19UT09MLmdldFJhbmRvbUFyZWEoMCwgdGhpcy5fbWF4R29sZFgqcmF0ZSkgKiBpc1VwO1xyXG4gICAgICAgIGlzVXAgPSBHX1RPT0wuZ2V0UmFuZG9tQm9vbCgpID8gMSA6IC0xO1xyXG4gICAgICAgIHZhciBnb2xkWSA9IEdfVE9PTC5nZXRSYW5kb21BcmVhKDAsIHRoaXMuX21heEdvbGRZKnJhdGUpICogaXNVcDtcclxuICAgICAgICB2YXIgZ29sZCA9IHRoaXMuX2dldEdvbGQoKTtcclxuICAgICAgICBnb2xkLnBvc2l0aW9uID0gY2MucCgwLDApO1xyXG4gICAgICAgIGdvbGQucnVuQWN0aW9uKGNjLm1vdmVUbygwLjM1LGdvbGRYLGdvbGRZKSk7XHJcbiAgICAgICAgdGhpcy5fY3VyR29sZE51bSArPSAxO1xyXG4gICAgfSxcclxuXHJcbiAgICByZW1vdmVPbmVHb2xkSW1nIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBnb2xkID0gdGhpcy5ub2RlX2dvbGRDb250YWluZXIuY2hpbGRyZW5bMF07XHJcbiAgICAgICAgaWYoZ29sZCl7XHJcbiAgICAgICAgICAgIHZhciB3b3JsZFBvcyA9IHRoaXMuZ2V0V29ybGRQb3MoKTtcclxuICAgICAgICAgICAgdmFyIGN1clBvcyA9IGNjLnAod29ybGRQb3MueCArIGdvbGQueCwgd29ybGRQb3MueSArIGdvbGQueSk7XHJcbiAgICAgICAgICAgIHRoaXMuX3JlbW92ZUdvbGQoZ29sZCk7XHJcbiAgICAgICAgICAgIHRoaXMuX2N1ckdvbGROdW0gLT0gMTtcclxuICAgICAgICAgICAgcmV0dXJuIGN1clBvc1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH0sXHJcblxyXG4gICAgX2dldEdvbGQgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYoIXRoaXMuX3Bvb2wpIHRoaXMuX3Bvb2wgPSBuZXcgY2MuTm9kZVBvb2woJ0dyYWJfb25lVGFibGUnK3RoaXMubnVtX3Jlc3VsdCk7XHJcblxyXG4gICAgICAgIHZhciBnb2xkTm9kZSA9IHRoaXMuX3Bvb2wuZ2V0KCk7XHJcbiAgICAgICAgaWYoIWdvbGROb2RlKXtcclxuICAgICAgICAgICAgZ29sZE5vZGUgPSBuZXcgY2MuTm9kZSgpO1xyXG4gICAgICAgICAgICB2YXIgc3AgPSBnb2xkTm9kZS5hZGRDb21wb25lbnQoY2MuU3ByaXRlKTtcclxuICAgICAgICAgICAgc3Auc3ByaXRlRnJhbWUgPSB0aGlzLl9nb2xkRnJhbWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGdvbGROb2RlLnBhcmVudCA9IHRoaXMubm9kZV9nb2xkQ29udGFpbmVyO1xyXG4gICAgICAgIGdvbGROb2RlLnNjYWxlID0gKDEvdGhpcy5ub2RlLnBhcmVudC5zY2FsZSkqdGhpcy5fZ29sZFNjYWxlO1xyXG4gICAgICAgIGdvbGROb2RlLmFjdGl2ZSA9IHRydWU7XHJcbiAgICAgICAgcmV0dXJuIGdvbGROb2RlO1xyXG4gICAgfSxcclxuICAgIF9yZW1vdmVHb2xkIDogZnVuY3Rpb24gKGdvbGRlTm9kZSkge1xyXG4gICAgICAgIGdvbGRlTm9kZS5zdG9wQWxsQWN0aW9ucygpO1xyXG4gICAgICAgIGdvbGRlTm9kZS5hY3RpdmUgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLl9wb29sLnB1dChnb2xkZU5vZGUpO1xyXG4gICAgfSxcclxuXHJcbiAgICBfY2xlYXJHb2xkSW1nIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBnb2xkcyA9IHRoaXMubm9kZV9nb2xkQ29udGFpbmVyLmNoaWxkcmVuO1xyXG4gICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCBnb2xkcy5sZW5ndGg7IGkgKyspe1xyXG4gICAgICAgICAgICBnb2xkc1tpXS5kZXN0cm95KCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuX2N1ckdvbGROdW0gPSAwO1xyXG4gICAgfSxcclxuXHJcbiAgICBzZXRUb3VjaEVuYWJsZSA6IGZ1bmN0aW9uIChpc0VuYWJsZSkge1xyXG4gICAgICAgIGlmKGlzRW5hYmxlKXtcclxuICAgICAgICAgICAgdGhpcy5ub2RlLm9uKGNjLk5vZGUuRXZlbnRUeXBlLlRPVUNIX1NUQVJULCB0aGlzLk9uQ2xpY2tfdGFibGUsIHRoaXMpO1xyXG4gICAgICAgIH1lbHNlIHRoaXMubm9kZS5vZmYoY2MuTm9kZS5FdmVudFR5cGUuVE9VQ0hfU1RBUlQsIHRoaXMuT25DbGlja190YWJsZSwgdGhpcyk7XHJcbiAgICB9LFxyXG4gICAgLy/orr7nva7lupXpg6hsYWJlbOmaj+edgOWAjeaVsOaYr+WQpuaYvuekuuiAjOWPmOWMluS9jee9rlxyXG4gICAgX2NoYW5nZURvd25MYWJlbCA6IGZ1bmN0aW9uIChjdXJMYWJlbCwgaXNSaWdodCkge1xyXG4gICAgICAgIGlmKGlzUmlnaHQpe1xyXG4gICAgICAgICAgICBjdXJMYWJlbC5hbmNob3JYID0gMTtcclxuICAgICAgICAgICAgY3VyTGFiZWwueCA9IGN1ckxhYmVsLnBhcmVudC53aWR0aCowLjQ3O1xyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICBjdXJMYWJlbC5hbmNob3JYID0gMC41O1xyXG4gICAgICAgICAgICBjdXJMYWJlbC54ID0gMDtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIGdldFdvcmxkUG9zIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBwYXJlbnRQb3MgPSB0aGlzLm5vZGUucGFyZW50LnBvc2l0aW9uO1xyXG4gICAgICAgIHZhciBwYXJlbnRTY2FsZSA9IHRoaXMubm9kZS5wYXJlbnQuc2NhbGU7XHJcbiAgICAgICAgcmV0dXJuIGNjLnAocGFyZW50UG9zLnggKyB0aGlzLm5vZGUueCpwYXJlbnRTY2FsZSwgcGFyZW50UG9zLnkrdGhpcy5ub2RlLnkqcGFyZW50U2NhbGUtdGhpcy5ub2RlLmhlaWdodCowLjQpOy8v6LWi6ZKx5peX5bic5L2N572uXHJcbiAgICB9LFxyXG4gICAgZ2V0R29sZENlbnRlclBvcyA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgcGFyZW50UG9zID0gdGhpcy5ub2RlLnBhcmVudC5wb3NpdGlvbjtcclxuICAgICAgICB2YXIgcGFyZW50U2NhbGUgPSB0aGlzLm5vZGUucGFyZW50LnNjYWxlO1xyXG4gICAgICAgIHJldHVybiBjYy5wKHBhcmVudFBvcy54ICsgdGhpcy5ub2RlLngqcGFyZW50U2NhbGUsIHBhcmVudFBvcy55K3RoaXMubm9kZS55KnBhcmVudFNjYWxlLXRoaXMubm9kZS5oZWlnaHQqMC4yKTtcclxuICAgIH0sXHJcblxyXG4gICAgZ2V0UmVzdWx0VHlwZSA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5udW1fcmVzdWx0XHJcbiAgICB9LFxyXG4gICAgc2V0VGFibGVXaW4gOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5faXNXaW4gPSB0cnVlO1xyXG4gICAgfSxcclxuXHJcbiAgICBnZXRHcmFiR29sZCA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fb3duZXJHb2xkICogdGhpcy5fbXVsdGlwbGVcclxuICAgIH0sXHJcbiAgICBnZXRMb3N0R29sZCA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fb3duZXJHb2xkXHJcbiAgICB9LFxyXG4gICAgLy/ojrflj5bliankvZnmsqHmnInooqvnp7vpmaTnmoTph5HluIHmlbDph49cclxuICAgIGdldExlYXZlR29sZEltZyA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fY3VyR29sZE51bVxyXG4gICAgfSxcclxuXHJcbiAgICAvLyBjYWxsZWQgZXZlcnkgZnJhbWUsIHVuY29tbWVudCB0aGlzIGZ1bmN0aW9uIHRvIGFjdGl2YXRlIHVwZGF0ZSBjYWxsYmFja1xyXG4gICAgLy8gdXBkYXRlOiBmdW5jdGlvbiAoZHQpIHtcclxuXHJcbiAgICAvLyB9LFxyXG59KTtcclxuIiwiLy/njqnlrrblpLTlg4/lnZdcclxuXHJcbmNjLkNsYXNzKHtcclxuICAgIGV4dGVuZHM6IGNjLkNvbXBvbmVudCxcclxuXHJcbiAgICBwcm9wZXJ0aWVzOiB7XHJcbiAgICAgICAgX3NpdGVJbWcgOiBudWxsLFxyXG4gICAgICAgIF9jaG9vc2VNb25leUxldmVsIDogbnVsbCxcclxuICAgICAgICBfZGljdF9jaG9vc2VNb25leSA6IG51bGwsXHJcbiAgICAgICAgX2NhbGxGdW5jIDogbnVsbCxcclxuICAgICAgICBfZGVmYXVsdEhlYWRGcmFtZSA6IG51bGwsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5rKh5pyJ546p5a625aS05YOP5pe25YCZ5L2/55So55qE6buY6K6k5aS05YOPXHJcbiAgICAgICAgX3NlYXRNeXNlbGZDb21wIDogbnVsbCwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+W6p+S9jeS4iueahOiHquW3seeOqeWutlxyXG4gICAgICAgIF9kYXRhX2JldHRpbmcgOiBudWxsLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+aKleazqOS/oeaBr1xyXG4gICAgICAgIF9nb2xkVmFsdWVFWCA6IG51bGwsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5oqV5rOo6YeR6aKd5rGg5L+h5oGvXHJcbiAgICAgICAgX2lzU2VuZGluZyA6IG51bGwsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/mmK/lkKbmraPlnKjlj5HpgIHmipXms6jor7fmsYJcclxuXHJcbiAgICAgICAgLy9kYXRhXHJcbiAgICAgICAgX2RpY3RfY2hvb3NlZCA6IG51bGwsXHJcbiAgICAgICAgX2N1ckdvbGRWYWx1ZSA6IG51bGwsXHJcbiAgICAgICAgX2dyYWJHb2xkIDogbnVsbCxcclxuICAgICAgICBfcGxheWVyTmFtZSA6IG51bGwsXHJcbiAgICAgICAgX2dyYWJUaW1lcyA6IG51bGwsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+W9k+WJjeaKleazqOasoeaVsFxyXG4gICAgICAgIF9zZWF0SW5kZXggOiBudWxsLFxyXG4gICAgICAgIF9yZXN1bHRDaGFuZ2VNb25leSA6IG51bGwsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+e7k+eul+aXtuWAmeaYvuekuuaYr+mHkemineWPmOWMllxyXG4gICAgICAgIF9wbGF5ZXJJRCA6IG51bGwsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/njqnlrrZpZFxyXG4gICAgICAgIF91c2FibGVCYWxhbmNlIDogbnVsbCwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+WPr+eUqOS9meminVxyXG5cclxuICAgICAgICBub2RlX2hlYWRJbWcgOiB7XHJcbiAgICAgICAgICAgIGRlZmF1bHQgOiBudWxsLFxyXG4gICAgICAgICAgICB0eXBlIDogY2MuTm9kZSxcclxuICAgICAgICAgICAgZGlzcGxheU5hbWUgOiAn5aS05YOPJ1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgbGFiZWxfcGxheWVyTmFtZSA6IHtcclxuICAgICAgICAgICAgZGVmYXVsdCA6IG51bGwsXHJcbiAgICAgICAgICAgIHR5cGUgOiBjYy5MYWJlbCxcclxuICAgICAgICAgICAgZGlzcGxheU5hbWUgOiAn546p5a625ZCNJ1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgbm9kZV9nb2xkVmFsdWUgOiB7XHJcbiAgICAgICAgICAgIGRlZmF1bHQgOiBudWxsLFxyXG4gICAgICAgICAgICB0eXBlIDogY2MuTm9kZSxcclxuICAgICAgICAgICAgZGlzcGxheU5hbWUgOiAn5oul5pyJ6YeR5biBJ1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgX3BsYXllclR5cGUgOiAwLFxyXG4gICAgICAgIHBsYXllclR5cGUgOiB7XHJcbiAgICAgICAgICAgIHNldCA6IGZ1bmN0aW9uIChfdHlwZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fcGxheWVyVHlwZSA9IF90eXBlO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBnZXQgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fcGxheWVyVHlwZTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgdHlwZSA6IEdfVFlQRS5wbGF5ZXJUeXBlLFxyXG4gICAgICAgICAgICBkaXNwbGF5TmFtZSA6ICfnjqnlrrbnsbvlnosnXHJcbiAgICAgICAgfSxcclxuICAgICAgICBwcmVmYWJfZ29sZFZhbHVlIDogY2MuUHJlZmFiXHJcbiAgICB9LFxyXG5cclxuICAgIC8vIHVzZSB0aGlzIGZvciBpbml0aWFsaXphdGlvblxyXG4gICAgb25Mb2FkOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5faW5pdCgpO1xyXG4gICAgfSxcclxuXHJcbiAgICBfaW5pdCA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLl9kaWN0X2Nob29zZUxldmVsID0gR19Db25maWdfZ3JhYi5kaWN0X21vdmVHb2xkTnVtO1xyXG4gICAgICAgIHRoaXMuX2dvbGRWYWx1ZUNvbXBOYW1lID0gJ09ial9nb2xkUmVzdWx0RWZmZWN0JztcclxuICAgICAgICB0aGlzLl9jaG9vc2VNb25leUxldmVsID0gMDtcclxuICAgIH0sXHJcblxyXG4gICAgc3RhcnQgOiBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgfSxcclxuXHJcbiAgICAvL3ZhciBkYXRhT2JqID0ge1xyXG4gICAgLy8gICAgbmFtZSA6ICcnLFxyXG4gICAgLy8gICAgaGVhZEltZyA6ICcnLFxyXG4gICAgLy8gICAgZ29sZFZhbHVlIDogMTFcclxuICAgIC8vfVxyXG4gICAgc2V0UGxheWVyRGF0YSA6IGZ1bmN0aW9uIChkYXRhT2JqKSB7XHJcbiAgICAgICAgaWYoIWRhdGFPYmopIHJldHVybjtcclxuICAgICAgICB0aGlzLm5vZGUuYWN0aXZlID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgdGhpcy5jbGVhckRhdGEoKTtcclxuICAgICAgICBpZihkYXRhT2JqLmNvaW4gPj0gMCkgdGhpcy5zZXRHb2xkVmFsdWUoZGF0YU9iai5jb2luKTtcclxuICAgICAgICBlbHNlIHRoaXMuc2V0R29sZFZhbHVlKDApO1xyXG4gICAgICAgIGlmKGRhdGFPYmouc2VhdEluZGV4KSB0aGlzLl9zZWF0SW5kZXggPSBkYXRhT2JqLnNlYXRJbmRleDtcclxuXHJcbiAgICAgICAgdGhpcy5fcGxheWVyTmFtZSA9IGRhdGFPYmoubmlja25hbWU7XHJcbiAgICAgICAgdGhpcy5fc2V0UGxheWVyTmFtZSh0aGlzLl9wbGF5ZXJOYW1lKTtcclxuICAgICAgICBHX1RPT0wuc2V0SGVhZEltZyh0aGlzLm5vZGVfaGVhZEltZywgZGF0YU9iai5pY29uKTtcclxuICAgICAgICB0aGlzLl9wbGF5ZXJJRCA9IGRhdGFPYmoucGxheWVySWQ7XHJcbiAgICAgICAgdGhpcy5fdXNhYmxlQmFsYW5jZSA9IGRhdGFPYmoudXNhYmxlQmFsYW5jZTtcclxuICAgIH0sXHJcbiAgICBzZXRTZWxmSW5mbyA6IGZ1bmN0aW9uIChzZWxmSW5mbykge1xyXG4gICAgICAgIGlmKHNlbGZJbmZvLmNob29zZURpY3QpIHRoaXMuX2RpY3RfY2hvb3NlTW9uZXkgPSBzZWxmSW5mby5jaG9vc2VEaWN0O1xyXG4gICAgICAgIHZhciBob21lTGFiZWwgPSB0aGlzLm5vZGUuZ2V0Q2hpbGRCeU5hbWUoJ2hvbWVOYW1lJyk7XHJcbiAgICAgICAgaWYoaG9tZUxhYmVsICYmIHNlbGZJbmZvLnJvb21OYW1lKXtcclxuICAgICAgICAgICAgaG9tZUxhYmVsLmdldENvbXBvbmVudChjYy5MYWJlbCkuc3RyaW5nID0gc2VsZkluZm8ucm9vbU5hbWU7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICBjbGVhckRhdGEgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5fZGljdF9jaG9vc2VkID0ge307XHJcbiAgICAgICAgdGhpcy5fZ3JhYkdvbGQgPSAwO1xyXG4gICAgICAgIHRoaXMuX2dvbGRWYWx1ZUVYID0gMDtcclxuICAgICAgICB0aGlzLl9ncmFiVGltZXMgPSAwO1xyXG4gICAgICAgIHRoaXMuX2lzU2VuZGluZyA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuX2RhdGFfYmV0dGluZyA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5fcmVzdWx0Q2hhbmdlTW9uZXkgPSBudWxsO1xyXG4gICAgfSxcclxuXHJcbiAgICBfcmVmcmVzaEdvbGRTaG93IDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMubm9kZV9nb2xkVmFsdWUuZ2V0Q29tcG9uZW50KGNjLkxhYmVsKS5zdHJpbmcgPSBHX1RPT0wuY2hhbmdlTW9uZXkodGhpcy5fY3VyR29sZFZhbHVlKTtcclxuICAgIH0sXHJcblxyXG4gICAgZG9DaG9vc2UgOiBmdW5jdGlvbiAodGFibGVJbmRleCwgZ29sZE51bSkge1xyXG4gICAgICAgIGlmKHRoaXMuX2RpY3RfY2hvb3NlZFt0YWJsZUluZGV4XSkgdGhpcy5fZGljdF9jaG9vc2VkW3RhYmxlSW5kZXhdICs9IGdvbGROdW07XHJcbiAgICAgICAgZWxzZSB0aGlzLl9kaWN0X2Nob29zZWRbdGFibGVJbmRleF0gPSBnb2xkTnVtO1xyXG4gICAgfSxcclxuXHJcbiAgICAvL+eCueWHu+aKleazqOWMuuWfn1xyXG4gICAgdG91Y2hHcmFiQXJlYSA6IGZ1bmN0aW9uIChncmFiSW5mbywgY2FsbEZ1bmMpIHtcclxuICAgICAgICB2YXIgZ29sZE51bT0wO1xyXG4gICAgICAgIHZhciBtb25leSA9IHRoaXMuX2RpY3RfY2hvb3NlTW9uZXlbdGhpcy5fY2hvb3NlTW9uZXlMZXZlbF07XHJcbiAgICAgICAgdGhpcy5fY2FsbEZ1bmMgPSBjYWxsRnVuYztcclxuXHJcbiAgICAgICAgaWYobW9uZXkgPiB0aGlzLl9jdXJHb2xkVmFsdWUpe1xyXG4gICAgICAgICAgICAvL+S9memineS4jei2s1xyXG4gICAgICAgICAgICB2YXIgZGF0YU9iaiA9IHtcclxuICAgICAgICAgICAgICAgIHRpcEluZGV4IDogMjEsXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgR0cudGlwc01nci5zaG93VHh0VGlwKGRhdGFPYmopO1xyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAvL2lmKHRoaXMuX2dldElzT3Zlck1heEdyYWJUaW1lcygpKXtcclxuICAgICAgICAgICAgLy8gICAgLy/otoXlh7rmnIDlpKfmipXms6jmrKHmlbBcclxuICAgICAgICAgICAgLy8gICAgdmFyIGRhdGFPYmogPSB7XHJcbiAgICAgICAgICAgIC8vICAgICAgICB0aXBJbmRleCA6IDIwLFxyXG4gICAgICAgICAgICAvLyAgICAgICAgc2hvd1N0ciA6ICfotoXlh7rmnIDlpKfmipXms6jmrKHmlbAnXHJcbiAgICAgICAgICAgIC8vICAgIH1cclxuICAgICAgICAgICAgLy8gICAgR0cudGlwc01nci5zaG93VHh0VGlwKGRhdGFPYmopO1xyXG4gICAgICAgICAgICAvL31lbHNle1xyXG4gICAgICAgICAgICAvL1xyXG4gICAgICAgICAgICAvL31cclxuICAgICAgICAgICAgaWYoR19Db25maWdfY29tbW9uLmlzTG9jYWwpe1xyXG4gICAgICAgICAgICAgICAgZ3JhYkluZm8uc3RhcnRQb3MgPSB0aGlzLmdldFdvcmxkUG9zKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmZvcmNlR3JhYlJldHVybihncmFiSW5mbywgbW9uZXksIGdyYWJJbmZvLnRhYmxlSW5kZXgpO1xyXG4gICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgIGlmKHRoaXMuX2lzU2VuZGluZyl7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBncmFiSW5mby5zdGFydFBvcyA9IHRoaXMuZ2V0V29ybGRQb3MoKTtcclxuICAgICAgICAgICAgICAgIGdyYWJJbmZvLmdvbGRWYWx1ZSA9IG1vbmV5O1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fZGF0YV9iZXR0aW5nID0gZ3JhYkluZm87XHJcblxyXG4gICAgICAgICAgICAgICAgLy/lj6/ku6XmipXms6hcclxuICAgICAgICAgICAgICAgIHZhciBuZXREYXRhID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIG1hdGNoSWQ6IEdHLmdyYWJNZ3IuZ2V0TWF0Y2hJRCgpLC8v6LWb5LqLaWQgIGludFxyXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6R19UWVBFLm5ldF9nYW1lTW9kdWxlLmdyYWIsLy/mipXms6jnsbvlnosgc3RyaW5nXHJcbiAgICAgICAgICAgICAgICAgICAgaXRlbTpncmFiSW5mby50YWJsZUluZGV4KydfVycsLy/mipXms6jpobkgc3RyaW5nXHJcbiAgICAgICAgICAgICAgICAgICAgZ29sZDptb25leSwvL+aKleazqOminSBpbnRcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRoaXMuX2lzU2VuZGluZyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBHRy5zb2NrZXRNZ3IuU2VuZE1zZyhOZXRUeXBlLnNfZG9HcmFiLCBuZXREYXRhKTtcclxuICAgICAgICAgICAgICAgIEdHLnNvY2tldE1nci5yZWdpc3RlckxvbmcoTmV0VHlwZS5yX2RvR3JhYl9yZXR1cm4sIHRoaXMubmV0X2dyYWJSZXR1cm4uYmluZCh0aGlzKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgbmV0X2dyYWJSZXR1cm4gOiBmdW5jdGlvbiAocmVjdkRhdGEpIHtcclxuICAgICAgICB0aGlzLl9pc1NlbmRpbmcgPSBmYWxzZTtcclxuICAgICAgICB2YXIgdGlwID0gcmVjdkRhdGEudGlwO1xyXG4gICAgICAgIGlmKHRpcC5jb2RlICE9IEdfVFlQRS5zZXJ2ZXJDb2RlVHlwZS5zdWNjZXNzKSB7XHJcbiAgICAgICAgICAgIHZhciBkYXRhT2JqID0ge1xyXG4gICAgICAgICAgICAgICAgdGlwSW5kZXggOiAxOSxcclxuICAgICAgICAgICAgICAgIHJldGFpblRpbWUgOiAzLFxyXG4gICAgICAgICAgICAgICAgc2hvd1N0ciA6IHRpcC50aXAsXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgR0cudGlwc01nci5zaG93VHh0VGlwKGRhdGFPYmopXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8v6LWb5LqL5LiN5a2Y5Zyo6Lii5Ye6XHJcbiAgICAgICAgaWYgKHRpcC5jb2RlID09IEdfVFlQRS5zZXJ2ZXJDb2RlVHlwZS5tYXRjaE5vbkV4aXN0ZW50KSB7XHJcbiAgICAgICAgICAgIEdHLmV4aXRIb21lKCk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy/kuIvliIbph5Hpop3kuLrpnZ7orrjlj6/lgLzouKLlh7pcclxuICAgICAgICBpZiAodGlwLmNvZGUgPT0gR19UWVBFLnNlcnZlckNvZGVUeXBlLmJldE5vdFBlcm1pdENvaW4pIHtcclxuICAgICAgICAgICAgR0cuZXhpdEhvbWUoKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvL+mdnuazleS4i+azqOexu+Wei+i4ouWHulxyXG4gICAgICAgIGlmICh0aXAuY29kZSA9PSBHX1RZUEUuc2VydmVyQ29kZVR5cGUuYmV0Tm90UGVybWl0QmV0KSB7XHJcbiAgICAgICAgICAgIEdHLmV4aXRIb21lKCk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYoIXRoaXMuX2RhdGFfYmV0dGluZykgcmV0dXJuO1xyXG4gICAgICAgIHZhciBiZXR0aW5nRGF0YSA9IEdfT0JKLmRhdGFfZ3JhYkJldHRpbmcoKTtcclxuICAgICAgICBmb3IodmFyIGF0dHJOYW1lIGluIHRoaXMuX2RhdGFfYmV0dGluZyl7XHJcbiAgICAgICAgICAgIGlmKGF0dHJOYW1lKSBiZXR0aW5nRGF0YVthdHRyTmFtZV0gPSB0aGlzLl9kYXRhX2JldHRpbmdbYXR0ck5hbWVdXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuX2RhdGFfYmV0dGluZyA9IG51bGw7XHJcblxyXG4gICAgICAgIGJldHRpbmdEYXRhLmdvbGRWYWx1ZSA9IHJlY3ZEYXRhLmJldC5nb2xkO1xyXG4gICAgICAgIGJldHRpbmdEYXRhLmdvbGROdW0gPSBwYXJzZUludCh0aGlzLl9kaWN0X2Nob29zZUxldmVsW3RoaXMuX2Nob29zZU1vbmV5TGV2ZWwrMV0pO1xyXG5cclxuICAgICAgICAvL+iusOW9leaKleazqOS/oeaBr1xyXG4gICAgICAgIHRoaXMuZG9DaG9vc2UoYmV0dGluZ0RhdGEudGFibGVJbmRleCwgYmV0dGluZ0RhdGEuZ29sZE51bSk7XHJcbiAgICAgICAgLy/ntK/orqHmipXms6jph5Hpop1cclxuICAgICAgICB0aGlzLl9ncmFiR29sZCArPSBiZXR0aW5nRGF0YS5nb2xkVmFsdWU7XHJcbiAgICAgICAgdGhpcy5fZ29sZFZhbHVlRVggKz0gYmV0dGluZ0RhdGEuZ29sZFZhbHVlO1xyXG4gICAgICAgIC8v5pu05paw546p5a625Ymp5L2Z6YeR6aKdXHJcbiAgICAgICAgdGhpcy5zZXRHb2xkVmFsdWUocmVjdkRhdGEubmJTZWxmLmJhbGFuY2UpO1xyXG4gICAgICAgIC8v5Y+v55So5L2Z6aKdXHJcbiAgICAgICAgdGhpcy5fdXNhYmxlQmFsYW5jZSA9IHJlY3ZEYXRhLm5iU2VsZi51c2FibGVCYWxhbmNlO1xyXG4gICAgICAgIC8v5oq85rOo6L+H56iL5Lit5pu05paw5oq85rOo5oyJ6ZKu77yI572u54Gw77yJXHJcbiAgICAgICAgR0cuZ3JhYk1nci5nZXRCdG5zQ29tcCgpLnJlZnJlc2hHcmFiT3B0aW9uKHRoaXMuZ2V0R29sZFZhbHVlKCkpO1xyXG5cclxuICAgICAgICB0aGlzLl9ncmFiVGltZXMgKz0gMTtcclxuICAgICAgICAvLyBHRy5ncmFiTWdyLnNldEJldHRpbmdUaW1lcyh0aGlzLl9ncmFiVGltZXMpO1xyXG4gICAgICAgIGlmKHRoaXMuX2NhbGxGdW5jKXtcclxuICAgICAgICAgICAgdGhpcy5fY2FsbEZ1bmMoYmV0dGluZ0RhdGEpO1xyXG4gICAgICAgICAgICB0aGlzLl9jYWxsRnVuYyA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIGZvcmNlR3JhYlJldHVybiA6IGZ1bmN0aW9uIChncmFiSW5mbywgbW9uZXksIHRhYmxlSW5kZXgpIHtcclxuICAgICAgICBncmFiSW5mby5nb2xkVmFsdWUgPSBtb25leTtcclxuICAgICAgICB0aGlzLl9ncmFiR29sZCArPSBtb25leTtcclxuICAgICAgICB0aGlzLl9nb2xkVmFsdWVFWCArPSBtb25leTtcclxuICAgICAgICB0aGlzLnNldEdvbGRWYWx1ZSh0aGlzLl9jdXJHb2xkVmFsdWUgLSBtb25leSk7XHJcbiAgICAgICAgdmFyIGdvbGROdW0gPSBwYXJzZUludCh0aGlzLl9kaWN0X2Nob29zZUxldmVsW3RoaXMuX2Nob29zZU1vbmV5TGV2ZWwrMV0pO1xyXG4gICAgICAgIGdyYWJJbmZvLmdvbGROdW0gPSBnb2xkTnVtO1xyXG4gICAgICAgIHRoaXMuZG9DaG9vc2UodGFibGVJbmRleCwgZ29sZE51bSk7XHJcbiAgICAgICAgdGhpcy5fZ3JhYlRpbWVzICs9IDE7XHJcbiAgICAgICAgaWYodGhpcy5fY2FsbEZ1bmMpe1xyXG4gICAgICAgICAgICB0aGlzLl9jYWxsRnVuYyhncmFiSW5mbyk7XHJcbiAgICAgICAgICAgIHRoaXMuX2NhbGxGdW5jID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIHNldFJlc3VsdEluZm8gOiBmdW5jdGlvbiAoY2hhbmdlTW9uZXksIGhhdmVNb25leSkge1xyXG4gICAgICAgIGlmKEdfREFUQS5pc051bWJlcihoYXZlTW9uZXkpKSB0aGlzLl9jdXJHb2xkVmFsdWUgPSBoYXZlTW9uZXk7XHJcbiAgICAgICAgdGhpcy5fcmVzdWx0Q2hhbmdlTW9uZXkgPSBjaGFuZ2VNb25leTtcclxuICAgIH0sXHJcbiAgICAvL3NldFJlc3VsdEdvbGRJbmZvIDogZnVuY3Rpb24gKGdvbGRJbmZvKSB7XHJcbiAgICAvLyAgICBnb2xkSW5mby50YXJnZXRQb3MgPSB0aGlzLmdldFdvcmxkUG9zKCk7XHJcbiAgICAvLyAgICAvL2dvbGRJbmZvLmNhbGxGdW5jID0gdGhpcy5zaG93UmVzdWx0R29sZC5iaW5kKHRoaXMpO1xyXG4gICAgLy8gICAgcmV0dXJuIGdvbGRJbmZvXHJcbiAgICAvL30sXHJcbiAgICBzaG93UmVzdWx0R29sZCA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZih0aGlzLl9yZXN1bHRDaGFuZ2VNb25leSl7XHJcbiAgICAgICAgICAgIHRoaXMuX3JlZnJlc2hHb2xkU2hvdygpO1xyXG4gICAgICAgICAgICB0aGlzLl9zaG93R29sZENvdW50KHRoaXMuX3Jlc3VsdENoYW5nZU1vbmV5KTtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWVcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlXHJcbiAgICB9LFxyXG4gICAgLy/mmL7npLrnjqnlrrbmlbDlgLznmoTlop7lh49cclxuICAgIF9zaG93R29sZENvdW50IDogZnVuY3Rpb24gKGNvdW50KSB7XHJcbiAgICAgICAgaWYoIWNvdW50KSByZXR1cm47XHJcblxyXG4gICAgICAgIHZhciBsYWJlbE5vZGUgPSBjYy5pbnN0YW50aWF0ZSh0aGlzLnByZWZhYl9nb2xkVmFsdWUpO1xyXG4gICAgICAgIGxhYmVsTm9kZS5wYXJlbnQgPSB0aGlzLm5vZGU7XHJcbiAgICAgICAgbGFiZWxOb2RlLnpJbmRleCA9IDI7XHJcblxyXG4gICAgICAgIGxhYmVsTm9kZS5nZXRDb21wb25lbnQodGhpcy5fZ29sZFZhbHVlQ29tcE5hbWUpLnNob3dHcmFiR29sZChjb3VudCk7XHJcblxyXG4gICAgICAgIGxhYmVsTm9kZS5zY2FsZSA9IDAuMTtcclxuICAgICAgICB2YXIgcGFyZW50U2NhbGUsIHdpZHRoT2ZmO1xyXG4gICAgICAgIHdpZHRoT2ZmID0gdGhpcy5ub2RlLndpZHRoKjAuMztcclxuICAgICAgICBpZih0aGlzLnBsYXllclR5cGUgPT0gR19UWVBFLnBsYXllclR5cGUub3duZXIpe1xyXG4gICAgICAgICAgICBwYXJlbnRTY2FsZSA9IHRoaXMubm9kZS5zY2FsZTtcclxuICAgICAgICB9ZWxzZSBpZih0aGlzLnBsYXllclR5cGUgPT0gR19UWVBFLnBsYXllclR5cGUub3RoZXJzKXtcclxuICAgICAgICAgICAgcGFyZW50U2NhbGUgPSB0aGlzLm5vZGUucGFyZW50LnNjYWxlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZih0aGlzLm5vZGUueCA+IGNjLnZpc2libGVSZWN0LndpZHRoLzIpIHdpZHRoT2ZmKj0gLTE7XHJcbiAgICAgICAgdmFyIHRpbWUgPSBHX0NvbmZpZ19ncmFiLnRpbWVfZ29sZE9uSGVhZDtcclxuICAgICAgICB2YXIgYWN0MSA9IGNjLm1vdmVUbyh0aW1lLCB3aWR0aE9mZiwgdGhpcy5ub2RlLmhlaWdodCowLjQpO1xyXG4gICAgICAgIHZhciBhY3QyID0gY2Muc2NhbGVUbyh0aW1lLCAxKTtcclxuICAgICAgICB2YXIgYWN0MyA9IGNjLmRlbGF5VGltZSh0aW1lKjIpO1xyXG4gICAgICAgIGxhYmVsTm9kZS5ydW5BY3Rpb24oY2Muc2VxdWVuY2UoY2Muc3Bhd24oYWN0MSxhY3QyKSxhY3QzLGNjLmNhbGxGdW5jKHRoaXMuX2xhYmVsTW92ZUVuZCwgdGhpcywgY291bnQpKSlcclxuICAgIH0sXHJcbiAgICBfbGFiZWxNb3ZlRW5kIDogZnVuY3Rpb24gKHRhcmdldCwgY291bnQpIHtcclxuICAgICAgICB0YXJnZXQuZGVzdHJveSgpO1xyXG4gICAgICAgIC8vdGhpcy5fcmVmcmVzaEdvbGRTaG93KCk7XHJcbiAgICAgICAgLy9pZih0aGlzLl9jYWxsRnVuYyl7XHJcbiAgICAgICAgLy8gICAgdGhpcy5fY2FsbEZ1bmMoKTtcclxuICAgICAgICAvLyAgICB0aGlzLl9jYWxsRnVuYyA9IG51bGw7XHJcbiAgICAgICAgLy99XHJcbiAgICB9LFxyXG5cclxuICAgIF9wYXlHb2xkIDogZnVuY3Rpb24gKGdvbGROdW0pIHtcclxuICAgICAgICB0aGlzLl9jdXJHb2xkVmFsdWUgLT0gZ29sZE51bTtcclxuICAgICAgICBpZih0aGlzLl9jdXJHb2xkVmFsdWUgPD0gMCl7XHJcbiAgICAgICAgICAgIHRoaXMuX2N1ckdvbGRWYWx1ZSA9IDA7XHJcblxyXG4gICAgICAgICAgICB2YXIgdGFibGUgPSBHX0RBVEEuZ2V0Q2hpbmVzZSgyMSk7XHJcbiAgICAgICAgICAgIGlmKHRhYmxlKXtcclxuICAgICAgICAgICAgICAgIHZhciBkYXRhT2JqID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIHNob3dTdHIgOiB0YWJsZS5jb250ZW50LFxyXG4gICAgICAgICAgICAgICAgICAgIHNob3dQb3MgOiBHX0NvbmZpZ19jb21tb24uYm90dG9tVGlwUG9zLFxyXG4gICAgICAgICAgICAgICAgICAgIHJldGFpblRpbWUgOiB0YWJsZS5yZXRhaW5UaW1lXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIC8v6K6+572u546p5a625ZCN5a2XXHJcbiAgICBfc2V0UGxheWVyTmFtZSA6IGZ1bmN0aW9uIChwbGF5ZXJOYW1lKSB7XHJcbiAgICAgICAgaWYoIXBsYXllck5hbWUpIHBsYXllck5hbWUgPSAnJztcclxuICAgICAgICBwbGF5ZXJOYW1lID0gR19UT09MLmdldE5hbWVMaW1pdChwbGF5ZXJOYW1lLCAxMCwgdHJ1ZSk7XHJcbiAgICAgICAgdGhpcy5sYWJlbF9wbGF5ZXJOYW1lLnN0cmluZyA9IHBsYXllck5hbWU7XHJcbiAgICB9LFxyXG4gICAgLy/nu5HlrprluqfkvY3kuIrnmoTnjqnlrrZcclxuICAgIGJpbmRTZWF0TXlzZWxmIDogZnVuY3Rpb24gKG15c2VsZkNvbXApIHtcclxuICAgICAgICB0aGlzLl9zZWF0TXlzZWxmQ29tcCA9IG15c2VsZkNvbXA7XHJcbiAgICB9LFxyXG5cclxuICAgIGJpbmRTaXRlSW1nIDogZnVuY3Rpb24gKGltZ05vZGUpIHtcclxuICAgICAgICB0aGlzLl9zaXRlSW1nID0gaW1nTm9kZTtcclxuICAgIH0sXHJcbiAgICAvL+mHjee9rumHkemineeahOaYvuekulxyXG4gICAgcmVzZXRTaG93R29sZCA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLnNldEdvbGRWYWx1ZSh0aGlzLl9jdXJHb2xkVmFsdWUpO1xyXG4gICAgfSxcclxuICAgIHNldEdvbGRWYWx1ZSA6IGZ1bmN0aW9uIChuZXdWYWx1ZSkge1xyXG4gICAgICAgIHRoaXMuX2N1ckdvbGRWYWx1ZSA9IG5ld1ZhbHVlO1xyXG4gICAgICAgIHRoaXMubm9kZV9nb2xkVmFsdWUuZ2V0Q29tcG9uZW50KGNjLkxhYmVsKS5zdHJpbmcgPSBHX1RPT0wuY2hhbmdlTW9uZXkobmV3VmFsdWUpO1xyXG5cclxuICAgICAgICAvL+S9jee9ruS4iueahOiHquW3sVxyXG4gICAgICAgIGlmKHRoaXMuX3NlYXRNeXNlbGZDb21wKXtcclxuICAgICAgICAgICAgdGhpcy5fc2VhdE15c2VsZkNvbXAuc2V0R29sZFZhbHVlKG5ld1ZhbHVlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgfSxcclxuICAgIHNldFBsYXllclR5cGUgOiBmdW5jdGlvbiAodG9UeXBlKSB7XHJcbiAgICAgICAgdGhpcy5wbGF5ZXJUeXBlID0gdG9UeXBlO1xyXG4gICAgfSxcclxuICAgIC8v5oq85a6d4oCU4oCU6K6+572u5oqV5rOo6YeR6aKd5rGg55qE5Y+Y5YyWXHJcbiAgICByZWR1Y2VHb2xkRVggOiBmdW5jdGlvbiAoY2hhbmdlR29sZCkge1xyXG4gICAgICAgIGlmKHRoaXMuX2dvbGRWYWx1ZUVYID49IGNoYW5nZUdvbGQpe1xyXG4gICAgICAgICAgICB0aGlzLl9nb2xkVmFsdWVFWCAtPSBjaGFuZ2VHb2xkO1xyXG4gICAgICAgICAgICByZXR1cm4gMDtcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgdmFyIHZhbHVlID0gY2hhbmdlR29sZCAtIHRoaXMuX2dvbGRWYWx1ZUVYO1xyXG4gICAgICAgICAgICB0aGlzLl9nb2xkVmFsdWVFWCA9IDA7XHJcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZVxyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG5cclxuICAgIGdldE1vbmV5Q2hvb3NlRGljdCA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZGljdF9jaG9vc2VNb25leVxyXG4gICAgfSxcclxuICAgIGdldFBva2VyUG9pbnQgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIGNjLnAodGhpcy5ub2RlLnggKyAodGhpcy5ub2RlLndpZHRoKnRoaXMubm9kZS5zY2FsZVkqMC43KSwgdGhpcy5ub2RlLnkpXHJcbiAgICB9LFxyXG4gICAgc2V0Q2hvb3NlTGV2ZWwgOiBmdW5jdGlvbiAobGV2ZWwpIHtcclxuICAgICAgICB0aGlzLl9jaG9vc2VNb25leUxldmVsID0gbGV2ZWw7XHJcbiAgICB9LFxyXG4gICAgZ2V0Q2hvb3NlTGV2ZWwgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2Nob29zZU1vbmV5TGV2ZWw7XHJcbiAgICB9LFxyXG4gICAgZ2V0V2luR29sZE51bSA6IGZ1bmN0aW9uIChyZXN1dGwpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZGljdF9jaG9vc2VkW3Jlc3V0bF1cclxuICAgIH0sXHJcbiAgICBnZXRBbGxHcmFiVGFibGUgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RpY3RfY2hvb3NlZFxyXG4gICAgfSxcclxuICAgIGdldFdvcmxkUG9zIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBwYXJlbnRQb3MgPSB0aGlzLm5vZGUucGFyZW50LnBvc2l0aW9uO1xyXG4gICAgICAgIHJldHVybiBjYy5wKHRoaXMubm9kZS54K3BhcmVudFBvcy54LCB0aGlzLm5vZGUueStwYXJlbnRQb3MueSlcclxuICAgICAgICAvL3N3aXRjaCAodGhpcy5wbGF5ZXJUeXBlKXtcclxuICAgICAgICAvLyAgICBjYXNlIEdfVFlQRS5wbGF5ZXJUeXBlLm93bmVyOlxyXG4gICAgICAgIC8vICAgICAgICByZXR1cm4gdGhpcy5ub2RlLnBvc2l0aW9uXHJcbiAgICAgICAgLy8gICAgY2FzZSBHX1RZUEUucGxheWVyVHlwZS5zeXN0ZW06XHJcbiAgICAgICAgLy8gICAgICAgIHJldHVybiB0aGlzLm5vZGUucG9zaXRpb25cclxuICAgICAgICAvLyAgICBjYXNlIEdfVFlQRS5wbGF5ZXJUeXBlLm90aGVyczpcclxuICAgICAgICAvLyAgICAgICAgdmFyIHNpdGVJbWcgPSB0aGlzLm5vZGUucGFyZW50O1xyXG4gICAgICAgIC8vICAgICAgICByZXR1cm4gY2MucChzaXRlSW1nLnBhcmVudC54K3NpdGVJbWcueCwgc2l0ZUltZy5wYXJlbnQueStzaXRlSW1nLnkpXHJcbiAgICAgICAgLy8gICAgZGVmYXVsdDpcclxuICAgICAgICAvLyAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgLy99XHJcbiAgICB9LFxyXG4gICAgZ2V0UGxheWVyTmFtZSA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fcGxheWVyTmFtZVxyXG4gICAgfSxcclxuICAgIGdldEdvbGRWYWx1ZSA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fY3VyR29sZFZhbHVlXHJcbiAgICB9LFxyXG4gICAgX2dldElzT3Zlck1heEdyYWJUaW1lcyA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZ3JhYlRpbWVzID49IEdHLmdyYWJNZ3IuZ2V0TWF4R3JhYlRpbWVzKClcclxuICAgIH0sXHJcbiAgICBnZXRTZWF0SW5kZXggOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NlYXRJbmRleFxyXG4gICAgfSxcclxuICAgIC8v5piv5ZCm5bey57uP5oqV5rOoXHJcbiAgICBnZXRJc0dyYWIgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYoIXRoaXMuX2RpY3RfY2hvb3NlZCkgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIHZhciBnb2xkTnVtID0gMDtcclxuICAgICAgICBmb3IodmFyIGtleSBpbiB0aGlzLl9kaWN0X2Nob29zZWQpe1xyXG4gICAgICAgICAgICBnb2xkTnVtICs9IHRoaXMuX2RpY3RfY2hvb3NlZFtrZXldO1xyXG4gICAgICAgICAgICBpZihnb2xkTnVtPjApIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gQm9vbGVhbihnb2xkTnVtKVxyXG4gICAgfSxcclxuICAgIC8v5piv5ZCm5bey57uP5oqV5rOo57uT5p2fXHJcbiAgICBnZXRJc0JldHRpbmdFbmQgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIEJvb2xlYW4odGhpcy5fZ3JhYkdvbGQpXHJcbiAgICB9LFxyXG4gICAgLy/ojrflj5bnjqnlrrZJRFxyXG4gICAgZ2V0UGxheWVySUQgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3BsYXllcklEXHJcbiAgICB9LFxyXG4gICAgZ2V0SXNTaG93IDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLm5vZGUuYWN0aXZlXHJcbiAgICB9LFxyXG4gICAgLy/ojrflj5blj6/nlKjkvZnpop1cclxuICAgIGdldFVzYWJsZUJhbGFuY2UgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3VzYWJsZUJhbGFuY2U7XHJcbiAgICB9LFxyXG5cclxuXHJcbiAgICAvL+a4heeQhuWFs+S6juaKleazqOeahOiusOW9lVxyXG4gICAgY2xlYXJSZWNvcmQgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgLy90aGlzLl9kaWN0X2Nob29zZWQgPSB7fTtcclxuICAgICAgICB0aGlzLl9ncmFiR29sZCA9IDA7XHJcbiAgICAgICAgdGhpcy5fZ29sZFZhbHVlRVggPSAwO1xyXG4gICAgfSxcclxuICAgIGhpZGVQbGF5ZXIgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5ub2RlLmFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgfSxcclxuICAgIHJlbW92ZSA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLm5vZGUuZGVzdHJveSgpO1xyXG4gICAgfSxcclxuICAgIG9uRGVzdHJveSA6IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICB9LFxyXG5cclxuXHJcbiAgICAvLyBjYWxsZWQgZXZlcnkgZnJhbWUsIHVuY29tbWVudCB0aGlzIGZ1bmN0aW9uIHRvIGFjdGl2YXRlIHVwZGF0ZSBjYWxsYmFja1xyXG4gICAgLy8gdXBkYXRlOiBmdW5jdGlvbiAoZHQpIHtcclxuXHJcbiAgICAvLyB9LFxyXG59KTtcclxuIiwiLy/nrqHnkIbmiYDmnInnjqnlrrbnmoTlrrnlmahcclxuXHJcbmNjLkNsYXNzKHtcclxuICAgIGV4dGVuZHM6IGNjLkNvbXBvbmVudCxcclxuXHJcbiAgICBwcm9wZXJ0aWVzOiB7XHJcbiAgICAgICAgX3BsYXllck51bSA6IG51bGwsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/lnLrkuIrnmoTnjqnlrrbmlbDph49cclxuICAgICAgICBfZGljdF9wbGF5ZXJCbG9ja3MgOiBudWxsLFxyXG4gICAgICAgIF9kaWN0X3BsYXllckJ5SUQgOiBudWxsLFxyXG5cclxuICAgICAgICBub2RlX293bmVyIDogY2MuTm9kZSxcclxuICAgICAgICBub2RlX3N5c3RlbSA6IGNjLk5vZGUsXHJcbiAgICAgICAgbm9kZV9wbGF5ZXJDb250YWluZXIgOiB7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5omA5pyJ546p5a6255qE5a655Zmo77yM5bqE5a625ZKM6Ieq5bex6Zmk5aSWXHJcbiAgICAgICAgICAgIGRlZmF1bHQgOiBudWxsLFxyXG4gICAgICAgICAgICB0eXBlIDogY2MuTm9kZSxcclxuICAgICAgICAgICAgZGlzcGxheU5hbWUgOiAn5omA5pyJ546p5a625a655ZmoJ1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgcHJlZmFiX3BsYXllckJsb2NrIDogY2MuUHJlZmFiLFxyXG4gICAgICAgIGNvbXBfc2VhdHNDb250YWluZXIgOiB7XHJcbiAgICAgICAgICAgIGRlZmF1bHQgOiBudWxsLFxyXG4gICAgICAgICAgICB0eXBlIDogcmVxdWlyZSgnT2JqX3NlYXRzQ29udGFpbmVyJyksXHJcbiAgICAgICAgICAgIGRpc3BsYXlOYW1lIDogJ+W6p+S9jeWuueWZqCdcclxuICAgICAgICB9LFxyXG4gICAgfSxcclxuXHJcbiAgICAvLyB1c2UgdGhpcyBmb3IgaW5pdGlhbGl6YXRpb25cclxuICAgIG9uTG9hZDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuX2luaXQoKTtcclxuICAgIH0sXHJcbiAgICBfaW5pdCA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLl9wbGF5ZXJDb21wTmFtZSA9ICdHcmFiX3BsYXllckJsb2NrJztcclxuICAgICAgICB0aGlzLl9kaWN0X3BsYXllckJsb2NrcyA9IHt9O1xyXG4gICAgICAgIHRoaXMuX2RpY3RfcGxheWVyQnlJRCA9IHt9O1xyXG4gICAgICAgIHRoaXMuX3BsYXllck51bSA9IDA7XHJcbiAgICB9LFxyXG5cclxuICAgIC8v6K6+572u5b2T5YmN5omA5pyJ5bqn5L2N546p5a6255qE5L+h5oGvXHJcbiAgICBzZXRTdGFydEluZm8gOiBmdW5jdGlvbiAoc2VhdEluZm9MaXN0LCBzZWxmSW5mbywgc3lzdGVtSW5mbykge1xyXG4gICAgICAgIHZhciBkaWN0UGxheWVyID0ge307XHJcbiAgICAgICAgdmFyIHNlbGZJRCA9IEdHLmdldFBsYXllcigpLmdldFBsYXllcklEKCk7XHJcbiAgICAgICAgdmFyIGxpc3RMZW4gPSBzZWF0SW5mb0xpc3QubGVuZ3RoLCBzZWF0SW5kZXgsIG9uZVBsYXllciwgY29udGVudCwgcGxheWVyQ29tcDtcclxuICAgICAgICAvL+W6p+S9jeaYr+S7jjHlvIDlp4vvvIww5piv6Ieq5bex546p5a6255qE5L+h5oGvXHJcbiAgICAgICAgZm9yKHZhciBpID0gMDsgaSA8IGxpc3RMZW47IGkgKyspe1xyXG4gICAgICAgICAgICBvbmVQbGF5ZXIgPSBzZWF0SW5mb0xpc3RbaV07XHJcbiAgICAgICAgICAgIHNlYXRJbmRleCA9IG9uZVBsYXllclsnc2VhdEluZGV4J107XHJcbiAgICAgICAgICAgIGNvbnRlbnQgPSBvbmVQbGF5ZXJbJ3BsYXllciddO1xyXG4gICAgICAgICAgICBjb250ZW50LnNlYXRJbmRleCA9IHNlYXRJbmRleDtcclxuICAgICAgICAgICAgZGljdFBsYXllcltzZWF0SW5kZXhdID0gY29udGVudDtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy/moLnmja7kv6Hmga/mjqfliLbkvY3nva7kuIrnjqnlrrbnmoTmmL7pmpBcclxuICAgICAgICAvL+aYvuekuuacieaVsOaNrueahOeOqeWutlxyXG4gICAgICAgIGZvcih2YXIgc2VhdEluZGV4IGluIGRpY3RQbGF5ZXIpe1xyXG4gICAgICAgICAgICBjb250ZW50ID0gZGljdFBsYXllcltzZWF0SW5kZXhdO1xyXG4gICAgICAgICAgICBpZiAoY29udGVudCkgdGhpcy5fZGljdF9wbGF5ZXJCeUlEW2NvbnRlbnQucGxheWVySWRdID0gc2VhdEluZGV4OyAgICAgICAgICAvL+iOt+WPlueOqeWutmlkXHJcbiAgICAgICAgICAgIC8v5LuO5YiX6KGo5Lit6I635Y+W5bGe5LqO6Ieq5bex55qE5L+h5oGvXHJcbiAgICAgICAgICAgIGlmKGNvbnRlbnQgJiYgY29udGVudC5wbGF5ZXJJZCA9PSBzZWxmSUQpIHtcclxuICAgICAgICAgICAgICAgIGZvcih2YXIgYXR0ck5hbWUgaW4gY29udGVudCl7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGF0dHJOYW1lID09ICdzZWF0SW5kZXgnICYmIGNvbnRlbnRbYXR0ck5hbWVdID09IDApICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmSW5mb1thdHRyTmFtZV0gPSBjb250ZW50W2F0dHJOYW1lXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvL+W6p+S9jeWPt+S7jjHlvIDlp4tcclxuICAgICAgICAgICAgaWYoc2VhdEluZGV4IDwgMSkgY29udGludWU7XHJcbiAgICAgICAgICAgIC8v5pyJ546p5a625pWw5o2uXHJcbiAgICAgICAgICAgIHBsYXllckNvbXAgPSB0aGlzLl9hZGRPbmVQbGF5ZXIoc2VhdEluZGV4KTtcclxuICAgICAgICAgICAgaWYocGxheWVyQ29tcCkgcGxheWVyQ29tcC5zZXRQbGF5ZXJEYXRhKGNvbnRlbnQpO1xyXG4gICAgICAgICAgICBpZihjb250ZW50ICYmIGNvbnRlbnQucGxheWVySWQgPT0gc2VsZklEKSB0aGlzLmdldE15c2VsZkNvbXAoKS5iaW5kU2VhdE15c2VsZihwbGF5ZXJDb21wKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy/pmpDol4/msqHmnInmlbDmja7nmoTkvY3nva5cclxuICAgICAgICB2YXIgc2l0ZU51bSA9IHRoaXMuY29tcF9zZWF0c0NvbnRhaW5lci5nZXRTZWF0c051bSgpO1xyXG4gICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCBzaXRlTnVtOyBpICsrKXtcclxuICAgICAgICAgICAgc2VhdEluZGV4ID0gaSsxO1xyXG4gICAgICAgICAgICBpZighZGljdFBsYXllcltzZWF0SW5kZXhdKSB0aGlzLl9yZW1vdmVPbmVQbGF5ZXIoc2VhdEluZGV4KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vaWYoIUdHLmdyYWJNZ3IuY2hlY2tNeXNlbGZJbmZvKHNlYXRJbmZvTGlzdCkpIHJldHVybjtcclxuICAgICAgICBpZighaXNOYU4oc2VsZkluZm8ucGxheWVySWQpICYmIHNlbGZJbmZvLnBsYXllcklkID4gMCkgIHRoaXMuc2hvd093bmVyKHNlbGZJbmZvKTtcclxuICAgICAgICB0aGlzLnNob3dTeXN0ZW0oc3lzdGVtSW5mbyk7XHJcbiAgICB9LFxyXG5cclxuICAgIHNob3dPd25lciA6IGZ1bmN0aW9uIChzZWxmSW5mbykge1xyXG4gICAgICAgIHRoaXMuZ2V0TXlzZWxmQ29tcCgpLnNldFBsYXllckRhdGEoc2VsZkluZm8pO1xyXG4gICAgICAgIHRoaXMuZ2V0TXlzZWxmQ29tcCgpLnNldFNlbGZJbmZvKHNlbGZJbmZvKTtcclxuXHJcbiAgICAgICAgR0cuZ3JhYk1nci5pbml0QnV0dG9uSW5mbygpO1xyXG4gICAgfSxcclxuXHJcbiAgICAvL+acieS4queOqeWutuS4remAlOaPkuWFpVxyXG4gICAgZW50ZXJPbmVQbGF5ZXIgOiBmdW5jdGlvbiAoc2VhdEluZGV4LCBwbGF5ZXJEYXRhKSB7XHJcbiAgICAgICAgdmFyIHJlZyA9IC9eXFwrP1sxLTldWzAtOV0qJC87XHJcbiAgICAgICAgaWYocmVnLnRlc3Qoc2VhdEluZGV4KSl7XHJcbiAgICAgICAgICAgIC8v5piv5q2j56Gu55qE5qGM5a2Q57Si5byVXHJcbiAgICAgICAgICAgIHBsYXllckRhdGEuc2VhdEluZGV4ID0gc2VhdEluZGV4O1xyXG4gICAgICAgICAgICB0aGlzLl9oaWRlUGxheWVyKHNlYXRJbmRleCwgcGxheWVyRGF0YS5wbGF5ZXJJZCk7XHJcbiAgICAgICAgICAgIHZhciBwbGF5ZXJDb21wID0gdGhpcy5fYWRkT25lUGxheWVyKHNlYXRJbmRleCk7XHJcbiAgICAgICAgICAgIGlmKHBsYXllckNvbXApIHBsYXllckNvbXAuc2V0UGxheWVyRGF0YShwbGF5ZXJEYXRhKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIHNob3dTeXN0ZW0gOiBmdW5jdGlvbiAoc3lzdGVtSW5mbykge1xyXG4gICAgICAgIHN5c3RlbUluZm8ubW9uZXlDaG9vc2UgPSAwO1xyXG4gICAgICAgIHRoaXMubm9kZV9zeXN0ZW0uZ2V0Q29tcG9uZW50KHRoaXMuX3BsYXllckNvbXBOYW1lKS5zZXRQbGF5ZXJEYXRhKHN5c3RlbUluZm8pO1xyXG4gICAgfSxcclxuXHJcbiAgICBjbGVhckRhdGEgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgLy92YXIgYmxvY2s7XHJcbiAgICAgICAgLy9mb3IodmFyIHNpdGVJbmRleCBpbiB0aGlzLl9kaWN0X3BsYXllckJsb2Nrcyl7XHJcbiAgICAgICAgLy8gICAgYmxvY2sgPSB0aGlzLl9kaWN0X3BsYXllckJsb2Nrc1tzaXRlSW5kZXhdO1xyXG4gICAgICAgIC8vICAgIGlmKGJsb2NrKSBibG9jay5jbGVhckRhdGEoKTtcclxuICAgICAgICAvL31cclxuICAgICAgICAvL3RoaXMuZ2V0TXlzZWxmQ29tcCgpLmNsZWFyRGF0YSgpO1xyXG4gICAgfSxcclxuXHJcbiAgICAvL+WIoOmZpOmHjeWkjeeahOeOqeWutu+8jOe7k+adn+acrOWxgOaXtuWAme+8jOmHjeWkjei/m+WHuuaIv+mXtOS8muWHuueOsOWkmuS4quWQjOagt+eOqeWutlxyXG4gICAgX2hpZGVQbGF5ZXIgOiBmdW5jdGlvbiAodGFyZ2V0SW5kZXgsIHBsYXllcklEKSB7XHJcbiAgICAgICAgdmFyIHBsYXllckNvbXA7XHJcbiAgICAgICAgZm9yKHZhciBzZWF0SW5kZXggaW4gdGhpcy5fZGljdF9wbGF5ZXJCbG9ja3Mpe1xyXG4gICAgICAgICAgICBwbGF5ZXJDb21wID0gdGhpcy5fZGljdF9wbGF5ZXJCbG9ja3Nbc2VhdEluZGV4XTtcclxuICAgICAgICAgICAgaWYoc2VhdEluZGV4ID09IHRhcmdldEluZGV4KXtcclxuICAgICAgICAgICAgICAgIC8v5om+5Yiw5L2N572uXHJcbiAgICAgICAgICAgICAgICAvL2lmKHBsYXllckNvbXApIHBsYXllckNvbXAuc2V0UGxheWVyRGF0YShwbGF5ZXJEYXRhKTtcclxuICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICBpZihwbGF5ZXJDb21wICYmIHBsYXllckNvbXAuZ2V0UGxheWVySUQoKSA9PSBwbGF5ZXJJRCl7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fcmVtb3ZlT25lUGxheWVyKHNlYXRJbmRleCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgLy/lop7liqDkuIDkuKrkuIrlnLrnjqnlrrZcclxuICAgIF9hZGRPbmVQbGF5ZXIgOiBmdW5jdGlvbiAoc2l0ZUluZGV4KSB7XHJcbiAgICAgICAgdmFyIHBsYXllckNvbXAgPSB0aGlzLl9kaWN0X3BsYXllckJsb2Nrc1tzaXRlSW5kZXhdO1xyXG4gICAgICAgIGlmICghcGxheWVyQ29tcCkge1xyXG4gICAgICAgICAgICB2YXIgIHBsYXllciA9IGNjLmluc3RhbnRpYXRlKHRoaXMucHJlZmFiX3BsYXllckJsb2NrKTtcclxuICAgICAgICAgICAgcGxheWVyLnBhcmVudCA9IHRoaXMubm9kZV9wbGF5ZXJDb250YWluZXI7XHJcbiAgICAgICAgICAgIHZhciBzaXplID0gR19UT09MLmFkYXB0U2l6ZShwbGF5ZXIud2lkdGgsIHBsYXllci5oZWlnaHQpO1xyXG4gICAgICAgICAgICBwbGF5ZXIud2lkdGggPSBzaXplLndpZHRoO1xyXG4gICAgICAgICAgICBwbGF5ZXIuaGVpZ2h0ID0gc2l6ZS5oZWlnaHQ7XHJcbiAgICAgICAgICAgIHZhciBwb3MgPSB0aGlzLmNvbXBfc2VhdHNDb250YWluZXIuYWRkT25lUGxheWVyKHNpdGVJbmRleCk7XHJcbiAgICAgICAgICAgIHBsYXllci5wb3NpdGlvbiA9IEdfVE9PTC5hZGFwdFBvcyhwb3MpO1xyXG4gICAgICAgICAgICB2YXIgcGxheWVyQ29tcCA9IHBsYXllci5nZXRDb21wb25lbnQodGhpcy5fcGxheWVyQ29tcE5hbWUpO1xyXG4gICAgICAgICAgICB0aGlzLl9kaWN0X3BsYXllckJsb2Nrc1tzaXRlSW5kZXhdID0gcGxheWVyQ29tcDtcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgdGhpcy5jb21wX3NlYXRzQ29udGFpbmVyLmFkZE9uZVBsYXllcihzaXRlSW5kZXgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLl9wbGF5ZXJOdW0gKz0gMTtcclxuICAgICAgICByZXR1cm4gcGxheWVyQ29tcDtcclxuICAgIH0sXHJcbiAgICAvL+S4gOS4queOqeWutuemu+WculxyXG4gICAgX3JlbW92ZU9uZVBsYXllciA6IGZ1bmN0aW9uIChzaXRlSW5kZXgpIHtcclxuICAgICAgICB2YXIgcGxheWVyQ29tcCA9IHRoaXMuX2RpY3RfcGxheWVyQmxvY2tzW3NpdGVJbmRleF07XHJcbiAgICAgICAgaWYoIXBsYXllckNvbXAgfHwgIXBsYXllckNvbXAuZ2V0SXNTaG93KCkpIHJldHVyblxyXG4gICAgICAgIHBsYXllckNvbXAuaGlkZVBsYXllcigpO1xyXG4gICAgICAgIHRoaXMuY29tcF9zZWF0c0NvbnRhaW5lci5vbmVQbGF5ZXJMZWF2ZShzaXRlSW5kZXgpO1xyXG4gICAgICAgIHRoaXMuX3BsYXllck51bSAtPSAxO1xyXG4gICAgfSxcclxuICAgIC8v5riF55CG5omA5pyJXHJcbiAgICBfY2xlYXJBbGxQbGF5ZXIgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgZm9yKHZhciBzZWF0SW5kZXggaW4gdGhpcy5fZGljdF9wbGF5ZXJCbG9ja3Mpe1xyXG4gICAgICAgICAgICB0aGlzLl9yZW1vdmVPbmVQbGF5ZXIoc2VhdEluZGV4KTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIHNldFdpblRhYmxlUmVzdWx0IDogZnVuY3Rpb24gKHJlc3VsdExpc3QpIHtcclxuICAgICAgICAvL+WFtuS7luW6p+S9jeS4iueOqeWutueahOmHkeW4gVxyXG4gICAgICAgIHZhciBwbGF5ZXJDb21wLCBkYXRhTGlzdCwgaXNNb3ZlR29sZCA9IGZhbHNlO1xyXG4gICAgICAgIGZvcih2YXIga2V5IGluIHRoaXMuX2RpY3RfcGxheWVyQmxvY2tzKXtcclxuICAgICAgICAgICAgcGxheWVyQ29tcCA9IHRoaXMuX2RpY3RfcGxheWVyQmxvY2tzW2tleV07XHJcbiAgICAgICAgICAgIGlmKCFwbGF5ZXJDb21wLmdldElzU2hvdygpIHx8IHBsYXllckNvbXAuZ2V0UGxheWVySUQoKSA9PSBHRy5nZXRQbGF5ZXJJRCgpKSBjb250aW51ZTtcclxuICAgICAgICAgICAgZGF0YUxpc3QgPSB0aGlzLl9jaGVja1Jlc3VsdChyZXN1bHRMaXN0LCBwbGF5ZXJDb21wLmdldEFsbEdyYWJUYWJsZSgpLCBwbGF5ZXJDb21wLmdldFdvcmxkUG9zKCkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZihkYXRhTGlzdCAmJiBkYXRhTGlzdC5sZW5ndGggPiAwKSBpc01vdmVHb2xkID0gdHJ1ZTtcclxuICAgICAgICBHRy5ncmFiTWdyLnBsYXlSZXN1bHRHb2xkTW92ZShkYXRhTGlzdCk7XHJcbiAgICAgICAgLy/njqnlrrboh6rlt7HnmoTph5HluIFcclxuICAgICAgICBwbGF5ZXJDb21wID0gdGhpcy5nZXRNeXNlbGZDb21wKCk7XHJcbiAgICAgICAgcmVjb3JkRGljdCA9IHBsYXllckNvbXAuZ2V0QWxsR3JhYlRhYmxlKCk7XHJcbiAgICAgICAgaWYocmVjb3JkRGljdCl7XHJcbiAgICAgICAgICAgIGRhdGFMaXN0ID0gdGhpcy5fY2hlY2tSZXN1bHQocmVzdWx0TGlzdCwgcmVjb3JkRGljdCwgcGxheWVyQ29tcC5nZXRXb3JsZFBvcygpKTtcclxuICAgICAgICAgICAgaWYoZGF0YUxpc3QgJiYgZGF0YUxpc3QubGVuZ3RoID4gMCkgaXNNb3ZlR29sZCA9IHRydWU7XHJcbiAgICAgICAgICAgIEdHLmdyYWJNZ3IucGxheVJlc3VsdEdvbGRNb3ZlKGRhdGFMaXN0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy/lkIPnk5znvqTkvJfnmoTph5HluIFcclxuICAgICAgICB2YXIgcmVjb3JkRGljdCA9IEdHLmdyYWJNZ3IuZ2V0SWRsZUJldHRpbmcoKTtcclxuICAgICAgICBpZihyZWNvcmREaWN0KXtcclxuICAgICAgICAgICAgZGF0YUxpc3QgPSB0aGlzLl9jaGVja1Jlc3VsdChyZXN1bHRMaXN0LCByZWNvcmREaWN0LCBHRy5ncmFiTWdyLmdldElkbGVCZXR0aW5nUG9zKCkpXHJcbiAgICAgICAgICAgIGlmKGRhdGFMaXN0ICYmIGRhdGFMaXN0Lmxlbmd0aCA+IDApIGlzTW92ZUdvbGQgPSB0cnVlO1xyXG4gICAgICAgICAgICBHRy5ncmFiTWdyLnBsYXlSZXN1bHRHb2xkTW92ZShkYXRhTGlzdCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8v5Ymp5L2Z55qE6YeR5biB6aOe5ZCR57O757ufXHJcbiAgICAgICAgdmFyIHJlY29yZERpY3QgPSBHRy5ncmFiTWdyLmdldFRhYmxlQ29udGFpbmVyKCkuZ2V0TGVhdmVHb2xkSW1hZ2VzKCk7XHJcbiAgICAgICAgaWYocmVjb3JkRGljdCl7XHJcbiAgICAgICAgICAgIC8vdmFyIGN1ckxpc3QgPSB0aGlzLl9jaGVja1Jlc3VsdChyZXN1bHRMaXN0LCByZWNvcmREaWN0LCB0aGlzLmdldFN5c3RlbUNvbXAoKS5nZXRXb3JsZFBvcygpKVxyXG4gICAgICAgICAgICBkYXRhTGlzdCA9IFtdO1xyXG4gICAgICAgICAgICB2YXIgZ29sZE51bSwgdGFyZ2V0UG9zID0gdGhpcy5nZXRTeXN0ZW1Db21wKCkuZ2V0V29ybGRQb3MoKTtcclxuICAgICAgICAgICAgZm9yKHZhciB0YWJsZUluZGV4IGluIHJlY29yZERpY3Qpe1xyXG4gICAgICAgICAgICAgICAgZ29sZE51bSA9IHJlY29yZERpY3RbdGFibGVJbmRleF07XHJcbiAgICAgICAgICAgICAgICBpZihnb2xkTnVtKXtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZGF0YU9iaiA9IEdfT0JKLmRhdGFfZmx5R29sZF90YWJsZVRvUGxheWVyKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YU9iai5nb2xkTnVtID0gZ29sZE51bTtcclxuICAgICAgICAgICAgICAgICAgICBkYXRhT2JqLnRhYmxlSW5kZXggPSB0YWJsZUluZGV4O1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGFPYmoudGFyZ2V0UG9zID0gdGFyZ2V0UG9zO1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGFMaXN0LnB1c2goZGF0YU9iaik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYoZGF0YUxpc3QgJiYgZGF0YUxpc3QubGVuZ3RoID4gMCkgaXNNb3ZlR29sZCA9IHRydWU7XHJcbiAgICAgICAgICAgIEdHLmdyYWJNZ3IucGxheVJlc3VsdEdvbGRNb3ZlKGRhdGFMaXN0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYoaXNNb3ZlR29sZCkgR0cuYXVkaW9NZ3IucGxheVNvdW5kKDE4KTtcclxuICAgIH0sXHJcbiAgICBfY2hlY2tSZXN1bHQgOiBmdW5jdGlvbiAocmVzdWx0TGlzdCwgcmVjb3JkRGljdCwgdGFyZ2V0UG9zKSB7XHJcbiAgICAgICAgdmFyIHJlc3VsdCwgZ29sZE51bSwgZGF0YUxpc3QgPSBbXTtcclxuICAgICAgICBmb3IodmFyIGluZGV4IGluIHJlc3VsdExpc3Qpe1xyXG4gICAgICAgICAgICByZXN1bHQgPSByZXN1bHRMaXN0W2luZGV4XTtcclxuICAgICAgICAgICAgZ29sZE51bSA9IHJlY29yZERpY3RbcmVzdWx0XTtcclxuICAgICAgICAgICAgaWYoZ29sZE51bSl7XHJcbiAgICAgICAgICAgICAgICB2YXIgZGF0YU9iaiA9IEdfT0JKLmRhdGFfZmx5R29sZF90YWJsZVRvUGxheWVyKCk7XHJcbiAgICAgICAgICAgICAgICBkYXRhT2JqLmdvbGROdW0gPSBnb2xkTnVtO1xyXG4gICAgICAgICAgICAgICAgZGF0YU9iai50YWJsZUluZGV4ID0gcmVzdWx0O1xyXG4gICAgICAgICAgICAgICAgZGF0YU9iai50YXJnZXRQb3MgPSB0YXJnZXRQb3M7XHJcbiAgICAgICAgICAgICAgICBkYXRhTGlzdC5wdXNoKGRhdGFPYmopO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBkYXRhTGlzdFxyXG4gICAgfSxcclxuXHJcbiAgICAvL+aYvuekuuaJgOacieeOqeWutuWvueixoeeahOWktOWDj+S4iueahOmHkeW4gea1ruWKqOS/oeaBr1xyXG4gICAgc2hvd0FsbEdvbGRSZXN1bHQgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHBsYXllciwgaXNTaG93LCBpc09rO1xyXG4gICAgICAgIGZvcih2YXIgc2VhdEluZGV4IGluIHRoaXMuX2RpY3RfcGxheWVyQmxvY2tzKXtcclxuICAgICAgICAgICAgcGxheWVyID0gdGhpcy5fZGljdF9wbGF5ZXJCbG9ja3Nbc2VhdEluZGV4XTtcclxuICAgICAgICAgICAgaWYoIXBsYXllci5nZXRJc1Nob3coKSkgY29udGludWU7XHJcbiAgICAgICAgICAgIGlzT2sgPSBwbGF5ZXIuc2hvd1Jlc3VsdEdvbGQoKTtcclxuICAgICAgICAgICAgaWYoIWlzU2hvdykgaXNTaG93ID0gaXNPaztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlzT2sgPSB0aGlzLmdldE15c2VsZkNvbXAoKS5zaG93UmVzdWx0R29sZCgpO1xyXG4gICAgICAgIGlmKCFpc1Nob3cpIGlzU2hvdyA9IGlzT2s7XHJcbiAgICAgICAgcmV0dXJuIGlzU2hvd1xyXG4gICAgfSxcclxuXHJcbiAgICBzZXRNeXNlbGZNb25leSA6IGZ1bmN0aW9uIChhZGRDb2luLCBtb25leSkge1xyXG4gICAgICAgIHRoaXMuZ2V0TXlzZWxmQ29tcCgpLnNldFJlc3VsdEluZm8oYWRkQ29pbiwgbW9uZXkpO1xyXG4gICAgfSxcclxuICAgIC8v6I635Y+W5Zyo5bqn5L2N5LiK55qE546p5a626ISa5pysXHJcbiAgICBnZXRDb21wQnlJbmRleCA6IGZ1bmN0aW9uIChzaXRlSW5kZXgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZGljdF9wbGF5ZXJCbG9ja3Nbc2l0ZUluZGV4XTtcclxuICAgIH0sXHJcbiAgICBnZXRQbGF5ZXJCeUlEIDogZnVuY3Rpb24gKHBsYXllcklEKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0Q29tcEJ5SW5kZXgodGhpcy5fZGljdF9wbGF5ZXJCeUlEW3BsYXllcklEXSk7XHJcbiAgICB9LFxyXG4gICAgLy/ojrflj5bnjqnlrrboh6rlt7FcclxuICAgIGdldE15c2VsZkNvbXAgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubm9kZV9vd25lci5nZXRDb21wb25lbnQodGhpcy5fcGxheWVyQ29tcE5hbWUpO1xyXG4gICAgfSxcclxuICAgIGdldFBva2VyUG9zIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLm5vZGVfc3lzdGVtLmdldENvbXBvbmVudCh0aGlzLl9wbGF5ZXJDb21wTmFtZSkuZ2V0UG9rZXJQb2ludCgpO1xyXG4gICAgfSxcclxuICAgIGdldFN5c3RlbUNvbXAgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubm9kZV9zeXN0ZW0uZ2V0Q29tcG9uZW50KHRoaXMuX3BsYXllckNvbXBOYW1lKVxyXG4gICAgfSxcclxuXHJcbiAgICAvLyBjYWxsZWQgZXZlcnkgZnJhbWUsIHVuY29tbWVudCB0aGlzIGZ1bmN0aW9uIHRvIGFjdGl2YXRlIHVwZGF0ZSBjYWxsYmFja1xyXG4gICAgLy8gdXBkYXRlOiBmdW5jdGlvbiAoZHQpIHtcclxuXHJcbiAgICAvLyB9LFxyXG59KTtcclxuIiwiLy/ljaHniYzmtLvliqjlsYJcclxuXHJcbmNjLkNsYXNzKHtcclxuICAgIGV4dGVuZHM6IGNjLkNvbXBvbmVudCxcclxuXHJcbiAgICBwcm9wZXJ0aWVzOiB7XHJcbiAgICAgICAgX3Bva2VyU2hvd1BvcyA6IG51bGwsXHJcbiAgICAgICAgX3Bva2VyTnVtIDogbnVsbCxcclxuICAgICAgICBfU3RhcnRQb3MgOiBudWxsLFxyXG4gICAgICAgIF9wb2tlclcgOiBudWxsLFxyXG4gICAgICAgIF9wb2tlckggOiBudWxsLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/ljaHniYznmoTpq5hcclxuICAgICAgICBfcG9rZXJPZmZYIDogbnVsbCxcclxuICAgICAgICBfY2FsbEZ1bmMgOiBudWxsLFxyXG4gICAgICAgIF9jdXJSZXN1bHROdW0gOiBudWxsLFxyXG5cclxuICAgICAgICAvLz09PT09PT09PT09PT09PT095Y2h54mM5a655Zmo6YeN5p6EXHJcbiAgICAgICAgX2xpc3RfcG9rZXJzIDogbnVsbCxcclxuICAgICAgICBfZmlyc3RQb2tlckluZGV4IDogbnVsbCwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/lsZXnpLrnu5PmnpznmoTml7blgJnvvIznrKzkuIDlvKDljaHniYznmoTkv6Hmga/lj5jljJbkuoZcclxuXHJcblxyXG4gICAgICAgIHByZWZhYl9wb2tlciA6IGNjLlByZWZhYixcclxuICAgICAgICBhdGxhc19wb2tlclJlc3VsdCA6IHtcclxuICAgICAgICAgICAgZGVmYXVsdCA6IG51bGwsXHJcbiAgICAgICAgICAgIHR5cGUgOiBjYy5TcHJpdGVBdGxhcyxcclxuICAgICAgICAgICAgZGlzcGxheU5hbWUgOiAn5pi+56S654mb5Yeg5Zu+6ZuGJ1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgcHJlZmFiX3Bva2VyUmVzdWx0IDoge1xyXG4gICAgICAgICAgICBkZWZhdWx0IDogbnVsbCxcclxuICAgICAgICAgICAgdHlwZSA6IGNjLlByZWZhYixcclxuICAgICAgICAgICAgZGlzcGxheU5hbWUgOiAn5pi+56S654mb5Yeg57uT5p6cJ1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgLy8gdXNlIHRoaXMgZm9yIGluaXRpYWxpemF0aW9uXHJcbiAgICBvbkxvYWQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLl9pbml0KCk7XHJcbiAgICB9LFxyXG5cclxuICAgIF9pbml0IDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuX3Bva2VyQ29tcE5hbWUgPSAnT2JqX3Bva2VyJztcclxuICAgICAgICB0aGlzLl9wb2tlclJlc3VsdENvbXBOYW1lID0gJ09ial9vblBva2VyUmVzdWx0JztcclxuICAgICAgICB0aGlzLl9tb3ZlVGltZSA9IEdfQ29uZmlnX2dyYWIudGltZV9wb2tlck1vdmU7XHJcbiAgICAgICAgdGhpcy5fZGVsYXlUaW1lID0gR19Db25maWdfZ3JhYi5kZWxheVRpbWVfcG9rZXJNb3ZlO1xyXG4gICAgICAgIHRoaXMuX29wZW5Nb3ZlVGltZSA9IEdfQ29uZmlnX2dyYWIudGltZV9vcGVuTW92ZVBva2VyO1xyXG4gICAgICAgIHRoaXMuX3dpblBva2VyT2ZmID0gR19Db25maWdfZ3JhYi5udW1fd2luUG9rZXJPZmY7XHJcbiAgICAgICAgdGhpcy5fbWF4UG9rZXJOdW0gPSA1O1xyXG4gICAgICAgIHRoaXMuX3Bva2VyTnVtID0gMDtcclxuICAgICAgICAvL+mHjeaehFxyXG4gICAgICAgIHRoaXMuX2xpc3RfcG9rZXJzID0gW107XHJcbiAgICB9LFxyXG5cclxuICAgIHNldFN0YXJ0SW5mbyA6IGZ1bmN0aW9uIChzdGFydFBvcywgdGFyZ2V0UG9zKSB7XHJcbiAgICAgICAgdGhpcy5fU3RhcnRQb3MgPSBzdGFydFBvcztcclxuICAgICAgICB0aGlzLl9wb2tlclNob3dQb3MgPSBjYy5wKHRhcmdldFBvcy54LCB0YXJnZXRQb3MueSk7XHJcbiAgICAgICAgLy8gaWYodGhpcy5fcG9rZXJXKSB0aGlzLl9wb2tlclNob3dQb3MgPSBjYy5wKHRoaXMuX3Bva2VyU2hvd1Bvcy54LXRoaXMuX3Bva2VyVyowLjUsIHRoaXMuX3Bva2VyU2hvd1Bvcy55LXRoaXMuX3Bva2VySCowLjUpO1xyXG4gICAgICAgIGlmKHRoaXMuX3Bva2VyVykgdGhpcy5fcG9rZXJTaG93UG9zID0gY2MucCh0aGlzLl9wb2tlclNob3dQb3MueCwgdGhpcy5fcG9rZXJTaG93UG9zLnkpO1xyXG4gICAgfSxcclxuICAgIGNsZWFyRGF0YSA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLm5vZGUuc3RvcEFsbEFjdGlvbnMoKTtcclxuICAgICAgICB0aGlzLl9wb2tlck51bSA9IDA7XHJcbiAgICAgICAgdGhpcy5fZmx5TnVtID0gMDtcclxuXHJcbiAgICAgICAgZm9yKHZhciBpID0gMDsgaSA8IHRoaXMuX21heFBva2VyTnVtOyBpICsrKXtcclxuICAgICAgICAgICAgaWYodGhpcy5fbGlzdF9wb2tlcnNbaV0pIHRoaXMuX2RlbE9uZVBva2VyKHRoaXMuX2xpc3RfcG9rZXJzW2ldKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYodGhpcy5fcG9rZXJSZXN1bHQpe1xyXG4gICAgICAgICAgICB0aGlzLl9wb2tlclJlc3VsdC5kZXN0cm95KCk7XHJcbiAgICAgICAgICAgIHRoaXMuX3Bva2VyUmVzdWx0ID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIC8vIOaYvuekuuWNoeeJjFxyXG4gICAgc2hvd1Bva2VyRVggOiBmdW5jdGlvbiAoZGF0YU9iaikge1xyXG4gICAgICAgIGlmKGRhdGFPYmouaXNGbHlFZmZlY3Qpe1xyXG4gICAgICAgICAgICB0aGlzLl9zaG93UG9rZXJFWChkYXRhT2JqKTtcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHNlbGYuX3Nob3dQb2tlckVYKGRhdGFPYmopO1xyXG4gICAgICAgICAgICB9LDEwMClcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgX3Nob3dQb2tlckVYIDogZnVuY3Rpb24gKGRhdGFPYmopIHtcclxuICAgICAgICAvL3ZhciBkYXRhT2JqID0gR19PQkouZGF0YV9ncmFiUG9rZXJJbmZvKCk7XHJcbiAgICAgICAgLy/ov5nluYXljaHniYznu5PmnpzlgLwo5rKh5pyJ5Lyg5YC855qE6K+d77yM6buY6K6k5pyA57uI5Y2h54mM5YC85Li6MClcclxuICAgICAgICB0aGlzLl9wb2tlclNob3dQb3MgPSBHRy5ncmFiTWdyLmdldFBva2VyU2hvd1BvcygpO1xyXG4gICAgICAgIHRoaXMuX2N1clJlc3VsdE51bSA9IGRhdGFPYmoucG9rZXJSZXN1bHQgPyBkYXRhT2JqLnBva2VyUmVzdWx0IDogMDtcclxuICAgICAgICAvL+WNoeeJjOS/oeaBr1xyXG4gICAgICAgIHRoaXMuX2ZseU51bSA9IDA7XHJcbiAgICAgICAgdmFyIHBva2VyTGlzdCA9IGRhdGFPYmoucG9rZXJJbmZvTGlzdDtcclxuICAgICAgICBpZihwb2tlckxpc3Qpe1xyXG4gICAgICAgICAgICB2YXIgbGFzdFBva2VyO1xyXG4gICAgICAgICAgICBpZihkYXRhT2JqLnN0YXJ0UG9rZXJJbmRleCA9PSAxKXtcclxuICAgICAgICAgICAgICAgIC8v5pi+56S656ys5LiA5byg5Y2h54mMXHJcbiAgICAgICAgICAgICAgICB0aGlzLl9wb2tlck51bSA9IDA7XHJcbiAgICAgICAgICAgICAgICBsYXN0UG9rZXIgPSB0aGlzLl9hZGRPbmVQb2tlckVYKDAsIHBva2VyTGlzdFswXSwgZGF0YU9iai5pc0ZseUVmZmVjdCk7XHJcbiAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgLy/lj5blhbbkvZnlm5vlvKDkv6Hmga9cclxuICAgICAgICAgICAgICAgIHRoaXMuX2ZpcnN0UG9rZXJJbmRleCA9IHBva2VyTGlzdFswXS5wb2tlckluZGV4O1xyXG4gICAgICAgICAgICAgICAgZm9yKHZhciBpID0gMTsgaSA8IHBva2VyTGlzdC5sZW5ndGg7IGkgKyspe1xyXG4gICAgICAgICAgICAgICAgICAgIGxhc3RQb2tlciA9IHRoaXMuX2FkZE9uZVBva2VyRVgoaSwgcG9rZXJMaXN0W2ldLCBkYXRhT2JqLmlzRmx5RWZmZWN0KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZihsYXN0UG9rZXIpIGxhc3RQb2tlci5fZmx5Q2FsbCA9IGRhdGFPYmouY2FsbEZ1bmM7XHJcbiAgICAgICAgICAgIEdHLmF1ZGlvTWdyLnBsYXlTb3VuZCgxNCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICAvL+WinuWKoOS4gOW8oOWNoeeJjFxyXG4gICAgX2FkZE9uZVBva2VyRVggOiBmdW5jdGlvbiAocG9rZXJJbmRleCwgcG9rZXJEYXRhLCBpc0ZseUVmZmVjdCkge1xyXG4gICAgICAgIHZhciBwb2tlciA9IHRoaXMuX2xpc3RfcG9rZXJzW3Bva2VySW5kZXhdO1xyXG4gICAgICAgIGlmKCFwb2tlcil7XHJcbiAgICAgICAgICAgIHBva2VyID0gdGhpcy5fY3JlYXRlUG9rZXIoKTtcclxuICAgICAgICAgICAgcG9rZXIuekluZGV4ID0gcG9rZXJJbmRleDtcclxuICAgICAgICAgICAgdGhpcy5fbGlzdF9wb2tlcnNbcG9rZXJJbmRleF0gPSBwb2tlcjtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy/ljaHniYzkv6Hmga9cclxuICAgICAgICB0aGlzLl9yZXNldFBva2VySW5mbyhwb2tlciwgcG9rZXJEYXRhLnBva2VySW5kZXgpO1xyXG4gICAgICAgIC8v6aOe6KGM6KGo546wXHJcbiAgICAgICAgcG9rZXIuZ2V0Q29tcG9uZW50KHRoaXMuX3Bva2VyQ29tcE5hbWUpLmNsZWFyQWxsQWN0aW9ucygpO1xyXG4gICAgICAgIHBva2VyLmdldENvbXBvbmVudCh0aGlzLl9wb2tlckNvbXBOYW1lKS5zaG93UG9rZXJOZWdhdGl2ZSgpO1xyXG4gICAgICAgIHBva2VyLmFjdGl2ZSA9IHRydWU7XHJcbiAgICAgICAgaWYoaXNGbHlFZmZlY3Qpe1xyXG4gICAgICAgICAgICAvL+aciemjnuihjOeJueaViFxyXG4gICAgICAgICAgICBwb2tlci5wb3NpdGlvbiA9IHRoaXMuX1N0YXJ0UG9zO1xyXG4gICAgICAgICAgICB0aGlzLl9hZGRGbHlBY3Rpb24ocG9rZXIsIHBva2VyRGF0YS5pc09wZW4pO1xyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAvL+ayoeaciemjnuihjOeJueaViFxyXG4gICAgICAgICAgICB0aGlzLl9hZGROb0ZseShwb2tlcik7XHJcbiAgICAgICAgICAgIGlmKHBva2VyRGF0YS5pc09wZW4pIHBva2VyLmdldENvbXBvbmVudCh0aGlzLl9wb2tlckNvbXBOYW1lKS5zaG93UG9rZXJQbHVzKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuX3Bva2VyTnVtICs9IDE7XHJcbiAgICAgICAgdGhpcy5fZmx5TnVtICs9IDE7XHJcbiAgICAgICAgcmV0dXJuIHBva2VyXHJcbiAgICB9LFxyXG5cclxuICAgIC8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblxyXG4gICAgLy/lop7liqDkuIDlvKDljaHniYzvvIznuq/nsrnnmoTliJvlu7pcclxuICAgIF9jcmVhdGVQb2tlciA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgIHBva2VyID0gbmV3IGNjLmluc3RhbnRpYXRlKHRoaXMucHJlZmFiX3Bva2VyKTtcclxuICAgICAgICBwb2tlci5wYXJlbnQgPSB0aGlzLm5vZGU7XHJcbiAgICAgICAgLy9wb2tlci5zY2FsZSA9IDAuNTtcclxuICAgICAgICBwb2tlci5hY3RpdmUgPSB0cnVlO1xyXG4gICAgICAgIHJldHVybiBwb2tlclxyXG4gICAgfSxcclxuICAgIC8v5Yi35paw5Y2h54mM5pWw5o2uXHJcbiAgICBfcmVzZXRQb2tlckluZm8gOiBmdW5jdGlvbiAocG9rZXJOb2RlLCBwb2tlckluZGV4KSB7XHJcbiAgICAgICAgdmFyIHBva2VySW5mbyA9IEdfREFUQS5nZXRQb2tlckluZm8ocG9rZXJJbmRleCk7XHJcbiAgICAgICAgdmFyIHBva2VyQ29tcCA9IHBva2VyTm9kZS5nZXRDb21wb25lbnQodGhpcy5fcG9rZXJDb21wTmFtZSk7XHJcbiAgICAgICAgcG9rZXJDb21wLnNldFBva2VySW5mbyhwb2tlckluZm8ucG9rZXJUeXBlLCBwb2tlckluZm8ucG9rZXJWYWx1ZSwgZmFsc2UpO1xyXG4gICAgfSxcclxuICAgIC8v57uZ5Y2h54mM5aKe5Yqg5Yqo5L2cXHJcbiAgICBfYWRkRmx5QWN0aW9uIDogZnVuY3Rpb24gKHBva2VyTm9kZSwgaXNPcGVuKSB7XHJcbiAgICAgICAgdmFyIHBva2VyQ29tcCA9IHBva2VyTm9kZS5nZXRDb21wb25lbnQodGhpcy5fcG9rZXJDb21wTmFtZSk7XHJcblxyXG4gICAgICAgIGlmKCF0aGlzLl9wb2tlclcpIHRoaXMuX3NldFBva2VyQ29uZmlnSW5mbyhwb2tlck5vZGUpO1xyXG4gICAgICAgIHZhciBhY3QxID0gY2MuZGVsYXlUaW1lKHRoaXMuX2RlbGF5VGltZSp0aGlzLl9mbHlOdW0pO1xyXG4gICAgICAgIHZhciBhY3QzID0gY2MubW92ZVRvKHRoaXMuX21vdmVUaW1lLCB0aGlzLl9nZXRUYXJnZXRQb3MoKSk7XHJcbiAgICAgICAgcG9rZXJOb2RlLnJ1bkFjdGlvbihjYy5zZXF1ZW5jZShhY3QxLCBhY3QzLCBjYy5jYWxsRnVuYyh0aGlzLl9tb3ZlRW5kLCB0aGlzLCBpc09wZW4pKSk7XHJcbiAgICB9LFxyXG4gICAgLy/ljaHniYzlgZrml6Dpo57ooYzmlYjmnpzmmL7npLpcclxuICAgIF9hZGROb0ZseSA6IGZ1bmN0aW9uIChwb2tlck5vZGUpIHtcclxuICAgICAgICBpZighdGhpcy5fcG9rZXJXKSB0aGlzLl9zZXRQb2tlckNvbmZpZ0luZm8ocG9rZXJOb2RlKTtcclxuICAgICAgICBwb2tlck5vZGUucG9zaXRpb24gPSB0aGlzLl9nZXRUYXJnZXRQb3MoKTtcclxuICAgIH0sXHJcbiAgICBfbW92ZUVuZCA6IGZ1bmN0aW9uICh0YXJnZXQsIGlzT3Blbikge1xyXG4gICAgICAgIGlmKGlzT3Blbil7XHJcbiAgICAgICAgICAgIHZhciBwb2tlckNvbXAgPSB0YXJnZXQuZ2V0Q29tcG9uZW50KHRoaXMuX3Bva2VyQ29tcE5hbWUpO1xyXG4gICAgICAgICAgICBwb2tlckNvbXAub3BlblBva2VyKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmKHRhcmdldC5fZmx5Q2FsbCl7XHJcbiAgICAgICAgICAgIHRhcmdldC5fZmx5Q2FsbCgpO1xyXG4gICAgICAgICAgICB0YXJnZXQuX2ZseUNhbGwgPSBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgX3NldFBva2VyQ29uZmlnSW5mbyA6IGZ1bmN0aW9uIChwb2tlcikge1xyXG4gICAgICAgIHZhciBwb2tlckNvbXAgPSBwb2tlci5nZXRDb21wb25lbnQodGhpcy5fcG9rZXJDb21wTmFtZSk7XHJcbiAgICAgICAgdmFyIHBva2VyU2l6ZSA9IHBva2VyQ29tcC5nZXRQb2tlclNpemUoKTtcclxuICAgICAgICB0aGlzLl9wb2tlclcgPSBwb2tlclNpemUud2lkdGggKiBwb2tlci5zY2FsZVg7XHJcbiAgICAgICAgdGhpcy5fcG9rZXJIID0gcG9rZXJTaXplLmhlaWdodCAqIHBva2VyLnNjYWxlWDtcclxuICAgICAgICB0aGlzLl9wb2tlck9mZlggPSB0aGlzLl9wb2tlclcgKiBHX0NvbmZpZ19ncmFiLm51bV9wb2tlck9mZlg7XHJcbiAgICAgICAgLy8gdGhpcy5fcG9rZXJTaG93UG9zID0gY2MucCh0aGlzLl9wb2tlclNob3dQb3MueC10aGlzLl9wb2tlclcqMC41LCB0aGlzLl9wb2tlclNob3dQb3MueS10aGlzLl9wb2tlckgqMC41KTtcclxuICAgICAgICB0aGlzLl9wb2tlclNob3dQb3MgPSBjYy5wKHRoaXMuX3Bva2VyU2hvd1Bvcy54LCB0aGlzLl9wb2tlclNob3dQb3MueSk7XHJcbiAgICB9LFxyXG5cclxuICAgIC8v6YeN5paw6K6+572u56ys5LiA5byg5Y2h54mM5L+h5oGvXHJcbiAgICBfcmVzZXRGaXJzdFBva2VySW5mbyA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZih0aGlzLl9saXN0X3Bva2Vyc1swXSkgdGhpcy5fcmVzZXRQb2tlckluZm8odGhpcy5fbGlzdF9wb2tlcnNbMF0sIHRoaXMuX2ZpcnN0UG9rZXJJbmRleCk7XHJcbiAgICB9LFxyXG5cclxuICAgIC8v5byA54mMPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbiAgICBvcGVuUG9rZXJzIDogZnVuY3Rpb24gKGNhbGxGdW5jKSB7XHJcbiAgICAgICAgdGhpcy5fY2FsbEZ1bmMgPSBjYWxsRnVuYztcclxuICAgICAgICAvL+mHjee9ruesrOS4gOW8oOeJjOS/oeaBr1xyXG4gICAgICAgIHRoaXMuX3Jlc2V0Rmlyc3RQb2tlckluZm8oKTtcclxuICAgICAgICAvL+W8gOWni+aSreaUvuW8gOeJjFxyXG4gICAgICAgIHZhciBwb2tlciwgaW5kZXg9IDAsIGxhc3RQb2tlciwgcG9rZXJDb21wLCBwb3NYO1xyXG4gICAgICAgIC8vdmFyIHNvcnRMaXN0ID0gdGhpcy5fc29ydFBva2VycygpO1xyXG4gICAgICAgIHZhciBzb3J0TGlzdCA9IHRoaXMubm9kZS5jaGlsZHJlbjtcclxuICAgICAgICAvL+WmguaenOacieeJm++8jOmcgOimgeWIhumalOW8gOadpVxyXG4gICAgICAgIHZhciBvZmZYID0gMDtcclxuICAgICAgICBpZih0aGlzLl9jdXJSZXN1bHROdW0gPiAwKSBvZmZYID0gdGhpcy5fd2luUG9rZXJPZmY7XHJcbiAgICAgICAgLy/lvIDniYxcclxuICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgdGhpcy5fbGlzdF9wb2tlcnMubGVuZ3RoOyBpICsrKXtcclxuICAgICAgICAgICAgcG9rZXIgPSB0aGlzLl9saXN0X3Bva2Vyc1tpXTtcclxuICAgICAgICAgICAgaWYoIXBva2VyKSBjb250aW51ZTtcclxuICAgICAgICAgICAgLy9wb2tlci56SW5kZXggPSBpbmRleDtcclxuICAgICAgICAgICAgcG9rZXJDb21wID0gcG9rZXIuZ2V0Q29tcG9uZW50KHRoaXMuX3Bva2VyQ29tcE5hbWUpO1xyXG4gICAgICAgICAgICBwb2tlckNvbXAuc2hvd1Bva2VyUGx1cygpO1xyXG5cclxuICAgICAgICAgICAgaWYoIXRoaXMuX3Bva2VyVykgdGhpcy5fc2V0UG9rZXJDb25maWdJbmZvKHBva2VyKTtcclxuICAgICAgICAgICAgLy9wb3NYID0gdGhpcy5fcG9rZXJTaG93UG9zLngrdGhpcy5fcG9rZXJXKjAuNTtcclxuICAgICAgICAgICAgcG9zWCA9IHRoaXMuX3Bva2VyU2hvd1Bvcy54O1xyXG4gICAgICAgICAgICBpZihpID4gMikgcG9zWCArPSBvZmZYO1xyXG4gICAgICAgICAgICBwb2tlci5wb3NpdGlvbiA9IGNjLnAocG9zWCwgdGhpcy5fcG9rZXJTaG93UG9zLnkpO1xyXG4gICAgICAgICAgICB0aGlzLl9hY3RPcGVuUG9rZXIocG9rZXIsIGluZGV4KnRoaXMuX3Bva2VyT2ZmWCk7XHJcbiAgICAgICAgICAgIGluZGV4ICs9IDE7XHJcbiAgICAgICAgICAgIGxhc3RQb2tlciA9IHBva2VyO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsYXN0UG9rZXIuX2NhbGxGdW5jID0gdGhpcy5fc2hvd1Jlc3VsdC5iaW5kKHRoaXMpO1xyXG4gICAgICAgIEdHLmF1ZGlvTWdyLnBsYXlTb3VuZCgxNik7XHJcbiAgICB9LFxyXG4gICAgX2FjdE9wZW5Qb2tlciA6IGZ1bmN0aW9uIChwb2tlciwgb2ZmWCkge1xyXG4gICAgICAgIHZhciBhY3QxID0gY2MubW92ZVRvKHRoaXMuX29wZW5Nb3ZlVGltZSwgcG9rZXIueCtvZmZYLCBwb2tlci55KTtcclxuICAgICAgICBwb2tlci5ydW5BY3Rpb24oY2Muc2VxdWVuY2UoYWN0MSwgY2MuY2FsbEZ1bmMoZnVuY3Rpb24gKHRhcmdldCkge1xyXG4gICAgICAgICAgICAvL3RoaXMuX3Nob3dSZXN1bHQoNSk7XHJcbiAgICAgICAgICAgIGlmKHRhcmdldC5fY2FsbEZ1bmMpe1xyXG4gICAgICAgICAgICAgICAgdGFyZ2V0Ll9jYWxsRnVuYygpO1xyXG4gICAgICAgICAgICAgICAgdGFyZ2V0Ll9jYWxsRnVuYyA9IG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LCB0aGlzKSkpO1xyXG4gICAgfSxcclxuICAgIC8v5pi+56S65Y2h54mM55qE54mM5Z6L57uT5p6cXHJcbiAgICBfc2hvd1Jlc3VsdCA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgcG9rZXJSZXN1bHQgPSB0aGlzLl9jdXJSZXN1bHROdW07XHJcbiAgICAgICAgdmFyIGF1ZGlvSUQgPSBwb2tlclJlc3VsdCA9PSAwID8gMTIgOiBwb2tlclJlc3VsdDtcclxuICAgICAgICBHRy5hdWRpb01nci5wbGF5U291bmQoYXVkaW9JRCk7XHJcblxyXG4gICAgICAgIHZhciBwb2tlclBvcyA9IGNjLnAodGhpcy5fcG9rZXJTaG93UG9zLngrdGhpcy5fcG9rZXJXKjAuNjUsIHRoaXMuX3Bva2VyU2hvd1Bvcy55KTtcclxuICAgICAgICB2YXIgcmVzdWx0ID0gY2MuaW5zdGFudGlhdGUodGhpcy5wcmVmYWJfcG9rZXJSZXN1bHQpO1xyXG4gICAgICAgIHRoaXMubm9kZS5hZGRDaGlsZChyZXN1bHQsIHRoaXMubm9kZS5jaGlsZHJlbi5sZW5ndGgpO1xyXG4gICAgICAgIHJlc3VsdC5nZXRDb21wb25lbnQodGhpcy5fcG9rZXJSZXN1bHRDb21wTmFtZSkuc2hvd1Jlc3VsdChwb2tlclBvcywgcG9rZXJSZXN1bHQsIHRydWUsIHRoaXMuX3Nob3dSZXN1bHRFbmQuYmluZCh0aGlzKSk7XHJcblxyXG5cclxuICAgICAgICAvL3ZhciByZXN1bHQgPSBuZXcgY2MuTm9kZSgpO1xyXG4gICAgICAgIC8vdmFyIGNoaWxkcmVuTnVtID0gdGhpcy5ub2RlLmNoaWxkcmVuLmxlbmd0aDtcclxuICAgICAgICAvL3RoaXMubm9kZS5hZGRDaGlsZChyZXN1bHQsIGNoaWxkcmVuTnVtKTtcclxuICAgICAgICAvL3Jlc3VsdC5wb3NpdGlvbiA9IGNjLnAodGhpcy5fcG9rZXJTaG93UG9zLngrdGhpcy5fcG9rZXJXKjEsIHRoaXMuX3Bva2VyU2hvd1Bvcy55LTEwKVxyXG4gICAgICAgIC8vdmFyIHNwID0gcmVzdWx0LmFkZENvbXBvbmVudChjYy5TcHJpdGUpO1xyXG4gICAgICAgIC8vdmFyIGltZ05hbWU7XHJcbiAgICAgICAgLy9pZihwb2tlclJlc3VsdCA8IDEpe1xyXG4gICAgICAgIC8vICAgIGltZ05hbWUgPSBHX1JFU19VUkwuYXRsYXNfcG9rZXJSZXN1bHQubm9SZXN1bHQ7XHJcbiAgICAgICAgLy99ZWxzZXtcclxuICAgICAgICAvLyAgICBpbWdOYW1lID0gR19SRVNfVVJMLmF0bGFzX3Bva2VyUmVzdWx0LnJlc3VsdEltZ05hbWUrcG9rZXJSZXN1bHQ7XHJcbiAgICAgICAgLy99XHJcbiAgICAgICAgLy9zcC5zcHJpdGVGcmFtZSA9IHRoaXMuYXRsYXNfcG9rZXJSZXN1bHQuZ2V0U3ByaXRlRnJhbWUoaW1nTmFtZSk7XHJcbiAgICAgICAgLy9yZXN1bHQuc2NhbGUgPSAwO1xyXG4gICAgICAgIC8vdmFyIGFjdDEgPSBjYy5zY2FsZVRvKDAuMjUsIDAuNyk7XHJcbiAgICAgICAgLy92YXIgYWN0MiA9IGNjLnNjYWxlVG8oMC4xLCAwLjQyKTtcclxuICAgICAgICAvL3ZhciBhY3QzID0gY2Muc2NhbGVUbygwLjEsIDAuNSk7XHJcbiAgICAgICAgLy9yZXN1bHQucnVuQWN0aW9uKGNjLnNlcXVlbmNlKGFjdDEsIGFjdDIsIGFjdDMsIGNjLmNhbGxGdW5jKHRoaXMuX3Nob3dSZXN1bHRFbmQsIHRoaXMpKSk7XHJcblxyXG4gICAgICAgIHRoaXMuX3Bva2VyUmVzdWx0ID0gcmVzdWx0O1xyXG4gICAgfSxcclxuICAgIF9zaG93UmVzdWx0RW5kIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmKHRoaXMuX2NhbGxGdW5jKXtcclxuICAgICAgICAgICAgdGhpcy5fY2FsbEZ1bmMoKTtcclxuICAgICAgICAgICAgdGhpcy5fY2FsbEZ1bmMgPSBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgLy/lhYjmjInlgLzlpKflsI/vvIzlho3kvp3nhafoirHoibLmjpLliJcgICA9PT09PT3mlLnmnI3liqHnq6/lrozmiJBcclxuICAgIC8vX3NvcnRQb2tlcnMgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAvLyAgICB2YXIgc29ydERpY3QgPSB7fSwga2V5TGlzdCA9IFtdLCBwb2tlcjtcclxuICAgIC8vICAgIGZvcih2YXIga2V5IGluIHRoaXMubm9kZS5jaGlsZHJlbil7XHJcbiAgICAvLyAgICAgICAgcG9rZXIgPSB0aGlzLm5vZGUuY2hpbGRyZW5ba2V5XTtcclxuICAgIC8vICAgICAgICB2YXIgcG9rZXJWYWx1ZSA9IHBva2VyLmdldENvbXBvbmVudCh0aGlzLl9wb2tlckNvbXBOYW1lKS5nZXRQb2tlclZhbHVlKCk7XHJcbiAgICAvLyAgICAgICAga2V5TGlzdC5wdXNoKHBva2VyVmFsdWUpO1xyXG4gICAgLy8gICAgICAgIGlmKCFzb3J0RGljdFtwb2tlclZhbHVlXSkgc29ydERpY3RbcG9rZXJWYWx1ZV0gPSBbcG9rZXJdO1xyXG4gICAgLy8gICAgICAgIGVsc2Ugc29ydERpY3RbcG9rZXJWYWx1ZV0ucHVzaChwb2tlcik7O1xyXG4gICAgLy8gICAgfVxyXG4gICAgLy9cclxuICAgIC8vICAgIGtleUxpc3QgPSBHX1RPT0wucXVpY2tTb3J0KGtleUxpc3QpO1xyXG4gICAgLy8gICAgdmFyIGxhc3RQb2tlciwgc29ydExpc3QgPSBbXSwgbGFzdFZhbHVlPW51bGwsIGN1clZhbHVlO1xyXG4gICAgLy8gICAgZm9yKHZhciBrZXkgaW4ga2V5TGlzdCl7XHJcbiAgICAvLyAgICAgICAgY3VyVmFsdWUgPSBrZXlMaXN0W2tleV07XHJcbiAgICAvLyAgICAgICAgcG9rZXIgPSBzb3J0RGljdFtjdXJWYWx1ZV0ucG9wKCk7XHJcbiAgICAvLyAgICAgICAgaWYobGFzdFZhbHVlICE9IGN1clZhbHVlKXtcclxuICAgIC8vICAgICAgICAgICAgc29ydExpc3Quc3BsaWNlKDAsIDAsIHBva2VyKTtcclxuICAgIC8vICAgICAgICAgICAgbGFzdFBva2VyID0gcG9rZXI7XHJcbiAgICAvLyAgICAgICAgICAgIGxhc3RWYWx1ZSA9IGN1clZhbHVlO1xyXG4gICAgLy8gICAgICAgIH1lbHNle1xyXG4gICAgLy8gICAgICAgICAgICBpZighbGFzdFBva2VyKSB7XHJcbiAgICAvLyAgICAgICAgICAgICAgICBzb3J0TGlzdC5zcGxpY2UoMCwgMCwgcG9rZXIpO1xyXG4gICAgLy8gICAgICAgICAgICAgICAgbGFzdFBva2VyID0gcG9rZXI7XHJcbiAgICAvLyAgICAgICAgICAgIH1lbHNle1xyXG4gICAgLy8gICAgICAgICAgICAgICAgdmFyIGxhc3RUeXBlID0gbGFzdFBva2VyLmdldENvbXBvbmVudCh0aGlzLl9wb2tlckNvbXBOYW1lKS5nZXRQb2tlclR5cGUoKTtcclxuICAgIC8vICAgICAgICAgICAgICAgIHZhciBjdXJUeXBlID0gcG9rZXIuZ2V0Q29tcG9uZW50KHRoaXMuX3Bva2VyQ29tcE5hbWUpLmdldFBva2VyVHlwZSgpO1xyXG4gICAgLy8gICAgICAgICAgICAgICAgaWYobGFzdFR5cGUgPj0gY3VyVHlwZSl7XHJcbiAgICAvLyAgICAgICAgICAgICAgICAgICAgc29ydExpc3Quc3BsaWNlKDAsIDAsIHBva2VyKTtcclxuICAgIC8vICAgICAgICAgICAgICAgICAgICBsYXN0UG9rZXIgPSBwb2tlcjtcclxuICAgIC8vICAgICAgICAgICAgICAgIH1lbHNlIGlmKGxhc3RUeXBlIDwgY3VyVHlwZSl7XHJcbiAgICAvLyAgICAgICAgICAgICAgICAgICAgc29ydExpc3Quc3BsaWNlKDEsIDAsIHBva2VyKTtcclxuICAgIC8vICAgICAgICAgICAgICAgIH1cclxuICAgIC8vICAgICAgICAgICAgICAgIC8vZWxzZXtcclxuICAgIC8vICAgICAgICAgICAgICAgIC8vICAgIHNvcnRMaXN0LnNwbGljZSgwLCAwLCBwb2tlcik7XHJcbiAgICAvLyAgICAgICAgICAgICAgICAvLyAgICBsYXN0UG9rZXIgPSBwb2tlcjtcclxuICAgIC8vICAgICAgICAgICAgICAgIC8vfVxyXG4gICAgLy8gICAgICAgICAgICB9XHJcbiAgICAvLyAgICAgICAgfVxyXG4gICAgLy8gICAgfVxyXG4gICAgLy8gICAgcmV0dXJuIHNvcnRMaXN0XHJcbiAgICAvL30sXHJcblxyXG4gICAgX2dldFRhcmdldFBvcyA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAvL3JldHVybiBjYy5wKHRoaXMuX3Bva2VyU2hvd1Bvcy54ICsgdGhpcy5fcG9rZXJPZmZYKnRoaXMuX3Bva2VyTnVtICsgdGhpcy5fcG9rZXJXKjAuNSwgdGhpcy5fcG9rZXJTaG93UG9zLnkpXHJcbiAgICAgICAgcmV0dXJuIGNjLnAodGhpcy5fcG9rZXJTaG93UG9zLnggKyB0aGlzLl9wb2tlck9mZlgqdGhpcy5fcG9rZXJOdW0sIHRoaXMuX3Bva2VyU2hvd1Bvcy55KVxyXG4gICAgfSxcclxuXHJcbiAgICBfZGVsT25lUG9rZXIgOiBmdW5jdGlvbiAocG9rZXJOb2RlKSB7XHJcbiAgICAgICAgLy9wb2tlck5vZGUuZGVzdHJveSgpO1xyXG4gICAgICAgIHBva2VyTm9kZS5nZXRDb21wb25lbnQodGhpcy5fcG9rZXJDb21wTmFtZSkuY2xlYXJBbGxBY3Rpb25zKCk7XHJcbiAgICAgICAgcG9rZXJOb2RlLmdldENvbXBvbmVudCh0aGlzLl9wb2tlckNvbXBOYW1lKS5zaG93UG9rZXJOZWdhdGl2ZSgpO1xyXG4gICAgICAgIHBva2VyTm9kZS5hY3RpdmUgPSBmYWxzZTtcclxuICAgIH0sXHJcblxyXG4gICAgZ2V0UG9rZXJOdW0gOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3Bva2VyTnVtXHJcbiAgICB9LFxyXG5cclxuXHJcbiAgICAvLyBjYWxsZWQgZXZlcnkgZnJhbWUsIHVuY29tbWVudCB0aGlzIGZ1bmN0aW9uIHRvIGFjdGl2YXRlIHVwZGF0ZSBjYWxsYmFja1xyXG4gICAgLy8gdXBkYXRlOiBmdW5jdGlvbiAoZHQpIHtcclxuXHJcbiAgICAvLyB9LFxyXG59KTtcclxuIiwiLy/lj6/ku6Xngrnlh7vmipXms6jnmoTmiYDmnInmoLzlrZDmiYDlnKjnmoTlsYJcclxuXHJcblxyXG5jYy5DbGFzcyh7XHJcbiAgICBleHRlbmRzOiBjYy5Db21wb25lbnQsXHJcblxyXG4gICAgcHJvcGVydGllczoge1xyXG4gICAgICAgIF9kaWN0X3RhYmxlcyA6IG51bGwsXHJcblxyXG4gICAgICAgIGZyYW1lX2dvbGQgOiB7XHJcbiAgICAgICAgICAgIGRlZmF1bHQgOiBudWxsLFxyXG4gICAgICAgICAgICB0eXBlIDogY2MuU3ByaXRlRnJhbWUsXHJcbiAgICAgICAgICAgIGRpc3BsYXlOYW1lIDogJ+mHkeW4geWbvueJhydcclxuICAgICAgICB9LFxyXG4gICAgfSxcclxuXHJcbiAgICAvLyB1c2UgdGhpcyBmb3IgaW5pdGlhbGl6YXRpb25cclxuICAgIG9uTG9hZDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuX2luaXQoKTtcclxuICAgIH0sXHJcblxyXG4gICAgX2luaXQgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5fdGFsYmVDb21wTmFtZSA9ICdHcmFiX29uZVRhYmxlJztcclxuICAgICAgICBpZighdGhpcy5fZGljdF90YWJsZXMpIHtcclxuICAgICAgICAgICAgdGhpcy5fZGljdF90YWJsZXMgPSB7fTtcclxuICAgICAgICAgICAgdmFyIHRhYmxlcyA9IHRoaXMubm9kZS5jaGlsZHJlbjtcclxuICAgICAgICAgICAgZm9yKHZhciBpID0gMDsgaSA8IHRhYmxlcy5sZW5ndGg7IGkgKyspe1xyXG4gICAgICAgICAgICAgICAgdmFyIHRhYmxlID0gdGFibGVzW2ldLmdldENvbXBvbmVudCh0aGlzLl90YWxiZUNvbXBOYW1lKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2RpY3RfdGFibGVzW3RhYmxlLmdldFJlc3VsdFR5cGUoKV0gPSB0YWJsZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgc2V0U3RhcnRJbmZvIDogZnVuY3Rpb24gKGFyZWFJbmZvKSB7XHJcbiAgICAgICAgdmFyIG11bHRpcGxlSW5mbyA9IHt9O1xyXG4gICAgICAgIC8vZm9yKHZhciBpID0gMDsgaSA8IGFyZWFJbmZvLmxlbmd0aDsgaSArKyl7XHJcbiAgICAgICAgLy8gICAgdmFyIGluZm9EaWN0ID0gYXJlYUluZm9baV07XHJcbiAgICAgICAgLy8gICAgbXVsdGlwbGVJbmZvW2luZm9EaWN0WydhcmVhJ11dID0gaW5mb0RpY3RbJ2JlaSddO1xyXG4gICAgICAgIC8vfVxyXG4gICAgICAgIC8vbXVsdGlwbGVJbmZvID0gezA6MiwxOjEzLDI6MTMsMzoxMyw0OjEzLDU6MTMsNjoxMyw3OjEzLDg6MTMsOToxMywxMDoxMn1cclxuICAgICAgICBtdWx0aXBsZUluZm8gPSBhcmVhSW5mbztcclxuICAgICAgICB2YXIgdGFibGU7XHJcbiAgICAgICAgZm9yKHZhciBrZXkgaW4gdGhpcy5fZGljdF90YWJsZXMpe1xyXG4gICAgICAgICAgICB0YWJsZSA9IHRoaXMuX2RpY3RfdGFibGVzW2tleV07XHJcbiAgICAgICAgICAgIHRhYmxlLnNldEluZm8odGhpcy5mcmFtZV9nb2xkLCBrZXksIG11bHRpcGxlSW5mb1trZXldKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIGNsZWFyRGF0YSA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBmb3IodmFyIGtleSBpbiB0aGlzLl9kaWN0X3RhYmxlcyl7XHJcbiAgICAgICAgICAgIHRoaXMuX2RpY3RfdGFibGVzW2tleV0uY2xlYXJEYXRhKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICAvLzAtLTEwXHJcbiAgICB0b3VjaE9uZVRhYmxlIDogZnVuY3Rpb24gKHRhYmxlSW5kZXgsIGdvbGRJbmZvKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RpY3RfdGFibGVzW3RhYmxlSW5kZXhdLm90aGVyQWRkR29sZChnb2xkSW5mbyk7XHJcbiAgICB9LFxyXG5cclxuICAgIHNldFRvdWNoRW5hYmxlIDogZnVuY3Rpb24gKGlzRW5hYmxlKSB7XHJcbiAgICAgICAgZm9yKHZhciBrZXkgaW4gdGhpcy5fZGljdF90YWJsZXMpe1xyXG4gICAgICAgICAgICB0aGlzLl9kaWN0X3RhYmxlc1trZXldLnNldFRvdWNoRW5hYmxlKGlzRW5hYmxlKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIHNldFRhYmxlV2luIDogZnVuY3Rpb24gKHBva2VyUmVzdWx0KSB7XHJcbiAgICAgICAgdmFyIHRhYmxlID0gdGhpcy5fZGljdF90YWJsZXNbcG9rZXJSZXN1bHRdO1xyXG4gICAgICAgIHRhYmxlLnNldFRhYmxlV2luKHRydWUpO1xyXG4gICAgICAgIHJldHVybiB0YWJsZS5nZXRXb3JsZFBvcygpO1xyXG4gICAgfSxcclxuICAgIHNob3dPd25lckdvbGQgOiBmdW5jdGlvbiAoZGljdCkge1xyXG4gICAgICAgIGZvcih2YXIgdGFibGVJbmRleCBpbiBkaWN0KXtcclxuICAgICAgICAgICAgdGhpcy5fZGljdF90YWJsZXNbdGFibGVJbmRleF0uc2hvd093bmVyUmVzdWx0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIGdldFRhYmxlUG9zIDogZnVuY3Rpb24gKHBva2VyUmVzdWx0KSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RpY3RfdGFibGVzW3Bva2VyUmVzdWx0XS5nZXRXb3JsZFBvcygpO1xyXG4gICAgfSxcclxuXHJcbiAgICBnZXRUYWJsZSA6IGZ1bmN0aW9uIChwb2tlclJlc3VsdCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9kaWN0X3RhYmxlc1twb2tlclJlc3VsdF1cclxuICAgIH0sXHJcblxyXG4gICAgZ2V0V2luR29sZCA6IGZ1bmN0aW9uICh0YWJsZUxpc3QpIHtcclxuICAgICAgICB2YXIgaXNXaW4gPSBmdW5jdGlvbiAoaW5kZXgpIHtcclxuICAgICAgICAgICAgZm9yKHZhciBpID0gMDsgaSA8IHRhYmxlTGlzdC5sZW5ndGg7IGkgKyspe1xyXG4gICAgICAgICAgICAgICAgaWYoaW5kZXggPT0gdGFibGVMaXN0W2ldKSByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2VcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBsb3N0R29sZD0wLCB3aW5Hb2xkPTA7XHJcbiAgICAgICAgZm9yKHZhciBpbmRleCBpbiB0aGlzLl9kaWN0X3RhYmxlcyl7XHJcbiAgICAgICAgICAgIHZhciBpc1dpbkluZGV4ID0gaXNXaW4oaW5kZXgpO1xyXG4gICAgICAgICAgICBpZihpc1dpbkluZGV4KXtcclxuICAgICAgICAgICAgICAgIHdpbkdvbGQgKz0gdGhpcy5fZGljdF90YWJsZXNbaW5kZXhdLmdldEdyYWJHb2xkKClcclxuICAgICAgICAgICAgfSBlbHNlIGxvc3RHb2xkICs9IHRoaXMuX2RpY3RfdGFibGVzW2luZGV4XS5nZXRMb3N0R29sZCgpXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBnb2xkTnVtID0gd2luR29sZCAtIGxvc3RHb2xkO1xyXG4gICAgICAgIHJldHVybiBnb2xkTnVtXHJcbiAgICB9LFxyXG4gICAgLy/ojrflj5bliankvZnmsqHmnInooqvnp7vpmaTnmoTph5HluIHkv6Hmga9cclxuICAgIGdldExlYXZlR29sZEltYWdlcyA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgdGFibGUsIGxlYXZlR29sZE51bSwgcmVjb3JkRGljdD17fTtcclxuICAgICAgICBmb3IodmFyIGluZGV4IGluIHRoaXMuX2RpY3RfdGFibGVzKXtcclxuICAgICAgICAgICAgdGFibGUgPSB0aGlzLl9kaWN0X3RhYmxlc1tpbmRleF07XHJcbiAgICAgICAgICAgIGxlYXZlR29sZE51bSA9IHRhYmxlLmdldExlYXZlR29sZEltZygpO1xyXG4gICAgICAgICAgICBpZih0YWJsZSAmJiBsZWF2ZUdvbGROdW0+MCl7XHJcbiAgICAgICAgICAgICAgICAvL+ivpeWMuuWfn+i/mOacieWJqeS9memHkeW4gVxyXG4gICAgICAgICAgICAgICAgcmVjb3JkRGljdFtpbmRleF0gPSBsZWF2ZUdvbGROdW07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJlY29yZERpY3RcclxuICAgIH0sXHJcblxyXG5cclxuICAgIC8vIGNhbGxlZCBldmVyeSBmcmFtZSwgdW5jb21tZW50IHRoaXMgZnVuY3Rpb24gdG8gYWN0aXZhdGUgdXBkYXRlIGNhbGxiYWNrXHJcbiAgICAvLyB1cGRhdGU6IGZ1bmN0aW9uIChkdCkge1xyXG5cclxuICAgIC8vIH0sXHJcbn0pO1xyXG4iLCIvL+aUvue9ruWcqOacgOS4iumdoueahOWKqOeUu+eJueaViFxyXG5cclxuY2MuQ2xhc3Moe1xyXG4gICAgZXh0ZW5kczogY2MuQ29tcG9uZW50LFxyXG5cclxuICAgIHByb3BlcnRpZXM6IHtcclxuICAgICAgICBfYW5pQ2FsbEZ1bmMgOiBudWxsLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/lvIDlp4vliqjnlLvnmoTlm57osINcclxuICAgICAgICBfZ3JhYkRvbmVDYWxsRnVuYyA6IG51bGwsICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/nu5PnrpfliqjnlLvnmoTlm57osINcclxuICAgICAgICBfbGlzdF9mbGFncyA6IG51bGwsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/og5zliKnnibnmlYhcclxuXHJcbiAgICAgICAgbm9kZV9hbmlDb250YWluZXIgOiB7XHJcbiAgICAgICAgICAgIGRlZmF1bHQgOiBudWxsLFxyXG4gICAgICAgICAgICB0eXBlIDogY2MuTm9kZSxcclxuICAgICAgICAgICAgZGlzcGxheU5hbWUgOiAn5Yqo55S75a655ZmoJ1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgcHJlZmFiX3N0YXJ0QW5pIDoge1xyXG4gICAgICAgICAgICBkZWZhdWx0IDogbnVsbCxcclxuICAgICAgICAgICAgdHlwZSA6IGNjLlByZWZhYixcclxuICAgICAgICAgICAgZGlzcGxheU5hbWUgOiAn5byA5aeL5Yqo55S7J1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgcHJlZmFiX3dpbkZsYWdBbmkgOiB7XHJcbiAgICAgICAgICAgIGRlZmF1bHQgOiBudWxsLFxyXG4gICAgICAgICAgICB0eXBlIDogY2MuUHJlZmFiLFxyXG4gICAgICAgICAgICBkaXNwbGF5TmFtZSA6ICfotaLpkrHml5fluJwnXHJcbiAgICAgICAgfSxcclxuICAgICAgICBwcmVmYWJfZ3JhYkRvbmVBbmkgOiB7XHJcbiAgICAgICAgICAgIGRlZmF1bHQgOiBudWxsLFxyXG4gICAgICAgICAgICB0eXBlIDogY2MuUHJlZmFiLFxyXG4gICAgICAgICAgICBkaXNwbGF5TmFtZSA6ICfmirzms6jlrozmiJAnXHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICAvLyB1c2UgdGhpcyBmb3IgaW5pdGlhbGl6YXRpb25cclxuICAgIG9uTG9hZDogZnVuY3Rpb24gKCkge1xyXG5cclxuICAgIH0sXHJcblxyXG4gICAgLy/lvIDlp4vmuLjmiI/liqjnlLtcclxuICAgIHBsYXlHYW1lU3RhcnRBbmkgOiBmdW5jdGlvbiAoY2FsbEZ1bmMpIHtcclxuICAgICAgICB0aGlzLnBsYXlTdGFydEFuaSgnZ3JhYl9zdGFydCcsY2FsbEZ1bmMpO1xyXG4gICAgICAgIEdHLmF1ZGlvTWdyLnBsYXlTb3VuZCgxMyk7XHJcbiAgICB9LFxyXG5cclxuICAgIHBsYXlTdGFydEFuaSA6IGZ1bmN0aW9uIChhbmlOYW1lLCBjYWxsRnVuYykge1xyXG4gICAgICAgIGlmKCFhbmlOYW1lKSBhbmlOYW1lID0gJyc7XHJcbiAgICAgICAgdGhpcy5fYW5pQ2FsbEZ1bmMgPSBjYWxsRnVuYztcclxuICAgICAgICBpZighdGhpcy5fc3RhcnRHcmFiQW5pKXtcclxuICAgICAgICAgICAgdGhpcy5fc3RhcnRHcmFiQW5pID0gY2MuaW5zdGFudGlhdGUodGhpcy5wcmVmYWJfc3RhcnRBbmkpO1xyXG4gICAgICAgICAgICB0aGlzLl9zdGFydEdyYWJBbmkucGFyZW50ID0gdGhpcy5ub2RlX2FuaUNvbnRhaW5lcjtcclxuXHJcbiAgICAgICAgICAgIC8vYW5pLnNjYWxlID0gR19Db25maWdfY29tbW9uLmZyYW1lU2NhbGU7XHJcbiAgICAgICAgICAgIHRoaXMuX3N0YXJ0R3JhYkFuaS5wb3NpdGlvbiA9IHRoaXMuX2dldFN0YXJ0QW5pUG9zKCk7XHJcbiAgICAgICAgICAgIHRoaXMuX3N0YXJ0R3JhYkFuaS5nZXRDb21wb25lbnQoZHJhZ29uQm9uZXMuQXJtYXR1cmVEaXNwbGF5KS5hZGRFdmVudExpc3RlbmVyKGRyYWdvbkJvbmVzLkV2ZW50T2JqZWN0LkNPTVBMRVRFLCB0aGlzLl9zdGFydEFuaUVuZCwgdGhpcyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuX3N0YXJ0R3JhYkFuaS5hY3RpdmUgPSB0cnVlO1xyXG4gICAgICAgIC8vY29tcCA9IHRoaXMuX3N0YXJ0QW5pLmdldENvbXBvbmVudChkcmFnb25Cb25lcy5Bcm1hdHVyZURpc3BsYXkpO1xyXG4gICAgICAgIHRoaXMuX3N0YXJ0R3JhYkFuaS5nZXRDb21wb25lbnQoZHJhZ29uQm9uZXMuQXJtYXR1cmVEaXNwbGF5KS5wbGF5QW5pbWF0aW9uKGFuaU5hbWUsIDEpO1xyXG4gICAgfSxcclxuICAgIF9zdGFydEFuaUVuZCA6IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgIGlmKHRoaXMuX3N0YXJ0R3JhYkFuaSkgdGhpcy5fc3RhcnRHcmFiQW5pLmFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgICAgIGlmKHRoaXMuX2FuaUNhbGxGdW5jKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2FuaUNhbGxGdW5jKCk7XHJcbiAgICAgICAgICAgIHRoaXMuX2FuaUNhbGxGdW5jID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgZm9yY2VTdG9wU3RhcnQgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYodGhpcy5fc3RhcnRHcmFiQW5pKSB0aGlzLl9zdGFydEdyYWJBbmkuYWN0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5fYW5pQ2FsbEZ1bmMgPSBudWxsO1xyXG4gICAgfSxcclxuXHJcbiAgICAvLz09PT09PT09PT09PT09PT09PT09PVxyXG5cclxuICAgIC8v5byA5aeL5bm46L+Q5Yy65Z+f5oqV5rOo5Yqo55S7XHJcbiAgICBwbGF5VG91Y2hTdGFydEFuaSA6IGZ1bmN0aW9uIChjYWxsRnVuYykge1xyXG4gICAgICAgIHRoaXMucGxheUdyYWJBbmkoJ3BsYXRmb3JtX2JldCcsY2FsbEZ1bmMpO1xyXG4gICAgfSxcclxuXHJcbiAgICAvL+aKleazqOWujOaIkOeahOWKqOeUu1xyXG4gICAgcGxheUdyYWJEb25lQW5pIDogZnVuY3Rpb24gKGNhbGxGdW5jLCB1c2VyRGF0YSkge1xyXG4gICAgICAgIHRoaXMucGxheUdyYWJBbmkoJ3BsYXRmb3JtX2JldE92ZXInLGNhbGxGdW5jLCB1c2VyRGF0YSk7XHJcbiAgICB9LFxyXG5cclxuICAgIHBsYXlHcmFiQW5pIDogZnVuY3Rpb24gKGFuaU5hbWUsIGNhbGxGdW5jLCB1c2VyRGF0YSkge1xyXG4gICAgICAgIGlmKCFhbmlOYW1lKSBhbmlOYW1lID0gJyc7XHJcbiAgICAgICAgdGhpcy5fZ3JhYkRvbmVDYWxsRnVuYyA9IGNhbGxGdW5jO1xyXG4gICAgICAgIGlmKCF0aGlzLl9ncmFiRG9uZUFuaSl7XHJcbiAgICAgICAgICAgIHRoaXMuX2dyYWJEb25lQW5pID0gY2MuaW5zdGFudGlhdGUodGhpcy5wcmVmYWJfZ3JhYkRvbmVBbmkpO1xyXG4gICAgICAgICAgICB0aGlzLl9ncmFiRG9uZUFuaS5wYXJlbnQgPSB0aGlzLm5vZGVfYW5pQ29udGFpbmVyO1xyXG5cclxuICAgICAgICAgICAgLy90aGlzLl9ncmFiRG9uZUFuaS5zY2FsZSA9IEdfQ29uZmlnX2NvbW1vbi5mcmFtZVNjYWxlO1xyXG4gICAgICAgICAgICB0aGlzLl9ncmFiRG9uZUFuaS5wb3NpdGlvbiA9IHRoaXMuX2dldFN0YXJ0QW5pUG9zKCk7XHJcbiAgICAgICAgICAgIHRoaXMuX2dyYWJEb25lQW5pLmdldENvbXBvbmVudChkcmFnb25Cb25lcy5Bcm1hdHVyZURpc3BsYXkpLmFkZEV2ZW50TGlzdGVuZXIoZHJhZ29uQm9uZXMuRXZlbnRPYmplY3QuQ09NUExFVEUsIHRoaXMuX2dyYWJEb25lQW5pRW5kLCB0aGlzKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5fZ3JhYkRvbmVBbmkucG9rZXJJbmZvID0gdXNlckRhdGE7XHJcbiAgICAgICAgdGhpcy5fZ3JhYkRvbmVBbmkuYWN0aXZlID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLl9ncmFiRG9uZUFuaS5nZXRDb21wb25lbnQoZHJhZ29uQm9uZXMuQXJtYXR1cmVEaXNwbGF5KS5wbGF5QW5pbWF0aW9uKGFuaU5hbWUsIDEpO1xyXG4gICAgfSxcclxuICAgIF9ncmFiRG9uZUFuaUVuZCA6IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgIGlmKHRoaXMuX2dyYWJEb25lQ2FsbEZ1bmMpIHtcclxuICAgICAgICAgICAgdGhpcy5fZ3JhYkRvbmVDYWxsRnVuYyh0aGlzLl9ncmFiRG9uZUFuaS5wb2tlckluZm8pO1xyXG4gICAgICAgICAgICB0aGlzLl9ncmFiRG9uZUNhbGxGdW5jID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYodGhpcy5fZ3JhYkRvbmVBbmkpIHRoaXMuX2dyYWJEb25lQW5pLmFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgfSxcclxuXHJcbiAgICBfZ2V0U3RhcnRBbmlQb3MgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGRlc2lnblNpemUgPSBjYy52aXNpYmxlUmVjdDtcclxuICAgICAgICByZXR1cm4gY2MucChkZXNpZ25TaXplLndpZHRoLzIsIGRlc2lnblNpemUuaGVpZ2h0KjAuNik7XHJcbiAgICB9LFxyXG5cclxuICAgIC8vPT09PT09PT09PT09PT09PT09PT09XHJcblxyXG4gICAgcGxheU9uZUZsYWcgOiBmdW5jdGlvbiAocG9zKSB7XHJcblxyXG4gICAgICAgIHZhciBmbGFnID0gdGhpcy5fZ2V0T25lRmxhZygpO1xyXG4gICAgICAgIGZsYWcucG9zaXRpb24gPSBwb3M7XHJcbiAgICAgICAgZmxhZy5hY3RpdmUgPSB0cnVlO1xyXG5cclxuICAgICAgICB2YXIgY29tcCA9IGZsYWcuZ2V0Q29tcG9uZW50KGRyYWdvbkJvbmVzLkFybWF0dXJlRGlzcGxheSk7XHJcbiAgICAgICAgLy8gY29tcC5hZGRFdmVudExpc3RlbmVyKGRyYWdvbkJvbmVzLkV2ZW50T2JqZWN0LkNPTVBMRVRFLCB0aGlzLl9zdGFydEFuaUVuZCwgdGhpcyk7XHJcbiAgICAgICAgY29tcC5wbGF5QW5pbWF0aW9uKCcnLCAxKTtcclxuICAgIH0sXHJcbiAgICBjbGVhckZsYWcgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgLy92YXIgZmxhZztcclxuICAgICAgICAvL2Zvcih2YXIgaSA9IDA7IGkgPCB0aGlzLl9saXN0X2ZsYWdzLmxlbmd0aDsgaSArKyl7XHJcbiAgICAgICAgLy8gICAgZmxhZyA9IHRoaXMuX2xpc3RfZmxhZ3NbaV07XHJcbiAgICAgICAgLy8gICAgaWYoZmxhZykgZmxhZy5hY3RpdmUgPSBmYWxzZTtcclxuICAgICAgICAvL31cclxuXHJcbiAgICAgICAgdGhpcy5mb3JjZVN0b3BBbGxBbmkoKTtcclxuICAgIH0sXHJcbiAgICBfZ2V0T25lRmxhZyA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZighdGhpcy5fZmxhZ0FuaSl7XHJcbiAgICAgICAgICAgIHRoaXMuX2ZsYWdBbmkgPSBjYy5pbnN0YW50aWF0ZSh0aGlzLnByZWZhYl93aW5GbGFnQW5pKTtcclxuICAgICAgICAgICAgdGhpcy5fZmxhZ0FuaS5wYXJlbnQgPSB0aGlzLm5vZGVfYW5pQ29udGFpbmVyO1xyXG4gICAgICAgICAgICAvL3RoaXMuX2ZsYWdBbmkuc2NhbGUgPSBHX0NvbmZpZ19jb21tb24uZnJhbWVTY2FsZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2ZsYWdBbmlcclxuICAgIH0sXHJcblxyXG4gICAgZm9yY2VTdG9wQWxsQW5pIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBhbmlzID0gdGhpcy5ub2RlX2FuaUNvbnRhaW5lci5jaGlsZHJlbjtcclxuICAgICAgICB2YXIgYW5pTm9kZTtcclxuICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgYW5pcy5sZW5ndGg7IGkgKyspe1xyXG4gICAgICAgICAgICBhbmlOb2RlID0gYW5pc1tpXTtcclxuICAgICAgICAgICAgaWYoYW5pTm9kZSl7XHJcbiAgICAgICAgICAgICAgICBhbmlOb2RlLmFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuX2dyYWJEb25lQ2FsbEZ1bmMgPSBudWxsO1xyXG5cclxuICAgIH0sXHJcblxyXG4gICAgY2xlYXJBbGwgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5mb3JjZVN0b3BTdGFydCgpO1xyXG4gICAgICAgIHRoaXMuZm9yY2VTdG9wQWxsQW5pKCk7XHJcbiAgICAgICAgdGhpcy5ub2RlLnN0b3BBbGxBY3Rpb25zKCk7XHJcbiAgICB9LFxyXG5cclxuICAgIC8vIGNhbGxlZCBldmVyeSBmcmFtZSwgdW5jb21tZW50IHRoaXMgZnVuY3Rpb24gdG8gYWN0aXZhdGUgdXBkYXRlIGNhbGxiYWNrXHJcbiAgICAvLyB1cGRhdGU6IGZ1bmN0aW9uIChkdCkge1xyXG5cclxuICAgIC8vIH0sXHJcbn0pO1xyXG4iLCIvL+a4uOaIj+acgOS4iumdoueahOWxguWuueWZqFxyXG5cclxuY2MuQ2xhc3Moe1xyXG4gICAgZXh0ZW5kczogcmVxdWlyZSgnQXV0b0RlYWxpbmcnKSxcclxuXHJcbiAgICBwcm9wZXJ0aWVzOiB7XHJcbiAgICAgICAgbm9kZV9zdGFydEltZyA6IGNjLk5vZGUsXHJcbiAgICB9LFxyXG5cclxuICAgIC8vIHVzZSB0aGlzIGZvciBpbml0aWFsaXphdGlvblxyXG4gICAgb25Mb2FkOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5fcmVnaXN0ZXJTdGFydCgpO1xyXG4gICAgfSxcclxuICAgIF9yZWdpc3RlclN0YXJ0IDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmKHRoaXMubm9kZV9zdGFydEltZykge1xyXG4gICAgICAgICAgICB0aGlzLm5vZGVfc3RhcnRJbWcuYWN0aXZlID0gdHJ1ZTtcclxuICAgICAgICAgICAgdGhpcy5yZWdpc3RlckJ1dHRvbih0aGlzLm5vZGVfc3RhcnRJbWcsIHRoaXMuT25DbGlja19zdGFydEltZywgdGhpcyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmKEdfQ29uZmlnX2NvbW1vbi5pc0xvY2FsKXtcclxuXHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIHRoaXMubm9kZV9zdGFydEltZy5hY3RpdmUgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgT25DbGlja19zdGFydEltZyA6IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgIGlmKEdfQ29uZmlnX2NvbW1vbi5pc0xvY2FsKXtcclxuICAgICAgICAgICAgdGhpcy5ub2RlX3N0YXJ0SW1nLmFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICBHRy5ncmFiTWdyLmZvcmNlU3RhcnQoKTtcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgR0cuc29ja2V0TWdyLmNvbm5lY3RTb2NrZXQodGhpcy5fY29ubmVjdEVuZC5iaW5kKHRoaXMpKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIF9jb25uZWN0RW5kIDogZnVuY3Rpb24gKGlzU3VjY2Vzcykge1xyXG4gICAgICAgIGlmKGlzU3VjY2Vzcyl7XHJcbiAgICAgICAgICAgIHRoaXMubm9kZV9zdGFydEltZy5hY3RpdmUgPSBmYWxzZTtcclxuICAgICAgICAgICAgdGhpcy5fbG9naW4oKTtcclxuICAgICAgICAgICAgLy9HRy5ncmFiTWdyLmZpcnN0U3RhcnQoKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIF9sb2dpbiA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgbmV0RGF0YSA9IHtcclxuICAgICAgICAgICAgdXNlcklkIDogR0cuZ2V0UGxheWVyKCkuZ2V0UGxheWVySUQoKVxyXG4gICAgICAgIH1cclxuICAgICAgICBHRy5zb2NrZXRNZ3IuU2VuZE1zZyhOZXRUeXBlLnNfbG9naW4sIG5ldERhdGEpO1xyXG4gICAgfSxcclxuXHJcbiAgICAvL19lbnRlckhvbWUgOiBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgLy8gICAgY29uc29sZS5sb2coJ19lbnRlckhvbWUgc3VjY2Vzcy0tLS0tLScpXHJcbiAgICAvLyAgICBjb25zb2xlLmxvZyhkYXRhKVxyXG4gICAgLy8gICAgR0cuZ3JhYk1nci5yZXF1ZXN0RW50ZXJIb21lKCk7XHJcbiAgICAvL30sXHJcblxyXG4gICAgZ2V0VG9wRWZmZWN0IDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldENvbXBvbmVudCgnR3JhYl90b3BFZmZlY3QnKTtcclxuICAgIH0sXHJcblxyXG4gICAgLy8gY2FsbGVkIGV2ZXJ5IGZyYW1lLCB1bmNvbW1lbnQgdGhpcyBmdW5jdGlvbiB0byBhY3RpdmF0ZSB1cGRhdGUgY2FsbGJhY2tcclxuICAgIC8vIHVwZGF0ZTogZnVuY3Rpb24gKGR0KSB7XHJcblxyXG4gICAgLy8gfSxcclxufSk7XHJcbiIsIi8vaHR0cOivt+axgueuoeeQhlxyXG5cclxudmFyIGh0dHAgPSBjYy5DbGFzcyh7XHJcbiAgICBfbGlzdF9yZXF1ZXN0IDogbnVsbCwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v6K+35rGC5YiX6KGoXHJcbiAgICBfaXNSZXF1ZXN0aW5nIDogbnVsbCwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5q2j5Zyo6K+35rGC5LitXHJcbiAgICBfaXNBZGRIZWFydCA6IG51bGwsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5piv5ZCm5pyJ5b+D6LezXHJcbiAgICBfZmFpbFRpbWUgOiBudWxsLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5aSa6ZW/5pe26Ze06K+35rGC5aSx6LSlXHJcblxyXG4gICAgX3RpbWVfdGltZU91dCA6IG51bGwsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+i2heaXtuaXtumXtFxyXG4gICAgX3RpbWVPdXRJRCA6IG51bGwsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+i2heaXtumihOiuoeeahElEXHJcbiAgICBfZGljdF9sb25nV2FpdCA6IG51bGwsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v6ZW/5pe26Ze0562J5b6F55qE6K+35rGCXHJcbiAgICBfc2Vzc2lvbklEIDogbnVsbCxcclxuICAgIHByb3BlcnRpZXM6IHtcclxuXHJcbiAgICB9LFxyXG5cclxuICAgIC8vIHVzZSB0aGlzIGZvciBpbml0aWFsaXphdGlvblxyXG4gICAgY3RvcjogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuX2xpc3RfcmVxdWVzdCA9IFtdO1xyXG4gICAgICAgIHRoaXMuX2lzUmVxdWVzdGluZyA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuX2lzQWRkSGVhcnQgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLl9uYXRpdmVIcmVmID0gR19Db25maWdfY29tbW9uLm5hdGl2ZUhyZWY7XHJcbiAgICB9LFxyXG5cclxuICAgIC8v55m86YCB6KuL5rGCXHJcbiAgICBzZW5kSHR0cFJlcXVlc3QgOiBmdW5jdGlvbiAodXJsLCBzZW5kRGF0YSwgY2FsbEZ1bmMsIHhoclR5cGUpIHtcclxuICAgICAgICB0aGlzLmFkZEhlYXJ0KCk7XHJcbiAgICAgICAgdGhpcy5fcmVjb3JkU2VuZCh1cmwsIHNlbmREYXRhLCBjYWxsRnVuYywgeGhyVHlwZSlcclxuICAgIH0sXHJcblxyXG4gICAgLy/orrDlvZXlj5HpgIHnmoTkv6Hmga9cclxuICAgIF9yZWNvcmRTZW5kIDogZnVuY3Rpb24gKHVybCwgc2VuZERhdGEsIGNhbGxGdW5jLCB4aHJUeXBlKSB7XHJcbiAgICAgICAgaWYoIXRoaXMuX2RpY3Rfc2VuZFJlcXVlc3QpIHRoaXMuX2RpY3Rfc2VuZFJlcXVlc3QgPSB7fTtcclxuICAgICAgICB2YXIgc2VuZE9iaiA9IEdfT0JKLmRhdGFfaHR0cFNlbmQoKTtcclxuICAgICAgICBzZW5kT2JqLnVybCA9IHVybDtcclxuICAgICAgICBzZW5kT2JqLnNlbmREYXRhID0gc2VuZERhdGE7XHJcbiAgICAgICAgc2VuZE9iai5jYWxsRnVuYyA9IGNhbGxGdW5jO1xyXG4gICAgICAgIHNlbmRPYmoueGhyVHlwZSA9IHhoclR5cGU7XHJcbiAgICAgICAgdGhpcy5fZGljdF9zZW5kUmVxdWVzdFt1cmxdID0gc2VuZE9iajtcclxuXHJcbiAgICAgICAgaWYoIXRoaXMuX2lzUmVxdWVzdGluZyl7XHJcbiAgICAgICAgICAgIHRoaXMuX2RvTmV4dCgpO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgLy/kuIvkuIDkuKror7fmsYJcclxuICAgIF9kb05leHQgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHNlbmRPYmo7XHJcbiAgICAgICAgZm9yKHZhciB1cmwgaW4gdGhpcy5fZGljdF9zZW5kUmVxdWVzdCl7XHJcbiAgICAgICAgICAgIHNlbmRPYmogPSB0aGlzLl9kaWN0X3NlbmRSZXF1ZXN0W3VybF07XHJcbiAgICAgICAgICAgIGlmKHNlbmRPYmopIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3NlbmRSZXF1ZXN0KHNlbmRPYmoudXJsLCBzZW5kT2JqLnNlbmREYXRhLCBzZW5kT2JqLmNhbGxGdW5jLCBzZW5kT2JqLnhoclR5cGUpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgLy/lj5HpgIHor7fmsYJcclxuICAgIF9zZW5kUmVxdWVzdCA6IGZ1bmN0aW9uICh1cmwsIHNlbmREYXRhLCBjYWxsRnVuYywgeGhyVHlwZSkge1xyXG4gICAgICAgIHZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcclxuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICAgICAgeGhyLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYoeGhyLnN0YXR1cyA9PSA0MDQpe1xyXG4gICAgICAgICAgICAgICAgLy/ml6DmlYjnmoTor7fmsYLlnLDlnYBcclxuICAgICAgICAgICAgICAgIHNlbGYuX2VuZFJlcXVlc3QodXJsLCBudWxsLCBjYWxsRnVuYyk7XHJcbiAgICAgICAgICAgIH1lbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdyZXF1ZXN0IHVybD0gJyt1cmwrJzsgcmV0dXJuIGRhdGE9ICcreGhyLnJlc3BvbnNlVGV4dClcclxuICAgICAgICAgICAgICAgIHNlbGYuX3JlY2VpdmVEYXRhKHhociwgdXJsLCBzZW5kRGF0YSwgY2FsbEZ1bmMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICAvL+aYr+WQpuacrOWcsFxyXG4gICAgICAgIHZhciBuZWVkVXJsID0gdXJsO1xyXG4gICAgICAgIGlmKCF4aHJUeXBlKSB4aHJUeXBlID0gJ1BPU1QnO1xyXG4gICAgICAgIGlmKGNjLnN5cy5pc05hdGl2ZSl7XHJcbiAgICAgICAgICAgIG5lZWRVcmwgPSB0aGlzLl9uYXRpdmVIcmVmICsgdXJsO1xyXG4gICAgICAgICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcihcIlVzZXItQWdlbnRcIiwgXCJDaHJvbWVcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHhoci5vcGVuKHhoclR5cGUsIG5lZWRVcmwsIHRydWUpO1xyXG4gICAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKFwiQ29udGVudC1UeXBlXCIsIFwiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkXCIpO1xyXG4gICAgICAgIGlmKHRoaXMuX3Nlc3Npb25JRCkge1xyXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZygn6ZmE5YqgY29va2ll5L+h5oGvJyt0aGlzLl9zZXNzaW9uSUQpXHJcbiAgICAgICAgICAgIC8vIHZhciBzZXNzaW9uID0gJ3Nlc3Npb249eycrdGhpcy5fc2Vzc2lvbklEKyd9J1xyXG4gICAgICAgICAgICAvLyB2YXIgc2Vzc2lvbiA9IHRoaXMuX3Nlc3Npb25JRCArJyc7XHJcbiAgICAgICAgICAgIC8vIHhoci5zZXRSZXF1ZXN0SGVhZGVyKFwiY29va2llXCIsIHNlc3Npb24pO1xyXG4gICAgICAgICAgICAvLyB4aHIuc2V0UmVxdWVzdFByb3BlcnR5KFwiY29va2llXCIsIHRoaXMuX3Nlc3Npb25JRCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIHhoci5zZXRSZXF1ZXN0SGVhZGVyKFwiQ29udGVudC1UeXBlXCIsIFwiQWNjZXNzLUNvbnRyb2wtQWxsb3ctSGVhZGVyczp4LXJlcXVlc3RlZC13aXRoXCIpO1xyXG4gICAgICAgIC8vIHhoci5zZXRSZXF1ZXN0SGVhZGVyKFwiQ29udGVudC1UeXBlXCIsIFwiQWNjZXNzLUNvbnRyb2wtQWxsb3ctTWV0aG9kczpQT1NUXCIpO1xyXG4gICAgICAgIC8vIHhoci5zZXRSZXF1ZXN0SGVhZGVyKFwiQ29udGVudC1UeXBlXCIsIFwiQWNjZXNzLUNvbnRyb2wtQWxsb3ctT3JpZ2luOipcIik7XHJcbiAgICAgICAgeGhyLnNlbmQoc2VuZERhdGEpO1xyXG4gICAgICAgIHRoaXMuX2lzUmVxdWVzdGluZyA9IHRydWU7XHJcbiAgICAgICAgaWYoIUdHLmdldElzTG9hZGluZygpKUdHLnRvcFRvdWNoTGF5ZXIuc2hvd05ldFJlcXVlc3QoKTtcclxuICAgICAgICAvL+WinuWKoOi2heaXtuWkhOeQhlxyXG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgICAgICB0aGlzLl9hZGRUaW1lT3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgc2VsZi5fZW5kUmVxdWVzdCh1cmwsIG51bGwsIGNhbGxGdW5jKTtcclxuICAgICAgICB9KVxyXG4gICAgfSxcclxuXHJcbiAgICAvL+aOpeaUtuWIsOe9kee7nOivt+axglxyXG4gICAgX3JlY2VpdmVEYXRhIDogZnVuY3Rpb24gKHhociwgdXJsLCBzZW5kRGF0YSwgY2FsbEZ1bmMpIHtcclxuICAgICAgICAvL2lmICh4aHIucmVhZHlTdGF0ZSA9PSA0ICYmICh4aHIuc3RhdHVzID49IDIwMCAmJiB4aHIuc3RhdHVzIDwgNDAwKSkge1xyXG4gICAgICAgIGlmICh4aHIucmVhZHlTdGF0ZSA9PSA0ICYmIHhoci5zdGF0dXMgPT0gMjAwKSB7XHJcbiAgICAgICAgICAgIHZhciByZXNwb25zZSA9IHhoci5yZXNwb25zZVRleHQ7XHJcblxyXG4gICAgICAgICAgICBpZih1cmwuaW5kZXhPZignbG9nb3V0JykgPiAtMSB8fCB1cmwuaW5kZXhPZignbG9naW4nKSA+IC0xKXtcclxuICAgICAgICAgICAgICAgIC8veGhyLnJlc3BvbnNlVGV4dCDmmK/mlbTkuKrpobXpnaLnmoRIVE1MXHJcbiAgICAgICAgICAgICAgICAvLyB2YXIgY29va2llVmFsdWUgPSB4aHIuZ2V0UmVzcG9uc2VIZWFkZXIoXCJTZXQtQ29va2llXCIpO1xyXG4gICAgICAgICAgICAgICAgLy8gdGhpcy5fc2Vzc2lvbklEID0gY29va2llVmFsdWUuc3Vic3RyaW5nKDAsIGNvb2tpZVZhbHVlLmluZGV4T2YoJzsnKSk7XHJcbiAgICAgICAgICAgICAgICAvLyB0aGlzLl9zZXNzaW9uSUQgPSB4aHIuZ2V0UmVzcG9uc2VIZWFkZXIoXCJTZXQtQ29va2llXCIpLnJlcGxhY2UoJ1NJRD0nLCAnJykuc3BsaXQoJzsnKVswXTtcclxuICAgICAgICAgICAgICAgIC8vIHRoaXMuX3Nlc3Npb25JRCA9IHhoci5nZXRSZXNwb25zZUhlYWRlcihcIlNldC1Db29raWVcIik7XHJcbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygn6I635Y+W5Yiwc2Vzc2lvbklEPSAnKyB0aGlzLl9zZXNzaW9uSUQpXHJcbiAgICAgICAgICAgICAgICByZXNwb25zZSA9IHRydWU7XHJcbiAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICByZXNwb25zZSA9IEpTT04ucGFyc2UoeGhyLnJlc3BvbnNlVGV4dCk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gaWYoIXJlc3BvbnNlKSByZXNwb25zZSA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2NoZWNrTG9uZ1dhaXQodXJsLCByZXNwb25zZSk7XHJcbiAgICAgICAgICAgICAgICB9Y2F0Y2ggKGUpe1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLl9lbmRSZXF1ZXN0KHVybCwgcmVzcG9uc2UsIGNhbGxGdW5jKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgLy/or7fmsYLnu5PmnZ9cclxuICAgIF9lbmRSZXF1ZXN0IDogZnVuY3Rpb24gKHVybCwgcmVzcG9uc2UsIGNhbGxGdW5jKSB7XHJcbiAgICAgICAgdmFyIHNlbmRPYmogPSB0aGlzLl9kaWN0X3NlbmRSZXF1ZXN0W3VybF07XHJcbiAgICAgICAgaWYoc2VuZE9iail7XHJcbiAgICAgICAgICAgIGlmKHNlbmRPYmouY2FsbEZ1bmMpe1xyXG4gICAgICAgICAgICAgICAgc2VuZE9iai5jYWxsRnVuYyhyZXNwb25zZSk7XHJcbiAgICAgICAgICAgICAgICBzZW5kT2JqLmNhbGxGdW5jID0gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBkZWxldGUgdGhpcy5fZGljdF9zZW5kUmVxdWVzdFt1cmxdO1xyXG4gICAgICAgICAgICBpZighdGhpcy5nZXRJc1JlcXVlc3RpbmcoKSkgR0cudG9wVG91Y2hMYXllci5jbG9zZU5ldFJlcXVlc3QoKTtcclxuICAgICAgICAgICAgdGhpcy5fY2FuY2VsVGltZU91dCgpO1xyXG4gICAgICAgICAgICB0aGlzLl9pc1JlcXVlc3RpbmcgPSBmYWxzZTtcclxuICAgICAgICAgICAgdGhpcy5fZG9OZXh0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIC8v5aKe5Yqg6LaF5pe25aSE55CGXHJcbiAgICBfYWRkVGltZU91dCA6IGZ1bmN0aW9uIChjYWxsRnVuYykge1xyXG4gICAgICAgIHRoaXMuX3RpbWVfdGltZU91dCA9IDYwMDA7XHJcbiAgICAgICAgdGhpcy5fdGltZU91dElEID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmKGNhbGxGdW5jKXtcclxuICAgICAgICAgICAgICAgIGNhbGxGdW5jKCk7XHJcbiAgICAgICAgICAgICAgICBjYWxsRnVuYyA9IG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LCB0aGlzLl90aW1lX3RpbWVPdXQpXHJcbiAgICB9LFxyXG4gICAgX2NhbmNlbFRpbWVPdXQgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYoR19EQVRBLmlzTnVtYmVyKHRoaXMuX3RpbWVPdXRJRCkpe1xyXG4gICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5fdGltZU91dElEKTtcclxuICAgICAgICAgICAgdGhpcy5fdGltZU91dElEID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgZ2V0SXNSZXF1ZXN0aW5nIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBpc1JlcXVlc3RpbmcgPSBmYWxzZTtcclxuICAgICAgICBpZih0aGlzLl9kaWN0X3NlbmRSZXF1ZXN0KXtcclxuICAgICAgICAgICAgZm9yKHZhciB1cmwgaW4gdGhpcy5fZGljdF9zZW5kUmVxdWVzdCl7XHJcbiAgICAgICAgICAgICAgICBpc1JlcXVlc3RpbmcgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgYnJlYWtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gaXNSZXF1ZXN0aW5nXHJcbiAgICB9LFxyXG5cclxuICAgIC8vPT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblxyXG5cclxuICAgIC8v5aKe5YqgaHR0cOW/g+i3s1xyXG4gICAgYWRkSGVhcnQgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYodGhpcy5faXNBZGRIZWFydCkgcmV0dXJuO1xyXG4gICAgICAgIHRoaXMuX2lzQWRkSGVhcnQgPSB0cnVlO1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBfdGhpcy50aW1lZFJlZnJlc2goKTtcclxuICAgICAgICB9LDkwMDAwMCk7XHJcbiAgICB9LFxyXG5cclxuICAgIHRpbWVkUmVmcmVzaCA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLnNlbmRIdHRwUmVxdWVzdChHX0RJQUxPR19VUkwudGltZWRSZWZyZXNoVXJsLCB7dDpuZXcgRGF0ZSgpfSwgZnVuY3Rpb24gKGRhdGEpIHtcclxuXHJcbiAgICAgICAgfS5iaW5kKHRoaXMpKTtcclxuICAgIH0sXHJcblxyXG4gICAgLy/lop7liqDplb/nm5HlkKznmoTor7fmsYJcclxuICAgIGFkZExvbmdSZXF1ZXN0V2FpdCA6IGZ1bmN0aW9uICh1cmwsIHNlbmREYXRhLCBjYWxsRnVuYykge1xyXG4gICAgICAgIGlmKCF0aGlzLl9kaWN0X2xvbmdXYWl0KSB0aGlzLl9kaWN0X2xvbmdXYWl0ID0ge307XHJcbiAgICAgICAgdmFyIHNlbmRPYmogPSBHX09CSi5kYXRhX2h0dHBTZW5kKCk7XHJcbiAgICAgICAgc2VuZE9iai51cmwgPSB1cmw7XHJcbiAgICAgICAgc2VuZE9iai5zZW5kRGF0YSA9IHNlbmREYXRhO1xyXG4gICAgICAgIHNlbmRPYmouY2FsbEZ1bmMgPSBjYWxsRnVuYztcclxuICAgICAgICB0aGlzLl9kaWN0X2xvbmdXYWl0W3VybF0gPSBzZW5kT2JqO1xyXG4gICAgfSxcclxuICAgIF9jaGVja0xvbmdXYWl0IDogZnVuY3Rpb24gKHVybCwgcmVzcG9uc2UpIHtcclxuICAgICAgICBpZighdGhpcy5fZGljdF9sb25nV2FpdCB8fCAhdGhpcy5fZGljdF9sb25nV2FpdFt1cmxdKSByZXR1cm47XHJcbiAgICAgICAgaWYocmVzcG9uc2UgJiYgIXRoaXMuX2RpY3Rfc2VuZFJlcXVlc3RbdXJsXSkge1xyXG4gICAgICAgICAgICB2YXIgc2VuZE9iaiA9IHRoaXMuX2RpY3RfbG9uZ1dhaXRbdXJsXTtcclxuICAgICAgICAgICAgaWYoc2VuZE9iaiAmJiBzZW5kT2JqLmNhbGxGdW5jKXtcclxuICAgICAgICAgICAgICAgIHNlbmRPYmouY2FsbEZ1bmMocmVzcG9uc2UpO1xyXG4gICAgICAgICAgICAgICAgc2VuZE9iai5jYWxsRnVuYyA9IG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZGVsZXRlIHRoaXMuX2RpY3Rfc2VuZFJlcXVlc3RbdXJsXVxyXG4gICAgICAgIH1cclxuXHJcbiAgICB9LFxyXG5cclxuICAgIC8vIGNhbGxlZCBldmVyeSBmcmFtZSwgdW5jb21tZW50IHRoaXMgZnVuY3Rpb24gdG8gYWN0aXZhdGUgdXBkYXRlIGNhbGxiYWNrXHJcbiAgICAvLyB1cGRhdGU6IGZ1bmN0aW9uIChkdCkge1xyXG5cclxuICAgIC8vIH0sXHJcbn0pO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBodHRwOyIsIi8v5a2Y5YKo5bel5YW377yM5a+55pys5Zyw55qE5pWw5o2u6L+b6KGM5pON5L2cXHJcblxyXG53aW5kb3cuR19TdG9yYWdlID0ge1xyXG4gICAgc2V0RGF0YSA6IGZ1bmN0aW9uIChsb2NhbFR5cGUsIGRhdGEpIHtcclxuICAgICAgICBjYy5zeXMubG9jYWxTdG9yYWdlLnNldEl0ZW0obG9jYWxUeXBlLCBkYXRhKTtcclxuICAgIH0sXHJcblxyXG4gICAgZGVsRGF0YSA6IGZ1bmN0aW9uIChsb2NhbFR5cGUpIHtcclxuICAgICAgICBjYy5zeXMubG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0obG9jYWxUeXBlKTtcclxuICAgIH0sXHJcblxyXG4gICAgZ2V0RGF0YSA6IGZ1bmN0aW9uIChsb2NhbFR5cGUpIHtcclxuICAgICAgICByZXR1cm4gY2Muc3lzLmxvY2FsU3RvcmFnZS5nZXRJdGVtKGxvY2FsVHlwZSlcclxuICAgIH0sXHJcbn0iLCIvL+eOqeWutuWvueixoe+8jOWtmOWcqOS6juaVtOS4qua4uOaIj+a1geeoi+S4rVxyXG5cclxudmFyIHBsYXllciA9IGNjLkNsYXNzKHtcclxuICAgIF9wbGF5ZXJJRCA6IG51bGwsXHJcbiAgICBfcGxheWVyVG9rZW4gOiBudWxsLFxyXG4gICAgX3BsYXllck5hbWUgOiBudWxsLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/lp5PlkI1cclxuICAgIF9wbGF5ZXJVSUQgOiBudWxsLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vXHJcbiAgICBfcGxheWVyR29sZCA6IG51bGwsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+eOqeWutueahOmHkeW4gVxyXG5cclxuICAgIF9kaWN0X3N5c3RlbVNldCA6IG51bGwsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v57O757uf6YWN572u5L+h5oGvXHJcbiAgICBfZGljdF9iYXNlSW5mbyA6IG51bGwsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+WfuuehgOS/oeaBr+WIl+ihqFxyXG5cclxuICAgIF9pbkhvbWVEYXRhIDogbnVsbCwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5Li05pe26K6w5b2V5b2T5YmN55qE6L+b5oi/6Ze05L+h5oGvXHJcbiAgICBfb3V0SG9tZURhdGEgOiBudWxsLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+S4tOaXtuiusOW9leW9k+WJjeeahOWHuuaIv+mXtOS/oeaBr1xyXG4gICAgX3JlbG9hZFNjZW5lSW5mbyA6IG51bGwsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/pooTliqDovb3lnLrmma/nmoTml7blgJnkvKDpgJLnmoTlj4LmlbBcclxuICAgIGN0b3IgOiBmdW5jdGlvbiAoKSB7fSxcclxuXHJcbiAgICBzZXRQbGF5ZXJUb2tlbiA6IGZ1bmN0aW9uICh0b2tlbkRhdGEpIHtcclxuICAgICAgICB0aGlzLl9wbGF5ZXJUb2tlbiA9IHRva2VuRGF0YS50b2tlbjtcclxuICAgICAgICB0aGlzLl9wbGF5ZXJVSUQgPSB0b2tlbkRhdGEudWlkO1xyXG4gICAgfSxcclxuICAgIHNldFBsYXllcklEIDogZnVuY3Rpb24gKGlkKSB7XHJcbiAgICAgICAgdGhpcy5fcGxheWVySUQgPSBpZDtcclxuICAgIH0sXHJcbiAgICAvL+WQjeWtl1xyXG4gICAgc2V0UGxheWVyTmFtZSA6IGZ1bmN0aW9uIChuYW1lKSB7XHJcbiAgICAgICAgdGhpcy5fcGxheWVyTmFtZSA9IG5hbWU7XHJcbiAgICB9LFxyXG4gICAgLy/ns7vnu5/orr7nva5cclxuICAgIHNldFN5c3RlbVNldCA6IGZ1bmN0aW9uIChjdXJEaWN0KSB7XHJcbiAgICAgICAgdGhpcy5fZGljdF9zeXN0ZW1TZXQgPSBjdXJEaWN0O1xyXG4gICAgfSxcclxuICAgIC8v546p5a625Z+656GA5L+h5oGvOiBuaWNrbmFtZSxhdmF0YXJVcmwsaWRcclxuICAgIHNldEJhc2VJbmZvIDogZnVuY3Rpb24gKHJlY3REYXRhKSB7XHJcbiAgICAgICAgaWYoIXJlY3REYXRhKSByZXR1cm47XHJcbiAgICAgICAgaWYoIXRoaXMuX2RpY3RfYmFzZUluZm8pIHRoaXMuX2RpY3RfYmFzZUluZm8gPSB7fTtcclxuICAgICAgICB2YXIgZGF0YSA9IHJlY3REYXRhLmRhdGFbMF07XHJcbiAgICAgICAgaWYoZGF0YSl7XHJcbiAgICAgICAgICAgIGZvcih2YXIgYXR0ck5hbWUgaW4gZGF0YSl7XHJcbiAgICAgICAgICAgICAgICAvL+WktOWDj2F2YXRhclVybO+8m+mHkeW4gWNvaW7vvJtuaWNrbmFtZeaYteensFxyXG4gICAgICAgICAgICAgICAgdGhpcy5fZGljdF9iYXNlSW5mb1thdHRyTmFtZV0gPSBkYXRhW2F0dHJOYW1lXTtcclxuICAgICAgICAgICAgICAgIC8vaWYoYXR0ck5hbWUgPT0gJ2lkJykgdGhpcy5zZXRQbGF5ZXJJRChkYXRhW2F0dHJOYW1lXSk7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKGF0dHJOYW1lKXtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlICdpZCc6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0UGxheWVySUQoZGF0YVthdHRyTmFtZV0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVha1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2NvaW4nOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgb2JqID0gR19PQkouZGF0YV9uYlNlbGYoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb2JqLmJhbGFuY2UgPSBkYXRhW2F0dHJOYW1lXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRQbGF5ZXJHb2xkKG9iaik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICBzZXRJbkhvbWVEYXRhIDogZnVuY3Rpb24gKGRhdGFPYmopIHtcclxuICAgICAgICB0aGlzLl9pbkhvbWVEYXRhID0gZGF0YU9iajtcclxuICAgIH0sXHJcbiAgICBzZXRPdXRIb21lRGF0YSA6IGZ1bmN0aW9uIChkYXRhT2JqKSB7XHJcbiAgICAgICAgdGhpcy5fb3V0SG9tZURhdGEgPSBkYXRhT2JqO1xyXG4gICAgfSxcclxuICAgIHNldFJlbG9hZFNjZW5lSW5mbyA6IGZ1bmN0aW9uIChpbmZvKSB7XHJcbiAgICAgICAgdGhpcy5fcmVsb2FkU2NlbmVJbmZvID0gaW5mbztcclxuICAgIH0sXHJcbiAgICBzZXRQbGF5ZXJHb2xkIDogZnVuY3Rpb24gKGRhdGFPYmopIHtcclxuICAgICAgICB0aGlzLl9wbGF5ZXJHb2xkID0gcGFyc2VJbnQoZGF0YU9iai5iYWxhbmNlKTtcclxuICAgICAgICAvL+WIhuWPkemHkeW4geWPmOWMlueahOS/oeaBr1xyXG4gICAgICAgIEdHLkxpc3RlbmVyLmRpc3BhdGNoRXZlbnRFWChHX1RZUEUuZ2xvYmFsTGlzdGVuZXIucGxheWVyR29sZCwgZGF0YU9iaik7XHJcbiAgICB9LFxyXG5cclxuICAgIC8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblxyXG4gICAgZ2V0UGxheWVyR29sZCA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fcGxheWVyR29sZFxyXG4gICAgfSxcclxuICAgIGdldFBsYXllcklEIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9wbGF5ZXJJRFxyXG4gICAgfSxcclxuICAgIGdldFBsYXllclRva2VuIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9wbGF5ZXJUb2tlbjtcclxuICAgIH0sXHJcbiAgICAvL+eOqeWutuWnk+WQjVxyXG4gICAgZ2V0UGxheWVyTmFtZSA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZGljdF9iYXNlSW5mb1snbmlja25hbWUnXTtcclxuICAgIH0sXHJcbiAgICAvL+iOt+WPluezu+e7n+mFjee9ruS/oeaBr1xyXG4gICAgZ2V0U3lzdGVtU2V0IDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9kaWN0X3N5c3RlbVNldFxyXG4gICAgfSxcclxuICAgIC8v6I635Y+W5Z+656GA5L+h5oGvXHJcbiAgICBnZXRCYXNlSW5mbyA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZGljdF9iYXNlSW5mb1xyXG4gICAgfSxcclxuICAgIC8v6I635Y+W546p5a625aS05YOPXHJcbiAgICBnZXRIZWFkSW1nVXJsIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9kaWN0X2Jhc2VJbmZvWydhdmF0YXJVcmwnXVxyXG4gICAgfSxcclxuICAgIC8v6I635Y+W6L+b5oi/6Ze05L+h5oGvXHJcbiAgICBnZXRJbkhvbWVEYXRhIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBob21lRGF0YSA9IHRoaXMuX2luSG9tZURhdGE7XHJcbiAgICAgICAgdGhpcy5faW5Ib21lRGF0YSA9IG51bGw7XHJcbiAgICAgICAgcmV0dXJuIGhvbWVEYXRhXHJcbiAgICB9LFxyXG4gICAgLy/ojrflj5blh7rmiL/pl7Tkv6Hmga9cclxuICAgIGdldE91dEhvbWVEYXRhIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBob21lRGF0YSA9IHRoaXMuX291dEhvbWVEYXRhO1xyXG4gICAgICAgIHRoaXMuX291dEhvbWVEYXRhID0gbnVsbDtcclxuICAgICAgICByZXR1cm4gaG9tZURhdGFcclxuICAgIH0sXHJcbiAgICAvL+iOt+WPllVJRFxyXG4gICAgZ2V0VUlEIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9wbGF5ZXJVSURcclxuICAgIH0sXHJcbiAgICAvL+iOt+WPlua4uOaIj0lE77yM56ys5Yeg5qy+5ri45oiPXHJcbiAgICBnZXRHYW1lSUQgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIDFcclxuICAgIH0sXHJcbiAgICAvL+iOt+WPlumihOWKoOi9veWcuuaZr+S8oOmAkueahOS/oeaBr1xyXG4gICAgZ2V0UmVsb2FkU2NlbmVJbmZvIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBpbmZvID0gdGhpcy5fcmVsb2FkU2NlbmVJbmZvO1xyXG4gICAgICAgIHRoaXMuX3JlbG9hZFNjZW5lSW5mbyA9IG51bGw7XHJcbiAgICAgICAgcmV0dXJuIGluZm9cclxuICAgIH0sXHJcblxyXG4gICAgLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuXHJcbiAgICAvL+mAgOWHuua4uOaIj+aXtuWAmeeahOWkhOeQhu+8iOavlOWmguiusOW9leW9k+WJjeeahOmfs+S5kOmfs+aViOiuvue9ruS/oeaBr++8iVxyXG4gICAgd2hlbkV4aXQgOiBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgfSxcclxufSlcclxuXHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHBsYXllcjsiLCIvL+acgOS4iumdoueahOe9kee7nOivt+axguWKqOeUu1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBjYy5DbGFzcyh7XHJcbiAgICBwcm9wZXJ0aWVzOiB7XHJcbiAgICAgICAgX2FuaSA6IG51bGwsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5Yqg6L295Yqo55S7XHJcbiAgICAgICAgX2lzTG9hZGluZyA6IG51bGwsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/mraPlnKjliqDovb1cclxuICAgIH0sXHJcblxyXG4gICAgLy8gdXNlIHRoaXMgZm9yIGluaXRpYWxpemF0aW9uXHJcbiAgICBjdG9yOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5faXNMb2FkaW5nID0gZmFsc2U7XHJcbiAgICB9LFxyXG5cclxuICAgIC8v5pi+56S6572R57uc6K+35rGC5Yqo55S7XHJcbiAgICBzaG93TmV0UmVxdWVzdCA6IGZ1bmN0aW9uIChpc1Nob3dUaXApIHtcclxuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy5fZ2V0UmVxdWVzdEFuaShmdW5jdGlvbiAobGF5ZXJfbmV0QW5pKSB7XHJcbiAgICAgICAgICAgIGlmKCFsYXllcl9uZXRBbmkpIHJldHVybjtcclxuICAgICAgICAgICAgaWYoIWxheWVyX25ldEFuaS5hY3RpdmUpe1xyXG4gICAgICAgICAgICAgICAgbGF5ZXJfbmV0QW5pLmFjdGl2ZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBzZWxmLl9zaG93UmVjb25uZWN0VGlwKGxheWVyX25ldEFuaSwgaXNTaG93VGlwKTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgYW5pTm9kZSA9IGxheWVyX25ldEFuaS5nZXRDaGlsZEJ5VGFnKDEpO1xyXG4gICAgICAgICAgICAgICAgaWYoYW5pTm9kZSl7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGFuaSA9IGFuaU5vZGUuZ2V0Q29tcG9uZW50KGRyYWdvbkJvbmVzLkFybWF0dXJlRGlzcGxheSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoYW5pKSBhbmkucGxheUFuaW1hdGlvbignJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgfSxcclxuICAgIC8v6ZqQ6JeP5Yqo55S7XHJcbiAgICBjbG9zZU5ldFJlcXVlc3QgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgICAgIHRoaXMuX2dldFJlcXVlc3RBbmkoZnVuY3Rpb24gKGxheWVyX25ldEFuaSkge1xyXG4gICAgICAgICAgICBpZighbGF5ZXJfbmV0QW5pKSByZXR1cm47XHJcbiAgICAgICAgICAgIGxheWVyX25ldEFuaS5hY3RpdmUgPSBmYWxzZTtcclxuICAgICAgICB9KVxyXG4gICAgfSxcclxuXHJcbiAgICAvL+iOt+WPluaSreaUvueahOWKqOeUu1xyXG4gICAgX2dldFJlcXVlc3RBbmkgOiBmdW5jdGlvbiAoY2FsbEZ1bmMpIHtcclxuICAgICAgICB2YXIgbGltaXRMYXllciA9IGNjLmZpbmQoJ0NhbnZhcy9sYXllcl9sb2FkaW5nUmVxdWVzdCcpO1xyXG4gICAgICAgIGlmKGxpbWl0TGF5ZXIgJiYgY2FsbEZ1bmMpe1xyXG4gICAgICAgICAgICBjYWxsRnVuYyhsaW1pdExheWVyKTtcclxuICAgICAgICAgICAgY2FsbEZ1bmMgPSBudWxsO1xyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICBpZih0aGlzLl9pc0xvYWRpbmcpIHJldHVybjtcclxuICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgICAgICAgICB0aGlzLl9pc0xvYWRpbmcgPSB0cnVlO1xyXG4gICAgICAgICAgICBjYy5sb2FkZXIubG9hZFJlcygnYW5pX3ByZWZhYi9QcmVmYWJfc2ltcGxlTG9hZGluZycsIGNjLlByZWZhYiwgZnVuY3Rpb24gKGVyciwgcHJlZmFiKSB7XHJcbiAgICAgICAgICAgICAgICBpZihwcmVmYWIpe1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjYW52YXMgPSBjYy5maW5kKCdDYW52YXMnKTtcclxuICAgICAgICAgICAgICAgICAgICBsaW1pdExheWVyID0gbmV3IGNjLk5vZGUoKTtcclxuICAgICAgICAgICAgICAgICAgICBsaW1pdExheWVyLnNldENvbnRlbnRTaXplKGNjLnZpc2libGVSZWN0LndpZHRoLCBjYy52aXNpYmxlUmVjdC5oZWlnaHQpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhbnZhcy5hZGRDaGlsZChsaW1pdExheWVyLCAzKTtcclxuICAgICAgICAgICAgICAgICAgICBsaW1pdExheWVyLnNldE5hbWUoJ2xheWVyX2xvYWRpbmdSZXF1ZXN0Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5hZGRUb3VjaExpbWl0KGxpbWl0TGF5ZXIpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgYW5pID0gY2MuaW5zdGFudGlhdGUocHJlZmFiKTtcclxuICAgICAgICAgICAgICAgICAgICBhbmkueSA9IGNjLnZpc2libGVSZWN0LmhlaWdodCAqIDAuMjtcclxuICAgICAgICAgICAgICAgICAgICBsaW1pdExheWVyLmFkZENoaWxkKGFuaSwgMSwgMSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBzZWxmLl9pc0xvYWRpbmcgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIGlmKGNhbGxGdW5jKXtcclxuICAgICAgICAgICAgICAgICAgICBjYWxsRnVuYyhsaW1pdExheWVyKTtcclxuICAgICAgICAgICAgICAgICAgICBjYWxsRnVuYyA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICBnZXRJc1Nob3cgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGxheWVyX25ldEFuaSA9IGNjLmZpbmQoJ0NhbnZhcy9sYXllcl9sb2FkaW5nUmVxdWVzdCcpO1xyXG4gICAgICAgIHJldHVybiBCb29sZWFuKGxheWVyX25ldEFuaSAmJiBsYXllcl9uZXRBbmkuYWN0aXZlKVxyXG4gICAgfSxcclxuXHJcbiAgICAvL+aYvuekuumHjei/nuaPkOekulxyXG4gICAgX3Nob3dSZWNvbm5lY3RUaXAgOiBmdW5jdGlvbiAobGF5ZXJfbmV0QW5pLCBpc1Nob3cpIHtcclxuICAgICAgICB2YXIgdGlwTm9kZSA9IGxheWVyX25ldEFuaS5nZXRDaGlsZEJ5VGFnKDIpO1xyXG4gICAgICAgIGlmKCF0aXBOb2RlKXtcclxuICAgICAgICAgICAgdGlwTm9kZSA9IG5ldyBjYy5Ob2RlKCk7XHJcbiAgICAgICAgICAgIHRpcE5vZGUuYWRkQ29tcG9uZW50KGNjLkxhYmVsKTtcclxuICAgICAgICAgICAgdGlwTm9kZS55ID0gLWNjLnZpc2libGVSZWN0LmhlaWdodCAqIDAuMTtcclxuICAgICAgICAgICAgbGF5ZXJfbmV0QW5pLmFkZENoaWxkKHRpcE5vZGUsIDAsIDIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgY29udGVudDtcclxuICAgICAgICBpZihpc1Nob3cpIHtcclxuICAgICAgICAgICAgdmFyIHRhYmxlRGF0YSA9IEdfREFUQS5nZXRDaGluZXNlKDYxKTtcclxuICAgICAgICAgICAgY29udGVudCA9dGFibGVEYXRhLmNvbnRlbnQ7XHJcbiAgICAgICAgfWVsc2UgY29udGVudCA9ICcnO1xyXG4gICAgICAgIHRpcE5vZGUuZ2V0Q29tcG9uZW50KGNjLkxhYmVsKS5zdHJpbmcgPSBjb250ZW50O1xyXG4gICAgfSxcclxuXHJcbiAgICBhZGRUb3VjaExpbWl0IDogZnVuY3Rpb24gKHRhcmdldCkge1xyXG4gICAgICAgIGlmKCF0YXJnZXQpIHRhcmdldCA9IGNjLmZpbmQoJ0NhbnZhcy9sYXllcl9sb2FkaW5nUmVxdWVzdCcpO1xyXG4gICAgICAgIGlmKHRhcmdldCkgdGFyZ2V0Lm9uKGNjLk5vZGUuRXZlbnRUeXBlLlRPVUNIX1NUQVJULCB0aGlzLl90b3VjaFRoaXNMYXllciwgdGhpcyk7XHJcbiAgICB9LFxyXG4gICAgX3RvdWNoVGhpc0xheWVyIDogZnVuY3Rpb24gKCkge1xyXG5cclxuICAgIH0sXHJcbiAgICBjYW5jZWxUb3VjaExpbWl0IDogZnVuY3Rpb24gKHRhcmdldCkge1xyXG4gICAgICAgIGlmKCF0YXJnZXQpIHRhcmdldCA9IGNjLmZpbmQoJ0NhbnZhcy9sYXllcl9sb2FkaW5nUmVxdWVzdCcpO1xyXG4gICAgICAgIGlmKHRhcmdldCkgdGFyZ2V0Lm9mZihjYy5Ob2RlLkV2ZW50VHlwZS5UT1VDSF9TVEFSVCwgdGhpcy5fdG91Y2hUaGlzTGF5ZXIsIHRoaXMpO1xyXG4gICAgfSxcclxufSk7XHJcbiIsIi8v5LiO5pyN5Yqh56uv5Lqk5LqS55qE5LqL5Lu257G75Z6L77yMcl/mmK/lj6rog73mjqXmlLbnmoTkuovku7ZyZWNlaXZl44CCc1/lrqLmiLfnq6/or7fmsYLnmoTkuovku7ZzZW5kXHJcblxyXG52YXIgY29uZmlnID0ge1xyXG4gICAgc19sb2dpbiA6ICdOYkxvZ2luJywgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+eZu+mZhlxyXG4gICAgc19lbnRlckhvdXNlOiAnTmJJbnRvUm9vbUluJywgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/ov5vlhaXmiL/pl7TnmoTor7fmsYJcclxuICAgIHJfdGlwcyA6ICdOYlRpcCcsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/nm7TmjqXov5Tlm57kv6Hmga/nu5PmnpxcclxuICAgIHJfZW50ZXJIb3VzZVJldHVybiA6ICdOYkludG9Sb29tT3V0JywgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/ov5vlhaXmiL/pl7TlkI7ov5Tlm57nmoTkv6Hmga9cclxuICAgIHJfaWRsZVRpbWVPdXQgOiAnTmJUaW1lb3V0T3V0JywgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v6ZW/5pe26Ze05rKh5pyJ5YGa5pON5L2cXHJcbiAgICBzX2RvR3JhYiA6ICdOYkJldCcsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/njqnlrrbpgInkuK3kuIDkuKrmipXms6jljLrln59cclxuICAgIHJfZ2V0QW5ub3VuY2VtZW50IDogJ05iR2FtZUFubm91bmNlbWVudCcsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+WFrOWRiueahOaOpeaUtlxyXG4gICAgcl9wYXNzaXZlT3V0IDogJ05iS2lja091dCcsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/lvILlnLDnmbvpmYZcclxuICAgIHJfbmJTZWxmIDogJ05iU2VsZicsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5aaC5p6c5pyJ5raI5oGv5Lyg5p2lLOWImeWIt+aWsOiHquW3seeahOS/oeaBr1xyXG4gICAgLy9jbGFzc2ljXHJcbiAgICBzX2NhbGN1bGF0aW5nIDogJ05iQ2xhc3NpY0NvdW50aW5nJywgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v566X54mMXHJcbiAgICBzX2dyYWJEZWFsZXJPclNldFNjb3JlIDogJ05iQ2xhc3NpY011bHRpcGxlSW4nLCAgICAgICAgICAgICAgICAgICAgICAgLy/miqLluoTmiJbogIXmirzms6hcclxuICAgIHJfc2V0U2NvcmVFbmQgOiAnTmJDbGFzc2ljQmV0TXVsdGlwbGVPdmVyT3V0JywgICAgICAgICAgICAgICAgICAgICAgICAvL+aKvOWAjeaVsOe7k+adn++8jOWNleS4qumAmuefpeavj+S4gOS4quahjOWGheeOqeWutuaVsOaNri5cclxuICAgIHJfZ3JhYkRlYWxlckVuZCA6ICdOYkNsYXNzaWNEZWFsZXJNdWx0aXBsZU92ZXJPdXQnLCAgICAgICAgICAgICAgICAgIC8v5oqi5bqE57uT5p2f77yM5Y2V5Liq6YCa55+l5q+P5LiA5Liq5qGM5YaF546p5a625pWw5o2uLlxyXG4gICAgcl9nZXRQbGF5ZXJzSW5mbyA6ICdOYkNsYXNzaWNJbml0aWFsaXplT3V0JywgICAgICAgICAgICAgICAgICAgICAgICAgIC8v6L+b5YWl5oi/6Ze05ZCO77yM5YWl5bqn5Yid5aeL5YyW5qGM5YaF546p5a625pWw5o2uLlxyXG4gICAgcl9vbmVHcmFiIDogJ05iQ2xhc3NpY011bHRpcGxlT3V0JywgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+aKouW6hO+8jOaKvOWAjeaVsOaJuemHj+mAmuefpeahjOWGheeOqeWutuaVsOaNri5cclxuICAgIHJfc3RhcnRJbmZvIDogJ05iQ2xhc3NpY05ld01hdGNoT3V0JywgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/muLjmiI/lvIDlp4vmlbDmja4uXHJcbiAgICByX29uZUluc2VydCA6ICdOYkNsYXNzaWNTZWF0T3V0JywgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+aWsOeOqeWutuWFpeW6p++8jOaJuemHj+mAmuefpeahjOWGheeOqeWutuaVsOaNri5cclxuICAgIHJfY2FsY3VsYXRlRW5kIDogJ05iQ2xhc3NpY1NldHRsZU91dCcsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/nrpfniYznu5PmnZ/nu5PnrpfmlbDmja7vvIzmibnph4/pgJrnn6XmoYzlhoXnjqnlrrYuXHJcbiAgICAvL2dyYWJcclxuICAgIHJfZ3JhYl9yZVN0YXJ0R2FtZSA6ICdOYkJ1bGxCYW9TdGFydE1hdGNoT3V0JywgICAgICAgICAgICAgICAgICAgICAgICAvL+WcqOaIv+mXtOWGhemHjeaWsOW8gOWni+a4uOaIj+aXtuWAmeeahOaVsOaNrlxyXG4gICAgcl9kb0dyYWJfcmV0dXJuIDogJ05iQmV0T3V0JywgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/njqnlrrbpgInkuK3kuIDkuKrmipXms6jljLrln59cclxuICAgIHJfb3RoZXJHcmFiIDogJ05iQmV0QmF0Y2hPdXQnLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5pyJ5p+Q5Liq546p5a625oqV5rOoXHJcbiAgICByX2dyYWJFbmQgOiAnTmJTZXR0bGVNYXRjaE91dCcsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+aKleazqOe7k+adn1xyXG4gICAgcl9taW5lSGF2ZUdyYWIgOiAnTmJTZXR0bGVQbGF5ZXJPdXQnLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+iHquW3seacieaKleazqOWImeaciei/meadoea2iOaBr+aYvuekuuaUtuebilxyXG4gICAgcl9vbmVJbkhvbWUgOiAnTmJTZWF0T3V0JywgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5pyJ5p+Q5Liq546p5a625YWl5bqnXHJcbiAgICBzX2dyYWJfRXhpdCA6ICdOYkV4aXRSb29tSW4nLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/pgIDlh7rmiL/pl7RcclxuICAgIHJfZ3JhYl9leGl0UmV0dXJuIDogJ05iRXhpdFJvb21PdXQnLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v6YCA5Ye65oi/6Ze06L+U5ZueXHJcbiAgICAvL2J1bGwxMDBcclxuICAgIHJfYnVsbDEwMF9yZVN0YXJ0R2FtZSA6ICdOYlN0YXJ0TWF0Y2hPdXQnLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/lnKjmiL/pl7TlhoXph43mlrDlvIDlp4vmuLjmiI/ml7blgJnnmoTmlbDmja5cclxuICAgIHNfYnVsbDEwMF9kZWFsZXJVcCA6ICdOYlVwRGVhbGVySW4nLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5LiK5bqE6K+35rGCXHJcbiAgICBzX2J1bGwxMDBfZGVhbGVyQ29udGludWUgOiAnTmJLZWVwRGVhbGVySW4nLCAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v57ut5bqE6K+35rGCXHJcbiAgICBzX2J1bGwxMDBfZGVhbGVyRG93biA6ICdOYkRvd25EZWFsZXJJbicsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+S4i+W6hOivt+axglxyXG4gICAgc19idWxsMTAwX2dldERlYWxlckxpc3QgOiAnTmJVcERlYWxlckxpc3RJbicsICAgICAgICAgICAgICAgICAgICAgICAgICAvL+iOt+WPluS4iuW6hOWIl+ihqFxyXG4gICAgcl9idWxsMTAwX2RlYWxlckRvd25XYXJuaW5nIDogJ05iV2FybmluZ0RlYWxlck91dCcsICAgICAgICAgICAgICAgICAgIC8v5LiL5bqE6K2m5ZGKXHJcbiAgICByX2J1bGwxMDBfZGVhbGVyTGlzdFJldHVybiA6ICdOYlVwRGVhbGVyT3V0JywgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5LiK5bqE5LiL5Y+R5raI5oGvXHJcbiAgICByX2J1bGwxMDBfZG93bkRlYWxlclJldHVybiA6ICdOYkRvd25EZWFsZXJPdXQnLCAgICAgICAgICAgICAgICAgICAgICAgIC8v5LiL5bqE6K+35rGC5Zue6LCDXHJcbn1cclxuXHJcbndpbmRvdy5OZXRUeXBlID0gY29uZmlnOyIsImNjLkNsYXNzKHtcclxuICAgIGV4dGVuZHM6IGNjLkNvbXBvbmVudCxcclxuICAgIF9jaG9vc2VQb2tlck51bSA6IG51bGwsICAgICAgICAgICAgICAgICAgICAgICAvL+W3sue7j+mAieaLqeeahOWNoeeJjOaVsOmHj1xyXG4gICAgcHJvcGVydGllczoge1xyXG4gICAgICAgIF90aXBfdHJ1ZVJlc3VsdCA6IG51bGwsXHJcbiAgICAgICAgX2NhbGxGdW5jIDogbnVsbCxcclxuXHJcbiAgICAgICAgbGFiZWxfMDEgOiBjYy5MYWJlbCxcclxuICAgICAgICBsYWJlbF8wMiA6IGNjLkxhYmVsLFxyXG4gICAgICAgIGxhYmVsXzAzIDogY2MuTGFiZWwsXHJcbiAgICAgICAgbGFiZWxfMDQgOiBjYy5MYWJlbCxcclxuICAgIH0sXHJcblxyXG4gICAgLy8gdXNlIHRoaXMgZm9yIGluaXRpYWxpemF0aW9uXHJcbiAgICBvbkxvYWQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLl9jaG9vc2VQb2tlck51bSA9IDA7XHJcbiAgICAgICAgdGhpcy5fbGlzdF9sYWJlbCA9IFt0aGlzLmxhYmVsXzAxLCB0aGlzLmxhYmVsXzAyLCB0aGlzLmxhYmVsXzAzLCB0aGlzLmxhYmVsXzA0XTtcclxuICAgIH0sXHJcblxyXG4gICAgc2hvd0NhbGN1bGF0ZSA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLm5vZGUuYWN0aXZlID0gdHJ1ZTtcclxuICAgIH0sXHJcblxyXG4gICAgLy/pgInkuK3kuIDlvKDljaHniYws6LaF6L+H5pWw6YeP5pe25YCZ6ZyA6KaB5YGa5aSE55CGXHJcbiAgICBjaG9vc2VPbmVQb2tlciA6IGZ1bmN0aW9uIChjaG9vc2VOdW0pIHtcclxuICAgICAgICBpZih0aGlzLl9jaG9vc2VQb2tlck51bSA+PSBHX0NvbmZpZ19jbGFzc2ljLm51bV9tYXhDaG9vc2Upe1xyXG4gICAgICAgICAgICAvL2Nob29zZSBtb3JlXHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5fbGlzdF9sYWJlbFt0aGlzLl9jaG9vc2VQb2tlck51bV0uc3RyaW5nID0gY2hvb3NlTnVtLnRvU3RyaW5nKCk7XHJcbiAgICAgICAgdGhpcy5fY2hvb3NlUG9rZXJOdW0gKz0gMTtcclxuICAgICAgICBpZih0aGlzLl9jaG9vc2VQb2tlck51bSA+PSBHX0NvbmZpZ19jbGFzc2ljLm51bV9tYXhDaG9vc2Upe1xyXG4gICAgICAgICAgICAvL+mAieS4reS6huS4ieW8oFxyXG4gICAgICAgICAgICB2YXIgZ2V0TnVtID0gdGhpcy5fZ2V0UmVzdWx0KCk7XHJcbiAgICAgICAgICAgIHRoaXMuX2xpc3RfbGFiZWxbdGhpcy5fY2hvb3NlUG9rZXJOdW1dLnN0cmluZyA9IGdldE51bS50b1N0cmluZygpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH0sXHJcblxyXG4gICAgLy/lj5bmtojmn5DlvKDljaHniYznmoTlgLxcclxuICAgIGNhbmNlbE9uZVBva2VyIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmKHRoaXMuX3RpcF90cnVlUmVzdWx0KXtcclxuICAgICAgICAgICAgdGhpcy5fdGlwX3RydWVSZXN1bHQuZm9yY2VFbmQoKTtcclxuICAgICAgICAgICAgdGhpcy5fdGlwX3RydWVSZXN1bHQgPSBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLl9jaG9vc2VQb2tlck51bSAtPSAxO1xyXG4gICAgICAgIHRoaXMuX2xpc3RfbGFiZWxbdGhpcy5fY2hvb3NlUG9rZXJOdW1dLnN0cmluZyA9ICcnO1xyXG4gICAgICAgIHRoaXMuX2xpc3RfbGFiZWxbR19Db25maWdfY2xhc3NpYy5udW1fbWF4Q2hvb3NlXS5zdHJpbmcgPSAnJztcclxuICAgIH0sXHJcblxyXG4gICAgX2dldFJlc3VsdCA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgZ2V0TnVtID0gMDtcclxuICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgdGhpcy5fY2hvb3NlUG9rZXJOdW07IGkgKyspe1xyXG4gICAgICAgICAgICBnZXROdW0gKz0gcGFyc2VJbnQodGhpcy5fbGlzdF9sYWJlbFtpXS5zdHJpbmcpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZ2V0TnVtXHJcbiAgICB9LFxyXG5cclxuICAgIF9jaGVja0NhbGN1bGF0ZSA6IGZ1bmN0aW9uICh2YWx1ZSkge1xyXG5cclxuICAgIH0sXHJcbiAgICBfY291bnREb3duRW5kIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuX3RpcF90cnVlUmVzdWx0ID0gbnVsbDtcclxuICAgICAgICBpZih0aGlzLl9jYWxsRnVuYykgdGhpcy5fY2FsbEZ1bmMoKTtcclxuICAgIH0sXHJcblxyXG4gICAgc2hvd1RydWVSZXN1bHQgOiBmdW5jdGlvbiAocG9rZXJWYWx1ZSwgY2FsbEZ1bmMpIHtcclxuICAgICAgICBpZih0aGlzLl9jaG9vc2VQb2tlck51bSA8IEdfQ29uZmlnX2NsYXNzaWMubnVtX21heENob29zZSkgcmV0dXJuO1xyXG5cclxuICAgICAgICB0aGlzLl9jYWxsRnVuYyA9IGNhbGxGdW5jO1xyXG4gICAgICAgIHZhciB2YWx1ZSA9IHRoaXMuX2dldFJlc3VsdCgpO1xyXG4gICAgICAgIGlmKHZhbHVlICUgMTAgPT0gMCl7XHJcbiAgICAgICAgICAgIC8vY2FsY3VsYXRlIHN1Y2Nlc3NcclxuICAgICAgICAgICAgdmFyIGRhdGExID0gR19EQVRBLmdldENoaW5lc2UoMTcpO1xyXG4gICAgICAgICAgICB2YXIgZGF0YTIgPSBHX0RBVEEuZ2V0Q2hpbmVzZSgxNik7XHJcbiAgICAgICAgICAgIHZhciBzdHJMaXN0ID0gZGF0YTIuY29udGVudC5zcGxpdCgnLCcpO1xyXG4gICAgICAgICAgICB2YXIgc2hvd1N0ciA9IEdfVE9PTC5mb3JtYXRTdHIoZGF0YTEuY29udGVudCwgc3RyTGlzdFtwb2tlclZhbHVlXSk7XHJcbiAgICAgICAgICAgIHZhciBkYXRhT2JqID0ge1xyXG4gICAgICAgICAgICAgICAgc2hvd1N0ciA6IHNob3dTdHIsXHJcbiAgICAgICAgICAgICAgICBzaG93UG9zIDogY2MucCh0aGlzLm5vZGUueCwgdGhpcy5ub2RlLnkgKyB0aGlzLm5vZGUuaGVpZ2h0KSxcclxuICAgICAgICAgICAgICAgIHJldGFpblRpbWUgOiBkYXRhMS5yZXRhaW5UaW1lLFxyXG4gICAgICAgICAgICAgICAgY2FsbEJhY2sgOiB0aGlzLl9jb3VudERvd25FbmQuYmluZCh0aGlzKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuX3RpcF90cnVlUmVzdWx0ID0gR0cudGlwc01nci5zaG93Q291bnREb3duVGlwKGRhdGFPYmopO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICBzaG93T3ZlclRvdWNoIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBkYXRhID0gR19EQVRBLmdldENoaW5lc2UoNSk7XHJcbiAgICAgICAgdmFyIGRhdGFPYmogPSB7XHJcbiAgICAgICAgICAgIHNob3dTdHIgOiBkYXRhLmNvbnRlbnQsXHJcbiAgICAgICAgICAgIHNob3dQb3MgOiBjYy5wKHRoaXMubm9kZS54LCB0aGlzLm5vZGUueSArIHRoaXMubm9kZS5oZWlnaHQpLFxyXG4gICAgICAgICAgICByZXRhaW5UaW1lIDogZGF0YS5yZXRhaW5UaW1lLFxyXG4gICAgICAgICAgICBjYWxsQmFjayA6IHRoaXMuX3Nob3dDb3VudERvd24uYmluZCh0aGlzKVxyXG4gICAgICAgIH1cclxuICAgICAgICBHRy50aXBzTWdyLnNob3dUeHRUaXAoZGF0YU9iaik7XHJcbiAgICAgICAgdGhpcy5faGlkZUNvdW50RG93bigpO1xyXG4gICAgfSxcclxuICAgIF9zaG93Q291bnREb3duIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmKHRoaXMuX3RpcF90cnVlUmVzdWx0KSB0aGlzLl90aXBfdHJ1ZVJlc3VsdC5zaG93QnlPcGFjaXR5KCk7XHJcbiAgICB9LFxyXG4gICAgX2hpZGVDb3VudERvd24gOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYodGhpcy5fdGlwX3RydWVSZXN1bHQpIHRoaXMuX3RpcF90cnVlUmVzdWx0LmhpZGVCeU9wYWNpdHkoKTtcclxuICAgIH0sXHJcblxyXG4gICAgaGlkZUNhbGN1bGF0ZSA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZighdGhpcy5ub2RlLmFjdGl2ZSkgcmV0dXJuO1xyXG4gICAgICAgIGlmKHRoaXMuX3RpcF90cnVlUmVzdWx0KSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3RpcF90cnVlUmVzdWx0LmZvcmNlRW5kKCk7XHJcbiAgICAgICAgICAgIHRoaXMuX3RpcF90cnVlUmVzdWx0ID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5vbkNsZWFyKCk7XHJcbiAgICAgICAgdGhpcy5ub2RlLmFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgfSxcclxuICAgIG9uQ2xlYXIgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgZm9yKHZhciBpID0gMDsgaSA8IHRoaXMuX2xpc3RfbGFiZWwubGVuZ3RoOyBpICsrKXtcclxuICAgICAgICAgICAgdGhpcy5fbGlzdF9sYWJlbFtpXS5zdHJpbmcgPSAnJztcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5fY2hvb3NlUG9rZXJOdW0gPSAwO1xyXG4gICAgfSxcclxuXHJcbiAgICAvLyBjYWxsZWQgZXZlcnkgZnJhbWUsIHVuY29tbWVudCB0aGlzIGZ1bmN0aW9uIHRvIGFjdGl2YXRlIHVwZGF0ZSBjYWxsYmFja1xyXG4gICAgLy8gdXBkYXRlOiBmdW5jdGlvbiAoZHQpIHtcclxuXHJcbiAgICAvLyB9LFxyXG59KTtcclxuIiwiLy/otbDlir/lm77lkozotKbnm67mnaHnm65cclxuY2MuQ2xhc3Moe1xyXG4gICAgZXh0ZW5kczogY2MuQ29tcG9uZW50LFxyXG5cclxuICAgIHByb3BlcnRpZXM6IHtcclxuICAgICAgICBfbGlzdF9sYWJlbFNvcnQgOiBudWxsLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5pW055CG5ZCO55qEbGFiZWzliJfooahcclxuICAgIH0sXHJcblxyXG4gICAgLy8gdXNlIHRoaXMgZm9yIGluaXRpYWxpemF0aW9uXHJcbiAgICBvbkxvYWQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLl9mYWlsQ29sb3IgPSBuZXcgY2MuQ29sb3IoMTg3LDExMSwxMTApO1xyXG4gICAgICAgIHRoaXMuX3dpbkNvbG9yID0gbmV3IGNjLkNvbG9yKDU4LDE4NSwyNTApO1xyXG4gICAgICAgIHRoaXMuX2ZhaWxTdHIgPSAn5bCPJztcclxuICAgICAgICB0aGlzLl93aW5TdHIgPSAn5aSnJztcclxuXHJcbiAgICAgICAgdGhpcy5fbGlzdF9sYWJlbFNvcnQgPSB7fTtcclxuICAgICAgICB2YXIgbGFiZWxzID0gdGhpcy5ub2RlLmNoaWxkcmVuO1xyXG4gICAgICAgIHRoaXMuX2xpc3RfbGFiZWxTb3J0W0dfVFlQRS5wb2tlclR5cGVTdHIuc3BhZGVdID0gbGFiZWxzWzBdO1xyXG4gICAgICAgIHRoaXMuX2xpc3RfbGFiZWxTb3J0W0dfVFlQRS5wb2tlclR5cGVTdHIuaGVhcnRdID0gbGFiZWxzWzFdO1xyXG4gICAgICAgIHRoaXMuX2xpc3RfbGFiZWxTb3J0W0dfVFlQRS5wb2tlclR5cGVTdHIuY2x1Yl0gPSBsYWJlbHNbMl07XHJcbiAgICAgICAgdGhpcy5fbGlzdF9sYWJlbFNvcnRbR19UWVBFLnBva2VyVHlwZVN0ci5kaWFtb25kXSA9IGxhYmVsc1szXTtcclxuICAgIH0sXHJcblxyXG4gICAgLy/orr7nva7ov5nkuKrmnaHnm67kuK3nmoTkv6Hmga9cclxuICAgIHNldERhdGEgOiBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgIGlmKCFkYXRhKSBkYXRhID0gW1snU1BBREUnLDFdLCBbJ0RJQU1PTkQnLDBdLCBbJ0NMVUInLDFdLCBbJ0hFQVJUJywwXV07ICAgICAgICAgICAgICAgLy/og5zliKnmmK8x77yM5aSx6LSl5pivMFxyXG4gICAgICAgIHZhciBsYWJlbHMgPSB0aGlzLm5vZGUuY2hpbGRyZW47XHJcbiAgICAgICAgZm9yKHZhciBpID0gMDsgaSA8IGRhdGEubGVuZ3RoOyBpICsrKXtcclxuICAgICAgICAgICAgdGhpcy5fc2V0TGFiZWxSZXN1bHQodGhpcy5fbGlzdF9sYWJlbFNvcnRbZGF0YVtpXVswXV0sIHBhcnNlSW50KGRhdGFbaV1bMV0pKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgLy/orr7nva7og5zliKnkuI7lkKZcclxuICAgIF9zZXRMYWJlbFJlc3VsdCA6IGZ1bmN0aW9uIChsYWJlbE5vZGUsIGlzV2luKSB7XHJcbiAgICAgICAgaWYoaXNXaW4pe1xyXG4gICAgICAgICAgICBsYWJlbE5vZGUuY29sb3IgPSB0aGlzLl93aW5Db2xvcjtcclxuICAgICAgICAgICAgbGFiZWxOb2RlLmdldENvbXBvbmVudChjYy5MYWJlbCkuc3RyaW5nID0gdGhpcy5fd2luU3RyO1xyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICBsYWJlbE5vZGUuY29sb3IgPSB0aGlzLl9mYWlsQ29sb3I7XHJcbiAgICAgICAgICAgIGxhYmVsTm9kZS5nZXRDb21wb25lbnQoY2MuTGFiZWwpLnN0cmluZyA9IHRoaXMuX2ZhaWxTdHI7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICAvLyBjYWxsZWQgZXZlcnkgZnJhbWUsIHVuY29tbWVudCB0aGlzIGZ1bmN0aW9uIHRvIGFjdGl2YXRlIHVwZGF0ZSBjYWxsYmFja1xyXG59KTsiLCIvL+a4uOaIj+Wkp+WOhemHkeW4geWbvuahiOeJueaViFxyXG5jYy5DbGFzcyh7XHJcbiAgICBleHRlbmRzOiBjYy5Db21wb25lbnQsXHJcblxyXG4gICAgcHJvcGVydGllczoge1xyXG4gICAgICAgIF9jb2luQW5pIDogbnVsbCwvL+iKgueCuemqqOmqvOWKqOeUu1xyXG4gICAgfSxcclxuXHJcbiAgICAvLyB1c2UgdGhpcyBmb3IgaW5pdGlhbGl6YXRpb25cclxuICAgIG9uTG9hZDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuX2luaXRQbGF5Q29pbkFuaSgpO1xyXG4gICAgfSxcclxuICAgIC8v5pKt5pS+6YeR5biB54m55pWI5Yqo55S7XHJcbiAgICBfaW5pdFBsYXlDb2luQW5pIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICghdGhpcy5fY29pbkFuaSkge1xyXG4gICAgICAgICAgICB0aGlzLl9jb2luQW5pID0gdGhpcy5ub2RlLmdldENvbXBvbmVudChkcmFnb25Cb25lcy5Bcm1hdHVyZURpc3BsYXkpO1xyXG4gICAgICAgICAgICB0aGlzLl9jb2luQW5pLmFkZEV2ZW50TGlzdGVuZXIoZHJhZ29uQm9uZXMuRXZlbnRPYmplY3QuQ09NUExFVEUsIHRoaXMuX3BsYXlDb2luc0VmZmVjdEFuaSwgdGhpcyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuX2NvaW5BbmkucGxheUFuaW1hdGlvbignY29pbnMnLCAxKTtcclxuICAgIH0sXHJcblxyXG4gICAgLy/mr4/pmpQz56eS5b6q546v5pKt5pS+6YeR5biB54m55pWIXHJcbiAgICBfcGxheUNvaW5zRWZmZWN0QW5pIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMubm9kZS5ydW5BY3Rpb24oY2Muc2VxdWVuY2UoY2MuZGVsYXlUaW1lKDMpLCBjYy5jYWxsRnVuYyhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2luaXRQbGF5Q29pbkFuaSgpO1xyXG4gICAgICAgIH0sIHRoaXMpKSk7XHJcbiAgICB9LFxyXG5cclxuICAgIG9uRGVzdHJveSA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLm5vZGUuc3RvcEFsbEFjdGlvbnMoKTtcclxuICAgIH0sXHJcblxyXG4gICAgLy8gY2FsbGVkIGV2ZXJ5IGZyYW1lLCB1bmNvbW1lbnQgdGhpcyBmdW5jdGlvbiB0byBhY3RpdmF0ZSB1cGRhdGUgY2FsbGJhY2tcclxuICAgIC8vIHVwZGF0ZTogZnVuY3Rpb24gKGR0KSB7XHJcblxyXG4gICAgLy8gfSxcclxufSk7XHJcbiIsIi8v6bue5pOK56K66KqN55qE55WM6Z2iXHJcblxyXG5jYy5DbGFzcyh7XHJcbiAgICBleHRlbmRzOiByZXF1aXJlKCdBdXRvRGVhbGluZycpLFxyXG5cclxuICAgIHByb3BlcnRpZXM6IHtcclxuICAgICAgICBfY2FsbEZ1bmMgOiBudWxsLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+eCueWHu+ehruWumuWQjueahOWbnuiwg1xyXG4gICAgICAgIF9jYWxsRnVuYzIgOiBudWxsLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+eCueWHu+WPlua2iOWQjueahOWbnuiwg1xyXG4gICAgICAgIF9yZWdpc3RlckZ1bmMgOiBudWxsLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v6aKd5aSW5rOo5YaM55qE5Zue6LCD77yM5YWz5LqO5YWz6Zet5ZKM5byA5ZCvXHJcbiAgICAgICAgX2lzUGxheUVmZmVjdCA6IG51bGwsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/mmK/lkKbmraPlnKjmkq3mlL7nibnmlYhcclxuXHJcbiAgICAgICAgbGFiZWxfY2VudGVyIDogY2MuTGFiZWwsXHJcbiAgICAgICAgbm9kZV9sZWZ0IDogY2MuTm9kZSxcclxuICAgICAgICBub2RlX3JpZ2h0IDogY2MuTm9kZSxcclxuICAgICAgICBub2RlX2NlbnRlciA6IGNjLk5vZGUsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5Y2V6YCJ55qE56Gu5a6a5oyJ6ZKuXHJcbiAgICAgICAgbm9kZV9ncmF5TGF5ZXIgOiBjYy5Ob2RlLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+WNlemAieeahOehruWumuaMiemSrlxyXG4gICAgICAgIC8vbm9kZV9jb250aW51ZUltZyA6IGNjLk5vZGUsXHJcbiAgICB9LFxyXG5cclxuICAgIC8vIHVzZSB0aGlzIGZvciBpbml0aWFsaXphdGlvbjFcclxuICAgIG9uTG9hZDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuX3Nob3dUaW1lID0gR19Db25maWdfY29tbW9uLnRpbWVfY29uZmlybVRpcFNob3cvMjtcclxuICAgICAgICB0aGlzLl9tYXhTY2FsZSA9IEdfQ29uZmlnX2NvbW1vbi5zY2FsZV9jb25maXJtVGlwTWF4O1xyXG4gICAgICAgIHRoaXMuX3RvdWNoQ29tcE5hbWUgPSAnT2JqX3RvdWNoTGltaXQnO1xyXG4gICAgICAgIHRoaXMuX2lzUGxheUVmZmVjdCA9IGZhbHNlO1xyXG4gICAgICAgIC8vdGhpcy5fZm9ybWF0U3RyID0gJzxiPiVzPGIvPic7XHJcbiAgICAgICAgLy90aGlzLl9sYWJlbF9sZWZ0ID0gdGhpcy5ub2RlX2xlZnQuY2hpbGRyZW5bMF0uZ2V0Q29tcG9uZW50KGNjLkxhYmVsKTtcclxuICAgICAgICAvL3RoaXMuX2xhYmVsX3JpZ2h0ID0gdGhpcy5ub2RlX3JpZ2h0LmNoaWxkcmVuWzBdLmdldENvbXBvbmVudChjYy5MYWJlbCk7XHJcbiAgICB9LFxyXG5cclxuICAgIC8v5pi+56S655qE5YaF5a655aSa6YCJXHJcbiAgICBzaG93Q29udGVudCA6IGZ1bmN0aW9uIChjb250ZW50U3RyLCBjYWxsRnVuYywgY2FsbEZ1bmMyKSB7XHJcbiAgICAgICAgdGhpcy5fY2FsbEZ1bmMgPSBjYWxsRnVuYztcclxuICAgICAgICB0aGlzLl9jYWxsRnVuYzIgPSBjYWxsRnVuYzI7XHJcbiAgICAgICAgdGhpcy5ub2RlLmFjdGl2ZSA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5fc2hvd09uZUJ0bihmYWxzZSk7XHJcbiAgICAgICAgdGhpcy5fc2V0Q29udGVudChjb250ZW50U3RyKTtcclxuXHJcbiAgICAgICAgdGhpcy5fc2hvd0VmZmVjdCh0cnVlKTtcclxuICAgICAgICB0aGlzLm5vZGVfZ3JheUxheWVyLmdldENvbXBvbmVudCh0aGlzLl90b3VjaENvbXBOYW1lKS5hZGRUb3VjaExpbWl0KCk7XHJcbiAgICAgICAgLy/ms6jlhoznm5HlkKxcclxuICAgICAgICBpZih0aGlzLl9yZWdpc3RlckZ1bmMpe1xyXG4gICAgICAgICAgICB0aGlzLl9yZWdpc3RlckZ1bmModHJ1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICAvL+aYvuekuueahOWGheWuueWNlemAiVxyXG4gICAgc2hvd0NvbnRlbnRFeCA6IGZ1bmN0aW9uIChjb250ZW50U3RyLCBjYWxsRnVuYykge1xyXG4gICAgICAgIHRoaXMuX2NhbGxGdW5jID0gY2FsbEZ1bmM7XHJcbiAgICAgICAgdGhpcy5ub2RlLmFjdGl2ZSA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5fc2hvd09uZUJ0bih0cnVlKTtcclxuICAgICAgICB0aGlzLl9zZXRDb250ZW50KGNvbnRlbnRTdHIpO1xyXG5cclxuICAgICAgICB0aGlzLl9zaG93RWZmZWN0KHRydWUpO1xyXG4gICAgICAgIHRoaXMubm9kZV9ncmF5TGF5ZXIuZ2V0Q29tcG9uZW50KHRoaXMuX3RvdWNoQ29tcE5hbWUpLmFkZFRvdWNoTGltaXQoKTtcclxuICAgICAgICAvL+azqOWGjOebkeWQrFxyXG4gICAgICAgIGlmKHRoaXMuX3JlZ2lzdGVyRnVuYyl7XHJcbiAgICAgICAgICAgIHRoaXMuX3JlZ2lzdGVyRnVuYyh0cnVlKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIEJ0bl90b3VjaExlZnQgOiBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICBpZih0aGlzLl9pc1BsYXlFZmZlY3QpIHJldHVybjtcclxuICAgICAgICB0aGlzLl9jYWxsRnVuYzIgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuX3Nob3dFZmZlY3QoZmFsc2UpO1xyXG4gICAgfSxcclxuICAgIEJ0bl90b3VjaFJpZ2h0IDogZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgaWYodGhpcy5faXNQbGF5RWZmZWN0KSByZXR1cm47XHJcbiAgICAgICAgdGhpcy5fY2FsbEZ1bmMgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuX3Nob3dFZmZlY3QoZmFsc2UpO1xyXG4gICAgfSxcclxuICAgIEJ0bl90b3VjaENlbnRlciA6IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgIGlmKHRoaXMuX2lzUGxheUVmZmVjdCkgcmV0dXJuO1xyXG4gICAgICAgIHRoaXMuX3Nob3dFZmZlY3QoZmFsc2UpO1xyXG4gICAgfSxcclxuXHJcbiAgICAvL+aYvuekuueVjOmdoueahOeJueaViCAgaXNTaG93IO+8miDliKTlrprlvZPliY3mmK/mmL7npLrov5jmmK/lhbPpl61cclxuICAgIF9zaG93RWZmZWN0IDogZnVuY3Rpb24gKGlzU2hvdykge1xyXG4gICAgICAgIHRoaXMuX2lzUGxheUVmZmVjdCA9IHRydWU7XHJcbiAgICAgICAgdmFyIGVmZmVjdE5vZGUgPSB0aGlzLm5vZGVfY2VudGVyLnBhcmVudDtcclxuICAgICAgICBlZmZlY3ROb2RlLnN0b3BBbGxBY3Rpb25zKCk7XHJcbiAgICAgICAgaWYoaXNTaG93KXtcclxuICAgICAgICAgICAgLy8gc2hvdyB0aXBcclxuICAgICAgICAgICAgZWZmZWN0Tm9kZS5zY2FsZSA9IDA7XHJcblxyXG4gICAgICAgICAgICB2YXIgYWN0MSA9IGNjLnNjYWxlVG8odGhpcy5fc2hvd1RpbWUsIHRoaXMuX21heFNjYWxlKTtcclxuICAgICAgICAgICAgdmFyIGFjdDIgPSBjYy5zY2FsZVRvKHRoaXMuX3Nob3dUaW1lLzIsIDEpO1xyXG4gICAgICAgICAgICBlZmZlY3ROb2RlLnJ1bkFjdGlvbihjYy5zZXF1ZW5jZShhY3QxLCBhY3QyLCBjYy5jYWxsRnVuYyhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9pc1BsYXlFZmZlY3QgPSBmYWxzZTtcclxuICAgICAgICAgICAgfSwgdGhpcykpKTtcclxuICAgICAgICAgICAgLy8gdGhpcy5wbGF5RnJhbWVFZmZlY3QoZWZmZWN0Tm9kZSk7XHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIC8vY2xvc2UgdGlwXHJcbiAgICAgICAgICAgIGVmZmVjdE5vZGUuc2NhbGUgPSAxO1xyXG5cclxuICAgICAgICAgICAgdmFyIGFjdDEgPSBjYy5zY2FsZVRvKHRoaXMuX3Nob3dUaW1lLzIsIHRoaXMuX21heFNjYWxlKTtcclxuICAgICAgICAgICAgdmFyIGFjdDIgPSBjYy5zY2FsZVRvKHRoaXMuX3Nob3dUaW1lLCAwLjUpO1xyXG4gICAgICAgICAgICBlZmZlY3ROb2RlLnJ1bkFjdGlvbihjYy5zZXF1ZW5jZShhY3QxLCBhY3QyLCBjYy5jYWxsRnVuYyhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9pc1BsYXlFZmZlY3QgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3JlbW92ZVBhZ2UoKTtcclxuICAgICAgICAgICAgfSwgdGhpcykpKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgcGxheUZyYW1lRWZmZWN0IDogZnVuY3Rpb24gKGVmZmVjdE5vZGUpIHtcclxuICAgICAgICB2YXIgdGltZSA9IDAuMjtcclxuXHJcbiAgICAgICAgZWZmZWN0Tm9kZS5zY2FsZSA9IDA7XHJcbiAgICAgICAgZWZmZWN0Tm9kZS5zdG9wQWxsQWN0aW9ucygpO1xyXG4gICAgICAgIGlmKGVmZmVjdE5vZGUuX2ZpcnN0WCA9PT0gdW5kZWZpbmVkKSBlZmZlY3ROb2RlLl9maXJzdFggPSBlZmZlY3ROb2RlLng7XHJcbiAgICAgICAgaWYoZWZmZWN0Tm9kZS5fZmlyc3RZID09PSB1bmRlZmluZWQpIGVmZmVjdE5vZGUuX2ZpcnN0WSA9IGVmZmVjdE5vZGUueTtcclxuXHJcbiAgICAgICAgdmFyIGFjdDEgPSBjYy5tb3ZlQnkodGltZSwgLWNjLnZpc2libGVSZWN0LndpZHRoKjAuMiwgMCk7XHJcbiAgICAgICAgdmFyIGFjdDIgPSBjYy5zY2FsZVRvKHRpbWUsIDAuNSk7XHJcbiAgICAgICAgdmFyIGFjdDJfMSA9IGNjLnJvdGF0ZVRvKHRpbWUsIDAsIDkwKTtcclxuICAgICAgICB2YXIgYWN0MyA9IGNjLnNwYXduKGFjdDEsIGFjdDIsIGFjdDJfMSk7XHJcbiAgICAgICAgdmFyIGFjdDQgPSBjYy5zZXF1ZW5jZShhY3QzLCBjYy5jYWxsRnVuYyh0aGlzLl9wbGF5RnJhbWVFZmZlY3QyLCB0aGlzKSlcclxuICAgICAgICBlZmZlY3ROb2RlLnJ1bkFjdGlvbihhY3Q0KTtcclxuICAgIH0sXHJcbiAgICBfcGxheUZyYW1lRWZmZWN0MiA6IGZ1bmN0aW9uICh0YXJnZXQpIHtcclxuICAgICAgICB2YXIgdGltZSA9IDAuNTtcclxuXHJcbiAgICAgICAgdGFyZ2V0LnJvdGF0aW9uWSA9IC05MDtcclxuICAgICAgICB2YXIgYWN0MSA9IGNjLm1vdmVUbyh0aW1lLCB0YXJnZXQuX2ZpcnN0WCwgdGFyZ2V0Ll9maXJzdFkpO1xyXG4gICAgICAgIHZhciBhY3QyID0gY2Muc2NhbGVUbyh0aW1lLCAxKTtcclxuICAgICAgICAvLyB2YXIgYWN0Ml8xID0gY2Muc2tld1RvKHRpbWUsIDAsIDApO1xyXG4gICAgICAgIHZhciBhY3QyXzEgPSBjYy5yb3RhdGVUbyh0aW1lLCAwLCAwKTtcclxuICAgICAgICB2YXIgYWN0MyA9IGNjLnNwYXduKGFjdDEsIGFjdDIsIGFjdDJfMSk7XHJcbiAgICAgICAgdmFyIGFjdDQgPSBjYy5zZXF1ZW5jZShhY3QzLCBjYy5jYWxsRnVuYyh0aGlzLmZyYW1lRWZmZWN0RW5kLCB0aGlzKSlcclxuICAgICAgICB0YXJnZXQucnVuQWN0aW9uKGFjdDQpO1xyXG4gICAgfSxcclxuICAgIGZyYW1lRWZmZWN0RW5kIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuX2lzUGxheUVmZmVjdCA9IGZhbHNlO1xyXG4gICAgfSxcclxuXHJcbiAgICAvL+aYvuekuuW8ueeql+eahOWGheWuuVxyXG4gICAgX3NldENvbnRlbnQgOiBmdW5jdGlvbiAoc3RyKSB7XHJcbiAgICAgICAgLy90aGlzLmxhYmVsX2NlbnRlci5zdHJpbmcgPSBHX1RPT0wuZm9ybWF0U3RyKHRoaXMuX2Zvcm1hdFN0ciwgc3RyKTtcclxuICAgICAgICAvL+mBh+WIsOmAl+WPt+mcgOimgeWIhuihjFxyXG4gICAgICAgIHN0ciA9IHN0ci5yZXBsYWNlKCcsJywnXFxuJyk7XHJcbiAgICAgICAgc3RyID0gc3RyLnJlcGxhY2UoJ++8jCcsJ1xcbicpO1xyXG4gICAgICAgIHRoaXMubGFiZWxfY2VudGVyLnN0cmluZyA9IHN0cjtcclxuICAgIH0sXHJcblxyXG4gICAgLy/mmK/lkKblj6rmmL7npLrkuIDkuKrmjInpkq5cclxuICAgIF9zaG93T25lQnRuIDogZnVuY3Rpb24gKGlzT25lKSB7XHJcbiAgICAgICAgdGhpcy5ub2RlX3JpZ2h0LmFjdGl2ZSA9ICFpc09uZTtcclxuICAgICAgICB0aGlzLm5vZGVfbGVmdC5hY3RpdmUgPSAhaXNPbmU7XHJcbiAgICAgICAgdGhpcy5ub2RlX2NlbnRlci5hY3RpdmUgPSBpc09uZTtcclxuICAgIH0sXHJcblxyXG4gICAgLy/np7vpmaTnlYzpnaJcclxuICAgIF9yZW1vdmVQYWdlIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8v5rOo5YaM55uR5ZCsXHJcbiAgICAgICAgaWYodGhpcy5fcmVnaXN0ZXJGdW5jKXtcclxuICAgICAgICAgICAgdGhpcy5fcmVnaXN0ZXJGdW5jKGZhbHNlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYodGhpcy5fY2FsbEZ1bmMpe1xyXG4gICAgICAgICAgICB0aGlzLl9jYWxsRnVuYygpO1xyXG4gICAgICAgICAgICB0aGlzLl9jYWxsRnVuYyA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmKHRoaXMuX2NhbGxGdW5jMil7XHJcbiAgICAgICAgICAgIHRoaXMuX2NhbGxGdW5jMigpO1xyXG4gICAgICAgICAgICB0aGlzLl9jYWxsRnVuYzIgPSBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLm5vZGVfZ3JheUxheWVyLmdldENvbXBvbmVudCh0aGlzLl90b3VjaENvbXBOYW1lKS5jYW5jZWxUb3VjaExpbWl0KCk7XHJcbiAgICAgICAgdGhpcy5ub2RlLmFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgfSxcclxuXHJcbiAgICAvL+WFs+mXreeVjOmdolxyXG4gICAgY2xvc2VQYWdlIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuX2NhbGxGdW5jID0gbnVsbDtcclxuICAgICAgICB0aGlzLl9jYWxsRnVuYzIgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuX3Nob3dFZmZlY3QoZmFsc2UpO1xyXG4gICAgfSxcclxuXHJcbiAgICAvL+ebkeWQrOehruiupOahhueahOWFs+mXreWSjOW8gOWQr1xyXG4gICAgcmVnaXN0ZXJGdW5jIDogZnVuY3Rpb24gKGZ1bmMsIGlzUmVnaXN0ZXIpIHtcclxuICAgICAgICBpZihpc1JlZ2lzdGVyKSB0aGlzLl9yZWdpc3RlckZ1bmMgPSBmdW5jO1xyXG4gICAgICAgIGVsc2UgdGhpcy5fcmVnaXN0ZXJGdW5jID0gbnVsbDtcclxuICAgIH0sXHJcblxyXG4gICAgLy8gY2FsbGVkIGV2ZXJ5IGZyYW1lLCB1bmNvbW1lbnQgdGhpcyBmdW5jdGlvbiB0byBhY3RpdmF0ZSB1cGRhdGUgY2FsbGJhY2tcclxuICAgIC8vIHVwZGF0ZTogZnVuY3Rpb24gKGR0KSB7XHJcblxyXG4gICAgLy8gfSxcclxufSk7XHJcbiIsIi8v5ZyG5b2i6L+b5bqm5p2h77yM55So5LqO5YCS6K6h5pe255qE5pi+56S677yM5LyY5YyW55qE6K+d5Y+v5YGa5oiQ6aKE5Yi25L2TXHJcblxyXG5jYy5DbGFzcyh7XHJcbiAgICBleHRlbmRzOiBjYy5Db21wb25lbnQsXHJcbiAgICBfZmlyc3RGcmFtZSA6IG51bGwsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+esrOS4gOW8oOWchuW9ouWbvueJh1xyXG4gICAgX2NhbGxGdW5jIDogbnVsbCwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/lgJLorqHml7blm57osIPnu5PmnZ/ml7blgJnosIPnlKjnmoTlh73mlbBcclxuICAgIHByb3BlcnRpZXM6IHtcclxuICAgICAgICBub2RlX3Byb2dyZXNzIDogY2MuTm9kZSxcclxuICAgICAgICBmcmFtZV90aW1lSW1hZ2UxIDogY2MuU3ByaXRlRnJhbWUsICAgICAgICAgICAgICAvL+esrOS6jOW8oOWchuW9ouWbvueJh1xyXG4gICAgICAgIGZyYW1lX3RpbWVJbWFnZTIgOiBjYy5TcHJpdGVGcmFtZSwgICAgICAgICAgICAgIC8v56ys5LiJ5byg5ZyG5b2i5Zu+54mHXHJcbiAgICAgICAgbGFiZWxfY291bnQgOiBjYy5MYWJlbCwgICAgICAgICAgICAgICAgICAgICAgICAgLy/nu7/oibLlrZfkvZNcclxuICAgICAgICBmb250X2dyZWVuIDogY2MuRm9udCwgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+e7v+iJsuWtl+S9k1xyXG4gICAgICAgIGZvbnRfb3JhbmdlIDogY2MuRm9udCwgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5qmZ6Imy5a2X5L2TXHJcbiAgICAgICAgZm9udF9yZWQgOiBjYy5Gb250LCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/nuqLoibLlrZfkvZNcclxuICAgIH0sXHJcblxyXG4gICAgLy8gdXNlIHRoaXMgZm9yIGluaXRpYWxpemF0aW9uXHJcbiAgICBvbkxvYWQ6IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICB9LFxyXG5cclxuICAgIF9pbml0RGF0YSA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLl9maXJzdEZyYW1lID0gdGhpcy5ub2RlX3Byb2dyZXNzLmdldENvbXBvbmVudEluQ2hpbGRyZW4oY2MuU3ByaXRlKS5zcHJpdGVGcmFtZTtcclxuICAgICAgICB0aGlzLl9wcm9ncmVzc0JhclNwcml0ZSA9IHRoaXMubm9kZV9wcm9ncmVzcy5nZXRDb21wb25lbnRJbkNoaWxkcmVuKGNjLlNwcml0ZSk7XHJcbiAgICAgICAgdGhpcy5fcHJvZ3Jlc3NDb21wID0gdGhpcy5ub2RlX3Byb2dyZXNzLmdldENvbXBvbmVudChjYy5Qcm9ncmVzc0Jhcik7XHJcbiAgICB9LFxyXG5cclxuICAgIC8v5pi+56S65ZyG5b2i6L+b5bqm5p2h55qE5YCS6K6h5pe2XHJcbiAgICBzaG93Q291bnREb3duIDogZnVuY3Rpb24gKHNob3dUaW1lLCBjYWxsRnVuYykge1xyXG4gICAgICAgIGlmKCF0aGlzLl9maXJzdEZyYW1lKSB0aGlzLl9pbml0RGF0YSgpO1xyXG4gICAgICAgIGlmKGlzTmFOKHNob3dUaW1lKSkgcmV0dXJuO1xyXG4gICAgICAgIHRoaXMubm9kZS5hY3RpdmUgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMubm9kZV9wcm9ncmVzcy5jaGlsZHJlblswXS5hY3RpdmUgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuX2NhbGxGdW5jID0gY2FsbEZ1bmM7XHJcbiAgICAgICAgdGhpcy5fcnVuVGltZSA9IDA7XHJcbiAgICAgICAgdGhpcy5faW50ZXJ2YWwgPSAwLjk3O1xyXG4gICAgICAgIHRoaXMuX3NwZWVkUmF0ZSA9IDE7XHJcbiAgICAgICAgdGhpcy5fY3VyVGltZSA9IHNob3dUaW1lO1xyXG4gICAgICAgIHRoaXMuX2ZpcnN0VGltZSA9IE1hdGgubWluKE1hdGguY2VpbCh0aGlzLl9jdXJUaW1lKkdfQ29uZmlnX2NsYXNzaWMubGlzdF9jZW50ZXJQcm9ncmVzc1RpbWVbMF0pLCB0aGlzLl9jdXJUaW1lLTEpO1xyXG4gICAgICAgIHRoaXMuX3NlY29uZFRpbWUgPSBNYXRoLm1heChNYXRoLmZsb29yKHRoaXMuX2N1clRpbWUqR19Db25maWdfY2xhc3NpYy5saXN0X2NlbnRlclByb2dyZXNzVGltZVsxXSksIDEpO1xyXG4gICAgICAgIHRoaXMuX3Byb2dyZXNzSW50ZXJ2YWwgPSAxL3RoaXMuX2N1clRpbWU7XHJcblxyXG4gICAgICAgIHRoaXMuX2N1clRpbWUgKz0gMTtcclxuICAgICAgICB0aGlzLl9ydW5UaW1lID0gdGhpcy5faW50ZXJ2YWw7XHJcbiAgICAgICAgdGhpcy5fY2xlYXJMYWJlbHMoKTtcclxuICAgICAgICB0aGlzLl9wcm9ncmVzc0NvbXAucHJvZ3Jlc3MgPSAxO1xyXG4gICAgICAgIHRoaXMuc2NoZWR1bGUodGhpcy5fbGV0X3VwZGF0ZSwgMC4wMSk7XHJcbiAgICB9LFxyXG5cclxuICAgIC8v5bin5Ye95pWwXHJcbiAgICBfbGV0X3VwZGF0ZSA6IGZ1bmN0aW9uIChkdCkge1xyXG4gICAgICAgIHRoaXMuX3Byb2dyZXNzQ29tcC5wcm9ncmVzcyAtPSB0aGlzLl9wcm9ncmVzc0ludGVydmFsKmR0O1xyXG4gICAgICAgIGlmKHRoaXMuX3J1blRpbWUgPj0gdGhpcy5faW50ZXJ2YWwpe1xyXG4gICAgICAgICAgICB0aGlzLl9ydW5UaW1lID0gMDtcclxuICAgICAgICAgICAgdGhpcy5fc2V0TnVtSW1nKCk7XHJcbiAgICAgICAgfWVsc2UgdGhpcy5fcnVuVGltZSArPSBkdDtcclxuICAgIH0sXHJcbiAgICBcclxuICAgIC8v6K6+572u5Zu+54mHXHJcbiAgICBfc2V0TnVtSW1nIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuX2N1clRpbWUgLT0gMTtcclxuICAgICAgICBpZih0aGlzLl9jdXJUaW1lIDw9IHRoaXMuX2ZpcnN0VGltZSl7XHJcbiAgICAgICAgICAgIGlmKHRoaXMuX2N1clRpbWUgPD0gdGhpcy5fc2Vjb25kVGltZSl7XHJcbiAgICAgICAgICAgICAgICAvLyAgc3RlcCAzXHJcbiAgICAgICAgICAgICAgICBpZih0aGlzLl9jdXJUaW1lIDw9IDApe1xyXG4gICAgICAgICAgICAgICAgICAgIC8v57uT5p2f5YCS6K6h5pe2XHJcbiAgICAgICAgICAgICAgICAgICAgaWYodGhpcy5fY2FsbEZ1bmMpIHRoaXMuX2NhbGxGdW5jKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fY2FsbEZ1bmMgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2VuZFNjaGVkdWxlKCk7XHJcbiAgICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9wcm9ncmVzc0JhclNwcml0ZS5zcHJpdGVGcmFtZSA9IHRoaXMuZnJhbWVfdGltZUltYWdlMjtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmxhYmVsX2NvdW50LmZvbnQgPSB0aGlzLmZvbnRfcmVkO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubGFiZWxfY291bnQuc3RyaW5nID0gdGhpcy5fY3VyVGltZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfWVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8gIHN0ZXAgMlxyXG4gICAgICAgICAgICAgICAgdGhpcy5fcHJvZ3Jlc3NCYXJTcHJpdGUuc3ByaXRlRnJhbWUgPSB0aGlzLmZyYW1lX3RpbWVJbWFnZTE7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmxhYmVsX2NvdW50LmZvbnQgPSB0aGlzLmZvbnRfb3JhbmdlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5sYWJlbF9jb3VudC5zdHJpbmcgPSB0aGlzLl9jdXJUaW1lO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfWVsc2Uge1xyXG4gICAgICAgICAgICAvLyAgc3RlcCAxXHJcbiAgICAgICAgICAgIHRoaXMuX3Byb2dyZXNzQmFyU3ByaXRlLnNwcml0ZUZyYW1lID0gdGhpcy5fZmlyc3RGcmFtZTtcclxuICAgICAgICAgICAgdGhpcy5sYWJlbF9jb3VudC5mb250ID0gdGhpcy5mb250X2dyZWVuO1xyXG4gICAgICAgICAgICB0aGlzLmxhYmVsX2NvdW50LnN0cmluZyA9IHRoaXMuX2N1clRpbWU7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICBfZW5kU2NoZWR1bGUgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5fY3VyVGltZSA9IDA7XHJcbiAgICAgICAgdGhpcy5fcHJvZ3Jlc3NDb21wLnByb2dyZXNzID0gMDtcclxuICAgICAgICB0aGlzLnVuc2NoZWR1bGUodGhpcy5fbGV0X3VwZGF0ZSk7XHJcbiAgICAgICAgdGhpcy5ub2RlLmFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgfSxcclxuXHJcbiAgICBnZXRMZWF2ZVRpbWUgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2N1clRpbWVcclxuICAgIH0sXHJcblxyXG4gICAgLy/lvLrliLbnu5PmnZ9cclxuICAgIGZvcmNlRW5kIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBjYWxsRnVuYyA9IHRoaXMuX2NhbGxGdW5jO1xyXG4gICAgICAgIHRoaXMuX2NhbGxGdW5jID0gbnVsbDtcclxuICAgICAgICB0aGlzLl9jdXJUaW1lID0gMDtcclxuICAgICAgICB0aGlzLl9ydW5UaW1lID0gdGhpcy5faW50ZXJ2YWw7XHJcbiAgICAgICAgcmV0dXJuIGNhbGxGdW5jXHJcbiAgICB9LFxyXG5cclxuICAgIF9jbGVhckxhYmVscyA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLmxhYmVsX2NvdW50LnN0cmluZyA9ICcnO1xyXG4gICAgfSxcclxuXHJcbiAgICBvbkRlc3RvcnkgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy51bnNjaGVkdWxlKHRoaXMuX2xldF91cGRhdGUpO1xyXG4gICAgfSxcclxuXHJcblxyXG4gICAgLy8gY2FsbGVkIGV2ZXJ5IGZyYW1lLCB1bmNvbW1lbnQgdGhpcyBmdW5jdGlvbiB0byBhY3RpdmF0ZSB1cGRhdGUgY2FsbGJhY2tcclxuICAgIC8vIHVwZGF0ZTogZnVuY3Rpb24gKGR0KSB7XHJcblxyXG4gICAgLy8gfSxcclxufSk7XHJcbiIsIi8v6Ieq5Yqo5aSE55CG5rua5Yqo5bGC6YC76L6RXHJcblxyXG52YXIgZGF0YU9iaiA9IHtcclxuICAgIGl0ZW1QcmVmYWIgOiBudWxsLFxyXG4gICAgbGluZU51bSA6IG51bGwsXHJcbiAgICBzY3JvbGxUeXBlIDogbnVsbCxcclxufVxyXG5cclxuXHJcbmNjLkNsYXNzKHtcclxuICAgIGV4dGVuZHM6IGNjLkNvbXBvbmVudCxcclxuXHJcbiAgICBwcm9wZXJ0aWVzOiB7XHJcbiAgICAgICAgX2l0ZW1QcmVmYWIgOiBudWxsLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5p2h55uu55qE5aSN5Yi25L2TXHJcbiAgICAgICAgX3Nob3dJdGVtTnVtIDogbnVsbCwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+aYvuekuueahOadoeebruaVsOmHj1xyXG4gICAgICAgIF9pdGVtSGVpZ2h0IDogbnVsbCwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/mnaHnm67nmoTpq5jluqZcclxuICAgICAgICBfaXRlbVdpZHRoIDogbnVsbCwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5p2h55uu55qE5a695bqmXHJcbiAgICAgICAgX2l0ZW1PZmZYIDogbnVsbCwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+adoeebruS5i+mXtOeahOmXtOmalFxyXG4gICAgICAgIF9pdGVtT2ZmWSA6IG51bGwsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/mnaHnm67kuYvpl7TnmoTpl7TpmpRcclxuICAgICAgICBfcG9vbCA6IG51bGwsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+WvueixoeaxoFxyXG4gICAgICAgIF9zY3JvbGxUeXBlIDogbnVsbCwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/mu5rliqjlrrnlmajnmoTnsbvlnotcclxuICAgICAgICBfdmlld1cyIDogbnVsbCwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+WPr+inhuWMuuWfn+WuveW6pueahOS4gOWNilxyXG4gICAgICAgIC8v6IOM5YyF57G75Z6L6ZyA6KaB55So5Yiw55qE5bGe5oCnXHJcbiAgICAgICAgX2xpbmVOdW0gOiBudWxsLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/mr4/kuIDooYznmoTljZXlhYPmlbDph49cclxuICAgIH0sXHJcblxyXG4gICAgLy8gdXNlIHRoaXMgZm9yIGluaXRpYWxpemF0aW9uXHJcbiAgICBvbkxvYWQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLl9pdGVtT2ZmWSA9IDA7XHJcbiAgICAgICAgdGhpcy5faXRlbU9mZlggPSAwO1xyXG4gICAgfSxcclxuXHJcbiAgICBzZXREYXRhIDogZnVuY3Rpb24gKGRhdGFPYmopIHtcclxuICAgICAgICB0aGlzLl9pbml0RGF0YSgpO1xyXG4gICAgICAgIHRoaXMuX2l0ZW1QcmVmYWIgPSBkYXRhT2JqLml0ZW1QcmVmYWI7XHJcbiAgICAgICAgdGhpcy5fbGluZU51bSA9IGRhdGFPYmoubGluZU51bTtcclxuICAgICAgICB0aGlzLl9zY3JvbGxUeXBlID0gZGF0YU9iai5zY3JvbGxUeXBlO1xyXG4gICAgICAgIC8v6buY6K6k57G75Z6LXHJcbiAgICAgICAgaWYoIXRoaXMuX3Njcm9sbFR5cGUpIHRoaXMuX3Njcm9sbFR5cGUgPSBHX1RZUEUuc2Nyb2xsVHlwZS52ZXJ0aWNhbDtcclxuICAgIH0sXHJcbiAgICBfaW5pdERhdGEgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5fc2hvd0l0ZW1OdW0gPSAwO1xyXG4gICAgICAgIHRoaXMuX2l0ZW1IZWlnaHQgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuX2l0ZW1XaWR0aCA9IG51bGw7XHJcbiAgICAgICAgaWYoIXRoaXMuX3ZpZXdXMikgdGhpcy5fdmlld1cyID0gdGhpcy5ub2RlLnBhcmVudC53aWR0aCowLjU7XHJcbiAgICB9LFxyXG5cclxuICAgIC8v5re75Yqg5LiA5Liq5p2h55uuXHJcbiAgICBhZGRPbmVJdGVtIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBpdGVtID0gdGhpcy5fZ2V0T25lUG9vbE5vZGUoKTtcclxuXHJcbiAgICAgICAgc3dpdGNoICh0aGlzLl9zY3JvbGxUeXBlKXtcclxuICAgICAgICAgICAgY2FzZSBHX1RZUEUuc2Nyb2xsVHlwZS52ZXJ0aWNhbDpcclxuICAgICAgICAgICAgICAgIGl0ZW0ueSA9IC10aGlzLl9zaG93SXRlbU51bSAqICh0aGlzLl9pdGVtSGVpZ2h0ICsgdGhpcy5faXRlbU9mZlkpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgR19UWVBFLnNjcm9sbFR5cGUuaG9yaXpvbnRhbDovL+awtOW5s+a7muWKqOWxgu+8jOmcgOimgeWOu+aOieawtOW5s+aWueWQkeeahHdpZGdldFxyXG4gICAgICAgICAgICAgICAgdmFyIHN0YXJ0UG9zWCA9IC10aGlzLl92aWV3VzI7XHJcbiAgICAgICAgICAgICAgICBpdGVtLnggPSBzdGFydFBvc1ggKyB0aGlzLl9zaG93SXRlbU51bSAqICh0aGlzLl9pdGVtV2lkdGggKyB0aGlzLl9pdGVtT2ZmWSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBHX1RZUEUuc2Nyb2xsVHlwZS5iYWc6XHJcbiAgICAgICAgICAgICAgICB2YXIgc3RhcnRQb3NYID0gLXRoaXMuX3ZpZXdXMjtcclxuICAgICAgICAgICAgICAgIHZhciBsaW5lTnVtO1xyXG4gICAgICAgICAgICAgICAgaWYodGhpcy5fc2hvd0l0ZW1OdW0gPT0gMCkgbGluZU51bSA9IDA7XHJcbiAgICAgICAgICAgICAgICBlbHNlIGxpbmVOdW0gPSB0aGlzLl9zaG93SXRlbU51bSV0aGlzLl9saW5lTnVtO1xyXG4gICAgICAgICAgICAgICAgdmFyIHJvd051bSA9IE1hdGguZmxvb3IodGhpcy5fc2hvd0l0ZW1OdW0vdGhpcy5fbGluZU51bSk7XHJcbiAgICAgICAgICAgICAgICBpdGVtLnggPSBzdGFydFBvc1ggKyBsaW5lTnVtICogKHRoaXMuX2l0ZW1XaWR0aCArIHRoaXMuX2l0ZW1PZmZZKSArIHRoaXMuX2l0ZW1XaWR0aC8yO1xyXG4gICAgICAgICAgICAgICAgaXRlbS55ID0gLXJvd051bSAqICh0aGlzLl9pdGVtSGVpZ2h0ICsgdGhpcy5faXRlbU9mZlgpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuX3Nob3dJdGVtTnVtICs9IDE7XHJcbiAgICAgICAgdGhpcy5fcmVzZXRDb250YWluZXJTaXplKCk7XHJcbiAgICAgICAgcmV0dXJuIGl0ZW1cclxuICAgIH0sXHJcblxyXG4gICAgLy/ojrflj5bmn5DkuKrmnaHnm64o5LuOMOW8gOWniylcclxuICAgIGdldEl0ZW1CeUluZGV4IDogZnVuY3Rpb24gKGluZGV4KSB7XHJcbiAgICAgICAgdmFyIGl0ZW1zID0gdGhpcy5ub2RlLmNoaWxkcmVuO1xyXG4gICAgICAgIHZhciBpdGVtID0gaXRlbXNbaW5kZXhdO1xyXG4gICAgICAgIGlmKGl0ZW0pIHJldHVybiBpdGVtO1xyXG4gICAgICAgIHJldHVybiB0aGlzLmFkZE9uZUl0ZW0oKTtcclxuICAgIH0sXHJcblxyXG4gICAgLy/ojrflj5bmiYDmnInnmoTmnaHnm65cclxuICAgIGdldEFsbEl0ZW1zIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLm5vZGUuY2hpbGRyZW47XHJcbiAgICB9LFxyXG5cclxuICAgIC8v5riF55CG5p2h55uu77yI5LuOMOW8gOWni++8jOa4heeQhmluZGV45LmL5ZCO55qE5p2h55uuLCDkuI3ljIXmi6xpbmRleO+8iVxyXG4gICAgY2xlYXJJdGVtcyA6IGZ1bmN0aW9uIChpbmRleCkge1xyXG4gICAgICAgIHZhciBpdGVtcyA9IHRoaXMubm9kZS5jaGlsZHJlbjtcclxuICAgICAgICBmb3IodmFyIGkgPSBpdGVtcy5sZW5ndGgtMTsgaSA+IGluZGV4OyBpIC0tKXtcclxuICAgICAgICAgICAgaWYoaXRlbXNbaV0pIHRoaXMuX3JlbW92ZVBvb2xOb2RlKGl0ZW1zW2ldKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIC8v55u05o6l6K6+572u5a655Zmo55qE5aSn5bCPXHJcbiAgICBzZXRDb250ZW50U2l6ZSA6IGZ1bmN0aW9uICh3aWR0aCwgaGVpZ2h0KSB7XHJcbiAgICAgICAgaWYod2lkdGgpIHRoaXMubm9kZS53aWR0aCA9IHdpZHRoO1xyXG4gICAgICAgIGlmKGhlaWdodCkgdGhpcy5ub2RlLmhlaWdodCA9IGhlaWdodDtcclxuICAgIH0sXHJcblxyXG4gICAgLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cclxuICAgIC8v6I635Y+W5LiA5Liq5p2h55uuXHJcbiAgICBfZ2V0T25lUG9vbE5vZGUgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYoIXRoaXMuX2l0ZW1QcmVmYWIpIHJldHVybiBudWxsO1xyXG4gICAgICAgIGlmKCF0aGlzLl9wb29sKSB0aGlzLl9wb29sID0gbmV3IGNjLk5vZGVQb29sKCdPYmpfZGVhbFNjcm9sbCcrdGhpcy5faXRlbVByZWZhYi5uYW1lKTtcclxuXHJcbiAgICAgICAgdmFyIGNOb2RlID0gdGhpcy5fcG9vbC5nZXQoKTtcclxuICAgICAgICBpZighY05vZGUpe1xyXG4gICAgICAgICAgICBjTm9kZSA9IGNjLmluc3RhbnRpYXRlKHRoaXMuX2l0ZW1QcmVmYWIpO1xyXG4gICAgICAgICAgICBpZighdGhpcy5faXRlbUhlaWdodCkgdGhpcy5faXRlbUhlaWdodCA9IGNOb2RlLmhlaWdodDtcclxuICAgICAgICAgICAgaWYoIXRoaXMuX2l0ZW1XaWR0aCkgdGhpcy5faXRlbVdpZHRoID0gY05vZGUud2lkdGg7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNOb2RlLnBhcmVudCA9IHRoaXMubm9kZTtcclxuICAgICAgICBjTm9kZS5hY3RpdmUgPSB0cnVlO1xyXG4gICAgICAgIHJldHVybiBjTm9kZTtcclxuICAgIH0sXHJcblxyXG4gICAgX3JlbW92ZVBvb2xOb2RlIDogZnVuY3Rpb24gKGNOb2RlKSB7XHJcbiAgICAgICAgLy8gY05vZGUuYWN0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5fcG9vbC5wdXQoY05vZGUpO1xyXG5cclxuICAgICAgICB0aGlzLl9zaG93SXRlbU51bSAtPSAxO1xyXG4gICAgICAgIHRoaXMuX3Jlc2V0Q29udGFpbmVyU2l6ZSgpO1xyXG4gICAgfSxcclxuXHJcbiAgICBfcmVzZXRDb250YWluZXJTaXplIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBjb250ZW50SCwgY29udGVudFc7XHJcbiAgICAgICAgc3dpdGNoICh0aGlzLl9zY3JvbGxUeXBlKXtcclxuICAgICAgICAgICAgY2FzZSBHX1RZUEUuc2Nyb2xsVHlwZS52ZXJ0aWNhbDpcclxuICAgICAgICAgICAgICAgIGNvbnRlbnRXID0gdGhpcy5faXRlbVdpZHRoICsgdGhpcy5faXRlbU9mZlg7XHJcbiAgICAgICAgICAgICAgICBjb250ZW50SCA9IHRoaXMuX3Nob3dJdGVtTnVtICogKHRoaXMuX2l0ZW1IZWlnaHQgKyB0aGlzLl9pdGVtT2ZmWSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBHX1RZUEUuc2Nyb2xsVHlwZS5ob3Jpem9udGFsOlxyXG4gICAgICAgICAgICAgICAgY29udGVudFcgPSB0aGlzLl9zaG93SXRlbU51bSAqICh0aGlzLl9pdGVtV2lkdGggKyB0aGlzLl9pdGVtT2ZmWCk7XHJcbiAgICAgICAgICAgICAgICBjb250ZW50SCA9IHRoaXMuX2l0ZW1IZWlnaHQgKyB0aGlzLl9pdGVtT2ZmWTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIEdfVFlQRS5zY3JvbGxUeXBlLmJhZzpcclxuICAgICAgICAgICAgICAgIGNvbnRlbnRXID0gdGhpcy5fbGluZU51bSAqICh0aGlzLl9pdGVtV2lkdGggKyB0aGlzLl9pdGVtT2ZmWCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgcm93TnVtID0gTWF0aC5jZWlsKHRoaXMuX3Nob3dJdGVtTnVtL3RoaXMuX2xpbmVOdW0pO1xyXG4gICAgICAgICAgICAgICAgY29udGVudEggPSByb3dOdW0gKiAodGhpcy5faXRlbUhlaWdodCArIHRoaXMuX2l0ZW1PZmZZKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMubm9kZS5oZWlnaHQgPSBjb250ZW50SDtcclxuICAgICAgICB0aGlzLm5vZGUud2lkdGggPSBjb250ZW50VztcclxuICAgIH0sXHJcblxyXG4gICAgLy/ojrflj5blvZPliY3lt7Lnu4/mmL7npLrnmoTmnaHnm67mlbDph49cclxuICAgIGdldFNob3dJdGVtTnVtIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9zaG93SXRlbU51bVxyXG4gICAgfSxcclxuXHJcbiAgICAvL+iOt+WPlnNjcm9sbHZpZXfnu4Tku7ZcclxuICAgIGdldFNjcm9sbFZpZXcgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubm9kZS5wYXJlbnQucGFyZW50LmdldENvbXBvbmVudChjYy5TY3JvbGxWaWV3KVxyXG4gICAgfSxcclxuXHJcbiAgICAvL+azqOWGjOa7muWKqOWIsOW6lemDqOeahOS6i+S7tlxyXG4gICAgcmVnaXN0ZXJCb3R0b21FdmVudCA6IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICB9LFxyXG5cclxuICAgIC8v6I635Y+W5LiL5LiA6aG155qE5pu05paw5L+h5oGvXHJcbiAgICBnZXROZXh0UGFnZUxpc3QgOiBmdW5jdGlvbiAoZGF0YUxpc3QsIGludGVydmFsTnVtKSB7XHJcbiAgICAgICAgcmV0dXJuIGRhdGFMaXN0LnNwbGljZSgwLGludGVydmFsTnVtKTtcclxuICAgIH0sXHJcblxyXG4gICAgLy/moLnmja7mlbDph4/ojrflj5bpobXmlbAg5LuOMeW8gOWni1xyXG4gICAgZ2V0UGFnZU5vQnlOdW0gOiBmdW5jdGlvbiAoaXRlbU51bSwgZmlyc3ROdW0pIHtcclxuICAgICAgICB2YXIgcGFnZU5vID0gTWF0aC5mbG9vcihpdGVtTnVtIC8gZmlyc3ROdW0pO1xyXG4gICAgICAgIGlmKGl0ZW1OdW0gPiBwYWdlTm8gKiBmaXJzdE51bSl7XHJcbiAgICAgICAgICAgIHBhZ2VObyArPSAxO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcGFnZU5vXHJcbiAgICB9LFxyXG5cclxuICAgIHNjcm9sbFRvVXAgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5nZXRTY3JvbGxWaWV3KCkuc2Nyb2xsVG9Ub3AoMC4yKTtcclxuICAgIH0sXHJcblxyXG4gICAgb25EZXN0cm95IDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmKHRoaXMuX3Bvb2wpIHRoaXMuX3Bvb2wuY2xlYXIoKTtcclxuICAgIH0sXHJcblxyXG4gICAgLy8gY2FsbGVkIGV2ZXJ5IGZyYW1lLCB1bmNvbW1lbnQgdGhpcyBmdW5jdGlvbiB0byBhY3RpdmF0ZSB1cGRhdGUgY2FsbGJhY2tcclxuICAgIC8vIHVwZGF0ZTogZnVuY3Rpb24gKGR0KSB7XHJcblxyXG4gICAgLy8gfSxcclxufSk7XHJcbiIsIi8v5LiK5bqE5YiX6KGo5bqE5a625p2h55uuXHJcblxyXG5jYy5DbGFzcyh7XHJcbiAgICBleHRlbmRzOiBjYy5Db21wb25lbnQsXHJcblxyXG4gICAgcHJvcGVydGllczoge1xyXG4gICAgICAgIF9kZWFsZXJXb3JkIDogbnVsbCwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5bqE5a2X5Yqo55S75pWI5p6cXHJcblxyXG4gICAgICAgIG5vZGVfaGVhZCA6IHtcclxuICAgICAgICAgICAgZGVmYXVsdCA6IG51bGwsXHJcbiAgICAgICAgICAgIHR5cGUgOiBjYy5Ob2RlLFxyXG4gICAgICAgICAgICBkaXNwbGF5TmFtZSA6ICflpLTlg48nXHJcbiAgICAgICAgfSxcclxuICAgICAgICBsYWJlbF9uYW1lIDoge1xyXG4gICAgICAgICAgICBkZWZhdWx0IDogbnVsbCxcclxuICAgICAgICAgICAgdHlwZSA6IGNjLkxhYmVsLFxyXG4gICAgICAgICAgICBkaXNwbGF5TmFtZSA6ICflkI3lrZcnXHJcbiAgICAgICAgfSxcclxuICAgICAgICBsYWJlbF9nb2xkIDoge1xyXG4gICAgICAgICAgICBkZWZhdWx0IDogbnVsbCxcclxuICAgICAgICAgICAgdHlwZSA6IGNjLkxhYmVsLFxyXG4gICAgICAgICAgICBkaXNwbGF5TmFtZSA6ICfph5HluIEnXHJcbiAgICAgICAgfSxcclxuICAgICAgICBwcmVmYWJfZGVhbGVyQW5pIDoge1xyXG4gICAgICAgICAgICBkZWZhdWx0IDogbnVsbCxcclxuICAgICAgICAgICAgdHlwZSA6IGNjLlByZWZhYixcclxuICAgICAgICAgICAgZGlzcGxheU5hbWUgOiAn5bqE5a2X5Yqo55S7J1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgLy8gdXNlIHRoaXMgZm9yIGluaXRpYWxpemF0aW9uXHJcbiAgICBvbkxvYWQ6IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICB9LFxyXG5cclxuICAgIHNldERhdGEgOiBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgIEdfVE9PTC5zZXRIZWFkSW1nKHRoaXMubm9kZV9oZWFkLCBkYXRhLmhlYWRJbWcpO1xyXG4gICAgICAgIHRoaXMuX3NldFBsYXllck5hbWUoZGF0YS5uYW1lKTtcclxuICAgICAgICB0aGlzLl9zZXRHb2xkVmFsdWUoZGF0YS5nb2xkKTtcclxuICAgICAgICBpZihkYXRhLmlzRGVhbGVyKSB0aGlzLl9hZGREZWFsZXJXb3JkKCk7XHJcbiAgICAgICAgZWxzZSB0aGlzLl9kZWxEZWFsZXJXb3JkKClcclxuICAgIH0sXHJcblxyXG4gICAgX3NldFBsYXllck5hbWUgOiBmdW5jdGlvbiAocGxheWVyTmFtZSkge1xyXG4gICAgICAgIGlmKCFwbGF5ZXJOYW1lKSBwbGF5ZXJOYW1lID0gJyc7XHJcbiAgICAgICAgZWxzZSBwbGF5ZXJOYW1lID0gR19UT09MLmdldE5hbWVMaW1pdChwbGF5ZXJOYW1lKTtcclxuICAgICAgICB0aGlzLmxhYmVsX25hbWUuc3RyaW5nID0gcGxheWVyTmFtZTtcclxuICAgIH0sXHJcbiAgICBfc2V0R29sZFZhbHVlIDogZnVuY3Rpb24gKHZhbHVlKSB7XHJcbiAgICAgICAgaWYoIXZhbHVlKSB2YWx1ZSA9IDA7XHJcbiAgICAgICAgdGhpcy5sYWJlbF9nb2xkLnN0cmluZyA9IEdfVE9PTC5jaGFuZ2VNb25leSh2YWx1ZSk7O1xyXG4gICAgfSxcclxuXHJcbiAgICAvL+a3u+WKoOW6hOWtl+WKqOeUu1xyXG4gICAgX2FkZERlYWxlcldvcmQgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5fZGVhbGVyV29yZCA9IGNjLmluc3RhbnRpYXRlKHRoaXMucHJlZmFiX2RlYWxlckFuaSk7XHJcbiAgICAgICAgdGhpcy5fZGVhbGVyV29yZC5wYXJlbnQgPSB0aGlzLm5vZGU7XHJcbiAgICAgICAgdGhpcy5fZGVhbGVyV29yZC5wb3NpdGlvbiA9IGNjLnAoLXRoaXMubm9kZS53aWR0aCowLjA1LCAtdGhpcy5ub2RlLmhlaWdodCowLjUpO1xyXG4gICAgfSxcclxuXHJcbiAgICAvL+WIoOmZpOW6hOWtl+WKqOeUu1xyXG4gICAgX2RlbERlYWxlcldvcmQgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYodGhpcy5fZGVhbGVyV29yZCl7XHJcbiAgICAgICAgICAgIHRoaXMuX2RlYWxlcldvcmQuZGVzdHJveSgpO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgLy8gY2FsbGVkIGV2ZXJ5IGZyYW1lLCB1bmNvbW1lbnQgdGhpcyBmdW5jdGlvbiB0byBhY3RpdmF0ZSB1cGRhdGUgY2FsbGJhY2tcclxuICAgIC8vIHVwZGF0ZTogZnVuY3Rpb24gKGR0KSB7XHJcblxyXG4gICAgLy8gfSxcclxufSk7XHJcbiIsIi8v5LiK5bqE6L+b5bqm5p2h5aSE55CGXHJcblxyXG5cclxuY2MuQ2xhc3Moe1xyXG4gICAgZXh0ZW5kczogY2MuQ29tcG9uZW50LFxyXG5cclxuICAgIHByb3BlcnRpZXM6IHtcclxuICAgICAgICBfc2xpZGVyQ29tcCA6IG51bGwsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/ov5vluqbmnaHnu4Tku7ZcclxuICAgICAgICBfdWlfbW92ZU51bSA6IG51bGwsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/np7vliqjnmoTmlbDlrZdcclxuICAgICAgICBfbGFiZWxfbW92ZU51bSA6IG51bGwsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/np7vliqjnmoTmlbDlrZdcclxuICAgICAgICBfb25lV29yZFdpZHRoIDogbnVsbCwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/kuIDkuKrmlbDlrZfnmoTplb/luqZcclxuICAgICAgICBfb2ZmTnVtIDogbnVsbCwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v6Ze06ZqU5pWw6aKdXHJcbiAgICAgICAgX2N1ck1vdmVOdW0gOiBudWxsLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5b2T5YmN55qE56e75Yqo5Yiw55qE5pWw6aKdXHJcbiAgICAgICAgX2hhbmRsZU5vZGUgOiBudWxsLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5ruR5Yqo55qE54K5XHJcbiAgICAgICAgX2lkbGVNb25leSA6IG51bGwsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+epuumXsueahOi1hOmHke+8jOWmguaenOacieWImeWPr+S7peWinuWkp+S4iuW6hOmHkeminVxyXG5cclxuICAgICAgICBub2RlX2xpZ2h0TGluZSA6IHtcclxuICAgICAgICAgICAgZGVmYXVsdCA6IG51bGwsXHJcbiAgICAgICAgICAgIHR5cGUgOiBjYy5Ob2RlLFxyXG4gICAgICAgICAgICBkaXNwbGF5TmFtZSA6ICfov5vluqbmnaEnXHJcbiAgICAgICAgfSxcclxuICAgICAgICBub2RlX3RvdWNoTGltaXQgOiB7XHJcbiAgICAgICAgICAgIGRlZmF1bHQgOiBudWxsLFxyXG4gICAgICAgICAgICB0eXBlIDogY2MuTm9kZSxcclxuICAgICAgICAgICAgZGlzcGxheU5hbWUgOiAn6L+b5bqm5p2h6Kem5pG45ZCe5Zms5bGCJ1xyXG4gICAgICAgIH0sXHJcbiAgICB9LFxyXG5cclxuICAgIC8vIHVzZSB0aGlzIGZvciBpbml0aWFsaXphdGlvblxyXG4gICAgb25Mb2FkOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5fc2xpZGVyQ29tcCA9IHRoaXMubm9kZS5nZXRDb21wb25lbnQoY2MuU2xpZGVyKTtcclxuXHJcbiAgICAgICAgdGhpcy5fYmFzZVdvcmROdW0gPSA0LjU7XHJcbiAgICAgICAgdGhpcy5fdGltZV9udW1IaWRlID0gMjtcclxuXHJcbiAgICAgICAgdGhpcy5fYWRkU2xpZGVyRXZlbnQoKTtcclxuICAgICAgICB0aGlzLl9pbml0TW92ZU51bSgpO1xyXG4gICAgICAgIHRoaXMuX3Jlc2V0TGlnaHRMaW5lKCk7XHJcbiAgICB9LFxyXG4gICAgLy/lop7liqDnm5HlkKzkuovku7ZcclxuICAgIF9hZGRTbGlkZXJFdmVudCA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLl9zbGlkZXJDb21wLm5vZGUub24oJ3NsaWRlJywgdGhpcy5fc2xpZGVyTW92ZSwgdGhpcyk7XHJcbiAgICAgICAgdGhpcy5fc2xpZGVyQ29tcC5ub2RlLm9uKGNjLk5vZGUuRXZlbnRUeXBlLlRPVUNIX0VORCwgdGhpcy5zbGlkZXJFbmQsIHRoaXMpO1xyXG5cclxuICAgICAgICB2YXIgaGFuZGxlID0gdGhpcy5ub2RlLmdldENoaWxkQnlOYW1lKCdIYW5kbGUnKTtcclxuICAgICAgICBpZihoYW5kbGUpe1xyXG4gICAgICAgICAgICB2YXIgYnRuID0gaGFuZGxlLmdldENvbXBvbmVudChjYy5CdXR0b24pO1xyXG4gICAgICAgICAgICBoYW5kbGUub24oY2MuTm9kZS5FdmVudFR5cGUuVE9VQ0hfQ0FOQ0VMLCB0aGlzLnNsaWRlckVuZCwgdGhpcyk7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIC8v5Yid5aeL5YyW5Y+v5pON5L2c6IqC54K5XHJcbiAgICBfaW5pdE1vdmVOdW0gOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGhhbmRsZSA9IHRoaXMubm9kZS5nZXRDaGlsZEJ5TmFtZSgnSGFuZGxlJyk7XHJcbiAgICAgICAgaWYoaGFuZGxlLmNoaWxkcmVuLmxlbmd0aCA+IDApe1xyXG4gICAgICAgICAgICB0aGlzLl91aV9tb3ZlTnVtID0gaGFuZGxlLmNoaWxkcmVuWzBdO1xyXG4gICAgICAgICAgICB0aGlzLl9sYWJlbF9tb3ZlTnVtID0gdGhpcy5fdWlfbW92ZU51bS5jaGlsZHJlblswXS5nZXRDb21wb25lbnQoY2MuTGFiZWwpO1xyXG4gICAgICAgICAgICB0aGlzLl9vbmVXb3JkV2lkdGggPSB0aGlzLl91aV9tb3ZlTnVtLndpZHRoIC8gdGhpcy5fYmFzZVdvcmROdW07XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICAvL215R29sZDog6Ieq5bex5oul5pyJ55qE6YeR5biBOyBvZmZHb2xk77ya56e75Yqo6YeR5biB55qE5beu5YC877yMbWluTGltaXRHb2xk77ya5pyA5bCP6YeR5biB6ZmQ6aKdXHJcbiAgICBzZXREYXRhIDogZnVuY3Rpb24gKG15R29sZCwgb2ZmR29sZCwgbWluTGltaXRHb2xkKSB7XHJcbiAgICAgICAgaWYoIW15R29sZCkge1xyXG4gICAgICAgICAgICB0aGlzLl9zZXRUb3VjaExpbWl0KHRydWUpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuX3BsYXllckdvbGQgPSBteUdvbGQ7XHJcbiAgICAgICAgdGhpcy5fb2ZmTnVtID0gb2ZmR29sZDtcclxuICAgICAgICB0aGlzLl9taW5OdW0gPSBtaW5MaW1pdEdvbGQ7XHJcbiAgICAgICAgdGhpcy5faWRsZU1vbmV5ID0gdGhpcy5fcGxheWVyR29sZCAtIHRoaXMuX21pbk51bTtcclxuXHJcbiAgICAgICAgdmFyIGZpcnN0TnVtO1xyXG4gICAgICAgIGlmKHRoaXMuX3BsYXllckdvbGQgPCB0aGlzLl9taW5OdW0pe1xyXG4gICAgICAgICAgICAvL+mSseS4jei2s1xyXG4gICAgICAgICAgICB0aGlzLl9zZXRUb3VjaExpbWl0KHRydWUpO1xyXG4gICAgICAgICAgICBmaXJzdE51bSA9IHRoaXMuX21pbk51bTtcclxuICAgICAgICAgICAgdGhpcy5fc2V0R29sZFByb2dyZXNzKDApXHJcbiAgICAgICAgfWVsc2UgaWYodGhpcy5fcGxheWVyR29sZCA8ICh0aGlzLl9taW5OdW0gKyB0aGlzLl9vZmZOdW0pKXtcclxuICAgICAgICAgICAgdGhpcy5fc2V0VG91Y2hMaW1pdCh0cnVlKTtcclxuICAgICAgICAgICAgdGhpcy5fc2V0R29sZFByb2dyZXNzKDEpXHJcbiAgICAgICAgICAgIHRoaXMuX3Jlc2V0TGlnaHRMaW5lKCk7XHJcbiAgICAgICAgICAgIGZpcnN0TnVtID0gdGhpcy5fbWluTnVtO1xyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICB0aGlzLl9zZXRUb3VjaExpbWl0KGZhbHNlKTtcclxuICAgICAgICAgICAgZmlyc3ROdW0gPSB0aGlzLl9taW5OdW07XHJcbiAgICAgICAgICAgIHRoaXMuX3NldEdvbGRQcm9ncmVzcygwKVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLl9zZXRVSU1vdmVOdW0oZmlyc3ROdW0pO1xyXG4gICAgICAgIHRoaXMuX3NldE1vdmVOdW1TaG93KHRydWUpO1xyXG4gICAgICAgIHRoaXMuX2lzU2hvdyA9IHRydWU7XHJcbiAgICB9LFxyXG5cclxuICAgIC8v56e75Yqo5Zue6LCD77yM5aaC5p6c6L+b5bqm5p2h5pyJ56e75Yqo77yM5YiZ6L+Z6YeM5Lya6KKr6LCD55SoXHJcbiAgICBfc2xpZGVyTW92ZSA6IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgIC8vY29uc29sZS5sb2coZXZlbnQpXHJcbiAgICAgICAgdGhpcy5fcmVzZXRMaWdodExpbmUoKTtcclxuICAgICAgICAvL+aYvuekuuaVsOWAvFxyXG4gICAgICAgIHZhciBudW0gPSB0aGlzLl9pZGxlTW9uZXkgKiB0aGlzLl9zbGlkZXJDb21wLnByb2dyZXNzO1xyXG4gICAgICAgIHZhciBjaGFuZ2VOdW0gPSBNYXRoLmZsb29yKG51bS90aGlzLl9vZmZOdW0pKnRoaXMuX29mZk51bTtcclxuICAgICAgICB0aGlzLl9zZXRVSU1vdmVOdW0oY2hhbmdlTnVtK3RoaXMuX21pbk51bSk7XHJcblxyXG4gICAgICAgIHRoaXMuX3NldE1vdmVOdW1TaG93KHRydWUpO1xyXG4gICAgfSxcclxuICAgIHNsaWRlckVuZCA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLl9hZGRUaW1lSGlkZSgpO1xyXG4gICAgfSxcclxuXHJcbiAgICAvL+iuvue9rui/m+W6plxyXG4gICAgX3NldEdvbGRQcm9ncmVzcyA6IGZ1bmN0aW9uICh2YWx1ZSkge1xyXG4gICAgICAgIHRoaXMuX3NsaWRlckNvbXAucHJvZ3Jlc3MgPSB2YWx1ZTtcclxuICAgICAgICB0aGlzLl9yZXNldExpZ2h0TGluZSgpO1xyXG4gICAgfSxcclxuXHJcbiAgICAvL+iuvue9rui/m+W6puadoea7keWKqOeahOihqOeOsFxyXG4gICAgX3Jlc2V0TGlnaHRMaW5lIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMubm9kZV9saWdodExpbmUud2lkdGggPSB0aGlzLm5vZGUud2lkdGgqdGhpcy5fc2xpZGVyQ29tcC5wcm9ncmVzcztcclxuICAgIH0sXHJcblxyXG4gICAgLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT3mu5HliqjngrnkuIrnmoTmlbDlrZfmmL7npLpcclxuXHJcbiAgICAvL+aYvuekuuenu+WKqOWcqOi/m+W6puadoeS4iueahOaVsOWAvFxyXG4gICAgX3NldFVJTW92ZU51bSA6IGZ1bmN0aW9uIChudW0pIHtcclxuICAgICAgICB0aGlzLl9jdXJNb3ZlTnVtID0gbnVtO1xyXG4gICAgICAgIG51bSArPSAnJztcclxuICAgICAgICB2YXIgbGVuID0gbnVtLmxlbmd0aDtcclxuICAgICAgICB0aGlzLl91aV9tb3ZlTnVtLndpZHRoID0gbGVuICogdGhpcy5fb25lV29yZFdpZHRoXHJcbiAgICAgICAgdGhpcy5fbGFiZWxfbW92ZU51bS5zdHJpbmcgPSBudW07XHJcblxyXG4gICAgICAgIC8vdGhpcy5fdWlfbW92ZU51bS54ID0gdGhpcy5faGFuZGxlTm9kZS54O1xyXG4gICAgfSxcclxuXHJcbiAgICAvL+iOt+WPlumAieaLqeaVsOWAvFxyXG4gICAgZ2V0TW92ZU51bSA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fY3VyTW92ZU51bTtcclxuICAgIH0sXHJcblxyXG4gICAgLy/mjqfliLbov5vluqbmnaHkuIrpnaLnmoTmlbDlgLznmoTmmL7pmpBcclxuICAgIF9zZXRNb3ZlTnVtU2hvdyA6IGZ1bmN0aW9uIChpc1Nob3cpIHtcclxuICAgICAgICBpZih0aGlzLl91aV9tb3ZlTnVtKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3VpX21vdmVOdW0uc3RvcEFsbEFjdGlvbnMoKTtcclxuICAgICAgICAgICAgaWYoaXNTaG93KXtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3VpX21vdmVOdW0ub3BhY2l0eSA9IDI1NTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3VpX21vdmVOdW0uYWN0aXZlID0gdHJ1ZTtcclxuICAgICAgICAgICAgfWVsc2UgdGhpcy5fdWlfbW92ZU51bS5hY3RpdmUgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIF9hZGRUaW1lSGlkZSA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZih0aGlzLl91aV9tb3ZlTnVtKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3VpX21vdmVOdW0uc3RvcEFsbEFjdGlvbnMoKTtcclxuICAgICAgICAgICAgdGhpcy5fdWlfbW92ZU51bS5ydW5BY3Rpb24oY2Muc2VxdWVuY2UoY2MuZmFkZU91dCh0aGlzLl90aW1lX251bUhpZGUpLCBjYy5jYWxsRnVuYyhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9zZXRNb3ZlTnVtU2hvdyhmYWxzZSk7XHJcbiAgICAgICAgICAgIH0sIHRoaXMpKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICAvLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cclxuICAgIF9zZXRUb3VjaExpbWl0IDogZnVuY3Rpb24gKGlzTGltaXQpIHtcclxuICAgICAgICBpZiAoaXNMaW1pdCkge1xyXG4gICAgICAgICAgICB0aGlzLm5vZGVfdG91Y2hMaW1pdC5hY3RpdmUgPSB0cnVlO1xyXG4gICAgICAgICAgICB0aGlzLm5vZGVfdG91Y2hMaW1pdC5vbihjYy5Ob2RlLkV2ZW50VHlwZS5UT1VDSF9TVEFSVCwgdGhpcy5fb25DbGlja19Ub3VjaCwgdGhpcyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5ub2RlX3RvdWNoTGltaXQub2ZmKGNjLk5vZGUuRXZlbnRUeXBlLlRPVUNIX1NUQVJULCB0aGlzLl9vbkNsaWNrX1RvdWNoLCB0aGlzKTtcclxuICAgICAgICAgICAgdGhpcy5ub2RlX3RvdWNoTGltaXQuYWN0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIF9vbkNsaWNrX1RvdWNoIDogZnVuY3Rpb24gKCkge1xyXG4gICAgfSxcclxuXHJcbiAgICAvLyBjYWxsZWQgZXZlcnkgZnJhbWUsIHVuY29tbWVudCB0aGlzIGZ1bmN0aW9uIHRvIGFjdGl2YXRlIHVwZGF0ZSBjYWxsYmFja1xyXG4gICAgLy8gdXBkYXRlOiBmdW5jdGlvbiAoZHQpIHtcclxuXHJcbiAgICAvLyB9LFxyXG59KTtcclxuIiwiLy/luoTlrrbluoTlrZfnibnmlYhcclxuY2MuQ2xhc3Moe1xyXG4gICAgZXh0ZW5kczogY2MuQ29tcG9uZW50LFxyXG5cclxuICAgIHByb3BlcnRpZXM6IHtcclxuICAgICAgICBfZGVhbGVyV29yZEFuaSA6IG51bGwsLy/oioLngrnpqqjpqrzliqjnlLtcclxuICAgIH0sXHJcblxyXG4gICAgLy8gdXNlIHRoaXMgZm9yIGluaXRpYWxpemF0aW9uXHJcbiAgICBvbkxvYWQ6IGZ1bmN0aW9uICgpIHt9LFxyXG5cclxuICAgIC8v5pKt5pS+5bqE5a2X54m55pWI5Yqo55S7XHJcbiAgICBwbGF5RGVhbGVyV29yZEFuaSA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAoIXRoaXMuX2RlYWxlcldvcmRBbmkpIHtcclxuICAgICAgICAgICAgdGhpcy5fZGVhbGVyV29yZEFuaSA9IHRoaXMubm9kZS5nZXRDb21wb25lbnQoZHJhZ29uQm9uZXMuQXJtYXR1cmVEaXNwbGF5KTtcclxuICAgICAgICAgICAgdGhpcy5fZGVhbGVyV29yZEFuaS5hZGRFdmVudExpc3RlbmVyKGRyYWdvbkJvbmVzLkV2ZW50T2JqZWN0LkNPTVBMRVRFLCB0aGlzLl9wbGF5RGVhbGVyV29yZEVmZmVjdEFuaSwgdGhpcyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMubm9kZS5hY3RpdmUgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuX2RlYWxlcldvcmRBbmkucGxheUFuaW1hdGlvbignemh1YW5nX21hcmtfMicsIDEpO1xyXG4gICAgfSxcclxuXHJcbiAgICAvL+W+queOr+aSreaUvueahOW6hOWtl+eJueaViFxyXG4gICAgX3BsYXlEZWFsZXJXb3JkRWZmZWN0QW5pIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuX2RlYWxlcldvcmRBbmkucGxheUFuaW1hdGlvbignemh1YW5nX21hcmtfMScsIDApO1xyXG4gICAgfSxcclxuXHJcbiAgICAvL+a4heeQhuW6hOWtl+eJueaViOWKqOeUu1xyXG4gICAgY2xlYXJEZWFsZXJXb3JkQW5pIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmKHRoaXMubm9kZSkgdGhpcy5ub2RlLmFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgfSxcclxuICAgIC8vIGNhbGxlZCBldmVyeSBmcmFtZSwgdW5jb21tZW50IHRoaXMgZnVuY3Rpb24gdG8gYWN0aXZhdGUgdXBkYXRlIGNhbGxiYWNrXHJcbiAgICAvLyB1cGRhdGU6IGZ1bmN0aW9uIChkdCkge1xyXG5cclxuICAgIC8vIH0sXHJcbn0pO1xyXG4iLCIvL+i0puebruadoeebrlxyXG5jYy5DbGFzcyh7XHJcbiAgICBleHRlbmRzOiBjYy5Db21wb25lbnQsXHJcblxyXG4gICAgcHJvcGVydGllczoge1xyXG4gICAgICAgIGxhYmVsX3RpbWUgOiB7XHJcbiAgICAgICAgICAgIGRlZmF1bHQgOiBudWxsLFxyXG4gICAgICAgICAgICB0eXBlIDogY2MuTGFiZWwsXHJcbiAgICAgICAgICAgIGRpc3BsYXlOYW1lIDogJ+WFheWAvOaXtumXtCdcclxuICAgICAgICB9LFxyXG4gICAgICAgIGxhYmVsX3R5cGUgOiB7XHJcbiAgICAgICAgICAgIGRlZmF1bHQgOiBudWxsLFxyXG4gICAgICAgICAgICB0eXBlIDogY2MuTGFiZWwsXHJcbiAgICAgICAgICAgIGRpc3BsYXlOYW1lIDogJ+aTjeS9nOexu+WeiydcclxuICAgICAgICB9LFxyXG4gICAgICAgIGxhYmVsX21vbmV5IDoge1xyXG4gICAgICAgICAgICBkZWZhdWx0IDogbnVsbCxcclxuICAgICAgICAgICAgdHlwZSA6IGNjLkxhYmVsLFxyXG4gICAgICAgICAgICBkaXNwbGF5TmFtZSA6ICfph5Hpop0nXHJcbiAgICAgICAgfSxcclxuICAgICAgICBsYWJlbF9iYWxhbmNlIDoge1xyXG4gICAgICAgICAgICBkZWZhdWx0IDogbnVsbCxcclxuICAgICAgICAgICAgdHlwZSA6IGNjLkxhYmVsLFxyXG4gICAgICAgICAgICBkaXNwbGF5TmFtZSA6ICfkvZnpop0nXHJcbiAgICAgICAgfSxcclxuICAgIH0sXHJcblxyXG4gICAgLy8gdXNlIHRoaXMgZm9yIGluaXRpYWxpemF0aW9uXHJcbiAgICBvbkxvYWQ6IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICB9LFxyXG5cclxuICAgIHNldERhdGEgOiBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgIHRoaXMuX3NldFRpbWUoZGF0YS5jb21wbGV0aW9udGltZSk7XHJcbiAgICAgICAgdGhpcy5fc2V0VHlwZShkYXRhLnRyYW5zYWN0aW9udHlwZSk7XHJcbiAgICAgICAgdGhpcy5fc2V0Q2hhbmdlTW9uZXkoZGF0YS50cmFuc2FjdGlvbm1vbmV5KTtcclxuICAgICAgICB0aGlzLl9zZXRCYWxhbmNlKGRhdGEuYmFsYW5jZSk7XHJcbiAgICB9LFxyXG5cclxuICAgIF9zZXRUeXBlIDogZnVuY3Rpb24gKHR5cGUpIHtcclxuICAgICAgICB0aGlzLl9yZWNvcmRGaXJzdENvbG9yKHRoaXMubGFiZWxfdHlwZS5ub2RlKTtcclxuICAgICAgICB2YXIgY3VyQ29sb3IsIHN0ck51bTtcclxuICAgICAgICBpZiAodHlwZSAhPSAnREVQT1NJVCcpIHsvL+minOiJsuS4uue6ouiJslxyXG4gICAgICAgICAgICBjdXJDb2xvciA9IHRoaXMuX2dldEZvbnRDb2xvcigpOztcclxuICAgICAgICAgICAgc3RyTnVtID0gR19DSElORVNFLnR1cm5PdXQ7Ly/ovazlh7pcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBjdXJDb2xvciA9IHRoaXMuX2dldEZpcnN0Q29sb3IodGhpcy5sYWJlbF90eXBlLm5vZGUpO1xyXG4gICAgICAgICAgICBzdHJOdW0gPSBHX0NISU5FU0UucmVjaGFyZ2U7Ly/ovazlh7pcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5sYWJlbF90eXBlLm5vZGUuY29sb3IgPSBjdXJDb2xvcjtcclxuICAgICAgICB0aGlzLmxhYmVsX3R5cGUuc3RyaW5nID0gc3RyTnVtOy8v5YWF5YC8XHJcbiAgICB9LFxyXG5cclxuICAgIF9zZXRDaGFuZ2VNb25leSA6IGZ1bmN0aW9uIChtb25leSkge1xyXG4gICAgICAgIHRoaXMuX3JlY29yZEZpcnN0Q29sb3IodGhpcy5sYWJlbF9tb25leS5ub2RlKTtcclxuICAgICAgICB2YXIgY3VyQ29sb3I7XHJcbiAgICAgICAgaWYgKG1vbmV5IDwgMCkgey8v6aKc6Imy5Li657qi6ImyXHJcbiAgICAgICAgICAgIGN1ckNvbG9yID0gdGhpcy5fZ2V0Rm9udENvbG9yKCk7XHJcbiAgICAgICAgfWVsc2Uge1xyXG4gICAgICAgICAgICBjdXJDb2xvciA9IHRoaXMuX2dldEZpcnN0Q29sb3IodGhpcy5sYWJlbF9tb25leS5ub2RlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5sYWJlbF9tb25leS5ub2RlLmNvbG9yID0gY3VyQ29sb3I7XHJcbiAgICAgICAgdGhpcy5sYWJlbF9tb25leS5zdHJpbmcgPSBtb25leTtcclxuICAgIH0sXHJcblxyXG4gICAgX3NldFRpbWUgOiBmdW5jdGlvbiAodGltZVN0cikge1xyXG4gICAgICAgIHRoaXMubGFiZWxfdGltZS5zdHJpbmcgPSB0aW1lU3RyO1xyXG4gICAgfSxcclxuXHJcbiAgICBfc2V0QmFsYW5jZSA6IGZ1bmN0aW9uICh2YWx1ZSkge1xyXG4gICAgICAgIGlmKCF2YWx1ZSkgdmFsdWUgPSAwO1xyXG4gICAgICAgIHRoaXMubGFiZWxfYmFsYW5jZS5zdHJpbmcgPSB2YWx1ZTtcclxuICAgIH0sXHJcblxyXG4gICAgLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cclxuICAgIF9yZWNvcmRGaXJzdENvbG9yIDogZnVuY3Rpb24gKG5vZGUpIHtcclxuICAgICAgICBpZihub2RlLl9maXJzdENvbG9yID09PSB1bmRlZmluZWQpe1xyXG4gICAgICAgICAgICBub2RlLl9maXJzdENvbG9yID0gbm9kZS5jb2xvcjtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgX2dldEZpcnN0Q29sb3IgOiBmdW5jdGlvbiAobm9kZSkge1xyXG4gICAgICAgIHJldHVybiBub2RlLl9maXJzdENvbG9yID8gbm9kZS5fZmlyc3RDb2xvciA6IG5vZGUuY29sb3JcclxuICAgIH0sXHJcblxyXG4gICAgX2dldEZvbnRDb2xvciA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZighdGhpcy5fZm9udHNDb2xvcil7XHJcbiAgICAgICAgICAgIHRoaXMuX2ZvbnRzQ29sb3IgPSBuZXcgY2MuQ29sb3IoMjU1LCAwLCAwKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2ZvbnRzQ29sb3JcclxuICAgIH0sXHJcblxyXG4gICAgLy8gY2FsbGVkIGV2ZXJ5IGZyYW1lLCB1bmNvbW1lbnQgdGhpcyBmdW5jdGlvbiB0byBhY3RpdmF0ZSB1cGRhdGUgY2FsbGJhY2tcclxuICAgIC8vIHVwZGF0ZTogZnVuY3Rpb24gKGR0KSB7XHJcblxyXG4gICAgLy8gfSxcclxufSk7XHJcbiIsIi8v546p5a625YiX6KGo5p2h55uuXHJcbmNjLkNsYXNzKHtcclxuICAgIGV4dGVuZHM6IGNjLkNvbXBvbmVudCxcclxuXHJcbiAgICBwcm9wZXJ0aWVzOiB7XHJcbiAgICAgICAgbm9kZV9oZWFkIDoge1xyXG4gICAgICAgICAgICBkZWZhdWx0IDogbnVsbCxcclxuICAgICAgICAgICAgdHlwZSA6IGNjLk5vZGUsXHJcbiAgICAgICAgICAgIGRpc3BsYXlOYW1lIDogJ+WktOWDjydcclxuICAgICAgICB9LFxyXG4gICAgICAgIGxhYmVsX25hbWUgOiB7XHJcbiAgICAgICAgICAgIGRlZmF1bHQgOiBudWxsLFxyXG4gICAgICAgICAgICB0eXBlIDogY2MuTGFiZWwsXHJcbiAgICAgICAgICAgIGRpc3BsYXlOYW1lIDogJ+WQjeWtlydcclxuICAgICAgICB9LFxyXG4gICAgICAgIGxhYmVsX2dvbGQgOiB7XHJcbiAgICAgICAgICAgIGRlZmF1bHQgOiBudWxsLFxyXG4gICAgICAgICAgICB0eXBlIDogY2MuTGFiZWwsXHJcbiAgICAgICAgICAgIGRpc3BsYXlOYW1lIDogJ+mHkeW4gSdcclxuICAgICAgICB9LFxyXG5cclxuICAgIH0sXHJcblxyXG4gICAgLy8gdXNlIHRoaXMgZm9yIGluaXRpYWxpemF0aW9uXHJcbiAgICBvbkxvYWQ6IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICB9LFxyXG5cclxuICAgIHNldERhdGEgOiBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgIEdfVE9PTC5zZXRIZWFkSW1nKHRoaXMubm9kZV9oZWFkLCBkYXRhLmF2YXRhclVybCk7XHJcbiAgICAgICAgdGhpcy5fc2V0UGxheWVyTmFtZShkYXRhLm5pY2tuYW1lKTtcclxuICAgICAgICB0aGlzLl9zZXRHb2xkVmFsdWUoZGF0YS5jb2luKTtcclxuICAgIH0sXHJcblxyXG4gICAgX3NldFBsYXllck5hbWUgOiBmdW5jdGlvbiAocGxheWVyTmFtZSkge1xyXG4gICAgICAgIC8v546p5a625YiX6KGo546p5a625p2h55uu5ZCN56ew6ZmQ5Yi2MTDkuKrlrZfnrKZcclxuICAgICAgICBpZighcGxheWVyTmFtZSkgcGxheWVyTmFtZSA9ICcnO1xyXG4gICAgICAgIGVsc2UgcGxheWVyTmFtZSA9IEdfVE9PTC5nZXROYW1lTGltaXQocGxheWVyTmFtZSwgMTApO1xyXG4gICAgICAgIHRoaXMubGFiZWxfbmFtZS5zdHJpbmcgPSBwbGF5ZXJOYW1lO1xyXG4gICAgfSxcclxuICAgIF9zZXRHb2xkVmFsdWUgOiBmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgICBpZighdmFsdWUpIHZhbHVlID0gMDtcclxuICAgICAgICBlbHNlIHZhbHVlID0gR19UT09MLmNoYW5nZU1vbmV5KHZhbHVlKTtcclxuICAgICAgICB0aGlzLmxhYmVsX2dvbGQuc3RyaW5nID0gdmFsdWU7XHJcbiAgICB9LFxyXG5cclxuICAgIC8vIGNhbGxlZCBldmVyeSBmcmFtZSwgdW5jb21tZW50IHRoaXMgZnVuY3Rpb24gdG8gYWN0aXZhdGUgdXBkYXRlIGNhbGxiYWNrXHJcbiAgICAvLyB1cGRhdGU6IGZ1bmN0aW9uIChkdCkge1xyXG5cclxuICAgIC8vIH0sXHJcbn0pO1xyXG4iLCIvL+eOqeWutuiusOW9leafpeivoumihOWItuS9k1xyXG5jYy5DbGFzcyh7XHJcbiAgICBleHRlbmRzOiBjYy5Db21wb25lbnQsXHJcblxyXG4gICAgcHJvcGVydGllczoge1xyXG4gICAgICAgIGxhYmVsX3RpbWUgOiB7XHJcbiAgICAgICAgICAgIGRlZmF1bHQgOiBudWxsLFxyXG4gICAgICAgICAgICB0eXBlIDogY2MuTGFiZWwsXHJcbiAgICAgICAgICAgIGRpc3BsYXlOYW1lIDogJ+WvueWxgOaXtumXtCdcclxuICAgICAgICB9LFxyXG4gICAgICAgIGxhYmVsX3Jvb21UeXBlIDoge1xyXG4gICAgICAgICAgICBkZWZhdWx0IDogbnVsbCxcclxuICAgICAgICAgICAgdHlwZSA6IGNjLkxhYmVsLFxyXG4gICAgICAgICAgICBkaXNwbGF5TmFtZSA6ICfmiL/pl7TnsbvlnosnXHJcbiAgICAgICAgfSxcclxuICAgICAgICBsYWJlbF9yb29tTmFtZSA6IHtcclxuICAgICAgICAgICAgZGVmYXVsdCA6IG51bGwsXHJcbiAgICAgICAgICAgIHR5cGUgOiBjYy5MYWJlbCxcclxuICAgICAgICAgICAgZGlzcGxheU5hbWUgOiAn5oi/6Ze05ZCN56ewJ1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgbGFiZWxfYmV0IDoge1xyXG4gICAgICAgICAgICBkZWZhdWx0IDogbnVsbCxcclxuICAgICAgICAgICAgdHlwZSA6IGNjLkxhYmVsLFxyXG4gICAgICAgICAgICBkaXNwbGF5TmFtZSA6ICfmirzms6gnXHJcbiAgICAgICAgfSxcclxuICAgICAgICBsYWJlbF9yZXN1bHQgOiB7XHJcbiAgICAgICAgICAgIGRlZmF1bHQgOiBudWxsLFxyXG4gICAgICAgICAgICB0eXBlIDogY2MuTGFiZWwsXHJcbiAgICAgICAgICAgIGRpc3BsYXlOYW1lIDogJ+e7k+aenCdcclxuICAgICAgICB9LFxyXG4gICAgICAgIGxhYmVsX291dENvbWUgOiB7XHJcbiAgICAgICAgICAgIGRlZmF1bHQgOiBudWxsLFxyXG4gICAgICAgICAgICB0eXBlIDogY2MuTGFiZWwsXHJcbiAgICAgICAgICAgIGRpc3BsYXlOYW1lIDogJ+iDnOi0nydcclxuICAgICAgICB9LFxyXG5cclxuICAgIH0sXHJcblxyXG4gICAgLy8gdXNlIHRoaXMgZm9yIGluaXRpYWxpemF0aW9uXHJcbiAgICBvbkxvYWQ6IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICB9LFxyXG5cclxuICAgIHNldERhdGEgOiBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgIHRoaXMuX3NldFRpbWUoZGF0YS5jb25maXJtdGltZSk7XHJcbiAgICAgICAgdGhpcy5fc2V0Um9vbShkYXRhLmdhbWVtb2RlbG5hbWUsIGRhdGEuZ2FtZXJvb21uYW1lKTtcclxuICAgICAgICB0aGlzLl9zZXRCZXQoZGF0YS5lZmZlY3RpdmVhbW91bnQpO1xyXG4gICAgICAgIHRoaXMuX3NldFJlc3VsdChkYXRhLnByb2ZpdGFtb3VudCk7XHJcbiAgICAgICAgdGhpcy5fc2V0T3V0Q29tZShkYXRhLnByb2ZpdGFtb3VudCk7XHJcbiAgICB9LFxyXG5cclxuICAgIF9zZXRUaW1lIDogZnVuY3Rpb24gKHRpbWVTdHIpIHtcclxuICAgICAgICB0aGlzLmxhYmVsX3RpbWUuc3RyaW5nID0gdGltZVN0cjtcclxuICAgIH0sXHJcblxyXG4gICAgLy/miL/pl7TlkI3lrZfkuLrnuqLoibJcclxuICAgIF9zZXRSb29tIDogZnVuY3Rpb24gKGdhbWVNb2RlbE5hbWUsIGdhbWVSb29tTmFtZSkge1xyXG4gICAgICAgIHRoaXMubGFiZWxfcm9vbVR5cGUuc3RyaW5nID0gZ2FtZU1vZGVsTmFtZS5zdWJzdHJpbmcoMCwyKSArIFwiOlwiO1xyXG4gICAgICAgIHRoaXMubGFiZWxfcm9vbU5hbWUuc3RyaW5nID0gZ2FtZVJvb21OYW1lO1xyXG4gICAgfSxcclxuXHJcbiAgICAvL+aKleazqOS/oeaBr1xyXG4gICAgX3NldEJldCA6IGZ1bmN0aW9uIChiZXRTdHIpIHtcclxuICAgICAgICBpZiAoIWJldFN0cikge1xyXG4gICAgICAgICAgICBiZXRTdHIgPSBHX0NISU5FU0UuZGVhbGVyOy8vIOW9k+W6hFxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmxhYmVsX2JldC5zdHJpbmcgPSBiZXRTdHI7XHJcbiAgICB9LFxyXG5cclxuICAgIC8v5oqV5rOo57uT5p6cXHJcbiAgICBfc2V0UmVzdWx0IDogZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgIHRoaXMuX3JlY29yZEZpcnN0Q29sb3IodGhpcy5sYWJlbF9yZXN1bHQubm9kZSk7XHJcbiAgICAgICAgdmFyIGN1ckNvbG9yO1xyXG4gICAgICAgIGlmIChyZXN1bHQgPCAwKSB7Ly/popzoibLkuLrnuqLoibJcclxuICAgICAgICAgICAgY3VyQ29sb3IgPSB0aGlzLl9nZXRGb250Q29sb3IoKTtcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgY3VyQ29sb3IgPSB0aGlzLl9nZXRGaXJzdENvbG9yKHRoaXMubGFiZWxfcmVzdWx0Lm5vZGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmxhYmVsX3Jlc3VsdC5ub2RlLmNvbG9yID0gY3VyQ29sb3I7XHJcbiAgICAgICAgdGhpcy5sYWJlbF9yZXN1bHQuc3RyaW5nID0gcmVzdWx0O1xyXG4gICAgfSxcclxuXHJcbiAgICBfc2V0T3V0Q29tZSA6IGZ1bmN0aW9uIChvdXRDb21lKSB7XHJcbiAgICAgICAgdGhpcy5fcmVjb3JkRmlyc3RDb2xvcih0aGlzLmxhYmVsX291dENvbWUubm9kZSk7XHJcbiAgICAgICAgdmFyIHN0ciwgY3VyQ29sb3I7XHJcbiAgICAgICAgaWYgKG91dENvbWUgPCAwKSB7Ly/popzoibLkuLrnuqLoibJcclxuICAgICAgICAgICAgY3VyQ29sb3IgPSB0aGlzLl9nZXRGb250Q29sb3IoKTtcclxuICAgICAgICAgICAgc3RyID0gR19DSElORVNFLmxvc2VNYXRjaDsvLyDotJ9cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBjdXJDb2xvciA9IHRoaXMuX2dldEZpcnN0Q29sb3IodGhpcy5sYWJlbF9vdXRDb21lLm5vZGUpO1xyXG4gICAgICAgICAgICBzdHIgPSBHX0NISU5FU0Uud2luTWF0Y2g7Ly8g6IOcXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMubGFiZWxfb3V0Q29tZS5ub2RlLmNvbG9yID0gY3VyQ29sb3I7XHJcbiAgICAgICAgdGhpcy5sYWJlbF9vdXRDb21lLnN0cmluZyA9IHN0cjtcclxuXHJcbiAgICB9LFxyXG5cclxuICAgIC8vPT09PT09PT09PT09PT09PT09PVxyXG5cclxuICAgIF9yZWNvcmRGaXJzdENvbG9yIDogZnVuY3Rpb24gKG5vZGUpIHtcclxuICAgICAgICBpZihub2RlLl9maXJzdENvbG9yID09PSB1bmRlZmluZWQpe1xyXG4gICAgICAgICAgICBub2RlLl9maXJzdENvbG9yID0gbm9kZS5jb2xvcjtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgX2dldEZpcnN0Q29sb3IgOiBmdW5jdGlvbiAobm9kZSkge1xyXG4gICAgICAgIHJldHVybiBub2RlLl9maXJzdENvbG9yID8gbm9kZS5fZmlyc3RDb2xvciA6IG5vZGUuY29sb3JcclxuICAgIH0sXHJcblxyXG4gICAgX2dldEZvbnRDb2xvciA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZighdGhpcy5fZm9udHNDb2xvcil7XHJcbiAgICAgICAgICAgIHRoaXMuX2ZvbnRzQ29sb3IgPSBuZXcgY2MuQ29sb3IoMjU1LCAwLCAwKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2ZvbnRzQ29sb3JcclxuICAgIH0sXHJcblxyXG4gICAgLy8gY2FsbGVkIGV2ZXJ5IGZyYW1lLCB1bmNvbW1lbnQgdGhpcyBmdW5jdGlvbiB0byBhY3RpdmF0ZSB1cGRhdGUgY2FsbGJhY2tcclxuICAgIC8vIHVwZGF0ZTogZnVuY3Rpb24gKGR0KSB7XHJcblxyXG4gICAgLy8gfSxcclxufSk7XHJcbiIsIi8v6L+b5YWl5oi/6Ze05pe25YCZ55qE5Yqg6L295Yqo55S7XHJcblxyXG5cclxuY2MuQ2xhc3Moe1xyXG4gICAgZXh0ZW5kczogcmVxdWlyZSgnQmFzZU1hbmFnZXInKSxcclxuXHJcbiAgICBwcm9wZXJ0aWVzOiB7XHJcbiAgICAgICAgX21heFByb2dyZXNzIDogbnVsbCwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+i/m+W6pua7muWKqOeahOacgOWkp+aViOaenDAtMVxyXG4gICAgICAgIF90b1NjZW5lTmFtZSA6IG51bGwsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/lh4blpIfot7PovaznmoTlnLrmma/lkI3lrZdcclxuXHJcbiAgICAgICAgX2xvYWRpbmdOdW0gOiBudWxsLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+ato+WcqOWKoOi9veeahOaVsOmHj1xyXG4gICAgICAgIF9yZUNvbm5lY3ROdW0gOiBudWxsLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/ph43ov57mrKHmlbBcclxuICAgICAgICBsYWJlbF90aXAgOiB7XHJcbiAgICAgICAgICAgIGRlZmF1bHQgOiBudWxsLFxyXG4gICAgICAgICAgICB0eXBlIDogY2MuTGFiZWwsXHJcbiAgICAgICAgICAgIGRpc3BsYXlOYW1lIDogJ+WKoOi9veaXtuWAmeeahOaPkOekuuS/oeaBrydcclxuICAgICAgICB9LFxyXG4gICAgICAgIGxhYmVsX3JhdGUgOiB7XHJcbiAgICAgICAgICAgIGRlZmF1bHQgOiBudWxsLFxyXG4gICAgICAgICAgICB0eXBlIDogY2MuTGFiZWwsXHJcbiAgICAgICAgICAgIGRpc3BsYXlOYW1lIDogJ+aYvuekuueZvuWIhuavlCdcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIC8vIHVzZSB0aGlzIGZvciBpbml0aWFsaXphdGlvblxyXG4gICAgb25Mb2FkOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5fc3VwZXIoKTtcclxuXHJcbiAgICAgICAgdGhpcy5ub2RlLl9maXJzdFBvc1kgPSB0aGlzLm5vZGUueTtcclxuICAgICAgICB0aGlzLl9ub2RlX3NsaWRlckltZyA9IHRoaXMubm9kZS5jaGlsZHJlblswXTtcclxuICAgICAgICB0aGlzLl9ub2RlX3NsaWRlckltZy5fZmlyc3RQb3NZID0gdGhpcy5fbm9kZV9zbGlkZXJJbWcueTtcclxuXHJcbiAgICAgICAgdGhpcy5fZmlyc3RNYXhQcm9ncmVzcyA9IDAuOTtcclxuICAgICAgICB2YXIgcnVuVGltZSA9IDI7XHJcbiAgICAgICAgdGhpcy5fY3VyUHJvZ3Jlc3MgPSAwO1xyXG4gICAgICAgIHRoaXMuX2xvYWRpbmdOdW0gPSAwO1xyXG4gICAgICAgIHRoaXMuX3JlQ29ubmVjdE51bSA9IDA7XHJcbiAgICAgICAgLy/mr4/np5LnmoTov5vluqZcclxuICAgICAgICB0aGlzLl9wcm9ncmVzc0luU2VjID0gdGhpcy5fZmlyc3RNYXhQcm9ncmVzcy9ydW5UaW1lO1xyXG4gICAgICAgIHRoaXMuX2lzU3RhcnRFZmZlY3QgPSBmYWxzZTtcclxuICAgIH0sXHJcblxyXG4gICAgc3RhcnQgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgLy/ov5vlhaXliqDovb3nirbmgIFcclxuICAgICAgICBHRy5zZXRJc0xvYWRpbmcodHJ1ZSk7XHJcbiAgICAgICAgLy/mmL7npLrov5vluqbkv6Hmga9cclxuICAgICAgICB0aGlzLl9zaG93U2xpZGVyRWZmZWN0KCk7XHJcbiAgICAgICAgLy/liqDovb3ljbPlsIbov5vlhaXnmoTlnLrmma9cclxuICAgICAgICB0aGlzLnByZWxvYWRlZFNjZW5lKCk7XHJcbiAgICB9LFxyXG5cclxuICAgIF9zdGVwX2xvYWRBdWRpb0NvbmZpZyA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICAgICAgaWYoIUdHLmF1ZGlvTWdyLmdldElzUmVsb2FkR2FtZSgpKXtcclxuICAgICAgICAgICAgdGhpcy5fbG9hZGluZ051bSArPSAxO1xyXG4gICAgICAgICAgICBHRy5hdWRpb01nci5yZWxvYWRHYW1lQXVkaW8oZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgc2VsZi5fb25lQ29tcGxldGVkKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgLy/pooTliqDovb3lnLrmma9cclxuICAgIHByZWxvYWRlZFNjZW5lIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciByZWxvYWRJbmZvID0gR0cuZ2V0UGxheWVyKCkuZ2V0UmVsb2FkU2NlbmVJbmZvKCk7XHJcbiAgICAgICAgaWYocmVsb2FkSW5mbyAmJiByZWxvYWRJbmZvLnNjZW5lTmFtZSl7XHJcbiAgICAgICAgICAgIC8v5Z+65pys6YWN572u5bey57uP5Yqg6L295a6MXHJcbiAgICAgICAgICAgIHRoaXMuX2FkZFJlbG9hZFNjZW5lKHJlbG9hZEluZm8uc2NlbmVOYW1lKTtcclxuICAgICAgICAgICAgLy/mj5DnpLrmlofmnKxcclxuICAgICAgICAgICAgdGhpcy5fYWRkVGlwKCk7XHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIC8v6aaW5qyh6buY6K6k5Yqg6L29XHJcbiAgICAgICAgICAgIHRoaXMuX2xvYWRJbml0R2FtZUNvbmZpZygpO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICAvL+acieafkOS4qui1hOa6kOWKoOi9veWujOaIkFxyXG4gICAgX29uZUNvbXBsZXRlZCA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLl9sb2FkaW5nTnVtIC09IDE7XHJcbiAgICAgICAgaWYodGhpcy5fbG9hZGluZ051bSA8PSAwKXtcclxuICAgICAgICAgICAgLy/miYDmnInotYTmupDliqDovb3lrozmiJDvvIzkuJTov5vluqbovr7liLA5MCUs5YiZ5bCG6L+b5bqm54m55pWI5pKt5pS+5Yiw57uT5p2fXHJcbiAgICAgICAgICAgIHRoaXMuX2ZpcnN0TWF4UHJvZ3Jlc3MgPSAxO1xyXG4gICAgICAgICAgICB0aGlzLl9pc1N0YXJ0RWZmZWN0ID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIF93aGVuUmVsb2FkRW5kIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGNjLnN5cy5nYXJiYWdlQ29sbGVjdCgpO1xyXG4gICAgICAgIC8v6L+b5bqm5bey57uP6LWw5a6MXHJcbiAgICAgICAgY2MuZGlyZWN0b3IubG9hZFNjZW5lKHRoaXMuX3RvU2NlbmVOYW1lKTtcclxuICAgICAgICBjbGVhckludGVydmFsKHRoaXMuaW5lcnZhbElkKTtcclxuICAgIH0sXHJcblxyXG4gICAgLy89PT09PT09PT09PT09PT09PT09PT09PT09XHJcblxyXG4gICAgLy/liqDovb3liJ3lp4vphY3nva5cclxuICAgIF9sb2FkSW5pdEdhbWVDb25maWcgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgICAgIHRoaXMuX2xvYWRpbmdOdW0gKz0gMTtcclxuICAgICAgICB2YXIgaXNGaXJzdCA9IEdHLndoZW5HYW1lU3RhcnQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBzZWxmLl9hZGRDb25maWdDYWxsRnVuYygpO1xyXG4gICAgICAgICAgICBpZighR19Db25maWdfY29tbW9uLmlzTG9jYWwpIHtcclxuICAgICAgICAgICAgICAgIHNlbGYuX3NlbmRMb2dpbigpO1xyXG4gICAgICAgICAgICAgICAgLy8gc2VsZi5fZG9Mb2dpbigpO1xyXG4gICAgICAgICAgICB9ZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBzZWxmLl90b1NjZW5lTmFtZSA9IEdfVFlQRS5zY2VuZU5hbWUucGxhdGZvcm07XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8v55WM6Z2i5LiL5pa555qE5o+Q56S65paH5pysXHJcbiAgICAgICAgICAgIHNlbGYuX2FkZFRpcCgpO1xyXG4gICAgICAgICAgICBzZWxmLl9vbmVDb21wbGV0ZWQoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBpZighaXNGaXJzdCkge1xyXG4gICAgICAgICAgICBzZWxmLl9vbmVDb21wbGV0ZWQoKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIC8v55u05o6l55m75b2V77yI5rWL6K+V77yJXHJcbiAgICBfZG9Mb2dpbiA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBjb25zb2xlLmxvZygn5Y+R6YCB55m75b2V6K+35rGCJylcclxuICAgICAgICB2YXIgdXNlcm5hbWUgPSAnbWswNic7XHJcbiAgICAgICAgdmFyIHBhc3N3b3JkID0gJzEyMzQ1NjcnO1xyXG4gICAgICAgIHZhciBzZW5kRGF0YSA9ICd1c2VybmFtZT0nK3VzZXJuYW1lKycmcGFzc3dvcmQ9JytwYXNzd29yZDtcclxuICAgICAgICB0aGlzLl9sb2FkaW5nTnVtICs9IDE7XHJcbiAgICAgICAgR0cuaHR0cE1nci5zZW5kSHR0cFJlcXVlc3QoR19ESUFMT0dfVVJMLmxvZ2luK1wiP1wiK3NlbmREYXRhLCBudWxsLCBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygn5o6l5Y+X5Yiw55m75b2V5L+h5oGvJylcclxuICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YSlcclxuICAgICAgICAgICAgLy8gaWYoZGF0YSl7XHJcbiAgICAgICAgICAgIC8vXHJcbiAgICAgICAgICAgIC8vIH1cclxuICAgICAgICAgICAgdGhpcy5fc2VuZExvZ2luKCk7XHJcbiAgICAgICAgICAgIHRoaXMuX29uZUNvbXBsZXRlZCgpO1xyXG4gICAgICAgIH0uYmluZCh0aGlzKSwgJ0dFVCcpO1xyXG4gICAgfSxcclxuXHJcbiAgICAvL+WPkemAgeeZu+mZhuehruiupOivt+axglxyXG4gICAgX3NlbmRMb2dpbiA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgc2VuZERhdGEgPSBudWxsO1xyXG4gICAgICAgIGlmKCFHRy5nZXRQbGF5ZXIoKS5nZXRQbGF5ZXJUb2tlbigpKXtcclxuICAgICAgICAgICAgdGhpcy5fbG9hZGluZ051bSArPSAxO1xyXG4gICAgICAgICAgICBHRy5odHRwTWdyLnNlbmRIdHRwUmVxdWVzdChHX0RJQUxPR19VUkwubG9naW5Ub2tlblVybCwgc2VuZERhdGEsIGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICBpZihkYXRhKXtcclxuICAgICAgICAgICAgICAgICAgICBHRy5nZXRQbGF5ZXIoKS5zZXRQbGF5ZXJUb2tlbihkYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9yZUNvbm5lY3ROdW0gPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2xvYWRpbmdOdW0gKz0gMTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICAgICAgICAgICAgICAgICAgLy/nmbvpmYZzb2NrZXRcclxuICAgICAgICAgICAgICAgICAgICBHRy5zb2NrZXRNZ3IuY29ubmVjdFNvY2tldChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX3doZW5Mb2dpbkVuZCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLl9vbmVDb21wbGV0ZWQoKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1lbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9yZUNvbm5lY3ROdW0gKz0gMTtcclxuICAgICAgICAgICAgICAgICAgICBpZih0aGlzLl9yZUNvbm5lY3ROdW0gPiA2KXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy/ph43ov57mrKHmlbDlpKrlpJpcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBHRy5zaG93UmVjb25uZWN0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX3JlQ29ubmVjdE51bSA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLl9zZW5kTG9naW4oKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfWVsc2UgdGhpcy5fc2VuZExvZ2luKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9vbmVDb21wbGV0ZWQoKTtcclxuICAgICAgICAgICAgfS5iaW5kKHRoaXMpKTtcclxuICAgICAgICB9ZWxzZSB0aGlzLl93aGVuTG9naW5FbmQoKTtcclxuICAgIH0sXHJcbiAgICBfd2hlbkxvZ2luRW5kIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuX3N0ZXAxX3NldFBsYXllckluZm8oKTtcclxuICAgICAgICB0aGlzLl9zdGVwMl9zZXRBdWRpb0NvbmZpZygpO1xyXG4gICAgICAgIHRoaXMuX3N0ZXAzX3NldFJlbG9hZFNjZW5lKCk7XHJcbiAgICB9LFxyXG4gICAgLy/ojrflj5bnjqnlrrbkv6Hmga/lubbmlL7nva5NX1BsYXllcuiEmuacrOS4rVxyXG4gICAgX3N0ZXAxX3NldFBsYXllckluZm8gOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHNlbmREYXRhID0gbnVsbDtcclxuICAgICAgICBpZighR0cuZ2V0UGxheWVyKCkuZ2V0QmFzZUluZm8oKSl7XHJcbiAgICAgICAgICAgIHRoaXMuX2xvYWRpbmdOdW0gKz0gMTtcclxuICAgICAgICAgICAgR0cuaHR0cE1nci5zZW5kSHR0cFJlcXVlc3QoR19ESUFMT0dfVVJMLnBlcnNvbmFsSW5mb1VybCwgc2VuZERhdGEsIGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICBHRy5nZXRQbGF5ZXIoKS5zZXRCYXNlSW5mbyhkYXRhKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX29uZUNvbXBsZXRlZCgpO1xyXG4gICAgICAgICAgICB9LmJpbmQodGhpcykpO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICAvL+ivt+axguacjeWKoeWZqOWjsOmfs+eahOiuvue9rlxyXG4gICAgX3N0ZXAyX3NldEF1ZGlvQ29uZmlnIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmKCFHRy5hdWRpb01nci5nZXRBdWRpb0NvbmZpZygpKXtcclxuICAgICAgICAgICAgdGhpcy5fbG9hZGluZ051bSArPSAxO1xyXG4gICAgICAgICAgICAvL0dHLmh0dHBNZ3Iuc2VuZEh0dHBSZXF1ZXN0KEdfRElBTE9HX1VSTC5sb2dpblRvU2V0VXJsLCBzZW5kRGF0YSwgZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgLy8gICAgdmFyIGNvbmZpZyA9IGRhdGFbMF07XHJcbiAgICAgICAgICAgIC8vICAgIGlmKCFkYXRhIHx8IGRhdGEubGVuZ3RoIDwgMSl7XHJcbiAgICAgICAgICAgIC8vICAgICAgICBjb25maWcgPSB7J211c2ljJzp0cnVlLCdzb3VuZCc6dHJ1ZX07XHJcbiAgICAgICAgICAgIC8vICAgIH1cclxuICAgICAgICAgICAgLy8gICAgR0cuYXVkaW9NZ3Iuc2V0QXVkaW9Db25maWcoY29uZmlnKTtcclxuICAgICAgICAgICAgLy8gICAgdGhpcy5fb25lUmVxdWVzdEVuZCgpO1xyXG4gICAgICAgICAgICAvL30uYmluZCh0aGlzKSk7XHJcbiAgICAgICAgICAgIEdHLmh0dHBNZ3Iuc2VuZEh0dHBSZXF1ZXN0KEdfRElBTE9HX1VSTC5nZXRTeXN0ZW1TZXRVcmwsICdnYW1lVHlwZT1ET1VfTklVJywgZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgIHZhciBjb25maWc7XHJcbiAgICAgICAgICAgICAgICBpZihkYXRhKXtcclxuICAgICAgICAgICAgICAgICAgICBpZihkYXRhLmNvZGUgPT0gMCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpZyA9IHsnbXVzaWMnOnRydWUsJ3NvdW5kJzp0cnVlfTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25maWcgPSBkYXRhLmRhdGEucmVzdWx0WzBdO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1lbHNlIGNvbmZpZyA9IHsnbXVzaWMnOnRydWUsJ3NvdW5kJzp0cnVlfTtcclxuXHJcbiAgICAgICAgICAgICAgICAvL2lmKGNvbmZpZy5tdXNpYyAmJiBHRy5hdWRpb01nci5nZXRJc1BsYXlNdXNpYygpKSBHRy5hdWRpb01nci5zYXZlU291bmRDb25maWcoY29uZmlnLnNvdW5kKTtcclxuICAgICAgICAgICAgICAgIEdHLmF1ZGlvTWdyLnNldEF1ZGlvQ29uZmlnKGNvbmZpZyk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9vbmVDb21wbGV0ZWQoKTtcclxuICAgICAgICAgICAgfS5iaW5kKHRoaXMpKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgLy/nmbvpmYblkI7vvIzliqDovb3ljbPlsIbov5vlhaXnmoTlnLrmma9cclxuICAgIF9zdGVwM19zZXRSZWxvYWRTY2VuZSA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICAgICAgLy/liJrnmbvpmYbvvIzkvJrmoLnmja5oYXNo5p2l6K6+572u5Yid5aeL6aG16Z2iXHJcbiAgICAgICAgdmFyIGhhc2hEYXRhID0gR19EQVRBLmdldExhc3RTY2VuZUhhc2goKTtcclxuICAgICAgICBpZihoYXNoRGF0YSl7XHJcbiAgICAgICAgICAgIHZhciBuZXREYXRhID0ge1xyXG4gICAgICAgICAgICAgICAgcm9vbUlkIDogaGFzaERhdGEucm9vbUlkLFxyXG4gICAgICAgICAgICAgICAgZ2FtZU1vZGVsIDogR19EQVRBLmdldEVudGVySG9tZU1vZGVsKGhhc2hEYXRhLmVudGVyVHlwZSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzZWxmLl9sb2FkaW5nTnVtICs9IDE7XHJcbiAgICAgICAgICAgIEdHLnNfcmVxdWVzdE1nci5zZW5kX2luSG9tZShuZXREYXRhLCBmdW5jdGlvbiAocmVjdkRhdGEpIHtcclxuICAgICAgICAgICAgICAgIC8vIEdHLmNoYW5nZVNjZW5lKEdfREFUQS5nZXRTY2VuZU5hbWUoaGFzaERhdGEuZW50ZXJUeXBlKSk7XHJcbiAgICAgICAgICAgICAgICBpZihyZWN2RGF0YSl7XHJcbiAgICAgICAgICAgICAgICAgICAgLy/orrDlvZVoYXNo5L+h5oGvXHJcbiAgICAgICAgICAgICAgICAgICAgR19EQVRBLnNldEN1clNjZW5lSGFzaChoYXNoRGF0YS5lbnRlclR5cGUsaGFzaERhdGEucm9vbUlkKTtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLl9hZGRSZWxvYWRTY2VuZShHX0RBVEEuZ2V0U2NlbmVOYW1lKGhhc2hEYXRhLmVudGVyVHlwZSkpO1xyXG4gICAgICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgLy/ov5vmiL/or7fmsYLlpLHotKUs5Zue5Yiw5Li75Zy65pmvXHJcbiAgICAgICAgICAgICAgICAgICAgR19EQVRBLnNldEN1clNjZW5lSGFzaCgnJywwKTtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLl9hZGRSZWxvYWRTY2VuZShHX1RZUEUuc2NlbmVOYW1lLnBsYXRmb3JtKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHNlbGYuX29uZUNvbXBsZXRlZCgpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAvL+m7mOiupOeahOWcuuaZr1xyXG4gICAgICAgICAgICBHX0RBVEEuc2V0Q3VyU2NlbmVIYXNoKCcnLDApO1xyXG4gICAgICAgICAgICB0aGlzLl9hZGRSZWxvYWRTY2VuZShHX1RZUEUuc2NlbmVOYW1lLnBsYXRmb3JtKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgX2FkZFJlbG9hZFNjZW5lIDogZnVuY3Rpb24gKHNjZW5lTmFtZSkge1xyXG4gICAgICAgIHRoaXMuX3RvU2NlbmVOYW1lID0gc2NlbmVOYW1lO1xyXG4gICAgICAgIHRoaXMuX2xvYWRpbmdOdW0gKz0gMTtcclxuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICAgICAgY2MuZGlyZWN0b3IucHJlbG9hZFNjZW5lKHRoaXMuX3RvU2NlbmVOYW1lLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHNlbGYuX29uZUNvbXBsZXRlZCgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGlmKHNjZW5lTmFtZSAhPSBHX1RZUEUuc2NlbmVOYW1lLnBsYXRmb3JtKXtcclxuICAgICAgICAgICAgLy/liqDovb3muLjmiI/miL/pl7TlhoXlo7Dpn7PphY3nva5cclxuICAgICAgICAgICAgdGhpcy5fc3RlcF9sb2FkQXVkaW9Db25maWcoKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIC8v5Yqg6L296YWN572u5paH5Lu257uT5p2fXHJcbiAgICBfYWRkQ29uZmlnQ2FsbEZ1bmMgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHRhYmxlID0gR0cudGFibGVNZ3IuZ2V0VGFibGUoR19SRVNfVVJMLmRpY3RfdGFibGVzTmFtZS5ncmFiQ29uZmlnKTtcclxuICAgICAgICBpZih0YWJsZSkge1xyXG4gICAgICAgICAgICB2YXIgZGF0YU9iaiA9IHRhYmxlLmdldEZpcnN0RGF0YSgpO1xyXG4gICAgICAgICAgICB0aGlzLl9hZGRDb25maWcoR19Db25maWdfZ3JhYiwgZGF0YU9iaik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgdGFibGUgPSBHRy50YWJsZU1nci5nZXRUYWJsZShHX1JFU19VUkwuZGljdF90YWJsZXNOYW1lLmNvbW1vbkNvbmZpZyk7XHJcbiAgICAgICAgaWYodGFibGUpIHtcclxuICAgICAgICAgICAgdmFyIGRhdGFPYmogPSB0YWJsZS5nZXRGaXJzdERhdGEoKTtcclxuICAgICAgICAgICAgdGhpcy5fYWRkQ29uZmlnKEdfQ29uZmlnX2NvbW1vbiwgZGF0YU9iaik7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIC8v5aKe5Yqg6YWN572u5L+h5oGvXHJcbiAgICBfYWRkQ29uZmlnIDogZnVuY3Rpb24gKHRhcmdldE9iamVjdCwgYWRkT2JqZWN0KSB7XHJcbiAgICAgICAgaWYoYWRkT2JqZWN0KXtcclxuICAgICAgICAgICAgZm9yKHZhciBhdHRyTmFtZSBpbiBhZGRPYmplY3Qpe1xyXG4gICAgICAgICAgICAgICAgdGFyZ2V0T2JqZWN0W2F0dHJOYW1lXSA9IGFkZE9iamVjdFthdHRyTmFtZV07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIC8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT3ov5vluqbmnaHnmoTooajnjrBcclxuXHJcbiAgICAvL+W8gOWni+i/m+W6puadoeeahOaYvuekuu+8jOebtOaOpeaSreaUvuWIsDkwJeetieW+hVxyXG4gICAgX3Nob3dTbGlkZXJFZmZlY3QgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5fbG9hZGluZ051bSArPSAxO1xyXG4gICAgICAgIHRoaXMuX2N1clByb2dyZXNzID0gMDtcclxuICAgICAgICB0aGlzLl9zZXRTbGlkZXJWYWx1ZSh0aGlzLl9jdXJQcm9ncmVzcyk7XHJcbiAgICAgICAgdGhpcy5faXNTdGFydEVmZmVjdCA9IHRydWU7XHJcbiAgICB9LFxyXG4gICAgLy/orr7nva7mmL7npLrov5vluqYgMC0xXHJcbiAgICBfc2V0U2xpZGVyVmFsdWUgOiBmdW5jdGlvbiAocmF0ZSkge1xyXG4gICAgICAgIHRoaXMuX3NldFJhdGVJbmZvKHJhdGUpO1xyXG4gICAgICAgIHZhciBsZW4gPSByYXRlICogdGhpcy5ub2RlLmhlaWdodDtcclxuICAgICAgICB2YXIgbmVlZEggPSB0aGlzLm5vZGUuaGVpZ2h0IC0gbGVuO1xyXG4gICAgICAgIHRoaXMubm9kZS55ID0gLW5lZWRIO1xyXG4gICAgICAgIHRoaXMuX25vZGVfc2xpZGVySW1nLnkgPSBuZWVkSDtcclxuICAgIH0sXHJcbiAgICAvL+iuvue9ruaPkOekuuS/oeaBr1xyXG4gICAgX3NldFRpcEluZm8gOiBmdW5jdGlvbiAoc3RyKSB7XHJcbiAgICAgICAgaWYodGhpcy5sYWJlbF90aXApe1xyXG4gICAgICAgICAgICB0aGlzLmxhYmVsX3RpcC5zdHJpbmcgPSBzdHI7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIC8v6K6+572u55m+5YiG5q+U5L+h5oGvXHJcbiAgICBfc2V0UmF0ZUluZm8gOiBmdW5jdGlvbiAocmF0ZSkge1xyXG4gICAgICAgIHZhciBzdHIgPSBNYXRoLmZsb29yKHJhdGUgKiAxMDApICsgJyUnO1xyXG4gICAgICAgIGlmKHRoaXMubGFiZWxfcmF0ZSl7XHJcbiAgICAgICAgICAgIHRoaXMubGFiZWxfcmF0ZS5zdHJpbmcgPSBzdHI7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICAvLyBjYWxsZWQgZXZlcnkgZnJhbWUsIHVuY29tbWVudCB0aGlzIGZ1bmN0aW9uIHRvIGFjdGl2YXRlIHVwZGF0ZSBjYWxsYmFja1xyXG4gICAgdXBkYXRlOiBmdW5jdGlvbiAoZHQpIHtcclxuICAgICAgICBpZih0aGlzLl9pc1N0YXJ0RWZmZWN0KXtcclxuICAgICAgICAgICAgdGhpcy5fcGxheWVyU2xpZGVyRWZmZWN0KGR0KTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgLy/mkq3mlL7ov5vluqbliqjnlLvliLA5MCVcclxuICAgIF9wbGF5ZXJTbGlkZXJFZmZlY3QgOiBmdW5jdGlvbiAoZHQpIHtcclxuICAgICAgICBpZih0aGlzLl9jdXJQcm9ncmVzcyA+PSB0aGlzLl9maXJzdE1heFByb2dyZXNzKSB7XHJcbiAgICAgICAgICAgIC8v6L6+5Yiw56ys5LiA6Zi25q6177yM5aaCOTAlXHJcbiAgICAgICAgICAgIHRoaXMuX2lzU3RhcnRFZmZlY3QgPSBmYWxzZTtcclxuICAgICAgICAgICAgdGhpcy5fb25lQ29tcGxldGVkKCk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5fY3VyUHJvZ3Jlc3MgKz0gZHQgKiB0aGlzLl9wcm9ncmVzc0luU2VjO1xyXG4gICAgICAgIHRoaXMuX3NldFNsaWRlclZhbHVlKHRoaXMuX2N1clByb2dyZXNzKTtcclxuICAgICAgICBpZih0aGlzLl9jdXJQcm9ncmVzcyA+PSAxKXtcclxuICAgICAgICAgICAgdGhpcy5fY3VyUHJvZ3Jlc3MgPSAxO1xyXG4gICAgICAgICAgICB0aGlzLl9zZXRTbGlkZXJWYWx1ZSh0aGlzLl9jdXJQcm9ncmVzcyk7XHJcbiAgICAgICAgICAgIHRoaXMuX2lzU3RhcnRFZmZlY3QgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuX3doZW5SZWxvYWRFbmQoKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIC8vPT09PT09PT09PT09PT09PT09PT09PT09PT3mmL7npLrmj5DnpLrmlofmnKxcclxuXHJcbiAgICAvL+eVjOmdouS4i+aWueeahOaPkOekuuaWh+acrFxyXG4gICAgX2FkZFRpcCA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLl90YWJsZSA9IEdHLnRhYmxlTWdyLmdldFRhYmxlKEdfUkVTX1VSTC5kaWN0X3RhYmxlc05hbWUuY29tbW9uTG9hZGluZyk7XHJcbiAgICAgICAgaWYgKCF0aGlzLl90YWJsZSkge1xyXG4gICAgICAgICAgICB0aGlzLl9zZXRMb2FkaW5nVGFibGUoKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLl9zaG93VGFibGVUaW1lKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICAvL+iuvue9ruaWh+acrOihqOagvFxyXG4gICAgX3NldExvYWRpbmdUYWJsZTogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIEdHLnRhYmxlTWdyLnJlbG9hZFRhYmxlcyhHX1JFU19VUkwuZGljdF90YWJsZXNOYW1lLmNvbW1vbkxvYWRpbmcsIHRoaXMuX2dldExvYWRpbmdUYWJsZS5iaW5kKHRoaXMpKTtcclxuICAgIH0sXHJcbiAgICAvL+iOt+WPluaWh+acrOihqOagvFxyXG4gICAgX2dldExvYWRpbmdUYWJsZTogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuX3RhYmxlID0gR0cudGFibGVNZ3IuZ2V0VGFibGUoR19SRVNfVVJMLmRpY3RfdGFibGVzTmFtZS5jb21tb25Mb2FkaW5nKTtcclxuICAgICAgICBpZih0aGlzLl90YWJsZSkge1xyXG4gICAgICAgICAgICB2YXIgbG9hZE1lc3NhZ2UgPSB0aGlzLl90YWJsZS5nZXRGaXJzdERhdGEoKS5jb250ZW50O1xyXG4gICAgICAgICAgICB0aGlzLl9zZXRUaXBJbmZvKGxvYWRNZXNzYWdlKTtcclxuICAgICAgICAgICAgdGhpcy5fc2hvd1RhYmxlVGltZSgpO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICBfZ2V0UmFuZG9tVGFibGU6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgaW5kZXggPSBHX1RPT0wuZ2V0UmFuZG9tQXJlYSgxLDcpO1xyXG4gICAgICAgIHZhciBsb2FkTWVzc2FnZSA9IHRoaXMuX3RhYmxlLmdldERhdGFCeUlEKGluZGV4KS5jb250ZW50O1xyXG4gICAgICAgIHJldHVybiBsb2FkTWVzc2FnZTtcclxuICAgIH0sXHJcbiAgICAvL+WumuaXtuaYvuekulxyXG4gICAgX3Nob3dUYWJsZVRpbWU6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy5pbmVydmFsSWQgPSBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHNlbGYuX3NldFRpcEluZm8oc2VsZi5fZ2V0UmFuZG9tVGFibGUoKSk7XHJcbiAgICAgICAgfSwgMjAwMCk7XHJcbiAgICB9LFxyXG5cclxuICAgIG9uRGVzdHJveSA6IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICB9LFxyXG59KTtcclxuIiwiLy/mmL7npLrlnKjlpLTlg4/kuIrpnaLnmoTph5HluIHlop7lh4/nmoTmvILmta7nibnmlYhcclxuXHJcbmNjLkNsYXNzKHtcclxuICAgIGV4dGVuZHM6IGNjLkNvbXBvbmVudCxcclxuICAgIF9jYWxsRnVuYyA6IG51bGwsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v6YeR5biB54m55pWI57uT5p2f5ZCO5Zue6LCDXHJcbiAgICBwcm9wZXJ0aWVzOiB7XHJcbiAgICAgICAgbm9kZV9hZGRHb2xkIDogY2MuTm9kZSxcclxuICAgICAgICBub2RlX2xvc3RHb2xkIDogY2MuTm9kZSxcclxuICAgIH0sXHJcblxyXG4gICAgLy8gdXNlIHRoaXMgZm9yIGluaXRpYWxpemF0aW9uXHJcbiAgICBvbkxvYWQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLl9yZWxvYWRMYWJlbCgpO1xyXG4gICAgfSxcclxuXHJcbiAgICBfcmVsb2FkTGFiZWwgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5fbGFiZWxfYWRkID0gdGhpcy5ub2RlX2FkZEdvbGQuZ2V0Q29tcG9uZW50SW5DaGlsZHJlbihjYy5MYWJlbCk7XHJcbiAgICAgICAgdGhpcy5fbGFiZWxfbG9zdCA9IHRoaXMubm9kZV9sb3N0R29sZC5nZXRDb21wb25lbnRJbkNoaWxkcmVuKGNjLkxhYmVsKTtcclxuICAgIH0sXHJcblxyXG4gICAgc2hvd0dyYWJHb2xkIDogZnVuY3Rpb24gKGNvdW50KSB7XHJcbiAgICAgICAgaWYoIWNvdW50KSByZXR1cm47XHJcbiAgICAgICAgaWYoIXRoaXMuX2xhYmVsX2FkZCkgdGhpcy5fcmVsb2FkTGFiZWwoKTtcclxuXHJcbiAgICAgICAgaWYoY291bnQgPiAwKXtcclxuICAgICAgICAgICAgdGhpcy5ub2RlX2FkZEdvbGQuYWN0aXZlID0gdHJ1ZTtcclxuICAgICAgICAgICAgdGhpcy5ub2RlX2xvc3RHb2xkLmFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICBjb3VudCA9ICcrJytjb3VudDtcclxuICAgICAgICAgICAgdGhpcy5fbGFiZWxfYWRkLnN0cmluZyA9IGNvdW50O1xyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAvL2NvdW50ID0gJy0nK2NvdW50O1xyXG4gICAgICAgICAgICB0aGlzLm5vZGVfYWRkR29sZC5hY3RpdmUgPSBmYWxzZTtcclxuICAgICAgICAgICAgdGhpcy5ub2RlX2xvc3RHb2xkLmFjdGl2ZSA9IHRydWU7XHJcbiAgICAgICAgICAgIHRoaXMuX2xhYmVsX2xvc3Quc3RyaW5nID0gY291bnQ7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICBzaG93RWZmZWN0IDogZnVuY3Rpb24gKHZhbHVlLCBzdGFydFBvcywgdGFyZ2V0WSwgY2FsbEZ1bmMpIHtcclxuICAgICAgICB0aGlzLm5vZGUuYWN0aXZlID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLl9jYWxsRnVuYyA9IGNhbGxGdW5jO1xyXG4gICAgICAgIGlmKHZhbHVlID4gMCl7XHJcbiAgICAgICAgICAgIHRoaXMubm9kZV9hZGRHb2xkLmFjdGl2ZSA9IHRydWU7XHJcbiAgICAgICAgICAgIHRoaXMubm9kZV9sb3N0R29sZC5hY3RpdmUgPSBmYWxzZTtcclxuICAgICAgICAgICAgdGhpcy5fbGFiZWxfYWRkLnN0cmluZyA9ICcrJyt2YWx1ZTtcclxuICAgICAgICAgICAgdGhpcy5fc2hvd0dvbGRBZGRFZmZlY3Qoc3RhcnRQb3MsIHRhcmdldFkpO1xyXG4gICAgICAgIH1lbHNlIGlmKHZhbHVlIDwgMCl7XHJcbiAgICAgICAgICAgIHRoaXMubm9kZV9sb3N0R29sZC5hY3RpdmUgPSB0cnVlO1xyXG4gICAgICAgICAgICB0aGlzLm5vZGVfYWRkR29sZC5hY3RpdmUgPSBmYWxzZTtcclxuICAgICAgICAgICAgdGhpcy5fbGFiZWxfbG9zdC5zdHJpbmcgPSB2YWx1ZTtcclxuICAgICAgICAgICAgdGhpcy5fc2hvd0dvbGRMb3N0RWZmZWN0KHN0YXJ0UG9zLCB0YXJnZXRZKTtcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgLy92YWx1ZSA9PSAwXHJcbiAgICAgICAgICAgIHRoaXMubm9kZV9hZGRHb2xkLmFjdGl2ZSA9IHRydWU7XHJcbiAgICAgICAgICAgIHRoaXMubm9kZV9sb3N0R29sZC5hY3RpdmUgPSBmYWxzZTtcclxuICAgICAgICAgICAgdGhpcy5fbGFiZWxfYWRkLnN0cmluZyA9IHZhbHVlO1xyXG4gICAgICAgICAgICB0aGlzLl9zaG93R29sZEFkZEVmZmVjdChzdGFydFBvcywgdGFyZ2V0WSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICAvL+mHkeW4geaYvuekuueahOenu+WKqOaViOaenFxyXG4gICAgX3Nob3dHb2xkQWRkRWZmZWN0IDogZnVuY3Rpb24gKHN0YXJ0UG9zLCB0YXJnZXRZKSB7XHJcbiAgICAgICAgdGhpcy5ub2RlLnpJbmRleCA9IC0xO1xyXG4gICAgICAgIHRoaXMubm9kZS5wb3NpdGlvbiA9IHN0YXJ0UG9zO1xyXG4gICAgICAgIHRoaXMubm9kZS5zY2FsZSA9IDA7XHJcbiAgICAgICAgdGhpcy5ub2RlLm9wYWNpdHkgPSAwO1xyXG5cclxuICAgICAgICB2YXIgdGltZSA9IEdfQ29uZmlnX2NsYXNzaWMubGlzdF9nb2xkQWRkRmx5WzBdO1xyXG4gICAgICAgIHZhciBhY3QxID0gY2MubW92ZVRvKHRpbWUsIDAsIHRhcmdldFkpLmVhc2luZyhjYy5lYXNlT3V0KDMuMCkpO1xyXG4gICAgICAgIHZhciBhY3QyID0gY2Muc2NhbGVUbyh0aW1lLCAxKTtcclxuICAgICAgICB2YXIgYWN0MyA9IGNjLmZhZGVUbyh0aW1lLCAyNTUpO1xyXG5cclxuICAgICAgICB2YXIgYWN0NSA9IGNjLmNhbGxGdW5jKHRoaXMuX2FkZEVmZmVjdE1pZCwgdGhpcywgc3RhcnRQb3MpO1xyXG4gICAgICAgIHRoaXMubm9kZS5ydW5BY3Rpb24oY2Muc2VxdWVuY2UoY2Muc3Bhd24oYWN0MSwgYWN0MiwgYWN0MyksIGFjdDUpKTtcclxuICAgIH0sXHJcbiAgICBfYWRkRWZmZWN0TWlkIDogZnVuY3Rpb24gKHRhcmdldCwgc3RhcnRQb3MpIHtcclxuICAgICAgICB0aGlzLm5vZGUuekluZGV4ID0gMTtcclxuICAgICAgICB2YXIgdGltZSA9IEdfQ29uZmlnX2NsYXNzaWMubGlzdF9nb2xkQWRkRmx5WzFdO1xyXG4gICAgICAgIHZhciBhY3QxID0gY2MuZGVsYXlUaW1lKEdfQ29uZmlnX2NsYXNzaWMubGlzdF9nb2xkQWRkRmx5WzJdKTtcclxuICAgICAgICB2YXIgYWN0MiA9IGNjLmZhZGVUbyh0aW1lLCAxMDApO1xyXG4gICAgICAgIHZhciBhY3QzID0gY2MubW92ZVRvKHRpbWUsIHN0YXJ0UG9zKS5lYXNpbmcoY2MuZWFzZUluT3V0KDMuMCkpO1xyXG4gICAgICAgIHZhciBhY3Q0ID0gY2Muc2NhbGVUbyh0aW1lLCAwLjUpO1xyXG4gICAgICAgIHZhciBhY3Q1ID0gY2MuY2FsbEZ1bmModGhpcy5fZWZmZWN0RW5kLCB0aGlzKTtcclxuICAgICAgICB0aGlzLm5vZGUucnVuQWN0aW9uKGNjLnNlcXVlbmNlKGFjdDEsIGNjLnNwYXduKGFjdDIsIGFjdDMsIGFjdDQpLCBhY3Q1KSk7XHJcbiAgICB9LFxyXG5cclxuICAgIF9zaG93R29sZExvc3RFZmZlY3QgOiBmdW5jdGlvbiAoc3RhcnRQb3MsIHRhcmdldFkpIHtcclxuICAgICAgICB0aGlzLm5vZGUuekluZGV4ID0gLTE7XHJcbiAgICAgICAgdGhpcy5ub2RlLnBvc2l0aW9uID0gc3RhcnRQb3M7XHJcbiAgICAgICAgdGhpcy5ub2RlLnNjYWxlID0gMDtcclxuICAgICAgICB0aGlzLm5vZGUub3BhY2l0eSA9IDI1NTtcclxuXHJcbiAgICAgICAgdmFyIHRpbWUgPSBHX0NvbmZpZ19jbGFzc2ljLmxpc3RfZ29sZExvc3RGbHlbMF07XHJcbiAgICAgICAgdmFyIGFjdDEgPSBjYy5tb3ZlVG8odGltZSwgMCwgdGFyZ2V0WSkuZWFzaW5nKGNjLmVhc2VPdXQoMy4wKSk7XHJcbiAgICAgICAgdmFyIGFjdDIgPSBjYy5zY2FsZVRvKHRpbWUsIDEpO1xyXG4gICAgICAgIHZhciBhY3QzID0gY2MuZGVsYXlUaW1lKEdfQ29uZmlnX2NsYXNzaWMubGlzdF9nb2xkTG9zdEZseVsxXSk7XHJcbiAgICAgICAgdmFyIGFjdDQgPSBjYy5mYWRlT3V0KEdfQ29uZmlnX2NsYXNzaWMubGlzdF9nb2xkTG9zdEZseVsyXSk7XHJcbiAgICAgICAgdmFyIGFjdDUgPSBjYy5jYWxsRnVuYyh0aGlzLl9lZmZlY3RFbmQsIHRoaXMpO1xyXG4gICAgICAgIHRoaXMubm9kZS5ydW5BY3Rpb24oY2Muc2VxdWVuY2UoY2Muc3Bhd24oYWN0MSwgYWN0MiksIGFjdDMsIGFjdDQsIGFjdDUpKTtcclxuICAgIH0sXHJcblxyXG4gICAgX2VmZmVjdEVuZCA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLmhpZGVHb2xkKCk7XHJcbiAgICAgICAgaWYodGhpcy5fY2FsbEZ1bmMpIHRoaXMuX2NhbGxGdW5jKCk7XHJcbiAgICB9LFxyXG5cclxuICAgIC8v6ZqQ6JePXHJcbiAgICBoaWRlR29sZCA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLm5vZGUuYWN0aXZlID0gZmFsc2U7XHJcbiAgICB9LFxyXG5cclxuICAgIC8vIGNhbGxlZCBldmVyeSBmcmFtZSwgdW5jb21tZW50IHRoaXMgZnVuY3Rpb24gdG8gYWN0aXZhdGUgdXBkYXRlIGNhbGxiYWNrXHJcbiAgICAvLyB1cGRhdGU6IGZ1bmN0aW9uIChkdCkge1xyXG5cclxuICAgIC8vIH0sXHJcbn0pO1xyXG4iLCIvL+mHkeW4geeuoeeQhuWuueWZqFxyXG5cclxuY2MuQ2xhc3Moe1xyXG4gICAgZXh0ZW5kczogY2MuQ29tcG9uZW50LFxyXG5cclxuICAgIHByb3BlcnRpZXM6IHtcclxuICAgICAgICAvL19pc1VwZGF0ZSA6IG51bGwsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+aYr+WQpuW8gOWQr+mHkeW4geeahOenu+WKqFxyXG4gICAgICAgIF9kaWN0X2dvbGRTb3J0IDogbnVsbCwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+W3sue7j+aKleazqOeahOmHkeW4geeahOaVtOeQhuWtl+WFuFxyXG5cclxuICAgICAgICBmcmFtZV9nb2xkIDoge1xyXG4gICAgICAgICAgICBkZWZhdWx0IDogbnVsbCxcclxuICAgICAgICAgICAgdHlwZSA6IGNjLlNwcml0ZUZyYW1lLFxyXG4gICAgICAgICAgICBkaXNwbGF5TmFtZSA6ICfph5HluIHlm77moIcnXHJcbiAgICAgICAgfSxcclxuICAgIH0sXHJcblxyXG4gICAgLy8gdXNlIHRoaXMgZm9yIGluaXRpYWxpemF0aW9uXHJcbiAgICBvbkxvYWQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAvL+mHkeW4geeahOenu+WKqOaXtumXtFxyXG4gICAgICAgIHRoaXMuX2dvbGRNb3ZlVGltZSA9IDAuMztcclxuICAgICAgICAvL+iDnOWIqemHkeW4geWbnuaUtueahOenu+WKqOmAn+W6plxyXG4gICAgICAgIHRoaXMuX3JlY292ZUdvbGRNb3ZlVGltZSA9IDAuNDtcclxuICAgICAgICAvL+mHkeW4geeahOe8qeaUvlxyXG4gICAgICAgIHRoaXMuX2dvbGRTY2FsZSA9IEdfQ29uZmlnX2NvbW1vbi5zY2FsZV9tb3ZlR29sZDtcclxuXHJcbiAgICAgICAgdGhpcy5fZGljdF9nb2xkU29ydCA9IHt9O1xyXG4gICAgfSxcclxuXHJcbiAgICBzdGFydCA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZihHRy5jdXJNZ3IpIHRoaXMuX3RhYmxlQ29udGFpbmVyID0gR0cuY3VyTWdyLmdldFRhYmxlQ29udGFpbmVyKCk7XHJcbiAgICB9LFxyXG5cclxuICAgIC8v5LuO546p5a625Yiw5oqV5rOo5Yy65Z+fXHJcbiAgICBwbGF5ZXJUb1RhYmxlIDogZnVuY3Rpb24gKGRhdGFPYmopIHtcclxuICAgICAgICAvL3ZhciBkYXRhT2JqID0gR19PQkouZGF0YV9mbHlHb2xkX3BsYXllclRvVGFibGUoKTtcclxuICAgICAgICB2YXIgZ29sZFBvc0xpc3QgPSB0aGlzLl90YWJsZUNvbnRhaW5lci5nZXRHb2xkUG9zTGlzdChkYXRhT2JqLnRhYmxlSW5kZXgsIGRhdGFPYmouZ29sZE51bSk7XHJcbiAgICAgICAgdmFyIHRhcmdldFBvcywgZ29sZE5vZGUsIGxhc3RHb2xkO1xyXG4gICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCBkYXRhT2JqLmdvbGROdW07IGkgKyspe1xyXG4gICAgICAgICAgICB0YXJnZXRQb3MgPSBnb2xkUG9zTGlzdFtpXTtcclxuICAgICAgICAgICAgaWYodGFyZ2V0UG9zKXtcclxuICAgICAgICAgICAgICAgIGdvbGROb2RlID0gdGhpcy5fZ2V0T25lR29sZCgpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fYWRkRmx5QWN0aW9uKGdvbGROb2RlLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3RhcnRQb3MgOiBkYXRhT2JqLnN0YXJ0UG9zLFxyXG4gICAgICAgICAgICAgICAgICAgIHRhcmdldFBvcyA6IHRhcmdldFBvc1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIGlmKCF0aGlzLl9kaWN0X2dvbGRTb3J0W2RhdGFPYmoudGFibGVJbmRleF0pIHRoaXMuX2RpY3RfZ29sZFNvcnRbZGF0YU9iai50YWJsZUluZGV4XSA9IFtdO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fZGljdF9nb2xkU29ydFtkYXRhT2JqLnRhYmxlSW5kZXhdLnB1c2goZ29sZE5vZGUpO1xyXG4gICAgICAgICAgICAgICAgbGFzdEdvbGQgPSBnb2xkTm9kZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZihkYXRhT2JqLmdvbGROdW0gPiAwKSBHRy5hdWRpb01nci5wbGF5U291bmQoMTUpO1xyXG4gICAgICAgIGlmKGxhc3RHb2xkKSBsYXN0R29sZC5jYWxsQmFjayA9IGRhdGFPYmouY2FsbEZ1bmM7XHJcbiAgICB9LFxyXG4gICAgLy/ku47mipXms6jljLrln5/liLDnjqnlrrZcclxuICAgIHRhYmxlVG9QbGF5ZXIgOiBmdW5jdGlvbiAoZGF0YU9iaikge1xyXG4gICAgICAgIC8vdmFyIGRhdGFPYmogPSBHX09CSi5kYXRhX2ZseUdvbGRfdGFibGVUb1BsYXllcigpO1xyXG4gICAgICAgIHZhciBnb2xkTGlzdCA9IHRoaXMuX2dldFJlbW92ZUdvbGQoZGF0YU9iai50YWJsZUluZGV4LCBkYXRhT2JqLmdvbGROdW0pO1xyXG4gICAgICAgIHZhciBnb2xkTm9kZTtcclxuICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgZGF0YU9iai5nb2xkTnVtOyBpICsrKXtcclxuICAgICAgICAgICAgZ29sZE5vZGUgPSBnb2xkTGlzdFtpXTtcclxuICAgICAgICAgICAgaWYoZ29sZE5vZGUpe1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fYWRkRmx5QWN0aW9uMihnb2xkTm9kZSwge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vc3RhcnRQb3MgOiBzdGFydFBvcywgIC8v5Y+v5Lul6K6p5YW25LuO5b2T5YmN55qE5L2N572u5Ye65Y+RXHJcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0UG9zIDogZGF0YU9iai50YXJnZXRQb3NcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgLy9pZihkYXRhT2JqLmdvbGROdW0gPiAwKSBHRy5hdWRpb01nci5wbGF5U291bmQoMTgpO1xyXG4gICAgfSxcclxuXHJcbiAgICAvL+WbnuaUtuWJqeS9meeahOmHkeW4gVxyXG4gICAgcmVjb3ZlckFsbEdvbGQgOiBmdW5jdGlvbiAodGFyZ2V0UG9zKSB7XHJcbiAgICAgICAgdmFyIGdvbGRMaXN0ID0gW10sIGlzSGF2ZUdvbGQgPSBmYWxzZTtcclxuICAgICAgICBmb3IodmFyIHRhYmxlSW5kZXggaW4gdGhpcy5fZGljdF9nb2xkU29ydCl7XHJcbiAgICAgICAgICAgIGlmKHRoaXMuX2RpY3RfZ29sZFNvcnRbdGFibGVJbmRleF0pIGdvbGRMaXN0ID0gZ29sZExpc3QuY29uY2F0KHRoaXMuX2RpY3RfZ29sZFNvcnRbdGFibGVJbmRleF0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLl9kaWN0X2dvbGRTb3J0ID0ge307XHJcbiAgICAgICAgdmFyIGdvbGROb2RlO1xyXG4gICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCBnb2xkTGlzdC5sZW5ndGg7IGkgKyspe1xyXG4gICAgICAgICAgICBnb2xkTm9kZSA9IGdvbGRMaXN0W2ldO1xyXG4gICAgICAgICAgICBpZihnb2xkTm9kZSl7XHJcbiAgICAgICAgICAgICAgICBpc0hhdmVHb2xkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2FkZEZseUFjdGlvbjIoZ29sZE5vZGUsIHtcclxuICAgICAgICAgICAgICAgICAgICAvL3N0YXJ0UG9zIDogc3RhcnRQb3MsICAvL+WPr+S7peiuqeWFtuS7juW9k+WJjeeahOS9jee9ruWHuuWPkVxyXG4gICAgICAgICAgICAgICAgICAgIHRhcmdldFBvcyA6IHRhcmdldFBvc1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAvL2lmKGdvbGRMaXN0Lmxlbmd0aCA+IDApIEdHLmF1ZGlvTWdyLnBsYXlTb3VuZCgxOCk7XHJcbiAgICAgICAgcmV0dXJuIGlzSGF2ZUdvbGRcclxuICAgIH0sXHJcblxyXG4gICAgLy/ku47kuIDkuKrmipXms6jljLrln5/kuK3ojrflj5bpmo/mnLrnmoTlh6DkuKrph5HluIEs55So5LqO5Zue5pS256e75YqoXHJcbiAgICBfZ2V0UmVtb3ZlR29sZCA6IGZ1bmN0aW9uICh0YWJsZUluZGV4LCBnb2xkTnVtKSB7XHJcbiAgICAgICAgaWYoIXRoaXMuX2RpY3RfZ29sZFNvcnRbdGFibGVJbmRleF0pIHJldHVybiBbXVxyXG4gICAgICAgIGlmKGdvbGROdW0gPj0gdGhpcy5fZGljdF9nb2xkU29ydFt0YWJsZUluZGV4XS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgdmFyIGdvbGRMaXN0ID0gdGhpcy5fZGljdF9nb2xkU29ydFt0YWJsZUluZGV4XS5jb25jYXQoW10pO1xyXG4gICAgICAgICAgICB0aGlzLl9kaWN0X2dvbGRTb3J0W3RhYmxlSW5kZXhdID0gbnVsbDtcclxuICAgICAgICAgICAgcmV0dXJuIGdvbGRMaXN0XHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9kaWN0X2dvbGRTb3J0W3RhYmxlSW5kZXhdLnNwbGljZSgwLGdvbGROdW0pO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgLy/lop7liqDkuIDkuKrph5HluIHnp7vliqjnmoTliqjkvZwtLS3mipXms6jph5HluIFcclxuICAgIF9hZGRGbHlBY3Rpb24gOiBmdW5jdGlvbiAoZ29sZE5vZGUsIGZseUluZm8pIHtcclxuICAgICAgICB2YXIgc3RhcnRQb3MgPSBmbHlJbmZvLnN0YXJ0UG9zO1xyXG4gICAgICAgIHZhciB0YXJnZXRQb3MgPSBmbHlJbmZvLnRhcmdldFBvcztcclxuICAgICAgICBpZihzdGFydFBvcykgZ29sZE5vZGUucG9zaXRpb24gPSBzdGFydFBvcztcclxuICAgICAgICAvLyB2YXIgYWN0ID0gY2MubW92ZVRvKHRoaXMuX2dvbGRNb3ZlVGltZSwgdGFyZ2V0UG9zKS5lYXNpbmcoY2MuZWFzZU91dCgzLjApKTtcclxuICAgICAgICB2YXIgYWN0ID0gY2MubW92ZVRvKHRoaXMuX2dvbGRNb3ZlVGltZSwgdGFyZ2V0UG9zKTtcclxuICAgICAgICBnb2xkTm9kZS5ydW5BY3Rpb24oY2Muc2VxdWVuY2UoYWN0LCBjYy5jYWxsRnVuYyh0aGlzLl9nb2xkRmx5RW5kLCB0aGlzLCBmbHlJbmZvLmlzUmVtb3ZlKSkpO1xyXG4gICAgfSxcclxuICAgIC8v5aKe5Yqg5LiA5Liq6YeR5biB56e75Yqo55qE5Yqo5L2cLS0t5Zue5pS26YeRLeW4gVxyXG4gICAgX2FkZEZseUFjdGlvbjIgOiBmdW5jdGlvbiAoZ29sZE5vZGUsIGZseUluZm8pIHtcclxuICAgICAgICB2YXIgc3RhcnRQb3MgPSBmbHlJbmZvLnN0YXJ0UG9zO1xyXG4gICAgICAgIHZhciB0YXJnZXRQb3MgPSBmbHlJbmZvLnRhcmdldFBvcztcclxuICAgICAgICBpZihzdGFydFBvcykgZ29sZE5vZGUucG9zaXRpb24gPSBzdGFydFBvcztcclxuICAgICAgICB2YXIgYWN0ID0gY2MubW92ZVRvKHRoaXMuX3JlY292ZUdvbGRNb3ZlVGltZSwgdGFyZ2V0UG9zKTtcclxuICAgICAgICBnb2xkTm9kZS5ydW5BY3Rpb24oY2Muc2VxdWVuY2UoYWN0LCBjYy5jYWxsRnVuYyh0aGlzLl9nb2xkRmx5RW5kLCB0aGlzLCB0cnVlKSkpO1xyXG4gICAgfSxcclxuICAgIC8v6YeR5biB56e75Yqo57uT5p2fXHJcbiAgICBfZ29sZEZseUVuZCA6IGZ1bmN0aW9uIChnb2xkTm9kZSwgaXNSZW1vdmUpIHtcclxuICAgICAgICBpZihnb2xkTm9kZS5jYWxsQmFjayl7XHJcbiAgICAgICAgICAgIGdvbGROb2RlLmNhbGxCYWNrKCk7XHJcbiAgICAgICAgICAgIGdvbGROb2RlLmNhbGxCYWNrID0gbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmKGlzUmVtb3ZlKXtcclxuICAgICAgICAgICAgdGhpcy5fcmVtb3ZlR29sZChnb2xkTm9kZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICAvLz09PT09PT09PT09PT09PT09PT1cclxuXHJcbiAgICAvL+iOt+WPluS4gOS4qumHkeW4gVxyXG4gICAgX2dldE9uZUdvbGQgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYoIXRoaXMuZnJhbWVfZ29sZCkgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgaWYoIXRoaXMuX3Bvb2wpIHRoaXMuX3Bvb2wgPSBuZXcgY2MuTm9kZVBvb2woJ09ial9nb2xkQ29udGFpbmVyJyk7XHJcblxyXG4gICAgICAgIHZhciBnb2xkTm9kZSA9IHRoaXMuX3Bvb2wuZ2V0KCk7XHJcbiAgICAgICAgaWYoIWdvbGROb2RlKXtcclxuICAgICAgICAgICAgZ29sZE5vZGUgPSBuZXcgY2MuTm9kZSgpO1xyXG4gICAgICAgICAgICB2YXIgc3AgPSBnb2xkTm9kZS5hZGRDb21wb25lbnQoY2MuU3ByaXRlKTtcclxuICAgICAgICAgICAgc3Auc3ByaXRlRnJhbWUgPSB0aGlzLmZyYW1lX2dvbGQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGdvbGROb2RlLnBhcmVudCA9IHRoaXMubm9kZTtcclxuICAgICAgICAvL2dvbGROb2RlLnNjYWxlID0gKDEvdGhpcy5ub2RlLnBhcmVudC5zY2FsZSkqdGhpcy5fZ29sZFNjYWxlO1xyXG4gICAgICAgIGdvbGROb2RlLnNjYWxlID0gdGhpcy5fZ29sZFNjYWxlO1xyXG4gICAgICAgIGdvbGROb2RlLmFjdGl2ZSA9IHRydWU7XHJcbiAgICAgICAgcmV0dXJuIGdvbGROb2RlO1xyXG4gICAgfSxcclxuICAgIC8v56e76Zmk6YeR5biBXHJcbiAgICBfcmVtb3ZlR29sZCA6IGZ1bmN0aW9uIChnb2xkZU5vZGUpIHtcclxuICAgICAgICBnb2xkZU5vZGUuc3RvcEFsbEFjdGlvbnMoKTtcclxuICAgICAgICBnb2xkZU5vZGUuYWN0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5fcG9vbC5wdXQoZ29sZGVOb2RlKTtcclxuICAgIH0sXHJcblxyXG4gICAgZ2V0R29sZFNpemUgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYoIXRoaXMuX2dvbGRTaXplKXtcclxuICAgICAgICAgICAgdmFyIGdvbGQgPSB0aGlzLl9nZXRPbmVHb2xkKCk7XHJcbiAgICAgICAgICAgIHRoaXMuX2dvbGRTaXplID0gZ29sZC5nZXRDb250ZW50U2l6ZSgpO1xyXG4gICAgICAgICAgICB0aGlzLl9yZW1vdmVHb2xkKGdvbGQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5fZ29sZFNpemVcclxuICAgIH0sXHJcblxyXG4gICAgLy/muIXnkIbmiYDmnIlcclxuICAgIGNsZWFyQWxsIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBnb2xkTGlzdCA9IHRoaXMubm9kZS5jaGlsZHJlbjtcclxuICAgICAgICBmb3IodmFyIGkgPSBnb2xkTGlzdC5sZW5ndGgtMTsgaSA+PSAwOyBpIC0tKXtcclxuICAgICAgICAgICAgdGhpcy5fcmVtb3ZlR29sZChnb2xkTGlzdFtpXSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLl9kaWN0X2dvbGRTb3J0ID0ge307XHJcbiAgICAgICAgdGhpcy5ub2RlLnN0b3BBbGxBY3Rpb25zKCk7XHJcbiAgICB9LFxyXG5cclxuICAgIC8vIGNhbGxlZCBldmVyeSBmcmFtZSwgdW5jb21tZW50IHRoaXMgZnVuY3Rpb24gdG8gYWN0aXZhdGUgdXBkYXRlIGNhbGxiYWNrXHJcbiAgICAvLyB1cGRhdGU6IGZ1bmN0aW9uIChkdCkge1xyXG5cclxuICAgIC8vIH0sXHJcblxyXG4gICAgb25EZXN0cm95IDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmKHRoaXMuX3Bvb2wpe1xyXG4gICAgICAgICAgICB0aGlzLl9wb29sLmNsZWFyKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxufSk7XHJcbiIsIi8v5bem5LiK6KeS55qE6I+c5Y2V5oyJ6ZKuXHJcblxyXG5cclxuY2MuQ2xhc3Moe1xyXG4gICAgZXh0ZW5kczogcmVxdWlyZSgnQXV0b0RlYWxpbmcnKSxcclxuXHJcbiAgICBwcm9wZXJ0aWVzOiB7XHJcbiAgICAgICAgX2lzT3BlbiA6IG51bGwsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+aYr+WQpuaJk+W8gOiPnOWNlVxyXG4gICAgICAgIF9pc1BsYXlpbmdFZmYgOiBudWxsLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+aYr+WQpuato+WcqOaSreaUvueJueaViFxyXG4gICAgICAgIF9leGl0RnVuYyA6IG51bGwsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+mAgOWHuuWbnuiwg1xyXG4gICAgICAgIF9jaGFuZ2VGdW5jIDogbnVsbCwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+aNouahjOWbnuiwg1xyXG5cclxuICAgICAgICBub2RlX2RpckltZyA6IHtcclxuICAgICAgICAgICAgZGVmYXVsdCA6IG51bGwsXHJcbiAgICAgICAgICAgIHR5cGUgOiBjYy5Ob2RlLFxyXG4gICAgICAgICAgICBkaXNwbGF5TmFtZSA6ICfoj5zljZXmlrnlkJHlrrnlmagnXHJcbiAgICAgICAgfSxcclxuICAgICAgICBub2RlX2J0bkNvbnRhaW5lciA6IHtcclxuICAgICAgICAgICAgZGVmYXVsdCA6IG51bGwsXHJcbiAgICAgICAgICAgIHR5cGUgOiBjYy5Ob2RlLFxyXG4gICAgICAgICAgICBkaXNwbGF5TmFtZSA6ICfmjInpkq7lrrnlmagnXHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICAvLyB1c2UgdGhpcyBmb3IgaW5pdGlhbGl6YXRpb25cclxuICAgIG9uTG9hZDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuX2lzT3BlbiA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuX3NjYWxlVGltZSA9IDAuMjtcclxuICAgICAgICB0aGlzLl93YWl0VGltZSA9IDMuNTtcclxuXHJcbiAgICAgICAgdmFyIGV4aXRCdG4gPSB0aGlzLm5vZGVfYnRuQ29udGFpbmVyLmNoaWxkcmVuWzBdOy8v6YCA5Ye6XHJcbiAgICAgICAgdmFyIGNoYW5nZUJ0biA9IHRoaXMubm9kZV9idG5Db250YWluZXIuY2hpbGRyZW5bMV07Ly/mjaLmoYxcclxuICAgICAgICB0aGlzLnJlZ2lzdGVyQnV0dG9uKHRoaXMubm9kZV9kaXJJbWcsIHRoaXMuT25DbGlja19tZW51LCB0aGlzKTtcclxuICAgICAgICB0aGlzLnJlZ2lzdGVyQnV0dG9uKGV4aXRCdG4sIHRoaXMuT25DbGlja19leGl0LCB0aGlzKTtcclxuICAgICAgICB0aGlzLnJlZ2lzdGVyQnV0dG9uKGNoYW5nZUJ0biwgdGhpcy5PbkNsaWNrX2NoYW5nZSwgdGhpcyk7XHJcblxyXG4gICAgICAgIHRoaXMuc2V0QnRuRW5hYmxlKGNoYW5nZUJ0biwgZmFsc2UpXHJcbiAgICB9LFxyXG5cclxuICAgIC8v54K55Ye76I+c5Y2VXHJcbiAgICBPbkNsaWNrX21lbnUgOiBmdW5jdGlvbiAodGFyZ2V0KSB7XHJcbiAgICAgICAgdGhpcy5faXNPcGVuID0gIXRoaXMuX2lzT3BlbjtcclxuICAgICAgICB0aGlzLl9jaGFuZ2VEaXJJbWcodGhpcy5faXNPcGVuKTtcclxuICAgICAgICB0aGlzLl9zaG93T3BlbkVmZmVjdCgpO1xyXG4gICAgfSxcclxuICAgIC8v54K55Ye76YCA5Ye6XHJcbiAgICBPbkNsaWNrX2V4aXQgOiBmdW5jdGlvbiAodGFyZ2V0KSB7XHJcbiAgICAgICAgdGhpcy5PbkNsaWNrX21lbnUoKTtcclxuICAgICAgICBpZih0aGlzLl9leGl0RnVuYykgdGhpcy5fZXhpdEZ1bmMoKTtcclxuICAgIH0sXHJcbiAgICAvL+eCueWHu+aNouahjFxyXG4gICAgT25DbGlja19jaGFuZ2UgOiBmdW5jdGlvbiAodGFyZ2V0KSB7XHJcbiAgICAgICAgdGhpcy5PbkNsaWNrX21lbnUoKTtcclxuICAgICAgICBpZih0aGlzLl9jaGFuZ2VGdW5jKSB0aGlzLl9jaGFuZ2VGdW5jKCk7XHJcbiAgICB9LFxyXG5cclxuICAgIC8v6K6+572u6YCA5Ye65Ye95pWwXHJcbiAgICBiaW5kRnVuYyA6IGZ1bmN0aW9uIChleGl0RnVuYywgY2hhbmdlRnVuYykge1xyXG4gICAgICAgIHRoaXMuX2V4aXRGdW5jID0gZXhpdEZ1bmM7XHJcbiAgICAgICAgdGhpcy5fY2hhbmdlRnVuYyA9IGNoYW5nZUZ1bmM7XHJcbiAgICB9LFxyXG5cclxuICAgIC8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PeaViOaenOaYvuekulxyXG5cclxuICAgIC8v566t5aS05pa55ZCRXHJcbiAgICBfY2hhbmdlRGlySW1nIDogZnVuY3Rpb24gKGlzT3Blbikge1xyXG4gICAgICAgIHRoaXMubm9kZV9kaXJJbWcuY2hpbGRyZW5bMF0uYWN0aXZlID0gIWlzT3BlbjtcclxuICAgICAgICB0aGlzLm5vZGVfZGlySW1nLmNoaWxkcmVuWzFdLmFjdGl2ZSA9IGlzT3BlbjtcclxuICAgIH0sXHJcblxyXG4gICAgLy/mmL7npLrmiZPlvIDoj5zljZXnibnmlYhcclxuICAgIF9zaG93T3BlbkVmZmVjdCA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZighdGhpcy5faXNPcGVuKXtcclxuICAgICAgICAgICAgLy/lt7Lnu4/lnKjmkq3mlL7liqjnlLvkuoZcclxuICAgICAgICAgICAgdGhpcy5fc2hvd0Nsb3NlRWZmZWN0KCk7XHJcbiAgICAgICAgICAgIHJldHVyblxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLm5vZGVfYnRuQ29udGFpbmVyLnN0b3BBbGxBY3Rpb25zKCk7XHJcbiAgICAgICAgdGhpcy5ub2RlX2J0bkNvbnRhaW5lci5hY3RpdmUgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMubm9kZV9idG5Db250YWluZXIuc2NhbGVZID0gMDtcclxuXHJcbiAgICAgICAgdmFyIHRpbWUgPSB0aGlzLl9zY2FsZVRpbWU7XHJcbiAgICAgICAgdmFyIHNjYWxlQWN0ID0gY2Muc2NhbGVUbyh0aW1lLCAxLCAxKTtcclxuICAgICAgICB0aGlzLm5vZGVfYnRuQ29udGFpbmVyLnJ1bkFjdGlvbihjYy5zZXF1ZW5jZShzY2FsZUFjdCwgY2MuY2FsbEZ1bmModGhpcy5fYWRkV2FpdEFjdCwgdGhpcykpKTtcclxuICAgIH0sXHJcbiAgICAvL+WinuWKoOetieW+heWKqOS9nFxyXG4gICAgX2FkZFdhaXRBY3QgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5ub2RlX2J0bkNvbnRhaW5lci5zdG9wQWxsQWN0aW9ucygpO1xyXG4gICAgICAgIHZhciB0aW1lMSA9IHRoaXMuX3dhaXRUaW1lO1xyXG4gICAgICAgIHRoaXMubm9kZV9idG5Db250YWluZXIucnVuQWN0aW9uKGNjLnNlcXVlbmNlKGNjLmRlbGF5VGltZSh0aW1lMSksIGNjLmNhbGxGdW5jKHRoaXMuT25DbGlja19tZW51LCB0aGlzKSkpO1xyXG4gICAgfSxcclxuICAgIC8v5pi+56S65pS26LW36I+c5Y2V55qE54m55pWIXHJcbiAgICBfc2hvd0Nsb3NlRWZmZWN0IDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMubm9kZV9idG5Db250YWluZXIuc3RvcEFsbEFjdGlvbnMoKTtcclxuICAgICAgICB2YXIgdGltZSA9IHRoaXMuX3NjYWxlVGltZS8yO1xyXG4gICAgICAgIHZhciBzY2FsZUFjdCA9IGNjLnNjYWxlVG8odGltZSwgMSwgMCk7XHJcbiAgICAgICAgdGhpcy5ub2RlX2J0bkNvbnRhaW5lci5ydW5BY3Rpb24oc2NhbGVBY3QpO1xyXG4gICAgfSxcclxuXHJcbiAgICByZXNldFNob3cgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5fY2hhbmdlRGlySW1nKGZhbHNlKTtcclxuICAgICAgICB0aGlzLm5vZGVfYnRuQ29udGFpbmVyLmFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgfSxcclxuXHJcbiAgICAvLyBjYWxsZWQgZXZlcnkgZnJhbWUsIHVuY29tbWVudCB0aGlzIGZ1bmN0aW9uIHRvIGFjdGl2YXRlIHVwZGF0ZSBjYWxsYmFja1xyXG4gICAgLy8gdXBkYXRlOiBmdW5jdGlvbiAoZHQpIHtcclxuXHJcbiAgICAvLyB9LFxyXG59KTtcclxuIiwiLy/ot5Hpqaznga/vvIzlhazlkYpcclxuXHJcblxyXG5jYy5DbGFzcyh7XHJcbiAgICBleHRlbmRzOiBjYy5Db21wb25lbnQsXHJcbiAgICBfbW92ZVNwZWVkIDogbnVsbCwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5q+P56eS56e75Yqo55qE6YCf5bqmXHJcbiAgICBfaXNNb3ZlIDogbnVsbCwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5piv5ZCm56e75YqoXHJcbiAgICBfbGlzdF9tc2cgOiBudWxsLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5pi+56S65raI5oGv55qE6Zif5YiXXHJcbiAgICBfZmlyc3RQb3NYIDogbnVsbCwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+mAmuefpeWHuueOsOeahOWIneWni+S9jee9rlxyXG4gICAgcHJvcGVydGllczoge1xyXG4gICAgICAgIG5vZGVfdmlldyA6IGNjLk5vZGUsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+aYvuekuuiKgueCuVxyXG4gICAgICAgIG5vZGVfY29udGVudCA6IGNjLk5vZGUsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+a7muWKqOiKgueCuVxyXG4gICAgICAgIC8vIG5vZGVfd2lmaTEgOiBjYy5Ob2RlLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL3dpZmkxXHJcbiAgICAgICAgLy8gbm9kZV93aWZpMiA6IGNjLk5vZGUsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vd2lmaTJcclxuICAgICAgICAvLyBub2RlX3dpZmkzIDogY2MuTm9kZSwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy93aWZpM1xyXG4gICAgfSxcclxuXHJcbiAgICAvLyB1c2UgdGhpcyBmb3IgaW5pdGlhbGl6YXRpb25cclxuICAgIG9uTG9hZDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuX2luaXRDb25maWdEYXRhKCk7XHJcbiAgICB9LFxyXG5cclxuICAgIC8v6K6+572u5YWs5ZGK6L+Q6KGM5bGe5oCnXHJcbiAgICBfaW5pdENvbmZpZ0RhdGEgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5fY3VyTGFiZWxOb2RlID0gdGhpcy5ub2RlX2NvbnRlbnQuY2hpbGRyZW5bMF07XHJcbiAgICAgICAgdGhpcy5fY3VyTGFiZWwxID0gdGhpcy5fY3VyTGFiZWxOb2RlLmdldENvbXBvbmVudChjYy5SaWNoVGV4dCk7XHJcbiAgICAgICAgdGhpcy5fZmlyc3RQb3NYID0gdGhpcy5fY3VyTGFiZWxOb2RlLngrdGhpcy5ub2RlX3ZpZXcud2lkdGgqMC43NTtcclxuICAgICAgICB0aGlzLl9lbmRQb3NYID0gdGhpcy5fY3VyTGFiZWxOb2RlLnggLSB0aGlzLm5vZGVfdmlldy53aWR0aCoyO1xyXG5cclxuICAgICAgICB0aGlzLl9pc01vdmUgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLl9tb3ZlU3BlZWQgPSBHX0NvbmZpZ19jb21tb24ubm90aWNlX3NwZWVkO1xyXG4gICAgICAgIC8vIHRoaXMuX3J1blRpbWUgPSAwO1xyXG4gICAgICAgIC8vIHRoaXMuX2ludGVydmFsX25leHQgPSBHX0NvbmZpZ19jb21tb24ubm90aWNlX3Nob3dUaW1lO1xyXG4gICAgICAgIHRoaXMuX2xpc3RfbXNnID0gW107XHJcbiAgICB9LFxyXG5cclxuICAgIC8vLy/lvIDlkK93aWZp5a6e5pe255uR5ZCsXHJcbiAgICAvL29wZW5XaWZpQW5pIDogZnVuY3Rpb24gKCkge1xyXG4gICAgLy9cclxuICAgIC8vfSxcclxuICAgIC8vLy/lhbPpl613aWZp55uR5ZCsXHJcbiAgICAvL2Nsb3NlV2lmaUFuaSA6IGZ1bmN0aW9uICgpIHtcclxuICAgIC8vXHJcbiAgICAvL30sXHJcbiAgICAvL+makOiXj+WFrOWRilxyXG4gICAgaGlkZU5vdGljZSA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLl9pc01vdmUgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLm5vZGUuYWN0aXZlID0gZmFsc2U7XHJcbiAgICB9LFxyXG5cclxuICAgIC8v5aKe5Yqg5YeG5aSH5pi+56S655qE5YWs5ZGK5raI5oGvXHJcbiAgICBhZGRNc2cgOiBmdW5jdGlvbiAobXNnKSB7XHJcbiAgICAgICAgdGhpcy5fcmVzZXRTaG93Q29udGVudChtc2cpO1xyXG4gICAgICAgIC8vbXNnID0gXCI8Y29sb3I9IzAwZmYwMD5SaWMxMTExMTE8L2M+PGNvbG9yPSMwZmZmZmY+VGV4dDwvY29sb3I+MTIxMzIxMzIxMzIxMzEzMTMyMTMyMTMyMTMyMTFcIjtcclxuICAgIH0sXHJcblxyXG4gICAgLy8vL+WinuWKoOS8mOWFiOaYvuekuueahOa2iOaBryjlvZPliY3mmL7npLrnu5PmnZ/lkI7mmL7npLopXHJcbiAgICAvL2FkZEhlaWdodFByaW9yaXR5TXNnIDogZnVuY3Rpb24gKG1zZykge1xyXG4gICAgLy8gICAgaWYoIXRoaXMuX2xpc3RfbXNnKSB0aGlzLl9yZXNldERhdGEoKTtcclxuICAgIC8vICAgIHRoaXMuX2xpc3RfbXNnLnNwbGljZSgwLDAsbXNnKTtcclxuICAgIC8vICAgIHRoaXMuX3NldE5leHRNc2coKTtcclxuICAgIC8vfSxcclxuICAgIC8vXHJcbiAgICAvLy8v55u05o6l5pi+56S655qE5raI5oGvKOWwhuS8muabv+aNouaOieW9k+WJjeeahOa2iOaBrylcclxuICAgIC8vYWRkRmlyc3RNc2cgOiBmdW5jdGlvbiAobXNnKSB7XHJcbiAgICAvLyAgICBpZighdGhpcy5fbGlzdF9tc2cpIHRoaXMuX3Jlc2V0RGF0YSgpO1xyXG4gICAgLy8gICAgdGhpcy5fY3VyTGFiZWwxLnN0cmluZyA9IG1zZztcclxuICAgIC8vICAgIHRoaXMuX3Jlc3RhcnRMYWJlbCgpO1xyXG4gICAgLy99LFxyXG5cclxuXHJcblxyXG4gICAgLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblxyXG4gICAgLy/kuIvkuIDmnaHlhazlkYpcclxuICAgIC8vX3NldE5leHRNc2cgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAvLyAgICBpZih0aGlzLl9pc01vdmUpIHJldHVybjtcclxuICAgIC8vXHJcbiAgICAvLyAgICBpZih0aGlzLl9saXN0X21zZy5sZW5ndGggPiAwKXtcclxuICAgIC8vICAgICAgICB0aGlzLm5vZGUuYWN0aXZlID0gdHJ1ZTtcclxuICAgIC8vICAgICAgICB2YXIgbXNnID0gdGhpcy5fbGlzdF9tc2dbMF07XHJcbiAgICAvLyAgICAgICAgdGhpcy5fbGlzdF9tc2cuc3BsaWNlKDAsIDEpO1xyXG4gICAgLy9cclxuICAgIC8vICAgICAgICB0aGlzLl9jdXJMYWJlbDEuc3RyaW5nID0gbXNnO1xyXG4gICAgLy8gICAgICAgIHRoaXMuX3Jlc3RhcnRMYWJlbCgpO1xyXG4gICAgLy8gICAgfWVsc2UgdGhpcy5ub2RlLmFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgLy99LFxyXG5cclxuICAgIC8v6YeN5paw6K6+572u5YaF5a65XHJcbiAgICBfcmVzZXRTaG93Q29udGVudCA6IGZ1bmN0aW9uIChtc2cpIHtcclxuICAgICAgICB0aGlzLm5vZGUuYWN0aXZlID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLl9pc01vdmU9IHRydWU7XHJcbiAgICAgICAgdGhpcy5fY3VyTGFiZWwxLnN0cmluZyA9IG1zZztcclxuICAgICAgICB0aGlzLl9yZXN0YXJ0TGFiZWwoKTtcclxuICAgIH0sXHJcblxyXG4gICAgLy/ph43mlrDlvIDlp4vnp7vliqhsYWJlbFxyXG4gICAgX3Jlc3RhcnRMYWJlbCA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLl9jdXJMYWJlbE5vZGUueCA9IHRoaXMuX2ZpcnN0UG9zWDtcclxuICAgICAgICAvLyB0aGlzLl9ydW5UaW1lID0gMDtcclxuICAgICAgICB0aGlzLl9pc01vdmUgPSB0cnVlO1xyXG4gICAgfSxcclxuXHJcbiAgICAvLyBjYWxsZWQgZXZlcnkgZnJhbWUsIHVuY29tbWVudCB0aGlzIGZ1bmN0aW9uIHRvIGFjdGl2YXRlIHVwZGF0ZSBjYWxsYmFja1xyXG4gICAgIHVwZGF0ZTogZnVuY3Rpb24gKGR0KSB7XHJcbiAgICAgICAgIGlmKHRoaXMuX2lzTW92ZSl7XHJcbiAgICAgICAgICAgICB0aGlzLl9jdXJMYWJlbE5vZGUueCAtPSBkdCAqIHRoaXMuX21vdmVTcGVlZDtcclxuICAgICAgICAgICAgIGlmKHRoaXMuX2N1ckxhYmVsTm9kZS54IDw9IHRoaXMuX2VuZFBvc1gpe1xyXG4gICAgICAgICAgICAgICAgIHRoaXMuX2lzTW92ZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgIHRoaXMubm9kZS5hY3RpdmUgPSBmYWxzZTtcclxuICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgIC8vIGlmKHRoaXMuX3J1blRpbWUgPj0gdGhpcy5faW50ZXJ2YWxfbmV4dCl7XHJcbiAgICAgICAgICAgICAvL1xyXG4gICAgICAgICAgICAgLy8gfWVsc2UgdGhpcy5fcnVuVGltZSArPSBkdDtcclxuICAgICAgICAgfVxyXG4gICAgIH0sXHJcbn0pO1xyXG4iLCIvL+WNoeeJjOe7k+aenOeahOaYvuekulxyXG5cclxuY2MuQ2xhc3Moe1xyXG4gICAgZXh0ZW5kczogY2MuQ29tcG9uZW50LFxyXG5cclxuICAgIHByb3BlcnRpZXM6IHtcclxuICAgICAgICBub2RlX3VwSW1hZ2UgOiBjYy5Ob2RlLFxyXG4gICAgICAgIG5vZGVfZG93bkltYWdlIDogY2MuTm9kZSxcclxuICAgICAgICBBdGxhc19vblBva2VyUmVzdWx0IDogY2MuU3ByaXRlQXRsYXMsXHJcbiAgICB9LFxyXG5cclxuICAgIC8vIHVzZSB0aGlzIGZvciBpbml0aWFsaXphdGlvblxyXG4gICAgb25Mb2FkOiBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgfSxcclxuXHJcbiAgICBfaW5pdFNwcml0ZSA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLl91cFNwcml0ZSA9IHRoaXMubm9kZV91cEltYWdlLmdldENvbXBvbmVudChjYy5TcHJpdGUpO1xyXG4gICAgICAgIHRoaXMuX2Rvd25TcHJpdGUgPSB0aGlzLm5vZGVfZG93bkltYWdlLmdldENvbXBvbmVudChjYy5TcHJpdGUpO1xyXG4gICAgICAgIHRoaXMuX2RvbnRGcmFtZSA9IHRoaXMuQXRsYXNfb25Qb2tlclJlc3VsdC5nZXRTcHJpdGVGcmFtZShHX1JFU19VUkwuYXRsYXNfcG9rZXJSZXN1bHQuZG9udCk7XHJcbiAgICB9LFxyXG5cclxuICAgIC8v5pi+56S654mM5Z6L6K6h566X5a6M5oiQLCDmmL7npLrlrozmiJDkuKTkuKrlrZdcclxuICAgIHNob3dDYWxjdWxhdGVTdWNjZXNzIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMubm9kZS5hY3RpdmUgPSB0cnVlO1xyXG4gICAgICAgIGlmKCF0aGlzLl91cFNwcml0ZSl0aGlzLl9pbml0U3ByaXRlKCk7XHJcbiAgICAgICAgdGhpcy5ub2RlX2Rvd25JbWFnZS5hY3RpdmUgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLl91cFNwcml0ZS5zcHJpdGVGcmFtZSA9IHRoaXMuX2RvbnRGcmFtZTtcclxuICAgIH0sXHJcblxyXG4gICAgLy/mmL7npLrniYzlnotcclxuICAgIHNob3dQb2tlclJlc3VsdFZhbHVlIDogZnVuY3Rpb24gKHBva2VyVmFsdWUsIGlzT3ZlckFuaSkge1xyXG4gICAgICAgIHRoaXMubm9kZS5hY3RpdmUgPSB0cnVlO1xyXG4gICAgICAgIGlmKCF0aGlzLl91cFNwcml0ZSl0aGlzLl9pbml0U3ByaXRlKCk7XHJcblxyXG4gICAgICAgIGlmKHBva2VyVmFsdWUgPD0gMCl7XHJcbiAgICAgICAgICAgIC8v5rKh54mbXHJcbiAgICAgICAgICAgIHRoaXMubm9kZV9kb3duSW1hZ2UuYWN0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHBva2VyVmFsdWUgPSAnbm8nO1xyXG4gICAgICAgICAgICBpZih0aGlzLl9jYWxsRnVuYyl7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9jYWxsRnVuYygpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fY2FsbEZ1bmMgPSBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIHRoaXMubm9kZV9kb3duSW1hZ2UuYWN0aXZlID0gdHJ1ZTtcclxuICAgICAgICAgICAgaWYoIWlzT3ZlckFuaSkgdGhpcy5fb3BlblJlc3VsdEVmZmVjdCgpO1xyXG4gICAgICAgICAgICBlbHNle1xyXG4gICAgICAgICAgICAgICAgaWYodGhpcy5fY2FsbEZ1bmMpe1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2NhbGxGdW5jKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fY2FsbEZ1bmMgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgdG9GcmFtZSA9IHRoaXMuQXRsYXNfb25Qb2tlclJlc3VsdC5nZXRTcHJpdGVGcmFtZShHX1JFU19VUkwuYXRsYXNfcG9rZXJSZXN1bHQucmVzdWx0SW1nTmFtZStwb2tlclZhbHVlKTtcclxuICAgICAgICB0aGlzLl91cFNwcml0ZS5zcHJpdGVGcmFtZSA9IHRvRnJhbWU7XHJcbiAgICB9LFxyXG4gICAgX29wZW5SZXN1bHRFZmZlY3QgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5ub2RlX3VwSW1hZ2Uuc2NhbGUgPSAwO1xyXG4gICAgICAgIHRoaXMubm9kZV9kb3duSW1hZ2Uuc2NhbGUgPSAwO1xyXG5cclxuICAgICAgICB2YXIgdGltZSA9IEdfQ29uZmlnX2NsYXNzaWMudGltZV9wb2tlclJlc3VsdFNob3c7XHJcbiAgICAgICAgdmFyIGFjdDEgPSBjYy5zZXF1ZW5jZShjYy5zY2FsZVRvKHRpbWUsIEdfQ29uZmlnX2NsYXNzaWMuc2NhbGVfcG9rZXJSZXN1bHRTaG93KSwgY2Muc2NhbGVUbyh0aW1lLzIsIDEuMCkpO1xyXG4gICAgICAgIHZhciBhY3QyID0gY2Muc2NhbGVUbyh0aW1lLCAxLjApO1xyXG4gICAgICAgIHRoaXMubm9kZV9kb3duSW1hZ2UucnVuQWN0aW9uKGFjdDEpO1xyXG4gICAgICAgIHRoaXMubm9kZV91cEltYWdlLnJ1bkFjdGlvbihjYy5zZXF1ZW5jZShhY3QyLCBjYy5jYWxsRnVuYyhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmKHRoaXMuX2NhbGxGdW5jKXtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2NhbGxGdW5jKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9jYWxsRnVuYyA9IG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LCB0aGlzKSkpO1xyXG4gICAgfSxcclxuXHJcbiAgICBzZXRUcnVlUG9zIDogZnVuY3Rpb24gKHBvcykge1xyXG4gICAgICAgIHRoaXMubm9kZS5wb3NpdGlvbiA9IHBvcztcclxuICAgICAgICB0aGlzLmhpZGVPblBva2VyUmVzdWx0KCk7XHJcbiAgICB9LFxyXG5cclxuICAgIGhpZGVPblBva2VyUmVzdWx0IDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMubm9kZS5hY3RpdmUgPSBmYWxzZTtcclxuICAgIH0sXHJcblxyXG4gICAgZ2V0SXNTaG93IDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLm5vZGUuYWN0aXZlXHJcbiAgICB9LFxyXG5cclxuICAgIHNob3dSZXN1bHQgOiBmdW5jdGlvbiAocmVzdWx0UG9zLCByZXN1bHRWYWx1ZSwgaXNPdmVyQW5pLCBjYWxsRnVuYykge1xyXG4gICAgICAgIHRoaXMuX2NhbGxGdW5jID0gY2FsbEZ1bmM7XHJcbiAgICAgICAgaWYoaXNPdmVyQW5pKXtcclxuICAgICAgICAgICAgLy/ot7Pov4fliqjnlLtcclxuICAgICAgICAgICAgdGhpcy5ub2RlLnBvc2l0aW9uID0gcmVzdWx0UG9zO1xyXG4gICAgICAgICAgICB0aGlzLnNob3dQb2tlclJlc3VsdFZhbHVlKHJlc3VsdFZhbHVlLCB0cnVlKTtcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgdGhpcy5zZXRUcnVlUG9zKHJlc3VsdFBvcyk7XHJcbiAgICAgICAgICAgIHRoaXMuc2hvd1Bva2VyUmVzdWx0VmFsdWUocmVzdWx0VmFsdWUpO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgLy8gY2FsbGVkIGV2ZXJ5IGZyYW1lLCB1bmNvbW1lbnQgdGhpcyBmdW5jdGlvbiB0byBhY3RpdmF0ZSB1cGRhdGUgY2FsbGJhY2tcclxuICAgIC8vIHVwZGF0ZTogZnVuY3Rpb24gKGR0KSB7XHJcblxyXG4gICAgLy8gfSxcclxufSk7XHJcbiIsIi8v5pi+56S65YCN5pWw55qE5oyJ6ZKuXHJcblxyXG5jYy5DbGFzcyh7XHJcbiAgICBleHRlbmRzOiBjYy5Db21wb25lbnQsXHJcbiAgICBfdmFsdWVPZmZYIDogbnVsbCwgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5YCN5pWw5aSn5LqOMTDvvIzmmL7npLrlrrnlmajnmoTlgY/np7vph49cclxuICAgIHByb3BlcnRpZXM6IHtcclxuICAgICAgICBfZmlyc3RGcmFtZSA6IG51bGwsXHJcbiAgICAgICAgX2xhc3RWYWx1ZSA6IG51bGwsXHJcblxyXG4gICAgICAgIGZyYW1lX2Rpc2FibGUgOiBjYy5TcHJpdGVGcmFtZSwgICAgICAgICAgICAgLy/kuI3lj6/nlKjnmoTml7blgJnkvb/nlKjnmoTlm77niYdcclxuICAgICAgICBub2RlX2NlbnRlckxhYmVsIDoge1xyXG4gICAgICAgICAgICBkZWZhdWx0IDogbnVsbCxcclxuICAgICAgICAgICAgdHlwZSA6IGNjLk5vZGUsXHJcbiAgICAgICAgICAgIGRpc3BsYXlOYW1lIDogJ+aYvuekuuWGheWuueeahGxhYmVsJ1xyXG4gICAgICAgIH0sLy/kuI3lj6/nlKjnmoTml7blgJnkvb/nlKjnmoTlm77niYdcclxuICAgIH0sXHJcblxyXG4gICAgLy8gdXNlIHRoaXMgZm9yIGluaXRpYWxpemF0aW9uXHJcbiAgICBvbkxvYWQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLl9ub3JtYWxDb2xvciA9IG5ldyBjYy5Db2xvcigxOTksMTQwLDM5KTtcclxuICAgICAgICB0aGlzLl9jaG9vc2VDb2xvciA9IG5ldyBjYy5Db2xvcigxMzcsOTgsMjA3KTtcclxuICAgIH0sXHJcblxyXG4gICAgLy/mmL7npLrlgI3mlbDvvIzosIPmlbRsYWJlbOeahOWvuem9kFxyXG4gICAgc2hvd1ZhbHVlIDogZnVuY3Rpb24gKHZhbHVlLCBpc1JlZCkge1xyXG4gICAgICAgIHRoaXMuX3Nob3dNdWx0aXBsZSh2YWx1ZSwgaXNSZWQpO1xyXG4gICAgfSxcclxuICAgIC8v5pi+56S66YeR6ZKxXHJcbiAgICBzaG93TW9uZXkgOiBmdW5jdGlvbiAodmFsdWUsIGlzUmVkKSB7XHJcbiAgICAgICAgdGhpcy5fc2hvd01vbmV5RVgodmFsdWUsIGlzUmVkKTtcclxuICAgIH0sXHJcbiAgICBfaW5pdENvbnRhaW5lciA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZighdGhpcy5fY29udGFpbmVyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2NvbnRhaW5lciA9IHRoaXMubm9kZS5nZXRDaGlsZEJ5TmFtZSgnY29udGFpbmVyJyk7XHJcbiAgICAgICAgICAgIGlmKCF0aGlzLl9jb250YWluZXIpIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgdGhpcy5fZmlyc3RGcmFtZSA9IHRoaXMuZ2V0Q29tcG9uZW50KGNjLlNwcml0ZSkuc3ByaXRlRnJhbWU7XHJcbiAgICAgICAgICAgIHRoaXMuX3ZhbHVlT2ZmWCA9IEdfQ29uZmlnX2NvbW1vbi5udW1fbXVsdGlwbGVWYWx1ZU9mZjtcclxuICAgICAgICAgICAgdGhpcy5ub2RlX2xlZnRMYWJlbCA9IHRoaXMuX2NvbnRhaW5lci5nZXRDaGlsZEJ5TmFtZSgnbGVmdCcpO1xyXG4gICAgICAgICAgICB0aGlzLl9yaWdodExhYmVsID0gdGhpcy5fY29udGFpbmVyLmdldENoaWxkQnlOYW1lKCdyaWdodCcpLmdldENvbXBvbmVudChjYy5MYWJlbCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfSxcclxuICAgIF9pc1ZhbGlkVmFsdWUgOiBmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgICBpZighdmFsdWUpIHJldHVybiBmYWxzZTtcclxuICAgICAgICBpZih2YWx1ZSA9PSB0aGlzLl9sYXN0VmFsdWUpIHJldHVybiBmYWxzZTtcclxuICAgICAgICB0aGlzLl9sYXN0VmFsdWUgPSB2YWx1ZTtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH0sXHJcblxyXG4gICAgLy/mm7/mjaLnuqLoibLotYTmupBcclxuICAgIF9zaG93UmVkIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMubm9kZV9sZWZ0TGFiZWwuZ2V0Q29tcG9uZW50KGNjLkxhYmVsKS5mb250ID0gdGhpcy5mb250X3JlZDtcclxuICAgICAgICB0aGlzLl9yaWdodExhYmVsLmZvbnQgPSB0aGlzLmZvbnRfcmVkO1xyXG5cclxuICAgICAgICB0aGlzLl9zaG93RGlzYWJsZSh0cnVlKTtcclxuICAgIH0sXHJcblxyXG4gICAgLy/mm7/mjaLnu7/oibLotYTmupBcclxuICAgIF9zaG93R3JlZW4gOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5ub2RlX2xlZnRMYWJlbC5nZXRDb21wb25lbnQoY2MuTGFiZWwpLmZvbnQgPSB0aGlzLmZvbnRfZ3JlZW47XHJcbiAgICAgICAgdGhpcy5fcmlnaHRMYWJlbC5mb250ID0gdGhpcy5mb250X2dyZWVuO1xyXG5cclxuICAgICAgICB0aGlzLl9zaG93RGlzYWJsZShmYWxzZSk7XHJcbiAgICB9LFxyXG5cclxuICAgIF9zaG93RGlzYWJsZSA6IGZ1bmN0aW9uIChpc0Rpc2FibGUpIHtcclxuICAgICAgICBpZighdGhpcy5fZmlyc3RGcmFtZSkgdGhpcy5fZmlyc3RGcmFtZSA9IHRoaXMuZ2V0Q29tcG9uZW50KGNjLlNwcml0ZSkuc3ByaXRlRnJhbWU7XHJcbiAgICAgICAgaWYoaXNEaXNhYmxlKXtcclxuICAgICAgICAgICAgdGhpcy5nZXRDb21wb25lbnQoY2MuU3ByaXRlKS5zcHJpdGVGcmFtZSA9IHRoaXMuZnJhbWVfZGlzYWJsZTtcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgdGhpcy5nZXRDb21wb25lbnQoY2MuU3ByaXRlKS5zcHJpdGVGcmFtZSA9IHRoaXMuX2ZpcnN0RnJhbWU7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcblxyXG4gICAgLy/mmL7npLrlgI3mlbBcclxuICAgIF9zaG93TXVsdGlwbGUgOiBmdW5jdGlvbiAodmFsdWUsIGlzUmVkKSB7XHJcbiAgICAgICAgdGhpcy5ub2RlX2NlbnRlckxhYmVsLmdldENvbXBvbmVudChjYy5MYWJlbCkuc3RyaW5nID0gdmFsdWUrJ+WAjSc7XHJcbiAgICAgICAgdGhpcy5ub2RlX2NlbnRlckxhYmVsLmdldENvbXBvbmVudChjYy5MYWJlbE91dGxpbmUpLmNvbG9yID0gdGhpcy5nZXRPdXRMaW5lQ29sb3IoaXNSZWQpO1xyXG4gICAgICAgIHRoaXMuX3Nob3dEaXNhYmxlKGlzUmVkKTtcclxuICAgIH0sXHJcbiAgICAvL+aYvuekuumHkemSsVxyXG4gICAgX3Nob3dNb25leUVYIDogZnVuY3Rpb24gKHZhbHVlLCBpc1JlZCkge1xyXG4gICAgICAgIGlmKHZhbHVlKSB0aGlzLm5vZGVfY2VudGVyTGFiZWwuZ2V0Q29tcG9uZW50KGNjLkxhYmVsKS5zdHJpbmcgPSBHX1RPT0wuY2hhbmdlTW9uZXkodmFsdWUpO1xyXG4gICAgICAgIHRoaXMubm9kZV9jZW50ZXJMYWJlbC5nZXRDb21wb25lbnQoY2MuTGFiZWxPdXRsaW5lKS5jb2xvciA9IHRoaXMuZ2V0T3V0TGluZUNvbG9yKGlzUmVkKTtcclxuICAgICAgICB0aGlzLl9zaG93RGlzYWJsZShpc1JlZCk7XHJcbiAgICB9LFxyXG5cclxuICAgIC8v6I635Y+W5a+55bqU6aKc6ImyXHJcbiAgICBnZXRPdXRMaW5lQ29sb3IgOiBmdW5jdGlvbiAoaXNSZWQpIHtcclxuICAgICAgICByZXR1cm4gaXNSZWQgPyB0aGlzLl9jaG9vc2VDb2xvciA6IHRoaXMuX25vcm1hbENvbG9yO1xyXG4gICAgfSxcclxuXHJcbiAgICAvLyBjYWxsZWQgZXZlcnkgZnJhbWUsIHVuY29tbWVudCB0aGlzIGZ1bmN0aW9uIHRvIGFjdGl2YXRlIHVwZGF0ZSBjYWxsYmFja1xyXG4gICAgLy8gdXBkYXRlOiBmdW5jdGlvbiAoZHQpIHtcclxuXHJcbiAgICAvLyB9LFxyXG59KTtcclxuIiwiLy/kvb/nlKjnmoTljaHniYzlr7nosaFcclxuXHJcbmNjLkNsYXNzKHtcclxuICAgIGV4dGVuZHM6IGNjLkNvbXBvbmVudCxcclxuICAgIF9pc015c2VsZiA6IG51bGwsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5piv5ZCm5piv546p5a626Ieq5bexXHJcbiAgICBfb3duUGxheWVyIDogbnVsbCwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+WxnuS6juWTquS4queOqeWutlxyXG4gICAgX2lzQ2hvb3NlIDogbnVsbCwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/mmK/lkKbooqvpgInkuK1cclxuICAgIF9jYWxsRnVuYyA6IG51bGwsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+W8gOeJjOWKqOS9nOeahOWbnuiwg1xyXG4gICAgX3Bva2VyVmFsdWUgOiBudWxsLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/ljaHniYznmoTlgLxcclxuICAgIF9wb2tlclR5cGUgOiBudWxsLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5Y2h54mM55qE57G75Z6LXHJcbiAgICBfbGFiZWxfdmFsdWUgOiBudWxsLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+aYvuekuueJjOWAvOeahGxhYmVsXHJcbiAgICBwcm9wZXJ0aWVzOiB7XHJcbiAgICAgICAgbm9kZV9wb2tlclBsdXMgOiBjYy5Ob2RlLFxyXG4gICAgICAgIG5vZGVfcG9rZXJOZWdhdGl2ZSA6IGNjLk5vZGUsXHJcbiAgICAgICAgbm9kZV9wb2tlclZhbHVlIDogY2MuTm9kZSxcclxuICAgICAgICBub2RlX21pbkljb24gOiBjYy5Ob2RlLFxyXG4gICAgICAgIG5vZGVfbWF4SWNvbiA6IGNjLk5vZGUsXHJcbiAgICAgICAgbm9kZV9zcGVjaWFsSWNvbiA6IGNjLk5vZGUsXHJcbiAgICAgICAgZnJhbWVfcG9rZXJVSSA6IGNjLlNwcml0ZUF0bGFzLCAgICAgICAgICAgICAvL+WNoeeJjOWfuuehgOaYvuekuuWbvueJh+mbhlxyXG4gICAgICAgIGZvbnRfYmxhY2sgOiBjYy5Gb250LCAgICAgICAgICAgICAgICAgICAgICAgLy/pu5HoibLlrZfkvZNcclxuICAgICAgICBmb250X3JlZCA6IGNjLkZvbnQsICAgICAgICAgICAgICAgICAgICAgICAgIC8v57qi6Imy5a2X5L2TXHJcbiAgICB9LFxyXG5cclxuICAgIC8vIHVzZSB0aGlzIGZvciBpbml0aWFsaXphdGlvblxyXG4gICAgb25Mb2FkOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5faW5pdCgpO1xyXG5cclxuICAgICAgICAvL3RoaXMuc2V0UG9rZXJJbmZvKEdfVFlQRS5wb2tlclR5cGUucmVkSGVhcnQsIDEyKVxyXG4gICAgfSxcclxuXHJcbiAgICBfaW5pdCA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLl9pc0Nob29zZSA9IGZhbHNlO1xyXG5cclxuICAgICAgICB0aGlzLl9sYWJlbF92YWx1ZSA9IHRoaXMubm9kZV9wb2tlclZhbHVlLmdldENvbXBvbmVudChjYy5MYWJlbCk7XHJcbiAgICAgICAgdGhpcy5fc3ByaXRlX21pbiA9IHRoaXMubm9kZV9taW5JY29uLmdldENvbXBvbmVudChjYy5TcHJpdGUpO1xyXG4gICAgICAgIHRoaXMuX3Nwcml0ZV9tYXggPSB0aGlzLm5vZGVfbWF4SWNvbi5nZXRDb21wb25lbnQoY2MuU3ByaXRlKTtcclxuICAgICAgICB0aGlzLl9vcGVuUG9rZXJUaW1lID0gR19Db25maWdfY29tbW9uLnRpbWVfcG9rZXJPcGVuO1xyXG4gICAgICAgIHRoaXMuX2NsYXNzaWNfb3RoZXJTY2FsZSA9IEdfQ29uZmlnX2NsYXNzaWMuc2NhbGVfbm9NeVBva2VyO1xyXG4gICAgICAgIHRoaXMuX2NsYXNzaWNfZmx5VGltZSA9IEdfQ29uZmlnX2NsYXNzaWMudGltZV9wb2tlckZseTtcclxuICAgICAgICB0aGlzLl9jbGFzc2ljX21vdmVVcCA9IEdfQ29uZmlnX2NsYXNzaWMubnVtX3Bva2VyVXA7XHJcblxyXG4gICAgICAgIHRoaXMubm9kZV9wb2tlclBsdXMuYWN0aXZlID0gdHJ1ZTtcclxuICAgIH0sXHJcblxyXG4gICAgYmluZFBsYXllciA6IGZ1bmN0aW9uIChwbGF5ZXIpIHtcclxuICAgICAgICB0aGlzLl9vd25QbGF5ZXIgPSBwbGF5ZXI7XHJcbiAgICB9LFxyXG5cclxuICAgIC8v5pi+56S65Y2h54mM55qE6IOM6Z2iXHJcbiAgICBzaG93UG9rZXJOZWdhdGl2ZSA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLm5vZGVfcG9rZXJQbHVzLnkgPSAwO1xyXG4gICAgICAgIHRoaXMubm9kZV9wb2tlclBsdXMuc2NhbGUgPSAxO1xyXG4gICAgICAgIC8vdGhpcy5ub2RlX3Bva2VyUGx1cy5hY3RpdmUgPSB0cnVlO1xyXG5cclxuICAgICAgICB0aGlzLm5vZGVfcG9rZXJOZWdhdGl2ZS5hY3RpdmUgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMubm9kZV9wb2tlck5lZ2F0aXZlLnNjYWxlID0gMTtcclxuICAgIH0sXHJcbiAgICBzaG93UG9rZXJQbHVzIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8vdGhpcy5ub2RlX3Bva2VyUGx1cy5hY3RpdmUgPSB0cnVlO1xyXG4gICAgICAgIGlmICh0aGlzLm5vZGVfcG9rZXJOZWdhdGl2ZSkgdGhpcy5ub2RlX3Bva2VyTmVnYXRpdmUuYWN0aXZlID0gZmFsc2U7XHJcbiAgICB9LFxyXG5cclxuXHJcbiAgICAvLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblxyXG4gICAgLy/np7vliqjljaHniYxcclxuICAgIGZseVBva2VyIDogZnVuY3Rpb24gKHN0YXJ0UG9zLCB0YXJnZXRQb3MsIGlzTXlzZWxmKSB7XHJcbiAgICAgICAgdGhpcy5vbkNsZWFyKCk7XHJcbiAgICAgICAgdGhpcy5zaG93UG9rZXJOZWdhdGl2ZSgpO1xyXG4gICAgICAgIHRoaXMuX2lzTXlzZWxmID0gaXNNeXNlbGY7XHJcbiAgICAgICAgaWYoIXRoaXMuX2lzTXlzZWxmKXtcclxuICAgICAgICAgICAgLy/kuI3mmK/lsZ7kuo7lvZPliY3njqnlrrbnmoTljaHniYxcclxuICAgICAgICAgICAgdGhpcy5ub2RlLnNjYWxlID0gdGhpcy5fY2xhc3NpY19vdGhlclNjYWxlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5ub2RlLnBvc2l0aW9uID0gc3RhcnRQb3M7XHJcbiAgICAgICAgdmFyIGN1clBvc1ggPSB0YXJnZXRQb3MueDsvL2Vhc2VRdWFydGljQWN0aW9uT3V0XHJcbiAgICAgICAgdmFyIGFjdDEgPSBjYy5tb3ZlVG8odGhpcy5fY2xhc3NpY19mbHlUaW1lLCBjdXJQb3NYLCB0YXJnZXRQb3MueSk7XHJcbiAgICAgICAgdmFyIGFjdDEgPSBjYy5tb3ZlVG8oMC40LCBjdXJQb3NYLCB0YXJnZXRQb3MueSk7XHJcbiAgICAgICAgdGhpcy5ub2RlLnJ1bkFjdGlvbihjYy5zZXF1ZW5jZShhY3QxLCBjYy5jYWxsRnVuYyh0aGlzLl9mbHlQb2tlckVuZCwgdGhpcykpKTtcclxuICAgIH0sXHJcbiAgICBfZmx5UG9rZXJFbmQgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYodGhpcy5faXNNeXNlbGYpdGhpcy5vcGVuUG9rZXIoKTtcclxuXHJcbiAgICAgICAgdGhpcy5fb3duUGxheWVyLmFkZEZseUVuZFBva2VyKCk7XHJcbiAgICB9LFxyXG5cclxuICAgIC8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuXHJcbiAgICAvL+aJk+W8gOWNoeeJjFxyXG4gICAgb3BlblBva2VyIDogZnVuY3Rpb24gKGNhbGxCYWNrKSB7XHJcbiAgICAgICAgaWYodGhpcy5ub2RlX3Bva2VyTmVnYXRpdmUuYWN0aXZlID09PSBmYWxzZSkgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIHRoaXMubm9kZV9wb2tlck5lZ2F0aXZlLmFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMubm9kZV9wb2tlclBsdXMuYWN0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5fY2FsbEZ1bmMgPSBjYWxsQmFjaztcclxuICAgICAgICB0aGlzLnNob3dQb2tlck5lZ2F0aXZlKCk7XHJcblxyXG4gICAgICAgIHZhciByb3RhdGUxID0gY2Muc2NhbGVUbyh0aGlzLl9vcGVuUG9rZXJUaW1lKjAuNSwgMCwgMSk7XHJcbiAgICAgICAgdGhpcy5ub2RlX3Bva2VyTmVnYXRpdmUucnVuQWN0aW9uKGNjLnNlcXVlbmNlKHJvdGF0ZTEsIGNjLmNhbGxGdW5jKHRoaXMuX29wZW5Qb2tlcl9zaG93VmFsdWUsIHRoaXMpKSk7XHJcbiAgICAgICAgcmV0dXJuIHRydWVcclxuICAgIH0sXHJcbiAgICBfb3BlblBva2VyX3Nob3dWYWx1ZSA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLm5vZGVfcG9rZXJOZWdhdGl2ZS5hY3RpdmUgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLm5vZGVfcG9rZXJQbHVzLmFjdGl2ZSA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5ub2RlX3Bva2VyUGx1cy5zY2FsZVggPSAwO1xyXG4gICAgICAgIHZhciByb3RhdGUxID0gY2Muc2NhbGVUbyh0aGlzLl9vcGVuUG9rZXJUaW1lKjAuNSwgMSwgMSk7XHJcbiAgICAgICAgdGhpcy5ub2RlX3Bva2VyUGx1cy5ydW5BY3Rpb24oY2Muc2VxdWVuY2Uocm90YXRlMSwgY2MuY2FsbEZ1bmModGhpcy5fb3BlblBva2VyX2VuZCwgdGhpcykpKTtcclxuICAgIH0sXHJcbiAgICBfb3BlblBva2VyX2VuZCA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAvL29wZW5Qb2tlcl9lbmQtLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgICAgICAgaWYodGhpcy5fY2FsbEZ1bmMpIHRoaXMuX2NhbGxGdW5jKCk7XHJcbiAgICAgICAgdGhpcy5fY2FsbEZ1bmMgPSBudWxsO1xyXG4gICAgfSxcclxuXHJcbiAgICAvLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblxyXG4gICAgLy/miZPlh7rljaHniYznu5PmnpwgIGFjdGlvbkNhbGxGdW5jIDog5Y2h54mM56e75Yqo5Yiw5byA54mM5L2N572u5ZCO55qE5Zue6LCDXHJcbiAgICAvL21vdmVUb1Jlc3VsdFBvcyA6IGZ1bmN0aW9uICh0YXJnZXRQb3NZLCBhY3Rpb25DYWxsRnVuYykge1xyXG4gICAgLy8gICAgdGhpcy5ub2RlX3Bva2VyUGx1cy55ID0gMDtcclxuICAgIC8vICAgIHZhciBwb3MgPSBjYy5wKHRoaXMubm9kZS54LCB0YXJnZXRQb3NZKTtcclxuICAgIC8vICAgIGlmKGFjdGlvbkNhbGxGdW5jKXRoaXMubm9kZS5ydW5BY3Rpb24oY2Muc2VxdWVuY2UoY2MubW92ZVRvKEdfQ29uZmlnX2NsYXNzaWMudGltZV9wb2tlck1vdmVUb1Jlc3VsdCwgcG9zKSwgYWN0aW9uQ2FsbEZ1bmMpKTtcclxuICAgIC8vICAgIGVsc2UgdGhpcy5ub2RlLnJ1bkFjdGlvbihjYy5tb3ZlVG8oR19Db25maWdfY2xhc3NpYy50aW1lX3Bva2VyTW92ZVRvUmVzdWx0LCBwb3MpKTtcclxuICAgIC8vfSxcclxuXHJcbiAgICAvLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblxyXG4gICAgLy/ojrflj5bkuIDkuKrlrprliLbnmoTniYzpnaLmmL7npLpcclxuICAgIHNldFBva2VySW5mbyA6IGZ1bmN0aW9uIChwb2tlclR5cGUsIHBva2VyVmFsdWUsIGlzT3Blbikge1xyXG4gICAgICAgIHRoaXMubm9kZS5hY3RpdmUgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMubm9kZV9tYXhJY29uLmFjdGl2ZSA9IHRydWU7XHJcbiAgICAgICAgaWYgKHRoaXMubm9kZV9zcGVjaWFsSWNvbikgdGhpcy5ub2RlX3NwZWNpYWxJY29uLmFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuX3Bva2VyVmFsdWUgPSBwb2tlclZhbHVlO1xyXG4gICAgICAgIHRoaXMuX3Bva2VyVHlwZSA9IHBva2VyVHlwZTtcclxuICAgICAgICBpZihpc09wZW4pIHRoaXMuc2hvd1Bva2VyUGx1cygpO1xyXG4gICAgICAgIGVsc2UgdGhpcy5zaG93UG9rZXJOZWdhdGl2ZSgpO1xyXG5cclxuICAgICAgICAvL+ehruWumuWNoeeJjOexu+Wei1xyXG4gICAgICAgIHN3aXRjaCAocG9rZXJUeXBlKXtcclxuICAgICAgICAgICAgY2FzZSBHX1RZUEUucG9rZXJUeXBlLmJsb2NrOlxyXG4gICAgICAgICAgICAgICAgLy/mlrnlnZdcclxuICAgICAgICAgICAgICAgIHRoaXMuX2xhYmVsX3ZhbHVlLmZvbnQgPSB0aGlzLmZvbnRfcmVkO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fc3ByaXRlX21pbi5zcHJpdGVGcmFtZSA9IHRoaXMuZnJhbWVfcG9rZXJVSS5nZXRTcHJpdGVGcmFtZShHX1JFU19VUkwucG9rZXJUeXBlLmJsb2NrTWluKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3Nwcml0ZV9tYXguc3ByaXRlRnJhbWUgPSB0aGlzLmZyYW1lX3Bva2VyVUkuZ2V0U3ByaXRlRnJhbWUoR19SRVNfVVJMLnBva2VyVHlwZS5ibG9ja01heCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBHX1RZUEUucG9rZXJUeXBlLmJsYWNrSGVhcnQ6XHJcbiAgICAgICAgICAgICAgICAvL+m7keiJsuahg+W/g1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fbGFiZWxfdmFsdWUuZm9udCA9IHRoaXMuZm9udF9ibGFjaztcclxuICAgICAgICAgICAgICAgIHRoaXMuX3Nwcml0ZV9taW4uc3ByaXRlRnJhbWUgPSB0aGlzLmZyYW1lX3Bva2VyVUkuZ2V0U3ByaXRlRnJhbWUoR19SRVNfVVJMLnBva2VyVHlwZS5ibGFja0hlYXJ0TWluKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3Nwcml0ZV9tYXguc3ByaXRlRnJhbWUgPSB0aGlzLmZyYW1lX3Bva2VyVUkuZ2V0U3ByaXRlRnJhbWUoR19SRVNfVVJMLnBva2VyVHlwZS5ibGFja0hlYXJ0TWF4KTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIEdfVFlQRS5wb2tlclR5cGUucmVkSGVhcnQ6XHJcbiAgICAgICAgICAgICAgICAvL+e6ouiJsuahg+W/g1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fbGFiZWxfdmFsdWUuZm9udCA9IHRoaXMuZm9udF9yZWQ7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9zcHJpdGVfbWluLnNwcml0ZUZyYW1lID0gdGhpcy5mcmFtZV9wb2tlclVJLmdldFNwcml0ZUZyYW1lKEdfUkVTX1VSTC5wb2tlclR5cGUucmVkSGVhcnRNaW4pO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fc3ByaXRlX21heC5zcHJpdGVGcmFtZSA9IHRoaXMuZnJhbWVfcG9rZXJVSS5nZXRTcHJpdGVGcmFtZShHX1JFU19VUkwucG9rZXJUeXBlLnJlZEhlYXJ0TWF4KTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIEdfVFlQRS5wb2tlclR5cGUuZmxvd2VyOlxyXG4gICAgICAgICAgICAgICAgLy/mooXoirFcclxuICAgICAgICAgICAgICAgIHRoaXMuX2xhYmVsX3ZhbHVlLmZvbnQgPSB0aGlzLmZvbnRfYmxhY2s7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9zcHJpdGVfbWluLnNwcml0ZUZyYW1lID0gdGhpcy5mcmFtZV9wb2tlclVJLmdldFNwcml0ZUZyYW1lKEdfUkVTX1VSTC5wb2tlclR5cGUuZmxvd2VyTWluKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3Nwcml0ZV9tYXguc3ByaXRlRnJhbWUgPSB0aGlzLmZyYW1lX3Bva2VyVUkuZ2V0U3ByaXRlRnJhbWUoR19SRVNfVVJMLnBva2VyVHlwZS5mbG93ZXJNYXgpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8v56Gu5a6a5Y2h54mM55qE5YC8XHJcbiAgICAgICAgdmFyIHJlYWx5VmFsdWU7XHJcbiAgICAgICAgc3dpdGNoIChwb2tlclZhbHVlKXtcclxuICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgcmVhbHlWYWx1ZSA9ICdBJztcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIDEwOlxyXG4gICAgICAgICAgICAgICAgcmVhbHlWYWx1ZSA9ICcxJztcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIDExOlxyXG4gICAgICAgICAgICAgICAgcmVhbHlWYWx1ZSA9ICdKJztcclxuICAgICAgICAgICAgICAgIC8vIHRoaXMubm9kZV9tYXhJY29uLmFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgLy8gdGhpcy5ub2RlX3NwZWNpYWxJY29uLmFjdGl2ZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAvLyB0aGlzLm5vZGVfc3BlY2lhbEljb24uZ2V0Q29tcG9uZW50KGNjLlNwcml0ZSkuc3ByaXRlRnJhbWUgPSB0aGlzLmZyYW1lX3Bva2VyVUkuZ2V0U3ByaXRlRnJhbWUoR19SRVNfVVJMLnBva2VyVHlwZS52YWx1ZV9KKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIDEyOlxyXG4gICAgICAgICAgICAgICAgcmVhbHlWYWx1ZSA9ICdRJztcclxuICAgICAgICAgICAgICAgIC8vIHRoaXMubm9kZV9tYXhJY29uLmFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgLy8gdGhpcy5ub2RlX3NwZWNpYWxJY29uLmFjdGl2ZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAvLyB0aGlzLm5vZGVfc3BlY2lhbEljb24uZ2V0Q29tcG9uZW50KGNjLlNwcml0ZSkuc3ByaXRlRnJhbWUgPSB0aGlzLmZyYW1lX3Bva2VyVUkuZ2V0U3ByaXRlRnJhbWUoR19SRVNfVVJMLnBva2VyVHlwZS52YWx1ZV9RKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIDEzOlxyXG4gICAgICAgICAgICAgICAgcmVhbHlWYWx1ZSA9ICdLJztcclxuICAgICAgICAgICAgICAgIC8vIHRoaXMubm9kZV9tYXhJY29uLmFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgLy8gdGhpcy5ub2RlX3NwZWNpYWxJY29uLmFjdGl2ZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAvLyB0aGlzLm5vZGVfc3BlY2lhbEljb24uZ2V0Q29tcG9uZW50KGNjLlNwcml0ZSkuc3ByaXRlRnJhbWUgPSB0aGlzLmZyYW1lX3Bva2VyVUkuZ2V0U3ByaXRlRnJhbWUoR19SRVNfVVJMLnBva2VyVHlwZS52YWx1ZV9LKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgcmVhbHlWYWx1ZSA9IHBva2VyVmFsdWU7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuX2xhYmVsX3ZhbHVlLnN0cmluZyA9IHJlYWx5VmFsdWU7XHJcbiAgICB9LFxyXG5cclxuXHJcbiAgICAvLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblxyXG4gICAgZ2V0UG9rZXJWYWx1ZSA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fcG9rZXJWYWx1ZVxyXG4gICAgfSxcclxuXHJcbiAgICBnZXRQb2tlclR5cGUgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3Bva2VyVHlwZVxyXG4gICAgfSxcclxuXHJcbiAgICBnZXRQb2tlclNpemUgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubm9kZV9wb2tlck5lZ2F0aXZlLmdldENvbnRlbnRTaXplKCk7XHJcbiAgICB9LFxyXG5cclxuICAgIC8v5piv5ZCm6buR6Imy5Y2h54mMXHJcbiAgICBnZXRJc0JsYWNrIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmlzQmxhY2tDb2xvclxyXG4gICAgfSxcclxuXHJcbiAgICAvL+iuvue9ruWNoeeJjOaYr+WQpuWPr+S7peeCueWHu1xyXG4gICAgc2V0UG9rZXJUb3VjaEVuYWJsZSA6IGZ1bmN0aW9uIChpc0VuYWJsZSkge1xyXG4gICAgICAgIGlmKGlzRW5hYmxlKXtcclxuICAgICAgICAgICAgdGhpcy5ub2RlX3Bva2VyUGx1cy5vbihjYy5Ob2RlLkV2ZW50VHlwZS5UT1VDSF9TVEFSVCwgdGhpcy5fY2FsbGJhY2tfY2xpY2tQb2tlciwgdGhpcyk7XHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIHRoaXMubm9kZV9wb2tlclBsdXMub2ZmKGNjLk5vZGUuRXZlbnRUeXBlLlRPVUNIX1NUQVJULCB0aGlzLl9jYWxsYmFja19jbGlja1Bva2VyLCB0aGlzKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIC8v54K55Ye75Y2h54mM55qE5Zue6LCDXHJcbiAgICBfY2FsbGJhY2tfY2xpY2tQb2tlciA6IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgIHZhciBwb2tlciA9IGV2ZW50LnRhcmdldDtcclxuICAgICAgICBpZih0aGlzLl9pc0Nob29zZSl7XHJcbiAgICAgICAgICAgIHBva2VyLnkgLT0gdGhpcy5fY2xhc3NpY19tb3ZlVXA7XHJcbiAgICAgICAgICAgIHRoaXMuX2lzQ2hvb3NlID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHRoaXMuX293blBsYXllci50b3VjaFRoZVBva2VyRG93bigpO1xyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICB2YXIgdmFsdWUgPSB0aGlzLmdldFBva2VyVmFsdWUoKTtcclxuICAgICAgICAgICAgaWYodmFsdWUgPiAxMCkgdmFsdWUgPSAxMDtcclxuICAgICAgICAgICAgdmFyIGlzT2sgPSB0aGlzLl9vd25QbGF5ZXIudG91Y2hUaGVQb2tlclVwKHZhbHVlKTtcclxuICAgICAgICAgICAgaWYoaXNPayl7XHJcbiAgICAgICAgICAgICAgICBwb2tlci55ICs9IHRoaXMuX2NsYXNzaWNfbW92ZVVwO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5faXNDaG9vc2UgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICBvbkNsZWFyIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuX2lzQ2hvb3NlID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5ub2RlLnNjYWxlID0gMTtcclxuICAgIH0sXHJcblxyXG4gICAgY2xlYXJBbGxBY3Rpb25zIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMubm9kZV9wb2tlck5lZ2F0aXZlLnN0b3BBbGxBY3Rpb25zKCk7XHJcbiAgICAgICAgdGhpcy5ub2RlX3Bva2VyUGx1cy5zdG9wQWxsQWN0aW9ucygpO1xyXG4gICAgICAgIHRoaXMubm9kZS5zdG9wQWxsQWN0aW9ucygpO1xyXG4gICAgfSxcclxuXHJcbiAgICAvLyBjYWxsZWQgZXZlcnkgZnJhbWUsIHVuY29tbWVudCB0aGlzIGZ1bmN0aW9uIHRvIGFjdGl2YXRlIHVwZGF0ZSBjYWxsYmFja1xyXG4gICAgLy8gdXBkYXRlOiBmdW5jdGlvbiAoZHQpIHtcclxuXHJcbiAgICAvLyB9LFxyXG4gICAgXHJcbiAgICBvbkRlc3Ryb3kgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgLy90aGlzLnNldFBva2VyVG91Y2hFbmFibGUoZmFsc2UpO1xyXG4gICAgfVxyXG59KTtcclxuIiwiLy/lpb3lj4vmjpLooYzmppzmnaHnm67lpITnkIZcclxuXHJcblxyXG5jYy5DbGFzcyh7XHJcbiAgICBleHRlbmRzOiBjYy5Db21wb25lbnQsXHJcblxyXG4gICAgcHJvcGVydGllczoge1xyXG5cclxuICAgICAgICByaWNoUmFua0JHIDoge1xyXG4gICAgICAgICAgICBkZWZhdWx0IDogW10sXHJcbiAgICAgICAgICAgIHR5cGUgOiBjYy5TcHJpdGVGcmFtZSxcclxuICAgICAgICAgICAgZGlzcGxheU5hbWUgOiAn5a+M6LGq5qac5o6S5ZCN6IOM5pmvJ1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZ2FpblJhbmtCRyA6IHtcclxuICAgICAgICAgICAgZGVmYXVsdCA6IFtdLFxyXG4gICAgICAgICAgICB0eXBlIDogY2MuU3ByaXRlRnJhbWUsXHJcbiAgICAgICAgICAgIGRpc3BsYXlOYW1lIDogJ+ebiOWIqeamnOaOkuWQjeiDjOaZrydcclxuICAgICAgICB9LFxyXG4gICAgICAgIHNwcml0ZV9oYXQgOiB7XHJcbiAgICAgICAgICAgIGRlZmF1bHQgOiBudWxsLFxyXG4gICAgICAgICAgICB0eXBlIDogY2MuU3ByaXRlLFxyXG4gICAgICAgICAgICBkaXNwbGF5TmFtZSA6ICfnmoflhqAnXHJcbiAgICAgICAgfSxcclxuICAgICAgICBsYWJlbFJhbms6IHtcclxuICAgICAgICAgICAgZGVmYXVsdCA6IG51bGwsXHJcbiAgICAgICAgICAgIHR5cGUgOiBjYy5MYWJlbCxcclxuICAgICAgICAgICAgZGlzcGxheU5hbWUgOiAn5o6S5ZCN5pWw5a2XJ1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgbm9kZV9oZWFkSW1nIDoge1xyXG4gICAgICAgICAgICBkZWZhdWx0IDogbnVsbCxcclxuICAgICAgICAgICAgdHlwZSA6IGNjLk5vZGUsXHJcbiAgICAgICAgICAgIGRpc3BsYXlOYW1lIDogJ+WktOWDjydcclxuICAgICAgICB9LFxyXG4gICAgICAgIGxhYmVsX25hbWUgOiB7XHJcbiAgICAgICAgICAgIGRlZmF1bHQgOiBudWxsLFxyXG4gICAgICAgICAgICB0eXBlIDogY2MuTGFiZWwsXHJcbiAgICAgICAgICAgIGRpc3BsYXlOYW1lIDogJ+WQjeWtlydcclxuICAgICAgICB9LFxyXG4gICAgICAgIGxhYmVsX2dvbGRWYWx1ZSA6IHtcclxuICAgICAgICAgICAgZGVmYXVsdCA6IG51bGwsXHJcbiAgICAgICAgICAgIHR5cGUgOiBjYy5MYWJlbCxcclxuICAgICAgICAgICAgZGlzcGxheU5hbWUgOiAn6YeR5biB5pWw5YC8J1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgbm9kZV9nb2xkQkcgOiB7XHJcbiAgICAgICAgICAgIGRlZmF1bHQgOiBudWxsLFxyXG4gICAgICAgICAgICB0eXBlIDogY2MuTm9kZSxcclxuICAgICAgICAgICAgZGlzcGxheU5hbWUgOiAn6YeR5biB6IOM5pmvJ1xyXG4gICAgICAgIH0sXHJcbiAgICB9LFxyXG5cclxuICAgIC8vIHVzZSB0aGlzIGZvciBpbml0aWFsaXphdGlvblxyXG4gICAgb25Mb2FkOiBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgfSxcclxuXHJcbiAgICBpbml0IDogZnVuY3Rpb24gKGlzR2FpbiwgcmFuaywgcGxheWVySW5mbykge1xyXG4gICAgICAgIHRoaXMuX3NldEhhdChpc0dhaW4sIHBhcnNlSW50KHJhbmspKTtcclxuICAgICAgICB0aGlzLl9zZXRQbGF5ZXJOYW1lKHBsYXllckluZm8ubmlja25hbWUpO1xyXG4gICAgICAgIHRoaXMuX3NldEdvbGRWYWx1ZShwbGF5ZXJJbmZvLndhbGxldGJhbGFuY2UgPyBwbGF5ZXJJbmZvLndhbGxldGJhbGFuY2UgOiBwbGF5ZXJJbmZvLnByb2ZpdGFtb3VudCk7XHJcbiAgICAgICAgR19UT09MLnNldEhlYWRJbWcodGhpcy5ub2RlX2hlYWRJbWcsIHBsYXllckluZm8uYXZhdGFydXJsKTtcclxuICAgIH0sXHJcblxyXG4gICAgLy/orr7nva7liY3kuInlkI3lkI3mrKHlm77moIdcclxuICAgIF9zZXRIYXQgOiBmdW5jdGlvbiAoaXNHYWluLCByYW5rKSB7XHJcbiAgICAgICAgaWYgKHJhbmsgPCAzKSB7XHJcbiAgICAgICAgICAgIHRoaXMubGFiZWxSYW5rLm5vZGUuYWN0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgICAgIGlmIChpc0dhaW4pIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc3ByaXRlX2hhdC5zcHJpdGVGcmFtZSA9IHRoaXMuZ2FpblJhbmtCR1tyYW5rXTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc3ByaXRlX2hhdC5zcHJpdGVGcmFtZSA9IHRoaXMucmljaFJhbmtCR1tyYW5rXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMubGFiZWxSYW5rLm5vZGUuYWN0aXZlID0gdHJ1ZTtcclxuICAgICAgICAgICAgdGhpcy5sYWJlbFJhbmsuc3RyaW5nID0gKHJhbmsgKyAxKS50b1N0cmluZygpO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICAvL+eOqeWutuWQjeWtl1xyXG4gICAgX3NldFBsYXllck5hbWUgOiBmdW5jdGlvbiAocGxheWVyTmFtZSkge1xyXG4gICAgICAgIGlmKCFwbGF5ZXJOYW1lKSBwbGF5ZXJOYW1lID0gJyc7XHJcbiAgICAgICAgZWxzZSBwbGF5ZXJOYW1lID0gR19UT09MLmdldE5hbWVMaW1pdChwbGF5ZXJOYW1lLCAxNiwgZmFsc2UpO1xyXG4gICAgICAgIHRoaXMubGFiZWxfbmFtZS5zdHJpbmcgPSBwbGF5ZXJOYW1lO1xyXG4gICAgfSxcclxuICAgIC8v6YeR6aKd5pWw5YC8XHJcbiAgICBfc2V0R29sZFZhbHVlIDogZnVuY3Rpb24gKHZhbHVlKSB7XHJcbiAgICAgICAgdmFyIHN0cjtcclxuICAgICAgICBpZighdmFsdWUpIHtcclxuICAgICAgICAgICAgc3RyID0gR19DSElORVNFLm5vUmVjb3JkO1xyXG4gICAgICAgICAgICB0aGlzLm5vZGVfZ29sZEJHLmFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHN0ciA9IHZhbHVlICsgJyc7XHJcbiAgICAgICAgICAgIGlmIChzdHIubGVuZ3RoID49IDE3KSB7XHJcbiAgICAgICAgICAgICAgICBzdHIgPSBHX0NISU5FU0UudXBwZXJMaW1pdDtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHN0ciA9IEdfVE9PTC5jaGFuZ2VNb25leSh2YWx1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5ub2RlX2dvbGRCRy5hY3RpdmUgPSB0cnVlO1xyXG4gICAgICAgICAgICAvLyB0aGlzLl9yZXNldEJhY2tncm91bmQoc3RyKTsgICDkv53nlZlcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5sYWJlbF9nb2xkVmFsdWUuc3RyaW5nID0gc3RyO1xyXG4gICAgfSxcclxuXHJcbiAgICAvL+aUueWPmOiDjOaZr+mVv+W6plxyXG4gICAgX3Jlc2V0QmFja2dyb3VuZCA6IGZ1bmN0aW9uIChzdHIpIHtcclxuICAgICAgICBpZighdGhpcy5fd2lkdGhSYXRlKSB0aGlzLl93aWR0aFJhdGUgPSB0aGlzLm5vZGVfZ29sZEJHLndpZHRoLzY7XHJcbiAgICAgICAgaWYoIXRoaXMubm9kZV9nb2xkQkcuX2ZpcnN0VykgdGhpcy5ub2RlX2dvbGRCRy5fZmlyc3RXID0gdGhpcy5ub2RlX2dvbGRCRy53aWR0aDtcclxuXHJcbiAgICAgICAgdmFyIHdvcmRMZW49MCwgbmFtZSA9IHN0ciwgY3VyU3RyLCByZWcgPSAvXltcXHU0RTAwLVxcdTlGQTVdKyQvOztcclxuICAgICAgICBmb3IodmFyIGkgPTA7IGkgPCBuYW1lLmxlbmd0aDsgaSArKyl7XHJcbiAgICAgICAgICAgIGN1clN0ciA9IG5hbWVbaV07XHJcbiAgICAgICAgICAgIGlmKHJlZy50ZXN0KGN1clN0cikpIHtcclxuICAgICAgICAgICAgICAgIHdvcmRMZW4gKz0gMjtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHdvcmRMZW4gKz0gMTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIHRhcmdldFcgPSB3b3JkTGVuICogdGhpcy5fd2lkdGhSYXRlO1xyXG4gICAgICAgIHRoaXMubm9kZV9nb2xkQkcud2lkdGggPSBNYXRoLm1heCh0aGlzLm5vZGVfZ29sZEJHLl9maXJzdFcsIHRhcmdldFcpO1xyXG4gICAgfSxcclxuXHJcbiAgICAvLyBjYWxsZWQgZXZlcnkgZnJhbWUsIHVuY29tbWVudCB0aGlzIGZ1bmN0aW9uIHRvIGFjdGl2YXRlIHVwZGF0ZSBjYWxsYmFja1xyXG4gICAgLy8gdXBkYXRlOiBmdW5jdGlvbiAoZHQpIHtcclxuXHJcbiAgICAvLyB9LFxyXG59KTtcclxuIiwiLy/miL/pl7TliJfooajmnaHnm65cclxuY2MuQ2xhc3Moe1xyXG4gICAgZXh0ZW5kczogcmVxdWlyZSgnQmFzZVVJJyksXHJcblxyXG4gICAgcHJvcGVydGllczoge1xyXG4gICAgICAgIF9lbnRlclR5cGUgOiBudWxsLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+i/m+WFpeaIv+mXtOeahOexu+Wei1xyXG4gICAgICAgIF9ob21lSUQgOiBudWxsLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/miL/pl7RJRFxyXG5cclxuICAgICAgICBub2RlX2JhY2tncm91bmRCdG4gOiB7XHJcbiAgICAgICAgICAgIGRlZmF1bHQgOiBudWxsLFxyXG4gICAgICAgICAgICB0eXBlIDogY2MuTm9kZSxcclxuICAgICAgICAgICAgZGlzcGxheU5hbWUgOiAn6L+b5YWl5oi/6Ze0J1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgbGFiZWxfaW50b0xpbWl0IDoge1xyXG4gICAgICAgICAgICBkZWZhdWx0IDogbnVsbCxcclxuICAgICAgICAgICAgdHlwZSA6IGNjLkxhYmVsLFxyXG4gICAgICAgICAgICBkaXNwbGF5TmFtZSA6ICfov5vmiL/pmZDliLYnXHJcbiAgICAgICAgfSxcclxuICAgICAgICBsYWJlbF9vbk51bWJlciA6IHtcclxuICAgICAgICAgICAgZGVmYXVsdCA6IG51bGwsXHJcbiAgICAgICAgICAgIHR5cGUgOiBjYy5MYWJlbCxcclxuICAgICAgICAgICAgZGlzcGxheU5hbWUgOiAn5Zyo5oi/5Lq65pWwJ1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgbm9kZV9yb29tQkc6IHtcclxuICAgICAgICAgICAgZGVmYXVsdCA6IG51bGwsXHJcbiAgICAgICAgICAgIHR5cGUgOiBjYy5Ob2RlLFxyXG4gICAgICAgICAgICBkaXNwbGF5TmFtZSA6ICfmiL/pl7Tog4zmma8nXHJcbiAgICAgICAgfSxcclxuICAgICAgICBub2RlX3Jvb21OYW1lOiB7XHJcbiAgICAgICAgICAgIGRlZmF1bHQgOiBudWxsLFxyXG4gICAgICAgICAgICB0eXBlIDogY2MuTm9kZSxcclxuICAgICAgICAgICAgZGlzcGxheU5hbWUgOiAn5oi/6Ze05ZCN56ewJ1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZnJhbWVfcm9vbVR5cGVVSSA6IHtcclxuICAgICAgICAgICAgZGVmYXVsdCA6IG51bGwsXHJcbiAgICAgICAgICAgIHR5cGUgOmNjLlNwcml0ZUF0bGFzLFxyXG4gICAgICAgICAgICBkaXNwbGF5TmFtZSA6ICfmiL/pl7Tog4zmma/ln7rnoYDmmL7npLrlm77niYfpm4YnXHJcbiAgICAgICAgfSxcclxuICAgIH0sXHJcblxyXG4gICAgLy8gdXNlIHRoaXMgZm9yIGluaXRpYWxpemF0aW9uXHJcbiAgICBvbkxvYWQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLnJlZ2lzdGVyQnV0dG9uKHRoaXMubm9kZV9yb29tQkcsIHRoaXMub25DbGlja19pbnRvLCB0aGlzKTtcclxuICAgIH0sXHJcblxyXG4gICAgc2V0RGF0YSA6IGZ1bmN0aW9uIChkYXRhLCBqc29uRGF0YSkge1xyXG4gICAgICAgIGlmKCFkYXRhKSByZXR1cm47XHJcbiAgICAgICAgdGhpcy5fZW50ZXJUeXBlID0gZGF0YS5lbnRlclR5cGU7XHJcbiAgICAgICAgdGhpcy5faG9tZUlEID0gZGF0YS5pZDtcclxuXHJcbiAgICAgICAgdGhpcy5fc2V0RW50ZXJJY29uKHRoaXMubm9kZV9yb29tTmFtZSwganNvbkRhdGEudHh0SW1nVXJsKTtcclxuICAgICAgICB0aGlzLl9zZXRFbnRlckljb24odGhpcy5ub2RlX3Jvb21CRywganNvbkRhdGEuYmdJbWdVcmwpO1xyXG4gICAgICAgIHRoaXMubGFiZWxfaW50b0xpbWl0LnN0cmluZyA9IEdfQ0hJTkVTRS5pblRvUm9vbUxpbWl0ICsgR19UT09MLmNoYW5nZU1vbmV5KGRhdGEubWluTGltaXRQbGF5ZXJCbGFuY2UpO1xyXG4gICAgICAgIHRoaXMubGFiZWxfb25OdW1iZXIuc3RyaW5nID0gZGF0YS5jdXJyZW50UGxheWVyQ291bnQ7XHJcbiAgICB9LFxyXG4gICAgLy/ngrnlh7vov5vlhaXmuLjmiI9cclxuICAgIG9uQ2xpY2tfaW50byA6IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgIGlmKEdfQ29uZmlnX2NvbW1vbi5pc0xvY2FsKXtcclxuICAgICAgICAgICAgdGhpcy5fZG9FbnRlcigpO1xyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICB2YXIgbmV0RGF0YSA9IHtcclxuICAgICAgICAgICAgICAgIHJvb21JZCA6IHRoaXMuX2hvbWVJRCxcclxuICAgICAgICAgICAgICAgIGdhbWVNb2RlbCA6IEdfREFUQS5nZXRFbnRlckhvbWVNb2RlbCh0aGlzLl9lbnRlclR5cGUpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgR0cucGxhdGZvcm1NZ3IucmVxdWVzdEVudGVyUm9vbShuZXREYXRhLCB0aGlzLl9kb0VudGVyLmJpbmQodGhpcykpO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgX2RvRW50ZXIgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgLy/orrDlvZVoYXNo5L+h5oGvXHJcbiAgICAgICAgR19EQVRBLnNldEN1clNjZW5lSGFzaCh0aGlzLl9lbnRlclR5cGUsdGhpcy5faG9tZUlEKTtcclxuICAgICAgICBHRy5jaGFuZ2VTY2VuZShHX0RBVEEuZ2V0U2NlbmVOYW1lKHRoaXMuX2VudGVyVHlwZSkpO1xyXG4gICAgfSxcclxuXHJcbiAgICAvL+iuvue9ruWbvueJh++8iOWFpeaIv+WMuuWfn+iDjOaZr++8jOaIv+mXtOWQje+8iVxyXG4gICAgX3NldEVudGVySWNvbiA6IGZ1bmN0aW9uIChjdXJOb2RlLCBpbWdVcmwpIHtcclxuICAgICAgICB2YXIgaW1nTmFtZSA9IHRoaXMuX2dldEljb25OYW1lKGltZ1VybCk7XHJcbiAgICAgICAgaWYoaW1nTmFtZSl7XHJcbiAgICAgICAgICAgIHZhciBmcmFtZSA9IHRoaXMuZnJhbWVfcm9vbVR5cGVVSS5nZXRTcHJpdGVGcmFtZShpbWdOYW1lKTtcclxuICAgICAgICAgICAgaWYoZnJhbWUpe1xyXG4gICAgICAgICAgICAgICAgLy/lt7Lnu4/nvJPlrZhcclxuICAgICAgICAgICAgICAgIGN1ck5vZGUuZ2V0Q29tcG9uZW50KGNjLlNwcml0ZSkuc3ByaXRlRnJhbWUgPSBmcmFtZTtcclxuICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAvL+ayoeacieWImeagueaNrnVybOWOu+ivt+axglxyXG4gICAgICAgICAgICAgICAgR19UT09MLnNldEhlYWRJbWcoY3VyTm9kZSwgaW1nVXJsKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAvL+ivpXVybOW8guW4uFxyXG5cclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgLy/ojrflj5blm77niYflkI1cclxuICAgIF9nZXRJY29uTmFtZTogZnVuY3Rpb24gKHVybCkge1xyXG4gICAgICAgIGlmICghdXJsKSByZXR1cm4gbnVsbDtcclxuICAgICAgICB2YXIgdXJsTGlzdCA9IHVybC5zcGxpdCgnLycpO1xyXG4gICAgICAgIHZhciBpY29uTmFtZSA9IHVybExpc3RbdXJsTGlzdC5sZW5ndGggLSAxXS5zcGxpdCgnLicpWzBdO1xyXG4gICAgICAgIHJldHVybiBpY29uTmFtZTtcclxuICAgIH0sXHJcbiAgICAvLyBjYWxsZWQgZXZlcnkgZnJhbWUsIHVuY29tbWVudCB0aGlzIGZ1bmN0aW9uIHRvIGFjdGl2YXRlIHVwZGF0ZSBjYWxsYmFja1xyXG4gICAgLy8gdXBkYXRlOiBmdW5jdGlvbiAoZHQpIHtcclxuXHJcbiAgICAvLyB9LFxyXG59KTtcclxuIiwiLy/mu5rliqjmlbDlrZfnmoTpgJrnlKjohJrmnKxcclxuXHJcbnZhciBkYXRhT2JqID0ge1xyXG4gICAgc3RhcnROdW0gOiAwLFxyXG4gICAgdGFyZ2V0TnVtIDogMSxcclxuICAgIGxhYmVsIDogbnVsbCxcclxuICAgIGZvcm1hdFN0ciA6ICcnLFxyXG4gICAgY2FsbEZ1bmMgOiBudWxsXHJcbn1cclxuXHJcbmNjLkNsYXNzKHtcclxuICAgIGV4dGVuZHM6IGNjLkNvbXBvbmVudCxcclxuXHJcbiAgICBwcm9wZXJ0aWVzOiB7XHJcbiAgICAgICAgX2N1ckxhYmVsIDogbnVsbCwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/lvZPliY3kvb/nlKjnmoTmu5rliqhsYWJlbFxyXG4gICAgICAgIF9jdXJOdW0gOiBudWxsLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+W9k+WJjeeahOa7muWKqOWAvFxyXG4gICAgICAgIF9tYXhOdW0gOiBudWxsLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+acgOWkp+eahOa7muWKqOWAvFxyXG4gICAgICAgIF9mb3JtYXRTdHIgOiBudWxsLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+mcgOimgee7hOWQiOaYvuekuueahOWtl+espuS4slxyXG4gICAgICAgIF9jYWxsRnVuYyA6IG51bGwsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+a7muWKqOe7k+adn+WQjueahOWbnuiwg1xyXG5cclxuICAgICAgICBfaXNTdGFydFNjcm9sbCA6IG51bGwsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/mmK/lkKblvIDlp4vmu5rliqhcclxuICAgICAgICBfaW50ZXJ2YWwgOiBudWxsLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5rua5Yqo6Ze06ZqUXHJcbiAgICAgICAgX21heFNjcm9sbFRpbWVzIDogIG51bGwsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5pyA5aSn55qE5rua5Yqo5qyh5pWwXHJcbiAgICB9LFxyXG5cclxuICAgIC8vIHVzZSB0aGlzIGZvciBpbml0aWFsaXphdGlvblxyXG4gICAgb25Mb2FkOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5fbWF4U2Nyb2xsVGltZXMgPSA1MDtcclxuICAgICAgICB0aGlzLl9pc1N0YXJ0U2Nyb2xsID0gZmFsc2U7XHJcbiAgICB9LFxyXG5cclxuICAgIC8v5byA5aeL5rua5Yqo5pWw5YC8XHJcbiAgICBzY3JvbGxMYWJlbCA6IGZ1bmN0aW9uIChkYXRhT2JqKSB7XHJcbiAgICAgICAgaWYoIWRhdGFPYmopIHJldHVybjtcclxuICAgICAgICB0aGlzLl9pc1N0YXJ0U2Nyb2xsID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5fY3VyTnVtID0gZGF0YU9iai5zdGFydE51bTtcclxuICAgICAgICB0aGlzLl9tYXhOdW0gPSBkYXRhT2JqLnRhcmdldE51bTtcclxuICAgICAgICB0aGlzLl9jdXJMYWJlbCA9IGRhdGFPYmoubGFiZWw7XHJcbiAgICAgICAgdGhpcy5fZm9ybWF0U3RyID0gZGF0YU9iai5mb3JtYXRTdHIrJyVzJztcclxuICAgICAgICB0aGlzLl9jYWxsRnVuYyA9IGRhdGFPYmouY2FsbEZ1bmM7XHJcbiAgICAgICAgdGhpcy5faW5pdFNjcm9sbERhdGEoKTtcclxuICAgIH0sXHJcblxyXG4gICAgX2luaXRTY3JvbGxEYXRhIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuX2ludGVydmFsID0gTWF0aC5tYXgoTWF0aC5mbG9vcigodGhpcy5fbWF4TnVtIC0gdGhpcy5fY3VyTnVtKS90aGlzLl9tYXhTY3JvbGxUaW1lcyksIDApO1xyXG4gICAgICAgIHRoaXMuX2lzU3RhcnRTY3JvbGwgPSB0cnVlO1xyXG4gICAgfSxcclxuXHJcbiAgICBfY2hhbmdlIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuX2N1ck51bSArPSB0aGlzLl9pbnRlcnZhbDtcclxuICAgICAgICBpZih0aGlzLl9jdXJOdW0gPj0gdGhpcy5fbWF4TnVtKXtcclxuICAgICAgICAgICAgLy/lt7Lnu4/mu5rliqjliLDmnIDlpKflgLxcclxuICAgICAgICAgICAgdGhpcy5fY3VyTnVtID0gdGhpcy5fbWF4TnVtO1xyXG4gICAgICAgICAgICB0aGlzLl9pc1N0YXJ0U2Nyb2xsID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuX3Nob3dWYWx1ZSgpO1xyXG4gICAgICAgIGlmKCF0aGlzLl9pc1N0YXJ0U2Nyb2xsKXtcclxuICAgICAgICAgICAgdGhpcy5fY2xlYXJEYXRhKCk7XHJcbiAgICAgICAgICAgIGlmKHRoaXMuX2NhbGxGdW5jKXtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2NhbGxGdW5jKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9jYWxsRnVuYyA9IG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIF9zaG93VmFsdWUgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHN0ciA9IEdfVE9PTC5mb3JtYXRTdHIodGhpcy5fZm9ybWF0U3RyLCBHX1RPT0wuY2hhbmdlTW9uZXkodGhpcy5fY3VyTnVtKSk7XHJcbiAgICAgICAgdGhpcy5fY3VyTGFiZWwuc3RyaW5nID0gc3RyO1xyXG4gICAgfSxcclxuXHJcbiAgICBfY2xlYXJEYXRhIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuX2N1ck51bSA9IDA7XHJcbiAgICAgICAgdGhpcy5fbWF4TnVtID0gMDtcclxuICAgICAgICB0aGlzLl9jdXJMYWJlbCA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5fZm9ybWF0U3RyID0gJyc7XHJcbiAgICAgICAgdGhpcy5faW50ZXJ2YWwgPSAwO1xyXG4gICAgfSxcclxuXHJcbiAgICAvL+W8uuWItue7k+adnyzmmL7npLrmnIDnu4jnu5PmnpxcclxuICAgIGZvcmNlRW5kIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuX2NhbGxGdW5jID0gbnVsbDtcclxuICAgICAgICB0aGlzLl9jdXJOdW0gPSB0aGlzLl9tYXhOdW07XHJcbiAgICB9LFxyXG5cclxuICAgIC8vIGNhbGxlZCBldmVyeSBmcmFtZSwgdW5jb21tZW50IHRoaXMgZnVuY3Rpb24gdG8gYWN0aXZhdGUgdXBkYXRlIGNhbGxiYWNrXHJcbiAgICAgdXBkYXRlOiBmdW5jdGlvbiAoZHQpIHtcclxuICAgICAgICAgaWYoIXRoaXMuX2lzU3RhcnRTY3JvbGwpIHJldHVybjtcclxuICAgICAgICAgdGhpcy5fY2hhbmdlKCk7XHJcbiAgICAgfSxcclxufSk7XHJcbiIsIi8v5bqn5L2N5a655Zmo566h55CGXHJcblxyXG5cclxuY2MuQ2xhc3Moe1xyXG4gICAgZXh0ZW5kczogY2MuQ29tcG9uZW50LFxyXG5cclxuICAgIHByb3BlcnRpZXM6IHtcclxuXHJcbiAgICB9LFxyXG5cclxuICAgIC8vIHVzZSB0aGlzIGZvciBpbml0aWFsaXphdGlvblxyXG4gICAgb25Mb2FkOiBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgfSxcclxuXHJcbiAgICAvL+iOt+WPluS4gOS4quS9jee9rueahOWdkOagh1xyXG4gICAgYWRkT25lUGxheWVyIDogZnVuY3Rpb24gKHNlYXRJbmRleCkge1xyXG4gICAgICAgIHZhciBzZWF0ID0gdGhpcy5ub2RlLmNoaWxkcmVuW3NlYXRJbmRleC0xXTtcclxuICAgICAgICBpZihzZWF0KSB7XHJcbiAgICAgICAgICAgIHNlYXQuYWN0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHJldHVybiBzZWF0LnBvc2l0aW9uXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBudWxsXHJcbiAgICB9LFxyXG5cclxuICAgIC8v5pyJ5LiA5Liq546p5a6256a75byAXHJcbiAgICBvbmVQbGF5ZXJMZWF2ZSA6IGZ1bmN0aW9uIChzZWF0SW5kZXgpIHtcclxuICAgICAgICB2YXIgc2VhdCA9IHRoaXMubm9kZS5jaGlsZHJlbltzZWF0SW5kZXgtMV07XHJcbiAgICAgICAgaWYoc2VhdCl7XHJcbiAgICAgICAgICAgIHNlYXQuYWN0aXZlID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIC8v6I635Y+W5bqn5L2N5pWw6YePXHJcbiAgICBnZXRTZWF0c051bSA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5ub2RlLmNoaWxkcmVuLmxlbmd0aFxyXG4gICAgfSxcclxuXHJcbiAgICAvLyBjYWxsZWQgZXZlcnkgZnJhbWUsIHVuY29tbWVudCB0aGlzIGZ1bmN0aW9uIHRvIGFjdGl2YXRlIHVwZGF0ZSBjYWxsYmFja1xyXG4gICAgLy8gdXBkYXRlOiBmdW5jdGlvbiAoZHQpIHtcclxuXHJcbiAgICAvLyB9LFxyXG59KTtcclxuIiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgbGVub3ZvIG9uIDIwMTYvMTIvMjcuXHJcbiAqL1xyXG5cclxuLy/mnIDkuIrlsYLnmoTngrnlh7tcclxuY2MuQ2xhc3Moe1xyXG4gICAgZXh0ZW5kczogY2MuQ29tcG9uZW50LFxyXG5cclxuICAgIHByb3BlcnRpZXM6IHtcclxuICAgICAgICBfdG91Y2hFZmZlY3QgOiBudWxsLCAgICAgICAgICAgICAgICAgICAgICAgIC8v54K55Ye754m55pWIXHJcblxyXG4gICAgICAgIGZyYW1lX3RvdWNoRWZmZWN0IDogY2MuU3ByaXRlRnJhbWUsXHJcbiAgICB9LFxyXG5cclxuICAgIC8vIHVzZSB0aGlzIGZvciBpbml0aWFsaXphdGlvblxyXG4gICAgb25Mb2FkOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5hZGRUb3VjaExpc3RlbmVyKCk7XHJcbiAgICB9LFxyXG5cclxuICAgIC8v5re75Yqg54K55Ye75LqL5Lu2XHJcbiAgICBhZGRUb3VjaExpc3RlbmVyIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmKCF0aGlzLmZyYW1lX3RvdWNoRWZmZWN0KSByZXR1cm47XHJcbiAgICAgICAgdGhpcy5ub2RlLm9uKGNjLk5vZGUuRXZlbnRUeXBlLlRPVUNIX1NUQVJULCB0aGlzLnRvdWNoQ2FsbCwgdGhpcyk7XHJcbiAgICB9LFxyXG4gICAgdG91Y2hDYWxsIDogZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgdmFyIHBvcyA9IGNjLnAoZXZlbnQuZ2V0TG9jYXRpb25YKCksIGV2ZW50LmdldExvY2F0aW9uWSgpKTtcclxuICAgICAgICB0aGlzLl9zaG93VG91Y2hFZmYocG9zKTtcclxuICAgIH0sXHJcblxyXG4gICAgLy/mmL7npLrngrnlh7vnibnmlYhcclxuICAgIF9zaG93VG91Y2hFZmYgOiBmdW5jdGlvbiAocG9zKSB7XHJcbiAgICAgICAgcG9zID0gdGhpcy5ub2RlLmNvbnZlcnRUb05vZGVTcGFjZShwb3MpO1xyXG4gICAgICAgIGlmKCF0aGlzLl90b3VjaEVmZmVjdCl7XHJcbiAgICAgICAgICAgIHRoaXMuX3RvdWNoRWZmZWN0ID0gbmV3IGNjLk5vZGUoKTtcclxuICAgICAgICAgICAgdGhpcy5fdG91Y2hFZmZlY3QucGFyZW50ID0gdGhpcy5ub2RlO1xyXG5cclxuICAgICAgICAgICAgdmFyIG5vZGUxID0gbmV3IGNjLk5vZGUoKTtcclxuICAgICAgICAgICAgdGhpcy5fdG91Y2hFZmZlY3QuYWRkQ2hpbGQobm9kZTEsIDAsIDEpO1xyXG4gICAgICAgICAgICB2YXIgc3AxID0gbm9kZTEuYWRkQ29tcG9uZW50KGNjLlNwcml0ZSkuc3ByaXRlRnJhbWUgPSB0aGlzLmZyYW1lX3RvdWNoRWZmZWN0O1xyXG5cclxuICAgICAgICAgICAgdmFyIG5vZGUyID0gbmV3IGNjLk5vZGUoKTtcclxuICAgICAgICAgICAgdGhpcy5fdG91Y2hFZmZlY3QuYWRkQ2hpbGQobm9kZTIsIDAsIDIpO1xyXG4gICAgICAgICAgICB2YXIgc3AxID0gbm9kZTIuYWRkQ29tcG9uZW50KGNjLlNwcml0ZSkuc3ByaXRlRnJhbWUgPSB0aGlzLmZyYW1lX3RvdWNoRWZmZWN0O1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLl90b3VjaEVmZmVjdC5hY3RpdmUgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuX3RvdWNoRWZmZWN0LnBvc2l0aW9uID0gcG9zO1xyXG4gICAgICAgIHZhciBub2RlMSA9IHRoaXMuX3RvdWNoRWZmZWN0LmdldENoaWxkQnlUYWcoMSk7XHJcbiAgICAgICAgdmFyIG5vZGUyID0gdGhpcy5fdG91Y2hFZmZlY3QuZ2V0Q2hpbGRCeVRhZygyKTtcclxuICAgICAgICBub2RlMS5zdG9wQWxsQWN0aW9ucygpO1xyXG4gICAgICAgIG5vZGUyLnN0b3BBbGxBY3Rpb25zKCk7XHJcblxyXG4gICAgICAgIG5vZGUxLnNjYWxlID0gMC4xO1xyXG4gICAgICAgIG5vZGUxLm9wYWNpdHkgPSAyNTU7XHJcblxyXG4gICAgICAgIHZhciB0aW1lID0gMC41O1xyXG4gICAgICAgIHZhciBhY3QxID0gY2Muc2NhbGVUbyh0aW1lLCAxKTtcclxuICAgICAgICB2YXIgYWN0MiA9IGNjLmZhZGVUbyh0aW1lLCA3MCk7XHJcbiAgICAgICAgbm9kZTEucnVuQWN0aW9uKGNjLnNlcXVlbmNlKGNjLnNwYXduKGFjdDEsIGFjdDIpLCBjYy5jYWxsRnVuYyh0aGlzLl9lZmZDYWxsLCB0aGlzKSkpO1xyXG5cclxuICAgICAgICBub2RlMi5zY2FsZSA9IDAuMTtcclxuICAgICAgICBub2RlMi5vcGFjaXR5ID0gMjU1O1xyXG4gICAgICAgIGFjdDEgPSBjYy5kZWxheVRpbWUodGltZSowLjIpO1xyXG4gICAgICAgIGFjdDIgPSBjYy5zY2FsZVRvKHRpbWUqMC42LCAwLjcpO1xyXG4gICAgICAgIHZhciBhY3QzID0gY2MuZmFkZVRvKDAsIDApO1xyXG4gICAgICAgIG5vZGUyLnJ1bkFjdGlvbihjYy5zZXF1ZW5jZShhY3QxLCBhY3QyLCBhY3QzKSlcclxuICAgIH0sXHJcblxyXG4gICAgX2VmZkNhbGwgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYodGhpcy5fdG91Y2hFZmZlY3Qpe1xyXG4gICAgICAgICAgICB0aGlzLl90b3VjaEVmZmVjdC5hY3RpdmUgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIC8vIGNhbGxlZCBldmVyeSBmcmFtZSwgdW5jb21tZW50IHRoaXMgZnVuY3Rpb24gdG8gYWN0aXZhdGUgdXBkYXRlIGNhbGxiYWNrXHJcbiAgICAvLyB1cGRhdGU6IGZ1bmN0aW9uIChkdCkge1xyXG5cclxuICAgIC8vIH0sXHJcbn0pO1xyXG4iLCIvL+ezu+e7n+aPkOekuuaYvuekulxyXG5jYy5DbGFzcyh7XHJcbiAgICBleHRlbmRzOiBjYy5Db21wb25lbnQsXHJcblxyXG4gICAgcHJvcGVydGllczoge1xyXG4gICAgICAgIG5vZGVfbGFiZWxCRyA6IGNjLk5vZGUsXHJcbiAgICAgICAgbGFiZWxfY2VudGVyIDogY2MuTGFiZWwsXHJcbiAgICB9LFxyXG5cclxuICAgIC8vIHVzZSB0aGlzIGZvciBpbml0aWFsaXphdGlvblxyXG4gICAgb25Mb2FkOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5fZmlyc3RQb3MgPSBjYy5wKHRoaXMubm9kZS54LCB0aGlzLm5vZGUueSk7XHJcbiAgICB9LFxyXG5cclxuICAgIC8v5pi+56S657O757uf5o+Q56S65YaF5a65XHJcbiAgICBzaG93Q29udGVudCA6IGZ1bmN0aW9uIChzdHIsIHBvcywgdGltZSwgY2FsbEJhY2spIHtcclxuICAgICAgICB0aGlzLm5vZGUuYWN0aXZlID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLmxhYmVsX2NlbnRlci5zdHJpbmcgPSBzdHI7XHJcblxyXG4gICAgICAgIGlmKCF0aGlzLl9maXJzdFBvcykgdGhpcy5fZmlyc3RQb3MgPSBjYy5wKHRoaXMubm9kZS54LCB0aGlzLm5vZGUueSk7XHJcbiAgICAgICAgaWYoIXBvcykgcG9zID0gdGhpcy5fZmlyc3RQb3M7XHJcbiAgICAgICAgdGhpcy5ub2RlLnBvc2l0aW9uID0gcG9zO1xyXG5cclxuICAgICAgICB2YXIgc2hvd1RpbWUgPSAzO1xyXG4gICAgICAgIGlmKEdfREFUQS5pc051bWJlcih0aW1lKSl7XHJcbiAgICAgICAgICAgIHNob3dUaW1lID0gdGltZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmKHRoaXMuX2NvdW50RG93bk51bSkgdGhpcy5fZm9yY2VFbmQoKTtcclxuICAgICAgICAvL+acieWAkuiuoeaXtlxyXG4gICAgICAgIHRoaXMuX2N1clN0ciA9IHN0cjtcclxuICAgICAgICB0aGlzLl9jYWxsRnVuYyA9IGNhbGxCYWNrO1xyXG4gICAgICAgIHRoaXMuX3NldENlbnRlclZhbHVlKCk7XHJcbiAgICAgICAgdGhpcy5ub2RlLnN0b3BBbGxBY3Rpb25zKCk7XHJcbiAgICAgICAgdGhpcy5ub2RlLnJ1bkFjdGlvbihjYy5zZXF1ZW5jZShjYy5kZWxheVRpbWUoc2hvd1RpbWUpLCBjYy5jYWxsRnVuYyh0aGlzLl9oaWRlVGlwLCB0aGlzKSkpO1xyXG4gICAgICAgIHRoaXMuX3NldEJhY2tncm91bmRMZW4oc3RyKTtcclxuICAgIH0sXHJcbiAgICBoaWRlU3lzdGVtVGlwIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMubm9kZS5zdG9wQWxsQWN0aW9ucygpO1xyXG4gICAgICAgIHRoaXMubm9kZS5hY3RpdmUgPSBmYWxzZTtcclxuICAgIH0sXHJcbiAgICBfZm9yY2VFbmQgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5fY2FsbEZ1bmMgPSBudWxsO1xyXG4gICAgICAgIHRoaXMubm9kZS5zdG9wQWxsQWN0aW9ucygpO1xyXG4gICAgICAgIHRoaXMuX2hpZGVUaXAoKTtcclxuICAgIH0sXHJcblxyXG4gICAgX2hpZGVUaXAgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5ub2RlLmFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgICAgIGlmKHRoaXMuX2NhbGxGdW5jKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2NhbGxGdW5jKCk7XHJcbiAgICAgICAgICAgIHRoaXMuX2NhbGxGdW5jID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIF9zZXRDZW50ZXJWYWx1ZSA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLmxhYmVsX2NlbnRlci5zdHJpbmcgPSB0aGlzLl9jdXJTdHI7XHJcbiAgICB9LFxyXG4gICAgLy/mlLnlj5jog4zmma/plb/luqZcclxuICAgIF9zZXRCYWNrZ3JvdW5kTGVuIDogZnVuY3Rpb24gKHN0cikge1xyXG4gICAgICAgIGlmKCF0aGlzLl93aWR0aFJhdGUpIHRoaXMuX3dpZHRoUmF0ZSA9IHRoaXMubm9kZV9sYWJlbEJHLndpZHRoLzE0O1xyXG4gICAgICAgIGlmKCF0aGlzLm5vZGVfbGFiZWxCRy5fZmlyc3RXKSB0aGlzLm5vZGVfbGFiZWxCRy5fZmlyc3RXID0gdGhpcy5ub2RlX2xhYmVsQkcud2lkdGg7XHJcblxyXG4gICAgICAgIHZhciB3b3JkTGVuPTAsIG5hbWUgPSBzdHIsIGN1clN0ciwgcmVnID0gL15bXFx1NEUwMC1cXHU5RkE1XSskLzs7XHJcbiAgICAgICAgZm9yKHZhciBpID0wOyBpIDwgbmFtZS5sZW5ndGg7IGkgKyspe1xyXG4gICAgICAgICAgICBjdXJTdHIgPSBuYW1lW2ldO1xyXG4gICAgICAgICAgICBpZihyZWcudGVzdChjdXJTdHIpKSB7XHJcbiAgICAgICAgICAgICAgICB3b3JkTGVuICs9IDI7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB3b3JkTGVuICs9IDE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciB0YXJnZXRXID0gd29yZExlbiAqIHRoaXMuX3dpZHRoUmF0ZTtcclxuICAgICAgICB0aGlzLm5vZGVfbGFiZWxCRy53aWR0aCA9IE1hdGgubWF4KHRoaXMubm9kZV9sYWJlbEJHLl9maXJzdFcsIHRhcmdldFcpO1xyXG4gICAgfSxcclxuXHJcbiAgICAvLyBjYWxsZWQgZXZlcnkgZnJhbWUsIHVuY29tbWVudCB0aGlzIGZ1bmN0aW9uIHRvIGFjdGl2YXRlIHVwZGF0ZSBjYWxsYmFja1xyXG4gICAgLy8gdXBkYXRlOiBmdW5jdGlvbiAoZHQpIHtcclxuXHJcbiAgICAvLyB9LFxyXG59KTtcclxuIiwiLy/muLjmiI/lnLrmma/kuK3mnIDkuIrpnaLnmoTpgqPkuKrlsYJcclxuXHJcblxyXG5jYy5DbGFzcyh7XHJcbiAgICBleHRlbmRzOiBjYy5Db21wb25lbnQsXHJcblxyXG4gICAgcHJvcGVydGllczoge1xyXG4gICAgICAgIF9pc0NvbmZpcm1UaXBPcGVuIDogbnVsbCwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+aPkOekuueql+WPo+aYr+WQpuW3sue7j+aJk+W8gFxyXG4gICAgICAgIF9pc0hhc09wZW4gOiBudWxsLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/mj5DnpLrnqpflj6PmmK/lkKblt7Lnu4/miZPlvIBcclxuXHJcbiAgICAgICAgcHJlZmFiX2xvYWRpbmdBbmkgOiB7XHJcbiAgICAgICAgICAgIGRlZmF1bHQgOiBudWxsLFxyXG4gICAgICAgICAgICB0eXBlIDogY2MuUHJlZmFiLFxyXG4gICAgICAgICAgICBkaXNwbGF5TmFtZSA6ICfnvZHnu5zor7fmsYLliqjnlLsnXHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICAvLyB1c2UgdGhpcyBmb3IgaW5pdGlhbGl6YXRpb25cclxuICAgIG9uTG9hZDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8vIEdHLnRvcFRvdWNoTGF5ZXIgPSB0aGlzO1xyXG5cclxuICAgICAgICB0aGlzLl9pc0NvbmZpcm1UaXBPcGVuID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5fdG91Y2hMaW1pdExheWVyID0gdGhpcy5nZXRDb21wb25lbnQoJ09ial90b3VjaExpbWl0Jyk7XHJcbiAgICB9LFxyXG5cclxuICAgIHN0YXJ0IDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuX3JlZ2lzdGVyRnVuYyh0cnVlKTtcclxuICAgIH0sXHJcblxyXG4gICAgLy/mmL7npLror7fmsYLnvZHnu5znmoTliqjnlLtcclxuICAgIHNob3dOZXRSZXF1ZXN0IDogZnVuY3Rpb24gKGlzU2hvd1RpcCkge1xyXG4gICAgICAgIGlmKCF0aGlzLnByZWZhYl9sb2FkaW5nQW5pKSByZXR1cm47XHJcbiAgICAgICAgaWYoIXRoaXMuX25ldEFuaSl7XHJcbiAgICAgICAgICAgIHRoaXMuX25ldEFuaSA9IGNjLmluc3RhbnRpYXRlKHRoaXMucHJlZmFiX2xvYWRpbmdBbmkpO1xyXG4gICAgICAgICAgICB0aGlzLl9uZXRBbmkucGFyZW50ID0gdGhpcy5ub2RlO1xyXG4gICAgICAgICAgICAvL3RoaXMuX25ldEFuaS5hY3RpdmUgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYodGhpcy5fbmV0QW5pLmFjdGl2ZSkgcmV0dXJuO1xyXG4gICAgICAgIGlmKHRoaXMuX2lzQ29uZmlybVRpcE9wZW4pe1xyXG4gICAgICAgICAgICAvL+W8ueeql+W3sue7j+WtmOWcqFxyXG4gICAgICAgICAgICB0aGlzLl9pc0hhc09wZW4gPSB0cnVlO1xyXG4gICAgICAgICAgICByZXR1cm5cclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5fbmV0QW5pLmFjdGl2ZSA9IHRydWU7XHJcbiAgICAgICAgdmFyIGNlbnRlciA9IGNjLnZpc2libGVSZWN0LmNlbnRlcjtcclxuICAgICAgICB0aGlzLl9uZXRBbmkucG9zaXRpb24gPSBjYy5wKGNlbnRlci54LCBjZW50ZXIueSoxLjM1KVxyXG4gICAgICAgIHRoaXMuX3Nob3dSZWNvbm5lY3RUaXAoaXNTaG93VGlwKTtcclxuICAgICAgICB0aGlzLl9uZXRBbmkuZ2V0Q29tcG9uZW50KGRyYWdvbkJvbmVzLkFybWF0dXJlRGlzcGxheSkucGxheUFuaW1hdGlvbignJyk7XHJcbiAgICAgICAgaWYodGhpcy5fdG91Y2hMaW1pdExheWVyKSB0aGlzLl90b3VjaExpbWl0TGF5ZXIuYWRkVG91Y2hMaW1pdCgpO1xyXG4gICAgfSxcclxuXHJcbiAgICBjbG9zZU5ldFJlcXVlc3QgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYodGhpcy5fbmV0QW5pKXtcclxuICAgICAgICAgICAgdGhpcy5fbmV0QW5pLmFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICBpZih0aGlzLl90b3VjaExpbWl0TGF5ZXIpIHRoaXMuX3RvdWNoTGltaXRMYXllci5jYW5jZWxUb3VjaExpbWl0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICAvL+aYvuekuumHjei/nuaPkOekulxyXG4gICAgX3Nob3dSZWNvbm5lY3RUaXAgOiBmdW5jdGlvbiAoaXNTaG93KSB7XHJcbiAgICAgICAgdmFyIHRpcE5vZGUgPSB0aGlzLl9uZXRBbmkuZ2V0Q2hpbGRCeU5hbWUoJ3RpcCcpO1xyXG4gICAgICAgIGlmKHRpcE5vZGUpe1xyXG4gICAgICAgICAgICB2YXIgY29udGVudDtcclxuICAgICAgICAgICAgaWYoaXNTaG93KSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdGFibGVEYXRhID0gR19EQVRBLmdldENoaW5lc2UoNjEpO1xyXG4gICAgICAgICAgICAgICAgY29udGVudCA9dGFibGVEYXRhLmNvbnRlbnQ7XHJcbiAgICAgICAgICAgIH1lbHNlIGNvbnRlbnQgPSAnJztcclxuICAgICAgICAgICAgdGlwTm9kZS5nZXRDb21wb25lbnQoY2MuTGFiZWwpLnN0cmluZyA9IGNvbnRlbnQ7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICAvL+azqOWGjOehruiupOeql+WPo+eahOebkeWQrFxyXG4gICAgX3JlZ2lzdGVyRnVuYyA6IGZ1bmN0aW9uIChpc1JlZ2lzdGVyKSB7XHJcbiAgICAgICAgaWYoR0cudGlwc01ncil7XHJcbiAgICAgICAgICAgIEdHLnRpcHNNZ3IucmVnaXN0ZXJDb25maXJtKHRoaXMuX3doZW5Db25maXJtVGlwQ2hhbmdlLmJpbmQodGhpcyksIGlzUmVnaXN0ZXIpO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgLy/lvZPnqpflj6PmiZPlvIDmiJbogIXlhbPpl61cclxuICAgIF93aGVuQ29uZmlybVRpcENoYW5nZSA6IGZ1bmN0aW9uIChpc09wZW4pIHtcclxuICAgICAgICB0aGlzLl9pc0NvbmZpcm1UaXBPcGVuID0gaXNPcGVuO1xyXG4gICAgICAgIGlmKHRoaXMuX25ldEFuaS5hY3RpdmUpe1xyXG4gICAgICAgICAgICAvL+W9k+aYvuekuui/nuaOpeeahOaXtuWAmVxyXG4gICAgICAgICAgICBpZihpc09wZW4pIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2lzSGFzT3BlbiA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlTmV0UmVxdWVzdCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIGlmKCFpc09wZW4pe1xyXG4gICAgICAgICAgICAgICAgaWYodGhpcy5faXNIYXNPcGVuKXtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdGlwTm9kZSA9IHRoaXMuX25ldEFuaS5nZXRDaGlsZEJ5TmFtZSgndGlwJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGlzU2hvdyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKHRpcE5vZGUpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpc1Nob3cgPSBCb29sZWFuKHRpcE5vZGUuZ2V0Q29tcG9uZW50KGNjLkxhYmVsKS5zdHJpbmcpXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd05ldFJlcXVlc3QoaXNTaG93KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgb25EZXN0cm95IDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuX3JlZ2lzdGVyRnVuYyhmYWxzZSk7XHJcbiAgICB9LFxyXG5cclxuICAgIC8vIGNhbGxlZCBldmVyeSBmcmFtZSwgdW5jb21tZW50IHRoaXMgZnVuY3Rpb24gdG8gYWN0aXZhdGUgdXBkYXRlIGNhbGxiYWNrXHJcbiAgICAvLyB1cGRhdGU6IGZ1bmN0aW9uIChkdCkge1xyXG5cclxuICAgIC8vIH0sXHJcbn0pO1xyXG4iLCIvL+acgOS4iumdoueahOinpuaRuOemgeeUqOWxglxyXG5cclxuY2MuQ2xhc3Moe1xyXG4gICAgZXh0ZW5kczogY2MuQ29tcG9uZW50LFxyXG5cclxuICAgIHByb3BlcnRpZXM6IHtcclxuICAgICAgICBfbmV0QW5pIDogbnVsbCwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+mihOWtmOeahOe9kee7nOivt+axguWKqOeUu1xyXG4gICAgfSxcclxuXHJcbiAgICAvLyB1c2UgdGhpcyBmb3IgaW5pdGlhbGl6YXRpb25cclxuICAgIG9uTG9hZDogZnVuY3Rpb24gKCkge1xyXG5cclxuICAgIH0sXHJcblxyXG4gICAgYWRkVG91Y2hMaW1pdCA6IGZ1bmN0aW9uIChpc0dyYXkpIHtcclxuICAgICAgICB0aGlzLm5vZGUub24oY2MuTm9kZS5FdmVudFR5cGUuVE9VQ0hfU1RBUlQsIHRoaXMuX3RvdWNoVGhpc0xheWVyLCB0aGlzKTtcclxuICAgIH0sXHJcbiAgICBfdG91Y2hUaGlzTGF5ZXIgOiBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgfSxcclxuICAgIGNhbmNlbFRvdWNoTGltaXQgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5ub2RlLm9mZihjYy5Ob2RlLkV2ZW50VHlwZS5UT1VDSF9TVEFSVCwgdGhpcy5fdG91Y2hUaGlzTGF5ZXIsIHRoaXMpO1xyXG4gICAgfSxcclxuXHJcbiAgICAvL+iuvue9ruaYr+WQpuaciee9rueBsOWxglxyXG4gICAgc2V0SXNTaG93R3JheSA6IGZ1bmN0aW9uIChpc0dyYXkpIHtcclxuICAgICAgICBpZighdGhpcy5fZ3JheUxheWVyKXtcclxuXHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICAvLyBjYWxsZWQgZXZlcnkgZnJhbWUsIHVuY29tbWVudCB0aGlzIGZ1bmN0aW9uIHRvIGFjdGl2YXRlIHVwZGF0ZSBjYWxsYmFja1xyXG4gICAgLy8gdXBkYXRlOiBmdW5jdGlvbiAoZHQpIHtcclxuXHJcbiAgICAvLyB9LFxyXG59KTtcclxuIiwiLy/mmL7npLrlnKjlsY/luZXkuK3lpK7nmoTmloflrZfmj5DnpLpcclxuXHJcbi8vdmFyIGRhdGFPYmogPSB7XHJcbi8vICAgIHRpcEluZGV4IDogMSxcclxuLy8gICAgc2hvd1N0ciA6ICcnLFxyXG4vLyAgICBmb3JtYXRTdHIgOiAnJyxcclxuLy8gICAgc2hvd1BvcyA6IGNjLnAoMCwwKSxcclxuLy8gICAgcmV0YWluVGltZSA6IDUsXHJcbi8vICAgIGlzQ291bnREb3duIDogZmFsc2UsXHJcbi8vICAgIGlzUmVwZWF0IDogZmFsc2UsXHJcbi8vICAgIGNhbGxCYWNrIDogJ3RhcmdldCdcclxuLy99XHJcblxyXG5jYy5DbGFzcyh7XHJcbiAgICBleHRlbmRzOiBjYy5Db21wb25lbnQsXHJcbiAgICBwcm9wZXJ0aWVzOiB7XHJcbiAgICAgICAgX21heENvdW50RG93biA6IG51bGwsICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/mnIDlpKflgJLorqHml7ZcclxuICAgICAgICBfY3VyQ291bnREb3duIDogbnVsbCwgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+WJqeS9meaXtumXtFxyXG4gICAgICAgIF9jYWxsQmFjayA6IG51bGwsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5YCS6K6h5pe257uT5p2f5ZCO55qE5Zue6LCDXHJcbiAgICAgICAgX2N1ckJhc2VTdHIgOiBudWxsLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/mmL7npLrnmoTmloflrZfln7rnoYBcclxuICAgICAgICBfdGlwSW5kZXggOiBudWxsLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL3RpcOe0ouW8lVxyXG4gICAgICAgIF90aXBNZ3IgOiBudWxsLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v566h55CG5ZmoXHJcbiAgICAgICAgX3dpZHRoUmF0ZSA6IG51bGwsXHJcbiAgICAgICAgX2hpZGVGdW5jIDogbnVsbCxcclxuXHJcbiAgICAgICAgbm9kZV9jZW50ZXJMYWJlbCA6IGNjLk5vZGUsICAgICAgICAgICAgICAgICAgICAgLy9cclxuICAgIH0sXHJcblxyXG4gICAgLy8gdXNlIHRoaXMgZm9yIGluaXRpYWxpemF0aW9uXHJcbiAgICBvbkxvYWQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLl9pbml0KCk7XHJcbiAgICB9LFxyXG5cclxuICAgIF9pbml0IDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuX21haW5MYWJlbCA9IHRoaXMubm9kZV9jZW50ZXJMYWJlbC5nZXRDb21wb25lbnQoY2MuTGFiZWwpO1xyXG4gICAgICAgIHRoaXMuX2RlZmF1bHRUaW1lID0gR19Db25maWdfY29tbW9uLnRpbWVfdGlwRGVmYXVsdDtcclxuICAgIH0sXHJcblxyXG4gICAgYmluZE1nciA6IGZ1bmN0aW9uIChtZ3IpIHtcclxuICAgICAgICB0aGlzLl90aXBNZ3IgPSBtZ3I7XHJcbiAgICB9LFxyXG5cclxuICAgIC8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblxyXG4gICAgc2hvd1RpcCA6IGZ1bmN0aW9uIChkYXRhT2JqKSB7XHJcbiAgICAgICAgLy90aGlzLmZvcmNlRW5kKCk7XHJcbiAgICAgICAgdmFyIHJldGFpblRpbWU7XHJcbiAgICAgICAgaWYoZGF0YU9iai50aXBJbmRleCl7XHJcbiAgICAgICAgICAgIHZhciB0YWJsZSA9IEdfREFUQS5nZXRDaGluZXNlKGRhdGFPYmoudGlwSW5kZXgpO1xyXG4gICAgICAgICAgICBpZih0YWJsZSl7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9jdXJCYXNlU3RyID0gdGFibGUuY29udGVudDtcclxuICAgICAgICAgICAgICAgIHJldGFpblRpbWUgPSB0YWJsZS5yZXRhaW5UaW1lO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMubm9kZS5hY3RpdmUgPSB0cnVlO1xyXG4gICAgICAgIHZhciBwb3MgPSBkYXRhT2JqLnNob3dQb3M7XHJcbiAgICAgICAgaWYoIXRoaXMuX2luaXRQb3MpIHRoaXMuX2luaXRQb3MgPSB0aGlzLm5vZGUucG9zaXRpb247XHJcbiAgICAgICAgaWYoIXBvcykgcG9zID0gdGhpcy5faW5pdFBvcztcclxuICAgICAgICB0aGlzLm5vZGUucG9zaXRpb24gPSBwb3M7XHJcbiAgICAgICAgdGhpcy5zaG93QnlPcGFjaXR5KCk7XHJcblxyXG4gICAgICAgIGlmKGRhdGFPYmouc2hvd1N0cikgdGhpcy5fY3VyQmFzZVN0ciA9IGRhdGFPYmouc2hvd1N0cjtcclxuICAgICAgICBpZighaXNOYU4oZGF0YU9iai5yZXRhaW5UaW1lKSkge1xyXG4gICAgICAgICAgICByZXRhaW5UaW1lID0gTWF0aC5tYXgoZGF0YU9iai5yZXRhaW5UaW1lLCAwKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5fY2FsbEJhY2sgPSBkYXRhT2JqLmNhbGxCYWNrO1xyXG4gICAgICAgIHZhciBmb3JtYXRTdHIgPSBkYXRhT2JqLmZvcm1hdFN0cjtcclxuICAgICAgICB0aGlzLl90aXBJbmRleCA9IGRhdGFPYmoudGlwSW5kZXg7XHJcblxyXG4gICAgICAgIGlmKGRhdGFPYmouaXNDb3VudERvd24pe1xyXG4gICAgICAgICAgICBpZighcmV0YWluVGltZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5faGlkZVRpcCgpO1xyXG4gICAgICAgICAgICAgICAgaWYodGhpcy5fY2FsbEJhY2spe1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2NhbGxCYWNrKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fY2FsbEJhY2sgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuX2FkZENvdW50RG93bihyZXRhaW5UaW1lKTtcclxuICAgICAgICAgICAgdGhpcy5fcmVzZXRCYWNrZ3JvdW5kKEdfVE9PTC5mb3JtYXRTdHIodGhpcy5fY3VyQmFzZVN0ciwgMTIzKSk7XHJcbiAgICAgICAgfWVsc2Uge1xyXG4gICAgICAgICAgICBpZighcmV0YWluVGltZSkgcmV0YWluVGltZSA9IHRoaXMuX2RlZmF1bHRUaW1lO1xyXG4gICAgICAgICAgICB0aGlzLl9zaG93VHh0KCk7XHJcbiAgICAgICAgICAgIHRoaXMuX3Jlc2V0QmFja2dyb3VuZChHX1RPT0wuZm9ybWF0U3RyKHRoaXMuX2N1ckJhc2VTdHIsIGZvcm1hdFN0cikpO1xyXG4gICAgICAgICAgICB2YXIgYWN0MSA9IGNjLmZhZGVPdXQocmV0YWluVGltZSk7XHJcbiAgICAgICAgICAgIHRoaXMubm9kZS5ydW5BY3Rpb24oY2Muc2VxdWVuY2UoYWN0MSwgY2MuY2FsbEZ1bmModGhpcy5fY2xlYXJUeHRUaXAsIHRoaXMpKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIC8v5Lit6YCU5L+u5pS55pi+56S65paH5a2XXHJcbiAgICBmb3JjZUNoYW5nZVN0ciA6IGZ1bmN0aW9uIChjaGFuZ2VTdHIpIHtcclxuICAgICAgICB0aGlzLl9jdXJCYXNlU3RyID0gY2hhbmdlU3RyO1xyXG4gICAgICAgIHRoaXMuX3Jlc2V0QmFja2dyb3VuZChHX1RPT0wuZm9ybWF0U3RyKHRoaXMuX2N1ckJhc2VTdHIsICcnKSk7XHJcbiAgICB9LFxyXG4gICAgLy/kuK3pgJTkv67mlLnmmL7npLrlgJLorqHml7bnmoTmlbDlgLxcclxuICAgIGZvcmNlQ2hhbmdlQ291bnREb3duIDogZnVuY3Rpb24gKG51bSkge1xyXG4gICAgICAgIHRoaXMuX21heENvdW50RG93biA9IG51bTtcclxuICAgICAgICB0aGlzLl9jdXJDb3VudERvd24gPSB0aGlzLl9tYXhDb3VudERvd247XHJcbiAgICAgICAgdGhpcy5fc2hvd1R4dCh0aGlzLl9jdXJDb3VudERvd24pO1xyXG4gICAgfSxcclxuICAgIC8v5by65Yi257uT5p2f5YCS6K6h5pe2XHJcbiAgICBmb3JjZUVuZCA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZih0aGlzLl9jdXJDb3VudERvd24pIHRoaXMudW5zY2hlZHVsZSh0aGlzLmxldF91cGRhdGUpO1xyXG4gICAgICAgIHRoaXMuX2N1ckNvdW50RG93biA9IDA7XHJcbiAgICAgICAgdGhpcy5fY2FsbEJhY2sgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuX2hpZGVUaXAoKTtcclxuICAgIH0sXHJcbiAgICAvL+mHjee9ruaYvuekuuWGheWuueWSjOaXtumXtFxyXG4gICAgcmVzZXRUeHRBbmRUaW1lIDogZnVuY3Rpb24gKGNvbnRlbnQsIHRpbWUpIHtcclxuICAgICAgICBpZighdGltZSkgdGltZSA9IHRoaXMuX2RlZmF1bHRUaW1lO1xyXG4gICAgICAgIHRoaXMubm9kZS5zdG9wQWxsQWN0aW9ucygpO1xyXG5cclxuICAgICAgICB0aGlzLl9jdXJCYXNlU3RyID0gY29udGVudDtcclxuICAgICAgICB0aGlzLl9zaG93VHh0KCk7XHJcbiAgICAgICAgdGhpcy5fcmVzZXRCYWNrZ3JvdW5kKEdfVE9PTC5mb3JtYXRTdHIodGhpcy5fY3VyQmFzZVN0ciwgJycpKTtcclxuICAgICAgICB2YXIgYWN0MSA9IGNjLmZhZGVPdXQodGltZSk7XHJcbiAgICAgICAgdGhpcy5ub2RlLnJ1bkFjdGlvbihjYy5zZXF1ZW5jZShhY3QxLCBjYy5jYWxsRnVuYyh0aGlzLl9jbGVhclR4dFRpcCwgdGhpcykpKTtcclxuICAgIH0sXHJcblxyXG4gICAgc2hvd0J5T3BhY2l0eSA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLm5vZGUub3BhY2l0eSA9IDI1NTtcclxuICAgIH0sXHJcbiAgICBoaWRlQnlPcGFjaXR5IDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMubm9kZS5vcGFjaXR5ID0gMDtcclxuICAgIH0sXHJcblxyXG4gICAgX3Nob3dUeHQgOiBmdW5jdGlvbiAoZm9ybWF0U3RyKSB7XHJcbiAgICAgICAgaWYoIWZvcm1hdFN0cikgdGhpcy5fbWFpbkxhYmVsLnN0cmluZyA9IHRoaXMuX2N1ckJhc2VTdHI7XHJcbiAgICAgICAgZWxzZSB0aGlzLl9tYWluTGFiZWwuc3RyaW5nID0gR19UT09MLmZvcm1hdFN0cih0aGlzLl9jdXJCYXNlU3RyLCBmb3JtYXRTdHIpO1xyXG4gICAgfSxcclxuXHJcbiAgICBfcmVzZXRCYWNrZ3JvdW5kIDogZnVuY3Rpb24gKHN0cikge1xyXG4gICAgICAgIGlmKCF0aGlzLl93aWR0aFJhdGUpIHRoaXMuX3dpZHRoUmF0ZSA9IHRoaXMubm9kZS53aWR0aC8xMztcclxuICAgICAgICB0aGlzLm5vZGUud2lkdGggPSBzdHIubGVuZ3RoICogdGhpcy5fd2lkdGhSYXRlO1xyXG4gICAgfSxcclxuXHJcbiAgICBfYWRkQ291bnREb3duIDogZnVuY3Rpb24gKG1heFRpbWUpIHtcclxuICAgICAgICBpZih0aGlzLl9jdXJDb3VudERvd24pIHRoaXMuX2NvdW50RG93bkVuZCgpO1xyXG4gICAgICAgIHRoaXMuX21heENvdW50RG93biA9IG1heFRpbWU7XHJcbiAgICAgICAgdGhpcy5fY3VyQ291bnREb3duID0gdGhpcy5fbWF4Q291bnREb3duO1xyXG4gICAgICAgIHRoaXMuX2ludGVydmFsID0gMS4wO1xyXG4gICAgICAgIHRoaXMuc2NoZWR1bGUodGhpcy5sZXRfdXBkYXRlLCB0aGlzLl9pbnRlcnZhbCk7XHJcbiAgICAgICAgdGhpcy5fc2hvd1R4dCh0aGlzLl9jdXJDb3VudERvd24pO1xyXG4gICAgfSxcclxuXHJcbiAgICBfY291bnREb3duRW5kIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMudW5zY2hlZHVsZSh0aGlzLmxldF91cGRhdGUpO1xyXG4gICAgICAgIHRoaXMuX2NsZWFyVHh0VGlwKCk7XHJcbiAgICB9LFxyXG4gICAgLy9mcmFtZVxyXG4gICAgbGV0X3VwZGF0ZSA6IGZ1bmN0aW9uIChkdCkge1xyXG4gICAgICAgIGlmKHRoaXMuX2N1ckNvdW50RG93biA+IDApe1xyXG4gICAgICAgICAgICB0aGlzLl9jdXJDb3VudERvd24gLT0gMTtcclxuICAgICAgICAgICAgdGhpcy5fc2hvd1R4dCh0aGlzLl9jdXJDb3VudERvd24pO1xyXG4gICAgICAgICAgICBpZih0aGlzLl9jdXJDb3VudERvd24gPD0gMCkge1xyXG4gICAgICAgICAgICAgICAgLy/lgJLorqHml7bnu5PmnZ9cclxuICAgICAgICAgICAgICAgIHRoaXMuX2NvdW50RG93bkVuZCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICBfY2xlYXJUeHRUaXAgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYodGhpcy5fY2FsbEJhY2spIHtcclxuICAgICAgICAgICAgdGhpcy5fY2FsbEJhY2soKTtcclxuICAgICAgICAgICAgdGhpcy5fY2FsbEJhY2sgPSBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLl9oaWRlVGlwKCk7XHJcbiAgICB9LFxyXG5cclxuICAgIC8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblxyXG4gICAgLy/nu5HlrprmtojlpLHlh73mlbBcclxuICAgIGJpbmRIaWRlRnVuYyA6IGZ1bmN0aW9uIChmdW5jKSB7XHJcbiAgICAgICAgdGhpcy5faGlkZUZ1bmMgPSBmdW5jO1xyXG4gICAgfSxcclxuXHJcbiAgICBfaGlkZVRpcCA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZih0aGlzLl90aXBNZ3IpIHRoaXMuX3RpcE1nci5vbmVUaXBIaWRlKHRoaXMubm9kZSk7XHJcbiAgICAgICAgdGhpcy5ub2RlLmFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgICAgIGlmKHRoaXMuX2hpZGVGdW5jKXtcclxuICAgICAgICAgICAgdGhpcy5faGlkZUZ1bmMoKTtcclxuICAgICAgICAgICAgdGhpcy5faGlkZUZ1bmMgPSBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgLy/mmK/lkKblt7Lnu4/lnKjmmL7npLrkuoZcclxuICAgIGdldElzU2hvdyA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5ub2RlLmFjdGl2ZVxyXG4gICAgfSxcclxuICAgIHNldElzU2hvdyA6IGZ1bmN0aW9uIChpc1Nob3cpIHtcclxuICAgICAgICB0aGlzLm5vZGUuYWN0aXZlID0gaXNTaG93O1xyXG4gICAgfSxcclxuXHJcbiAgICAvL+iOt+WPluivpXRpcOeahOihqOagvOe0ouW8lVxyXG4gICAgZ2V0VGlwSW5kZXggOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3RpcEluZGV4XHJcbiAgICB9LFxyXG5cclxuICAgIG9uRGVzdHJveSA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZih0aGlzLl9jdXJDb3VudERvd24pIHRoaXMudW5zY2hlZHVsZSh0aGlzLmxldF91cGRhdGUpO1xyXG4gICAgfSxcclxuXHJcbiAgICAvLyBjYWxsZWQgZXZlcnkgZnJhbWUsIHVuY29tbWVudCB0aGlzIGZ1bmN0aW9uIHRvIGFjdGl2YXRlIHVwZGF0ZSBjYWxsYmFja1xyXG4gICAgLy8gdXBkYXRlOiBmdW5jdGlvbiAoZHQpIHtcclxuICAgIC8vXHJcbiAgICAvLyB9LFxyXG59KTtcclxuIiwiLy/mmL7npLpVSeeVjOmdoueahOWuueWZqFxyXG5cclxuXHJcbmNjLkNsYXNzKHtcclxuICAgIGV4dGVuZHM6IGNjLkNvbXBvbmVudCxcclxuICAgIHByb3BlcnRpZXM6IHtcclxuICAgICAgICBfZGljdF91aSA6IG51bGwsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL3Vp5pW055CG55qE5a2X5YW4XHJcbiAgICAgICAgX3VpX2Jhc2VVcmwgOiBudWxsLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy91aeaVtOeQhueahOWtl+WFuFxyXG4gICAgICAgIF9pc09uTG9hZCA6IG51bGwsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5piv5ZCm5q2j5Zyo5Yqg6L295LitXHJcblxyXG4gICAgICAgIG5vZGVfZ3JheUxheWVyIDoge1xyXG4gICAgICAgICAgICBkZWZhdWx0IDogbnVsbCxcclxuICAgICAgICAgICAgdHlwZSA6IGNjLk5vZGUsXHJcbiAgICAgICAgICAgIGRpc3BsYXlOYW1lIDogJ+eBsOiJsuWxgidcclxuICAgICAgICB9LFxyXG4gICAgfSxcclxuXHJcbiAgICAvLyB1c2UgdGhpcyBmb3IgaW5pdGlhbGl6YXRpb25cclxuICAgIG9uTG9hZDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuX2RpY3RfdWkgPSB7fTtcclxuICAgICAgICB0aGlzLl91aV9iYXNlVXJsID0gJ1VJX3ByZWZhYnMvJztcclxuICAgICAgICB0aGlzLl9pc09uTG9hZCA9IGZhbHNlO1xyXG4gICAgfSxcclxuXHJcbiAgICAvL+iOt+WPluS4gOS4quWPr+S7peaYvuekuueahHVpXHJcbiAgICBhZGRVSSA6IGZ1bmN0aW9uICh1aU5hbWUsIGNhbGxCYWtjKSB7XHJcbiAgICAgICAgdGhpcy5zaG93VUkodWlOYW1lLCBjYWxsQmFrYyk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIC8vdmFyIHVpQ29tcCA9IHRoaXMuX2RpY3RfdWlbdWlOYW1lXTtcclxuICAgICAgICAvL2lmKCF1aUNvbXApe1xyXG4gICAgICAgIC8vICAgIC8vdmFyIHByZWZhYk5hbWUgPSAncHJlZmFiXycrdWlOYW1lLnNwbGl0KCdfJylbMV07XHJcbiAgICAgICAgLy8gICAgdmFyIHByZWZhYk5hbWUgPSB1aU5hbWU7XHJcbiAgICAgICAgLy8gICAgaWYoIXRoaXNbcHJlZmFiTmFtZV0pIHJldHVybiBudWxsO1xyXG4gICAgICAgIC8vICAgIHZhciB1aU5vZGUgPSBjYy5pbnN0YW50aWF0ZSh0aGlzW3ByZWZhYk5hbWVdKTtcclxuICAgICAgICAvLyAgICB1aU5vZGUucGFyZW50ID0gdGhpcy5ub2RlO1xyXG4gICAgICAgIC8vICAgIHZhciBwb3MgPSB0aGlzLl9nZXREaWFsb2dQb3MoKTtcclxuICAgICAgICAvLyAgICB1aU5vZGUucG9zaXRpb24gPSB0aGlzLl9nZXREaWFsb2dQb3MoKTtcclxuICAgICAgICAvLyAgICB1aUNvbXAgPSB1aU5vZGUuZ2V0Q29tcG9uZW50KHVpTmFtZSk7XHJcbiAgICAgICAgLy8gICAgdWlDb21wLnNldFVJTmFtZSh1aU5hbWUpO1xyXG4gICAgICAgIC8vICAgIHVpQ29tcC5iaW5kQ29udGFpbmVyKHRoaXMpO1xyXG4gICAgICAgIC8vICAgIHRoaXMuX2RpY3RfdWlbdWlOYW1lXSA9IHVpQ29tcDtcclxuICAgICAgICAvL31cclxuICAgICAgICAvL3VpQ29tcC5oaWRlTGF5ZXIoKTtcclxuICAgICAgICAvL3JldHVybiB1aUNvbXBcclxuICAgIH0sXHJcblxyXG4gICAgc2hvd1VJIDogZnVuY3Rpb24gKHVpTmFtZSwgY2FsbEJhY2spIHtcclxuICAgICAgICBpZih0aGlzLl9pc09uTG9hZCkgcmV0dXJuO1xyXG4gICAgICAgIGlmKCF1aU5hbWUpIHtcclxuICAgICAgICAgICAgLy/plJnor6/nmoR1aeWQjeensFxyXG4gICAgICAgICAgICBpZihjYWxsQmFjayl7XHJcbiAgICAgICAgICAgICAgICBjYWxsQmFjayhudWxsKTtcclxuICAgICAgICAgICAgICAgIGNhbGxCYWNrID0gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm5cclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIHVpQ29tcCA9IHRoaXMuX2RpY3RfdWlbdWlOYW1lXTtcclxuICAgICAgICBpZighdWlDb21wKXtcclxuICAgICAgICAgICAgLy/liJvlu7rnqpflj6NcclxuICAgICAgICAgICAgdmFyIHByZWZhYk5hbWUgPSB1aU5hbWU7XHJcbiAgICAgICAgICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgICAgICAgICAgdGhpcy5faXNPbkxvYWQgPSB0cnVlO1xyXG4gICAgICAgICAgICBjYy5sb2FkZXIubG9hZFJlcyh0aGlzLl91aV9iYXNlVXJsK3ByZWZhYk5hbWUsIGZ1bmN0aW9uIChlcnIsIHByZWZhYikge1xyXG4gICAgICAgICAgICAgICAgc2VsZi5faXNPbkxvYWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIHZhciB1aU5vZGUgPSBjYy5pbnN0YW50aWF0ZShwcmVmYWIpO1xyXG4gICAgICAgICAgICAgICAgdWlOb2RlLnBhcmVudCA9IHNlbGYubm9kZTtcclxuICAgICAgICAgICAgICAgIHVpTm9kZS5wb3NpdGlvbiA9IHNlbGYuX2dldERpYWxvZ1BvcygpO1xyXG4gICAgICAgICAgICAgICAgdWlDb21wID0gdWlOb2RlLmdldENvbXBvbmVudCh1aU5hbWUpO1xyXG4gICAgICAgICAgICAgICAgdWlDb21wLnNldFVJTmFtZSh1aU5hbWUpO1xyXG4gICAgICAgICAgICAgICAgdWlDb21wLmJpbmRDb250YWluZXIoc2VsZik7XHJcbiAgICAgICAgICAgICAgICBzZWxmLl9kaWN0X3VpW3VpTmFtZV0gPSB1aUNvbXA7XHJcbiAgICAgICAgICAgICAgICB1aUNvbXAuaGlkZUxheWVyKCk7XHJcbiAgICAgICAgICAgICAgICBpZihjYWxsQmFjayl7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FsbEJhY2sodWlDb21wKTtcclxuICAgICAgICAgICAgICAgICAgICBjYWxsQmFjayA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAvL+W3sue7j+WIm+W7uui/h+ivpXVpXHJcbiAgICAgICAgICAgIHVpQ29tcC5oaWRlTGF5ZXIoKTtcclxuICAgICAgICAgICAgaWYoY2FsbEJhY2spe1xyXG4gICAgICAgICAgICAgICAgY2FsbEJhY2sodWlDb21wKTtcclxuICAgICAgICAgICAgICAgIGNhbGxCYWNrID0gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgLy/lop7liqDkuIDkuKrpop3lpJbnmoR1aeWIsHVp566h55CG5a2X5YW4XHJcbiAgICBhZGRVSUV4IDogZnVuY3Rpb24gKHVpTmFtZSwgdWlDb21wKSB7XHJcbiAgICAgICAgaWYoIXVpQ29tcCkgcmV0dXJuO1xyXG4gICAgICAgIHVpQ29tcC5zZXRVSU5hbWUodWlOYW1lKTtcclxuICAgICAgICB0aGlzLl9kaWN0X3VpW3VpTmFtZV0gPSB1aUNvbXA7XHJcbiAgICB9LFxyXG5cclxuICAgIC8v5YWz6Zet5LiA5LiqdWlcclxuICAgIGNsb3NlVUkgOiBmdW5jdGlvbiAodWlOYW1lKSB7XHJcbiAgICAgICAgaWYoIXRoaXMuX2RpY3RfdWlbdWlOYW1lXSkgcmV0dXJuO1xyXG4gICAgICAgIHRoaXMuX2RpY3RfdWlbdWlOYW1lXS5oaWRlTGF5ZXIoKTtcclxuICAgIH0sXHJcblxyXG4gICAgLy/ojrflj5bkuIDkuKpVSeeahOaTjeS9nOiEmuacrFxyXG4gICAgZ2V0VUlDb21wIDogZnVuY3Rpb24gKHVpTmFtZSkge1xyXG4gICAgICAgIHZhciB1aUNvbXAgPSB0aGlzLl9kaWN0X3VpW3VpTmFtZV07XHJcbiAgICAgICAgaWYoIXVpQ29tcCkgdWlDb21wID0gdGhpcy5hZGRVSSh1aU5hbWUpO1xyXG4gICAgICAgIHJldHVybiB1aUNvbXBcclxuICAgIH0sXHJcblxyXG4gICAgLy/lhbPpl63miYDmnInnmoTnqpflj6PmmL7npLpcclxuICAgIGNsb3NlQWxsVUkgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgZm9yKHZhciB1aU5hbWUgaW4gdGhpcy5fZGljdF91aSl7XHJcbiAgICAgICAgICAgIHRoaXMuY2xvc2VVSSh1aU5hbWUpO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgX2dldERpYWxvZ1BvcyA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgZGVzaWduU2l6ZSA9IGNjLnN5cy5pc01vYmlsZSA/IGNjLnZpZXcuZ2V0RGVzaWduUmVzb2x1dGlvblNpemUoKSA6IGNjLnZpc2libGVSZWN0O1xyXG4gICAgICAgIHJldHVybiBjYy5wKGRlc2lnblNpemUud2lkdGgqMC41LGRlc2lnblNpemUuaGVpZ2h0KjAuNSk7XHJcbiAgICB9LFxyXG5cclxuICAgIC8v6K6+572u572u54Gw5bGC55qE5pi+6ZqQXHJcbiAgICBzZXRHcmF5TGF5ZXJJc1Nob3cgOiBmdW5jdGlvbiAoaXNTaG93KSB7XHJcbiAgICAgICAgaWYodGhpcy5ub2RlX2dyYXlMYXllcikgdGhpcy5ub2RlX2dyYXlMYXllci5hY3RpdmUgPSBpc1Nob3c7XHJcbiAgICB9LFxyXG5cclxuICAgIC8vIGNhbGxlZCBldmVyeSBmcmFtZSwgdW5jb21tZW50IHRoaXMgZnVuY3Rpb24gdG8gYWN0aXZhdGUgdXBkYXRlIGNhbGxiYWNrXHJcbiAgICAvLyB1cGRhdGU6IGZ1bmN0aW9uIChkdCkge1xyXG5cclxuICAgIC8vIH0sXHJcbn0pO1xyXG4iLCIvL+e7k+eul+eVjOmdouS4reiDnOWIqeaOkuihjOeahOWktOWDj1xyXG5cclxuXHJcbmNjLkNsYXNzKHtcclxuICAgIGV4dGVuZHM6IGNjLkNvbXBvbmVudCxcclxuXHJcbiAgICBwcm9wZXJ0aWVzOiB7XHJcbiAgICAgICAgX2RlZmF1bHRIZWFkRnJhbWUgOiBudWxsLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5pi+56S66buY6K6k55qE5aS05YOPXHJcblxyXG4gICAgICAgIG5vZGVfaGVhZCA6IHtcclxuICAgICAgICAgICAgZGVmYXVsdCA6IG51bGwsXHJcbiAgICAgICAgICAgIHR5cGUgOiBjYy5Ob2RlLFxyXG4gICAgICAgICAgICBkaXNwbGF5TmFtZSA6ICflpLTlg4/nsr7ngbUnXHJcbiAgICAgICAgfSxcclxuICAgICAgICBsYWJlbF9wbGF5ZXJOYW1lIDoge1xyXG4gICAgICAgICAgICBkZWZhdWx0IDogbnVsbCxcclxuICAgICAgICAgICAgdHlwZSA6IGNjLkxhYmVsLFxyXG4gICAgICAgICAgICBkaXNwbGF5TmFtZSA6ICfnjqnlrrblkI3lrZcnXHJcbiAgICAgICAgfSxcclxuICAgICAgICBsYWJlbF9nb2xkIDoge1xyXG4gICAgICAgICAgICBkZWZhdWx0IDogbnVsbCxcclxuICAgICAgICAgICAgdHlwZSA6IGNjLkxhYmVsLFxyXG4gICAgICAgICAgICBkaXNwbGF5TmFtZSA6ICfph5HluIHmlbDlgLwnXHJcbiAgICAgICAgfSxcclxuICAgIH0sXHJcblxyXG4gICAgLy8gdXNlIHRoaXMgZm9yIGluaXRpYWxpemF0aW9uXHJcbiAgICBvbkxvYWQ6IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICB9LFxyXG5cclxuICAgIHNldERhdGEgOiBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgIHRoaXMuX3NldFBsYXllck5hbWUoZGF0YS5uYW1lKTtcclxuICAgICAgICB0aGlzLl9zZXRHb2xkVmFsdWUoZGF0YS5hZGRHb2xkKTtcclxuICAgICAgICBHX1RPT0wuc2V0SGVhZEltZyh0aGlzLm5vZGVfaGVhZCwgZGF0YS5pY29uKTtcclxuICAgIH0sXHJcblxyXG4gICAgLy/orr7nva7njqnlrrblkI3lrZdcclxuICAgIF9zZXRQbGF5ZXJOYW1lIDogZnVuY3Rpb24gKG5hbWUpIHtcclxuICAgICAgICBpZighbmFtZSkgbmFtZSA9ICcnO1xyXG4gICAgICAgIG5hbWUgPSBHX1RPT0wuZ2V0TmFtZUxpbWl0KG5hbWUsIDgsIHRydWUpO1xyXG4gICAgICAgIHRoaXMubGFiZWxfcGxheWVyTmFtZS5zdHJpbmcgPSBuYW1lO1xyXG4gICAgfSxcclxuXHJcbiAgICBfc2V0R29sZFZhbHVlIDogZnVuY3Rpb24gKG5ld1ZhbHVlKSB7XHJcbiAgICAgICAgdGhpcy5sYWJlbF9nb2xkLnN0cmluZyA9IEdfVE9PTC5jaGFuZ2VNb25leShuZXdWYWx1ZSk7XHJcbiAgICB9LFxyXG5cclxuICAgIHNldElzU2hvdyA6IGZ1bmN0aW9uIChpc1Nob3cpIHtcclxuICAgICAgICB0aGlzLm5vZGUuYWN0aXZlID0gaXNTaG93O1xyXG4gICAgfSxcclxuICAgIGdldElzU2hvdyA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5ub2RlLmFjdGl2ZVxyXG4gICAgfSxcclxuXHJcbiAgICAvLyBjYWxsZWQgZXZlcnkgZnJhbWUsIHVuY29tbWVudCB0aGlzIGZ1bmN0aW9uIHRvIGFjdGl2YXRlIHVwZGF0ZSBjYWxsYmFja1xyXG4gICAgLy8gdXBkYXRlOiBmdW5jdGlvbiAoZHQpIHtcclxuXHJcbiAgICAvLyB9LFxyXG59KTtcclxuIiwiLy/lr7nosaHlhoXlrrnmnprkuL5cclxuXHJcbndpbmRvdy5HX09CSiA9IHdpbmRvdy5HX09CSiB8fCB7fTtcclxuXHJcbi8v55m+5Lq65oqV5rOo5L+h5oGvXHJcbkdfT0JKLmRhdGFfYnVsbEJldHRpbmcgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICByZXR1cm57XHJcbiAgICAgICAgLy/mnaXmupDkuo7moYzlrZDnmoTkv6Hmga9cclxuICAgICAgICB0YWJsZUluZGV4IDogbnVsbCwvL+ahjOWtkOe0ouW8lVxyXG4gICAgICAgIHBvc0xpc3QgOiBudWxsLC8v6YeR5biB55qE5L2N572u5YiX6KGoXHJcbiAgICAgICAgLy/mnaXmupDkuI7njqnlrrbnmoTkv6Hmga9cclxuICAgICAgICBzdGFydFBvcyA6IG51bGwsLy/ph5HluIHlvIDlp4vnp7vliqjnmoTkvY3nva5cclxuICAgICAgICBnb2xkVmFsdWUgOiBudWxsLC8v5oqV5rOo55qE6YeR5biB5a6e6ZmF5pWw5YC8XHJcbiAgICAgICAgZ29sZE51bSA6IG51bGwsLy/po57ooYzlnKjlnLrmma/kuK3nmoTph5HluIHmlbDph49cclxuICAgICAgICAvL+aYr+WQpuaYr+aTjeS9nOS9jeaKleazqFxyXG4gICAgICAgIGlzTWluZSA6IG51bGwsXHJcbiAgICB9XHJcbn07XHJcbi8v5oq85a6d5oqV5rOo5L+h5oGvXHJcbkdfT0JKLmRhdGFfZ3JhYkJldHRpbmcgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICByZXR1cm57XHJcbiAgICAgICAgLy/mnaXmupDkuo7moYzlrZDnmoTkv6Hmga9cclxuICAgICAgICB0YWJsZUluZGV4IDogbnVsbCwvL+ahjOWtkOe0ouW8lVxyXG4gICAgICAgIHRhcmdldFBvcyA6IG51bGwsLy/mipXms6jljLrln5/nmoTkvY3nva5cclxuICAgICAgICBjYWxsRnVuYyA6IG51bGwsLy/noa7lrprnp7vliqjph5HluIHliLDmipXms6jljLrln5/lkI7nmoTlm57osINcclxuICAgICAgICAvL+adpea6kOS4jueOqeWutueahOS/oeaBr1xyXG4gICAgICAgIHN0YXJ0UG9zIDogbnVsbCwvL+mHkeW4geW8gOWni+enu+WKqOeahOS9jee9rlxyXG4gICAgICAgIGdvbGRWYWx1ZSA6IG51bGwsLy/mipXms6jnmoTph5HluIHlrp7pmYXmlbDlgLxcclxuICAgICAgICBnb2xkTnVtIDogbnVsbCwvL+mjnuihjOWcqOWcuuaZr+S4reeahOmHkeW4geaVsOmHj1xyXG4gICAgICAgIC8v5piv5ZCm5piv5pON5L2c5L2N5oqV5rOoXHJcbiAgICAgICAgaXNNaW5lIDogbnVsbCxcclxuICAgIH1cclxufTtcclxuLy/mirzlrp3mmL7npLrljaHniYzkv6Hmga9cclxuR19PQkouZGF0YV9ncmFiUG9rZXJJbmZvID0gZnVuY3Rpb24gKCkge1xyXG4gICAgcmV0dXJue1xyXG4gICAgICAgIHBva2VySW5mb0xpc3QgOiBudWxsLC8v5Y2h54mM5L+h5oGv5YiX6KGoXHJcbiAgICAgICAgcG9rZXJSZXN1bHQgOiBudWxsLCAvL+i/meWJr+eJjOeahOe7k+aenOWAvFxyXG4gICAgICAgIGlzRmx5RWZmZWN0IDogbnVsbCwgLy/mmK/lkKbmkq3mlL7po57ooYzmlYjmnpxcclxuICAgICAgICBzdGFydFBva2VySW5kZXggOiBudWxsLC8v5pi+56S655qE5Y2h54mM57Si5byV77yM5LuO56ys5Yeg5Liq5byA5aeL5pi+56S6XHJcbiAgICAgICAgY2FsbEZ1bmMgOiBudWxsLCAvL+WPkeeJjOe7k+adn+eahOWbnuiwg1xyXG4gICAgfVxyXG59O1xyXG4vL+S7juWkp+WOhei/m+aIv+mcgOimgeS8oOi+k+eahOS/oeaBr1xyXG5HX09CSi5kYXRhX2luSG9tZURhdGEgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICByZXR1cm57XHJcbiAgICAgICAgbmV0X2luSG9tZURhdGEgOiBudWxsLC8v6L+b5oi/6K+35rGC5L+h5oGvXHJcbiAgICAgICAgbmV0X3Jlc2V0SG9tZURhdGEgOiBudWxsLC8v6L+b5oi/5ZCO55qE5byA5bGA5L+h5oGvXHJcbiAgICB9XHJcbn1cclxuLy/po57ooYzph5HluIHpnIDopoHnmoTmlbDmja5cclxuR19PQkouZGF0YV9mbHlHb2xkX3BsYXllclRvVGFibGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICByZXR1cm57XHJcbiAgICAgICAgdGFibGVJbmRleCA6IG51bGwsICAgICAgICAgIC8v5oqV5rOo5Yy65Z+f57Si5byVXHJcbiAgICAgICAgZ29sZE51bSA6IG51bGwsICAgICAgICAgIC8v5oqV5rOo6aOe6KGM55qE6YeR5biB5pWw6YePXHJcbiAgICAgICAgc3RhcnRQb3MgOiBudWxsLCAgICAgICAgICAvL+mHkeW4gemjnuihjOeahOWQr+ekuuS9jee9rlxyXG4gICAgICAgIGNhbGxGdW5jIDogbnVsbCwgICAgICAgICAgLy/ph5HluIHpo57ooYzlkI7nmoTlm57osINcclxuICAgIH1cclxufVxyXG4vL+mjnuihjOmHkeW4geWbnuaUtuWIsOeOqeWutumcgOimgeeahOaVsOaNrlxyXG5HX09CSi5kYXRhX2ZseUdvbGRfdGFibGVUb1BsYXllciA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHJldHVybntcclxuICAgICAgICB0YWJsZUluZGV4IDogbnVsbCwgICAgICAgICAgLy/mipXms6jljLrln5/ntKLlvJVcclxuICAgICAgICBnb2xkTnVtIDogbnVsbCwgICAgICAgICAgLy/mipXms6jpo57ooYznmoTph5HluIHmlbDph49cclxuICAgICAgICB0YXJnZXRQb3MgOiBudWxsLCAgICAgICAgICAvL+mHkeW4gemjnuihjOeahOWQr+ekuuS9jee9rlxyXG4gICAgfVxyXG59XHJcbi8v55uR5ZCs546p5a626Ieq5bex6YeR5biB5Y+Y5YyW55qE5pe25YCZ5Lyg6YCS55qE5L+h5oGvXHJcbkdfT0JKLmRhdGFfbmJTZWxmID0gZnVuY3Rpb24gKCkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBiYWxhbmNlIDogbnVsbCwvL+S9meminVxyXG4gICAgICAgIHVzYWJsZUJhbGFuY2UgOiBudWxsLC8v5Y+v55So6YeR6aKdXHJcbiAgICB9XHJcbn1cclxuLy/liIfmjaLpobXpnaLnmoTmj5Lku7bohJrmnKzliJ3lp4vljJbpnIDopoHnmoTmlbDmja4gICAgKGNvbnRlbnRsaXN05ZKMcHJlZmFibGlzdOmcgOimgeS4gOS4gOWvueW6lClcclxuR19PQkouZGF0YV9kaWFsb2dfZXhjaGFuZ2VQYWdlcyA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgbGVmdERlYWxTY3JvbGxDb21wIDogbnVsbCwgICAgICAgICAgICAgIC8v5bem6L655rua5Yqo5bGCXHJcbiAgICAgICAgbGVmdFByZWZhYiA6IG51bGwsICAgICAgICAgICAgICAgICAgICAgIC8v5bem6L656YCJ6aG56aKE5Yi25L2TXHJcbiAgICAgICAgbGVmdENvbnRlbnRMaXN0IDogbnVsbCwgICAgICAgICAgICAgICAgIC8v5bem6L656YCJ6aG55YaF5a655YiX6KGoXHJcbiAgICAgICAgbGVmdENsaWNrRnVuYyA6IG51bGwsICAgICAgICAgICAgICAgICAgICAvL+W3pui+ueeahOWbnuiwg++8jOS8muS8oOWFpeWvueW6lOeahGluZGV4XHJcbiAgICAgICAgcmlnaHREZWFsU2Nyb2xsQ29tcCA6IG51bGwsICAgICAgICAgICAgIC8v5Y+z6L655rua5Yqo5bGCXHJcbiAgICAgICAgcmlnaHRQcmVmYWJMaXN0IDogbnVsbCwgICAgICAgICAgICAgICAgIC8v5Y+z6L655YaF5a6555qE6aKE5Yi25L2T5YiX6KGoXHJcbiAgICAgICAgaXNTdG9wU2V0UmlnaHRDb250ZW50IDogbnVsbCwgICAgICAgICAgIC8v5piv5ZCm5LiN5Li75Yqo5Yi35paw5Y+z6L655pWw5o2uICA7IOm7mOiupOS8muagueaNruWFtuS7luS/oeaBr+iHquWKqOWIt+aWsFxyXG4gICAgfVxyXG59XHJcbi8v6LWb5LqL57uT566X5L+h5oGvXHJcbkdfT0JKLmRhdGFfbWF0Y2hFbmQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIHBva2Vyc0luZm9MaXN0IDogbnVsbCwgICAgICAgICAgICAgICAgICAgICAgLy/miYDmnInljaHniYzniYzpnaLmmL7npLrkv6Hmga9cclxuICAgICAgICBwb2tlcnNSZXN1bHRMaXN0IDogbnVsbCwgICAgICAgICAgICAgICAgICAgIC8v5omA5pyJ5Y2h54mM57uT5p6c5L+h5oGvXHJcbiAgICAgICAgb3RoZXJzSW5mbyA6IG51bGwsICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/lhbbku5bluqfkvY3kuIrnmoTnjqnlrrbkv6Hmga9cclxuICAgICAgICBkZWFsZXJJbmZvIDogbnVsbCwgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+W6hOWutuS/oeaBr1xyXG4gICAgICAgIG15c2VsZkluZm8gOiBudWxsLCAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v6Ieq5bex55qE5L+h5oGvXHJcbiAgICB9XHJcbn1cclxuLy/nu5PnrpfnmoTml7blgJnoh6rlt7HnmoTkv6Hmga9cclxuR19PQkouZGF0YV9zZWxmTWF0Y2hFbmREYXRhID0gZnVuY3Rpb24gKCkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBjaGFuZ2VHb2xkIDogbnVsbCwgICAgICAgICAgICAgICAgICAgICAgICAgIC8v57uT566X5pe25YCZ5pS55Y+Y55qE6YeR5biBICAo5Lyg5YWl55qE5YC85b+F6aG75piv5pW05pWwKVxyXG4gICAgICAgIGxlYXZlR29sZCA6IG51bGwsICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/nu5Pnrpfml7blgJnliankvZnnmoTph5HluIEgIO+8iOS8oOWFpeeahOWAvOW/hemhu+aYr+aVtOaVsO+8iVxyXG4gICAgfVxyXG59XHJcbi8vaHR0cOivt+axgueahOaVsOaNrlxyXG5HX09CSi5kYXRhX2h0dHBTZW5kID0gZnVuY3Rpb24gKCkge1xyXG4gICAgcmV0dXJue1xyXG4gICAgICAgIHVybCA6IG51bGwsICAgICAgICAgICAgICAgICAvL+i3r+W+hFxyXG4gICAgICAgIHNlbmREYXRhIDogbnVsbCwgICAgICAgICAgICAvL+WPkemAgeeahOaVsOaNrlxyXG4gICAgICAgIGNhbGxGdW5jIDogbnVsbCwgICAgICAgICAgICAvL+aOpeaUtuWIsOaVsOaNrueahOWbnuiwg1xyXG4gICAgICAgIHhoclR5cGUgOiBudWxsLCAgICAgICAgICAgIC8v5o6l5pS25Yiw5pWw5o2u55qE5Zue6LCDXHJcbiAgICB9XHJcbn1cclxuXHJcbi8v6K6w5b2V6K+35rGC5pe25Y+R6YCB55qE5a+56LGhXHJcbkdfT0JKLmRhdGFfcmVxdWVzdFJlY29yZCA9IGZ1bmN0aW9uICgpe1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBnYW1lSWQ6bnVsbCwgICAgICAgICAgICAvL+a4uOaIj2lkXHJcbiAgICAgICAgZGF0ZUNsYXNzOm51bGwsICAgICAgICAgLy/or7fmsYLlk6rkuKrml7bpl7TmrrXnmoTmlbDmja4gIDDmmK/lvZPliY3vvIwx5piv5pio5aSpXHJcbiAgICAgICAgcGFnZVNpemU6bnVsbCwgICAgICAgICAgLy/or7fmsYLkuIDpobXnmoTmnaHnm67mlbDph49cclxuICAgICAgICBwYWdlTm86bnVsbCwgICAgICAgICAgICAvL+ivt+axgueahOaYr+esrOWHoOmhtSAg5LuOMOW8gOWni1xyXG4gICAgfVxyXG59IiwiLy/lpJrpobXpnaLliIfmjaLnmoTmj5Lku7bohJrmnKxcclxuLy/lrprkuYnlt6bovrnpgInpobnmjInpkq7nmoTml7blgJnvvIzkuIDlrprpnIDopoHkuIDkuKrlkb3lkI3kuLpjb250ZW5055qEbGFiZWxcclxuLy/ov5nph4zkvb/nlKjnmoTmu5rliqjlsYLpg73mmK/mnInnu5HlrppkZWFsc2Nyb2xs6ISa5pys55qEXHJcbi8v6buY6K6k5YaF5a6555qE5pi+56S677yM6ZyA6KaB5Zyoc3RhcnTph4zpnaLlgZpcclxuY2MuQ2xhc3Moe1xyXG4gICAgZXh0ZW5kczogY2MuQ29tcG9uZW50LFxyXG5cclxuICAgIHByb3BlcnRpZXM6IHtcclxuICAgICAgICBfY2xpY2tGdW5jIDogbnVsbCwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+eCueWHu+mAiemhueWQjuinpuWPkeeahOS6i+S7tlxyXG4gICAgICAgIF9sZWZ0RGVhbENvbXAgOiBudWxsLCAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v54K55Ye76YCJ6aG55ZCO6Kem5Y+R55qE5LqL5Lu2XHJcbiAgICAgICAgX2RpY3RfcmlnaHRDb250ZW50IDogbnVsbCwgICAgICAgICAgICAgICAgICAgICAgLy/lj7PovrnnmoTlhoXlrrlcclxuICAgICAgICBfbGlzdF9yaWdodFByZWZhYiA6IG51bGwsICAgICAgICAgICAgICAgICAgICAgICAvL+WPs+i+ueeahOmihOWItuS9k+mbhuWQiFxyXG4gICAgICAgIF9yaWdodFNjcm9sbCA6IG51bGwsICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5Y+z6L6555qE5rua5Yqo5bGCXHJcbiAgICAgICAgX3JpZ2h0U2Nyb2xsVmlld0NvbXAgOiBudWxsLCAgICAgICAgICAgICAgICAgICAvL+WPs+i+ueeahOa7muWKqOWxglxyXG4gICAgICAgIF9sYXN0UmlnaHRDb250ZW50IDogbnVsbCwgICAgICAgICAgICAgICAgICAgICAgIC8v5Y+z6L6555qE5LiK5qyh5pi+56S655qE5YaF5a65XHJcbiAgICAgICAgX2xhc3RJbmRleCA6IG51bGwsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5LiK5qyh54K55Ye755qE6YCJ6aG5XHJcbiAgICAgICAgX2lzUmlnaHRBdXRvTGltaXQgOiBudWxsLCAgICAgICAgICAgICAgICAgICAgICAvL+aYr+WQpuemgeatouWPs+i+ueWGheWuueiHquWKqOWIt+aWsFxyXG4gICAgICAgIF9jbGlja1Nob3dMaW1pdCA6IG51bGwsICAgICAgICAgICAgICAgICAgICAgICAgIC8v5piv5ZCm5Li75Yqo5o6n5Yi254K55Ye75LqL5Lu255qE6KGo546w5pWI5p6cXHJcbiAgICB9LFxyXG5cclxuICAgIC8vIHVzZSB0aGlzIGZvciBpbml0aWFsaXphdGlvblxyXG4gICAgb25Mb2FkOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5fbGVmdE5vcm1hbE5hbWUgPSAnbm9ybWFsJztcclxuICAgICAgICB0aGlzLl9sZWZ0Q2hvb3NlTmFtZSA9ICdjaG9vc2UnO1xyXG4gICAgICAgIHRoaXMuX2RpY3RfcmlnaHRDb250ZW50ID0ge307XHJcbiAgICB9LFxyXG5cclxuICAgIGluaXREYXRhIDogZnVuY3Rpb24gKGRhdGFPYmopIHtcclxuICAgICAgICB0aGlzLl9jbGlja1Nob3dMaW1pdCA9IGZhbHNlO1xyXG4gICAgICAgIC8vZGF0YU9iaiA9IEdfT0JKLmRhdGFfZGlhbG9nX2V4Y2hhbmdlUGFnZXMoKTtcclxuICAgICAgICB0aGlzLl9pbml0TGVmdFNjcm9sbChkYXRhT2JqKTtcclxuICAgICAgICAvL+WPs+i+ueeahOmihOWItuS9k1xyXG4gICAgICAgIHRoaXMuX2xpc3RfcmlnaHRQcmVmYWIgPSBkYXRhT2JqLnJpZ2h0UHJlZmFiTGlzdDtcclxuICAgICAgICB0aGlzLl9yaWdodFNjcm9sbCA9IGRhdGFPYmoucmlnaHREZWFsU2Nyb2xsQ29tcC5ub2RlO1xyXG4gICAgICAgIHRoaXMuX3JpZ2h0U2Nyb2xsVmlld0NvbXAgPSBkYXRhT2JqLnJpZ2h0RGVhbFNjcm9sbENvbXAuZ2V0U2Nyb2xsVmlldygpO1xyXG5cclxuICAgICAgICB0aGlzLl9pc1JpZ2h0QXV0b0xpbWl0ID0gZGF0YU9iai5pc1N0b3BTZXRSaWdodENvbnRlbnQ7XHJcbiAgICB9LFxyXG5cclxuICAgIHNob3dEZWZhdWx0IDogZnVuY3Rpb24gKGlzUmVzZXQpIHtcclxuICAgICAgICBpZihpc1Jlc2V0KSB0aGlzLl9sYXN0SW5kZXggPSBudWxsO1xyXG4gICAgICAgIHRoaXMuX29uQ2xpY2sobnVsbCwgMCk7XHJcbiAgICB9LFxyXG5cclxuICAgIC8vPT09PT09PT09PT09PT09PT09PT09PT3lt6bovrlcclxuXHJcbiAgICBfaW5pdExlZnRTY3JvbGwgOiBmdW5jdGlvbiAoZGF0YU9iaikge1xyXG4gICAgICAgIGlmKCFkYXRhT2JqLmxlZnREZWFsU2Nyb2xsQ29tcCkgcmV0dXJuO1xyXG4gICAgICAgIHRoaXMuX2xlZnREZWFsQ29tcCA9IGRhdGFPYmoubGVmdERlYWxTY3JvbGxDb21wO1xyXG5cclxuICAgICAgICB2YXIgY3VyRGF0YSA9IHtcclxuICAgICAgICAgICAgaXRlbVByZWZhYiA6IGRhdGFPYmoubGVmdFByZWZhYixcclxuICAgICAgICAgICAgc2Nyb2xsVHlwZSA6IEdfVFlQRS5zY3JvbGxUeXBlLnZlcnRpY2FsLFxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLl9sZWZ0RGVhbENvbXAuc2V0RGF0YShjdXJEYXRhKTtcclxuICAgICAgICAvL+WIneWni+WMluW3pui+ueWGheWuuVxyXG4gICAgICAgIHRoaXMuX2NsaWNrRnVuYyA9IGRhdGFPYmoubGVmdENsaWNrRnVuYztcclxuICAgICAgICB2YXIgaXRlbSwgY29udGVudE5vZGUsIGNvbnRlbnRMaXN0ID0gZGF0YU9iai5sZWZ0Q29udGVudExpc3Q7XHJcbiAgICAgICAgZm9yKHZhciBpID0gMDsgaSA8IGNvbnRlbnRMaXN0Lmxlbmd0aDsgaSArKyl7XHJcbiAgICAgICAgICAgIGl0ZW0gPSB0aGlzLl9sZWZ0RGVhbENvbXAuZ2V0SXRlbUJ5SW5kZXgoaSk7XHJcbiAgICAgICAgICAgIGlmKGl0ZW0pe1xyXG4gICAgICAgICAgICAgICAgY29udGVudE5vZGUgPSBpdGVtLmdldENoaWxkQnlOYW1lKCdjb250ZW50Jyk7XHJcbiAgICAgICAgICAgICAgICBpZighY29udGVudE5vZGUpIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgY29udGVudE5vZGUuZ2V0Q29tcG9uZW50KGNjLkxhYmVsKS5zdHJpbmcgPSBjb250ZW50TGlzdFtpXTtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLl9yZWdpc3RlckNsaWNrRXZlbnQoaXRlbSwgdGhpcy5fb25DbGljaywgdGhpcywgaSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIF9vbkNsaWNrIDogZnVuY3Rpb24gKGV2ZW50LCBpbmRleCkge1xyXG4gICAgICAgIGlmKHRoaXMuX2xhc3RJbmRleCA9PSBpbmRleCkgcmV0dXJuO1xyXG5cclxuICAgICAgICBpZih0aGlzLl9jbGlja0Z1bmMpe1xyXG4gICAgICAgICAgICB0aGlzLl9jbGlja0Z1bmMoaW5kZXgpXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZighdGhpcy5fY2xpY2tTaG93TGltaXQpIHRoaXMuZG9uZUNsaWNrU2hvdyhpbmRleCk7XHJcbiAgICB9LFxyXG5cclxuICAgIGRpeUNsaWNrU2hvdyA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLl9jbGlja1Nob3dMaW1pdCA9IHRydWU7XHJcbiAgICB9LFxyXG5cclxuICAgIGRvbmVDbGlja1Nob3cgOiBmdW5jdGlvbiAoaW5kZXgpIHtcclxuICAgICAgICB0aGlzLl9sYXN0SW5kZXggPSBpbmRleDtcclxuICAgICAgICB0aGlzLl9zaG93TGVmdChpbmRleCk7XHJcbiAgICAgICAgdGhpcy5fc2hvd1JpZ2h0Q29udGVudChpbmRleCk7XHJcbiAgICB9LFxyXG5cclxuICAgIF9zaG93TGVmdCA6IGZ1bmN0aW9uIChpbmRleCkge1xyXG4gICAgICAgIHZhciBpdGVtID0gdGhpcy5fbGVmdERlYWxDb21wLmdldEl0ZW1CeUluZGV4KGluZGV4KTtcclxuICAgICAgICBpZihpdGVtKXtcclxuICAgICAgICAgICAgaWYodGhpcy5fbGFzdFRvdWNoQnRuKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9sYXN0VG91Y2hCdG4uZ2V0Q2hpbGRCeU5hbWUodGhpcy5fbGVmdENob29zZU5hbWUpLmFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fbGFzdFRvdWNoQnRuID0gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLl9sYXN0VG91Y2hCdG4gPSBpdGVtO1xyXG4gICAgICAgICAgICBpdGVtLmdldENoaWxkQnlOYW1lKHRoaXMuX2xlZnRDaG9vc2VOYW1lKS5hY3RpdmUgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgLy/lj7Povrk9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblxyXG4gICAgLy/mmL7npLrpgInkuK3nmoTlj7PovrnlhoXlrrlcclxuICAgIF9zaG93UmlnaHRDb250ZW50IDogZnVuY3Rpb24gKGluZGV4KSB7XHJcbiAgICAgICAgdGhpcy5fcmlnaHRTY3JvbGxWaWV3Q29tcC5zY3JvbGxUb1RvcCgwLjUpO1xyXG5cclxuICAgICAgICBpZih0aGlzLl9pc1JpZ2h0QXV0b0xpbWl0KSByZXR1cm47XHJcbiAgICAgICAgaWYodGhpcy5fbGFzdFJpZ2h0Q29udGVudCl7XHJcbiAgICAgICAgICAgIHRoaXMuX2xhc3RSaWdodENvbnRlbnQuYWN0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgcmlnaHRDb250ZW50ID0gdGhpcy5fZGljdF9yaWdodENvbnRlbnRbaW5kZXhdO1xyXG4gICAgICAgIGlmKCFyaWdodENvbnRlbnQpe1xyXG4gICAgICAgICAgICByaWdodENvbnRlbnQgPSB0aGlzLl9jcmVhdGVSaWdodENvbnRlbnQoaW5kZXgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLl9yaWdodFNjcm9sbC5oZWlnaHQgPSByaWdodENvbnRlbnQuaGVpZ2h0O1xyXG4gICAgICAgIHJpZ2h0Q29udGVudC5hY3RpdmUgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuX2xhc3RSaWdodENvbnRlbnQgPSByaWdodENvbnRlbnQ7XHJcbiAgICB9LFxyXG5cclxuICAgIC8v5paw5bu65LiA5Liq6KeE5YiZXHJcbiAgICBfY3JlYXRlUmlnaHRDb250ZW50IDogZnVuY3Rpb24gKGluZGV4KSB7XHJcbiAgICAgICAgaWYoIXRoaXMuX2xpc3RfcmlnaHRQcmVmYWJbaW5kZXhdKSByZXR1cm4gbnVsbDtcclxuICAgICAgICB2YXIgcmlnaHRDb250ZW50ID0gY2MuaW5zdGFudGlhdGUodGhpcy5fbGlzdF9yaWdodFByZWZhYltpbmRleF0pXHJcbiAgICAgICAgcmlnaHRDb250ZW50LnBhcmVudCA9IHRoaXMuX3JpZ2h0U2Nyb2xsO1xyXG4gICAgICAgIHRoaXMuX2RpY3RfcmlnaHRDb250ZW50W2luZGV4XSA9IHJpZ2h0Q29udGVudDtcclxuICAgICAgICByZXR1cm4gcmlnaHRDb250ZW50XHJcbiAgICB9LFxyXG5cclxuICAgIF9yZWdpc3RlckNsaWNrRXZlbnQgOiBmdW5jdGlvbiAobm9kZSwgY2FsbEJhY2ssIHRhcmdldCwgdXNlckRhdGEpIHtcclxuICAgICAgICBub2RlLm9uKGNjLk5vZGUuRXZlbnRUeXBlLlRPVUNIX1NUQVJULCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgR0cuYXVkaW9NZ3IucGxheVNvdW5kKDE3KTtcclxuICAgICAgICB9LCB0YXJnZXQpO1xyXG4gICAgICAgIG5vZGUub24oY2MuTm9kZS5FdmVudFR5cGUuVE9VQ0hfRU5ELCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgY2FsbEJhY2suY2FsbCh0YXJnZXQsIGV2ZW50LCB1c2VyRGF0YSk7XHJcbiAgICAgICAgfSwgdGFyZ2V0KTtcclxuICAgICAgICBub2RlLm9uKGNjLk5vZGUuRXZlbnRUeXBlLlRPVUNIX0NBTkNFTCwgZnVuY3Rpb24gKGV2ZW50KSB7XHJcblxyXG4gICAgICAgIH0sIHRhcmdldCk7XHJcbiAgICB9LFxyXG5cclxuICAgIC8vIGNhbGxlZCBldmVyeSBmcmFtZSwgdW5jb21tZW50IHRoaXMgZnVuY3Rpb24gdG8gYWN0aXZhdGUgdXBkYXRlIGNhbGxiYWNrXHJcbiAgICAvLyB1cGRhdGU6IGZ1bmN0aW9uIChkdCkge1xyXG5cclxuICAgIC8vIH0sXHJcbn0pO1xyXG4iLCIvL+WcqOeJjOWxgOS4reeOqeWutumHkeW4geeahOeuoeeQhlxyXG5jYy5DbGFzcyh7XHJcbiAgICBleHRlbmRzOiBjYy5Db21wb25lbnQsXHJcblxyXG4gICAgcHJvcGVydGllczoge1xyXG4gICAgICAgIF9iYWxhbmNlIDogbnVsbCwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+eOqeWutueahOaJgOacieS9meminVxyXG4gICAgICAgIF91c2FibGVCYWxhbmNlIDogbnVsbCwgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v546p5a6255qE5Y+v55So5L2Z6aKdXHJcbiAgICAgICAgX2JldHRpbmdHb2xkVmFsdWUgOiBudWxsLCAgICAgICAgICAgICAgICAgICAgICAgICAgLy/njqnlrrblnKjmnKzlsYDkuK3mipXms6jlh7rljrvnmoTph5Hpop1cclxuICAgICAgICBfZ29sZFZhbHVlRVggOiBudWxsLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+mineWklueahOmHkeW4ge+8jOeUqOS6juWQg+eTnOe+pOS8l+aJo+mZpFxyXG4gICAgICAgIF9ibG9jayA6IG51bGwsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+aMgui9veWvueixoVxyXG4gICAgfSxcclxuXHJcbiAgICAvLyB1c2UgdGhpcyBmb3IgaW5pdGlhbGl6YXRpb25cclxuICAgIG9uTG9hZDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuX3BhcnRfdWkgPSB0aGlzLmdldENvbXBvbmVudCgnUGFydF9wbGF5ZXJCbG9ja19VSScpO1xyXG5cclxuICAgICAgICB0aGlzLl9iYWxhbmNlID0gMDtcclxuICAgICAgICB0aGlzLl91c2FibGVCYWxhbmNlID0gMDtcclxuICAgICAgICB0aGlzLl9iZXR0aW5nR29sZFZhbHVlID0gMDtcclxuICAgICAgICB0aGlzLl9nb2xkVmFsdWVFWCA9IDA7XHJcbiAgICB9LFxyXG5cclxuICAgIGJpbmRCbG9jayA6IGZ1bmN0aW9uIChibG9jaykge1xyXG4gICAgICAgIHRoaXMuX2Jsb2NrID0gYmxvY2s7XHJcbiAgICB9LFxyXG5cclxuICAgIGFkZEJhbGFuY2UgOiBmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgICB0aGlzLl9iYWxhbmNlICs9IHZhbHVlO1xyXG4gICAgICAgIHRoaXMuX2Jsb2NrLnNob3dHb2xkVmFsdWUodGhpcy5fYmFsYW5jZSk7XHJcbiAgICB9LFxyXG5cclxuICAgIGFkZFVzYWJsZUJhbGFuY2UgOiBmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgICB0aGlzLl91c2FibGVCYWxhbmNlICs9IHZhbHVlO1xyXG4gICAgICAgIHRoaXMuX2Jsb2NrLnNob3dHb2xkVmFsdWUodGhpcy5fdXNhYmxlQmFsYW5jZSk7XHJcbiAgICB9LFxyXG5cclxuICAgIHBheUJhbGFuY2UgOiBmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgICB0aGlzLl9iYWxhbmNlIC09IHZhbHVlO1xyXG4gICAgICAgIHRoaXMuX2Jsb2NrLnNob3dHb2xkVmFsdWUodGhpcy5fYmFsYW5jZSk7XHJcbiAgICB9LFxyXG5cclxuICAgIHBheVVzYWJsZUJhbGFuY2UgOiBmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgICB0aGlzLl91c2FibGVCYWxhbmNlIC09IHZhbHVlO1xyXG4gICAgICAgIHRoaXMuX2Jsb2NrLnNob3dHb2xkVmFsdWUodGhpcy5fdXNhYmxlQmFsYW5jZSk7XHJcbiAgICB9LFxyXG5cclxuICAgIHNldEJhbGFuY2UgOiBmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgICB0aGlzLl9iYWxhbmNlID0gdmFsdWU7XHJcbiAgICAgICAgdGhpcy5fYmxvY2suc2hvd0dvbGRWYWx1ZSh0aGlzLl9iYWxhbmNlKTtcclxuICAgIH0sXHJcblxyXG4gICAgc2V0VXNhYmxlQmFsYW5jZSA6IGZ1bmN0aW9uICh2YWx1ZSkge1xyXG4gICAgICAgIHRoaXMuX3VzYWJsZUJhbGFuY2UgPSB2YWx1ZTtcclxuICAgICAgICAvL3RoaXMuX2Jsb2NrLnNob3dHb2xkVmFsdWUodGhpcy5fdXNhYmxlQmFsYW5jZSk7XHJcbiAgICB9LFxyXG5cclxuICAgIGdldEJhbGFuY2UgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2JhbGFuY2U7XHJcbiAgICB9LFxyXG5cclxuICAgIGdldFVzYWJsZUJhbGFuY2UgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3VzYWJsZUJhbGFuY2U7XHJcbiAgICB9LFxyXG5cclxuICAgIC8v5bey57uP5oqV5rOo55qE6YeR6aKdPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuXHJcbiAgICBzZXRCZXR0aW5nR29sZCA6IGZ1bmN0aW9uICh2YWx1ZSkge1xyXG4gICAgICAgIHRoaXMuX2JldHRpbmdHb2xkVmFsdWUgPSB2YWx1ZTtcclxuICAgIH0sXHJcbiAgICBhZGRCZXR0aW5nR29sZCA6IGZ1bmN0aW9uICh2YWx1ZSkge1xyXG4gICAgICAgIHRoaXMuX2JldHRpbmdHb2xkVmFsdWUgKz0gdmFsdWU7XHJcbiAgICB9LFxyXG4gICAgZ2V0QmV0dGluZ0dvbGQgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2JldHRpbmdHb2xkVmFsdWU7XHJcbiAgICB9LFxyXG5cclxuICAgIC8v6aKd5aSW6K6h566X55qE6YeR5biB77yM55So5LqO5ZCD55Oc576k5LyXPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblxyXG4gICAgc2V0R29sZFZhbHVlRVggOiBmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgICB0aGlzLl9nb2xkVmFsdWVFWCA9IHZhbHVlO1xyXG4gICAgfSxcclxuXHJcbiAgICBhZGRHb2xkVmFsdWVFWCA6IGZ1bmN0aW9uICh2YWx1ZSkge1xyXG4gICAgICAgIHRoaXMuX2dvbGRWYWx1ZUVYICs9IHZhbHVlO1xyXG4gICAgfSxcclxuXHJcbiAgICBwYXlHb2xkVmFsdWVFWCA6IGZ1bmN0aW9uICh2YWx1ZSkge1xyXG4gICAgICAgIHRoaXMuX2dvbGRWYWx1ZUVYIC09IHZhbHVlO1xyXG4gICAgfSxcclxuXHJcbiAgICBnZXRHb2xkVmFsdWVFWCA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZ29sZFZhbHVlRVg7XHJcbiAgICB9LFxyXG5cclxuICAgIC8vIGNhbGxlZCBldmVyeSBmcmFtZSwgdW5jb21tZW50IHRoaXMgZnVuY3Rpb24gdG8gYWN0aXZhdGUgdXBkYXRlIGNhbGxiYWNrXHJcbiAgICAvLyB1cGRhdGU6IGZ1bmN0aW9uIChkdCkge1xyXG5cclxuICAgIC8vIH0sXHJcbn0pO1xyXG4iLCIvL+Wkp+WOheWcuuaZr+euoeeQhlxyXG5cclxuY2MuQ2xhc3Moe1xyXG4gICAgZXh0ZW5kczogcmVxdWlyZSgnQmFzZU1hbmFnZXInKSxcclxuICAgIHByb3BlcnRpZXM6IHtcclxuICAgICAgICBfZGljdF91aSA6IG51bGwsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9VSeWtl+WFuFxyXG4gICAgICAgIF9yaWNoUmFua0RhdGEgOiBudWxsLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v6LSi5a+M5o6S6KGM5qac55qE5L+h5oGvXHJcbiAgICAgICAgX3VpX2Jhc2VVcmw6IG51bGwsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL3Vp5pW055CG55qE5a2X5YW4XHJcbiAgICAgICAgX3Jvb21Db21wOiBudWxsLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5oi/6Ze06ISa5pysXHJcbiAgICAgICAgX2VudGVyUm9vbUNhbGxGdW5jIDogbnVsbCwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/ov5vlhaXmuLjmiI/miL/pl7TlkI7nmoTlm57osINcclxuICAgICAgICBfaXNGaXJzdEVudGVyIDogbnVsbCwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+aYr+WQpuesrOS4gOasoei/m+WFpea4uOaIj1xyXG4gICAgICAgIF9yZUNvbm5lY3ROdW0gOiBudWxsLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v6YeN6L+e5qyh5pWwXHJcblxyXG4gICAgICAgIGNvbXBfdWlDb250YWluZXIgOiB7XHJcbiAgICAgICAgICAgICdkZWZhdWx0JyA6IG51bGwsXHJcbiAgICAgICAgICAgIHR5cGUgOiByZXF1aXJlKCdPYmpfdWlDb250YWluZXInKSxcclxuICAgICAgICAgICAgZGlzcGxheU5hbWUgOiAnVUnlrrnlmagnXHJcbiAgICAgICAgfSxcclxuICAgICAgICBjb21wX2VudGVyQnRuIDoge1xyXG4gICAgICAgICAgICAnZGVmYXVsdCcgOiBudWxsLFxyXG4gICAgICAgICAgICB0eXBlIDogcmVxdWlyZSgnUGxhdGZvcm1fdWlfZW50ZXInKSxcclxuICAgICAgICAgICAgZGlzcGxheU5hbWUgOiAn5oi/6Ze05YWl5Y+jJ1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgY29tcF9sZWZ0UmFuayA6IHtcclxuICAgICAgICAgICAgJ2RlZmF1bHQnIDogbnVsbCxcclxuICAgICAgICAgICAgdHlwZSA6IHJlcXVpcmUoJ1BsYXRmb3JtX2xlZnRSYW5rJyksXHJcbiAgICAgICAgICAgIGRpc3BsYXlOYW1lIDogJ+W3pui+ueWIl+ihqOWuueWZqCdcclxuICAgICAgICB9LFxyXG4gICAgICAgIGNvbXBfYm90dG9tQnRucyA6IHtcclxuICAgICAgICAgICAgJ2RlZmF1bHQnIDogbnVsbCxcclxuICAgICAgICAgICAgdHlwZSA6IHJlcXVpcmUoJ1BsYXRmb3JtX2JvdHRvbUJ0bnMnKSxcclxuICAgICAgICAgICAgZGlzcGxheU5hbWUgOiAn5bqV6YOo5oyJ6ZKu5a655ZmoJ1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgY29tcF90b3BJbmZvIDoge1xyXG4gICAgICAgICAgICAnZGVmYXVsdCcgOiBudWxsLFxyXG4gICAgICAgICAgICB0eXBlIDogcmVxdWlyZSgnUGxhdGZvcm1fdG9wSW5mbycpLFxyXG4gICAgICAgICAgICBkaXNwbGF5TmFtZSA6ICflpKfljoXpobbpg6jkv6Hmga8nXHJcbiAgICAgICAgfSxcclxuICAgIH0sXHJcblxyXG4gICAgLy8gdXNlIHRoaXMgZm9yIGluaXRpYWxpemF0aW9uXHJcbiAgICBvbkxvYWQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLl9zdXBlcigpO1xyXG4gICAgICAgIHRoaXMuX3VpX2Jhc2VVcmwgPSAnVUlfcHJlZmFicy8nO1xyXG4gICAgICAgIEdHLnBsYXRmb3JtTWdyID0gdGhpcztcclxuICAgICAgICB0aGlzLl9yb29tTm9kZSA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuX2lzRmlyc3RFbnRlciA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuX3JlQ29ubmVjdE51bSA9IDA7XHJcbiAgICB9LFxyXG5cclxuICAgIHN0YXJ0IDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuX2luaXRNYWluU2NlbmUoKTtcclxuXHJcbiAgICAgICAgaWYoR19Db25maWdfY29tbW9uLmlzTG9jYWwpe1xyXG4gICAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICAgICAgICAgIHNldEludGVydmFsKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGlmKEdHLnRpcHNNZ3IgJiYgIXNlbGYuZ2V0QWRJc0xpbWl0KCkpIEdHLnRpcHNNZ3IuYWRkTm90aWNlKCfov5nmmK/kuIDkuKrlvojplb/nmoTlhazlkYotLS0tLS0tLS0tLS0tLS0tLS0nKTtcclxuICAgICAgICAgICAgfSwgMzAwMClcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIF9pbml0TWFpblNjZW5lIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmKEdfQ29uZmlnX2NvbW1vbi5pc0xvY2FsKXtcclxuICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHNlbGYuY29tcF9sZWZ0UmFuay5zZXRSaWNoRGF0YSgpO1xyXG4gICAgICAgICAgICAgICAgc2VsZi5zaG93SG9tZUxpc3QoZmFsc2UsIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgLy8gR0cuYXVkaW9NZ3IucGxheU11c2ljKCk7XHJcbiAgICAgICAgICAgIH0sIDEwMClcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgICAgICAgICB0aGlzLmNvbXBfbGVmdFJhbmsuc2V0UmljaERhdGEoKTtcclxuICAgICAgICAgICAgLy/orr7nva7njqnlrrbkv6Hmga9cclxuICAgICAgICAgICAgdGhpcy5jb21wX3RvcEluZm8uaW5pdFNob3coKTtcclxuICAgICAgICAgICAgLy/mmK/lkKbnm7TmjqXot7PovazliLDmiL/pl7TliJfooahcclxuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZGF0YU9iaiA9IEdHLmdldFBsYXllcigpLmdldE91dEhvbWVEYXRhKClcclxuICAgICAgICAgICAgICAgIGlmKGRhdGFPYmogJiYgZGF0YU9iai5nYW1lVHlwZSAhPSBHX1RZUEUuZ2FtZU1vZHVsZS5wbGF0Zm9ybSkgc2VsZi5jb21wX2VudGVyQnRuLnNob3dIb21lTGlzdEZpcnN0KGRhdGFPYmouZ2FtZVR5cGUsIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgZWxzZSBzZWxmLnNob3dIb21lTGlzdChmYWxzZSwgdHJ1ZSk7XHJcbiAgICAgICAgICAgIH0sIDEwMCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICAvL+aYvuekuuafkOS4qlVJ77yM5Lyg5YWlR19SRVNfVVJM6YeM6Z2i55qEVUnlkI3lrZdcclxuICAgIG9wZW5VSSA6IGZ1bmN0aW9uICh1aU5hbWUsIGNhbGxCYWNrKSB7XHJcbiAgICAgICAgdGhpcy5jb21wX3VpQ29udGFpbmVyLmFkZFVJKHVpTmFtZSwgY2FsbEJhY2spO1xyXG4gICAgfSxcclxuXHJcbiAgICAvL+aOp+WItuaIv+mXtOWIl+ihqOeahOaYvumakFxyXG4gICAgc2hvd0hvbWVMaXN0IDogZnVuY3Rpb24gKGlzT3V0LCBpc05vRWZmZWN0KSB7XHJcbiAgICAgICAgdGhpcy5jb21wX2VudGVyQnRuLm1vdmVPdXRTY2VuZShpc091dCwgaXNOb0VmZmVjdCk7XHJcbiAgICAgICAgdGhpcy5jb21wX2xlZnRSYW5rLm1vdmVPdXRTY2VuZShpc091dCwgaXNOb0VmZmVjdCk7XHJcbiAgICAgICAgdGhpcy5jb21wX2JvdHRvbUJ0bnMubW92ZU91dFNjZW5lKGlzT3V0LCBpc05vRWZmZWN0KTtcclxuICAgICAgICB0aGlzLmNvbXBfdG9wSW5mby5zZXRIb21lTGlzdFNob3coaXNPdXQsIGlzTm9FZmZlY3QpO1xyXG4gICAgICAgIGlmKHRoaXMuX3Jvb21Db21wKXtcclxuICAgICAgICAgICAgaWYoaXNPdXQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3Jvb21Db21wLnNob3dMYXllcigpO1xyXG4gICAgICAgICAgICAgICAgR0cucGxhdGZvcm1NZ3Iuc2V0QWRMaW1pdCh0cnVlKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3Jvb21Db21wLmhpZGVMYXllcigpO1xyXG4gICAgICAgICAgICAgICAgR0cucGxhdGZvcm1NZ3Iuc2V0QWRMaW1pdChmYWxzZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgLy/mmL7npLrmiL/pl7TliJfooajkv6Hmga9cclxuICAgIHNldEhvbWVMaXN0SW5mbyA6IGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgdGhpcy5fcm9vbUNvbXAuc2V0RGF0YUxpc3QoZGF0YSk7XHJcbiAgICB9LFxyXG5cclxuICAgIC8v5Yqg6L296YWN572u5paH5Lu257uT5p2fXHJcbiAgICBfYWRkQ29uZmlnQ2FsbEZ1bmMgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHRhYmxlID0gR0cudGFibGVNZ3IuZ2V0VGFibGUoR19SRVNfVVJMLmRpY3RfdGFibGVzTmFtZS5ncmFiQ29uZmlnKTtcclxuICAgICAgICBpZih0YWJsZSkge1xyXG4gICAgICAgICAgICB2YXIgZGF0YU9iaiA9IHRhYmxlLmdldEZpcnN0RGF0YSgpO1xyXG4gICAgICAgICAgICB0aGlzLl9hZGRDb25maWcoR19Db25maWdfZ3JhYiwgZGF0YU9iaik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgdGFibGUgPSBHRy50YWJsZU1nci5nZXRUYWJsZShHX1JFU19VUkwuZGljdF90YWJsZXNOYW1lLmNvbW1vbkNvbmZpZyk7XHJcbiAgICAgICAgaWYodGFibGUpIHtcclxuICAgICAgICAgICAgdmFyIGRhdGFPYmogPSB0YWJsZS5nZXRGaXJzdERhdGEoKTtcclxuICAgICAgICAgICAgdGhpcy5fYWRkQ29uZmlnKEdfQ29uZmlnX2NvbW1vbiwgZGF0YU9iaik7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIC8v5aKe5Yqg6YWN572u5L+h5oGvXHJcbiAgICBfYWRkQ29uZmlnIDogZnVuY3Rpb24gKHRhcmdldE9iamVjdCwgYWRkT2JqZWN0KSB7XHJcbiAgICAgICAgaWYoYWRkT2JqZWN0KXtcclxuICAgICAgICAgICAgZm9yKHZhciBhdHRyTmFtZSBpbiBhZGRPYmplY3Qpe1xyXG4gICAgICAgICAgICAgICAgdGFyZ2V0T2JqZWN0W2F0dHJOYW1lXSA9IGFkZE9iamVjdFthdHRyTmFtZV07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIHNob3dSb29tVUkgOiBmdW5jdGlvbiAocHJlZmFiTmFtZSwgY2FsbEJhY2spIHtcclxuICAgICAgICBpZiAoIXRoaXMuX3Jvb21Db21wKSB7XHJcbiAgICAgICAgICAgIHZhciBzZWxmID0gdGhpcyxcclxuICAgICAgICAgICAgICAgIHVpQ29tcDtcclxuICAgICAgICAgICAgR19EQVRBLmdldFJvb21MaXN0SnNvbihmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBjYy5sb2FkZXIubG9hZFJlcyhzZWxmLl91aV9iYXNlVXJsICsgcHJlZmFiTmFtZSwgZnVuY3Rpb24gKGVyciwgcHJlZmFiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoZXJyKXtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB1aU5vZGUgPSBjYy5pbnN0YW50aWF0ZShwcmVmYWIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB1aU5vZGUucGFyZW50ID0gc2VsZi5jb21wX2JvdHRvbUJ0bnMubm9kZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdWlDb21wID0gdWlOb2RlLmdldENvbXBvbmVudChwcmVmYWJOYW1lKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fcm9vbUNvbXAgPSB1aUNvbXA7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmKGNhbGxCYWNrKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FsbEJhY2sodWlDb21wKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FsbEJhY2sgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmKGNhbGxCYWNrKXtcclxuICAgICAgICAgICAgICAgIGNhbGxCYWNrKHRoaXMuX3Jvb21Db21wKTtcclxuICAgICAgICAgICAgICAgIGNhbGxCYWNrID0gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgLy/ph4rmlL7miL/pl7TliJfooajotYTmupBcclxuICAgIHJlbGVhc2VSb29tVUkgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGRlcHMgPSBjYy5sb2FkZXIuZ2V0RGVwZW5kc1JlY3Vyc2l2ZWx5KHRoaXMuX3VpX2Jhc2VVcmwgKyAnUHJlZmFiX3Jvb21MaXN0Jyk7XHJcbiAgICAgICAgY2MubG9hZGVyLnJlbGVhc2UoZGVwcyk7XHJcbiAgICB9LFxyXG5cclxuICAgIC8v6L+b5YWl5ri45oiP5oi/6Ze055qE6K+35rGCXHJcbiAgICByZXF1ZXN0RW50ZXJSb29tIDogZnVuY3Rpb24gKG5ldERhdGEsIGNhbGxGdW5jKSB7XHJcbiAgICAgICAgdGhpcy5fZW50ZXJSb29tQ2FsbEZ1bmMgPSBjYWxsRnVuYztcclxuICAgICAgICBHRy5zb2NrZXRNZ3IuU2VuZE1zZyhOZXRUeXBlLnNfZW50ZXJIb3VzZSwgbmV0RGF0YSk7XHJcbiAgICAgICAgR0cuc29ja2V0TWdyLnJlZ2lzdGVyTG9uZyhOZXRUeXBlLnJfZW50ZXJIb3VzZVJldHVybiwgdGhpcy5uZXRfc2V0SG9tZURhdGEuYmluZCh0aGlzKSk7XHJcbiAgICB9LFxyXG5cclxuICAgIC8v5o6l5pS25Yiw6L+b5oi/5L+h5oGvXHJcbiAgICBuZXRfc2V0SG9tZURhdGEgOiBmdW5jdGlvbiAocmVjdkRhdGEpIHtcclxuICAgICAgICBpZighcmVjdkRhdGEpIHJldHVybjtcclxuICAgICAgICB2YXIgdGlwID0gcmVjdkRhdGEudGlwO1xyXG4gICAgICAgIGlmKHRpcC5jb2RlICE9IEdfVFlQRS5zZXJ2ZXJDb2RlVHlwZS5zdWNjZXNzKSB7XHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHRpcC50aXApO1xyXG4gICAgICAgICAgICAvL+i/m+WFpeaIv+mXtOWksei0pS3ph5HluIHkuI3otrNcclxuICAgICAgICAgICAgaWYgKHRpcC5jb2RlID09IEdfVFlQRS5zZXJ2ZXJDb2RlVHlwZS5nb2xkTm90RW5vdWdoKSB7XHJcbiAgICAgICAgICAgICAgICBHRy50aXBzTWdyLnNob3dDb25maXJtVGlwX09ORSh0aXAudGlwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy/mmL7npLrmiL/pl7TliJfooahcclxuICAgICAgICAgICAgICAgICAgICAvL+aYr+WQpuebtOaOpei3s+i9rOWIsOaIv+mXtOWIl+ihqFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIHRoaXMuX2lzRmlyc3RFbnRlciA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIHRoaXMuX29uZVJlcXVlc3RFbmQoKTtcclxuICAgICAgICAgICAgICAgIH0uYmluZCh0aGlzKSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgR0cudGlwc01nci5zaG93Q29uZmlybVRpcF9PTkUodGlwLnRpcCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8v6L+b5YWl5oi/6Ze05aSx6LSlXHJcbiAgICAgICAgICAgICAgICAgICAgaWYodGlwLmNvZGUgPT0gR19UWVBFLnNlcnZlckNvZGVUeXBlLm1hdGNoTm9FbmQpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL+W3sue7j+W8gOWni+eahOavlOi1m+acque7k+adn1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy/muIXnkIZoYXNo5L+h5oGvXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEdfREFUQS5zZXRDdXJTY2VuZUhhc2goJycsMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEdHLmV4aXRIb21lKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgaW5Ib21lRGF0YSA9IEdfT0JKLmRhdGFfaW5Ib21lRGF0YSgpO1xyXG4gICAgICAgIGluSG9tZURhdGEubmV0X2luSG9tZURhdGEgPSByZWN2RGF0YTtcclxuICAgICAgICBHRy5nZXRQbGF5ZXIoKS5zZXRJbkhvbWVEYXRhKGluSG9tZURhdGEpO1xyXG4gICAgICAgIGlmKHRoaXMuX2VudGVyUm9vbUNhbGxGdW5jKXtcclxuICAgICAgICAgICAgdGhpcy5fZW50ZXJSb29tQ2FsbEZ1bmMoKTtcclxuICAgICAgICAgICAgdGhpcy5fZW50ZXJSb29tQ2FsbEZ1bmMgPSBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgb25EZXN0cm95IDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuX3N1cGVyKCk7XHJcbiAgICAgICAgR0cucGxhdGZvcm1NZ3IgPSBudWxsO1xyXG4gICAgICAgIC8vIHRoaXMucmVsZWFzZVJvb21VSSgpO1xyXG4gICAgfSxcclxuXHJcbiAgICAvLyBjYWxsZWQgZXZlcnkgZnJhbWUsIHVuY29tbWVudCB0aGlzIGZ1bmN0aW9uIHRvIGFjdGl2YXRlIHVwZGF0ZSBjYWxsYmFja1xyXG4gICAgLy8gdXBkYXRlOiBmdW5jdGlvbiAoZHQpIHtcclxuXHJcbiAgICAvLyB9LFxyXG59KTtcclxuIiwiLy/lupXpg6jmjInpkq5cclxuXHJcblxyXG5jYy5DbGFzcyh7XHJcbiAgICBleHRlbmRzOiByZXF1aXJlKCdCYXNlVUknKSxcclxuXHJcbiAgICBwcm9wZXJ0aWVzOiB7XHJcbiAgICAgICAgbm9kZV9idXR0b25Db250YWluZXIgOiB7XHJcbiAgICAgICAgICAgIGRlZmF1bHQgOiBudWxsLFxyXG4gICAgICAgICAgICB0eXBlIDogY2MuTm9kZSxcclxuICAgICAgICAgICAgZGlzcGxheU5hbWUgOiAn5oyJ6ZKu5a655ZmoJ1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgbm9kZV9wcm9wQ29udGFpbmVyIDoge1xyXG4gICAgICAgICAgICBkZWZhdWx0IDogbnVsbCxcclxuICAgICAgICAgICAgdHlwZSA6IGNjLk5vZGUsXHJcbiAgICAgICAgICAgIGRpc3BsYXlOYW1lIDogJ+mBk+WFt+WuueWZqCdcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIC8vIHVzZSB0aGlzIGZvciBpbml0aWFsaXphdGlvblxyXG4gICAgb25Mb2FkOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5fcmVnaXN0ZXJFdmVudCgpO1xyXG5cclxuICAgIH0sXHJcblxyXG4gICAgX3JlZ2lzdGVyRXZlbnQgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGJ0bnMgPSB0aGlzLm5vZGVfYnV0dG9uQ29udGFpbmVyLmNoaWxkcmVuO1xyXG4gICAgICAgIGZvcih2YXIgaSA9IDA7IGk8YnRucy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBidG5zW2ldLnRhZyA9IGk7XHJcbiAgICAgICAgICAgIHRoaXMucmVnaXN0ZXJCdXR0b24oYnRuc1tpXSwgdGhpcy5fb25DbGlja190b3VjaEJ0biwgdGhpcyk7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICBfb25DbGlja190b3VjaEJ0biA6IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgIHN3aXRjaCAoZXZlbnQuY3VycmVudFRhcmdldC50YWcpe1xyXG4gICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAvL+eCueWHu+aJk+W8gOWFrOWRiuW8ueeql1xyXG4gICAgICAgICAgICAgICAgLy9HRy5wbGF0Zm9ybU1nci5zaG93VUkoJ1VJX2Fubm91bmNlbWVudCcsIGZhbHNlKTtcclxuICAgICAgICAgICAgICAgIHZhciB1aU5hbWUgPSBHX1JFU19VUkwudWlOYW1lLmFubm91bmNlbWVudDtcclxuICAgICAgICAgICAgICAgIHZhciBsYXllciA9IEdHLnBsYXRmb3JtTWdyLm9wZW5VSSh1aU5hbWUsIGZ1bmN0aW9uIChsYXllcikge1xyXG4gICAgICAgICAgICAgICAgICAgIGxheWVyLnNob3dMYXllcigpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgLy/ngrnlh7vmiZPlvIDop4TliJnlvLnnqpdcclxuICAgICAgICAgICAgICAgIC8vR0cucGxhdGZvcm1NZ3Iuc2hvd1VJKCdVSV9ydWxlcycsIGZhbHNlKTtcclxuICAgICAgICAgICAgICAgIHZhciB1aU5hbWUgPSBHX1JFU19VUkwudWlOYW1lLnJ1bGVzO1xyXG4gICAgICAgICAgICAgICAgR0cucGxhdGZvcm1NZ3Iub3BlblVJKHVpTmFtZSwgZnVuY3Rpb24gKGxheWVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGF5ZXIuc2hvd0xheWVyKCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAvL+eCueWHu+aJk+W8gOiusOW9leW8ueeql1xyXG4gICAgICAgICAgICAgICAgLy9HRy5wbGF0Zm9ybU1nci5zaG93VUkoJ1VJX3JlY29yZCcsIGZhbHNlKTtcclxuICAgICAgICAgICAgICAgIC8vR0cucGxhdGZvcm1NZ3IuZ2V0UmVjb3JkRGF0YSgpO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciB1aU5hbWUgPSBHX1JFU19VUkwudWlOYW1lLnJlY29yZDtcclxuICAgICAgICAgICAgICAgIHZhciBsYXllciA9IEdHLnBsYXRmb3JtTWdyLm9wZW5VSSh1aU5hbWUsIGZ1bmN0aW9uIChsYXllcikge1xyXG4gICAgICAgICAgICAgICAgICAgIGxheWVyLnNldERhdGEoKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgMzpcclxuICAgICAgICAgICAgICAgIC8v54K55Ye75omT5byA5biQ55uu5by556qXXHJcbiAgICAgICAgICAgICAgICB2YXIgdWlOYW1lID0gR19SRVNfVVJMLnVpTmFtZS5hY2NvdW50O1xyXG4gICAgICAgICAgICAgICAgdmFyIGxheWVyID0gR0cucGxhdGZvcm1NZ3Iub3BlblVJKHVpTmFtZSwgZnVuY3Rpb24gKGxheWVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGF5ZXIuc2V0RGF0YSgpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgLy/np7vlh7rlsY/luZXlpJZcclxuICAgIG1vdmVPdXRTY2VuZSA6IGZ1bmN0aW9uIChpc091dCwgaXNOb0VmZmVjdCkge1xyXG4gICAgICAgIGlmKCF0aGlzLm5vZGVfYnV0dG9uQ29udGFpbmVyLl9maXJzdEJ0blBvc1kpIHtcclxuICAgICAgICAgICAgdGhpcy5ub2RlX2J1dHRvbkNvbnRhaW5lci5fZmlyc3RCdG5Qb3NZID0gLXRoaXMubm9kZV9idXR0b25Db250YWluZXIueTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYoaXNOb0VmZmVjdCl7XHJcbiAgICAgICAgICAgIHRoaXMubm9kZV9idXR0b25Db250YWluZXIueSA9IHRoaXMubm9kZV9idXR0b25Db250YWluZXIuX2ZpcnN0QnRuUG9zWSAtIChpc091dD90aGlzLm5vZGVfYnV0dG9uQ29udGFpbmVyLmhlaWdodCp0aGlzLm5vZGVfYnV0dG9uQ29udGFpbmVyLnNjYWxlOjApO1xyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICB2YXIgdGltZSA9IDAuNTtcclxuICAgICAgICAgICAgdGhpcy5ub2RlX2J1dHRvbkNvbnRhaW5lci5zdG9wQWxsQWN0aW9ucygpO1xyXG4gICAgICAgICAgICB2YXIgdGFyZ2V0UG9zID0gY2MucCh0aGlzLm5vZGVfYnV0dG9uQ29udGFpbmVyLngsIHRoaXMubm9kZV9idXR0b25Db250YWluZXIuX2ZpcnN0QnRuUG9zWSk7XHJcbiAgICAgICAgICAgIGlmKGlzT3V0KSB0YXJnZXRQb3MueSA9IC0odGhpcy5ub2RlX2J1dHRvbkNvbnRhaW5lci5oZWlnaHQqdGhpcy5ub2RlX2J1dHRvbkNvbnRhaW5lci5zY2FsZS8yKTtcclxuICAgICAgICAgICAgdGhpcy5ub2RlX2J1dHRvbkNvbnRhaW5lci5ydW5BY3Rpb24oY2MubW92ZVRvKHRpbWUsIHRhcmdldFBvcykpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLm5vZGVfcHJvcENvbnRhaW5lci5hY3RpdmUgPSAhaXNPdXQ7XHJcbiAgICB9LFxyXG5cclxuICAgIC8vIGNhbGxlZCBldmVyeSBmcmFtZSwgdW5jb21tZW50IHRoaXMgZnVuY3Rpb24gdG8gYWN0aXZhdGUgdXBkYXRlIGNhbGxiYWNrXHJcbiAgICAvLyB1cGRhdGU6IGZ1bmN0aW9uIChkdCkge1xyXG5cclxuICAgIC8vIH0sXHJcbn0pO1xyXG4iLCIvL+a4uOaIj+Wkp+WOheeOqeWutuaOkuihjOamnFxyXG52YXIgcmFua1R5cGUgPSB7XHJcbiAgICB0eXBlMSA6IDEsXHJcbiAgICB0eXBlMiA6IDJcclxufVxyXG5jYy5DbGFzcyh7XHJcbiAgICBleHRlbmRzOiByZXF1aXJlKCdCYXNlVUknKSxcclxuXHJcbiAgICBwcm9wZXJ0aWVzOiB7XHJcbiAgICAgICAgX2xpc3RfaWRsZUZyaWVuZHMgOiBudWxsLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/msqHmnInmmL7npLrlh7rmnaXnmoTlpb3lj4tcclxuICAgICAgICBfY3VyUmFua1R5cGUgOiBudWxsLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/lvZPliY3pgInkuK3nmoTnsbvlnotcclxuICAgICAgICBfZ2FpbnNSYW5rRGF0YSA6IG51bGwsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/nm4jliKnmjpLooYzmppznmoTkv6Hmga9cclxuICAgICAgICBfZmlyc3RTaG93TnVtIDogbnVsbCwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/kuIDlvIDlp4vmmL7npLrnmoTmnaHnm67mlbDph49cclxuICAgICAgICBfbGlzdF9yaWNoRGF0YSA6IG51bGwsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/lr4zosarmppzkv6Hmga9cclxuICAgICAgICBfbGlzdF9nYWluc0RhdGEgOiBudWxsLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/nm4jliKnmppzkv6Hmga9cclxuXHJcbiAgICAgICAgX2lzUmljaERhdGFGdWxsIDogbnVsbCwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5piv5ZCm5bey57uP6K+35rGC5Yiw5omA5pyJ55qE5pWw5o2uXHJcbiAgICAgICAgX2lzR2FpbnNEYXRhRnVsbCA6IG51bGwsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5piv5ZCm5bey57uP6K+35rGC5Yiw5omA5pyJ55qE5pWw5o2uXHJcbiAgICAgICAgc3ByaXRlX2xpc3RHYWluT24gOiB7XHJcbiAgICAgICAgICAgIGRlZmF1bHQgOiBudWxsLFxyXG4gICAgICAgICAgICB0eXBlIDogY2MuU3ByaXRlLFxyXG4gICAgICAgICAgICBkaXNwbGF5TmFtZSA6ICfnm4jliKnmppzlm77moIcnXHJcbiAgICAgICAgfSxcclxuICAgICAgICBzcHJpdGVfbGlzdFJpY2hPbiA6IHtcclxuICAgICAgICAgICAgZGVmYXVsdCA6IG51bGwsXHJcbiAgICAgICAgICAgIHR5cGUgOiBjYy5TcHJpdGUsXHJcbiAgICAgICAgICAgIGRpc3BsYXlOYW1lIDogJ+WvjOixquamnOWbvuaghydcclxuICAgICAgICB9LFxyXG4gICAgICAgIHNwcml0ZV9saXN0UmFua2luZ0JHIDoge1xyXG4gICAgICAgICAgICBkZWZhdWx0IDogbnVsbCxcclxuICAgICAgICAgICAgdHlwZSA6IGNjLlNwcml0ZSxcclxuICAgICAgICAgICAgZGlzcGxheU5hbWUgOiAn6auY5Lqu5pi+56S65p2hJ1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgbm9kZV9saXN0R2FpbkJ0biA6IHtcclxuICAgICAgICAgICAgZGVmYXVsdCA6IG51bGwsXHJcbiAgICAgICAgICAgIHR5cGUgOiBjYy5Ob2RlLFxyXG4gICAgICAgICAgICBkaXNwbGF5TmFtZSA6ICfnm4jliKnmppzmjInpkq4nXHJcbiAgICAgICAgfSxcclxuICAgICAgICBub2RlX2xpc3RSaWNoQnRuIDoge1xyXG4gICAgICAgICAgICBkZWZhdWx0IDogbnVsbCxcclxuICAgICAgICAgICAgdHlwZSA6IGNjLk5vZGUsXHJcbiAgICAgICAgICAgIGRpc3BsYXlOYW1lIDogJ+WvjOixquamnOaMiemSridcclxuICAgICAgICB9LFxyXG4gICAgICAgIGNvbXBfaXRlbUNvbnRhaW5lciA6IHtcclxuICAgICAgICAgICAgZGVmYXVsdCA6IG51bGwsXHJcbiAgICAgICAgICAgIHR5cGUgOiByZXF1aXJlKCdPYmpfZGVhbFNjcm9sbCcpLFxyXG4gICAgICAgICAgICBkaXNwbGF5TmFtZSA6ICflpb3lj4vmjpLooYzmppzlrrnlmagnXHJcbiAgICAgICAgfSxcclxuICAgICAgICBwcmVmYWJfZnJpZW5kSXRlbSA6IHtcclxuICAgICAgICAgICAgZGVmYXVsdCA6IG51bGwsXHJcbiAgICAgICAgICAgIHR5cGUgOiBjYy5QcmVmYWIsXHJcbiAgICAgICAgICAgIGRpc3BsYXlOYW1lIDogJ+WlveWPi+adoeebridcclxuICAgICAgICB9LFxyXG4gICAgICAgIGxhYmVsX251bGwgOiB7XHJcbiAgICAgICAgICAgIGRlZmF1bHQgOiBudWxsLFxyXG4gICAgICAgICAgICB0eXBlIDogY2MuTGFiZWwsXHJcbiAgICAgICAgICAgIGRpc3BsYXlOYW1lIDogJ+aXoOaVsOaNruaXtuaYvuekuidcclxuICAgICAgICB9LFxyXG4gICAgICAgIGNvbXBfc2Nyb2xsIDoge1xyXG4gICAgICAgICAgICBkZWZhdWx0IDogbnVsbCxcclxuICAgICAgICAgICAgdHlwZSA6IGNjLlNjcm9sbFZpZXcsXHJcbiAgICAgICAgICAgIGRpc3BsYXlOYW1lIDogJ+a7muWKqOeahOWuueWZqCdcclxuICAgICAgICB9LFxyXG4gICAgfSxcclxuXHJcbiAgICAvLyB1c2UgdGhpcyBmb3IgaW5pdGlhbGl6YXRpb25cclxuICAgIG9uTG9hZDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuX2l0ZW1Db21wTmFtZSA9ICdPYmpfcmFua0l0ZW1fZnJpZW5kJztcclxuICAgICAgICB0aGlzLl9maXJzdFNob3dOdW0gPSA3O1xyXG4gICAgICAgIHRoaXMuX2lzUmljaERhdGFGdWxsID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5faXNHYWluc0RhdGFGdWxsID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5yZWdpc3RlckJ1dHRvbih0aGlzLm5vZGVfbGlzdEdhaW5CdG4sIHRoaXMub25DbGlja190YWJCdG4sIHRoaXMsIHJhbmtUeXBlLnR5cGUxLCB0cnVlKTtcclxuICAgICAgICB0aGlzLnJlZ2lzdGVyQnV0dG9uKHRoaXMubm9kZV9saXN0UmljaEJ0biwgdGhpcy5vbkNsaWNrX3RhYkJ0biwgdGhpcywgcmFua1R5cGUudHlwZTIsIHRydWUpO1xyXG4gICAgICAgIHRoaXMuY29tcF9zY3JvbGwubm9kZS5vbignc2Nyb2xsLXRvLWJvdHRvbScsIHRoaXMuX3Njcm9sbFRvQm90dG9tLCB0aGlzKTtcclxuICAgICAgICAvL+WIneWni+WMlua7muWKqOWxgjFcclxuICAgICAgICB2YXIgZGF0YU9iaiA9IHtcclxuICAgICAgICAgICAgaXRlbVByZWZhYiA6IHRoaXMucHJlZmFiX2ZyaWVuZEl0ZW0sXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuY29tcF9pdGVtQ29udGFpbmVyLnNldERhdGEoZGF0YU9iaik7XHJcbiAgICB9LFxyXG5cclxuICAgIHN0YXJ0IDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8v6buY6K6k5oyJ6ZKu55qE5pi+56S6XHJcbiAgICAgICAgLy8gdGhpcy5fY3VyUmFua1R5cGUgPSByYW5rVHlwZS50eXBlMjtcclxuICAgICAgICAvLyB0aGlzLl9zZXRSYW5rVGl0bGUodGhpcy5fY3VyUmFua1R5cGUpO1xyXG4gICAgfSxcclxuXHJcbiAgICAvL+eCueWHu+WIh+aNouWvjOixquamnFxyXG4gICAgb25DbGlja190YWJCdG4gOiBmdW5jdGlvbiAoZXZlbnQsIHR5cGUpIHtcclxuICAgICAgICBpZih0aGlzLl9jdXJSYW5rVHlwZSAhPSB0eXBlKXtcclxuXHJcbiAgICAgICAgICAgIHN3aXRjaCAodHlwZSl7XHJcbiAgICAgICAgICAgICAgICBjYXNlIHJhbmtUeXBlLnR5cGUxOlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0R2FpbkRhdGEodGhpcy5fZ2FpbnNSYW5rRGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIHJhbmtUeXBlLnR5cGUyOlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0UmljaERhdGEodGhpcy5fcmljaFJhbmtEYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgLy/orr7nva7mjInpkq7mmL7npLpcclxuICAgIF9zZXRSYW5rVGl0bGUgOiBmdW5jdGlvbiAodHlwZSkge1xyXG4gICAgICAgIHRoaXMuX2N1clJhbmtUeXBlID0gdHlwZTtcclxuICAgICAgICB2YXIgaXNMZWZ0ID0gZmFsc2UsIHBvc1g7XHJcbiAgICAgICAgc3dpdGNoICh0eXBlKXtcclxuICAgICAgICAgICAgY2FzZSByYW5rVHlwZS50eXBlMTovL+ebiOWIqeamnFxyXG4gICAgICAgICAgICAgICAgaXNMZWZ0ID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIHBvc1ggPSB0aGlzLm5vZGVfbGlzdEdhaW5CdG4ueDtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIHJhbmtUeXBlLnR5cGUyOi8v5a+M6LGq5qacXHJcbiAgICAgICAgICAgICAgICBwb3NYID0gdGhpcy5ub2RlX2xpc3RSaWNoQnRuLng7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuc3ByaXRlX2xpc3RSYW5raW5nQkcubm9kZS54ID0gcG9zWDtcclxuICAgICAgICB0aGlzLnNwcml0ZV9saXN0R2Fpbk9uLm5vZGUuYWN0aXZlID0gaXNMZWZ0O1xyXG4gICAgICAgIHRoaXMuc3ByaXRlX2xpc3RSaWNoT24ubm9kZS5hY3RpdmUgPSAhaXNMZWZ0O1xyXG4gICAgfSxcclxuXHJcbiAgICAvL+iuvue9ruebiOWIqeamnOaVsOaNrlxyXG4gICAgc2V0R2FpbkRhdGEgOiBmdW5jdGlvbihkYXRhT2JqKXtcclxuICAgICAgICBpZihkYXRhT2JqKXtcclxuICAgICAgICAgICAgdGhpcy5fc2V0UmFua1RpdGxlKHJhbmtUeXBlLnR5cGUxKTtcclxuICAgICAgICAgICAgdGhpcy5fc2V0TnVsbCgnJyk7XHJcbiAgICAgICAgICAgIHRoaXMuX2xpc3RfZ2FpbnNEYXRhID0gZGF0YU9iai5kYXRhLmNvbmNhdChbXSk7XHJcblxyXG4gICAgICAgICAgICB2YXIgaW5mb0xpc3QgPSB0aGlzLmNvbXBfaXRlbUNvbnRhaW5lci5nZXROZXh0UGFnZUxpc3QodGhpcy5fbGlzdF9nYWluc0RhdGEsIHRoaXMuX2ZpcnN0U2hvd051bSk7XHJcbiAgICAgICAgICAgIHRoaXMuX3VwZGF0ZUJvdHRvbSh0cnVlLCBpbmZvTGlzdCwgdHJ1ZSk7XHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIGRhdGFPYmogPSBHX0RBVEEuZ2V0R2FpbnNEYXRhKCk7XHJcbiAgICAgICAgICAgIGlmKGRhdGFPYmope1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fZ2FpbnNSYW5rRGF0YSAgPSBkYXRhT2JqO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRHYWluRGF0YSh0aGlzLl9nYWluc1JhbmtEYXRhKTtcclxuICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9zZXRHYWluc1BhZ2VEYXRhKDEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICAvL+iuvue9ruWvjOixquamnOaVsOaNrlxyXG4gICAgc2V0UmljaERhdGE6IGZ1bmN0aW9uKGRhdGFPYmopIHtcclxuICAgICAgICBpZihkYXRhT2JqKXtcclxuICAgICAgICAgICAgdGhpcy5fc2V0UmFua1RpdGxlKHJhbmtUeXBlLnR5cGUyKTtcclxuICAgICAgICAgICAgdGhpcy5fc2V0TnVsbCgnJyk7XHJcbiAgICAgICAgICAgIHRoaXMuX2xpc3RfcmljaERhdGEgPSBkYXRhT2JqLmRhdGEuY29uY2F0KFtdKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBpbmZvTGlzdCA9IHRoaXMuY29tcF9pdGVtQ29udGFpbmVyLmdldE5leHRQYWdlTGlzdCh0aGlzLl9saXN0X3JpY2hEYXRhLCB0aGlzLl9maXJzdFNob3dOdW0pO1xyXG4gICAgICAgICAgICB0aGlzLl91cGRhdGVCb3R0b20oZmFsc2UsIGluZm9MaXN0LCB0cnVlKTtcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgZGF0YU9iaiA9IEdfREFUQS5nZXRSaWNoRGF0YSgpO1xyXG4gICAgICAgICAgICBpZihkYXRhT2JqKXtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3JpY2hSYW5rRGF0YSA9IGRhdGFPYmo7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldFJpY2hEYXRhKHRoaXMuX3JpY2hSYW5rRGF0YSk7XHJcbiAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fc2V0UmljaFBhZ2VEYXRhKDEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICBfc2V0R2FpbnNQYWdlRGF0YSA6IGZ1bmN0aW9uIChwYWdlTm8sIHNob3dOdW0pIHtcclxuICAgICAgICBpZihzaG93TnVtID09PSB1bmRlZmluZWQpIHNob3dOdW0gPSB0aGlzLl9maXJzdFNob3dOdW07XHJcbiAgICAgICAgdmFyIHNlbmREYXRhID0gJ2dhbWVJZD0nK0dHLmdldFBsYXllcigpLmdldEdhbWVJRCgpK1wiJnBhZ2VTaXplPVwiK3Nob3dOdW0rXCImcGFnZU5vPVwiK3BhZ2VObztcclxuICAgICAgICBHRy5odHRwTWdyLnNlbmRIdHRwUmVxdWVzdChHX0RJQUxPR19VUkwucGxheWVyUHJvZml0VXJsLCBzZW5kRGF0YSwgZnVuY3Rpb24gKG5ldERhdGEpIHtcclxuICAgICAgICAgICAgdGhpcy5fd2hlblJlcXVlc3REb25lKHBhZ2VObywgcmFua1R5cGUudHlwZTEsIG5ldERhdGEpO1xyXG4gICAgICAgIH0uYmluZCh0aGlzKSk7XHJcbiAgICAgICAgR0cuaHR0cE1nci5hZGRMb25nUmVxdWVzdFdhaXQoR19ESUFMT0dfVVJMLnBsYXllclByb2ZpdFVybCwgc2VuZERhdGEsIGZ1bmN0aW9uIChuZXREYXRhKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3doZW5SZXF1ZXN0RG9uZShwYWdlTm8sIHJhbmtUeXBlLnR5cGUxLCBuZXREYXRhKTtcclxuICAgICAgICB9LmJpbmQodGhpcykpO1xyXG4gICAgfSxcclxuICAgIF9zZXRSaWNoUGFnZURhdGEgOiBmdW5jdGlvbiAocGFnZU5vLCBzaG93TnVtKSB7XHJcbiAgICAgICAgaWYoc2hvd051bSA9PT0gdW5kZWZpbmVkKSBzaG93TnVtID0gdGhpcy5fZmlyc3RTaG93TnVtO1xyXG4gICAgICAgIHZhciBzZW5kRGF0YSA9IFwicGFnZVNpemU9XCIrc2hvd051bStcIiZwYWdlTm89XCIrcGFnZU5vO1xyXG4gICAgICAgIEdHLmh0dHBNZ3Iuc2VuZEh0dHBSZXF1ZXN0KEdfRElBTE9HX1VSTC5wbGF5ZXJUcmVhc3VyZXNVcmwsIHNlbmREYXRhLCBmdW5jdGlvbiAobmV0RGF0YSkge1xyXG4gICAgICAgICAgICB0aGlzLl93aGVuUmVxdWVzdERvbmUocGFnZU5vLCByYW5rVHlwZS50eXBlMiwgbmV0RGF0YSk7XHJcbiAgICAgICAgfS5iaW5kKHRoaXMpKTtcclxuICAgICAgICBHRy5odHRwTWdyLmFkZExvbmdSZXF1ZXN0V2FpdChHX0RJQUxPR19VUkwucGxheWVyVHJlYXN1cmVzVXJsLCBzZW5kRGF0YSwgZnVuY3Rpb24gKG5ldERhdGEpIHtcclxuICAgICAgICAgICAgdGhpcy5fd2hlblJlcXVlc3REb25lKHBhZ2VObywgcmFua1R5cGUudHlwZTIsIG5ldERhdGEpO1xyXG4gICAgICAgIH0uYmluZCh0aGlzKSk7XHJcbiAgICB9LFxyXG5cclxuICAgIF93aGVuUmVxdWVzdERvbmUgOiBmdW5jdGlvbiAocGFnZU5vLCB0YXJnZXRUeXBlLCBuZXREYXRhKSB7XHJcbiAgICAgICAgaWYocGFnZU5vID09IDEpe1xyXG4gICAgICAgICAgICAvL+aYr+ivt+axguesrOS4gOmhtVxyXG4gICAgICAgICAgICBpZihuZXREYXRhKXtcclxuICAgICAgICAgICAgICAgIGlmKCFuZXREYXRhLmRhdGEgfHwgbmV0RGF0YS5kYXRhLmxlbmd0aCA8IDEgfHwgbmV0RGF0YS5jb2RlID09ICcwJyl7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb21wX2l0ZW1Db250YWluZXIuY2xlYXJJdGVtcygtMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fc2V0TnVsbChuZXREYXRhLm1zZyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fc2V0UmFua1RpdGxlKHRhcmdldFR5cGUpO1xyXG4gICAgICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYodGFyZ2V0VHlwZSA9PSByYW5rVHlwZS50eXBlMil7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8v5a+M6LGq5o6S6KGM5qacXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2FkZFJpY2hOZXREYXRhKHBhZ2VObywgbmV0RGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0UmljaERhdGEodGhpcy5fcmljaFJhbmtEYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy/nm4jliKnmjpLooYzmppxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fYWRkR2FpbnNOZXREYXRhKHBhZ2VObywgbmV0RGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0R2FpbkRhdGEodGhpcy5fZ2FpbnNSYW5rRGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9ZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgc2hvd0l0ZW1OdW0gPSB0aGlzLmNvbXBfaXRlbUNvbnRhaW5lci5nZXRTaG93SXRlbU51bSgpO1xyXG4gICAgICAgICAgICAgICAgaWYoc2hvd0l0ZW1OdW0gPCAxKXRoaXMuX3NldE51bGwoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAvL+S4jeaYr+esrOS4gOmhtVxyXG4gICAgICAgICAgICBpZighbmV0RGF0YSkgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgaWYoIW5ldERhdGEuZGF0YSB8fCBuZXREYXRhLmRhdGEubGVuZ3RoIDwgMSB8fCBuZXREYXRhLmNvZGUgPT0gJzAnKXtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAodGFyZ2V0VHlwZSl7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSByYW5rVHlwZS50eXBlMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5faXNHYWluc0RhdGFGdWxsID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIHJhbmtUeXBlLnR5cGUyOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9pc1JpY2hEYXRhRnVsbCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICBpZih0YXJnZXRUeXBlID09IHJhbmtUeXBlLnR5cGUyKXtcclxuICAgICAgICAgICAgICAgICAgICAvL+WvjOixquaOkuihjOamnFxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2FkZFJpY2hOZXREYXRhKHBhZ2VObywgbmV0RGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYodGhpcy5fY3VyUmFua1R5cGUgPT0gcmFua1R5cGUudHlwZTIpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaW5mb0xpc3QgPSB0aGlzLmNvbXBfaXRlbUNvbnRhaW5lci5nZXROZXh0UGFnZUxpc3QodGhpcy5fbGlzdF9yaWNoRGF0YSwgdGhpcy5fZmlyc3RTaG93TnVtKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fdXBkYXRlQm90dG9tKGZhbHNlLCBpbmZvTGlzdCwgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgICAgIC8v55uI5Yip5o6S6KGM5qacXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fYWRkR2FpbnNOZXREYXRhKHBhZ2VObywgbmV0RGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYodGhpcy5fY3VyUmFua1R5cGUgPT0gcmFua1R5cGUudHlwZTEpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaW5mb0xpc3QgPSB0aGlzLmNvbXBfaXRlbUNvbnRhaW5lci5nZXROZXh0UGFnZUxpc3QodGhpcy5fbGlzdF9nYWluc0RhdGEsIHRoaXMuX2ZpcnN0U2hvd051bSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3VwZGF0ZUJvdHRvbShmYWxzZSwgaW5mb0xpc3QsIGZhbHNlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgX2FkZEdhaW5zTmV0RGF0YSA6IGZ1bmN0aW9uIChwYWdlTm8sIG5ldERhdGEpIHtcclxuICAgICAgICBpZighdGhpcy5fZ2FpbnNSYW5rRGF0YSkgdGhpcy5fZ2FpbnNSYW5rRGF0YSA9IG5ldERhdGE7XHJcbiAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgdmFyIGN1ckl0ZW1OdW0gPSB0aGlzLl9nYWluc1JhbmtEYXRhLmRhdGEubGVuZ3RoO1xyXG4gICAgICAgICAgICB2YXIgY3VyUGFnZU5vID0gdGhpcy5jb21wX2l0ZW1Db250YWluZXIuZ2V0UGFnZU5vQnlOdW0oY3VySXRlbU51bSwgdGhpcy5fZmlyc3RTaG93TnVtKTtcclxuICAgICAgICAgICAgaWYocGFnZU5vIDwgY3VyUGFnZU5vKSByZXR1cm47XHJcbiAgICAgICAgICAgIC8v5YiX6KGo5pWw5YC85Y+g5YqgXHJcbiAgICAgICAgICAgIHRoaXMuX2dhaW5zUmFua0RhdGEuZGF0YSA9IHRoaXMuX2dhaW5zUmFua0RhdGEuZGF0YS5jb25jYXQobmV0RGF0YS5kYXRhKTtcclxuICAgICAgICAgICAgdGhpcy5fbGlzdF9nYWluc0RhdGEgPSBuZXREYXRhLmRhdGE7XHJcbiAgICAgICAgICAgIGlmKG5ldERhdGEuZGF0YS5sZW5ndGggPCB0aGlzLl9maXJzdFNob3dOdW0pe1xyXG4gICAgICAgICAgICAgICAgLy/lt7Lnu4/or7fmsYLlrozmiYDmnInnmoTmlbDmja5cclxuICAgICAgICAgICAgICAgIHRoaXMuX2lzR2FpbnNEYXRhRnVsbCA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgR19EQVRBLnNldEdhaW5zRGF0YSh0aGlzLl9nYWluc1JhbmtEYXRhKTtcclxuICAgIH0sXHJcbiAgICBfYWRkUmljaE5ldERhdGEgOiBmdW5jdGlvbiAocGFnZU5vLCBuZXREYXRhKSB7XHJcbiAgICAgICAgaWYoIXRoaXMuX3JpY2hSYW5rRGF0YSkgdGhpcy5fcmljaFJhbmtEYXRhID0gbmV0RGF0YTtcclxuICAgICAgICBlbHNle1xyXG4gICAgICAgICAgICB2YXIgY3VySXRlbU51bSA9IHRoaXMuX3JpY2hSYW5rRGF0YS5kYXRhLmxlbmd0aDtcclxuICAgICAgICAgICAgdmFyIGN1clBhZ2VObyA9IHRoaXMuY29tcF9pdGVtQ29udGFpbmVyLmdldFBhZ2VOb0J5TnVtKGN1ckl0ZW1OdW0sIHRoaXMuX2ZpcnN0U2hvd051bSk7XHJcbiAgICAgICAgICAgIGlmKHBhZ2VObyA8IGN1clBhZ2VObykgcmV0dXJuO1xyXG4gICAgICAgICAgICAvL+WIl+ihqOaVsOWAvOWPoOWKoFxyXG4gICAgICAgICAgICB0aGlzLl9yaWNoUmFua0RhdGEuZGF0YSA9IHRoaXMuX3JpY2hSYW5rRGF0YS5kYXRhLmNvbmNhdChuZXREYXRhLmRhdGEpO1xyXG4gICAgICAgICAgICB0aGlzLl9saXN0X3JpY2hEYXRhID0gbmV0RGF0YS5kYXRhO1xyXG4gICAgICAgICAgICBpZihuZXREYXRhLmRhdGEubGVuZ3RoIDwgdGhpcy5fZmlyc3RTaG93TnVtKXtcclxuICAgICAgICAgICAgICAgIC8v5bey57uP6K+35rGC5a6M5omA5pyJ55qE5pWw5o2uXHJcbiAgICAgICAgICAgICAgICB0aGlzLl9pc1JpY2hEYXRhRnVsbCA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgR19EQVRBLnNldFJpY2hEYXRhKHRoaXMuX3JpY2hSYW5rRGF0YSk7XHJcblxyXG4gICAgfSxcclxuXHJcbiAgICAvL+W9k3Njcm9sbOa7muWKqOWIsOW6lei+uSAgaXNSZXN0YXJ0IDog5piv5ZCm5LuO56ys5LiA5Liq5byA5aeLXHJcbiAgICBfdXBkYXRlQm90dG9tIDogZnVuY3Rpb24gKGlzR2FpbiwgaW5mb0xpc3QsIGlzUmVzdGFydCkge1xyXG4gICAgICAgIHZhciBpdGVtLCBjb21wLCBpbmRleCA9IDAsIHBsYXllckluZm8sIGl0ZW1OdW0gPSB0aGlzLmNvbXBfaXRlbUNvbnRhaW5lci5nZXRTaG93SXRlbU51bSgpO1xyXG4gICAgICAgIGlmKGlzUmVzdGFydCkgaXRlbU51bSA9IDA7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IGl0ZW1OdW07IGkgPCAoaXRlbU51bSArIHRoaXMuX2ZpcnN0U2hvd051bSk7IGkrKykge1xyXG4gICAgICAgICAgICBwbGF5ZXJJbmZvID0gaW5mb0xpc3RbaW5kZXhdO1xyXG4gICAgICAgICAgICBpZighcGxheWVySW5mbyl7XHJcbiAgICAgICAgICAgICAgICAvL+WmguaenOayoeacieeOqeWutuaVsOaNruWImee7iOatou+8jOS4jeimgeWHuueOsOaWreWxglxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaXRlbSA9IHRoaXMuY29tcF9pdGVtQ29udGFpbmVyLmdldEl0ZW1CeUluZGV4KGkpO1xyXG4gICAgICAgICAgICBpZihpdGVtKXtcclxuICAgICAgICAgICAgICAgIGNvbXAgPSBpdGVtLmdldENvbXBvbmVudCh0aGlzLl9pdGVtQ29tcE5hbWUpO1xyXG4gICAgICAgICAgICAgICAgY29tcC5pbml0KGlzR2FpbiwgaSwgcGxheWVySW5mbyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaW5kZXggKz0gMTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy/lpoLmnpzmmK/nrKzkuIDpobXvvIzpnIDopoHlsIblpJrkvZnnmoTmnaHnm67muIXnkIZcclxuICAgICAgICBpZihpc1Jlc3RhcnQpIHtcclxuICAgICAgICAgICAgdGhpcy5jb21wX2l0ZW1Db250YWluZXIuY2xlYXJJdGVtcyhpbmZvTGlzdC5sZW5ndGggLSAxKTtcclxuICAgICAgICAgICAgdGhpcy5fc2Nyb2xsVG9VcCgpO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgLy/lvZPnjqnlrrbmu5rliqjliLDlupXpg6hcclxuICAgIF9zY3JvbGxUb0JvdHRvbSA6IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgIHZhciBpbmZvTGlzdCwgaXNHYWluLCBpdGVtTnVtO1xyXG4gICAgICAgIHN3aXRjaCAodGhpcy5fY3VyUmFua1R5cGUpIHtcclxuICAgICAgICAgICAgY2FzZSByYW5rVHlwZS50eXBlMTpcclxuICAgICAgICAgICAgICAgIGlzR2FpbiA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBpbmZvTGlzdCA9IHRoaXMuY29tcF9pdGVtQ29udGFpbmVyLmdldE5leHRQYWdlTGlzdCh0aGlzLl9saXN0X2dhaW5zRGF0YSwgdGhpcy5fZmlyc3RTaG93TnVtKTtcclxuICAgICAgICAgICAgICAgIGl0ZW1OdW0gPSB0aGlzLl9nYWluc1JhbmtEYXRhLmRhdGEubGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgYnJlYWtcclxuICAgICAgICAgICAgY2FzZSByYW5rVHlwZS50eXBlMjpcclxuICAgICAgICAgICAgICAgIGlzR2FpbiA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgaW5mb0xpc3QgPSB0aGlzLmNvbXBfaXRlbUNvbnRhaW5lci5nZXROZXh0UGFnZUxpc3QodGhpcy5fbGlzdF9yaWNoRGF0YSwgdGhpcy5fZmlyc3RTaG93TnVtKTtcclxuICAgICAgICAgICAgICAgIGl0ZW1OdW0gPSB0aGlzLl9yaWNoUmFua0RhdGEuZGF0YS5sZW5ndGg7XHJcbiAgICAgICAgICAgICAgICBicmVha1xyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgYnJlYWtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYoaW5mb0xpc3QgJiYgaW5mb0xpc3QubGVuZ3RoID4gMCl7XHJcbiAgICAgICAgICAgIHRoaXMuX3VwZGF0ZUJvdHRvbShpc0dhaW4sIGluZm9MaXN0KTtcclxuICAgICAgICB9ZWxzZSBpZihpdGVtTnVtIDwgNTApe1xyXG4gICAgICAgICAgICAvL+ivt+axguaOpeS4i+WOu+eahOaOkuihjOamnOaVsOaNrlxyXG4gICAgICAgICAgICB2YXIgcGFnZU5vID0gdGhpcy5jb21wX2l0ZW1Db250YWluZXIuZ2V0UGFnZU5vQnlOdW0oaXRlbU51bSsxLCB0aGlzLl9maXJzdFNob3dOdW0pO1xyXG4gICAgICAgICAgICBzd2l0Y2ggKHRoaXMuX2N1clJhbmtUeXBlKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIHJhbmtUeXBlLnR5cGUxOlxyXG4gICAgICAgICAgICAgICAgICAgIGlmKCF0aGlzLl9pc0dhaW5zRGF0YUZ1bGwpdGhpcy5fc2V0R2FpbnNQYWdlRGF0YShwYWdlTm8sIDUwLWl0ZW1OdW0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgICAgICAgICBjYXNlIHJhbmtUeXBlLnR5cGUyOlxyXG4gICAgICAgICAgICAgICAgICAgIGlmKCF0aGlzLl9pc1JpY2hEYXRhRnVsbCl0aGlzLl9zZXRSaWNoUGFnZURhdGEocGFnZU5vLCA1MC1pdGVtTnVtKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVha1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICBicmVha1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIC8v6KeG5Zu+5YaF5a655bCG5Zyo6KeE5a6a5pe26Ze05YaF5rua5Yqo5Yiw6KeG5Zu+6aG26YOo44CCXHJcbiAgICBfc2Nyb2xsVG9VcCA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLmNvbXBfc2Nyb2xsLnNjcm9sbFRvVG9wKDAuMik7XHJcbiAgICB9LFxyXG5cclxuICAgIF9zZXROdWxsIDogZnVuY3Rpb24gKG1zZykge1xyXG4gICAgICAgIGlmKE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChtc2cpICE9PSAnW29iamVjdCBTdHJpbmddJyl7XHJcbiAgICAgICAgICAgIG1zZyA9ICdyZXF1ZXN0IHRpbWVvdXQhJ1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmxhYmVsX251bGwuc3RyaW5nID0gbXNnO1xyXG4gICAgfSxcclxuXHJcbiAgICAvLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuXHJcbiAgICAvL+enu+WHuuWxj+W5leWkllxyXG4gICAgbW92ZU91dFNjZW5lIDogZnVuY3Rpb24gKGlzT3V0LCBpc05vRWZmZWN0KSB7XHJcbiAgICAgICAgaWYoIXRoaXMuX2ZpcnN0UG9zWCkgdGhpcy5fZmlyc3RQb3NYID0gLXRoaXMubm9kZS54O1xyXG4gICAgICAgIHZhciBvdXRYID0gY2MudmlzaWJsZVJlY3Qud2lkdGggKiAwLjMgKyB0aGlzLl9maXJzdFBvc1g7XHJcbiAgICAgICAgaWYoaXNOb0VmZmVjdCl7XHJcbiAgICAgICAgICAgIHZhciByaWdodFcgPSB0aGlzLm5vZGUud2lkdGgqdGhpcy5ub2RlLnNjYWxlLzI7XHJcbiAgICAgICAgICAgIHRoaXMubm9kZS54ID0gaXNPdXQgPyAtb3V0WCA6IHRoaXMuX2ZpcnN0UG9zWDtcclxuICAgICAgICAgICAgdGhpcy5zZXRGcmFtZUhpZGUoaXNPdXQpO1xyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICB0aGlzLm5vZGUuYWN0aXZlID0gdHJ1ZTtcclxuICAgICAgICAgICAgdmFyIHRpbWUgPSAwLjU7XHJcbiAgICAgICAgICAgIHRoaXMubm9kZS5zdG9wQWxsQWN0aW9ucygpO1xyXG4gICAgICAgICAgICB2YXIgdGFyZ2V0UG9zID0gY2MucCh0aGlzLl9maXJzdFBvc1gsIHRoaXMubm9kZS55KTtcclxuICAgICAgICAgICAgaWYoaXNPdXQpIHRhcmdldFBvcy54ID0gLW91dFg7XHJcbiAgICAgICAgICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgICAgICAgICAgdGhpcy5ub2RlLnJ1bkFjdGlvbihjYy5zZXF1ZW5jZShjYy5tb3ZlVG8odGltZSwgdGFyZ2V0UG9zKSwgY2MuY2FsbEZ1bmMoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgc2VsZi5zZXRGcmFtZUhpZGUoaXNPdXQpO1xyXG4gICAgICAgICAgICB9KSkpO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgc2V0RnJhbWVIaWRlIDogZnVuY3Rpb24gKGlzT3V0KSB7XHJcbiAgICAgICAgdGhpcy5ub2RlLmFjdGl2ZSA9ICFpc091dDtcclxuICAgIH0sXHJcblxyXG4gICAgLy8gY2FsbGVkIGV2ZXJ5IGZyYW1lLCB1bmNvbW1lbnQgdGhpcyBmdW5jdGlvbiB0byBhY3RpdmF0ZSB1cGRhdGUgY2FsbGJhY2tcclxuICAgIC8vIHVwZGF0ZTogZnVuY3Rpb24gKGR0KSB7XHJcblxyXG4gICAgLy8gfSxcclxufSk7XHJcbiIsIi8v5ri45oiP5aSn5Y6F5Lit546p5a625L+h5oGvXHJcbmNjLkNsYXNzKHtcclxuICAgIGV4dGVuZHM6IHJlcXVpcmUoJ0F1dG9EZWFsaW5nJyksXHJcblxyXG4gICAgcHJvcGVydGllczoge1xyXG4gICAgICAgIG5vZGVfaGVhZCA6IHtcclxuICAgICAgICAgICAgZGVmYXVsdCA6IG51bGwsXHJcbiAgICAgICAgICAgIHR5cGUgOiBjYy5Ob2RlLFxyXG4gICAgICAgICAgICBkaXNwbGF5TmFtZSA6ICflpLTlg48nXHJcbiAgICAgICAgfSxcclxuICAgICAgICBsYWJlbF9uYW1lIDoge1xyXG4gICAgICAgICAgICBkZWZhdWx0IDogbnVsbCxcclxuICAgICAgICAgICAgdHlwZSA6IGNjLkxhYmVsLFxyXG4gICAgICAgICAgICBkaXNwbGF5TmFtZSA6ICfmmLXnp7AnXHJcbiAgICAgICAgfSxcclxuICAgICAgICBsYWJlbF9jb2luIDoge1xyXG4gICAgICAgICAgICBkZWZhdWx0IDogbnVsbCxcclxuICAgICAgICAgICAgdHlwZSA6IGNjLkxhYmVsLFxyXG4gICAgICAgICAgICBkaXNwbGF5TmFtZSA6ICfph5HluIEnXHJcbiAgICAgICAgfSxcclxuICAgICAgICBub2RlX2V4aXQgOiB7XHJcbiAgICAgICAgICAgIGRlZmF1bHQgOiBudWxsLFxyXG4gICAgICAgICAgICB0eXBlIDogY2MuTm9kZSxcclxuICAgICAgICAgICAgZGlzcGxheU5hbWUgOiAn6YCA5Ye65oyJ6ZKuJ1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgbm9kZV9iYWNrIDoge1xyXG4gICAgICAgICAgICBkZWZhdWx0IDogbnVsbCxcclxuICAgICAgICAgICAgdHlwZSA6IGNjLk5vZGUsXHJcbiAgICAgICAgICAgIGRpc3BsYXlOYW1lIDogJ+i/lOWbnuaMiemSridcclxuICAgICAgICB9LFxyXG4gICAgICAgIG5vZGVfc2V0dGluZyA6IHtcclxuICAgICAgICAgICAgZGVmYXVsdCA6IG51bGwsXHJcbiAgICAgICAgICAgIHR5cGUgOiBjYy5Ob2RlLFxyXG4gICAgICAgICAgICBkaXNwbGF5TmFtZSA6ICforr7nva7mjInpkq4nXHJcbiAgICAgICAgfSxcclxuICAgIH0sXHJcblxyXG4gICAgLy8gdXNlIHRoaXMgZm9yIGluaXRpYWxpemF0aW9uXHJcbiAgICBvbkxvYWQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLl9yZWdpc3RlckJ1dHRvbigpO1xyXG4gICAgICAgIHRoaXMubm9kZS5hY3RpdmUgPSBmYWxzZTtcclxuICAgIH0sXHJcblxyXG4gICAgX3JlZ2lzdGVyQnV0dG9uIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMucmVnaXN0ZXJCdXR0b24odGhpcy5ub2RlX2V4aXQsIHRoaXMub25DbGlja19leGl0LCB0aGlzKTtcclxuICAgICAgICB0aGlzLnJlZ2lzdGVyQnV0dG9uKHRoaXMubm9kZV9iYWNrLCB0aGlzLm9uQ2xpY2tfYmFjaywgdGhpcyk7XHJcbiAgICAgICAgdGhpcy5yZWdpc3RlckJ1dHRvbih0aGlzLm5vZGVfc2V0dGluZywgdGhpcy5vbkNsaWNrX3NldHRpbmcsIHRoaXMpO1xyXG4gICAgICAgIC8v5aKe5Yqg5a+5546p5a626Lqr5LiK6YeR5biB55qE55uR5ZCsXHJcbiAgICAgICAgdGhpcy5fbGlzdGVuZXJOYW1lID0gR0cuTGlzdGVuZXIucmVnaXN0ZXJGdW5jKEdfVFlQRS5nbG9iYWxMaXN0ZW5lci5wbGF5ZXJHb2xkLCB0aGlzLm9uX2dvbGRDaGFuZ2UuYmluZCh0aGlzKSk7XHJcbiAgICB9LFxyXG5cclxuICAgIC8v6YCA5Ye65ri45oiPXHJcbiAgICBvbkNsaWNrX2V4aXQgOiBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICBHRy50aXBzTWdyLnNob3dDb25maXJtVGlwX1RXTyhHX0NISU5FU0UuZXhpdFRleHQyLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIC8v56Gu6K6k6YCA5Ye6XHJcbiAgICAgICAgICAgIEdHLmV4aXRHYW1lKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9LFxyXG4gICAgLy/ov5Tlm57kuLvlnLrmma9cclxuICAgIG9uQ2xpY2tfYmFjayA6IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgIEdHLnBsYXRmb3JtTWdyLnNob3dIb21lTGlzdChmYWxzZSk7XHJcbiAgICB9LFxyXG4gICAgLy/ns7vnu5/orr7nva5cclxuICAgIG9uQ2xpY2tfc2V0dGluZyA6IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgIC8vR0cuYXVkaW9NZ3IucGxheU11c2ljKCdnYW1lTG9zZScpO1xyXG4gICAgICAgIHZhciBsYXllciA9IEdHLnBsYXRmb3JtTWdyLm9wZW5VSShHX1JFU19VUkwudWlOYW1lLnN5c3RlbVNldCwgZnVuY3Rpb24gKGxheWVyKSB7XHJcbiAgICAgICAgICAgIGxheWVyLnNldERhdGEoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAvL2lmKEdfQ29uZmlnX2NvbW1vbi5pc0xvY2FsKXtcclxuICAgICAgICAvLyAgICB2YXIgZGF0YSA9IHsnbXVzaWMnOnRydWUsJ3NvdW5kJzp0cnVlfTtcclxuICAgICAgICAvLyAgICBpZihHRy5nZXRQbGF5ZXIoKS5nZXRTeXN0ZW1TZXQoKSkgZGF0YSA9IEdHLmdldFBsYXllcigpLmdldFN5c3RlbVNldCgpO1xyXG4gICAgICAgIC8vICAgIC8vY29uc29sZS5sb2coZGF0YSk7XHJcbiAgICAgICAgLy8gICAgdmFyIGxheWVyID0gR0cucGxhdGZvcm1NZ3Iub3BlblVJKEdfUkVTX1VSTC51aU5hbWUuc3lzdGVtU2V0KTtcclxuICAgICAgICAvLyAgICBsYXllci5zZXREYXRhKGRhdGEpO1xyXG4gICAgICAgIC8vfWVsc2V7XHJcbiAgICAgICAgLy8gICAgLy/ojrflj5bnjqnlrrbns7vnu5/orr7nva5cclxuICAgICAgICAvLyAgICBpZighR0cuZ2V0UGxheWVyKCkuZ2V0U3lzdGVtU2V0KCkpe1xyXG4gICAgICAgIC8vICAgICAgICB2YXIgc2VuZERhdGEgPSBudWxsO1xyXG4gICAgICAgIC8vICAgICAgICBHRy5odHRwTWdyLnNlbmRIdHRwTG9naW4oR19ESUFMT0dfVVJMLmxvZ2luVG9TZXRVcmwsIHNlbmREYXRhLCBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgIC8vICAgICAgICAgICAgR0cuZ2V0UGxheWVyKCkuc2V0U3lzdGVtU2V0KGRhdGFbMF0pO1xyXG4gICAgICAgIC8vICAgICAgICAgICAgdmFyIGxheWVyID0gR0cucGxhdGZvcm1NZ3Iub3BlblVJKEdfUkVTX1VSTC51aU5hbWUuc3lzdGVtU2V0KTtcclxuICAgICAgICAvLyAgICAgICAgICAgIGxheWVyLnNldERhdGEoZGF0YVswXSk7XHJcbiAgICAgICAgLy8gICAgICAgIH0uYmluZCh0aGlzKSk7XHJcbiAgICAgICAgLy8gICAgfWVsc2Uge1xyXG4gICAgICAgIC8vICAgICAgICB2YXIgbGF5ZXIgPSBHRy5wbGF0Zm9ybU1nci5vcGVuVUkoR19SRVNfVVJMLnVpTmFtZS5zeXN0ZW1TZXQpO1xyXG4gICAgICAgIC8vICAgICAgICBsYXllci5zZXREYXRhKEdHLmdldFBsYXllcigpLmdldFN5c3RlbVNldCgpKTtcclxuICAgICAgICAvLyAgICB9XHJcbiAgICAgICAgLy99XHJcbiAgICB9LFxyXG4gICAgLy/nm5HlkKzph5HluIHnmoTlj5jljJZcclxuICAgIG9uX2dvbGRDaGFuZ2UgOiBmdW5jdGlvbiAobGlzdGVuZXJOYW1lLCBkYXRhT2JqKSB7XHJcbiAgICAgICAgaWYodGhpcy5sYWJlbF9jb2luKSB0aGlzLmxhYmVsX2NvaW4uc3RyaW5nID0gR0cuZ2V0UGxheWVyKCkuZ2V0UGxheWVyR29sZCgpO1xyXG4gICAgfSxcclxuXHJcbiAgICBpbml0U2hvdyA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIganNvbkRhdGEgPSBHRy5nZXRQbGF5ZXIoKS5nZXRCYXNlSW5mbygpO1xyXG4gICAgICAgIGlmKGpzb25EYXRhKXtcclxuICAgICAgICAgICAgR19UT09MLnNldEhlYWRJbWcodGhpcy5ub2RlX2hlYWQsIGpzb25EYXRhLmF2YXRhclVybCk7XHJcbiAgICAgICAgICAgIHRoaXMuX3NldE5hbWUoanNvbkRhdGEubmlja25hbWUpO1xyXG4gICAgICAgICAgICB0aGlzLmxhYmVsX2NvaW4uc3RyaW5nID0gR0cuZ2V0UGxheWVyKCkuZ2V0UGxheWVyR29sZCgpO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgLy/mmL7npLrmiL/pl7TliJfooajnmoTml7blgJnvvIzov5Tlm57mjInpkq7pnIDopoHmlLnlj5hcclxuICAgIHNldEhvbWVMaXN0U2hvdyA6IGZ1bmN0aW9uIChpc1Nob3cpIHtcclxuICAgICAgICBpZighdGhpcy5ub2RlLmFjdGl2ZSkgdGhpcy5ub2RlLmFjdGl2ZSA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5ub2RlX2V4aXQuYWN0aXZlID0gIWlzU2hvdztcclxuICAgICAgICB0aGlzLm5vZGVfYmFjay5hY3RpdmUgPSBpc1Nob3c7XHJcbiAgICB9LFxyXG4gICAgLy/orr7nva7lkI3lrZdcclxuICAgIF9zZXROYW1lIDogZnVuY3Rpb24gKG5hbWUpIHtcclxuICAgICAgICBpZighbmFtZSkgbmFtZSA9ICcnO1xyXG4gICAgICAgIHRoaXMubGFiZWxfbmFtZS5zdHJpbmcgPSBHX1RPT0wuZ2V0TmFtZUxpbWl0KG5hbWUsIDEyKTtcclxuICAgIH0sXHJcblxyXG4gICAgb25EZXN0cm95IDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIEdHLkxpc3RlbmVyLmRlbExpc3RlbihHX1RZUEUuZ2xvYmFsTGlzdGVuZXIucGxheWVyR29sZCwgdGhpcy5fbGlzdGVuZXJOYW1lKTtcclxuICAgIH0sXHJcblxyXG4gICAgLy8gY2FsbGVkIGV2ZXJ5IGZyYW1lLCB1bmNvbW1lbnQgdGhpcyBmdW5jdGlvbiB0byBhY3RpdmF0ZSB1cGRhdGUgY2FsbGJhY2tcclxuICAgIC8vIHVwZGF0ZTogZnVuY3Rpb24gKGR0KSB7XHJcblxyXG4gICAgLy8gfSxcclxufSk7XHJcbiIsIi8v5pi+56S65omA5pyJ5YWl5Y+j5Yqo55S755qEVUlcclxuXHJcbmNjLkNsYXNzKHtcclxuICAgIGV4dGVuZHM6IHJlcXVpcmUoJ0Jhc2VVSScpLFxyXG4gICAgcHJvcGVydGllczoge1xyXG4gICAgICAgIF9yb29tUHJlZmFiTmFtZTogbnVsbCwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+aIv+mXtOiKgueCueWQjeensFxyXG4gICAgICAgIF9pc1RvdWNoTGltaXQgOiBudWxsLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5piv5ZCm5pyJ54K55Ye76ZmQ5Yi2XHJcblxyXG4gICAgICAgIG5vZGVfYnVsbDEwMCA6IHtcclxuICAgICAgICAgICAgZGVmYXVsdCA6IG51bGwsXHJcbiAgICAgICAgICAgIHR5cGUgOiBjYy5Ob2RlLFxyXG4gICAgICAgICAgICBkaXNwbGF5TmFtZSA6ICfnmb7kurrlpKfmiJgnXHJcbiAgICAgICAgfSxcclxuICAgICAgICBub2RlX2dyYWIgOiB7XHJcbiAgICAgICAgICAgIGRlZmF1bHQgOiBudWxsLFxyXG4gICAgICAgICAgICB0eXBlIDogY2MuTm9kZSxcclxuICAgICAgICAgICAgZGlzcGxheU5hbWUgOiAn5oq85a6d5aSn5oiYJ1xyXG4gICAgICAgIH0sXHJcbiAgICB9LFxyXG5cclxuICAgIC8vIHVzZSB0aGlzIGZvciBpbml0aWFsaXphdGlvblxyXG4gICAgb25Mb2FkOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5fcmVnaXN0ZXJCdXR0b24odGhpcy5ub2RlX2J1bGwxMDAsIHRoaXMuX2J0bl9jbGlja0VudGVyLCB0aGlzLCBHX1RZUEUuZ2FtZU1vZHVsZS5idWxsMTAwKTtcclxuICAgICAgICB0aGlzLl9yZWdpc3RlckJ1dHRvbih0aGlzLm5vZGVfZ3JhYiwgdGhpcy5fYnRuX2NsaWNrRW50ZXIsIHRoaXMsIEdfVFlQRS5nYW1lTW9kdWxlLmdyYWIpO1xyXG4gICAgICAgIHRoaXMuX3Jvb21QcmVmYWJOYW1lID0gJ1ByZWZhYl9yb29tTGlzdCc7XHJcbiAgICB9LFxyXG5cclxuICAgIF9idG5fY2xpY2tFbnRlciA6IGZ1bmN0aW9uICh0YXJnZXQsIGVudGVyVHlwZSkge1xyXG4gICAgICAgIGlmKHRoaXMuX2lzVG91Y2hMaW1pdCkgcmV0dXJuO1xyXG4gICAgICAgIHRoaXMuc2hvd0hvbWVMaXN0KGVudGVyVHlwZSk7XHJcbiAgICB9LFxyXG4gICAgLy8gX3Nob3dUaXAgOiBmdW5jdGlvbiAoY29udGVudCkge1xyXG4gICAgLy8gICAgIGlmKCF0aGlzLl90aXApe1xyXG4gICAgLy8gICAgICAgICB2YXIgY05vZGUgPSBuZXcgY2MuTm9kZSgpO1xyXG4gICAgLy8gICAgICAgICB0aGlzLl90aXAgPSBjTm9kZS5hZGRDb21wb25lbnQoY2MuTGFiZWwpO1xyXG4gICAgLy8gICAgICAgICBjTm9kZS5wYXJlbnQgPSB0aGlzLm5vZGU7XHJcbiAgICAvLyAgICAgICAgIGNOb2RlLmNvbG9yID0gY2MuQ29sb3IuUkVEO1xyXG4gICAgLy8gICAgIH1cclxuICAgIC8vICAgICB0aGlzLl90aXAuc3RyaW5nID0gY29udGVudDtcclxuICAgIC8vIH0sXHJcblxyXG4gICAgc2hvd0hvbWVMaXN0IDogZnVuY3Rpb24gKGVudGVyVHlwZSwgaXNOb0VmZmVjdCkge1xyXG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgICAgICBHRy50b3BUb3VjaExheWVyLnNob3dOZXRSZXF1ZXN0KCk7XHJcbiAgICAgICAgR0cucGxhdGZvcm1NZ3Iuc2hvd1Jvb21VSShzZWxmLl9yb29tUHJlZmFiTmFtZSwgZnVuY3Rpb24gKHJvb21Db21wKSB7XHJcbiAgICAgICAgICAgIGlmIChyb29tQ29tcCkge1xyXG4gICAgICAgICAgICAgICAgaWYoR19Db25maWdfY29tbW9uLmlzTG9jYWwpe1xyXG4gICAgICAgICAgICAgICAgICAgIEdHLnRvcFRvdWNoTGF5ZXIuY2xvc2VOZXRSZXF1ZXN0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5ldERhdGEgPSBzZWxmLl9nZXRMb2NhbERhdGEoZW50ZXJUeXBlKTtcclxuICAgICAgICAgICAgICAgICAgICBuZXREYXRhLmVudGVyVHlwZSA9IGVudGVyVHlwZTtcclxuICAgICAgICAgICAgICAgICAgICBHRy5wbGF0Zm9ybU1nci5zaG93SG9tZUxpc3QodHJ1ZSwgaXNOb0VmZmVjdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgR0cucGxhdGZvcm1NZ3Iuc2V0SG9tZUxpc3RJbmZvKG5ldERhdGEpO1xyXG4gICAgICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5fc2VuZFJvb21MaXN0UmVxdWVzdChlbnRlclR5cGUsIGlzTm9FZmZlY3QpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9LFxyXG5cclxuICAgIC8v6K+35rGC5oi/6Ze05YiX6KGo5Y+C5pWwXHJcbiAgICBfc2VuZFJvb21MaXN0UmVxdWVzdCA6IGZ1bmN0aW9uIChlbnRlclR5cGUsIGlzTm9FZmZlY3QpIHtcclxuICAgICAgICB2YXIgZ2FtZU1vZGVsO1xyXG4gICAgICAgIHN3aXRjaCAoZW50ZXJUeXBlKSB7XHJcbiAgICAgICAgICAgIGNhc2UgR19UWVBFLmdhbWVNb2R1bGUuYnVsbDEwMDpcclxuICAgICAgICAgICAgICAgIGdhbWVNb2RlbCA9IEdfVFlQRS5uZXRfZ2FtZU1vZHVsZTIuYnVsbDEwMDtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIEdfVFlQRS5nYW1lTW9kdWxlLmdyYWI6XHJcbiAgICAgICAgICAgICAgICBnYW1lTW9kZWwgPSBHX1RZUEUubmV0X2dhbWVNb2R1bGUyLmdyYWI7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBHX1RZUEUuZ2FtZU1vZHVsZS5jbGFzc2ljOlxyXG4gICAgICAgICAgICAgICAgZ2FtZU1vZGVsID0gR19UWVBFLm5ldF9nYW1lTW9kdWxlMi5jbGFzc2ljO1xyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIEdHLmh0dHBNZ3Iuc2VuZEh0dHBSZXF1ZXN0KEdfRElBTE9HX1VSTC5nYW1lUm9vbUxpc3RVcmwsICdnYW1lTW9kZWw9JyArICBnYW1lTW9kZWwsIGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgIGlmKGRhdGEpe1xyXG4gICAgICAgICAgICAgICAgZGF0YS5lbnRlclR5cGUgPSBlbnRlclR5cGU7XHJcbiAgICAgICAgICAgICAgICBHRy5wbGF0Zm9ybU1nci5zaG93SG9tZUxpc3QodHJ1ZSwgaXNOb0VmZmVjdCk7XHJcbiAgICAgICAgICAgICAgICBHRy5wbGF0Zm9ybU1nci5zZXRIb21lTGlzdEluZm8oZGF0YSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LmJpbmQodGhpcykpO1xyXG4gICAgfSxcclxuXHJcbiAgICBfZ2V0TG9jYWxEYXRhIDogZnVuY3Rpb24gKGVudGVyVHlwZSkge1xyXG4gICAgICAgIHZhciBuZXREYXRhID0ge307XHJcbiAgICAgICAgbmV0RGF0YS5lbnRlclR5cGUgPSBlbnRlclR5cGU7XHJcbiAgICAgICAgbmV0RGF0YS5kYXRhID0gW107XHJcbiAgICAgICAgdmFyIGludGVydmFsID0gMjtcclxuICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgNjsgaSArKyl7XHJcbiAgICAgICAgICAgIHZhciByb29tSW5mbyA9IHtcclxuICAgICAgICAgICAgICAgIGlkIDogaSsxLCAgIC8v5oi/6Ze0SURcclxuICAgICAgICAgICAgICAgIG1pbkxpbWl0UGxheWVyQmxhbmNlIDogMTAwMCwgICAvL+acgOWkp+S6uuaVsOS4iumZkFxyXG4gICAgICAgICAgICAgICAgY3VycmVudFBsYXllckNvdW50IDogaSAqIDUwLCAvL+W9k+WJjeeOqeWutuaVsOmHj1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhciByb3dOdW0gPSBNYXRoLmNlaWwocm9vbUluZm8uaWQvaW50ZXJ2YWwpO1xyXG4gICAgICAgICAgICByb29tSW5mby5taW5MaW1pdFBsYXllckJsYW5jZSArPSByb3dOdW0gKiAxMDAwO1xyXG4gICAgICAgICAgICBuZXREYXRhLmRhdGEucHVzaChyb29tSW5mbyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBuZXREYXRhXHJcbiAgICB9LFxyXG5cclxuICAgIC8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cclxuICAgIC8v5LuO5ri45oiP5oi/6Ze06L+U5Zue5aSn5Y6F77yM6ZyA6KaB5YWI5pi+56S65oi/6Ze05YiX6KGoXHJcbiAgICBzaG93SG9tZUxpc3RGaXJzdCA6IGZ1bmN0aW9uIChlbnRlclR5cGUsIGlzTm9FZmZlY3QpIHtcclxuICAgICAgICAvLyBHRy5wbGF0Zm9ybU1nci5zaG93SG9tZUxpc3QodHJ1ZSwgaXNOb0VmZmVjdCk7XHJcbiAgICAgICAgdGhpcy5zaG93SG9tZUxpc3QoZW50ZXJUeXBlLCBpc05vRWZmZWN0KTtcclxuICAgIH0sXHJcbiAgICBfcmVnaXN0ZXJCdXR0b24gOiBmdW5jdGlvbiAobm9kZSwgY2FsbEJhY2ssIHRhcmdldCwgdXNlckRhdGEsIGlzTm9TY2FsZSkge1xyXG4gICAgICAgIC8vaWYoIXRoaXMuX2xpc3RfcmVnaXN0ZXJCdG4pIHRoaXMuX2xpc3RfcmVnaXN0ZXJCdG4gPSBbXTtcclxuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICAgICAgbm9kZS5faXNUb3VjaEVuYWJsZWRFeCA9IHRydWU7XHJcbiAgICAgICAgLy90aGlzLl9saXN0X3JlZ2lzdGVyQnRuLnB1c2goW25vZGUsIGNhbGxCYWNrLCB0YXJnZXRdKTtcclxuICAgICAgICBub2RlLm9uKGNjLk5vZGUuRXZlbnRUeXBlLlRPVUNIX1NUQVJULCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgLy9pZihldmVudC50YXJnZXQuX2lzVG91Y2hFbmFibGVkRXgpIGV2ZW50LnRhcmdldC5zY2FsZSA9IEdfQ29uZmlnX2NsYXNzaWMuc2NhbGVfYnV0dG9uVG91Y2g7XHJcbiAgICAgICAgICAgIHZhciBhbmlOb2RlID0gZXZlbnQudGFyZ2V0LmNoaWxkcmVuWzBdO1xyXG4gICAgICAgICAgICBpZihldmVudC50YXJnZXQuX2lzVG91Y2hFbmFibGVkRXggJiYgIWlzTm9TY2FsZSkge1xyXG4gICAgICAgICAgICAgICAgc2VsZi5fc2V0QW5pUGF1c2UoYW5pTm9kZSwgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICBldmVudC50YXJnZXQuc2NhbGUgPSAxLjE7XHJcbiAgICAgICAgICAgICAgICBHRy5hdWRpb01nci5wbGF5U291bmQoMTcpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSwgdGFyZ2V0KTtcclxuICAgICAgICBub2RlLm9uKGNjLk5vZGUuRXZlbnRUeXBlLlRPVUNIX0VORCwgZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgIHZhciBhbmlOb2RlID0gZXZlbnQudGFyZ2V0LmNoaWxkcmVuWzBdO1xyXG4gICAgICAgICAgICBldmVudC50YXJnZXQuc2NhbGUgPSAxO1xyXG4gICAgICAgICAgICBzZWxmLl9zZXRBbmlQYXVzZShhbmlOb2RlLCBmYWxzZSk7XHJcbiAgICAgICAgICAgIGlmKGV2ZW50LnRhcmdldC5faXNUb3VjaEVuYWJsZWRFeCkgY2FsbEJhY2suY2FsbCh0YXJnZXQsIGV2ZW50LCB1c2VyRGF0YSk7XHJcbiAgICAgICAgfSwgdGFyZ2V0KTtcclxuICAgICAgICBub2RlLm9uKGNjLk5vZGUuRXZlbnRUeXBlLlRPVUNIX0NBTkNFTCwgZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgIHZhciBhbmlOb2RlID0gZXZlbnQudGFyZ2V0LmNoaWxkcmVuWzBdO1xyXG4gICAgICAgICAgICBzZWxmLl9zZXRBbmlQYXVzZShhbmlOb2RlLCBmYWxzZSk7XHJcbiAgICAgICAgICAgIGV2ZW50LnRhcmdldC5zY2FsZSA9IDE7XHJcbiAgICAgICAgfSwgdGFyZ2V0KTtcclxuICAgIH0sXHJcblxyXG4gICAgX3NldEFuaVBhdXNlIDogZnVuY3Rpb24gKG5vZGUsIGlzUGF1c2UpIHtcclxuICAgICAgICB2YXIgY29tcCA9IG5vZGUuZ2V0Q29tcG9uZW50KGRyYWdvbkJvbmVzLkFybWF0dXJlRGlzcGxheSk7XHJcbiAgICAgICAgaWYoaXNQYXVzZSl7XHJcbiAgICAgICAgICAgIGNvbXAuX2xhc3RUaW1lU2NhbGUgPSBjb21wLnRpbWVTY2FsZTtcclxuICAgICAgICAgICAgY29tcC50aW1lU2NhbGUgPSAwLjAxO1xyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICBpZihjb21wLl9sYXN0VGltZVNjYWxlKSBjb21wLnRpbWVTY2FsZSA9IGNvbXAuX2xhc3RUaW1lU2NhbGU7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIF9yZXN1bWVBbmkgOiBmdW5jdGlvbiAobm9kZSkge1xyXG5cclxuICAgIH0sXHJcblxyXG4gICAgLy/np7vlh7rlsY/luZXlpJZcclxuICAgIG1vdmVPdXRTY2VuZSA6IGZ1bmN0aW9uIChpc091dCwgaXNOb0VmZmVjdCkge1xyXG4gICAgICAgIGlmKCF0aGlzLl9maXJzdFBvc1gpIHRoaXMuX2ZpcnN0UG9zWCA9IHRoaXMubm9kZS54O1xyXG4gICAgICAgIHZhciBkZXNpZ25TaXplID0gY2Muc3lzLmlzTW9iaWxlID8gY2Mudmlldy5nZXREZXNpZ25SZXNvbHV0aW9uU2l6ZSgpIDogY2MudmlzaWJsZVJlY3Q7XHJcbiAgICAgICAgaWYgKGlzTm9FZmZlY3QpIHtcclxuICAgICAgICAgICAgdGhpcy5ub2RlLnggPSBpc091dCA/IHRoaXMuX2ZpcnN0UG9zWCA6IGRlc2lnblNpemUud2lkdGgqMi10aGlzLl9maXJzdFBvc1g7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0RnJhbWVIaWRlKGlzT3V0KTtcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgdGhpcy5faXNUb3VjaExpbWl0ID0gdHJ1ZTtcclxuICAgICAgICAgICAgdGhpcy5ub2RlLmFjdGl2ZSA9IHRydWU7XHJcbiAgICAgICAgICAgIHZhciB0aW1lID0gMC41O1xyXG4gICAgICAgICAgICB0aGlzLm5vZGUuc3RvcEFsbEFjdGlvbnMoKTtcclxuICAgICAgICAgICAgdmFyIHRhcmdldFBvcyA9IGNjLnAoZGVzaWduU2l6ZS53aWR0aCoyLXRoaXMuX2ZpcnN0UG9zWCwgdGhpcy5ub2RlLnkpO1xyXG4gICAgICAgICAgICBpZihpc091dCkgdGFyZ2V0UG9zLnggPSB0aGlzLl9maXJzdFBvc1hcclxuICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgICAgICAgICB0aGlzLm5vZGUucnVuQWN0aW9uKGNjLnNlcXVlbmNlKGNjLm1vdmVUbyh0aW1lLCB0YXJnZXRQb3MpLCBjYy5jYWxsRnVuYyhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBzZWxmLl9pc1RvdWNoTGltaXQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIHNlbGYuc2V0RnJhbWVIaWRlKGlzT3V0KTtcclxuICAgICAgICAgICAgfSkpKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIHNldEZyYW1lSGlkZSA6IGZ1bmN0aW9uIChpc091dCkge1xyXG4gICAgICAgIHRoaXMubm9kZS5hY3RpdmUgPSAhaXNPdXQ7XHJcbiAgICB9LFxyXG4gICAgLy8gY2FsbGVkIGV2ZXJ5IGZyYW1lLCB1bmNvbW1lbnQgdGhpcyBmdW5jdGlvbiB0byBhY3RpdmF0ZSB1cGRhdGUgY2FsbGJhY2tcclxuICAgIC8vIHVwZGF0ZTogZnVuY3Rpb24gKGR0KSB7XHJcblxyXG4gICAgLy8gfSxcclxufSk7XHJcbiIsIi8v546p5a626LSm55uu55WM6Z2iXHJcblxyXG52YXIgc2VuZE9iaiA9IHtcclxuICAgIGdhbWVJZDoxLFxyXG4gICAgZGF0ZUNsYXNzOjAsXHJcbiAgICBwYWdlU2l6ZToyMCxcclxuICAgIHBhZ2VOb3c6MCxcclxufVxyXG5cclxuY2MuQ2xhc3Moe1xyXG4gICAgZXh0ZW5kczogcmVxdWlyZSgnQmFzZURpYWxvZycpLFxyXG5cclxuICAgIHByb3BlcnRpZXM6IHtcclxuICAgICAgICBfbGFzdFRvdWNoQnRuIDogbnVsbCwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/kuIrmrKHngrnlh7vnmoTmjInpkq5cclxuICAgICAgICBfZGljdF9jYWNoZURhdGEgOiBudWxsLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/nvJPlrZjmlbDmja5cclxuICAgICAgICBfZmlyc3RTaG93TnVtIDogbnVsbCwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/pppbmrKHmmL7npLrnmoTmnaHnm67mlbBcclxuICAgICAgICBfY3VyRGF0ZUNsYXNzIDogbnVsbCwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/lvZPliY3mmL7npLrnmoTmlbDmja7ml7bpl7Qs5q+U5aaC5b2T5aSpXHJcbiAgICAgICAgX2RpY3RfbGlzdEZ1bGwgOiBudWxsLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5p+Q5aSp5pWw5o2u5piv5ZCm5bey57uP5YWo6YOo6K+35rGCXHJcblxyXG4gICAgICAgIGxhYmVsX251bGwgOiB7XHJcbiAgICAgICAgICAgIGRlZmF1bHQgOiBudWxsLFxyXG4gICAgICAgICAgICB0eXBlIDogY2MuTGFiZWwsXHJcbiAgICAgICAgICAgIGRpc3BsYXlOYW1lIDogJ+aXoOaVsOaNruaXtuaYvuekuidcclxuICAgICAgICB9LFxyXG4gICAgICAgIGNvbXBfc2Nyb2xsIDoge1xyXG4gICAgICAgICAgICBkZWZhdWx0IDogbnVsbCxcclxuICAgICAgICAgICAgdHlwZSA6IGNjLlNjcm9sbFZpZXcsXHJcbiAgICAgICAgICAgIGRpc3BsYXlOYW1lIDogJ+a7muWKqOeahOWuueWZqCdcclxuICAgICAgICB9LFxyXG4gICAgfSxcclxuXHJcbiAgICAvLyB1c2UgdGhpcyBmb3IgaW5pdGlhbGl6YXRpb25cclxuICAgIG9uTG9hZDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuX3N1cGVyKCk7XHJcbiAgICAgICAgdGhpcy5fZmlyc3RTaG93TnVtID0gNjtcclxuICAgICAgICB0aGlzLmNvbXBfc2Nyb2xsLm5vZGUub24oJ3Njcm9sbC10by1ib3R0b20nLCB0aGlzLl9zY3JvbGxUb0JvdHRvbSwgdGhpcyk7XHJcblxyXG4gICAgICAgIHRoaXMuX2RlYWxlckl0ZW1Db21wTmFtZSA9ICdPYmpfZGlhbG9nQWNjb3VudENlbGwnO1xyXG4gICAgICAgIHRoaXMuX2RpY3RfY2FjaGVEYXRhID0ge307XHJcbiAgICAgICAgdGhpcy5fZGljdF9saXN0RnVsbCA9IHt9O1xyXG4gICAgICAgIC8v5Yid5aeL5Y+z6L6555qE5p2h55uu5a655ZmoXHJcbiAgICAgICAgdmFyIGRhdGFPYmogPSB7XHJcbiAgICAgICAgICAgIGl0ZW1QcmVmYWIgOiB0aGlzLnByZWZhYl9pdGVtLFxyXG4gICAgICAgICAgICBzY3JvbGxUeXBlIDogR19UWVBFLnNjcm9sbFR5cGUudmVydGljYWwsXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuY29tcF9pdGVtQ29udGFpbmVyLnNldERhdGEoZGF0YU9iaik7XHJcblxyXG4gICAgICAgIC8v5YiH5o2i6aG16Z2i566h55CG6ZyA6KaB55qE5pWw5o2uXHJcbiAgICAgICAgdGhpcy5fY29tcF9leGNoYW5nUGFnZXMgPSB0aGlzLmdldENvbXBvbmVudCgnUGFydF9kaWFsb2dfZXhjaGFuZ2VQYWdlcycpO1xyXG5cclxuICAgICAgICB2YXIgZGF0YU9iaiA9IEdfT0JKLmRhdGFfZGlhbG9nX2V4Y2hhbmdlUGFnZXMoKTtcclxuICAgICAgICBkYXRhT2JqLmxlZnREZWFsU2Nyb2xsQ29tcCA9IHRoaXMuY29tcF9sZWZ0QnRuQ29udGFpbmVyO1xyXG4gICAgICAgIGRhdGFPYmoubGVmdFByZWZhYiA9IHRoaXMucHJlZmFiX2xlZnRCdXR0b247XHJcbiAgICAgICAgZGF0YU9iai5sZWZ0Q29udGVudExpc3QgPSBHX0NISU5FU0UuZXhjaGFuZ2VQYWdlTGVmdDtcclxuICAgICAgICBkYXRhT2JqLmxlZnRDbGlja0Z1bmMgPSB0aGlzLm9uQ2xpY2tfbGVmdEJ0bi5iaW5kKHRoaXMpO1xyXG4gICAgICAgIGRhdGFPYmoucmlnaHREZWFsU2Nyb2xsQ29tcCA9IHRoaXMuY29tcF9pdGVtQ29udGFpbmVyO1xyXG4gICAgICAgIGRhdGFPYmouaXNTdG9wU2V0UmlnaHRDb250ZW50ID0gdHJ1ZTtcclxuICAgICAgICAvL2RhdGFPYmoucmlnaHRQcmVmYWJMaXN0ID0gW3RoaXMucHJlZmFiX2ludHJvZHVjZSwgdGhpcy5wcmVmYWJfYnVsbDEwMCwgdGhpcy5wcmVmYWJfZ3JhYl07XHJcbiAgICAgICAgdGhpcy5fY29tcF9leGNoYW5nUGFnZXMuaW5pdERhdGEoZGF0YU9iaik7XHJcbiAgICAgICAgdGhpcy5fY29tcF9leGNoYW5nUGFnZXMuZGl5Q2xpY2tTaG93KCk7XHJcbiAgICB9LFxyXG5cclxuICAgIC8v6ZqQ6JeP55WM6Z2i55qE5pe25YCZ5riF55CG57yT5a2YXHJcbiAgICBoaWRlTGF5ZXIgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5fc3VwZXIoKTtcclxuICAgICAgICB0aGlzLl9yZXNldENhY2hlKCk7XHJcbiAgICB9LFxyXG5cclxuICAgIHNldERhdGEgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5fY29tcF9leGNoYW5nUGFnZXMuc2hvd0RlZmF1bHQodHJ1ZSk7XHJcbiAgICB9LFxyXG5cclxuICAgIC8v54K55Ye75bem6L6555qE6YCJ6aG55oyJ6ZKuXHJcbiAgICBvbkNsaWNrX2xlZnRCdG4gOiBmdW5jdGlvbiAodHlwZSkge1xyXG4gICAgICAgIGlmKEdfQ29uZmlnX2NvbW1vbi5pc0xvY2FsKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2hvd0xheWVyKCk7XHJcbiAgICAgICAgICAgIHRoaXMuX3VwZGF0ZUJvdHRvbSh0aGlzLl9nZXRMb2NhbERhdGEoKSwgdHJ1ZSk7XHJcbiAgICAgICAgICAgIHRoaXMuX2NvbXBfZXhjaGFuZ1BhZ2VzLmRvbmVDbGlja1Nob3codHlwZSk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5fZ2V0RGF0YUJ5RGF0ZSh0eXBlLCAxLCBmdW5jdGlvbiAoaW5mb0xpc3QpIHtcclxuICAgICAgICAgICAgdGhpcy5zaG93TGF5ZXIoKTtcclxuICAgICAgICAgICAgdGhpcy5fY3VyRGF0ZUNsYXNzID0gdHlwZTtcclxuICAgICAgICAgICAgdGhpcy5fY29tcF9leGNoYW5nUGFnZXMuZG9uZUNsaWNrU2hvdyh0eXBlKTtcclxuICAgICAgICAgICAgdGhpcy5fdXBkYXRlQm90dG9tKGluZm9MaXN0LCB0cnVlKTtcclxuICAgICAgICB9LmJpbmQodGhpcykpO1xyXG4gICAgfSxcclxuXHJcbiAgICAvL+WPkemAgei0puebrueahOivt+axglxyXG4gICAgX3NlbmRSZXF1ZXN0IDogZnVuY3Rpb24gKGRhdGVDbGFzcywgcGFnZU5vLCBjYWxsRnVuYykge1xyXG4gICAgICAgIGlmKHRoaXMuX2RpY3RfbGlzdEZ1bGxbZGF0ZUNsYXNzXSkgcmV0dXJuO1xyXG4gICAgICAgIHZhciBzZW5kT2JqID0gR19PQkouZGF0YV9yZXF1ZXN0UmVjb3JkKCk7XHJcbiAgICAgICAgc2VuZE9iai5nYW1lSWQgPSBHRy5nZXRQbGF5ZXIoKS5nZXRHYW1lSUQoKTtcclxuICAgICAgICBzZW5kT2JqLmRhdGVDbGFzcyA9IGRhdGVDbGFzcztcclxuICAgICAgICBzZW5kT2JqLnBhZ2VTaXplID0gdGhpcy5fZmlyc3RTaG93TnVtO1xyXG4gICAgICAgIHNlbmRPYmoucGFnZU5vID0gcGFnZU5vO1xyXG5cclxuICAgICAgICAvL2dhbWVJZCDvvJog5bGe5LqO6YKj5qy+5ri45oiP77ybIGRhdGVDbGFzc++8muaXpeacn++8iDDmmK/lvZPlpKksMSwy77yJ77ybcGFnZVNpemXvvJrlvZPliY3pobXpnaLmnaHnm67mgLvmlbDvvJtwYWdlTm9377ya56ys5Yeg6aG177ybXHJcbiAgICAgICAgdmFyIHNlbmRTdHIgPSBcImdhbWVJZD1cIitzZW5kT2JqLmdhbWVJZCtcIiZkYXRlQ2xhc3M9XCIrc2VuZE9iai5kYXRlQ2xhc3MrXCImcGFnZVNpemU9XCIrc2VuZE9iai5wYWdlU2l6ZStcIiZwYWdlTm89XCIrc2VuZE9iai5wYWdlTm87XHJcbiAgICAgICAgR0cuaHR0cE1nci5zZW5kSHR0cFJlcXVlc3QoR19ESUFMT0dfVVJMLmFjY291bnRVcmwsIHNlbmRTdHIsIGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgIGlmKGRhdGEpe1xyXG4gICAgICAgICAgICAgICAgdmFyIGluZm9MaXN0ID0gdGhpcy5fY2FjaGVOZXREYXRhKGRhdGVDbGFzcywgZGF0YSk7XHJcbiAgICAgICAgICAgICAgICBpZihjYWxsRnVuYykgY2FsbEZ1bmMoaW5mb0xpc3QpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfS5iaW5kKHRoaXMpKTtcclxuICAgIH0sXHJcblxyXG4gICAgLy/ojrflj5bmlbDmja5cclxuICAgIF9nZXREYXRhQnlEYXRlIDogZnVuY3Rpb24gKGRhdGVDbGFzcywgcGFnZU5vLCBjYWxsRnVuYykge1xyXG4gICAgICAgIHZhciBuZWVkRGF0YSA9IHRoaXMuX2RpY3RfY2FjaGVEYXRhW2RhdGVDbGFzc107XHJcbiAgICAgICAgaWYobmVlZERhdGEpe1xyXG4gICAgICAgICAgICB2YXIgaW5mb0xpc3QgPSBbXTtcclxuICAgICAgICAgICAgaWYodGhpcy5fZGljdF9jYWNoZURhdGFbZGF0ZUNsYXNzXS5kYXRhKXtcclxuICAgICAgICAgICAgICAgIHZhciBhbGxDYWNoZUxpc3QgPSB0aGlzLl9kaWN0X2NhY2hlRGF0YVtkYXRlQ2xhc3NdLmRhdGEuZGF0YXMuY29uY2F0KFtdKTtcclxuICAgICAgICAgICAgICAgIGluZm9MaXN0ID0gYWxsQ2FjaGVMaXN0LnNwbGljZSh0aGlzLl9maXJzdFNob3dOdW0gKiAocGFnZU5vLTEpLCB0aGlzLl9maXJzdFNob3dOdW0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmKE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChpbmZvTGlzdCkgPT09ICdbb2JqZWN0IEFycmF5XScpe1xyXG4gICAgICAgICAgICAgICAgaWYoY2FsbEZ1bmMpIGNhbGxGdW5jKGluZm9MaXN0KTtcclxuICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9yZXF1ZXN0TmV0RGF0YShkYXRlQ2xhc3MsIHBhZ2VObywgY2FsbEZ1bmMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIHRoaXMuX3NlbmRSZXF1ZXN0KGRhdGVDbGFzcywgcGFnZU5vLCBjYWxsRnVuYyk7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICAvLz09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuXHJcbiAgICBfcmVzZXRDYWNoZSA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLl9kaWN0X2NhY2hlRGF0YSA9IHt9O1xyXG4gICAgICAgIHRoaXMuX2RpY3RfbGlzdEZ1bGwgPSB7fTtcclxuICAgIH0sXHJcblxyXG4gICAgLy/nvJPlrZjliJfooahcclxuICAgIF9jYWNoZU5ldERhdGEgOiBmdW5jdGlvbiAoZGF0ZUNsYXNzLCBuZXREYXRhKSB7XHJcbiAgICAgICAgdmFyIGRhdGFMaXN0ID0gW107XHJcbiAgICAgICAgaWYobmV0RGF0YS5jb2RlICE9IDEgfHwgIW5ldERhdGEuZGF0YS5kYXRhcyl7XHJcbiAgICAgICAgICAgIC8vIHRoaXMuX25vbmVUaXAgPSBuZXREYXRhLm1zZztcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgZGF0YUxpc3QgPSBuZXREYXRhLmRhdGEuZGF0YXM7XHJcbiAgICAgICAgICAgIGlmKHRoaXMuX2RpY3RfY2FjaGVEYXRhW2RhdGVDbGFzc10pe1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fZGljdF9jYWNoZURhdGFbZGF0ZUNsYXNzXS5jb2RlID0gbmV0RGF0YS5jb2RlO1xyXG4gICAgICAgICAgICAgICAgaWYodGhpcy5fZGljdF9jYWNoZURhdGFbZGF0ZUNsYXNzXS5kYXRhKXtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9kaWN0X2NhY2hlRGF0YVtkYXRlQ2xhc3NdLmRhdGEuZGF0YXMgPSB0aGlzLl9kaWN0X2NhY2hlRGF0YVtkYXRlQ2xhc3NdLmRhdGEuZGF0YXMuY29uY2F0KGRhdGFMaXN0KTtcclxuICAgICAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2RpY3RfY2FjaGVEYXRhW2RhdGVDbGFzc10uZGF0YSA9IG5ldERhdGEuZGF0YTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZighdGhpcy5fZGljdF9jYWNoZURhdGFbZGF0ZUNsYXNzXSkgdGhpcy5fZGljdF9jYWNoZURhdGFbZGF0ZUNsYXNzXSA9IG5ldERhdGE7XHJcbiAgICAgICAgcmV0dXJuIGRhdGFMaXN0XHJcbiAgICB9LFxyXG5cclxuICAgIC8v5b2T546p5a625rua5Yqo5Yiw5bqV6YOoXHJcbiAgICBfc2Nyb2xsVG9Cb3R0b20gOiBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICAgICAgdmFyIHNob3dJdGVtTnVtID0gdGhpcy5jb21wX2l0ZW1Db250YWluZXIuZ2V0U2hvd0l0ZW1OdW0oKTtcclxuICAgICAgICB0aGlzLl9nZXREYXRhQnlEYXRlKHRoaXMuX2N1ckRhdGVDbGFzcywgdGhpcy5jb21wX2l0ZW1Db250YWluZXIuZ2V0UGFnZU5vQnlOdW0oc2hvd0l0ZW1OdW0rMSwgdGhpcy5fZmlyc3RTaG93TnVtKSwgZnVuY3Rpb24gKGluZm9MaXN0KSB7XHJcbiAgICAgICAgICAgIHNlbGYuX3VwZGF0ZUJvdHRvbShpbmZvTGlzdCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9LFxyXG5cclxuICAgIC8v5b2Tc2Nyb2xs5rua5Yqo5Yiw5bqV6L65ICBpc1Jlc3RhcnQgOiDmmK/lkKbku47nrKzkuIDkuKrlvIDlp4tcclxuICAgIF91cGRhdGVCb3R0b20gOiBmdW5jdGlvbiAoaW5mb0xpc3QsIGlzUmVzdGFydCkge1xyXG4gICAgICAgIHZhciBpdGVtLCBjb21wLCBpbmRleCA9IDAsXHJcbiAgICAgICAgICAgIHBsYXllckluZm8sXHJcbiAgICAgICAgICAgIGl0ZW1OdW0gPSB0aGlzLmNvbXBfaXRlbUNvbnRhaW5lci5nZXRTaG93SXRlbU51bSgpLFxyXG4gICAgICAgICAgICBpbmZvTGVuID0gaW5mb0xpc3QubGVuZ3RoO1xyXG4gICAgICAgIGlmKGlzUmVzdGFydCkgaXRlbU51bSA9IDA7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IGl0ZW1OdW07IGkgPCAoaXRlbU51bSArIHRoaXMuX2ZpcnN0U2hvd051bSk7IGkrKykge1xyXG4gICAgICAgICAgICBwbGF5ZXJJbmZvID0gaW5mb0xpc3RbaW5kZXhdO1xyXG4gICAgICAgICAgICBpZighcGxheWVySW5mbyl7XHJcbiAgICAgICAgICAgICAgICAvL+WmguaenOayoeacieeOqeWutuaVsOaNruWImee7iOatou+8jOS4jeimgeWHuueOsOaWreWxglxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaXRlbSA9IHRoaXMuY29tcF9pdGVtQ29udGFpbmVyLmdldEl0ZW1CeUluZGV4KGkpO1xyXG4gICAgICAgICAgICBpZihpdGVtKXtcclxuICAgICAgICAgICAgICAgIGNvbXAgPSBpdGVtLmdldENvbXBvbmVudCh0aGlzLl9kZWFsZXJJdGVtQ29tcE5hbWUpO1xyXG4gICAgICAgICAgICAgICAgY29tcC5zZXREYXRhKHBsYXllckluZm8pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGluZGV4ICs9IDE7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8v5aaC5p6c5piv56ys5LiA6aG177yM6ZyA6KaB5bCG5aSa5L2Z55qE5p2h55uu5riF55CGXHJcbiAgICAgICAgaWYoaXNSZXN0YXJ0KSB7XHJcbiAgICAgICAgICAgIHRoaXMuY29tcF9pdGVtQ29udGFpbmVyLmNsZWFySXRlbXMoaW5mb0xlbiAtIDEpO1xyXG4gICAgICAgICAgICB0aGlzLl9zY3JvbGxUb1VwKCk7XHJcbiAgICAgICAgICAgIGlmKGluZm9MZW4gPCAxKSB0aGlzLl9zZXROdWxsKHRoaXMuX2RpY3RfY2FjaGVEYXRhW3RoaXMuX2N1ckRhdGVDbGFzc10ubXNnKTtcclxuICAgICAgICAgICAgZWxzZSB0aGlzLl9zZXROdWxsKCcnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy/mo4DmtYvor6XpobXmlbDmja7mmK/lkKbmu6HlgLxcclxuICAgICAgICBpZihpbmZvTGVuIDwgdGhpcy5fZmlyc3RTaG93TnVtKXtcclxuICAgICAgICAgICAgdGhpcy5fZGljdF9saXN0RnVsbFt0aGlzLl9jdXJEYXRlQ2xhc3NdID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIC8v6KeG5Zu+5YaF5a655bCG5Zyo6KeE5a6a5pe26Ze05YaF5rua5Yqo5Yiw6KeG5Zu+6aG26YOo44CCXHJcbiAgICBfc2Nyb2xsVG9VcCA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLmNvbXBfc2Nyb2xsLnNjcm9sbFRvVG9wKDAuMik7XHJcbiAgICB9LFxyXG5cclxuICAgIC8v5YGa56m655qE5pi+56S6XHJcbiAgICBfc2V0TnVsbCA6IGZ1bmN0aW9uIChtc2cpIHtcclxuICAgICAgICBpZihPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobXNnKSAhPT0gJ1tvYmplY3QgU3RyaW5nXScpe1xyXG4gICAgICAgICAgICBtc2cgPSAncmVxdWVzdCB0aW1lb3V0ISdcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5sYWJlbF9udWxsLnN0cmluZyA9IG1zZztcclxuICAgIH0sXHJcblxyXG4gICAgX2dldExvY2FsRGF0YSA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgY3VyTGlzdCA9IFtdO1xyXG4gICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCA2OyBpICsrKXtcclxuICAgICAgICAgICAgdmFyIGN1ck9iaiA9IHtcclxuICAgICAgICAgICAgICAgICdjb21wbGV0aW9udGltZSc6JzIwMDcvMS8xJyxcclxuICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9udHlwZSA6IChjYy5yYW5kb20wVG8xKCkgPiAwLjUgPyAnREVQT1NJVCc6JycpLFxyXG4gICAgICAgICAgICAgICAgdHJhbnNhY3Rpb25tb25leTooaSsxKSAqIChjYy5yYW5kb20wVG8xKCkgPiAwLjUgPyAxIDogLTEpLFxyXG4gICAgICAgICAgICAgICAgYmFsYW5jZSA6IGksXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY3VyTGlzdC5wdXNoKGN1ck9iaik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBjdXJMaXN0XHJcbiAgICB9LFxyXG5cclxuICAgIC8vIGNhbGxlZCBldmVyeSBmcmFtZSwgdW5jb21tZW50IHRoaXMgZnVuY3Rpb24gdG8gYWN0aXZhdGUgdXBkYXRlIGNhbGxiYWNrXHJcbiAgICAvLyB1cGRhdGU6IGZ1bmN0aW9uIChkdCkge1xyXG5cclxuICAgIC8vIH0sXHJcbn0pO1xyXG4iLCIvL+WFrOWRiuW8ueeql+eVjOmdolxyXG5jYy5DbGFzcyh7XHJcbiAgICBleHRlbmRzOiByZXF1aXJlKCdCYXNlRGlhbG9nJyksXHJcblxyXG4gICAgcHJvcGVydGllczoge1xyXG4gICAgICAgIF9sYXN0VG91Y2hCdG4gOiBudWxsLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+S4iuasoeeCueWHu+eahOaMiemSrlxyXG4gICAgICAgIF9saXN0X3ByZWZhYnMgOiBudWxsLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/miYDmnInpooTliLbkvZNcclxuICAgICAgICBwcmVmYWJfdmVyc2lvbkFubm91bmNlbWVudCA6IHtcclxuICAgICAgICAgICAgZGVmYXVsdCA6IG51bGwsXHJcbiAgICAgICAgICAgIHR5cGUgOiBjYy5QcmVmYWIsXHJcbiAgICAgICAgICAgIGRpc3BsYXlOYW1lIDogJ+eJiOacrOWFrOWRiumihOWItuS9kydcclxuICAgICAgICB9LFxyXG4gICAgICAgIHByZWZhYl9vZmZpY2lhbERlc2NBbm5vdW5jZW1lbnQgOiB7XHJcbiAgICAgICAgICAgIGRlZmF1bHQgOiBudWxsLFxyXG4gICAgICAgICAgICB0eXBlIDogY2MuUHJlZmFiLFxyXG4gICAgICAgICAgICBkaXNwbGF5TmFtZSA6ICflrpjmlrnor7TmmI7pooTliLbkvZMnXHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICAvLyB1c2UgdGhpcyBmb3IgaW5pdGlhbGl6YXRpb25cclxuICAgIG9uTG9hZDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuX3N1cGVyKCk7XHJcblxyXG4gICAgICAgIHRoaXMuX2NvbXBfZXhjaGFuZ1BhZ2VzID0gdGhpcy5nZXRDb21wb25lbnQoJ1BhcnRfZGlhbG9nX2V4Y2hhbmdlUGFnZXMnKTtcclxuXHJcbiAgICAgICAgdmFyIGRhdGFPYmogPSBHX09CSi5kYXRhX2RpYWxvZ19leGNoYW5nZVBhZ2VzKCk7XHJcbiAgICAgICAgZGF0YU9iai5sZWZ0RGVhbFNjcm9sbENvbXAgPSB0aGlzLmNvbXBfbGVmdEJ0bkNvbnRhaW5lcjtcclxuICAgICAgICBkYXRhT2JqLmxlZnRQcmVmYWIgPSB0aGlzLnByZWZhYl9sZWZ0QnV0dG9uO1xyXG4gICAgICAgIGRhdGFPYmoubGVmdENvbnRlbnRMaXN0ID0gWyfniYjmnKzlhazlkYonLCflrpjmlrnor7TmmI4nXTtcclxuICAgICAgICBkYXRhT2JqLmxlZnRDbGlja0Z1bmMgPSBudWxsO1xyXG4gICAgICAgIGRhdGFPYmoucmlnaHREZWFsU2Nyb2xsQ29tcCA9IHRoaXMuY29tcF9pdGVtQ29udGFpbmVyO1xyXG4gICAgICAgIGRhdGFPYmoucmlnaHRQcmVmYWJMaXN0ID0gW3RoaXMucHJlZmFiX3ZlcnNpb25Bbm5vdW5jZW1lbnQsIHRoaXMucHJlZmFiX29mZmljaWFsRGVzY0Fubm91bmNlbWVudF07XHJcbiAgICAgICAgdGhpcy5fY29tcF9leGNoYW5nUGFnZXMuaW5pdERhdGEoZGF0YU9iaik7XHJcbiAgICB9LFxyXG5cclxuICAgIHN0YXJ0IDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuX2NvbXBfZXhjaGFuZ1BhZ2VzLnNob3dEZWZhdWx0KHRydWUpO1xyXG4gICAgfSxcclxuXHJcbiAgICAvLyBjYWxsZWQgZXZlcnkgZnJhbWUsIHVuY29tbWVudCB0aGlzIGZ1bmN0aW9uIHRvIGFjdGl2YXRlIHVwZGF0ZSBjYWxsYmFja1xyXG4gICAgLy8gdXBkYXRlOiBmdW5jdGlvbiAoZHQpIHtcclxuXHJcbiAgICAvLyB9LFxyXG59KTtcclxuIiwiLy/nmb7kurrotbDlir/lm75cclxuXHJcblxyXG5jYy5DbGFzcyh7XHJcbiAgICBleHRlbmRzOiByZXF1aXJlKCdCYXNlRGlhbG9nJyksXHJcblxyXG4gICAgcHJvcGVydGllczoge1xyXG5cclxuICAgIH0sXHJcblxyXG4gICAgLy8gdXNlIHRoaXMgZm9yIGluaXRpYWxpemF0aW9uXHJcbiAgICBvbkxvYWQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLl9zdXBlcignVUlfdHJlbmQnKTtcclxuICAgICAgICB0aGlzLl9zZXRTY3JvbGxEYXRhKCk7XHJcbiAgICB9LFxyXG5cclxuICAgIF9zZXRTY3JvbGxEYXRhIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuX2l0ZW1Db21wTmFtZSA9ICdPYmpfY2VsbF90cmVuZCc7XHJcbiAgICAgICAgdmFyIGRhdGFPYmogPSB7XHJcbiAgICAgICAgICAgIGl0ZW1QcmVmYWIgOiB0aGlzLnByZWZhYl9pdGVtLFxyXG4gICAgICAgICAgICBzY3JvbGxUeXBlIDogR19UWVBFLnNjcm9sbFR5cGUudmVydGljYWwsXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuY29tcF9pdGVtQ29udGFpbmVyLnNldERhdGEoZGF0YU9iaik7XHJcbiAgICB9LFxyXG5cclxuICAgIHNldERhdGEgOiBmdW5jdGlvbiAoaG9tZUlEKSB7XHJcbiAgICAgICAgaWYoR19Db25maWdfY29tbW9uLmlzTG9jYWwpIHtcclxuICAgICAgICAgICAgdmFyIG5ldERhdGEgPSB0aGlzLl9nZXRMb2NhbERhdGEoKTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2cobmV0RGF0YSlcclxuICAgICAgICAgICAgdGhpcy5fc2V0TmV0RGF0YShuZXREYXRhKTtcclxuICAgICAgICB9IGVsc2V7XHJcbiAgICAgICAgICAgIHZhciBtb2R1bGVUeXBlO1xyXG4gICAgICAgICAgICBzd2l0Y2ggKEdHLmdldEdhbWVUeXBlKCkpe1xyXG4gICAgICAgICAgICAgICAgY2FzZSBHX1RZUEUuZ2FtZU1vZHVsZS5idWxsMTAwOlxyXG4gICAgICAgICAgICAgICAgICAgIG1vZHVsZVR5cGUgPSBHX1RZUEUuaHR0cF9nYW1lTW9kdWxlLmJ1bGwxMDA7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWtcclxuICAgICAgICAgICAgICAgIGNhc2UgR19UWVBFLmdhbWVNb2R1bGUuZ3JhYjpcclxuICAgICAgICAgICAgICAgICAgICBtb2R1bGVUeXBlID0gR19UWVBFLmh0dHBfZ2FtZU1vZHVsZS5ncmFiO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgICAgICAgICBjYXNlIEdfVFlQRS5nYW1lTW9kdWxlLmNsYXNzaWM6XHJcbiAgICAgICAgICAgICAgICAgICAgbW9kdWxlVHlwZSA9IEdfVFlQRS5odHRwX2dhbWVNb2R1bGUuY2xhc3NpYztcclxuICAgICAgICAgICAgICAgICAgICBicmVha1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICBtb2R1bGVUeXBlID0gMTtcclxuICAgICAgICAgICAgICAgICAgICBicmVha1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhciBzZW5kRGF0YSA9ICdnYW1lTW9kZWxJZD0nK21vZHVsZVR5cGUrJyZnYW1lUm9vbUlkPScraG9tZUlEO1xyXG4gICAgICAgICAgICBHRy5odHRwTWdyLnNlbmRIdHRwUmVxdWVzdChHX0RJQUxPR19VUkwudHJlbmRVcmwsIHNlbmREYXRhLCBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgaWYoZGF0YSl7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fc2V0TmV0RGF0YShkYXRhKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfS5iaW5kKHRoaXMpKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIF9zZXROZXREYXRhIDogZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICB0aGlzLnNob3dMYXllcigpO1xyXG4gICAgICAgIHZhciBuZWVkTGlzdCA9IFtdO1xyXG4gICAgICAgIHZhciBtYXRoTGlzdDtcclxuICAgICAgICB2YXIgZGF0YUxpc3QgPSBkYXRhLmRhdGE7XHJcbiAgICAgICAgaWYoIWRhdGFMaXN0KSB7XHJcbiAgICAgICAgICAgIC8v5rKh5pyJ5pWw5o2uXHJcbiAgICAgICAgICAgIC8vIGRhdGEubXNnXHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCBkYXRhTGlzdC5sZW5ndGg7IGkgKyspe1xyXG4gICAgICAgICAgICAgICAgaWYoIW5lZWRMaXN0W2ldKSBuZWVkTGlzdFtpXSA9IFtdO1xyXG4gICAgICAgICAgICAgICAgbWF0aExpc3QgPSBkYXRhTGlzdFtpXS5tYXRjaFJlc3VsdDtcclxuICAgICAgICAgICAgICAgIGlmKG1hdGhMaXN0KXtcclxuICAgICAgICAgICAgICAgICAgICBmb3IodmFyIGogPSAwOyBqIDwgbWF0aExpc3QubGVuZ3RoOyBqICsrKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmVlZExpc3RbaV0ucHVzaChbbWF0aExpc3Rbal1bJ2l0ZW1UeXBlJ10sIG1hdGhMaXN0W2pdWydvdXRjb21lJ11dKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5fc2hvd0xpc3QobmVlZExpc3QpO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgX3Nob3dMaXN0IDogZnVuY3Rpb24gKGRhdGFMaXN0KSB7XHJcbiAgICAgICAgdmFyIGRhdGEsIGl0ZW0sIGNvbXA7Ly/otbDlir/lm77mmL7npLrmnaHnm67kuLo1XHJcbiAgICAgICAgZm9yKHZhciBpID0gMDsgaSA8IEdfQ29uZmlnX2NvbW1vbi5zaG93VHJlbmRJdGVtczsgaSArKyl7XHJcbiAgICAgICAgICAgIGRhdGEgPSBkYXRhTGlzdFtpXVxyXG4gICAgICAgICAgICBpZihkYXRhKXtcclxuICAgICAgICAgICAgICAgIGl0ZW0gPSB0aGlzLmNvbXBfaXRlbUNvbnRhaW5lci5nZXRJdGVtQnlJbmRleChpKTtcclxuICAgICAgICAgICAgICAgIGlmKGl0ZW0pe1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbXAgPSBpdGVtLmdldENvbXBvbmVudCh0aGlzLl9pdGVtQ29tcE5hbWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbXAuc2V0RGF0YShkYXRhKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmNvbXBfaXRlbUNvbnRhaW5lci5jbGVhckl0ZW1zKGkpO1xyXG4gICAgfSxcclxuXHJcbiAgICBoaWRlTGF5ZXIgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5fc3VwZXIoKTtcclxuICAgIH0sXHJcblxyXG4gICAgX2dldExvY2FsRGF0YSA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgbmV0RGF0YSA9IHt9O1xyXG4gICAgICAgIG5ldERhdGEuZGF0YSA9IEdfVE9PTC5nZXRSYW5kb21Cb29sKCkgPyBudWxsIDogW107XHJcbiAgICAgICAgaWYobmV0RGF0YS5kYXRhKXtcclxuICAgICAgICAgICAgdmFyIHNob3dOdW0gPSBjYy5yYW5kb20wVG8xKCkgKiAxMDtcclxuICAgICAgICAgICAgZm9yKHZhciBpID0gMDsgaSA8IHNob3dOdW07IGkgKyspe1xyXG4gICAgICAgICAgICAgICAgdmFyIGluZm8gPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWF0Y2hSZXN1bHQgOiB0aGlzLl9nZXRNYXRjaFJlc3VsdCgpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIG5ldERhdGEuZGF0YS5wdXNoKGluZm8pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG5ldERhdGEubXNnID0gJyc7XHJcbiAgICAgICAgfWVsc2UgbmV0RGF0YS5tc2cgPSAncmVxdWVzdCBlcnJvcidcclxuICAgICAgICByZXR1cm4gbmV0RGF0YVxyXG4gICAgfSxcclxuXHJcbiAgICBfZ2V0TWF0Y2hSZXN1bHQgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIG5lZWRMaXN0ID0gW107XHJcbiAgICAgICAgdmFyIHR5cGVMaXN0ID0gWydTUEFERScsJ0RJQU1PTkQnLCdDTFVCJywnSEVBUlQnXVxyXG4gICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCBHX1RPT0wuZ2V0UmFuZG9tQXJlYSgwLCA0KTsgaSArKyl7XHJcbiAgICAgICAgICAgIHZhciBpbmZvID0ge1xyXG4gICAgICAgICAgICAgICAgJ2l0ZW1UeXBlJzp0eXBlTGlzdFtHX1RPT0wuZ2V0UmFuZG9tQXJlYSgwLDMpXSxcclxuICAgICAgICAgICAgICAgICdvdXRjb21lJzpHX1RPT0wuZ2V0UmFuZG9tQm9vbCgpPzE6MCxcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBuZWVkTGlzdC5wdXNoKGluZm8pXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBuZWVkTGlzdFxyXG4gICAgfSxcclxuXHJcbiAgICAvLyBjYWxsZWQgZXZlcnkgZnJhbWUsIHVuY29tbWVudCB0aGlzIGZ1bmN0aW9uIHRvIGFjdGl2YXRlIHVwZGF0ZSBjYWxsYmFja1xyXG4gICAgLy8gdXBkYXRlOiBmdW5jdGlvbiAoZHQpIHtcclxuXHJcbiAgICAvLyB9LFxyXG59KTtcclxuIiwiLy/kuIrluoTliJfooajnmoTnlYzpnaJcclxuXHJcblxyXG5jYy5DbGFzcyh7XHJcbiAgICBleHRlbmRzOiByZXF1aXJlKCdCYXNlRGlhbG9nJyksXHJcblxyXG4gICAgcHJvcGVydGllczoge1xyXG4gICAgICAgIF9taW5EZWFsZXJHb2xkIDogbnVsbCwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5pyA5bCP5LiK5bqE6YeR6aKdXHJcblxyXG4gICAgICAgIG5vZGVfYm90dG9tQnRucyA6IHtcclxuICAgICAgICAgICAgZGVmYXVsdCA6IG51bGwsXHJcbiAgICAgICAgICAgIHR5cGUgOiBjYy5Ob2RlLFxyXG4gICAgICAgICAgICBkaXNwbGF5TmFtZSA6ICfmjInpkq7lrrnlmagnXHJcbiAgICAgICAgfSxcclxuICAgICAgICBub2RlX2dvbGRUaXAgOiB7XHJcbiAgICAgICAgICAgIGRlZmF1bHQgOiBudWxsLFxyXG4gICAgICAgICAgICB0eXBlIDogY2MuTm9kZSxcclxuICAgICAgICAgICAgZGlzcGxheU5hbWUgOiAn6YeR5biB6ZmQ5Yi25o+Q56S6J1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgY29tcF9nb2xkU2xpZGVyIDoge1xyXG4gICAgICAgICAgICBkZWZhdWx0IDogbnVsbCxcclxuICAgICAgICAgICAgdHlwZSA6IHJlcXVpcmUoJ09ial9kZWFsZXJMaXN0U2xpZGVyJyksXHJcbiAgICAgICAgICAgIGRpc3BsYXlOYW1lIDogJ+i/m+W6puadoSdcclxuICAgICAgICB9LFxyXG4gICAgfSxcclxuXHJcbiAgICAvLyB1c2UgdGhpcyBmb3IgaW5pdGlhbGl6YXRpb25cclxuICAgIG9uTG9hZDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuX3N1cGVyKCdVSV9kZWFsZXJMaXN0Jyk7XHJcbiAgICAgICAgdGhpcy5fZGVhbGVySXRlbUNvbXBOYW1lID0gJ09ial9kZWFsZXJMaXN0Q2VsbCc7XHJcbiAgICAgICAgdGhpcy5fbW9uZXlGb3JtYXQgPSAnPGNvbG9yPSNGRkZENjE+JXM8L2M+JztcclxuICAgICAgICB0aGlzLl9saW1pdFRleHQgPSBbR19DSElORVNFLmRlYWxlckdvbGRUZXh0MSwgR19DSElORVNFLmRlYWxlckdvbGRUZXh0MiwgR19DSElORVNFLmRlYWxlckdvbGRUZXh0MywgR19DSElORVNFLmRlYWxlckdvbGRUZXh0NF07XHJcbiAgICAgICAgdGhpcy5fY2hhbmdlSW50ZXJ2YWwgPSBHX0NvbmZpZ19idWxsMTAwLmRlYWxlclNsaWRlckludGVydmFsO1xyXG5cclxuICAgICAgICB0aGlzLl9yZWdpc3RlckV2ZW50KCk7XHJcbiAgICAgICAgdGhpcy5faW5pdERlYWxlckxpc3QoKTtcclxuICAgIH0sXHJcblxyXG4gICAgc3RhcnQgOiBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgfSxcclxuXHJcbiAgICBzZXREYXRhIDogZnVuY3Rpb24gKGRhdGFPYmopIHtcclxuICAgICAgICB0aGlzLl9taW5EZWFsZXJHb2xkID0gR0cuYnVsbDEwME1nci5nZXRNaW5EZWFsZXJHb2xkKCk7XHJcbiAgICAgICAgdmFyIG15R29sZCA9IGRhdGFPYmoubXlHb2xkO1xyXG4gICAgICAgIHZhciBkZWFsZXJJbmZvID0gZGF0YU9iai5kZWFsZXJJbmZvO1xyXG4gICAgICAgIC8vdmFyIG15TWF4RGVhbGVyR29sZCA9IGRlYWxlckluZm8ubWF4RGVhbGVyQ29pbjtcclxuICAgICAgICB2YXIgbXlzZWxmSUQgPSBHRy5nZXRQbGF5ZXJJRCgpO1xyXG4gICAgICAgIHZhciBpc0luRGVhbGVyTGlzdCA9IGZhbHNlOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/njqnlrrboh6rlt7HlnKjkuIrluoTliJfooahcclxuICAgICAgICB2YXIgcmFua0xpc3QgPSBkYXRhT2JqLnJhbmtMaXN0O1xyXG4gICAgICAgIGlmKCFyYW5rTGlzdCkgcmFua0xpc3QgPSBbXTtcclxuICAgICAgICB2YXIgZGF0YUxpc3QgPSBbXSwgcGxheWVyRGF0YSwgaXNEZWFsZXIsIG15UmFua051bT0nJztcclxuICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgcmFua0xpc3QubGVuZ3RoOyBpICsrKXtcclxuICAgICAgICAgICAgcGxheWVyRGF0YSA9IHJhbmtMaXN0W2ldO1xyXG4gICAgICAgICAgICBpc0RlYWxlciA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgaWYocGxheWVyRGF0YS5wbGF5ZXJJZCA9PSBkZWFsZXJJbmZvLnBsYXllcklkKSB7XHJcbiAgICAgICAgICAgICAgICBkZWFsZXJJbmZvID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIGlzRGVhbGVyID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIGRhdGFMaXN0LnNwbGljZSgwLDAse1xyXG4gICAgICAgICAgICAgICAgICAgIGhlYWRJbWcgOiBwbGF5ZXJEYXRhLmljb24sXHJcbiAgICAgICAgICAgICAgICAgICAgbmFtZSA6IHBsYXllckRhdGEubmlja25hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgZ29sZCA6IHBsYXllckRhdGEudXNhYmxlQmFsYW5jZSxcclxuICAgICAgICAgICAgICAgICAgICBpc0RlYWxlciA6IGlzRGVhbGVyXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICBkYXRhTGlzdC5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICBoZWFkSW1nIDogcGxheWVyRGF0YS5pY29uLFxyXG4gICAgICAgICAgICAgICAgICAgIG5hbWUgOiBwbGF5ZXJEYXRhLm5pY2tuYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgIGdvbGQgOiBwbGF5ZXJEYXRhLnVzYWJsZUJhbGFuY2UsXHJcbiAgICAgICAgICAgICAgICAgICAgaXNEZWFsZXIgOiBpc0RlYWxlclxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZihwbGF5ZXJEYXRhLnBsYXllcklkID09IG15c2VsZklEKSB7XHJcbiAgICAgICAgICAgICAgICBpc0luRGVhbGVyTGlzdCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBteVJhbmtOdW0gPSBpKzE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYoZGVhbGVySW5mbyl7XHJcbiAgICAgICAgICAgIGRhdGFMaXN0LnNwbGljZSgwLDAse1xyXG4gICAgICAgICAgICAgICAgaGVhZEltZyA6IGRlYWxlckluZm8uaWNvbixcclxuICAgICAgICAgICAgICAgIG5hbWUgOiBkZWFsZXJJbmZvLm5pY2tuYW1lLFxyXG4gICAgICAgICAgICAgICAgZ29sZCA6IGRlYWxlckluZm8udXNhYmxlQmFsYW5jZSxcclxuICAgICAgICAgICAgICAgIGlzRGVhbGVyIDogdHJ1ZVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgaWYoZGVhbGVySW5mby5wbGF5ZXJJZCA9PSBteXNlbGZJRCkge1xyXG4gICAgICAgICAgICAgICAgaXNEZWFsZXIgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgaXNJbkRlYWxlckxpc3QgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnNldEJ0blNob3coaXNJbkRlYWxlckxpc3QsIGlzRGVhbGVyKTtcclxuICAgICAgICB0aGlzLl9zZXREZWFsZXJMaXN0KGRhdGFMaXN0KTtcclxuXHJcbiAgICAgICAgdmFyIG9mZkdvbGQgPSB0aGlzLl9jaGFuZ2VJbnRlcnZhbDtcclxuICAgICAgICBpZiAoaXNJbkRlYWxlckxpc3QpIHtcclxuICAgICAgICAgICAgLy/lnKjkuIrluoTliJfooahcclxuICAgICAgICAgICAgdGhpcy5jb21wX2dvbGRTbGlkZXIuc2V0RGF0YShteUdvbGQsIG9mZkdvbGQsIG9mZkdvbGQpO1xyXG4gICAgICAgICAgICBpZihpc0RlYWxlcil7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9zaG93RG93blRpcCh0aGlzLl9saW1pdFRleHRbMl0pO1xyXG4gICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgIC8v5Zyo5o6S6Zif5LitXHJcbiAgICAgICAgICAgICAgICB0aGlzLl9zaG93RG93blRpcChHX1RPT0wuZm9ybWF0U3RyKHRoaXMuX2xpbWl0VGV4dFszXSwgbXlSYW5rTnVtKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvL+S4jeWcqOS4iuW6hOWIl+ihqFxyXG4gICAgICAgICAgICB0aGlzLmNvbXBfZ29sZFNsaWRlci5zZXREYXRhKG15R29sZCwgb2ZmR29sZCwgdGhpcy5fbWluRGVhbGVyR29sZCk7XHJcblxyXG4gICAgICAgICAgICBpZihteUdvbGQgPCB0aGlzLl9taW5EZWFsZXJHb2xkKXtcclxuICAgICAgICAgICAgICAgIC8v6YeR5biB5LiN6Laz77yM5peg5rOV5LiK5bqEXHJcbiAgICAgICAgICAgICAgICB0aGlzLl9zaG93RG93blRpcCh0aGlzLl9saW1pdFRleHRbMV0sIHRoaXMuX21pbkRlYWxlckdvbGQpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRCdG5FbmFibGUodGhpcy5ub2RlX2JvdHRvbUJ0bnMuY2hpbGRyZW5bMV0sIGZhbHNlKTtcclxuXHJcbiAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgLy/ph5HluIHotrPlpJ9cclxuICAgICAgICAgICAgICAgIHRoaXMuX3Nob3dEb3duVGlwKHRoaXMuX2xpbWl0VGV4dFswXSwgdGhpcy5fbWluRGVhbGVyR29sZCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldEJ0bkVuYWJsZSh0aGlzLm5vZGVfYm90dG9tQnRucy5jaGlsZHJlblsxXSwgdHJ1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIF9yZWdpc3RlckV2ZW50IDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBidG5zID0gdGhpcy5ub2RlX2JvdHRvbUJ0bnMuY2hpbGRyZW47XHJcbiAgICAgICAgZm9yKHZhciBpID0gMDsgaSA8IGJ0bnMubGVuZ3RoOyBpICsrKXtcclxuICAgICAgICAgICAgYnRuc1tpXS50YWcgPSBpO1xyXG4gICAgICAgICAgICB0aGlzLnJlZ2lzdGVyQnV0dG9uKGJ0bnNbaV0sIHRoaXMuX29uQ2xpY2tfZGVhbGVyQnRuc3IsIHRoaXMpO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICBoaWRlTGF5ZXIgOiBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICB0aGlzLl9zdXBlcigpO1xyXG4gICAgfSxcclxuICAgIF9vbkNsaWNrX2RlYWxlckJ0bnNyIDogZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgc3dpdGNoIChldmVudC5jdXJyZW50VGFyZ2V0LnRhZyl7XHJcbiAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgIC8v57ut5bqEXHJcbiAgICAgICAgICAgICAgICBHRy5idWxsMTAwTWdyLmNvbW1pdENvbnRpbnVlRGVhbGVyKHRoaXMuY29tcF9nb2xkU2xpZGVyLmdldE1vdmVOdW0oKSk7XHJcbiAgICAgICAgICAgICAgICBicmVha1xyXG4gICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAvL+S4iuW6hFxyXG4gICAgICAgICAgICAgICAgR0cuYnVsbDEwME1nci5zZW5kX3VwRGVhbGVyKHRoaXMuY29tcF9nb2xkU2xpZGVyLmdldE1vdmVOdW0oKSk7XHJcbiAgICAgICAgICAgICAgICBicmVha1xyXG4gICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAvL+S4i+W6hFxyXG4gICAgICAgICAgICAgICAgR0cuYnVsbDEwME1nci5zZW5kX2Rvd25EZWFsZXIoKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICBicmVha1xyXG4gICAgICAgIH1cclxuICAgICAgICAvL2NjLmV2ZW50TWFuYWdlci5wYXVzZVRhcmdldCh0aGlzLmNvbXBfZ29sZFNsaWRlci5ub2RlLCB0cnVlKTtcclxuICAgIH0sXHJcblxyXG5cclxuICAgIC8v5Yid5aeL5YyW5bqE5a625YiX6KGoXHJcbiAgICBfaW5pdERlYWxlckxpc3QgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGRhdGFPYmogPSB7XHJcbiAgICAgICAgICAgIGl0ZW1QcmVmYWIgOiB0aGlzLnByZWZhYl9pdGVtLFxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmNvbXBfaXRlbUNvbnRhaW5lci5zZXREYXRhKGRhdGFPYmopO1xyXG4gICAgfSxcclxuICAgIC8v6K6+572u5YiX6KGo5YaF5a65XHJcbiAgICBfc2V0RGVhbGVyTGlzdCA6IGZ1bmN0aW9uIChkYXRhTGlzdCkge1xyXG4gICAgICAgIHZhciBpdGVtLCBjb21wLCBpID0gMDtcclxuICAgICAgICBmb3IoaSA9IDA7IGkgPCBkYXRhTGlzdC5sZW5ndGg7IGkgKyspe1xyXG4gICAgICAgICAgICBpdGVtID0gdGhpcy5jb21wX2l0ZW1Db250YWluZXIuZ2V0SXRlbUJ5SW5kZXgoaSk7XHJcbiAgICAgICAgICAgIGlmKGl0ZW0pe1xyXG4gICAgICAgICAgICAgICAgY29tcCA9IGl0ZW0uZ2V0Q29tcG9uZW50KHRoaXMuX2RlYWxlckl0ZW1Db21wTmFtZSk7XHJcbiAgICAgICAgICAgICAgICBjb21wLnNldERhdGEoZGF0YUxpc3RbaV0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuY29tcF9pdGVtQ29udGFpbmVyLmNsZWFySXRlbXMoaSAtIDEpO1xyXG4gICAgfSxcclxuXHJcbiAgICAvLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblxyXG4gICAgLy/orr7nva7kuIrluoTph5Hpop3pmZDliLbmj5DnpLpcclxuICAgIHNldEdvbGRMaW1pdFRpcCA6IGZ1bmN0aW9uIChteUdvbGQsIG1pbkRlYWxlckdvbGQpIHtcclxuICAgICAgICB2YXIgc3RyO1xyXG4gICAgICAgIGlmKG15R29sZCA+IG1pbkRlYWxlckdvbGQpIHtcclxuICAgICAgICAgICAgc3RyID0gdGhpcy5fbGltaXRUZXh0WzBdO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHN0ciA9IHRoaXMuX2xpbWl0VGV4dFsxXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5ub2RlX2dvbGRUaXAuZ2V0Q29tcG9uZW50KGNjLkxhYmVsKS5zdHJpbmcgPSBzdHI7XHJcbiAgICB9LFxyXG5cclxuICAgIC8v5qC55o2u5piv5ZCm5bey57uP5Zyo5bqE5a625YiX6KGo5p2l5Yik5a6a5oyJ6ZKu55qE5pi+6ZqQXHJcbiAgICBzZXRCdG5TaG93IDogZnVuY3Rpb24gKGlzTXlEZWFsZXIsIGlzRGVhbGVyKSB7XHJcbiAgICAgICAgdmFyIGJ0bnMgPSB0aGlzLm5vZGVfYm90dG9tQnRucy5jaGlsZHJlbjtcclxuICAgICAgICBidG5zWzBdLmFjdGl2ZSA9IGlzTXlEZWFsZXIgfHwgaXNEZWFsZXI7Ly/miJHopoHnu63luoRcclxuICAgICAgICBidG5zWzFdLmFjdGl2ZSA9ICEoaXNNeURlYWxlciB8fCBpc0RlYWxlcik7Ly/miJHopoHkuIrluoRcclxuICAgICAgICBidG5zWzJdLmFjdGl2ZSA9IGlzTXlEZWFsZXIgfHwgaXNEZWFsZXI7Ly/miJHopoHkuIvluoRcclxuICAgIH0sXHJcblxyXG4gICAgLy/kuIrluoTmiJDlip9cclxuICAgIHVwRGVhbGVyU3VjY2VzcyA6IGZ1bmN0aW9uIChkYXRhT2JqKSB7XHJcbiAgICAgICAgdGhpcy5zaG93TGF5ZXIoKTtcclxuICAgICAgICB0aGlzLnNldERhdGEoZGF0YU9iaik7XHJcbiAgICAgICAgaWYoZGF0YU9iai50aXBTdHIpe1xyXG4gICAgICAgICAgICB2YXIgdGlwT2JqID0ge1xyXG4gICAgICAgICAgICAgICAgdGlwSW5kZXggOiAxOSxcclxuICAgICAgICAgICAgICAgIHNob3dTdHIgOiBkYXRhT2JqLnRpcFN0cixcclxuICAgICAgICAgICAgICAgIGlzQ291bnREb3duIDogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBzaG93UG9zIDogR19EQVRBLmdldENlbnRlclRpcFBvcygpLFxyXG4gICAgICAgICAgICAgICAgLy9jYWxsQmFjayA6IHRoaXMub25fYmVmb3JlU3RhcnQuYmluZCh0aGlzKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIEdHLnRpcHNNZ3Iuc2hvd1R4dFRpcCh0aXBPYmopO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgLy/ku47kuIrluoTliJfooajkuIvmnaVcclxuICAgIGRvd25EZWFsZXJTdWNjZXNzIDogZnVuY3Rpb24gKGRhdGFPYmopIHtcclxuICAgICAgICB0aGlzLnNob3dMYXllcigpO1xyXG4gICAgICAgIHRoaXMuc2V0RGF0YShkYXRhT2JqKTtcclxuICAgICAgICBpZihkYXRhT2JqLnRpcFN0cil7XHJcbiAgICAgICAgICAgIHZhciB0aXBPYmogPSB7XHJcbiAgICAgICAgICAgICAgICB0aXBJbmRleCA6IDE5LFxyXG4gICAgICAgICAgICAgICAgc2hvd1N0ciA6IGRhdGFPYmoudGlwU3RyLFxyXG4gICAgICAgICAgICAgICAgaXNDb3VudERvd24gOmZhbHNlLFxyXG4gICAgICAgICAgICAgICAgc2hvd1BvcyA6IEdfREFUQS5nZXRDZW50ZXJUaXBQb3MoKSxcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBHRy50aXBzTWdyLnNob3dUeHRUaXAodGlwT2JqKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIC8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblxyXG4gICAgLy/orr7nva7lupXpg6jnmoR0aXDpmZDliLbmj5DnpLpcclxuICAgIF9zaG93RG93blRpcCA6IGZ1bmN0aW9uIChsZWZ0U3RyLCBnb2xkKSB7XHJcbiAgICAgICAgaWYoZ29sZCkgZ29sZCA9IEdfVE9PTC5mb3JtYXRTdHIodGhpcy5fbW9uZXlGb3JtYXQsIEdfVE9PTC5jaGFuZ2VNb25leShnb2xkKSk7XHJcbiAgICAgICAgZWxzZSBnb2xkID0gJyc7XHJcbiAgICAgICAgdGhpcy5ub2RlX2dvbGRUaXAuZ2V0Q29tcG9uZW50KGNjLlJpY2hUZXh0KS5zdHJpbmcgPSBsZWZ0U3RyICsgZ29sZDtcclxuICAgIH0sXHJcblxyXG4gICAgLy8gY2FsbGVkIGV2ZXJ5IGZyYW1lLCB1bmNvbW1lbnQgdGhpcyBmdW5jdGlvbiB0byBhY3RpdmF0ZSB1cGRhdGUgY2FsbGJhY2tcclxuICAgIC8vIHVwZGF0ZTogZnVuY3Rpb24gKGR0KSB7XHJcblxyXG4gICAgLy8gfSxcclxufSk7XHJcbiIsIi8v5oq85a6d6LWw5Yq/5Zu+56qX5L2TXHJcbmNjLkNsYXNzKHtcclxuICAgIGV4dGVuZHM6IHJlcXVpcmUoJ0Jhc2VEaWFsb2cnKSxcclxuXHJcbiAgICBwcm9wZXJ0aWVzOiB7XHJcbiAgICAgICAgX3Jlc3VsdERpY3Q6IG51bGwsXHJcbiAgICAgICAgX29uZVJlc3VsdERpY3Q6IG51bGwsXHJcbiAgICAgICAgX2xvc2VDb2xvcjogbnVsbCxcclxuICAgICAgICBfYnVsbFJlc3VsdDogbnVsbCxcclxuICAgICAgICBfYnVsbFZhbHVlOiBudWxsLFxyXG4gICAgICAgIG5vZGVfZGF0YTp7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6bnVsbCxcclxuICAgICAgICAgICAgdHlwZTpjYy5Ob2RlLFxyXG4gICAgICAgICAgICBkaXNwbGF5TmFtZTon6LWw5Yq/5Zu+5pWw5o2u6IqC54K5J1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgbm9kZV9ub0RhdGE6e1xyXG4gICAgICAgICAgICBkZWZhdWx0Om51bGwsXHJcbiAgICAgICAgICAgIHR5cGU6Y2MuTm9kZSxcclxuICAgICAgICAgICAgZGlzcGxheU5hbWU6J+aXoOi1sOWKv+iusOW9leaXtuaYvuekuuiKgueCuSdcclxuICAgICAgICB9LFxyXG4gICAgICAgIG5vZGVfdHJlbmRCRzoge1xyXG4gICAgICAgICAgICBkZWZhdWx0Om51bGwsXHJcbiAgICAgICAgICAgIHR5cGU6Y2MuTm9kZSxcclxuICAgICAgICAgICAgZGlzcGxheU5hbWU6J+aXoOi1sOWKv+iusOW9leaXtuiDjOaZr+iKgueCuSdcclxuICAgICAgICB9LFxyXG4gICAgfSxcclxuXHJcbiAgICAvLyB1c2UgdGhpcyBmb3IgaW5pdGlhbGl6YXRpb25cclxuICAgIG9uTG9hZDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuX3N1cGVyKCk7XHJcbiAgICAgICAgdGhpcy5fcG9rZXJDb21wTmFtZSA9ICdPYmpfcG9rZXInO1xyXG4gICAgICAgIHRoaXMuX3Bva2VyUmVzdWx0Q29tcE5hbWUgPSAnT2JqX29uUG9rZXJSZXN1bHQnO1xyXG4gICAgICAgIHRoaXMuX3Bva2VyQ29udGFpbmVyTmFtZSA9ICdwb2tlckNvbnRhaW5lcic7XHJcbiAgICAgICAgdGhpcy5fcG9rZXJSZXN1bHROb2RlTmFtZSA9ICdQcmVmYWJfUG9rZXJSZXN1bHQnO1xyXG4gICAgICAgIHRoaXMuX3Jlc3VsdERpY3QgPSB7fTtcclxuICAgICAgICB0aGlzLl9vbmVSZXN1bHREaWN0ID0ge307XHJcbiAgICAgICAgdGhpcy5fbG9zZUNvbG9yID0gbmV3IGNjLkNvbG9yKDI1MywgNDEsIDMxKTsvL+Wksei0peeahOminOiJslxyXG4gICAgICAgIHRoaXMuX3dpbkNvbG9yID0gbmV3IGNjLkNvbG9yKDE1NSwgMTc2LCAyMzUpOy8v6IOc5Yip55qE6aKc6ImyXHJcbiAgICAgICAgdGhpcy5fbm90TWF0Y2hDb2xvciA9IHRoaXMubm9kZV9kYXRhLmNvbG9yO1xyXG4gICAgICAgIHRoaXMubm9kZV9ub0RhdGEuYWN0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5fd2luUG9rZXJPZmYgPSBHX0NvbmZpZ19ncmFiLm51bV93aW5Qb2tlck9mZjtcclxuICAgICAgICB0aGlzLl9idWxsUmVzdWx0ID0gMDtcclxuICAgICAgICB0aGlzLl9idWxsVmFsdWUgPSAwO1xyXG5cclxuICAgIH0sXHJcblxyXG4gICAgc2V0RGF0YTogZnVuY3Rpb24gKGhvbWVJRCkge1xyXG4gICAgICAgIHZhciBkYXRhTGlzdDtcclxuICAgICAgICBpZiAoR19Db25maWdfY29tbW9uLmlzTG9jYWwpIHtcclxuICAgICAgICAgICAgZGF0YUxpc3QgPSB7XHJcbiAgICAgICAgICAgICAgICBjb2RlOiAxLFxyXG4gICAgICAgICAgICAgICAgZGF0YTogW1xyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2xpZW50OiAnWzI5LCAzMCwgMTEsIDE3LCAyXScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb2ZpdGFtb3VudDogMVxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGllbnQ6ICdbMjcsIDEzLCA0NSwgMzAsIDI2XScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb2ZpdGFtb3VudDotMVxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGllbnQ6ICdbNDgsIDUxLCA0MCwgMTUsIDEwXScsXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsaWVudDogJ1s0OCwgNTEsIDQwLCAxNSwgMTBdJyxcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2xpZW50OiAnWzQ4LCA1MSwgNDAsIDE1LCAxMF0nLFxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGllbnQ6ICdbNDgsIDUxLCA0MCwgMTUsIDEwXScsXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIF0sXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHRoaXMuc2hvd0xheWVyKCk7XHJcbiAgICAgICAgICAgIHRoaXMuX3Nob3dMaXN0KGRhdGFMaXN0KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB2YXIgc2VuZE9iaiA9IHtcclxuICAgICAgICAgICAgICAgIGdhbWVNb2RlbElkOiBHX1RZUEUuaHR0cF9nYW1lTW9kdWxlLmdyYWIsXHJcbiAgICAgICAgICAgICAgICBnYW1lUm9vbUlkOiBob21lSUQsXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHRoaXMuX3NlbmRSZXF1ZXN0KHNlbmRPYmosIGZ1bmN0aW9uIChkYXRhT2JqKSB7XHJcbiAgICAgICAgICAgICAgICBpZihkYXRhT2JqKXtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dMYXllcigpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3Nob3dMaXN0KGRhdGFPYmopO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LmJpbmQodGhpcykpO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgLy/lj5HpgIHmirzlrp3otbDlir/lm77kv6Hmga/nmoTor7fmsYJcclxuICAgIF9zZW5kUmVxdWVzdCA6IGZ1bmN0aW9uIChkYXRhT2JqLCBjYWxsRnVuYykge1xyXG4gICAgICAgIHZhciBzZW5kRGF0YSA9ICdnYW1lTW9kZWxJZD0nICsgZGF0YU9iai5nYW1lTW9kZWxJZCArICcmZ2FtZVJvb21JZD0nICsgZGF0YU9iai5nYW1lUm9vbUlkO1xyXG4gICAgICAgIEdHLmh0dHBNZ3Iuc2VuZEh0dHBSZXF1ZXN0KEdfRElBTE9HX1VSTC50cmVuZFVybCwgc2VuZERhdGEsIGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgIGlmKGRhdGEpe1xyXG4gICAgICAgICAgICAgICAgaWYgKGNhbGxGdW5jKSBjYWxsRnVuYyhkYXRhKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0uYmluZCh0aGlzKSk7XHJcbiAgICB9LFxyXG5cclxuXHJcbiAgICBfc2hvd0xpc3Q6IGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgaWYgKGRhdGEuY29kZSA9PSAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMubm9kZV9ub0RhdGEuZ2V0Q29tcG9uZW50KGNjLkxhYmVsKS5zdHJpbmcgPSBkYXRhLm1zZztcclxuICAgICAgICAgICAgdGhpcy5ub2RlX25vRGF0YS5hY3RpdmUgPSB0cnVlO1xyXG4gICAgICAgICAgICB0aGlzLm5vZGVfZGF0YS5hY3RpdmUgPSBmYWxzZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB2YXIgZGF0YUxpc3QgPSBkYXRhLmRhdGE7XHJcbiAgICAgICAgICAgIHRoaXMubm9kZV9ub0RhdGEuYWN0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHRoaXMubm9kZV9kYXRhLmFjdGl2ZSA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICAvL+WIt+aWsOeJjOWei+aVsOaNruS/oeaBr1xyXG4gICAgICAgICAgICB2YXIgcG9rZXJMaXN0ID0gdGhpcy5ub2RlX2RhdGEuY2hpbGRyZW47XHJcbiAgICAgICAgICAgIHZhciBwb2tlckRhdGE7XHJcbiAgICAgICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCBwb2tlckxpc3QubGVuZ3RoOyBpICsrKXtcclxuICAgICAgICAgICAgICAgIHBva2VyRGF0YSA9IGRhdGFMaXN0W2ldO1xyXG4gICAgICAgICAgICAgICAgaWYocG9rZXJEYXRhKXtcclxuICAgICAgICAgICAgICAgICAgICBwb2tlckxpc3RbaV0uYWN0aXZlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAvL+eJjOWei+eJm+WHoOaYvuekulxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3NldFBva2VyR3JvdXBJbmZvKHBva2VyRGF0YS5jbGllbnQsIHBva2VyTGlzdFtpXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy/og5zotJ/mmL7npLpcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9zZXRXaW5Pckxvc2UocGFyc2VJbnQocG9rZXJEYXRhLnByb2ZpdGFtb3VudCksIHBva2VyTGlzdFtpXSk7XHJcbiAgICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICBwb2tlckxpc3RbaV0uYWN0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgLy/mmL7npLrkuIDlia/mlrDljaHniYzkv6Hmga9cclxuICAgIF9zZXRQb2tlckdyb3VwSW5mbyA6IGZ1bmN0aW9uIChncm91cEluZm9MaXN0LCBwb2tlck5vZGVMaXN0KSB7XHJcbiAgICAgICAgdmFyIHBva2VySW5kZXgsIHBva2VySW5mbywgcG9rZXJMaXN0ID0gW107XHJcbiAgICAgICAgZ3JvdXBJbmZvTGlzdCA9IEpTT04ucGFyc2UoZ3JvdXBJbmZvTGlzdCk7XHJcbiAgICAgICAgZm9yKHZhciBpID0gMDsgaSA8IGdyb3VwSW5mb0xpc3QubGVuZ3RoOyBpICsrKXtcclxuICAgICAgICAgICAgcG9rZXJJbmRleCA9IGdyb3VwSW5mb0xpc3RbaV07XHJcbiAgICAgICAgICAgIHBva2VySW5mbyA9IEdfREFUQS5nZXRQb2tlckluZm8ocG9rZXJJbmRleCk7XHJcbiAgICAgICAgICAgIHBva2VyTGlzdC5wdXNoKHtmbG93OiBwb2tlckluZm8ucG9rZXJUeXBlLCBwb2tlclZhbHVlOiBwb2tlckluZm8ucG9rZXJWYWx1ZX0pO1xyXG4gICAgICAgICAgICBpZiAoaSA8IDMpIHtcclxuICAgICAgICAgICAgICAgIGlmIChwb2tlckluZm8ucG9rZXJWYWx1ZSA+IDEwKSBwb2tlckluZm8ucG9rZXJWYWx1ZSA9IDEwO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fYnVsbFJlc3VsdCArPSBwb2tlckluZm8ucG9rZXJWYWx1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoaSA9PSAzKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocG9rZXJJbmZvLnBva2VyVmFsdWUgPiAxMCkgcG9rZXJJbmZvLnBva2VyVmFsdWUgPSAxMDtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2J1bGxWYWx1ZSA9IHBva2VySW5mby5wb2tlclZhbHVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChpID09IDQpIHtcclxuICAgICAgICAgICAgICAgIGlmIChwb2tlckluZm8ucG9rZXJWYWx1ZSA+IDEwKSBwb2tlckluZm8ucG9rZXJWYWx1ZSA9IDEwO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fYnVsbFZhbHVlICs9IHBva2VySW5mby5wb2tlclZhbHVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuX3JlZnJlc2hQb2tlckdyb3VuZEluZm8ocG9rZXJMaXN0LCBwb2tlck5vZGVMaXN0KTtcclxuICAgIH0sXHJcbiAgICAvL+WIt+aWsOS4gOWJr+WNoeeJjOS/oeaBr1xyXG4gICAgX3JlZnJlc2hQb2tlckdyb3VuZEluZm86IGZ1bmN0aW9uIChwb2tlckxpc3QsIHBva2VyTm9kZUxpc3QpIHtcclxuICAgICAgICB2YXIgcG9rZXJOb2RlLFxyXG4gICAgICAgICAgICBidWxsVmFsdWUgPSB0aGlzLl9idWxsVmFsdWUsXHJcbiAgICAgICAgICAgIGJ1bGxSZXN1bHQgPSBwYXJzZUludCh0aGlzLl9idWxsUmVzdWx0KSxcclxuICAgICAgICAgICAgcG9rZXJDb250YWluZXIgPSBwb2tlck5vZGVMaXN0LmdldENoaWxkQnlOYW1lKHRoaXMuX3Bva2VyQ29udGFpbmVyTmFtZSksXHJcbiAgICAgICAgICAgIHJlc3VsdE5vZGUgPSBwb2tlck5vZGVMaXN0LmdldENoaWxkQnlOYW1lKHRoaXMuX3Bva2VyUmVzdWx0Tm9kZU5hbWUpO1xyXG4gICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCBwb2tlckxpc3QubGVuZ3RoICsgMTsgaSArKyl7XHJcbiAgICAgICAgICAgIGlmIChpIDwgNSAmJiBwb2tlckNvbnRhaW5lcikge1xyXG4gICAgICAgICAgICAgICAgLy/liLfmlrDljaHniYzkv6Hmga9cclxuICAgICAgICAgICAgICAgIHBva2VyTm9kZSA9IHBva2VyQ29udGFpbmVyLmNoaWxkcmVuW2ldO1xyXG4gICAgICAgICAgICAgICAgcG9rZXJOb2RlLmdldENvbXBvbmVudCh0aGlzLl9wb2tlckNvbXBOYW1lKS5zZXRQb2tlckluZm8ocG9rZXJMaXN0W2ldLmZsb3csIHBva2VyTGlzdFtpXS5wb2tlclZhbHVlLCB0cnVlKTtcclxuICAgICAgICAgICAgfWVsc2UgaWYgKGkgPT0gNSAmJiByZXN1bHROb2RlKSB7XHJcbiAgICAgICAgICAgICAgICAvL+aYvuekuueJm+WHoOS/oeaBr1xyXG4gICAgICAgICAgICAgICAgaWYgKGJ1bGxSZXN1bHQgJSAxMCA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYnVsbFZhbHVlID0gdGhpcy5fYnVsbFZhbHVlICUgMTA7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGJ1bGxWYWx1ZSA9PSAwKSBidWxsVmFsdWUgPSAxMDtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBidWxsVmFsdWUgPSAtMTtcclxuICAgICAgICAgICAgICAgIHJlc3VsdE5vZGUuZ2V0Q29tcG9uZW50KHRoaXMuX3Bva2VyUmVzdWx0Q29tcE5hbWUpLnNob3dQb2tlclJlc3VsdFZhbHVlKHBhcnNlSW50KGJ1bGxWYWx1ZSksIHRydWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuX2J1bGxWYWx1ZSA9IDA7XHJcbiAgICAgICAgdGhpcy5fYnVsbFJlc3VsdCA9IDA7XHJcbiAgICB9LFxyXG4gICAgLy/mmL7npLrog5zotJ/kv6Hmga9cclxuICAgIF9zZXRXaW5Pckxvc2U6IGZ1bmN0aW9uICh3aW5Pckxvc2UsIG5vZGUpIHtcclxuICAgICAgICB2YXIgbGFiZWxUZXh0LCBsYWJlbENvbG9yLCByZXN1bHROb2RlID0gbm9kZS5nZXRDaGlsZEJ5TmFtZSgncmVzdWx0VGV4dCcpO1xyXG4gICAgICAgIGlmKCFyZXN1bHROb2RlKSByZXR1cm47XHJcbiAgICAgICAgdGhpcy5fd2luT3JMb3NlTGFiZWwgPSByZXN1bHROb2RlLmdldENvbXBvbmVudChjYy5MYWJlbCk7XHJcbiAgICAgICAgdGhpcy5fd2luT3JMb3NlTm9kZSA9IHJlc3VsdE5vZGU7XHJcbiAgICAgICAgaWYgKHdpbk9yTG9zZSkgey8v5aSn5LqOMCDmmL7npLrog5zvvJvlsI/kuo4w5pi+56S66LSfXHJcbiAgICAgICAgICAgIGlmICh3aW5Pckxvc2UgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICBsYWJlbFRleHQgPSBHX0NISU5FU0Uud2luTWF0Y2g7XHJcbiAgICAgICAgICAgICAgICBsYWJlbENvbG9yID0gdGhpcy5fd2luQ29sb3I7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBsYWJlbFRleHQgPSBHX0NISU5FU0UubG9zZU1hdGNoO1xyXG4gICAgICAgICAgICAgICAgbGFiZWxDb2xvciA9IHRoaXMuX2xvc2VDb2xvcjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGxhYmVsVGV4dCA9IEdfQ0hJTkVTRS5ub3RJbnZvbHZlZE1hdGNoOy8v5pi+56S65pyq5Y+C5LiOXHJcbiAgICAgICAgICAgIGxhYmVsQ29sb3IgPSB0aGlzLl9ub3RNYXRjaENvbG9yO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLl93aW5Pckxvc2VMYWJlbC5zdHJpbmcgPSBsYWJlbFRleHQ7XHJcbiAgICAgICAgdGhpcy5fd2luT3JMb3NlTm9kZS5jb2xvciA9IGxhYmVsQ29sb3I7XHJcbiAgICB9LFxyXG4gICAgLy8gY2FsbGVkIGV2ZXJ5IGZyYW1lLCB1bmNvbW1lbnQgdGhpcyBmdW5jdGlvbiB0byBhY3RpdmF0ZSB1cGRhdGUgY2FsbGJhY2tcclxuICAgIC8vIHVwZGF0ZTogZnVuY3Rpb24gKGR0KSB7XHJcblxyXG4gICAgLy8gfSxcclxufSk7XHJcbiIsIi8v546p5a625YiX6KGo55qE55WM6Z2iXHJcblxyXG5cclxuY2MuQ2xhc3Moe1xyXG4gICAgZXh0ZW5kczogcmVxdWlyZSgnQmFzZURpYWxvZycpLFxyXG5cclxuICAgIHByb3BlcnRpZXM6IHtcclxuICAgICAgICBsYWJlbF9udWxsIDoge1xyXG4gICAgICAgICAgICBkZWZhdWx0IDogbnVsbCxcclxuICAgICAgICAgICAgdHlwZSA6IGNjLkxhYmVsLFxyXG4gICAgICAgICAgICBkaXNwbGF5TmFtZSA6ICfml6DmlbDmja7ml7bmmL7npLonXHJcbiAgICAgICAgfSxcclxuICAgIH0sXHJcblxyXG4gICAgLy8gdXNlIHRoaXMgZm9yIGluaXRpYWxpemF0aW9uXHJcbiAgICBvbkxvYWQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLl9zdXBlcignVUlfcGxheWVyTGlzdCcpO1xyXG5cclxuICAgICAgICB0aGlzLl9kZWFsZXJJdGVtQ29tcE5hbWUgPSAnT2JqX2RpYWxvZ1BsYXllckxpc3RDZWxsJztcclxuICAgICAgICB2YXIgZGF0YU9iaiA9IHtcclxuICAgICAgICAgICAgaXRlbVByZWZhYiA6IHRoaXMucHJlZmFiX2l0ZW0sXHJcbiAgICAgICAgICAgIGxpbmVOdW0gOiAzLFxyXG4gICAgICAgICAgICBzY3JvbGxUeXBlIDogR19UWVBFLnNjcm9sbFR5cGUuYmFnLFxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmNvbXBfaXRlbUNvbnRhaW5lci5zZXREYXRhKGRhdGFPYmopO1xyXG5cclxuICAgICAgICB0aGlzLmNvbXBfc2Nyb2xsID0gdGhpcy5jb21wX2l0ZW1Db250YWluZXIuZ2V0U2Nyb2xsVmlldygpO1xyXG4gICAgICAgIHRoaXMuY29tcF9zY3JvbGwubm9kZS5vbignc2Nyb2xsLXRvLWJvdHRvbScsIHRoaXMuX3Njcm9sbFRvQm90dG9tLCB0aGlzKTtcclxuICAgIH0sXHJcblxyXG4gICAgc2V0RGF0YTogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgaWYoR19Db25maWdfY29tbW9uLmlzTG9jYWwpe1xyXG4gICAgICAgICAgICB2YXIgbmV0RGF0YSA9IHRoaXMuX2dldExvY2FsRGF0YSgpO1xyXG4gICAgICAgICAgICB0aGlzLl9zZXROZXREYXRhKG5ldERhdGEpO1xyXG4gICAgICAgIH1lbHNlIHtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuY29tcF9pdGVtQ29udGFpbmVyLmNsZWFySXRlbXMoLSAxKTtcclxuICAgICAgICAgICAgR0cuaHR0cE1nci5zZW5kSHR0cFJlcXVlc3QoR19ESUFMT0dfVVJMLnBsYXllckxpc3RVcmwsIG51bGwsIGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICBpZihkYXRhKXtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9zZXROZXREYXRhKGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LmJpbmQodGhpcykpO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgX3NldE5ldERhdGEgOiBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgIHRoaXMuc2hvd0xheWVyKCk7XHJcbiAgICAgICAgdmFyIGRhdGFMaXN0ID0gZGF0YS5kYXRhLFxyXG4gICAgICAgICAgICBzdHI7XHJcbiAgICAgICAgaWYgKGRhdGEuY29kZSA9PSAnMCcpIHtcclxuICAgICAgICAgICAgc3RyID0gZGF0YS5tc2c7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgc3RyID0gJyc7XHJcbiAgICAgICAgICAgIHRoaXMuX25ldERhdGFMaXN0ID0gZGF0YUxpc3Q7XHJcbiAgICAgICAgICAgIHRoaXMuX3Nob3dMaXN0QnlUb3VjaCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLl9zZXROdWxsKHN0cik7XHJcbiAgICB9LFxyXG5cclxuICAgIF9zaG93TGlzdEJ5VG91Y2ggOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIG9uY2VOdW0gPSAxNTtcclxuICAgICAgICB2YXIgb25jZUxpc3QgPSB0aGlzLl9uZXREYXRhTGlzdC5zcGxpY2UoMCwgb25jZU51bSk7XHJcbiAgICAgICAgaWYoIW9uY2VMaXN0IHx8IG9uY2VMaXN0Lmxlbmd0aCA8IDEpIHJldHVybjtcclxuICAgICAgICB2YXIgb25lRGF0YSwgaXRlbSwgY29tcCwgc2hvd051bSA9IHRoaXMuY29tcF9pdGVtQ29udGFpbmVyLmdldFNob3dJdGVtTnVtKCk7XHJcbiAgICAgICAgZm9yKHZhciBpID0gMDsgaSA8IG9uY2VOdW07IGkgKyspe1xyXG4gICAgICAgICAgICBvbmVEYXRhID0gb25jZUxpc3RbaV07XHJcbiAgICAgICAgICAgIGlmKG9uZURhdGEpe1xyXG4gICAgICAgICAgICAgICAgaXRlbSA9IHRoaXMuY29tcF9pdGVtQ29udGFpbmVyLmdldEl0ZW1CeUluZGV4KHNob3dOdW0raSk7XHJcbiAgICAgICAgICAgICAgICBpZihpdGVtKXtcclxuICAgICAgICAgICAgICAgICAgICBjb21wID0gaXRlbS5nZXRDb21wb25lbnQodGhpcy5fZGVhbGVySXRlbUNvbXBOYW1lKTtcclxuICAgICAgICAgICAgICAgICAgICBjb21wLnNldERhdGEob25lRGF0YSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5jb21wX2l0ZW1Db250YWluZXIuY2xlYXJJdGVtcyhzaG93TnVtICsgaSAtIDEpO1xyXG4gICAgfSxcclxuXHJcbiAgICBfc2Nyb2xsVG9Cb3R0b20gOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5fc2hvd0xpc3RCeVRvdWNoKCk7XHJcbiAgICB9LFxyXG5cclxuICAgIF9zZXROdWxsIDogZnVuY3Rpb24gKG1zZykge1xyXG4gICAgICAgIHRoaXMubGFiZWxfbnVsbC5zdHJpbmcgPSBtc2c7XHJcbiAgICB9LFxyXG4gICAgaGlkZUxheWVyIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuX3N1cGVyKCk7XHJcbiAgICB9LFxyXG5cclxuICAgIF9nZXRMb2NhbERhdGEgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIG5ldERhdGEgPSB7fTtcclxuICAgICAgICBuZXREYXRhLmRhdGEgPSBbXTtcclxuICAgICAgICBuZXREYXRhLmNvZGUgPSBHX1RPT0wuZ2V0UmFuZG9tQm9vbCgpID8gMCA6IDE7XHJcbiAgICAgICAgaWYobmV0RGF0YS5jb2RlID09IDEpe1xyXG4gICAgICAgICAgICAvLyB2YXIgc2hvd051bSA9IE1hdGguZmxvb3IoY2MucmFuZG9tMFRvMSgpICogMTApO1xyXG4gICAgICAgICAgICB2YXIgc2hvd051bSA9IDQ3O1xyXG4gICAgICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgc2hvd051bTsgaSArKyl7XHJcbiAgICAgICAgICAgICAgICB2YXIgcGxheWVySW5mbyA9IHtcclxuICAgICAgICAgICAgICAgICAgICBhdmF0YXJVcmwgOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICBuaWNrbmFtZSA6ICduYW1lXycraSxcclxuICAgICAgICAgICAgICAgICAgICBjb2luIDogLTMgKyBNYXRoLmZsb29yKGNjLnJhbmRvbTBUbzEoKSoxMCksXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBuZXREYXRhLmRhdGEucHVzaChwbGF5ZXJJbmZvKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhuZXREYXRhLmRhdGEpXHJcbiAgICAgICAgfVxyXG4gICAgICAgIG5ldERhdGEubXNnID0gJ3JlcXVlc3QgZXJyb3InXHJcbiAgICAgICAgcmV0dXJuIG5ldERhdGFcclxuICAgIH0sXHJcblxyXG4gICAgLy8gY2FsbGVkIGV2ZXJ5IGZyYW1lLCB1bmNvbW1lbnQgdGhpcyBmdW5jdGlvbiB0byBhY3RpdmF0ZSB1cGRhdGUgY2FsbGJhY2tcclxuICAgIC8vIHVwZGF0ZTogZnVuY3Rpb24gKGR0KSB7XHJcblxyXG4gICAgLy8gfSxcclxufSk7XHJcbiIsIi8v546p5a626K6w5b2V55WM6Z2iXHJcbmNjLkNsYXNzKHtcclxuICAgIGV4dGVuZHM6IHJlcXVpcmUoJ0Jhc2VEaWFsb2cnKSxcclxuXHJcbiAgICBwcm9wZXJ0aWVzOiB7XHJcbiAgICAgICAgX2xhc3RUb3VjaEJ0biA6IG51bGwsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5LiK5qyh54K55Ye755qE5oyJ6ZKuXHJcbiAgICAgICAgX2RpY3RfY2FjaGVEYXRhIDogbnVsbCwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v57yT5a2Y5pWw5o2uXHJcbiAgICAgICAgX2ZpcnN0U2hvd051bSA6IG51bGwsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v6aaW5qyh5pi+56S655qE5p2h55uu5pWwXHJcbiAgICAgICAgX2N1ckRhdGVDbGFzcyA6IG51bGwsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5b2T5YmN5pi+56S655qE5pWw5o2u5pe26Ze0LOavlOWmguW9k+WkqVxyXG4gICAgICAgIF9kaWN0X2xpc3RGdWxsIDogbnVsbCwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+afkOWkqeaVsOaNruaYr+WQpuW3sue7j+WFqOmDqOivt+axglxyXG5cclxuICAgICAgICBsYWJlbF9udWxsIDoge1xyXG4gICAgICAgICAgICBkZWZhdWx0IDogbnVsbCxcclxuICAgICAgICAgICAgdHlwZSA6IGNjLkxhYmVsLFxyXG4gICAgICAgICAgICBkaXNwbGF5TmFtZSA6ICfml6DmlbDmja7ml7bmmL7npLonXHJcbiAgICAgICAgfSxcclxuICAgICAgICBjb21wX3Njcm9sbCA6IHtcclxuICAgICAgICAgICAgZGVmYXVsdCA6IG51bGwsXHJcbiAgICAgICAgICAgIHR5cGUgOiBjYy5TY3JvbGxWaWV3LFxyXG4gICAgICAgICAgICBkaXNwbGF5TmFtZSA6ICfmu5rliqjnmoTlrrnlmagnXHJcbiAgICAgICAgfSxcclxuICAgIH0sXHJcblxyXG4gICAgLy8gdXNlIHRoaXMgZm9yIGluaXRpYWxpemF0aW9uXHJcbiAgICBvbkxvYWQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLl9zdXBlcigpO1xyXG4gICAgICAgIHRoaXMuX2RlYWxlckl0ZW1Db21wTmFtZSA9ICdPYmpfZGlhbG9nUmVjb3JkQ2VsbCc7XHJcbiAgICAgICAgdGhpcy5fY29tcF9leGNoYW5nUGFnZXMgPSB0aGlzLmdldENvbXBvbmVudCgnUGFydF9kaWFsb2dfZXhjaGFuZ2VQYWdlcycpO1xyXG5cclxuICAgICAgICB0aGlzLl9maXJzdFNob3dOdW0gPSA2O1xyXG4gICAgICAgIHRoaXMuX2RpY3RfY2FjaGVEYXRhID0ge307XHJcbiAgICAgICAgdGhpcy5fZGljdF9saXN0RnVsbCA9IHt9O1xyXG5cclxuICAgICAgICB2YXIgZGF0YU9iaiA9IEdfT0JKLmRhdGFfZGlhbG9nX2V4Y2hhbmdlUGFnZXMoKTtcclxuICAgICAgICBkYXRhT2JqLmxlZnREZWFsU2Nyb2xsQ29tcCA9IHRoaXMuY29tcF9sZWZ0QnRuQ29udGFpbmVyO1xyXG4gICAgICAgIGRhdGFPYmoubGVmdFByZWZhYiA9IHRoaXMucHJlZmFiX2xlZnRCdXR0b247XHJcbiAgICAgICAgZGF0YU9iai5sZWZ0Q29udGVudExpc3QgPSBHX0NISU5FU0UuZXhjaGFuZ2VQYWdlTGVmdDtcclxuICAgICAgICBkYXRhT2JqLmxlZnRDbGlja0Z1bmMgPSB0aGlzLm9uQ2xpY2tfbGVmdEJ0bi5iaW5kKHRoaXMpO1xyXG4gICAgICAgIGRhdGFPYmoucmlnaHREZWFsU2Nyb2xsQ29tcCA9IHRoaXMuY29tcF9pdGVtQ29udGFpbmVyO1xyXG4gICAgICAgIGRhdGFPYmouaXNTdG9wU2V0UmlnaHRDb250ZW50ID0gdHJ1ZTtcclxuICAgICAgICAvL2RhdGFPYmoucmlnaHRQcmVmYWJMaXN0ID0gW3RoaXMucHJlZmFiX2ludHJvZHVjZSwgdGhpcy5wcmVmYWJfYnVsbDEwMCwgdGhpcy5wcmVmYWJfZ3JhYl07XHJcbiAgICAgICAgdGhpcy5fY29tcF9leGNoYW5nUGFnZXMuaW5pdERhdGEoZGF0YU9iaik7XHJcbiAgICAgICAgdGhpcy5fY29tcF9leGNoYW5nUGFnZXMuZGl5Q2xpY2tTaG93KCk7XHJcblxyXG4gICAgICAgIC8v5Y+z6L655rua5Yqo5a655ZmoXHJcbiAgICAgICAgdmFyIGRhdGFPYmogPSB7XHJcbiAgICAgICAgICAgIGl0ZW1QcmVmYWIgOiB0aGlzLnByZWZhYl9pdGVtLFxyXG4gICAgICAgICAgICBzY3JvbGxUeXBlIDogR19UWVBFLnNjcm9sbFR5cGUudmVydGljYWwsXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuY29tcF9pdGVtQ29udGFpbmVyLnNldERhdGEoZGF0YU9iaik7XHJcblxyXG4gICAgICAgIHRoaXMuY29tcF9zY3JvbGwubm9kZS5vbignc2Nyb2xsLXRvLWJvdHRvbScsIHRoaXMuX3Njcm9sbFRvQm90dG9tLCB0aGlzKTtcclxuICAgIH0sXHJcblxyXG4gICAgc2V0RGF0YSA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLl9jb21wX2V4Y2hhbmdQYWdlcy5zaG93RGVmYXVsdCh0cnVlKTtcclxuICAgIH0sXHJcblxyXG4gICAgLy/ngrnlh7vlt6bovrnnmoTpgInpobnmjInpkq5cclxuICAgIG9uQ2xpY2tfbGVmdEJ0biA6IGZ1bmN0aW9uICh0eXBlKSB7XHJcbiAgICAgICAgaWYoR19Db25maWdfY29tbW9uLmlzTG9jYWwpIHtcclxuICAgICAgICAgICAgdGhpcy5zaG93TGF5ZXIoKTtcclxuICAgICAgICAgICAgdGhpcy5fdXBkYXRlQm90dG9tKHRoaXMuX2dldExvY2FsUmVjb3JkRGF0YSgpLCB0cnVlKTtcclxuICAgICAgICAgICAgdGhpcy5fY29tcF9leGNoYW5nUGFnZXMuZG9uZUNsaWNrU2hvdyh0eXBlKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5fZ2V0RGF0YUJ5RGF0ZSh0eXBlLCAxLCBmdW5jdGlvbiAoaW5mb0xpc3QpIHtcclxuICAgICAgICAgICAgdGhpcy5zaG93TGF5ZXIoKTtcclxuICAgICAgICAgICAgdGhpcy5fY3VyRGF0ZUNsYXNzID0gdHlwZTtcclxuICAgICAgICAgICAgdGhpcy5fY29tcF9leGNoYW5nUGFnZXMuZG9uZUNsaWNrU2hvdyh0eXBlKTtcclxuICAgICAgICAgICAgdGhpcy5fdXBkYXRlQm90dG9tKGluZm9MaXN0LCB0cnVlKTtcclxuICAgICAgICAgICAgLy8gaWYodGhpcy5jb21wX2l0ZW1Db250YWluZXIuZ2V0U2hvd0l0ZW1OdW0oKSAmJiBpbmZvTGlzdCAmJiBpbmZvTGlzdC5sZW5ndGggPCB0aGlzLl9maXJzdFNob3dOdW0pe1xyXG4gICAgICAgICAgICAvLyAgICAgLy/or6XlpKnnmoTmlbDmja7lt7Lnu4/lhajpg6jmmL7npLpcclxuICAgICAgICAgICAgLy8gICAgIHRoaXMuX2RpY3RfbGlzdEZ1bGxbdHlwZV0gPSB0cnVlO1xyXG4gICAgICAgICAgICAvLyB9XHJcbiAgICAgICAgfS5iaW5kKHRoaXMpKTtcclxuICAgIH0sXHJcblxyXG4gICAgLy/ojrflj5bmlbDmja5cclxuICAgIF9nZXREYXRhQnlEYXRlIDogZnVuY3Rpb24gKGRhdGVDbGFzcywgcGFnZU5vLCBjYWxsRnVuYykge1xyXG4gICAgICAgIHZhciBuZWVkRGF0YSA9IHRoaXMuX2RpY3RfY2FjaGVEYXRhW2RhdGVDbGFzc107XHJcbiAgICAgICAgaWYobmVlZERhdGEpe1xyXG4gICAgICAgICAgICB2YXIgaW5mb0xpc3QgPSBbXTtcclxuICAgICAgICAgICAgaWYodGhpcy5fZGljdF9jYWNoZURhdGFbZGF0ZUNsYXNzXS5kYXRhKXtcclxuICAgICAgICAgICAgICAgIHZhciBhbGxDYWNoZUxpc3QgPSB0aGlzLl9kaWN0X2NhY2hlRGF0YVtkYXRlQ2xhc3NdLmRhdGEuZGF0YXMuY29uY2F0KFtdKTtcclxuICAgICAgICAgICAgICAgIGluZm9MaXN0ID0gYWxsQ2FjaGVMaXN0LnNwbGljZSh0aGlzLl9maXJzdFNob3dOdW0gKiAocGFnZU5vLTEpLCB0aGlzLl9maXJzdFNob3dOdW0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmKE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChpbmZvTGlzdCkgPT09ICdbb2JqZWN0IEFycmF5XScpe1xyXG4gICAgICAgICAgICAgICAgaWYoY2FsbEZ1bmMpIGNhbGxGdW5jKGluZm9MaXN0KTtcclxuICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9yZXF1ZXN0TmV0RGF0YShkYXRlQ2xhc3MsIHBhZ2VObywgY2FsbEZ1bmMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIHRoaXMuX3JlcXVlc3ROZXREYXRhKGRhdGVDbGFzcywgcGFnZU5vLCBjYWxsRnVuYyk7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIC8v5Y+R6YCB6K6w5b2V5L+h5oGv55qE6K+35rGCXHJcbiAgICBfcmVxdWVzdE5ldERhdGEgOiBmdW5jdGlvbiAoZGF0ZUNsYXNzLCBwYWdlTm8sIGNhbGxGdW5jKSB7XHJcbiAgICAgICAgaWYodGhpcy5fZGljdF9saXN0RnVsbFtkYXRlQ2xhc3NdKSByZXR1cm47XHJcbiAgICAgICAgdmFyIHNlbmRPYmogPSBHX09CSi5kYXRhX3JlcXVlc3RSZWNvcmQoKTtcclxuICAgICAgICBzZW5kT2JqLmdhbWVJZCA9IEdHLmdldFBsYXllcigpLmdldEdhbWVJRCgpO1xyXG4gICAgICAgIHNlbmRPYmouZGF0ZUNsYXNzID0gZGF0ZUNsYXNzO1xyXG4gICAgICAgIHNlbmRPYmoucGFnZVNpemUgPSB0aGlzLl9maXJzdFNob3dOdW07XHJcbiAgICAgICAgc2VuZE9iai5wYWdlTm8gPSBwYWdlTm87XHJcblxyXG4gICAgICAgIC8vZ2FtZUlkIO+8miDlsZ7kuo7pgqPmrL7muLjmiI/vvJsgZGF0ZUNsYXNz77ya5pel5pyf77yIMOaYr+W9k+WkqSwxLDLvvInvvJtwYWdlU2l6Ze+8muW9k+WJjemhtemdouadoeebruaAu+aVsO+8m3BhZ2VOb3fvvJrnrKzlh6DpobXvvJtcclxuICAgICAgICB2YXIgc2VuZFN0ciA9IFwiZ2FtZUlkPVwiK3NlbmRPYmouZ2FtZUlkK1wiJmRhdGVDbGFzcz1cIitzZW5kT2JqLmRhdGVDbGFzcytcIiZwYWdlU2l6ZT1cIitzZW5kT2JqLnBhZ2VTaXplK1wiJnBhZ2VObz1cIitzZW5kT2JqLnBhZ2VObztcclxuICAgICAgICBHRy5odHRwTWdyLnNlbmRIdHRwUmVxdWVzdChHX0RJQUxPR19VUkwucmVjb3JkVXJsLCBzZW5kU3RyLCBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICBpZihkYXRhKXtcclxuICAgICAgICAgICAgICAgIHZhciBkYXRhTGlzdCA9IHRoaXMuX2NhY2hlTmV0RGF0YShkYXRlQ2xhc3MsIGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgaWYoZGF0YUxpc3QgJiYgY2FsbEZ1bmMpIGNhbGxGdW5jKGRhdGFMaXN0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0uYmluZCh0aGlzKSk7XHJcbiAgICB9LFxyXG5cclxuICAgIC8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT3mnaHnm67mu5rliqjoh6rliqjlu7bkvLhcclxuXHJcbiAgICAvL+e8k+WtmOWIl+ihqFxyXG4gICAgX2NhY2hlTmV0RGF0YSA6IGZ1bmN0aW9uIChkYXRlQ2xhc3MsIG5ldERhdGEpIHtcclxuICAgICAgICB2YXIgZGF0YUxpc3QgPSBbXTtcclxuICAgICAgICBpZihuZXREYXRhLmNvZGUgIT0gMSB8fCAhbmV0RGF0YS5kYXRhLmRhdGFzIHx8IG5ldERhdGEuZGF0YS5kYXRhcy5sZW5ndGggPCAxKXtcclxuICAgICAgICAgICAgLy8gdGhpcy5fbm9uZVRpcCA9IG5ldERhdGEubXNnO1xyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICBkYXRhTGlzdCA9IG5ldERhdGEuZGF0YS5kYXRhcztcclxuICAgICAgICAgICAgaWYodGhpcy5fZGljdF9jYWNoZURhdGFbZGF0ZUNsYXNzXSl7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9kaWN0X2NhY2hlRGF0YVtkYXRlQ2xhc3NdLmNvZGUgPSBuZXREYXRhLmNvZGU7XHJcbiAgICAgICAgICAgICAgICBpZih0aGlzLl9kaWN0X2NhY2hlRGF0YVtkYXRlQ2xhc3NdLmRhdGEpe1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2RpY3RfY2FjaGVEYXRhW2RhdGVDbGFzc10uZGF0YS5kYXRhcyA9IHRoaXMuX2RpY3RfY2FjaGVEYXRhW2RhdGVDbGFzc10uZGF0YS5kYXRhcy5jb25jYXQoZGF0YUxpc3QpO1xyXG4gICAgICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fZGljdF9jYWNoZURhdGFbZGF0ZUNsYXNzXS5kYXRhID0gbmV0RGF0YS5kYXRhO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmKCF0aGlzLl9kaWN0X2NhY2hlRGF0YVtkYXRlQ2xhc3NdKSB0aGlzLl9kaWN0X2NhY2hlRGF0YVtkYXRlQ2xhc3NdID0gbmV0RGF0YTtcclxuICAgICAgICByZXR1cm4gZGF0YUxpc3RcclxuICAgIH0sXHJcblxyXG4gICAgLy/lvZPnjqnlrrbmu5rliqjliLDlupXpg6hcclxuICAgIF9zY3JvbGxUb0JvdHRvbSA6IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgICAgICB2YXIgc2hvd0l0ZW1OdW0gPSB0aGlzLmNvbXBfaXRlbUNvbnRhaW5lci5nZXRTaG93SXRlbU51bSgpO1xyXG4gICAgICAgIHRoaXMuX2dldERhdGFCeURhdGUodGhpcy5fY3VyRGF0ZUNsYXNzLCB0aGlzLmNvbXBfaXRlbUNvbnRhaW5lci5nZXRQYWdlTm9CeU51bShzaG93SXRlbU51bSsxLCB0aGlzLl9maXJzdFNob3dOdW0pLCBmdW5jdGlvbiAoaW5mb0xpc3QpIHtcclxuICAgICAgICAgICAgc2VsZi5fdXBkYXRlQm90dG9tKGluZm9MaXN0KTtcclxuICAgICAgICB9KTtcclxuICAgIH0sXHJcblxyXG4gICAgLy/lvZNzY3JvbGzmu5rliqjliLDlupXovrkgIGlzUmVzdGFydCA6IOaYr+WQpuS7juesrOS4gOS4quW8gOWni1xyXG4gICAgX3VwZGF0ZUJvdHRvbSA6IGZ1bmN0aW9uIChpbmZvTGlzdCwgaXNSZXN0YXJ0KSB7XHJcbiAgICAgICAgdmFyIGl0ZW0sIGNvbXAsIGluZGV4ID0gMCwgcGxheWVySW5mbywgaXRlbU51bSA9IHRoaXMuY29tcF9pdGVtQ29udGFpbmVyLmdldFNob3dJdGVtTnVtKCk7XHJcbiAgICAgICAgaWYoaXNSZXN0YXJ0KSBpdGVtTnVtID0gMDtcclxuICAgICAgICBmb3IgKHZhciBpID0gaXRlbU51bTsgaSA8IChpdGVtTnVtICsgdGhpcy5fZmlyc3RTaG93TnVtKTsgaSsrKSB7XHJcbiAgICAgICAgICAgIHBsYXllckluZm8gPSBpbmZvTGlzdFtpbmRleF07XHJcbiAgICAgICAgICAgIGlmKCFwbGF5ZXJJbmZvKXtcclxuICAgICAgICAgICAgICAgIC8v5aaC5p6c5rKh5pyJ546p5a625pWw5o2u5YiZ57uI5q2i77yM5LiN6KaB5Ye6546w5pat5bGCXHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpdGVtID0gdGhpcy5jb21wX2l0ZW1Db250YWluZXIuZ2V0SXRlbUJ5SW5kZXgoaSk7XHJcbiAgICAgICAgICAgIGlmKGl0ZW0pe1xyXG4gICAgICAgICAgICAgICAgY29tcCA9IGl0ZW0uZ2V0Q29tcG9uZW50KHRoaXMuX2RlYWxlckl0ZW1Db21wTmFtZSk7XHJcbiAgICAgICAgICAgICAgICBjb21wLnNldERhdGEocGxheWVySW5mbyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaW5kZXggKz0gMTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy/lpoLmnpzmmK/nrKzkuIDpobXvvIzpnIDopoHlsIblpJrkvZnnmoTmnaHnm67muIXnkIZcclxuICAgICAgICBpZihpc1Jlc3RhcnQpIHtcclxuICAgICAgICAgICAgdGhpcy5jb21wX2l0ZW1Db250YWluZXIuY2xlYXJJdGVtcyhpbmZvTGlzdC5sZW5ndGggLSAxKTtcclxuICAgICAgICAgICAgdGhpcy5fc2Nyb2xsVG9VcCgpO1xyXG4gICAgICAgICAgICBpZihpbmZvTGlzdC5sZW5ndGggPCAxKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9zZXROdWxsKHRoaXMuX2RpY3RfY2FjaGVEYXRhW3RoaXMuX2N1ckRhdGVDbGFzc10ubXNnKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3NldE51bGwoJycpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8v5qOA5rWL6K+l6aG15pWw5o2u5piv5ZCm5ruh5YC8XHJcbiAgICAgICAgaWYoaW5mb0xpc3QubGVuZ3RoIDwgdGhpcy5fZmlyc3RTaG93TnVtKXtcclxuICAgICAgICAgICAgdGhpcy5fZGljdF9saXN0RnVsbFt0aGlzLl9jdXJEYXRlQ2xhc3NdID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIC8v6KeG5Zu+5YaF5a655bCG5Zyo6KeE5a6a5pe26Ze05YaF5rua5Yqo5Yiw6KeG5Zu+6aG26YOo44CCXHJcbiAgICBfc2Nyb2xsVG9VcCA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLmNvbXBfc2Nyb2xsLnNjcm9sbFRvVG9wKDAuMik7XHJcbiAgICB9LFxyXG5cclxuICAgIC8v5YGa56m655qE5pi+56S6XHJcbiAgICBfc2V0TnVsbCA6IGZ1bmN0aW9uIChtc2cpIHtcclxuICAgICAgICBpZihPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobXNnKSAhPT0gJ1tvYmplY3QgU3RyaW5nXScpe1xyXG4gICAgICAgICAgICBtc2cgPSAncmVxdWVzdCB0aW1lb3V0ISdcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5sYWJlbF9udWxsLnN0cmluZyA9IG1zZztcclxuICAgIH0sXHJcblxyXG4gICAgLy/ojrflj5bmnKzlnLDmlbDmja5cclxuICAgIF9nZXRMb2NhbFJlY29yZERhdGEgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGN1ckxpc3QgPSBbXTtcclxuICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgNzsgaSArKyl7XHJcbiAgICAgICAgICAgIHZhciBjdXJPYmogPSB7XHJcbiAgICAgICAgICAgICAgICAnY29uZmlybXRpbWUnOicyMDA3LzEvMScsLy/lhYXlgLzml7bpl7RcclxuICAgICAgICAgICAgICAgICdnYW1lbW9kZWxuYW1lJzon57uP5YW4JywvL+aIv+mXtOexu+Wei1xyXG4gICAgICAgICAgICAgICAgJ2dhbWVyb29tbmFtZSc6J+aIv+mXtCcraSwvL+aIv+mXtOWQjVxyXG4gICAgICAgICAgICAgICAgJ2VmZmVjdGl2ZWFtb3VudCc6IDEwMDAsLy/mirzms6jph5Hpop1cclxuICAgICAgICAgICAgICAgICdwcm9maXRhbW91bnQnOjEyMyAqIChjYy5yYW5kb20wVG8xKCkgPiAwLjUgPyAxIDogLTEpLC8v57uT5p6cXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY3VyTGlzdC5wdXNoKGN1ck9iaik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGN1ckxpc3RbMF0ucHJvZml0YW1vdW50ID0gLTUwMDA7XHJcbiAgICAgICAgY3VyTGlzdFsxXS5wcm9maXRhbW91bnQgPSAtMTAwMDA7XHJcbiAgICAgICAgcmV0dXJuIGN1ckxpc3RcclxuICAgIH0sXHJcblxyXG4gICAgLy8gY2FsbGVkIGV2ZXJ5IGZyYW1lLCB1bmNvbW1lbnQgdGhpcyBmdW5jdGlvbiB0byBhY3RpdmF0ZSB1cGRhdGUgY2FsbGJhY2tcclxuICAgIC8vIHVwZGF0ZTogZnVuY3Rpb24gKGR0KSB7XHJcblxyXG4gICAgLy8gfSxcclxufSk7IiwiLy/miL/pl7TlhoXnmoTop4TliJnmmL7npLpcclxuXHJcblxyXG5jYy5DbGFzcyh7XHJcbiAgICBleHRlbmRzOiByZXF1aXJlKCdCYXNlRGlhbG9nJyksXHJcblxyXG4gICAgcHJvcGVydGllczoge1xyXG4gICAgICAgIHByZWZhYl9CdWxsMTAwIDoge1xyXG4gICAgICAgICAgICBkZWZhdWx0IDogbnVsbCxcclxuICAgICAgICAgICAgdHlwZSA6IGNjLlByZWZhYixcclxuICAgICAgICAgICAgZGlzcGxheU5hbWUgOiAn55m+5Lq66KeE5YiZ5YaF5a65J1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgcHJlZmFiX2dyYWIgOiB7XHJcbiAgICAgICAgICAgIGRlZmF1bHQgOiBudWxsLFxyXG4gICAgICAgICAgICB0eXBlIDogY2MuUHJlZmFiLFxyXG4gICAgICAgICAgICBkaXNwbGF5TmFtZSA6ICfmirzlrp3op4TliJnlhoXlrrknXHJcbiAgICAgICAgfSxcclxuICAgIH0sXHJcblxyXG4gICAgLy8gdXNlIHRoaXMgZm9yIGluaXRpYWxpemF0aW9uXHJcbiAgICBvbkxvYWQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLl9zdXBlcignVUlfcnVsZXNJbkhvbWUnKTtcclxuICAgICAgICB0aGlzLl9ydWxlc0NvbnRlbnQgPSBbdGhpcy5wcmVmYWJfQnVsbDEwMCwgdGhpcy5wcmVmYWJfZ3JhYl07XHJcbiAgICB9LFxyXG5cclxuICAgIHNldERhdGEgOiBmdW5jdGlvbiAobnVtKSB7XHJcbiAgICAgICAgdGhpcy5faW5pdFJ1bGVzQ29udGVudChudW0pO1xyXG4gICAgfSxcclxuXHJcbiAgICAvL+WIneWni+WMluinhOWImeWGheWuuVxyXG4gICAgX2luaXRSdWxlc0NvbnRlbnQgOiBmdW5jdGlvbiAobnVtKSB7XHJcbiAgICAgICAgdmFyIGl0ZW0gPSBjYy5pbnN0YW50aWF0ZSh0aGlzLl9ydWxlc0NvbnRlbnRbbnVtIC0gMV0pO1xyXG4gICAgICAgIGl0ZW0ucGFyZW50ID0gdGhpcy5jb21wX2l0ZW1Db250YWluZXIubm9kZTtcclxuXHJcbiAgICAgICAgaXRlbS5hY3RpdmUgPSB0cnVlO1xyXG4gICAgfSxcclxuICAgIGhpZGVMYXllciA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLl9zdXBlcigpO1xyXG4gICAgfSxcclxuXHJcbiAgICAvLyBjYWxsZWQgZXZlcnkgZnJhbWUsIHVuY29tbWVudCB0aGlzIGZ1bmN0aW9uIHRvIGFjdGl2YXRlIHVwZGF0ZSBjYWxsYmFja1xyXG4gICAgLy8gdXBkYXRlOiBmdW5jdGlvbiAoZHQpIHtcclxuXHJcbiAgICAvLyB9LFxyXG59KTtcclxuIiwiLy/op4TliJnnlYzpnaJcclxuY2MuQ2xhc3Moe1xyXG4gICAgZXh0ZW5kczogcmVxdWlyZSgnQmFzZURpYWxvZycpLFxyXG5cclxuICAgIHByb3BlcnRpZXM6IHtcclxuICAgICAgICBfcnVsZXNDb250ZW50IDogbnVsbCwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5omA5pyJ6aKE5Yi25L2TXHJcbiAgICAgICAgX2RpY3RfcnVsZVBhZ2UgOiBudWxsLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+inhOWImemhtemdolxyXG4gICAgICAgIF9sYXN0UGFnZSA6IG51bGwsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/kuIrkuIDkuKrmiZPlvIDnmoTop4TliJnpobXpnaJcclxuICAgICAgICBfbGFzdEluZGV4IDogbnVsbCwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5LiK5LiA5Liq5omT5byA55qE6KeE5YiZ6aG16Z2i55qE57Si5byVXHJcblxyXG4gICAgICAgIHByZWZhYl9pbnRyb2R1Y2UgOiB7XHJcbiAgICAgICAgICAgIGRlZmF1bHQgOiBudWxsLFxyXG4gICAgICAgICAgICB0eXBlIDogY2MuUHJlZmFiLFxyXG4gICAgICAgICAgICBkaXNwbGF5TmFtZSA6ICfop4TliJnnroDku4vpooTliLbkvZMnXHJcbiAgICAgICAgfSxcclxuICAgICAgICBwcmVmYWJfYnVsbDEwMCA6IHtcclxuICAgICAgICAgICAgZGVmYXVsdCA6IG51bGwsXHJcbiAgICAgICAgICAgIHR5cGUgOiBjYy5QcmVmYWIsXHJcbiAgICAgICAgICAgIGRpc3BsYXlOYW1lIDogJ+eZvuS6uuinhOWImemihOWItuS9kydcclxuICAgICAgICB9LFxyXG4gICAgICAgIHByZWZhYl9ncmFiIDoge1xyXG4gICAgICAgICAgICBkZWZhdWx0IDogbnVsbCxcclxuICAgICAgICAgICAgdHlwZSA6IGNjLlByZWZhYixcclxuICAgICAgICAgICAgZGlzcGxheU5hbWUgOiAn5oq85a6d6KeE5YiZ6aKE5Yi25L2TJ1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgLy8gdXNlIHRoaXMgZm9yIGluaXRpYWxpemF0aW9uXHJcbiAgICBvbkxvYWQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLl9zdXBlcigpO1xyXG5cclxuICAgICAgICB0aGlzLl9jb21wX2V4Y2hhbmdQYWdlcyA9IHRoaXMuZ2V0Q29tcG9uZW50KCdQYXJ0X2RpYWxvZ19leGNoYW5nZVBhZ2VzJyk7XHJcblxyXG4gICAgICAgIHZhciBkYXRhT2JqID0gR19PQkouZGF0YV9kaWFsb2dfZXhjaGFuZ2VQYWdlcygpO1xyXG4gICAgICAgIGRhdGFPYmoubGVmdERlYWxTY3JvbGxDb21wID0gdGhpcy5jb21wX2xlZnRCdG5Db250YWluZXI7XHJcbiAgICAgICAgZGF0YU9iai5sZWZ0UHJlZmFiID0gdGhpcy5wcmVmYWJfbGVmdEJ1dHRvbjtcclxuICAgICAgICBkYXRhT2JqLmxlZnRDb250ZW50TGlzdCA9IFsn5ri45oiP566A5LuLJywn55m+5Lq65aSn5oiYJywn5oq85a6d5aSn5oiYJ107XHJcbiAgICAgICAgZGF0YU9iai5sZWZ0Q2xpY2tGdW5jID0gbnVsbDtcclxuICAgICAgICBkYXRhT2JqLnJpZ2h0RGVhbFNjcm9sbENvbXAgPSB0aGlzLmNvbXBfaXRlbUNvbnRhaW5lcjtcclxuICAgICAgICBkYXRhT2JqLnJpZ2h0UHJlZmFiTGlzdCA9IFt0aGlzLnByZWZhYl9pbnRyb2R1Y2UsIHRoaXMucHJlZmFiX2J1bGwxMDAsIHRoaXMucHJlZmFiX2dyYWJdO1xyXG4gICAgICAgIHRoaXMuX2NvbXBfZXhjaGFuZ1BhZ2VzLmluaXREYXRhKGRhdGFPYmopO1xyXG4gICAgfSxcclxuXHJcbiAgICBzdGFydCA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLl9jb21wX2V4Y2hhbmdQYWdlcy5zaG93RGVmYXVsdCgpO1xyXG4gICAgfSxcclxuICAgIC8vIGNhbGxlZCBldmVyeSBmcmFtZSwgdW5jb21tZW50IHRoaXMgZnVuY3Rpb24gdG8gYWN0aXZhdGUgdXBkYXRlIGNhbGxiYWNrXHJcbiAgICAvLyB1cGRhdGU6IGZ1bmN0aW9uIChkdCkge1xyXG5cclxuICAgIC8vIH0sXHJcbn0pO1xyXG4iLCIvL+eOqeWutuezu+e7n+iuvue9rlxyXG52YXIgc2V0VHlwZSA9IHtcclxuICAgIHR5cGVNdXNpYyA6IDEsXHJcbiAgICB0eXBlU291bmQgOiAyLFxyXG59XHJcblxyXG5jYy5DbGFzcyh7XHJcbiAgICBleHRlbmRzOiByZXF1aXJlKCdCYXNlRGlhbG9nJyksXHJcblxyXG4gICAgcHJvcGVydGllczoge1xyXG4gICAgICAgIF9tdXNpY0lzT3BlbiA6IG51bGwsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v6Z+z5LmQ5piv5ZCm5byA5ZCvXHJcbiAgICAgICAgX3NvdW5kSXNPcGVuIDogbnVsbCwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/pn7PmlYjmmK/lkKblvIDlkK9cclxuICAgICAgICBfaXNPcGVuRmlyc3QgOiBudWxsLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+aYr+WQpuesrOS4gOasoeaJk+W8gFxyXG4gICAgICAgIF9kaWN0X2xhc3RTZXQgOiBudWxsLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5LiK5qyh55qE6K6+5a6a77yM5Yik5a6a5piv5ZCm5pyJ5pS55Y+Y6YWN572uXHJcblxyXG4gICAgICAgIG5vZGVfY2hhbmdlQnRuIDoge1xyXG4gICAgICAgICAgICBkZWZhdWx0IDogbnVsbCxcclxuICAgICAgICAgICAgdHlwZSA6IGNjLk5vZGUsXHJcbiAgICAgICAgICAgIGRpc3BsYXlOYW1lIDogJ+WIh+aNoui0puWPtydcclxuICAgICAgICB9LFxyXG4gICAgICAgIG5vZGVfbXVzaWNTd2l0Y2ggOiB7XHJcbiAgICAgICAgICAgIGRlZmF1bHQgOiBudWxsLFxyXG4gICAgICAgICAgICB0eXBlIDogY2MuTm9kZSxcclxuICAgICAgICAgICAgZGlzcGxheU5hbWUgOiAn6Z+z5LmQ5byA5YWzJ1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgbm9kZV9zb3VuZFN3aXRjaCA6IHtcclxuICAgICAgICAgICAgZGVmYXVsdCA6IG51bGwsXHJcbiAgICAgICAgICAgIHR5cGUgOiBjYy5Ob2RlLFxyXG4gICAgICAgICAgICBkaXNwbGF5TmFtZSA6ICfpn7PmlYjlvIDlhbMnXHJcbiAgICAgICAgfSxcclxuICAgICAgICBub2RlX211c2ljSWNvbjoge1xyXG4gICAgICAgICAgICBkZWZhdWx0IDogbnVsbCxcclxuICAgICAgICAgICAgdHlwZSA6IGNjLk5vZGUsXHJcbiAgICAgICAgICAgIGRpc3BsYXlOYW1lIDogJ+mfs+S5kOW3pui+ueWbvuaghydcclxuICAgICAgICB9LFxyXG4gICAgICAgIG5vZGVfc291bmRJY29uOiB7XHJcbiAgICAgICAgICAgIGRlZmF1bHQgOiBudWxsLFxyXG4gICAgICAgICAgICB0eXBlIDogY2MuTm9kZSxcclxuICAgICAgICAgICAgZGlzcGxheU5hbWUgOiAn6Z+z5pWI5bem6L655Zu+5qCHJ1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgbGFiZWxfbmFtZSA6IHtcclxuICAgICAgICAgICAgZGVmYXVsdCA6IG51bGwsXHJcbiAgICAgICAgICAgIHR5cGUgOiBjYy5MYWJlbCxcclxuICAgICAgICAgICAgZGlzcGxheU5hbWUgOiAn546p5a625ZCN5a2XJ1xyXG4gICAgICAgIH0sXHJcbiAgICB9LFxyXG5cclxuICAgIC8vIHVzZSB0aGlzIGZvciBpbml0aWFsaXphdGlvblxyXG4gICAgb25Mb2FkOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5fc3VwZXIoKTtcclxuICAgICAgICB0aGlzLl9yZWdpc3RlckV2ZW50KCk7XHJcbiAgICAgICAgdGhpcy5faXNPcGVuRmlyc3QgPSB0cnVlO1xyXG4gICAgfSxcclxuICAgIF9yZWdpc3RlckV2ZW50IDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMucmVnaXN0ZXJCdXR0b24odGhpcy5ub2RlX2NoYW5nZUJ0biwgdGhpcy5fb25DbGlja19jaGFuZ2UsIHRoaXMpO1xyXG4gICAgICAgIHRoaXMucmVnaXN0ZXJCdXR0b24odGhpcy5ub2RlX211c2ljU3dpdGNoLCB0aGlzLm9uQ2xpY2tfb3BlbiwgdGhpcywgc2V0VHlwZS50eXBlTXVzaWMsIHRydWUpO1xyXG4gICAgICAgIHRoaXMucmVnaXN0ZXJCdXR0b24odGhpcy5ub2RlX3NvdW5kU3dpdGNoLCB0aGlzLm9uQ2xpY2tfb3BlbiwgdGhpcywgc2V0VHlwZS50eXBlU291bmQsIHRydWUpO1xyXG4gICAgfSxcclxuICAgIGhpZGVMYXllciA6IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgdGhpcy5fc3VwZXIoKTtcclxuICAgICAgICB0aGlzLl9kaWN0X2xhc3RTZXQgPSBudWxsO1xyXG4gICAgfSxcclxuXHJcbiAgICBfb25DbGlja19jbG9zZSA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZihHX0NvbmZpZ19jb21tb24uaXNMb2NhbCkge1xyXG4gICAgICAgICAgICB0aGlzLmhpZGVMYXllcigpO1xyXG4gICAgICAgICAgICByZXR1cm5cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmKHRoaXMuX2RpY3RfbGFzdFNldCl7XHJcbiAgICAgICAgICAgIGlmKHRoaXMuX2RpY3RfbGFzdFNldFsnbXVzaWMnXSE9dGhpcy5fbXVzaWNJc09wZW58fHRoaXMuX2RpY3RfbGFzdFNldFsnc291bmQnXSE9dGhpcy5fc291bmRJc09wZW4pIHtcclxuICAgICAgICAgICAgICAgIC8v6YWN572u5Y+R55Sf5pS55Y+YLOS/neWtmOiuvue9rlxyXG4gICAgICAgICAgICAgICAgdmFyIG11c2ljZVN0ciA9IHRoaXMuX211c2ljSXNPcGVuID8gJ1NldF9vcGVuJyA6ICdTZXRfY2xvc2UnO1xyXG4gICAgICAgICAgICAgICAgdmFyIHNvdW5kU3RyID0gdGhpcy5fc291bmRJc09wZW4gPyAnU2V0X29wZW4nIDogJ1NldF9jbG9zZSc7XHJcbiAgICAgICAgICAgICAgICB2YXIgc2VuZFN0ciA9IFwibXVzaWNDbGFzcz1cIittdXNpY2VTdHIrJyZzb3VuZENsYXNzPScrc291bmRTdHIrJyZnYW1lVHlwZT1ET1VfTklVJztcclxuICAgICAgICAgICAgICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgICAgICAgICAgICAgIEdHLmh0dHBNZ3Iuc2VuZEh0dHBSZXF1ZXN0KEdfRElBTE9HX1VSTC5zYXZlU3lzdGVtU2V0VXJsLCBzZW5kU3RyLCBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuaGlkZUxheWVyKCk7XHJcbiAgICAgICAgICAgICAgICB9LmJpbmQodGhpcykpO1xyXG4gICAgICAgICAgICB9ZWxzZSB0aGlzLmhpZGVMYXllcigpO1xyXG4gICAgICAgIH1lbHNlIHRoaXMuaGlkZUxheWVyKCk7XHJcbiAgICB9LFxyXG5cclxuICAgIHNldERhdGEgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgICAgIGlmKEdfQ29uZmlnX2NvbW1vbi5pc0xvY2FsKXtcclxuICAgICAgICAgICAgdmFyIGRhdGEgPSB7J211c2ljJzp0cnVlLCdzb3VuZCc6dHJ1ZX07XHJcbiAgICAgICAgICAgIHRoaXMuX2RpY3RfbGFzdFNldCA9IGRhdGE7XHJcbiAgICAgICAgICAgIGlmKEdHLmF1ZGlvTWdyLmdldEF1ZGlvQ29uZmlnKCkpIGRhdGEgPSBHRy5hdWRpb01nci5nZXRBdWRpb0NvbmZpZygpO1xyXG4gICAgICAgICAgICBlbHNlIEdHLmF1ZGlvTWdyLnNldEF1ZGlvQ29uZmlnKHsnbXVzaWMnOnRydWUsJ3NvdW5kJzp0cnVlfSk7XHJcbiAgICAgICAgICAgIHRoaXMuZGVmYXVsdFNldFNvdW5kKGRhdGEubXVzaWMsIGRhdGEuc291bmQpO1xyXG4gICAgICAgICAgICB0aGlzLl9zZXROYW1lKCk7XHJcbiAgICAgICAgICAgIHNlbGYuc2hvd0xheWVyKCk7XHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIC8v6I635Y+W546p5a6257O757uf6K6+572uXHJcbiAgICAgICAgICAgIC8vaWYodGhpcy5faXNPcGVuRmlyc3Qpe1xyXG4gICAgICAgICAgICAvLyAgICBHRy5odHRwTWdyLnNlbmRIdHRwTG9naW4oR19ESUFMT0dfVVJMLmdldFN5c3RlbVNldFVybCwgJ2dhbWVUeXBlPURPVV9OSVUnLCBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAvLyAgICAgICAgdmFyIGNvbmZpZztcclxuICAgICAgICAgICAgLy8gICAgICAgIGlmKGRhdGEuY29kZSA9PSAwKXtcclxuICAgICAgICAgICAgLy8gICAgICAgICAgICBjb25maWcgPSB7J211c2ljJzp0cnVlLCdzb3VuZCc6dHJ1ZX07XHJcbiAgICAgICAgICAgIC8vICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyAgICAgICAgICAgIGNvbmZpZyA9IGRhdGEuZGF0YS5yZXN1bHRbMF07XHJcbiAgICAgICAgICAgIC8vICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vICAgICAgICAvL+WmguaenOmfs+S5kOW3sue7j+aSreaUvu+8jOWImeS4jemcgOimgemHjeWkjeaSreaUvlxyXG4gICAgICAgICAgICAvLyAgICAgICAgaWYoY29uZmlnLm11c2ljICYmIEdHLmF1ZGlvTWdyLmdldElzUGxheU11c2ljKCkpIEdHLmF1ZGlvTWdyLnNhdmVTb3VuZENvbmZpZyhjb25maWcuc291bmQpO1xyXG4gICAgICAgICAgICAvLyAgICAgICAgZWxzZSBHRy5hdWRpb01nci5zZXRBdWRpb0NvbmZpZyhjb25maWcpO1xyXG4gICAgICAgICAgICAvL1xyXG4gICAgICAgICAgICAvLyAgICAgICAgdmFyIGRhdGEgPSBHRy5hdWRpb01nci5nZXRBdWRpb0NvbmZpZygpO1xyXG4gICAgICAgICAgICAvLyAgICAgICAgc2VsZi5kZWZhdWx0U2V0U291bmQoZGF0YS5tdXNpYywgZGF0YS5zb3VuZCk7XHJcbiAgICAgICAgICAgIC8vICAgICAgICBzZWxmLl9zZXROYW1lKCk7XHJcbiAgICAgICAgICAgIC8vICAgICAgICBzZWxmLl9pc09wZW5GaXJzdCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAvLyAgICAgICAgc2VsZi5zaG93TGF5ZXIoKTtcclxuICAgICAgICAgICAgLy8gICAgfS5iaW5kKHRoaXMpKTtcclxuICAgICAgICAgICAgLy99ZWxzZSB7XHJcbiAgICAgICAgICAgIC8vICAgIHZhciBkYXRhID0gR0cuYXVkaW9NZ3IuZ2V0QXVkaW9Db25maWcoKTtcclxuICAgICAgICAgICAgLy8gICAgdGhpcy5kZWZhdWx0U2V0U291bmQoZGF0YS5tdXNpYywgZGF0YS5zb3VuZCk7XHJcbiAgICAgICAgICAgIC8vICAgIHRoaXMuX3NldE5hbWUoKTtcclxuICAgICAgICAgICAgLy8gICAgc2VsZi5zaG93TGF5ZXIoKTtcclxuICAgICAgICAgICAgLy99XHJcbiAgICAgICAgICAgIHZhciBkYXRhID0gR0cuYXVkaW9NZ3IuZ2V0QXVkaW9Db25maWcoKTtcclxuICAgICAgICAgICAgaWYoZGF0YSl7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9kaWN0X2xhc3RTZXQgPSB7fTtcclxuICAgICAgICAgICAgICAgIGZvcih2YXIgYXR0ciBpbiBkYXRhKXtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9kaWN0X2xhc3RTZXRbYXR0cl0gPSBkYXRhW2F0dHJdO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhpcy5kZWZhdWx0U2V0U291bmQoZGF0YS5tdXNpYywgZGF0YS5zb3VuZCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9zZXROYW1lKCk7XHJcbiAgICAgICAgICAgICAgICBzZWxmLnNob3dMYXllcigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICAvL+eOqeWutueCueWHu+S6huW8gOWFs1xyXG4gICAgb25DbGlja19vcGVuIDogZnVuY3Rpb24gKGV2ZW50LCB0eXBlKSB7XHJcbiAgICAgICAgc3dpdGNoICh0eXBlKSB7XHJcbiAgICAgICAgICAgIGNhc2Ugc2V0VHlwZS50eXBlTXVzaWMgOlxyXG4gICAgICAgICAgICAgICAgLy/pn7PkuZBcclxuICAgICAgICAgICAgICAgIHRoaXMuX3NldE11c2ljT3BlbigpO1xyXG4gICAgICAgICAgICAgICAgR0cuYXVkaW9NZ3Iuc2F2ZU11c2ljQ29uZmlnKHRoaXMuX211c2ljSXNPcGVuKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIHNldFR5cGUudHlwZVNvdW5kIDpcclxuICAgICAgICAgICAgICAgIC8v6Z+z5pWIXHJcbiAgICAgICAgICAgICAgICB0aGlzLl9zZXRTb3VuZE9wZW4oKTtcclxuICAgICAgICAgICAgICAgIEdHLmF1ZGlvTWdyLnNhdmVTb3VuZENvbmZpZyh0aGlzLl9zb3VuZElzT3Blbik7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgLy/orr7nva7pn7PkuZDlvIDlhbNcclxuICAgIF9zZXRNdXNpY09wZW4gOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5fbXVzaWNJc09wZW4gPSAhdGhpcy5fbXVzaWNJc09wZW47XHJcbiAgICAgICAgLy/ooajnjrBcclxuICAgICAgICB2YXIgcG9pbnRJbWcsIG9wZW5JbWcsIGxpZ2h0SWNvbjtcclxuICAgICAgICBvcGVuSW1nID0gdGhpcy5ub2RlX211c2ljU3dpdGNoLmNoaWxkcmVuWzBdO1xyXG4gICAgICAgIHBvaW50SW1nID0gdGhpcy5ub2RlX211c2ljU3dpdGNoLmNoaWxkcmVuWzFdO1xyXG4gICAgICAgIGxpZ2h0SWNvbiA9IHRoaXMubm9kZV9tdXNpY0ljb24uY2hpbGRyZW5bMF07XHJcblxyXG4gICAgICAgIG9wZW5JbWcuYWN0aXZlID0gdGhpcy5fbXVzaWNJc09wZW47XHJcbiAgICAgICAgaWYodGhpcy5fbXVzaWNJc09wZW4pe1xyXG4gICAgICAgICAgICBwb2ludEltZy54ID0gdGhpcy5ub2RlX211c2ljU3dpdGNoLndpZHRoLzIgLSBwb2ludEltZy53aWR0aC8yO1xyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICBwb2ludEltZy54ID0gLXRoaXMubm9kZV9tdXNpY1N3aXRjaC53aWR0aC8yICsgcG9pbnRJbWcud2lkdGgvMjtcclxuICAgICAgICB9XHJcbiAgICAgICAgbGlnaHRJY29uLmFjdGl2ZSA9IHRoaXMuX211c2ljSXNPcGVuO1xyXG4gICAgfSxcclxuICAgIC8v6K6+572u6Z+z5pWI5byA5YWzXHJcbiAgICBfc2V0U291bmRPcGVuIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuX3NvdW5kSXNPcGVuID0gIXRoaXMuX3NvdW5kSXNPcGVuO1xyXG4gICAgICAgIC8v6KGo546wXHJcbiAgICAgICAgdmFyIHBvaW50SW1nLCBvcGVuSW1nLCBsaWdodEljb247XHJcbiAgICAgICAgb3BlbkltZyA9IHRoaXMubm9kZV9zb3VuZFN3aXRjaC5jaGlsZHJlblswXTtcclxuICAgICAgICBwb2ludEltZyA9IHRoaXMubm9kZV9zb3VuZFN3aXRjaC5jaGlsZHJlblsxXTtcclxuICAgICAgICBsaWdodEljb24gPSB0aGlzLm5vZGVfc291bmRJY29uLmNoaWxkcmVuWzBdO1xyXG5cclxuICAgICAgICBvcGVuSW1nLmFjdGl2ZSA9IHRoaXMuX3NvdW5kSXNPcGVuO1xyXG4gICAgICAgIGlmKHRoaXMuX3NvdW5kSXNPcGVuKXtcclxuICAgICAgICAgICAgcG9pbnRJbWcueCA9IHRoaXMubm9kZV9zb3VuZFN3aXRjaC53aWR0aC8yIC0gcG9pbnRJbWcud2lkdGgvMjtcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgcG9pbnRJbWcueCA9IC10aGlzLm5vZGVfc291bmRTd2l0Y2gud2lkdGgvMiArIHBvaW50SW1nLndpZHRoLzI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxpZ2h0SWNvbi5hY3RpdmUgPSB0aGlzLl9zb3VuZElzT3BlbjtcclxuICAgIH0sXHJcbiAgICBcclxuICAgIC8v546p5a626buY6K6k57O757uf6K6+572uKOesrOS4gOasoei/m+WFpea4uOaIj+iuvue9riksIGlzT3Blbk11c2ljPXRydWXliJnlvIDlkK/pn7PkuZDvvIzpn7PmlYjnrYnlkIxcclxuICAgIGRlZmF1bHRTZXRTb3VuZCA6IGZ1bmN0aW9uIChpc09wZW5NdXNpYywgaXNPcGVuU291bmQpIHtcclxuICAgICAgICB0aGlzLl9tdXNpY0lzT3BlbiA9ICFpc09wZW5NdXNpYztcclxuICAgICAgICB0aGlzLl9zb3VuZElzT3BlbiA9ICFpc09wZW5Tb3VuZDtcclxuICAgICAgICB0aGlzLl9zZXRNdXNpY09wZW4oKTtcclxuICAgICAgICB0aGlzLl9zZXRTb3VuZE9wZW4oKTtcclxuICAgIH0sXHJcblxyXG4gICAgLy/orr7nva7lkI3lrZdcclxuICAgIF9zZXROYW1lIDogZnVuY3Rpb24gKG5hbWUpIHtcclxuICAgICAgICBpZihHX0NvbmZpZ19jb21tb24uaXNMb2NhbCkgIG5hbWUgPSAnMTIzNDU2JztcclxuICAgICAgICBlbHNlIG5hbWUgPSBHRy5nZXRQbGF5ZXIoKS5nZXRQbGF5ZXJOYW1lKCk7XHJcbiAgICAgICAgaWYoIW5hbWUpIG5hbWUgPSAnJ1xyXG4gICAgICAgIGVsc2UgbmFtZSA9IEdfVE9PTC5nZXROYW1lTGltaXQobmFtZSwgMTYpO1xyXG4gICAgICAgIHRoaXMubGFiZWxfbmFtZS5zdHJpbmcgPSBuYW1lO1xyXG4gICAgfSxcclxuXHJcbiAgICBfb25DbGlja19jaGFuZ2UgOiBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICBHRy50aXBzTWdyLnNob3dDb25maXJtVGlwX1RXTyhHX0NISU5FU0UuZXhpdFRleHQyLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIC8v56Gu6K6k6YCA5Ye6XHJcbiAgICAgICAgICAgIEdHLmV4aXRHYW1lKCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vdmFyIHNlbmREYXRhID0gXCJnYW1lSWQ9MSZkYXRlQ2xhc3M9MCZwYWdlU2l6ZT0yMCZwYWdlTm93PTBcIjtcclxuICAgICAgICAvL0dHLmh0dHBNZ3Iuc2VuZEh0dHBMb2dpbihcImdhbWUvc3RhdGlzdGljcy91c2VyL3JlY29yZHMuaHRtbFwiLCBzZW5kRGF0YSwgZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAvLyAgICBjb25zb2xlLmxvZygnZ2V0IGxvZ2luPT09PT09Jyk7XHJcbiAgICAgICAgLy8gICAgY29uc29sZS5sb2coZGF0YSk7XHJcbiAgICAgICAgLy99LmJpbmQodGhpcykpO1xyXG4gICAgfVxyXG4gICAgLy8gY2FsbGVkIGV2ZXJ5IGZyYW1lLCB1bmNvbW1lbnQgdGhpcyBmdW5jdGlvbiB0byBhY3RpdmF0ZSB1cGRhdGUgY2FsbGJhY2tcclxuICAgIC8vIHVwZGF0ZTogZnVuY3Rpb24gKGR0KSB7XHJcblxyXG4gICAgLy8gfSxcclxufSk7XHJcbiIsIi8v55m+5Lq66LWw5Yq/5Zu+XHJcblxyXG5cclxuY2MuQ2xhc3Moe1xyXG4gICAgZXh0ZW5kczogcmVxdWlyZSgnQmFzZURpYWxvZycpLFxyXG5cclxuICAgIHByb3BlcnRpZXM6IHtcclxuXHJcbiAgICB9LFxyXG5cclxuICAgIC8vIHVzZSB0aGlzIGZvciBpbml0aWFsaXphdGlvblxyXG4gICAgb25Mb2FkOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5fc3VwZXIoJ1VJX3RyZW5kJyk7XHJcbiAgICAgICAgdGhpcy5fc2V0U2Nyb2xsRGF0YSgpO1xyXG4gICAgfSxcclxuXHJcbiAgICBfc2V0U2Nyb2xsRGF0YSA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLl9pdGVtQ29tcE5hbWUgPSAnT2JqX2NlbGxfdHJlbmQnO1xyXG4gICAgICAgIHZhciBkYXRhT2JqID0ge1xyXG4gICAgICAgICAgICBpdGVtUHJlZmFiIDogdGhpcy5wcmVmYWJfaXRlbSxcclxuICAgICAgICAgICAgc2Nyb2xsVHlwZSA6IEdfVFlQRS5zY3JvbGxUeXBlLnZlcnRpY2FsLFxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmNvbXBfaXRlbUNvbnRhaW5lci5zZXREYXRhKGRhdGFPYmopO1xyXG4gICAgfSxcclxuXHJcbiAgICBzZXREYXRhIDogZnVuY3Rpb24gKGhvbWVJRCkge1xyXG4gICAgICAgIHZhciBkYXRhTGlzdDtcclxuICAgICAgICBpZihHX0NvbmZpZ19jb21tb24uaXNMb2NhbCkge1xyXG4gICAgICAgICAgICBkYXRhTGlzdCA9IFtdO1xyXG4gICAgICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgNTsgaSArKyl7XHJcbiAgICAgICAgICAgICAgICB2YXIgY3VyTGlzdCA9IFtbJ1NQQURFJywxXSwgWydESUFNT05EJywwXSwgWydDTFVCJywxXSwgWydIRUFSVCcsMF1dO1xyXG4gICAgICAgICAgICAgICAgZGF0YUxpc3QucHVzaChjdXJMaXN0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLl9zaG93TGlzdChkYXRhTGlzdCk7XHJcbiAgICAgICAgfSBlbHNle1xyXG4gICAgICAgICAgICB2YXIgbW9kdWxlVHlwZTtcclxuICAgICAgICAgICAgc3dpdGNoIChHRy5nZXRHYW1lVHlwZSgpKXtcclxuICAgICAgICAgICAgICAgIGNhc2UgR19UWVBFLmdhbWVNb2R1bGUuYnVsbDEwMDpcclxuICAgICAgICAgICAgICAgICAgICBtb2R1bGVUeXBlID0gR19UWVBFLmh0dHBfZ2FtZU1vZHVsZS5idWxsMTAwO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgICAgICAgICBjYXNlIEdfVFlQRS5nYW1lTW9kdWxlLmdyYWI6XHJcbiAgICAgICAgICAgICAgICAgICAgbW9kdWxlVHlwZSA9IEdfVFlQRS5odHRwX2dhbWVNb2R1bGUuZ3JhYjtcclxuICAgICAgICAgICAgICAgICAgICBicmVha1xyXG4gICAgICAgICAgICAgICAgY2FzZSBHX1RZUEUuZ2FtZU1vZHVsZS5jbGFzc2ljOlxyXG4gICAgICAgICAgICAgICAgICAgIG1vZHVsZVR5cGUgPSBHX1RZUEUuaHR0cF9nYW1lTW9kdWxlLmNsYXNzaWM7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWtcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgbW9kdWxlVHlwZSA9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2YXIgc2VuZERhdGEgPSAnZ2FtZU1vZGVsSWQ9Jyttb2R1bGVUeXBlKycmZ2FtZVJvb21JZD0nK2hvbWVJRDtcclxuICAgICAgICAgICAgR0cuaHR0cE1nci5zZW5kSHR0cFJlcXVlc3QoR19ESUFMT0dfVVJMLnRyZW5kVXJsLCBzZW5kRGF0YSwgZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgIGlmKGRhdGEpe1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd0xheWVyKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5lZWRMaXN0ID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1hdGhMaXN0O1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBkYXRhTGlzdCA9IGRhdGEuZGF0YTtcclxuICAgICAgICAgICAgICAgICAgICBpZighZGF0YUxpc3QpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5tc2dcclxuICAgICAgICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yKHZhciBpID0gMDsgaSA8IGRhdGFMaXN0Lmxlbmd0aDsgaSArKyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZighbmVlZExpc3RbaV0pIG5lZWRMaXN0W2ldID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXRoTGlzdCA9IGRhdGFMaXN0W2ldLm1hdGNoUmVzdWx0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYobWF0aExpc3Qpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcih2YXIgaiA9IDA7IGogPCBtYXRoTGlzdC5sZW5ndGg7IGogKyspe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZWVkTGlzdFtpXS5wdXNoKFttYXRoTGlzdFtqXVsnaXRlbVR5cGUnXSwgbWF0aExpc3Rbal1bJ291dGNvbWUnXV0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9zaG93TGlzdChuZWVkTGlzdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LmJpbmQodGhpcykpO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICBfc2hvd0xpc3QgOiBmdW5jdGlvbiAoZGF0YUxpc3QpIHtcclxuICAgICAgICB2YXIgZGF0YSwgaXRlbSwgY29tcDsvL+i1sOWKv+WbvuaYvuekuuadoeebruS4ujVcclxuICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgR19Db25maWdfY29tbW9uLnNob3dUcmVuZEl0ZW1zOyBpICsrKXtcclxuICAgICAgICAgICAgZGF0YSA9IGRhdGFMaXN0W2ldXHJcbiAgICAgICAgICAgIGlmKGRhdGEpe1xyXG4gICAgICAgICAgICAgICAgaXRlbSA9IHRoaXMuY29tcF9pdGVtQ29udGFpbmVyLmdldEl0ZW1CeUluZGV4KGkpO1xyXG4gICAgICAgICAgICAgICAgaWYoaXRlbSl7XHJcbiAgICAgICAgICAgICAgICAgICAgY29tcCA9IGl0ZW0uZ2V0Q29tcG9uZW50KHRoaXMuX2l0ZW1Db21wTmFtZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29tcC5zZXREYXRhKGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuY29tcF9pdGVtQ29udGFpbmVyLmNsZWFySXRlbXMoaSk7XHJcbiAgICB9LFxyXG5cclxuICAgIGhpZGVMYXllciA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLl9zdXBlcigpO1xyXG4gICAgfSxcclxuXHJcbiAgICAvLyBjYWxsZWQgZXZlcnkgZnJhbWUsIHVuY29tbWVudCB0aGlzIGZ1bmN0aW9uIHRvIGFjdGl2YXRlIHVwZGF0ZSBjYWxsYmFja1xyXG4gICAgLy8gdXBkYXRlOiBmdW5jdGlvbiAoZHQpIHtcclxuXHJcbiAgICAvLyB9LFxyXG59KTtcclxuIiwiLy/lrZjmlL7miYDmnInnmoTmiL/pl7TliJfooahcclxuY2MuQ2xhc3Moe1xyXG4gICAgZXh0ZW5kczogcmVxdWlyZSgnQmFzZVVJJyksXHJcblxyXG4gICAgcHJvcGVydGllczoge1xyXG4gICAgICAgIF9kaWN0X2xvYWRTY2VuZSA6IG51bGwsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+aYr+WQpuW3sue7j+mihOWKoOi9vemcgOimgeeahOWcuuaZr1xyXG4gICAgICAgIF9sb2FkaW5nU2NlbmUgOiBudWxsLFxyXG5cclxuICAgICAgICBwcmVmYWJfaXRlbSA6IHtcclxuICAgICAgICAgICAgZGVmYXVsdCA6IG51bGwsXHJcbiAgICAgICAgICAgIHR5cGUgOiBjYy5QcmVmYWIsXHJcbiAgICAgICAgICAgIGRpc3BsYXlOYW1lIDogJ+aIv+mXtOmihOWItuS9kydcclxuICAgICAgICB9LFxyXG4gICAgICAgIGNvbXBfaXRlbUNvbnRhaW5lciA6IHtcclxuICAgICAgICAgICAgZGVmYXVsdCA6IG51bGwsXHJcbiAgICAgICAgICAgIHR5cGUgOiByZXF1aXJlKCdPYmpfZGVhbFNjcm9sbCcpLFxyXG4gICAgICAgICAgICBkaXNwbGF5TmFtZSA6ICfmiL/pl7TliJfooajlrrnlmagnXHJcbiAgICAgICAgfSxcclxuICAgICAgICBub2RlX3Jvb21OYW1lIDoge1xyXG4gICAgICAgICAgICBkZWZhdWx0IDogbnVsbCxcclxuICAgICAgICAgICAgdHlwZSA6IGNjLk5vZGUsXHJcbiAgICAgICAgICAgIGRpc3BsYXlOYW1lIDogJ+aIv+mXtOWIl+ihqOWQjeensCdcclxuICAgICAgICB9LFxyXG4gICAgfSxcclxuXHJcbiAgICAvLyB1c2UgdGhpcyBmb3IgaW5pdGlhbGl6YXRpb25cclxuICAgIG9uTG9hZDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuX2RlYWxlckl0ZW1Db21wTmFtZSA9ICdPYmpfcm9vbUxpc3RDZWxsJztcclxuICAgICAgICB0aGlzLl9kaWN0X2xvYWRTY2VuZSA9IHt9O1xyXG4gICAgICAgIC8v6K6+572u5rua5Yqo5bGC5L+h5oGvXHJcbiAgICAgICAgdmFyIGRhdGFPYmogPSB7XHJcbiAgICAgICAgICAgIGl0ZW1QcmVmYWIgOiB0aGlzLnByZWZhYl9pdGVtLFxyXG4gICAgICAgICAgICBsaW5lTnVtIDogMyxcclxuICAgICAgICAgICAgc2Nyb2xsVHlwZSA6IEdfVFlQRS5zY3JvbGxUeXBlLmJhZyxcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5jb21wX2l0ZW1Db250YWluZXIuc2V0RGF0YShkYXRhT2JqKTtcclxuICAgIH0sXHJcblxyXG4gICAgc2V0RGF0YUxpc3QgOiBmdW5jdGlvbiAoZGF0YU9iaikge1xyXG4gICAgICAgIGlmKCFkYXRhT2JqKSByZXR1cm47XHJcbiAgICAgICAgLy8gdGhpcy5zaG93TGF5ZXIoKTtcclxuICAgICAgICBHX0RBVEEuZ2V0Um9vbUxpc3RKc29uKGZ1bmN0aW9uIChqc29uQ29uZmlnKSB7XHJcbiAgICAgICAgICAgIGlmKGpzb25Db25maWcpe1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRSb29tTGlzdChkYXRhT2JqLmRhdGEsIGRhdGFPYmouZW50ZXJUeXBlLCBqc29uQ29uZmlnKTtcclxuICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICBpZihHX0NvbmZpZ19jb21tb24uaXNMb2NhbCl7XHJcbiAgICAgICAgICAgICAgICAgICAganNvbkNvbmZpZyA9IHRoaXMuX2dldExvY2FsSnNvbigpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0Um9vbUxpc3QoZGF0YU9iai5kYXRhLCBkYXRhT2JqLmVudGVyVHlwZSwganNvbkNvbmZpZyk7XHJcbiAgICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICAvL+aXoOazleato+W4uOWKoOi9veaIv+mXtOmFjee9rlxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfS5iaW5kKHRoaXMpKVxyXG4gICAgICAgIHRoaXMuX3JlbG9hZFNjZW5lKCk7XHJcbiAgICB9LFxyXG5cclxuICAgIHNldFJvb21MaXN0IDogZnVuY3Rpb24gKGRhdGFMaXN0LCBlbnRlclR5cGUsIGpzb25Db25maWcpIHtcclxuICAgICAgICB0aGlzLl9zaG93Um9vbU5hbWUoZW50ZXJUeXBlKTtcclxuICAgICAgICB2YXIgaSA9IDAsIGNvbmZpZ1BhZ2VOdW0gPSA2LCByb3dOdW07XHJcbiAgICAgICAgaWYoZGF0YUxpc3QpIHtcclxuICAgICAgICAgICAgZGF0YUxpc3QgPSB0aGlzLl9yZXNvcnREYXRhTGlzdChkYXRhTGlzdCk7XHJcbiAgICAgICAgICAgIHZhciBpdGVtLCBjb21wLCBkYXRhT2JqO1xyXG4gICAgICAgICAgICBmb3IoaSA9IDA7IGkgPCBkYXRhTGlzdC5sZW5ndGg7IGkgKyspe1xyXG4gICAgICAgICAgICAgICAgaXRlbSA9IHRoaXMuY29tcF9pdGVtQ29udGFpbmVyLmdldEl0ZW1CeUluZGV4KGkpO1xyXG4gICAgICAgICAgICAgICAgaWYoaXRlbSl7XHJcbiAgICAgICAgICAgICAgICAgICAgY29tcCA9IGl0ZW0uZ2V0Q29tcG9uZW50KHRoaXMuX2RlYWxlckl0ZW1Db21wTmFtZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YU9iaiA9IGRhdGFMaXN0W2ldO1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGFPYmouZW50ZXJUeXBlID0gZW50ZXJUeXBlO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGNvbXAuc2V0RGF0YShkYXRhT2JqLCBqc29uQ29uZmlnW2RhdGFPYmouaWRdKTtcclxuICAgICAgICAgICAgICAgICAgICByb3dOdW0gPShpKzEpJWNvbmZpZ1BhZ2VOdW07XHJcbiAgICAgICAgICAgICAgICAgICAgY29tcC5zZXREYXRhKGRhdGFPYmosIGpzb25Db25maWdbcm93TnVtID09IDAgPyBjb25maWdQYWdlTnVtIDogcm93TnVtXSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5jb21wX2l0ZW1Db250YWluZXIuY2xlYXJJdGVtcyhpIC0xKTtcclxuICAgICAgICB0aGlzLmNvbXBfaXRlbUNvbnRhaW5lci5zY3JvbGxUb1VwKCk7XHJcbiAgICB9LFxyXG5cclxuICAgIC8vIF9yZXNvcnREYXRhTGlzdCA6IGZ1bmN0aW9uIChkYXRhTGlzdCkge1xyXG4gICAgLy8gICAgIHZhciBuZXdMaXN0ID0gW107XHJcbiAgICAvLyAgICAgd2hpbGUgKGRhdGFMaXN0Lmxlbmd0aCA+IDApe1xyXG4gICAgLy8gICAgICAgICBuZXdMaXN0ID0gbmV3TGlzdC5jb25jYXQodGhpcy5fZ2V0T25lVHlwZUxpc3QoZGF0YUxpc3QpKTtcclxuICAgIC8vICAgICB9XHJcbiAgICAvLyAgICAgcmV0dXJuIG5ld0xpc3Q7XHJcbiAgICAvLyB9LFxyXG4gICAgLy9cclxuICAgIC8vIF9nZXRPbmVUeXBlTGlzdCA6IGZ1bmN0aW9uIChkYXRhTGlzdCkge1xyXG4gICAgLy8gICAgIHZhciBjb3B5VmFsdWUgPSBudWxsLCBkYXRhT2JqLCBuZXdMaXN0ID0gW107XHJcbiAgICAvLyAgICAgZm9yKHZhciBpID0gZGF0YUxpc3QubGVuZ3RoLTE7IGkgPiAtMTsgaSAtLSl7XHJcbiAgICAvLyAgICAgICAgIGRhdGFPYmogPSBkYXRhTGlzdFtpXTtcclxuICAgIC8vICAgICAgICAgaWYoY29weVZhbHVlICE9PSBkYXRhT2JqLm1pbkxpbWl0UGxheWVyQmxhbmNlKXtcclxuICAgIC8vICAgICAgICAgICAgIGNvcHlWYWx1ZSA9IGRhdGFPYmoubWluTGltaXRQbGF5ZXJCbGFuY2VcclxuICAgIC8vICAgICAgICAgICAgIHZhciB0YXJnZXROdW0gPSBkYXRhTGlzdC5zcGxpY2UoaSwgMSlbMF07XHJcbiAgICAvLyAgICAgICAgICAgICBuZXdMaXN0LnNwbGljZSgwLDAsIHRhcmdldE51bSk7XHJcbiAgICAvLyAgICAgICAgIH1cclxuICAgIC8vICAgICB9XHJcbiAgICAvLyAgICAgcmV0dXJuIG5ld0xpc3RcclxuICAgIC8vIH0sXHJcblxyXG4gICAgX3Jlc29ydERhdGFMaXN0IDogZnVuY3Rpb24gKGRhdGFMaXN0KSB7XHJcbiAgICAgICAgdmFyIGRpY3QgPSB7fTtcclxuICAgICAgICB2YXIgZGF0YU9iajtcclxuICAgICAgICBmb3IodmFyIGkgPSBkYXRhTGlzdC5sZW5ndGgtMTsgaSA+IC0xOyBpIC0tKXtcclxuICAgICAgICAgICAgZGF0YU9iaiA9IGRhdGFMaXN0W2ldO1xyXG4gICAgICAgICAgICBpZighZGljdFtkYXRhT2JqLm1pbkxpbWl0UGxheWVyQmxhbmNlXSl7XHJcbiAgICAgICAgICAgICAgICBkaWN0W2RhdGFPYmoubWluTGltaXRQbGF5ZXJCbGFuY2VdID0gW11cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLl9kb0JhbGFuY2VQdXNoKGRpY3RbZGF0YU9iai5taW5MaW1pdFBsYXllckJsYW5jZV0sIGRhdGFPYmopO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIG5ld0xpc3QgPSBbXTtcclxuICAgICAgICB2YXIga2V5TGlzdCA9IE9iamVjdC5rZXlzKGRpY3QpO1xyXG4gICAgICAgIGtleUxpc3Quc29ydCAoZnVuY3Rpb24gKGZpcnN0LCBzZWNvbmQpe1xyXG4gICAgICAgICAgICB2YXIgZiA9IHBhcnNlSW50IChmaXJzdCwgMTApLCBzID0gcGFyc2VJbnQgKHNlY29uZCwgMTApO1xyXG4gICAgICAgICAgICBpZiAoZiA8IHMpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAtMTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChmID4gcykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIDE7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gMDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHZhciByb29tRGF0YUxpc3Q7XHJcbiAgICAgICAgd2hpbGUgKHRoaXMuX2lzSGF2ZUNoaWxkKGRpY3QpKXtcclxuICAgICAgICAgICAgZm9yKHZhciBpID0gMDsgaSA8IGtleUxpc3QubGVuZ3RoOyBpICsrKXtcclxuICAgICAgICAgICAgICAgIHJvb21EYXRhTGlzdCA9IGRpY3Rba2V5TGlzdFtpXV07XHJcbiAgICAgICAgICAgICAgICBpZighcm9vbURhdGFMaXN0KSBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIGlmKHJvb21EYXRhTGlzdC5sZW5ndGggPCAxKXtcclxuICAgICAgICAgICAgICAgICAgICBkZWxldGUgZGljdFtrZXlMaXN0W2ldXVxyXG4gICAgICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRhcmdldCA9IHJvb21EYXRhTGlzdC5zcGxpY2UoMCwxKVswXTtcclxuICAgICAgICAgICAgICAgICAgICBpZih0YXJnZXQpIG5ld0xpc3QucHVzaCh0YXJnZXQpXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBuZXdMaXN0XHJcbiAgICB9LFxyXG5cclxuICAgIF9pc0hhdmVDaGlsZCA6IGZ1bmN0aW9uIChqc29uT2JqKSB7XHJcbiAgICAgICAgZm9yKHZhciBrZXkgaW4ganNvbk9iail7XHJcbiAgICAgICAgICAgIGlmKGpzb25PYmpba2V5XSl7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBmYWxzZVxyXG4gICAgfSxcclxuXHJcbiAgICBfZG9CYWxhbmNlUHVzaCA6IGZ1bmN0aW9uIChsaXN0LCBkYXRhT2JqKSB7XHJcbiAgICAgICAgdmFyIGZpcnN0TGVuID0gbGlzdC5sZW5ndGg7XHJcbiAgICAgICAgZm9yKHZhciBpID0gMDsgaSA8IGZpcnN0TGVuOyBpICsrKXtcclxuICAgICAgICAgICAgaWYoZGF0YU9iai5pZCA8IGxpc3RbaV0uaWQpe1xyXG4gICAgICAgICAgICAgICAgbGlzdC5zcGxpY2UoaSwwLGRhdGFPYmopO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYoZmlyc3RMZW4gPT0gbGlzdC5sZW5ndGgpe1xyXG4gICAgICAgICAgICAvL+ayoeacieWinuWKoFxyXG4gICAgICAgICAgICBsaXN0LnB1c2goZGF0YU9iailcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIC8v6aKE5Yqg6L295Zy65pmvXHJcbiAgICBfcmVsb2FkU2NlbmUgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYoIXRoaXMuX2xvYWRpbmdTY2VuZSl7XHJcbiAgICAgICAgICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgICAgICAgICAgdmFyIHNjZW5lTmFtZSA9IEdfVFlQRS5zY2VuZU5hbWUubG9hZGluZ1NjZW5lO1xyXG4gICAgICAgICAgICBjYy5kaXJlY3Rvci5wcmVsb2FkU2NlbmUoc2NlbmVOYW1lLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBzZWxmLl9sb2FkaW5nU2NlbmUgPSB0cnVlO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIC8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PeaYvuekuuaIv+mXtOWQjVxyXG5cclxuICAgIF9zaG93Um9vbU5hbWUgOiBmdW5jdGlvbiAoc2NlbmVUeXBlKSB7XHJcbiAgICAgICAgdmFyIGdyYWJOb2RlID0gdGhpcy5ub2RlX3Jvb21OYW1lLmdldENoaWxkQnlOYW1lKCdncmFiJyk7XHJcbiAgICAgICAgdmFyIGJ1bGxOb2RlID0gdGhpcy5ub2RlX3Jvb21OYW1lLmdldENoaWxkQnlOYW1lKCdidWxsMTAwJyk7XHJcbiAgICAgICAgaWYoIWdyYWJOb2RlIHx8ICFidWxsTm9kZSkgcmV0dXJuO1xyXG4gICAgICAgIHN3aXRjaCAocGFyc2VJbnQoc2NlbmVUeXBlKSl7XHJcbiAgICAgICAgICAgIGNhc2UgR19UWVBFLmdhbWVNb2R1bGUuYnVsbDEwMDpcclxuICAgICAgICAgICAgICAgIGJ1bGxOb2RlLmFjdGl2ZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBncmFiTm9kZS5hY3RpdmUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgICAgIGNhc2UgR19UWVBFLmdhbWVNb2R1bGUuY2xhc3NpYzpcclxuXHJcbiAgICAgICAgICAgICAgICBicmVha1xyXG4gICAgICAgICAgICBjYXNlIEdfVFlQRS5nYW1lTW9kdWxlLmdyYWI6XHJcbiAgICAgICAgICAgICAgICB2YXIgZ3JhYk5vZGUgPSB0aGlzLm5vZGVfcm9vbU5hbWUuZ2V0Q2hpbGRCeU5hbWUoJ2dyYWInKTtcclxuICAgICAgICAgICAgICAgIGdyYWJOb2RlLmFjdGl2ZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBidWxsTm9kZS5hY3RpdmUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICBicmVha1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgX2dldExvY2FsSnNvbiA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBcIjFcIjoge1xyXG4gICAgICAgICAgICAgICAgXCJ0eHRJbWdVcmxcIjogXCJpbWFnZXMvcm9vbS9uYW1lL3BsYXRmb3JtX3Jvb21fbl83LnBuZ1wiLFxyXG4gICAgICAgICAgICAgICAgXCJiZ0ltZ1VybFwiOiBcImltYWdlcy9yb29tL2JnL3BsYXRmb3JtX3Jvb21fYl8xMDAwLnBuZ1wiXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIFwiMlwiOiB7XHJcbiAgICAgICAgICAgICAgICBcInR4dEltZ1VybFwiOiBcImltYWdlcy9yb29tL25hbWUvcGxhdGZvcm1fcm9vbV9uXzgucG5nXCIsXHJcbiAgICAgICAgICAgICAgICBcImJnSW1nVXJsXCI6IFwiaW1hZ2VzL3Jvb20vYmcvcGxhdGZvcm1fcm9vbV9iXzIwMDAucG5nXCJcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgXCIzXCI6IHtcclxuICAgICAgICAgICAgICAgIFwidHh0SW1nVXJsXCI6IFwiaW1hZ2VzL3Jvb20vbmFtZS9wbGF0Zm9ybV9yb29tX25fMTEucG5nXCIsXHJcbiAgICAgICAgICAgICAgICBcImJnSW1nVXJsXCI6IFwiaW1hZ2VzL3Jvb20vYmcvcGxhdGZvcm1fcm9vbV9iXzIwMDAwLnBuZ1wiXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIFwiNFwiOiB7XHJcbiAgICAgICAgICAgICAgICBcInR4dEltZ1VybFwiOiBcImltYWdlcy9yb29tL25hbWUvcGxhdGZvcm1fcm9vbV9uXzkucG5nXCIsXHJcbiAgICAgICAgICAgICAgICBcImJnSW1nVXJsXCI6IFwiaW1hZ2VzL3Jvb20vYmcvcGxhdGZvcm1fcm9vbV9iXzUwMDAucG5nXCJcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgXCI1XCI6IHtcclxuICAgICAgICAgICAgICAgIFwidHh0SW1nVXJsXCI6IFwiaW1hZ2VzL3Jvb20vbmFtZS9wbGF0Zm9ybV9yb29tX25fMTIucG5nXCIsXHJcbiAgICAgICAgICAgICAgICBcImJnSW1nVXJsXCI6IFwiaW1hZ2VzL3Jvb20vYmcvcGxhdGZvcm1fcm9vbV9iXzUwMDAwLnBuZ1wiXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIFwiNlwiOiB7XHJcbiAgICAgICAgICAgICAgICBcInR4dEltZ1VybFwiOiBcImltYWdlcy9yb29tL25hbWUvcGxhdGZvcm1fcm9vbV9uXzEwLnBuZ1wiLFxyXG4gICAgICAgICAgICAgICAgXCJiZ0ltZ1VybFwiOiBcImltYWdlcy9yb29tL2JnL3BsYXRmb3JtX3Jvb21fYl8xMDAwMC5wbmdcIlxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBcIjdcIjoge1xyXG4gICAgICAgICAgICAgICAgXCJ0eHRJbWdVcmxcIjogXCJpbWFnZXMvcm9vbS9uYW1lL3BsYXRmb3JtX3Jvb21fbl83LnBuZ1wiLFxyXG4gICAgICAgICAgICAgICAgXCJiZ0ltZ1VybFwiOiBcImltYWdlcy9yb29tL2JnL3BsYXRmb3JtX3Jvb21fYl8xMDAwLnBuZ1wiXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICAvLyBjYWxsZWQgZXZlcnkgZnJhbWUsIHVuY29tbWVudCB0aGlzIGZ1bmN0aW9uIHRvIGFjdGl2YXRlIHVwZGF0ZSBjYWxsYmFja1xyXG4gICAgLy8gdXBkYXRlOiBmdW5jdGlvbiAoZHQpIHtcclxuXHJcbiAgICAvLyB9LFxyXG59KTtcclxuIiwiLy/otYTmupDpooTliqDovb3nrqHnkIZcclxuXHJcbnZhciBtZ3IgPSBjYy5DbGFzcyh7XHJcbiAgICBfZGljdF91cmxSZXMgOiBudWxsLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+i3r+W+hOi1hOa6kO+8jOS4jeWMheaLrOWktOWDj1xyXG4gICAgX2RpY3RfaGVhZEltZyA6IG51bGwsICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/lpLTlg4/otYTmupBcclxuICAgIF9saXN0X2hlYWRJbWcgOiBudWxsLFxyXG4gICAgY3RvciA6IGZ1bmN0aW9uICgpIHtcclxuICAgIH0sXHJcbiAgICAvL+WKoOi9veWNleW8oOWktOWDj+WbvueJh+i1hOa6kFxyXG4gICAgZ2V0SGVhZEltZyA6IGZ1bmN0aW9uICh1cmwsIGNhbGxGdW5jKSB7XHJcbiAgICAgICAgaWYoIXRoaXMuX2RpY3RfaGVhZEltZykge1xyXG4gICAgICAgICAgICB0aGlzLl9kaWN0X2hlYWRJbWcgPSB7fTtcclxuICAgICAgICAgICAgdGhpcy5fbGlzdF9oZWFkSW1nID0gW107XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmKHRoaXMuX2RpY3RfaGVhZEltZ1t1cmxdKSB7XHJcbiAgICAgICAgICAgIGlmKGNhbGxGdW5jKSBjYWxsRnVuYyh0aGlzLl9kaWN0X2hlYWRJbWdbdXJsXVswXSk7XHJcbiAgICAgICAgICAgIHZhciBpbmRleCA9IHRoaXMuX2xpc3RfaGVhZEltZy5pbmRleE9mKHVybCk7XHJcbiAgICAgICAgICAgIGlmKGluZGV4ID4gLTEpe1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fbGlzdF9oZWFkSW1nLnNwbGljZShpbmRleCwxKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2xpc3RfaGVhZEltZy5zcGxpY2UoMCwwLHVybCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2V7XHJcbiAgICAgICAgICAgIGNjLmxvYWRlci5sb2FkKHVybCwgZnVuY3Rpb24gKGVyciwgdGV4dHVyZSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGZyYW1lO1xyXG4gICAgICAgICAgICAgICAgaWYoZXJyKXtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygncmVxdWVzdCBoZWFkSW1nIGVycm9yPT0gJytlcnIpXHJcbiAgICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICBpZih0ZXh0dXJlKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZnJhbWU9bmV3IGNjLlNwcml0ZUZyYW1lKHRleHR1cmUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihmcmFtZSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9kaWN0X2hlYWRJbWdbdXJsXSA9IFtmcmFtZSwgdGV4dHVyZV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9saXN0X2hlYWRJbWcuc3BsaWNlKDAsMCx1cmwpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYodGhpcy5fbGlzdF9oZWFkSW1nLmxlbmd0aCA+IDMwKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbGFzdFVybCA9IHRoaXMuX2xpc3RfaGVhZEltZy5wb3AoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZU9uZUhlYWRJbWcobGFzdFVybCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZihjYWxsRnVuYykgY2FsbEZ1bmMoZnJhbWUpO1xyXG4gICAgICAgICAgICB9LmJpbmQodGhpcykpO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgLy/ph4rmlL7ljZXkuKrotYTmupBcclxuICAgIHJlbW92ZU9uZUhlYWRJbWcgOiBmdW5jdGlvbiAodXJsKSB7XHJcbiAgICAgICAgaWYodGhpcy5fZGljdF9oZWFkSW1nW3VybF0pIHtcclxuICAgICAgICAgICAgY2MubG9hZGVyLnJlbGVhc2VBc3NldCh0aGlzLl9kaWN0X2hlYWRJbWdbdXJsXVswXSk7XHJcbiAgICAgICAgICAgIGNjLmxvYWRlci5yZWxlYXNlQXNzZXQodGhpcy5fZGljdF9oZWFkSW1nW3VybF1bMV0pO1xyXG4gICAgICAgICAgICBkZWxldGUgdGhpcy5fZGljdF9oZWFkSW1nW3VybF07XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICAvL+mHiuaUvuaJgOaciei1hOa6kFxyXG4gICAgcmVtb3ZlQWxsSW1hZ2VzIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGZvcih2YXIgdXJsIGluIHRoaXMuX2RpY3RfaGVhZEltZyl7XHJcbiAgICAgICAgICAgIGNjLmxvYWRlci5yZWxlYXNlQXNzZXQodGhpcy5fZGljdF9oZWFkSW1nW3VybF1bMF0pO1xyXG4gICAgICAgICAgICBjYy5sb2FkZXIucmVsZWFzZUFzc2V0KHRoaXMuX2RpY3RfaGVhZEltZ1t1cmxdWzFdKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG59KVxyXG5cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gbWdyOyIsImlmKCFOdW1iZXIuaXNJbnRlZ2VyKU51bWJlci5pc0ludGVnZXI9ZnVuY3Rpb24odil7cmV0dXJuIFwibnVtYmVyXCI9PXR5cGVvZiB2JiYoMHx2KT09PXZ9O1xyXG5cclxuLy/mlbDmja7lr7nosaHnu5PmnoTkvZPvvIzlhbfkvZPnmoTlsZ7mgKflsIbpgJrov4fmnI3liqHnq6/mnaXlrozlloRcclxuLy9zb2NrZXTlr7nosaFcclxuLy92YXIgV2ViU29ja2V0ID0gV2ViU29ja2V0IHx8IHdpbmRvdy5XZWJTb2NrZXQgfHwgd2luZG93Lk1veldlYlNvY2tldDtcclxuaWYod2luZG93Lm5ldEJlYW5Jbml0ZWQgPT0gdW5kZWZpbmVkIHx8ICF3aW5kb3cubmV0QmVhbkluaXRlZCl7Ly/lj6rog73liJ3lp4vljJbkuIDmrKFcclxuICAgIHdpbmRvdy5OZXRCZWFuID0gbmV3IE9iamVjdCgpO1xyXG59XHJcbi8qKiDmtojmga/nsbss55So5p2l5bCB6KOF5raI5oGvLOino+aekOa2iOaBryAqL1xyXG52YXIgTXNnID0gZnVuY3Rpb24oKXtcclxuICAgIHRoaXMucG9zPTA7XHJcbiAgICB0aGlzLmRhdGEgPSBcIlwiO1xyXG4gICAgdGhpcy5sZW4gPSAwOyAvL+a2iOaBr+mVv+W6plxyXG4gICAgdGhpcy5kZWVwQ291bnQgPSAwOy8vZGVlcENvdW50IOeUqOS6jm9iamVjdOW1jOWll+ajgOa1iyw+PTEw5pe25LiN5YaN6Kej5p6QXHJcbn1cclxudmFyIGluaXRUaW1lID0gMTQwMDAwMDAwMDtcclxudmFyIE5ldFNlcnZlciA9IGZ1bmN0aW9uICh3c1VybCxtc2dIYW5kbGUscHJpbnRNc2cpe1xyXG4gICAgdGhpcy53c1VybD13c1VybDt0aGlzLm1zZ0hhbmRsZT1tc2dIYW5kbGU7dGhpcy5wcmludE1zZz1wcmludE1zZztcclxuICAgIHRoaXMudGltZURpZmYgPSBpbml0VGltZTsvL+aXtumXtOW3rj3lvZPliY3ml7bpl7Qt5pyN5Yqh5Zmo5pe26Ze0XHJcbiAgICB0aGlzLmdldFNlcnZlclRpbWU9ZnVuY3Rpb24oKXtcclxuICAgICAgICByZXR1cm4gbmV3IERhdGUoKS5nZXRUaW1lKCktdGhpcy50aW1lRGlmZjtcclxuICAgIH1cclxuICAgIHRoaXMucmVzZXRTZXJ2ZXJUaW1lPSBmdW5jdGlvbihzZXJ2ZXJUaW1lKXtcclxuICAgICAgICB0aGlzLnRpbWVEaWZmID0gTWF0aC5taW4odGhpcy50aW1lRGlmZiwgbmV3IERhdGUoKS5nZXRUaW1lKCktc2VydmVyVGltZSk7XHJcbiAgICB9XHJcbn1cclxuLy/nvZHnu5zmnI3liqHmmK/lkKblt7Lov57mjqVcclxuTmV0U2VydmVyLnByb3RvdHlwZS5pc0Nvbm5lY3RlZCA9IGZ1bmN0aW9uKCl7XHJcbiAgICByZXR1cm4gdGhpcy5zb2NrZXQgJiYgdGhpcy5zb2NrZXQucmVhZHlTdGF0ZSA9PSBXZWJTb2NrZXQuT1BFTjtcclxufVxyXG5OZXRTZXJ2ZXIucHJvdG90eXBlLmNvbm5lY3Q9ZnVuY3Rpb24oKXtcclxuICAgIGlmICghd2luZG93LldlYlNvY2tldCkge1xyXG4gICAgICAgIHdpbmRvdy5XZWJTb2NrZXQgPSB3aW5kb3cuTW96V2ViU29ja2V0O1xyXG4gICAgfVxyXG4gICAgaWYgKHdpbmRvdy5XZWJTb2NrZXQpIHtcclxuICAgICAgICB0aGlzLnNvY2tldCA9IG5ldyBXZWJTb2NrZXQodGhpcy53c1VybCk7XHJcbiAgICAgICAgdmFyIG5ldFNydiA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy5zb2NrZXQub25tZXNzYWdlID0gZnVuY3Rpb24oZXZlbnQpIHtcclxuICAgICAgICAgICAgLy/or7vlj5bmlbDmja5cclxuICAgICAgICAgICAgdmFyIG9iaiA9IE1zZy50b09iamVjdChldmVudC5kYXRhLCBuZXRTcnYpO1xyXG4gICAgICAgICAgICBpZihvYmo9PS0xKXtcclxuICAgICAgICAgICAgICAgIGlmKG5ldFNydi5vbk9wZW4pe1xyXG4gICAgICAgICAgICAgICAgICAgIG5ldFNydi5vbk9wZW4oKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmRpcihvYmopO1xyXG4gICAgICAgICAgICAgICAgLy8gaWYob2JqLmNvbnN0cnVjdG9yLmNsYXNzTmFtZSA9PSBcIk5iVGVzdFwiKXtcclxuICAgICAgICAgICAgICAgIC8vICAgICBuZXRTcnYuc2VuZChcIk5iVGVzdFwiLCBvYmopO1xyXG4gICAgICAgICAgICAgICAgLy8gfVxyXG4gICAgICAgICAgICAgICAgdmFyIGJ5SGFuZGxlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIC8v5aS65a6d5aSn5oiY6YCa6L+H5LiL6Z2i5Luj56CB5rOo5YWl5o6l5pS25raI5oGvLOi/lOWbnuWAvOihqOekuuaYr+WQpueUsem7mOiupGhhbmRsZeWkhOeQhlxyXG4gICAgICAgICAgICAgICAgLy8gbmV0U3J2Lm1zZ1JlY2VpdmVkID0gZnVuY3Rpb24gKGNsYXNzTmFtZSwgb2JqKSB7XHJcbiAgICAgICAgICAgICAgICAvLyAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgLy8gfVxyXG4gICAgICAgICAgICAgICAgaWYobmV0U3J2Lm1zZ1JlY2VpdmVkKXtcclxuICAgICAgICAgICAgICAgICAgICBieUhhbmRsZSA9IG5ldFNydi5tc2dSZWNlaXZlZChvYmouY29uc3RydWN0b3IuY2xhc3NOYW1lLCBvYmopO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy9pZihieUhhbmRsZSAmJiBuZXRTcnYubXNnSGFuZGxlW29iai5jb25zdHJ1Y3Rvci5jbGFzc05hbWVdKXtcclxuICAgICAgICAgICAgICAgIC8vICAgIG5ldFNydi5tc2dIYW5kbGVbb2JqLmNvbnN0cnVjdG9yLmNsYXNzTmFtZV0ob2JqKTtcclxuICAgICAgICAgICAgICAgIC8vfVxyXG4gICAgICAgICAgICAgICAgaWYobmV0U3J2LnByaW50TXNnKXtcclxuICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnXFxu5pS25Yiw5pWw5o2uIGV2ZW50Oicrb2JqLmNvbnN0cnVjdG9yLmV2ZW50ICtcIiAsZXZlbnROYW1lOlwiKyBvYmouY29uc3RydWN0b3IuY2xhc3NOYW1lKycsXFxuJyArIFRlc3RVdGlsLm9ialRvU3RyKG9iaikpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuc29ja2V0Lm9ub3BlbiA9IGZ1bmN0aW9uKGV2ZW50KSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VuZCgnMCcpOy8v5Y+R6YCB5LiA5Liq5a2X6IqC6I635Y+WanNvblxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnNvY2tldC5vbmNsb3NlID0gZnVuY3Rpb24oZXZlbnQpIHtcclxuICAgICAgICAgICAgaWYobmV0U3J2Lm9uQ2xvc2Upe1xyXG4gICAgICAgICAgICAgICAgbmV0U3J2Lm9uQ2xvc2UoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgIH1cclxufVxyXG4vKiog5Y+R6YCB5b+D6Lez5raI5oGvICovXHJcbk5ldFNlcnZlci5wcm90b3R5cGUuc2VuZEhlYXJ0PWZ1bmN0aW9uKCkge1xyXG4gICAgaWYgKHRoaXMuc29ja2V0LnJlYWR5U3RhdGUgPT0gV2ViU29ja2V0Lk9QRU4pIHtcclxuICAgICAgICB0aGlzLnNvY2tldC5zZW5kKFN0cmluZy5mcm9tQ2hhckNvZGUoOSkpO1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJEaXNjb25uZWN0IGZyb20gU2VydmVyLFBsZWFzZSB0cnkgYWdhaW4uLi5cIik7XHJcbiAgICB9XHJcbn1cclxuXHJcbk5ldFNlcnZlci5wcm90b3R5cGUuc2VuZD1mdW5jdGlvbih0eXBlLCBvYmopIHtcclxuICAgIGlmICh0aGlzLnNvY2tldC5yZWFkeVN0YXRlID09IFdlYlNvY2tldC5PUEVOKSB7XHJcbiAgICAgICAgdHJ5e1xyXG4gICAgICAgICAgICB2YXIgbXNnID0gTXNnLnRvTXNnKHR5cGUsIG9iaik7XHJcbiAgICAgICAgICAgIHRoaXMuc29ja2V0LnNlbmQobXNnKTtcclxuICAgICAgICB9Y2F0Y2goZSl7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJEaXNjb25uZWN0IGZyb20gU2VydmVyLFBsZWFzZSB0cnkgYWdhaW4uLi5cIik7XHJcbiAgICB9XHJcbn1cclxuLyoqIOaVsOaNruexu+WeiyzlkI3np7DlkI7pnaLluKZT5Li65YiX6KGoLE1BUOS4um1hcOaIluWvueixoSzlv4XpobvkuLrlpYfmlbAs5Y2V5pWw5o2u5YiZ5Li65YG25pWwICovXHJcbk1zZy5UWVBFX05VTT0wLE1zZy5UWVBFX05VTVM9MSxNc2cuVFlQRV9OVU1fTUFQPTIsXHJcbiAgICBNc2cuVFlQRV9TVFJJTkc9NCxNc2cuVFlQRV9TVFJJTkdTPTUsTXNnLlRZUEVfU1RSSU5HX01BUD02LFxyXG4gICAgTXNnLlRZUEVfQk9PTD04LE1zZy5UWVBFX0JPT0xTPTksTXNnLlRZUEVfQk9PTF9NQVA9MTA7XHJcbk1zZy5UeXBlID0gZnVuY3Rpb24gKGNvbGxlY3Rpb25UeXBlLCBqc29uQ2xhc3MpIHtcclxuICAgIHRoaXMuY29sbGVjdGlvblR5cGUgPSBjb2xsZWN0aW9uVHlwZTtcclxuICAgIHRoaXMuanNvbkNsYXNzID0ganNvbkNsYXNzO1xyXG4gICAgcmV0dXJuIHRoaXM7XHJcbn1cclxuXHJcbk1zZy5nZXRNc2cgPSBmdW5jdGlvbiAoZnJvbVNlcnZlckRhdGEpe1xyXG4gICAgdmFyIG0gPSBuZXcgTXNnKCk7XHJcbiAgICBtLmRhdGE9ZnJvbVNlcnZlckRhdGE7XHJcbiAgICByZXR1cm4gbTtcclxufVxyXG5cclxudmFyIFRZUEVfU0lOR0xFID0gMCxUWVBFX0FSUkFZID0gMSxUWVBFX0xJU1QgPSAyLFRZUEVfTUFQID0gMztcclxuTXNnLnByb3RvdHlwZS5sb2FkSnNvbnMgPSBmdW5jdGlvbiAobmV0U3J2KXtcclxuICAgIHZhciBnZXRKc29uID0gZnVuY3Rpb24oaW5kZXgpe1xyXG4gICAgICAgIGlmKCFOZXRCZWFuW2luZGV4XSlOZXRCZWFuW2luZGV4XSA9IGZ1bmN0aW9uKCl7IHJldHVybiB0aGlzO31cclxuICAgICAgICByZXR1cm4gTmV0QmVhbltpbmRleF07XHJcbiAgICB9XHJcbiAgICB2YXIganNvbkNvdW50ID0gdGhpcy5nZXRMb25nKCk7XHJcbiAgICBmb3IodmFyIGkgPSAwOyBpPGpzb25Db3VudDsgaSsrKXtcclxuICAgICAgICB2YXIgaW5kZXggPSB0aGlzLmdldExvbmcoKTtcclxuICAgICAgICB2YXIgdCA9IGdldEpzb24oaW5kZXgpO1xyXG4gICAgICAgIHQuZXZlbnQ9aW5kZXg7XHJcbiAgICAgICAgdC5jbGFzc05hbWU9dGhpcy5nZXRTdHJpbmcoKTtcclxuICAgICAgICB0LnNlbmRCeT10aGlzLmdldExvbmcoKTtcclxuICAgICAgICBOZXRCZWFuW3QuY2xhc3NOYW1lXSA9IHQ7XHJcbiAgICAgICAgdmFyIGZpZWxkQ291bnQgPSB0aGlzLmdldExvbmcoKTtcclxuICAgICAgICB0LmZpZWxkcyA9IG5ldyBBcnJheSgpO1xyXG4gICAgICAgIHQudHlwZXMgPSBuZXcgQXJyYXkoKTtcclxuICAgICAgICB0LnJlcXVpcmVkcyA9IG5ldyBBcnJheSgpO1xyXG4gICAgICAgIGZvcih2YXIgaiA9IDA7IGo8ZmllbGRDb3VudDsgaisrKXtcclxuICAgICAgICAgICAgdmFyIGZpZWxkSW5kZXggPSB0aGlzLmdldExvbmcoKTtcclxuICAgICAgICAgICAgdC5yZXF1aXJlZHNbZmllbGRJbmRleF09dGhpcy5nZXRMb25nKCk9PTE7XHJcbiAgICAgICAgICAgIHQuZmllbGRzW2ZpZWxkSW5kZXhdPXRoaXMuZ2V0U3RyaW5nKCk7XHJcbiAgICAgICAgICAgIHZhciBjb2xsZWN0aW9uVHlwZSA9IHRoaXMuZ2V0TG9uZygpO1xyXG4gICAgICAgICAgICB2YXIgZmllbGRUeXBlID0gdGhpcy5nZXRMb25nKCk7XHJcbiAgICAgICAgICAgIGlmKGZpZWxkVHlwZTw4KXsvL+WfuuacrOaVsOaNruexu+Wei1xyXG4gICAgICAgICAgICAgICAgZmllbGRUeXBlID0gZmllbGRUeXBlKjQgKyBjb2xsZWN0aW9uVHlwZTtcclxuICAgICAgICAgICAgICAgIHQudHlwZXNbZmllbGRJbmRleF0gPSBmaWVsZFR5cGU7XHJcbiAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgdC50eXBlc1tmaWVsZEluZGV4XSA9IG5ldyBNc2cuVHlwZShjb2xsZWN0aW9uVHlwZSxnZXRKc29uKGZpZWxkVHlwZS04KSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICB3aW5kb3cubmV0QmVhbkluaXRlZCA9IHRydWU7XHJcbn1cclxuXHJcbk1zZy50b09iamVjdCA9IGZ1bmN0aW9uIChmcm9tU2VydmVyRGF0YSwgbmV0U3J2KXtcclxuICAgIHZhciBtc2cgPSBNc2cuZ2V0TXNnKGZyb21TZXJ2ZXJEYXRhKTtcclxuICAgIHZhciBzZXJ2ZXJUaW1lID0gbXNnLmdldExvbmcoKTtcclxuICAgIG5ldFNydi5yZXNldFNlcnZlclRpbWUoc2VydmVyVGltZSk7XHJcbiAgICB2YXIgY2xhc3NJbmRleCA9IG1zZy5nZXRMb25nKCk7XHJcbiAgICBpZihjbGFzc0luZGV4PT0tMSl7XHJcbiAgICAgICAgbXNnLmxvYWRKc29ucyhuZXRTcnYpO1xyXG4gICAgICAgIHJldHVybiAtMTtcclxuICAgIH1cclxuICAgIHJldHVybiBtc2cudG9PYmplY3QoTmV0QmVhbltjbGFzc0luZGV4XSk7XHJcbn1cclxuXHJcbk1zZy50b01zZyA9IGZ1bmN0aW9uIChuYlR5cGUsIG9iail7XHJcbiAgICB2YXIgbXNnID0gbmV3IE1zZygpO1xyXG4gICAgdmFyIG5iID0gTmV0QmVhbltuYlR5cGVdO1xyXG4gICAgbXNnLnB1dExvbmcobmIuZXZlbnQpO1xyXG4gICAgbXNnLnRvTXNnKG5iLCBvYmopO1xyXG4gICAgcmV0dXJuIG1zZy5kYXRhO1xyXG59XHJcblxyXG5Nc2cucHJvdG90eXBlLnRvTXNnID0gZnVuY3Rpb24gKG5iLCBvKXtcclxuICAgIHZhciBmaWVsZENvdW50PTA7XHJcbiAgICB0aGlzLm1hcmsoKTsvL2ZpZWxkQ291bnRcclxuICAgIHZhciB0eXBlcyA9IG5iLnR5cGVzLCBmaWVsZHMgPSBuYi5maWVsZHMscmVxdWlyZWRzID0gbmIucmVxdWlyZWRzO1xyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBmaWVsZHMubGVuZ3RoOyBpICsrKSB7XHJcbiAgICAgICAgdmFyIHZhbCA9IG9bZmllbGRzW2ldXTtcclxuICAgICAgICBpZih2YWwgPT0gdW5kZWZpbmVkIHx8IHZhbCA9PSBudWxsKXtcclxuICAgICAgICAgICAgaWYocmVxdWlyZWRzW2ldKXtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcInJlcXVpcmVk55qE5YC85LiN6IO95Li656m6LE5ldEJlYW4uXCIrbmIuY2xhc3NOYW1lK1wiLlwiK25iLmZpZWxkc1tpXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZpZWxkQ291bnQgKys7XHJcbiAgICAgICAgdGhpcy5wdXRMb25nKGkpO1xyXG4gICAgICAgIHZhciBlcnJvciA9IHRoaXMudG9GaWVsZE1zZyh0eXBlc1tpXSwgdmFsKTtcclxuICAgICAgICBpZihlcnJvciAhPSBudWxsKXtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwi5Y+Y6YeP6LWL5YC86ZSZ6K+vLE5ldEJlYW4uXCIrbmIuY2xhc3NOYW1lK1wiLlwiK25iLmZpZWxkc1tpXVxyXG4gICAgICAgICAgICAgICAgK1wiPVwiK3ZhbCtcIizmlbDmja7nsbvlnovlupTor6XkuLo6XCIrZXJyb3IpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHRoaXMucHV0Qnl0ZU9uTWFyayhmaWVsZENvdW50KTtcclxufVxyXG5cclxuTXNnLnByb3RvdHlwZS50b0ZpZWxkTXNnID0gZnVuY3Rpb24gKHR5cGUsIHZhbCkge1xyXG4gICAgc3dpdGNoICh0eXBlKSB7XHJcbiAgICAgICAgY2FzZSBNc2cuVFlQRV9OVU06XHJcbiAgICAgICAgICAgIGlmKCFOdW1iZXIuaXNJbnRlZ2VyKHZhbCkpcmV0dXJuIFwi5pWw5a2X5pW05Z6LXCI7XHJcbiAgICAgICAgICAgIHRoaXMucHV0TG9uZyh2YWwpO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIE1zZy5UWVBFX1NUUklORzpcclxuICAgICAgICAgICAgaWYodHlwZW9mIHZhbCAhPSBcInN0cmluZ1wiKXJldHVybiBcIuWtl+espuS4suexu+Wei1wiO1xyXG4gICAgICAgICAgICB0aGlzLnB1dFN0cmluZyh2YWwpO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIE1zZy5UWVBFX0JPT0w6XHJcbiAgICAgICAgICAgIGlmKHR5cGVvZiB2YWwgIT0gXCJib29sZWFuXCIpcmV0dXJuIFwi5biD5bCU57G75Z6LXCI7XHJcbiAgICAgICAgICAgIHRoaXMucHV0Qm9vbGVhbih2YWwpO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBkZWZhdWx0OiB7XHJcbiAgICAgICAgICAgIHZhciBjb2xsZWN0aW9uVHlwZSA9IFRZUEVfU0lOR0xFO1xyXG4gICAgICAgICAgICB2YXIgZGF0YVR5cGUgPSBNc2cuVFlQRV9OVU07XHJcbiAgICAgICAgICAgIGlmKHR5cGVvZiB0eXBlID09IFwibnVtYmVyXCIpe1xyXG4gICAgICAgICAgICAgICAgY29sbGVjdGlvblR5cGUgPSB0eXBlJjM7XHJcbiAgICAgICAgICAgICAgICBkYXRhVHlwZSA9IHR5cGUtY29sbGVjdGlvblR5cGU7XHJcbiAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgY29sbGVjdGlvblR5cGUgPSB0eXBlLmNvbGxlY3Rpb25UeXBlO1xyXG4gICAgICAgICAgICAgICAgZGF0YVR5cGUgPSAtMTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzd2l0Y2goY29sbGVjdGlvblR5cGUpe1xyXG4gICAgICAgICAgICAgICAgY2FzZSBUWVBFX1NJTkdMRTp7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50b01zZyh0eXBlLCB2YWwpO1xyXG4gICAgICAgICAgICAgICAgfWJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBUWVBFX01BUDoge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubWFyaygpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBsZW4gPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGogaW4gdmFsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudG9GaWVsZE1zZyhNc2cuVFlQRV9TVFJJTkcsIGorXCJcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGRhdGFUeXBlIT0tMSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRvRmllbGRNc2coZGF0YVR5cGUsIHZhbFtqXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50b01zZyh0eXBlLmpzb25DbGFzcywgdmFsW2pdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZW4gKys7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHV0TG9uZ09uTWFyayh2YWwubGVuZ3RoKTtcclxuICAgICAgICAgICAgICAgIH1icmVhaztcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6IHsvL0FycmF5XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wdXRMb25nKHZhbC5sZW5ndGgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGogaW4gdmFsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGRhdGFUeXBlIT0tMSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRvRmllbGRNc2coZGF0YVR5cGUsIHZhbFtqXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50b01zZyh0eXBlLmpzb25DbGFzcywgdmFsW2pdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIG51bGw7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBAcGFyYW0ganNvbkNsYXNzIEpzb27lr7nlupTnmoTnsbtcclxuICogQHJldHVybnMg5raI5oGv6L2s5o2i55qE5a+56LGhXHJcbiAqL1xyXG5Nc2cucHJvdG90eXBlLnRvT2JqZWN0ID0gZnVuY3Rpb24gKGpzb25DbGFzcyl7XHJcbiAgICB2YXIgb2JqO1xyXG4gICAgdHJ5e1xyXG4gICAgICAgIG9iaiA9IG5ldyBqc29uQ2xhc3MoKTtcclxuICAgIH1jYXRjaCAoZSl7XHJcbiAgICAgICAgY29uc29sZS5sb2coZSk7XHJcbiAgICB9XHJcbiAgICB2YXIgZmllbGRMZW4gPSB0aGlzLmdldEJ5dGUoKTtcclxuICAgIGZvcih2YXIgaSA9IDA7IGkgPCBmaWVsZExlbjsgaSsrKXsvL+iOt+WPlmZpZWxkSW5kZXgs5YaN6I635Y+W5Y+Y6YeP5YC855qE5qih5byPXHJcbiAgICAgICAgdmFyIGZpZWxkSW5kZXggPSB0aGlzLmdldExvbmcoKTtcclxuICAgICAgICB2YXIganNvblR5cGUgPSBqc29uQ2xhc3MudHlwZXNbZmllbGRJbmRleF07XHJcbiAgICAgICAgdmFyIGlzT2JqZWN0ID0gdHlwZW9mIGpzb25UeXBlICE9ICdudW1iZXInO1xyXG4gICAgICAgIGlmKCghaXNPYmplY3QgJiYgKGpzb25UeXBlJjMhPTApKSB8fCAoaXNPYmplY3QgJiYganNvblR5cGUuY29sbGVjdGlvblR5cGUgIT0gVFlQRV9TSU5HTEUpKSB7Ly/lpYfmlbAs5YiX6KGoLOWFiOivu+WPluaVsOmHj1xyXG4gICAgICAgICAgICB2YXIgaXNNYXAgPSBmYWxzZTtcclxuICAgICAgICAgICAgaWYoIWlzT2JqZWN0KXtcclxuICAgICAgICAgICAgICAgIGlmKChqc29uVHlwZSAmIDMpID09IDMpIGlzTWFwID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIGpzb25UeXBlID0ganNvblR5cGUgLSAoanNvblR5cGUmMyk7XHJcbiAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgaXNNYXAgPSBqc29uVHlwZS5jb2xsZWN0aW9uVHlwZSA9PSBUWVBFX01BUDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2YXIgbGlzdExlbiA9IHRoaXMuZ2V0RmlsZWQoTXNnLlRZUEVfTlVNKTtcclxuICAgICAgICAgICAgaWYoIWlzTWFwKXtcclxuICAgICAgICAgICAgICAgIG9ialtqc29uQ2xhc3MuZmllbGRzW2ZpZWxkSW5kZXhdXSA9IG5ldyBBcnJheSgpO1xyXG4gICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgIG9ialtqc29uQ2xhc3MuZmllbGRzW2ZpZWxkSW5kZXhdXSA9IHt9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGZvcih2YXIgaiA9IDA7IGogPCBsaXN0TGVuOyBqKyspe1xyXG4gICAgICAgICAgICAgICAgdmFyIGtleSA9IGlzTWFwID8gdGhpcy5nZXRGaWxlZChNc2cuVFlQRV9TVFJJTkcpIDogajtcclxuICAgICAgICAgICAgICAgIG9ialtqc29uQ2xhc3MuZmllbGRzW2ZpZWxkSW5kZXhdXVtrZXldPXRoaXMuZ2V0RmlsZWQoanNvblR5cGUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIG9ialtqc29uQ2xhc3MuZmllbGRzW2ZpZWxkSW5kZXhdXT10aGlzLmdldEZpbGVkKGpzb25UeXBlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gb2JqO1xyXG59XHJcblxyXG5Nc2cucHJvdG90eXBlLmdldEZpbGVkID0gZnVuY3Rpb24gKGpzb25UeXBlKXtcclxuICAgIHN3aXRjaChqc29uVHlwZSl7XHJcbiAgICAgICAgY2FzZSBNc2cuVFlQRV9OVU06XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldExvbmcoKTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBNc2cuVFlQRV9TVFJJTkc6XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldFN0cmluZygpO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIE1zZy5UWVBFX0JPT0w6XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldEJvb2xlYW4oKTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMudG9PYmplY3QoanNvblR5cGUuanNvbkNsYXNzKTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICB9XHJcbn1cclxuXHJcbk1zZy5wcm90b3R5cGUuZ2V0TGVuID0gZnVuY3Rpb24oKXtcclxuICAgIHZhciBsZW4gPSB0aGlzLmRhdGEuY2hhckNvZGVBdCh0aGlzLnBvcysrKTtcclxuICAgIHZhciBieXRlQ291bnQgPSAobGVuPj40KSY3O1xyXG4gICAgbGVuPWxlbiYxNTtcclxuICAgIGZvcih2YXIgaT0wO2k8Ynl0ZUNvdW50O2krKyl7XHJcbiAgICAgICAgbGVuID0gbGVuIHwgKCB0aGlzLmRhdGEuY2hhckNvZGVBdCh0aGlzLnBvcysrKTw8KGkqNys0KSlcclxuICAgIH1cclxuICAgIHJldHVybiBsZW4rdGhpcy5wb3M7XHJcbn1cclxuXHJcbk1zZy5wcm90b3R5cGUucHV0TG9uZyA9IGZ1bmN0aW9uKHZhbCl7XHJcbiAgICB2YXIgcG9zaXRpdmUgPSB2YWw+MDtcclxuICAgIGlmKCFwb3NpdGl2ZSl2YWw9dmFsKi0xO1xyXG4gICAgdmFyIGJpdCA9IDA7IHZhciB0bXAgPSB2YWw7XHJcbiAgICB3aGlsZSh0bXA+MCl7XHJcbiAgICAgICAgdG1wPXBhcnNlSW50KHRtcC8yKTtcclxuICAgICAgICBiaXQrKztcclxuICAgIH1cclxuICAgIGJpdCA9IHBhcnNlSW50KChiaXQrMykvNyk7XHJcbiAgICB0aGlzLmRhdGEgKz0gU3RyaW5nLmZyb21DaGFyQ29kZSgoYml0PDw0KXwoKHBvc2l0aXZlPzA6MSk8PDMpIHwgKHZhbCY3KSk7Ly/pq5gxLTPlpJrkvZlieXRl5pWw77yM5L2ONOS9jeatozAo6LSfMSnvvIzkvY4xLTPkvY3mlbDmja7mnIDkvY4z5L2NXHJcbiAgICB2YWw9cGFyc2VJbnQodmFsLygxPDwzKSk7XHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGJpdDsgaSsrKSB7XHJcbiAgICAgICAgdGhpcy5kYXRhKz1TdHJpbmcuZnJvbUNoYXJDb2RlKHZhbCYxMjcpO1xyXG4gICAgICAgIHZhbCA9IHBhcnNlSW50KHZhbC8oMTw8NykpO1xyXG4gICAgfVxyXG59XHJcblxyXG5Nc2cucHJvdG90eXBlLmdldExvbmcgPSBmdW5jdGlvbigpe1xyXG4gICAgdmFyIGQgPSB0aGlzLmRhdGEuY2hhckNvZGVBdCh0aGlzLnBvcysrKTtcclxuICAgIHZhciBycyA9IGQmNztcclxuICAgIHZhciBieXRlQ291bnQgPSAoZD4+NCkmNztcclxuICAgIHZhciByYXRlID0gMTw8MzsvL+eUqOS5mOazleS7o+abv+S9jeenu+mBv+WFjea6ouWHulxyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBieXRlQ291bnQ7IGkrKykge1xyXG4gICAgICAgIHJzID0gcnMrKCh0aGlzLmRhdGEuY2hhckNvZGVBdCh0aGlzLnBvcysrKSYyNTUpKnJhdGUpO1xyXG4gICAgICAgIHJhdGUgKj0gKDE8PDcpO1xyXG4gICAgfVxyXG4gICAgcnMgPSBycyooKGQmOCk9PTA/MTotMSk7XHJcbiAgICByZXR1cm4gcnM7XHJcbn1cclxuXHJcbk1zZy5wcm90b3R5cGUubWFyayA9IGZ1bmN0aW9uKCl7XHJcbiAgICBpZighdGhpcy5tYXJrcyl0aGlzLm1hcmtzID0gbmV3IEFycmF5KCk7XHJcbiAgICB0aGlzLm1hcmtzLnB1c2godGhpcy5kYXRhKTtcclxuICAgIHRoaXMuZGF0YSA9XCJcIjtcclxufVxyXG5cclxuTXNnLnByb3RvdHlwZS5wdXRCeXRlT25NYXJrID0gZnVuY3Rpb24odmFsKXtcclxuICAgIHRoaXMuZGF0YSA9IHRoaXMubWFya3MucG9wKCkrU3RyaW5nLmZyb21DaGFyQ29kZSh2YWwmMTI3KSt0aGlzLmRhdGE7XHJcbn1cclxuXHJcbk1zZy5wcm90b3R5cGUucHV0TG9uZ09uTWFyayA9IGZ1bmN0aW9uKHZhbCl7XHJcbiAgICB2YXIgcnMgPSB0aGlzLm1hcmtzLnBvcCgpO1xyXG4gICAgdmFyIHBvc2l0aXZlID0gdmFsPjA7XHJcbiAgICBpZighcG9zaXRpdmUpdmFsPXZhbCotMTtcclxuICAgIHZhciBiaXQgPSAwOyB2YXIgdG1wID0gdmFsO1xyXG4gICAgd2hpbGUodG1wPjApe1xyXG4gICAgICAgIHRtcD1wYXJzZUludCh0bXAvMik7XHJcbiAgICAgICAgYml0Kys7XHJcbiAgICB9XHJcbiAgICBiaXQgPSBwYXJzZUludCgoYml0KzMpLzcpO1xyXG4gICAgcnMgKz0gU3RyaW5nLmZyb21DaGFyQ29kZSgoYml0PDw0KXwoKHBvc2l0aXZlPzA6MSk8PDMpIHwgKHZhbCY3KSk7Ly/pq5gxLTPlpJrkvZlieXRl5pWw77yM5L2ONOS9jeatozAo6LSfMSnvvIzkvY4xLTPkvY3mlbDmja7mnIDkvY4z5L2NXHJcbiAgICB2YWw9cGFyc2VJbnQodmFsLygxPDwzKSk7XHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGJpdDsgaSsrKSB7XHJcbiAgICAgICAgcnMrPVN0cmluZy5mcm9tQ2hhckNvZGUodmFsJjEyNyk7XHJcbiAgICAgICAgdmFsID0gcGFyc2VJbnQodmFsLygxPDw3KSk7XHJcbiAgICB9XHJcbiAgICB0aGlzLmRhdGEgPSBycyArIHRoaXMuZGF0YTtcclxufVxyXG5cclxuTXNnLnByb3RvdHlwZS5wdXRCeXRlID0gZnVuY3Rpb24odmFsKXtcclxuICAgIHJldHVybiB0aGlzLmRhdGErPVN0cmluZy5mcm9tQ2hhckNvZGUodmFsJjEyNyk7XHJcbn1cclxuXHJcbk1zZy5wcm90b3R5cGUuZ2V0Qnl0ZSA9IGZ1bmN0aW9uKCl7XHJcbiAgICByZXR1cm4gdGhpcy5kYXRhLmNoYXJDb2RlQXQodGhpcy5wb3MrKykmMTI3O1xyXG59XHJcbk1zZy5wcm90b3R5cGUucHV0Qm9vbGVhbiA9IGZ1bmN0aW9uKHZhbCl7XHJcbiAgICByZXR1cm4gdGhpcy5kYXRhKz1TdHJpbmcuZnJvbUNoYXJDb2RlKHZhbD8xOjApO1xyXG59XHJcblxyXG5Nc2cucHJvdG90eXBlLmdldEJvb2xlYW4gPSBmdW5jdGlvbigpe1xyXG4gICAgcmV0dXJuIHRoaXMuZGF0YS5jaGFyQ29kZUF0KHRoaXMucG9zKyspPT0xO1xyXG59XHJcblxyXG5Nc2cucHJvdG90eXBlLnB1dFN0cmluZz1mdW5jdGlvbih2YWwpe1xyXG4gICAgdmFyIGNvdW50ID0gMDtcclxuICAgIGZvcih2YXIgaT0wO2k8dmFsLmxlbmd0aDtpKyspe1xyXG4gICAgICAgIHZhciBjaGFyID0gdmFsLmNoYXJDb2RlQXQoaSk7XHJcbiAgICAgICAgaWYoY2hhcjwweDdmKXtcclxuICAgICAgICAgICAgY291bnQrPTE7XHJcbiAgICAgICAgfWVsc2UgaWYoY2hhcjw9MHg3ZmYpe1xyXG4gICAgICAgICAgICBjb3VudCs9MjtcclxuICAgICAgICB9ZWxzZSBpZihjaGFyPD0weEZGRkYpe1xyXG4gICAgICAgICAgICBjb3VudCs9MztcclxuICAgICAgICB9ZWxzZSB7XHJcbiAgICAgICAgICAgIGNvdW50Kz00O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHZhciBiaXQgPSAwLHRtcCA9IGNvdW50O1xyXG4gICAgd2hpbGUodG1wPjApe1xyXG4gICAgICAgIHRtcD10bXA+PjE7XHJcbiAgICAgICAgYml0Kys7XHJcbiAgICB9XHJcbiAgICBiaXQgPSBwYXJzZUludCgoYml0KzIpLzcpO1xyXG4gICAgdG1wID0gY291bnQ7XHJcbiAgICB0aGlzLmRhdGErPVN0cmluZy5mcm9tQ2hhckNvZGUoKGJpdDw8NSkgfCAodG1wJjMxKSk7XHJcbiAgICB0bXAgPSB0bXA+PjU7XHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGJpdDsgaSsrKSB7XHJcbiAgICAgICAgdGhpcy5kYXRhKz1TdHJpbmcuZnJvbUNoYXJDb2RlKHRtcCYxMjcpO1xyXG4gICAgICAgIHRtcCA9IHRtcD4+NztcclxuICAgIH1cclxuICAgIHRoaXMubGVuKz1jb3VudC12YWwubGVuZ3RoO1xyXG4gICAgdGhpcy5kYXRhKz12YWw7XHJcbn1cclxuXHJcbk1zZy5wcm90b3R5cGUuZ2V0U3RyaW5nPWZ1bmN0aW9uKCl7XHJcbiAgICB2YXIgZCA9ICB0aGlzLmRhdGEuY2hhckNvZGVBdCh0aGlzLnBvcysrKTtcclxuICAgIHZhciBsZW5Db3VudCA9IChkPj41KSYzOy8v6auYMuS9jeWtl+iKguaVsFxyXG4gICAgdmFyIGJ5dGVDb3VudCA9IGQmMzE7XHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbkNvdW50OyBpKyspIHtcclxuICAgICAgICBieXRlQ291bnQgPSBieXRlQ291bnR8KCh0aGlzLmRhdGEuY2hhckNvZGVBdCh0aGlzLnBvcysrKSYyNTUpPDwoaSo3KzUpKTtcclxuICAgIH1cclxuICAgIGlmKGJ5dGVDb3VudD09MClyZXR1cm4gXCJcIjtcclxuICAgIHZhciBjb3VudCA9IDAsc3RhcnQ9dGhpcy5wb3M7XHJcbiAgICBmb3IodmFyIGkgPSB0aGlzLnBvczsgaTwgdGhpcy5kYXRhLmxlbmd0aDtpKyspe1xyXG4gICAgICAgIHZhciBjaGFyID0gdGhpcy5kYXRhLmNoYXJDb2RlQXQodGhpcy5wb3MrKyk7XHJcbiAgICAgICAgaWYoY2hhcjwweDdmKXtcclxuICAgICAgICAgICAgY291bnQrPTE7XHJcbiAgICAgICAgfWVsc2UgaWYoY2hhcjw9MHg3ZmYpe1xyXG4gICAgICAgICAgICBjb3VudCs9MjtcclxuICAgICAgICB9ZWxzZSBpZihjaGFyPD0weEZGRkYpe1xyXG4gICAgICAgICAgICBjb3VudCs9MztcclxuICAgICAgICB9ZWxzZSB7XHJcbiAgICAgICAgICAgIGNvdW50Kz00O1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZihjb3VudD49Ynl0ZUNvdW50KXtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRoaXMuZGF0YS5zdWJzdHJpbmcoc3RhcnQsdGhpcy5wb3MpO1xyXG59XHJcbm1vZHVsZS5leHBvcnRzID0gTmV0U2VydmVyOyIsIi8vV2ViU29ja2V0IOeKtuaAgeWIpOWumiAgID09PeOAiyBXZWJTb2NrZXQucmVhZHlTdGF0ZVxyXG4vL09QRU4gICAgICDov57mjqXlt7LlvIDlkK/lubblh4blpIflpb3ov5vooYzpgJrkv6HjgIJcclxuLy9DTE9TSU5HICDov57mjqXmraPlnKjlhbPpl63nmoTov4fnqIvkuK3jgIJcclxuLy9DTE9TRUQgICAg6L+e5o6l5bey57uP5YWz6Zet77yM5oiW6ICF6L+e5o6l5peg5rOV5bu656uL44CCXHJcbi8vQ09OTkVDVElORyDov57mjqXov5jmsqHlvIDlkK/jgIJcclxuXHJcbi8vd2ViU29ja2V0ICDnrqHnkIblmahcclxudmFyIE5ldFNlcnZlciA9IHJlcXVpcmUoJ1NvY2tldENlbnRlcicpO1xyXG52YXIgc29ja2V0TWdyID0gY2MuQ2xhc3Moe1xyXG4gICAgLy9leHRlbmRzOiBjYy5Db21wb25lbnQsXHJcbiAgICBfc29ja2V0Q2VudGVyIDogbnVsbCwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5b2T5YmN5L2/55So55qEc29ja2V05a+56LGhXHJcbiAgICBfZGljdF9zaG9ydEV2ZW50cyA6IG51bGwsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/nn63lr7nmjqXnmoTkuovku7bvvIzkuIDoiKzmmK/kuLvliqjnmoTor7fmsYJcclxuICAgIF9kaWN0X2xvbmdFdmVudHMgOiBudWxsLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+mVv+WvueaOpeeahOS6i+S7tu+8jOiiq+WKqOaOpeaUtueahOS6i+S7tlxyXG4gICAgX2RpY3RfcGF1c2VJbmZvIDogbnVsbCwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5pqC5YGc5pe25YCZ5L+d5a2Y5LiL5p2l55qE5L+h5oGvXHJcbiAgICBfbGlzdF9zZW5kRmFpbCA6IG51bGwsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/lj5HpgIHor7fmsYLlpLHotKXnmoTljY/orq5cclxuICAgIF9pc0hhc0JyZWFrIDogbnVsbCwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+aYr+WQpuW3sue7j+err+i/h+e9kee7nFxyXG5cclxuICAgIF9oZWFydEludGVydmFsSUQgOiBudWxsLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+W/g+i3s+eahOW+queOr0lEXHJcbiAgICBfdGltZU91dElEMSA6IG51bGwsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v6K+35rGC6LaF5pe2SURcclxuICAgIF9kaWN0X3JlY3ZOZXRTcGVjaWFsIDogbnVsbCwgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+aOpeaUtuWIsOW8guW4uOWkhOeQhuS/oeaBr1xyXG4gICAgcHJvcGVydGllczoge1xyXG5cclxuICAgIH0sXHJcblxyXG4gICAgLy8gdXNlIHRoaXMgZm9yIGluaXRpYWxpemF0aW9uXHJcbiAgICBjdG9yOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgLy9HRy5zb2NrZXRNZ3IgPSB0aGlzO1xyXG5cclxuICAgICAgICB0aGlzLl9kaWN0X3Nob3J0RXZlbnRzID0ge307XHJcbiAgICAgICAgdGhpcy5fZGljdF9sb25nRXZlbnRzID0ge307XHJcbiAgICAgICAgdGhpcy5fZGljdF9yZWN2TmV0U3BlY2lhbCA9IHt9O1xyXG4gICAgICAgIHRoaXMuX2lzSGFzQnJlYWsgPSBmYWxzZTtcclxuICAgIH0sXHJcblxyXG4gICAgLy/lop7liqBzb2NrZXTpk77mjqVcclxuICAgIGNvbm5lY3RTb2NrZXQgOiBmdW5jdGlvbiAoY2FsbEZ1bmMpIHtcclxuICAgICAgICBpZih0aGlzLl9zb2NrZXRDZW50ZXIpIHJldHVybjtcclxuICAgICAgICAvL+aWsOW7uuS4gOS4qnNvY2tldOmTvuaOpVxyXG4gICAgICAgIHZhciBob3N0LCBwb3J0O1xyXG4gICAgICAgIGlmKGNjLnN5cy5pc05hdGl2ZSl7XHJcbiAgICAgICAgICAgIGhvc3QgPSAnMTkyLjE2OC4wLjEwMC9wbGF5ZXIvJztcclxuICAgICAgICAgICAgcG9ydCA9IDg4ODg7Ly/pu5jorqTnq6/lj6NcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgaG9zdCA9IEdHLndlYkhhbmRsZXIuZ2V0TG9jYWxIb3N0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChob3N0LmluZGV4T2YoXCI6XCIpID4gLTEpaG9zdCA9IGhvc3Quc3Vic3RyaW5nKDAsIGhvc3QuaW5kZXhPZihcIjpcIikpO1xyXG4gICAgICAgIGlmKGhvc3QgPT0gXCJcIilob3N0PVwibG9jYWxob3N0XCI7XHJcbiAgICAgICAgaWYod2luZG93LndzUG9ydCkgcG9ydCA9IHdpbmRvdy53c1BvcnQ7XHJcbiAgICAgICAgdmFyIHVybCA9IFwid3M6Ly9cIitob3N0K1wiOlwiK3BvcnQrXCIvd3NcIjtcclxuXHJcbiAgICAgICAgdGhpcy5fc29ja2V0Q2VudGVyID0gbmV3IE5ldFNlcnZlcih1cmwsIG51bGwsIGZhbHNlKTtcclxuICAgICAgICB0aGlzLl9zb2NrZXRDZW50ZXIubXNnUmVjZWl2ZWQgPSB0aGlzLnJlY2VpdmVNc2cuYmluZCh0aGlzKTtcclxuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy5fc29ja2V0Q2VudGVyLm9uT3BlbiA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgc2VsZi5fd2hlbk9wZW4oY2FsbEZ1bmMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLl9zb2NrZXRDZW50ZXIub25DbG9zZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgc2VsZi5fd2hlbkNsb3NlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuX2Nvbm5lY3QoKTtcclxuICAgIH0sXHJcblxyXG4gICAgX3doZW5PcGVuIDogZnVuY3Rpb24gKGNhbGxGdW5jKSB7XHJcbiAgICAgICAgaWYodGhpcy5fbGlzdF9zZW5kRmFpbCl7XHJcbiAgICAgICAgICAgIHZhciBuZXREYXRhO1xyXG4gICAgICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgdGhpcy5fbGlzdF9zZW5kRmFpbC5sZW5ndGg7IGkgKyspe1xyXG4gICAgICAgICAgICAgICAgbmV0RGF0YSA9IHRoaXMuX2xpc3Rfc2VuZEZhaWxbaV1cclxuICAgICAgICAgICAgICAgIHRoaXMuU2VuZE1zZyhuZXREYXRhLm5ldFR5cGUsIG5ldERhdGEubXNnRGljdCwgbmV0RGF0YS5jYWxsRnVuYyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5fbGlzdF9zZW5kRmFpbCA9IG51bGw7XHJcbiAgICAgICAgaWYodGhpcy5faXNIYXNCcmVhaykge1xyXG4gICAgICAgICAgICAvL+WmguaenOW3sue7j+aWrei/h+mTvuaOpe+8jOWImemHjei/nueahOaXtuWAmemcgOimgei/lOWbnuaIv+mXtFxyXG4gICAgICAgICAgICBHRy50b3BUb3VjaExheWVyLmNsb3NlTmV0UmVxdWVzdCgpO1xyXG4gICAgICAgICAgICB0aGlzLl9jYW5jZWxUaW1lT3V0Q2hlY2soKTtcclxuICAgICAgICAgICAgdGhpcy5faXNIYXNCcmVhayA9IGZhbHNlO1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMuX2lzTGltaXQpIGlmKEdHLmdldEdhbWVUeXBlKCkgIT0gR19UWVBFLmdhbWVNb2R1bGUucGxhdGZvcm0pIEdHLmV4aXRIb21lKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghdGhpcy5faXNMaW1pdCkgR0cubG9naW5Tb2NrZXQoKTtcclxuICAgICAgICB0aGlzLl9pc0xpbWl0ID0gZmFsc2U7XHJcblxyXG4gICAgICAgIGlmKGNhbGxGdW5jKSB7XHJcbiAgICAgICAgICAgIGNhbGxGdW5jKHRydWUpO1xyXG4gICAgICAgICAgICBjYWxsRnVuYyA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIF93aGVuQ2xvc2UgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5fY29ubmVjdCgpO1xyXG4gICAgICAgIHRoaXMuX2lzSGFzQnJlYWsgPSB0cnVlO1xyXG4gICAgICAgIGlmICh0aGlzLl9pc0xpbWl0KSB0aGlzLl9zdGFydFRpbWVPdXRDaGVjaygpO1xyXG4gICAgfSxcclxuXHJcbiAgICBfY29ubmVjdCA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZih0aGlzLl9zb2NrZXRDZW50ZXIpIHtcclxuICAgICAgICAgICAgdGhpcy5fc29ja2V0Q2VudGVyLmNvbm5lY3QoKTtcclxuICAgICAgICAgICAgdGhpcy5fYWRkSGVhcnRJbmZvKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICBnZXRJc0Nvbm5lY3RlZCA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gQm9vbGVhbih0aGlzLl9zb2NrZXRDZW50ZXIgJiYgdGhpcy5fc29ja2V0Q2VudGVyLmlzQ29ubmVjdGVkKCkpXHJcbiAgICB9LFxyXG5cclxuICAgIGdldFNlcnZlclRpbWUgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYodGhpcy5fc29ja2V0Q2VudGVyKSByZXR1cm4gdGhpcy5fc29ja2V0Q2VudGVyLmdldFNlcnZlclRpbWUoKVxyXG4gICAgICAgIGVsc2UgcmV0dXJuIChuZXcgRGF0ZSgpKS5nZXRUaW1lKClcclxuICAgIH0sXHJcblxyXG4gICAgLy/lj5HpgIHmlbDmja5cclxuICAgIFNlbmRNc2cgOiBmdW5jdGlvbihuZXRUeXBlLCBtc2dEaWN0LCBjYWxsRnVuYykge1xyXG4gICAgICAgIGlmKHRoaXMuX2RpY3Rfc2hvcnRFdmVudHMuaGFzT3duUHJvcGVydHkobmV0VHlwZSkpIHJldHVybjtcclxuXHJcbiAgICAgICAgdmFyIG1zZztcclxuICAgICAgICBpZihOZXRCZWFuW25ldFR5cGVdKXtcclxuICAgICAgICAgICAgbXNnID0gbmV3IE5ldEJlYW5bbmV0VHlwZV0oKTtcclxuICAgICAgICAgICAgZm9yKHZhciBrZXkgaW4gbXNnRGljdCl7XHJcbiAgICAgICAgICAgICAgICBtc2dba2V5XSA9IG1zZ0RpY3Rba2V5XTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBpZihjYWxsRnVuYykgdGhpcy5fZGljdF9zaG9ydEV2ZW50c1tuZXRUeXBlXSA9IGNhbGxGdW5jO1xyXG4gICAgICAgIH1lbHNlIHtcclxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ25vIHRoaXMgbmV0dHlwZSBvbiBzZXJ2ZXI9PT0nK25ldFR5cGUpXHJcbiAgICAgICAgICAgIGlmKCF0aGlzLl9saXN0X3NlbmRGYWlsKSB0aGlzLl9saXN0X3NlbmRGYWlsID0gW107XHJcbiAgICAgICAgICAgIHRoaXMuX2xpc3Rfc2VuZEZhaWwucHVzaCh7XHJcbiAgICAgICAgICAgICAgICBuZXRUeXBlIDogbmV0VHlwZSxcclxuICAgICAgICAgICAgICAgIG1zZ0RpY3QgOiBtc2dEaWN0LFxyXG4gICAgICAgICAgICAgICAgY2FsbEZ1bmMgOiBjYWxsRnVuY1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZihjYWxsRnVuYykgdGhpcy5fYXV0b1JlZ2lzdGVyTGlzdGVuZXJGdW5jKG5ldFR5cGUsIGNhbGxGdW5jKTtcclxuICAgICAgICAvL2NvbnNvbGUubG9nKCflj5HpgIHnmoTmlbDmja7mmK8nKVxyXG4gICAgICAgIC8vY29uc29sZS5sb2cobXNnKVxyXG4gICAgICAgIHRoaXMuX3NvY2tldENlbnRlci5zZW5kKG5ldFR5cGUsIG1zZyk7XHJcbiAgICB9LFxyXG4gICAgX2F1dG9SZWdpc3Rlckxpc3RlbmVyRnVuYyA6IGZ1bmN0aW9uIChuZXRUeXBlLCBjYWxsRnVuYykge1xyXG4gICAgICAgIHN3aXRjaCAobmV0VHlwZSl7XHJcbiAgICAgICAgICAgIGNhc2UgTmV0VHlwZS5zX2VudGVySG91c2U6XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlZ2lzdGVyTG9uZyhOZXRUeXBlLnJfZW50ZXJIb3VzZVJldHVybiwgY2FsbEZ1bmMpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWtcclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICAvL+aOpeWPl+aVsOaNrlxyXG4gICAgcmVjZWl2ZU1zZyA6IGZ1bmN0aW9uKG5ldFR5cGUsIHJlY3ZEYXRhKSB7XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZygn5o6l5Y+X5pWw5o2uOjogJytuZXRUeXBlKVxyXG4gICAgICAgIC8vY29uc29sZS5sb2cocmVjdkRhdGEpXHJcbiAgICAgICAgLy9jb25zb2xlLmxvZyhyZWN2RGF0YS50aXAudGlwKVxyXG4gICAgICAgIHZhciBnYW1lTWFpbiA9IGNjLmZpbmQoJ0NhbnZhcycpO1xyXG4gICAgICAgIC8v5ri45oiP5bey57uP5YWz6Zet77yM5LiN6ZyA6KaB5raI5oGvXHJcbiAgICAgICAgaWYoIWdhbWVNYWluIHx8ICFnYW1lTWFpbi5hY3RpdmUpIHJldHVybiB0cnVlO1xyXG5cclxuICAgICAgICBpZihHRy5nZXRHYW1lU3RhdGUoKSA9PSBHX1RZUEUud2ViR2FtZVN0YXRlLnBhdXNlKXtcclxuICAgICAgICAgICAgLy/muLjmiI/mmoLlgZzkuoZcclxuICAgICAgICAgICAgdGhpcy5fc2F2ZVBhdXNlSW5mbyhuZXRUeXBlLCByZWN2RGF0YSk7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8v6K+l5Yqf6IO95Ye95pWw5rKh5pyJ5a6M5ZaE77yM5Y+q5Lya6L+U5ZuedHJ1ZVxyXG4gICAgICAgIHZhciBpc09rID0gdGhpcy5fY2hlY2tDb2RlKHJlY3ZEYXRhKTtcclxuICAgICAgICBpZighaXNPayl7XHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdnZXQgc2VydmVyIGRhdGEgZmFpbCcrcmVjdkRhdGEudGlwLnRpcClcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvL+mcgOimgeWFqOWxgOaOpeaUtua2iOaBr+eahOWNj+iurlxyXG4gICAgICAgIHRoaXMuX2dsb2JhbE5ldFR5cGUobmV0VHlwZSwgcmVjdkRhdGEpO1xyXG4gICAgICAgIC8v5Yqg6L295Zy65pmv5Lit5a+55p+Q5Lqb5Y2P6K6u6L+b6KGM5aSE55CGXHJcbiAgICAgICAgaWYoR0cuZ2V0SXNMb2FkaW5nKCkpIHtcclxuICAgICAgICAgICAgdmFyIGlzU3RvcCA9IHRoaXMuX3NldExvYWRpbmdOZXREYXRhKG5ldFR5cGUsIHJlY3ZEYXRhKTtcclxuICAgICAgICAgICAgaWYoaXNTdG9wKSByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgdmFyIGlzQ29udGludWUgPSB0cnVlO1xyXG4gICAgICAgIGlmKHRoaXMuX2RpY3Rfc2hvcnRFdmVudHMgJiYgdGhpcy5fZGljdF9zaG9ydEV2ZW50c1tuZXRUeXBlXSl7XHJcbiAgICAgICAgICAgIC8v5Li75Yqo6K+35rGC55qE5raI5oGvXHJcbiAgICAgICAgICAgIHRoaXMuX2RpY3Rfc2hvcnRFdmVudHNbbmV0VHlwZV0ocmVjdkRhdGEpO1xyXG4gICAgICAgICAgICBkZWxldGUgdGhpcy5fZGljdF9zaG9ydEV2ZW50c1tuZXRUeXBlXTtcclxuICAgICAgICAgICAgaXNDb250aW51ZSA9IGZhbHNlO1xyXG4gICAgICAgIH1lbHNlIGlmKHRoaXMuX2RpY3RfbG9uZ0V2ZW50cyAmJiB0aGlzLl9kaWN0X2xvbmdFdmVudHNbbmV0VHlwZV0pe1xyXG4gICAgICAgICAgICAvL1xyXG4gICAgICAgICAgICB0aGlzLl9kaWN0X2xvbmdFdmVudHNbbmV0VHlwZV0ocmVjdkRhdGEpO1xyXG4gICAgICAgICAgICBpc0NvbnRpbnVlID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBpc0NvbnRpbnVlXHJcbiAgICB9LFxyXG5cclxuICAgIC8v5rOo5YaM6ZW/55uR5ZCs5LqL5Lu2XHJcbiAgICByZWdpc3RlckxvbmcgOiBmdW5jdGlvbiAobmV0VHlwZSwgY2FsbEZ1bmMpIHtcclxuICAgICAgICAvL2lmKHRoaXMuX2RpY3RfbG9uZ0V2ZW50cy5oYXNPd25Qcm9wZXJ0eShuZXRUeXBlKSkgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgdGhpcy5fZGljdF9sb25nRXZlbnRzW25ldFR5cGVdID0gY2FsbEZ1bmM7XHJcbiAgICB9LFxyXG4gICAgLy/lj5bmtojmn5DkuKrplb/nm5HlkKxcclxuICAgIGNhbmNlbExvbmcgOiBmdW5jdGlvbiAobmV0VHlwZSkge1xyXG4gICAgICAgIGRlbGV0ZSB0aGlzLl9kaWN0X2xvbmdFdmVudHNbbmV0VHlwZV07XHJcbiAgICB9LFxyXG4gICAgLy/lj5bmtojmiYDmnInplb/nm5HlkKxcclxuICAgIGNhbmNlbEFsbExvbmdMaXN0ZW4gOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgZm9yKHZhciBrZXkgaW4gdGhpcy5fZGljdF9sb25nRXZlbnRzKXtcclxuICAgICAgICAgICAgZGVsZXRlIHRoaXMuX2RpY3RfbG9uZ0V2ZW50c1trZXldXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZvcih2YXIga2V5IGluIHRoaXMuX2RpY3Rfc2hvcnRFdmVudHMpe1xyXG4gICAgICAgICAgICBkZWxldGUgdGhpcy5fZGljdF9zaG9ydEV2ZW50c1trZXldXHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICAvLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblxyXG4gICAgLy/ojrflj5bkuKTkuKrml7bpl7TmiLPnmoTpl7TpmpRcclxuICAgIGdldE9mZlNlY29uZHMgOiBmdW5jdGlvbiAoc3RhcnRUaW1lLCBlbmRUaW1lKSB7XHJcbiAgICAgICAgcmV0dXJuIE1hdGgubWF4KE1hdGguZmxvb3IoKGVuZFRpbWUgLSBzdGFydFRpbWUpICogMC4wMDEpLCAwKTtcclxuICAgIH0sXHJcblxyXG4gICAgLy/mt7vliqDlv4Pot7NcclxuICAgIF9hZGRIZWFydEluZm8gOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYoR19EQVRBLmlzTnVtYmVyKHRoaXMuX2hlYXJ0SW50ZXJ2YWxJRCkpe1xyXG4gICAgICAgICAgICBjbGVhckludGVydmFsKHRoaXMuX2hlYXJ0SW50ZXJ2YWxJRCk7XHJcbiAgICAgICAgICAgIHRoaXMuX2hlYXJ0SW50ZXJ2YWxJRCA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBoZWFydExhc3RUaW1lID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XHJcbiAgICAgICAgdGhpcy5faGVhcnRJbnRlcnZhbElEID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgbm93ID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XHJcbiAgICAgICAgICAgIGlmKG5vdyAtIGhlYXJ0TGFzdFRpbWUgPj0gMzUwMCl7Ly/lv4Pot7Pov57mjqXoh7PlsJHmr48zLjXnp5LkuIDmrKFcclxuICAgICAgICAgICAgICAgIGlmKHRoaXMuX3NvY2tldENlbnRlciAmJiB0aGlzLl9zb2NrZXRDZW50ZXIuaXNDb25uZWN0ZWQoKSkgdGhpcy5fc29ja2V0Q2VudGVyLnNlbmRIZWFydCgpO1xyXG4gICAgICAgICAgICAgICAgaGVhcnRMYXN0VGltZSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfS5iaW5kKHRoaXMpLCA1MDAsIG51bGwpO1xyXG4gICAgfSxcclxuXHJcbiAgICAvL+ajgOafpeaYr+WQpuaYr+WPr+eUqOS/oeaBr1xyXG4gICAgX2NoZWNrQ29kZSA6IGZ1bmN0aW9uIChyZWN2RGF0YSkge1xyXG4gICAgICAgIGlmKCFyZWN2RGF0YS50aXApIHJldHVybiB0cnVlO1xyXG4gICAgICAgIHN3aXRjaCAocmVjdkRhdGEudGlwLmNvZGUpe1xyXG4gICAgICAgICAgICBjYXNlIEdfVFlQRS5zZXJ2ZXJDb2RlVHlwZS5zdWNjZXNzOlxyXG4gICAgICAgICAgICAgICAgLy9zdWNjZXNzXHJcbiAgICAgICAgICAgICAgICBicmVha1xyXG4gICAgICAgICAgICBjYXNlIEdfVFlQRS5zZXJ2ZXJDb2RlVHlwZS5zZXJ2ZXJFcnIxOlxyXG4gICAgICAgICAgICAgICAgLy/mnI3liqHlmajlv5lcclxuICAgICAgICAgICAgICAgIEdHLnRpcHNNZ3Iuc2hvd0NvbmZpcm1UaXBfT05FKHJlY3ZEYXRhLnRpcC50aXApO1xyXG4gICAgICAgICAgICAgICAgLyosIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICBHRy5leGl0SG9tZSgpO1xyXG4gICAgICAgICAgICAgICAgIH0qL1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWVcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9LFxyXG5cclxuICAgIC8v6YCa6L+H5p+Q5Lqb5Y2P6K6u5Yi35paw546p5a626YeR5biB5raI5oGvXHJcbiAgICBfZ2xvYmFsTmV0VHlwZSA6IGZ1bmN0aW9uIChuZXRUeXBlLCByZWN2RGF0YSkge1xyXG4gICAgICAgIHN3aXRjaCAobmV0VHlwZSl7XHJcbiAgICAgICAgICAgIGNhc2UgTmV0VHlwZS5yX21pbmVIYXZlR3JhYjpcclxuICAgICAgICAgICAgICAgIHZhciB0aXAgPSByZWN2RGF0YS50aXA7XHJcbiAgICAgICAgICAgICAgICBpZih0aXAuY29kZSAhPSBHX1RZUEUuc2VydmVyQ29kZVR5cGUuc3VjY2Vzcykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHZhciBkYXRhT2JqID0gR19PQkouZGF0YV9uYlNlbGYoKTtcclxuICAgICAgICAgICAgICAgIGRhdGFPYmouYmFsYW5jZSA9IHJlY3ZEYXRhLnBsYXllci5iYWxhbmNlO1xyXG4gICAgICAgICAgICAgICAgZGF0YU9iai51c2FibGVCYWxhbmNlID0gcmVjdkRhdGEudXNhYmxlQmFsYW5jZTtcclxuICAgICAgICAgICAgICAgIEdHLmdldFBsYXllcigpLnNldFBsYXllckdvbGQoZGF0YU9iaik7XHJcbiAgICAgICAgICAgICAgICAvL0dHLkxpc3RlbmVyLmRpc3BhdGNoRXZlbnRFWChHX1RZUEUuZ2xvYmFsTGlzdGVuZXIucGxheWVyR29sZCwgZGF0YU9iaik7XHJcbiAgICAgICAgICAgICAgICBicmVha1xyXG4gICAgICAgICAgICBjYXNlIE5ldFR5cGUucl9uYlNlbGY6XHJcbiAgICAgICAgICAgICAgICB2YXIgdGlwID0gcmVjdkRhdGEudGlwO1xyXG4gICAgICAgICAgICAgICAgaWYoIXRpcCB8fCB0aXAuY29kZSA9PSBHX1RZUEUuc2VydmVyQ29kZVR5cGUuc3VjY2Vzcykge1xyXG4gICAgICAgICAgICAgICAgICAgIC8v5o6l5pS25oiQ5YqfXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRhdGFPYmogPSBHX09CSi5kYXRhX25iU2VsZigpO1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGFPYmouYmFsYW5jZSA9IHJlY3ZEYXRhLmJhbGFuY2U7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YU9iai51c2FibGVCYWxhbmNlID0gcmVjdkRhdGEudXNhYmxlQmFsYW5jZTtcclxuICAgICAgICAgICAgICAgICAgICBHRy5nZXRQbGF5ZXIoKS5zZXRQbGF5ZXJHb2xkKGRhdGFPYmopO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgYnJlYWtcclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICAvL+aLpuaIquWcuuaZr+WKoOi9veS4remAlOS8oOWFpeeahOaVsOaNrlxyXG4gICAgX3NldExvYWRpbmdOZXREYXRhIDogZnVuY3Rpb24gKG5ldFR5cGUsIHJlY3ZEYXRhKSB7XHJcblxyXG4gICAgICAgIHN3aXRjaCAobmV0VHlwZSl7XHJcbiAgICAgICAgICAgIGNhc2UgTmV0VHlwZS5yX2J1bGwxMDBfcmVTdGFydEdhbWU6XHJcbiAgICAgICAgICAgICAgICAvL+WIt+aWsOi/m+aIv+S/oeaBr1/nmb7kurpcclxuICAgICAgICAgICAgICAgIEdHLmN1ck1nci51cGRhdGVFbnRlckhvbWVEYXRhKHJlY3ZEYXRhKTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgaG9tZURhdGEgPSBHRy5nZXRQbGF5ZXIoKS5nZXRJbkhvbWVEYXRhKCk7XHJcbiAgICAgICAgICAgICAgICBpZihob21lRGF0YSl7XHJcbiAgICAgICAgICAgICAgICAgICAgaG9tZURhdGEubmV0X3Jlc2V0SG9tZURhdGEgPSByZWN2RGF0YTtcclxuICAgICAgICAgICAgICAgICAgICBHRy5nZXRQbGF5ZXIoKS5zZXRJbkhvbWVEYXRhKGhvbWVEYXRhKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIE5ldFR5cGUucl9ncmFiX3JlU3RhcnRHYW1lOlxyXG4gICAgICAgICAgICAgICAgLy/liLfmlrDov5vmiL/kv6Hmga9f5oq85a6dXHJcbiAgICAgICAgICAgICAgICBHRy5jdXJNZ3IudXBkYXRlRW50ZXJIb21lRGF0YShyZWN2RGF0YSk7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGhvbWVEYXRhID0gR0cuZ2V0UGxheWVyKCkuZ2V0SW5Ib21lRGF0YSgpO1xyXG4gICAgICAgICAgICAgICAgaWYoaG9tZURhdGEpe1xyXG4gICAgICAgICAgICAgICAgICAgIGhvbWVEYXRhLm5ldF9yZXNldEhvbWVEYXRhID0gcmVjdkRhdGE7XHJcbiAgICAgICAgICAgICAgICAgICAgR0cuZ2V0UGxheWVyKCkuc2V0SW5Ib21lRGF0YShob21lRGF0YSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBOZXRUeXBlLnJfZW50ZXJIb3VzZVJldHVybjpcclxuICAgICAgICAgICAgICAgIC8v5Yqg6L295pe25YCZ5Y+v5Lul6K+35rGC5YWl5oi/XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2VcclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdHJ1ZVxyXG4gICAgfSxcclxuXHJcbiAgICAvLz09PT09PT09PT09PT09PT09PT09PeaaguWBnOWkhOeQhlxyXG5cclxuICAgIC8v5L+d5a2Y5pqC5YGc5pe25YCZ5o6l5pS255qE5pWw5o2uXHJcbiAgICBfc2F2ZVBhdXNlSW5mbyA6IGZ1bmN0aW9uIChuZXRUeXBlLCByZWN2RGF0YSkge1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCd3aGVuIGdhbWUgcGF1c2UgOjonK25ldFR5cGUpXHJcblxyXG4gICAgICAgIC8vIGlmKCF0aGlzLl9kaWN0X3BhdXNlSW5mbykgdGhpcy5fZGljdF9wYXVzZUluZm8gPSB7fTtcclxuXHJcbiAgICAgICAgLy8vL+iusOW9leaaguWBnOWJjeeahOmHkeW4gVxyXG4gICAgICAgIC8vaWYoIXRoaXMuX2dvbGRXaGVuUGF1c2UpIHtcclxuICAgICAgICAvLyAgICBpZihHRy5nZXRNb2R1bGVNZ3IoKS5nZXRNeXNlbGZDb21wKSB0aGlzLl9nb2xkV2hlblBhdXNlID0gR0cuZ2V0TW9kdWxlTWdyKCkuZ2V0TXlzZWxmQ29tcCgpLmdldEdvbGRWYWx1ZSgpO1xyXG4gICAgICAgIC8vfVxyXG4gICAgICAgIC8vaWYobmV0VHlwZSA9PSBOZXRUeXBlLnJfb3RoZXJHcmFiKXtcclxuICAgICAgICAvLyAgICAvL+acieS6uuacieaKleazqOihjOS4ulxyXG4gICAgICAgIC8vICAgIGlmKCF0aGlzLl9kaWN0X3BhdXNlSW5mb1tuZXRUeXBlXSkgdGhpcy5fZGljdF9wYXVzZUluZm9bbmV0VHlwZV0gPSBbXTtcclxuICAgICAgICAvLyAgICB0aGlzLl9kaWN0X3BhdXNlSW5mb1tuZXRUeXBlXSA9IHRoaXMuX2RpY3RfcGF1c2VJbmZvW25ldFR5cGVdLmNvbmNhdChyZWN2RGF0YS5iZXRzKTtcclxuICAgICAgICAvL31lbHNle1xyXG4gICAgICAgIC8vICAgIHRoaXMuX2RpY3RfcGF1c2VJbmZvW25ldFR5cGVdID0gcmVjdkRhdGE7XHJcbiAgICAgICAgLy8gICAgLy/nu5PnrpflkI7muIXnkIZcclxuICAgICAgICAvLyAgICBpZihuZXRUeXBlID09IE5ldFR5cGUucl9ncmFiRW5kKSB0aGlzLl9kaWN0X3BhdXNlSW5mb1tOZXRUeXBlLnJfb3RoZXJHcmFiXSA9IG51bGw7XHJcbiAgICAgICAgLy99XHJcblxyXG4gICAgICAgIC8v5aSE55CG5o6l5pS25Yiw55qE5pWw5o2uXHJcbiAgICAgICAgaWYoR0cuY3VyTWdyKXtcclxuICAgICAgICAgICAgc3dpdGNoIChuZXRUeXBlKXtcclxuICAgICAgICAgICAgICAgIGNhc2UgTmV0VHlwZS5yX2J1bGwxMDBfcmVTdGFydEdhbWU6XHJcbiAgICAgICAgICAgICAgICAgICAgLy/liLfmlrDov5vmiL/kv6Hmga9f55m+5Lq6XHJcbiAgICAgICAgICAgICAgICAgICAgR0cuY3VyTWdyLnVwZGF0ZUVudGVySG9tZURhdGEocmVjdkRhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBOZXRUeXBlLnJfZ3JhYl9yZVN0YXJ0R2FtZTpcclxuICAgICAgICAgICAgICAgICAgICAvL+WIt+aWsOi/m+aIv+S/oeaBr1/mirzlrp1cclxuICAgICAgICAgICAgICAgICAgICBHRy5jdXJNZ3IudXBkYXRlRW50ZXJIb21lRGF0YShyZWN2RGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIE5ldFR5cGUucl9ncmFiRW5kOlxyXG4gICAgICAgICAgICAgICAgICAgIC8v5Yi35paw6L+b5oi/5L+h5oGvXHJcbiAgICAgICAgICAgICAgICAgICAgR0cuY3VyTWdyLnNldEJldHRpbmdFbmRJbmZvKHJlY3ZEYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgTmV0VHlwZS5yX21pbmVIYXZlR3JhYjpcclxuICAgICAgICAgICAgICAgICAgICAvL+WPr+iDveWcqOaaguWBnOS5i+WJjeeOqeWutuW3sue7j+acieaKleazqCzliJnpnIDopoHorrDlvZXph5Hpop3lj5jljJZcclxuICAgICAgICAgICAgICAgICAgICBpZihyZWN2RGF0YS5wbGF5ZXIpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZighaXNOYU4ocmVjdkRhdGEucGxheWVyLmJhbGFuY2UpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBHRy5jdXJNZ3IuZ2V0TXlzZWxmQ29tcCgpLnNldEdvbGRWYWx1ZShyZWN2RGF0YS5wbGF5ZXIuYmFsYW5jZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIE5ldFR5cGUucl9pZGxlVGltZU91dDpcclxuICAgICAgICAgICAgICAgICAgICAvL+mVv+aXtumXtOayoeacieWBmuaTjeS9nO+8jOW3sue7j+iiq1RcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9kaWN0X3JlY3ZOZXRTcGVjaWFsW05ldFR5cGUucl9pZGxlVGltZU91dF0gPSByZWN2RGF0YTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgTmV0VHlwZS5yX3Bhc3NpdmVPdXQ6XHJcbiAgICAgICAgICAgICAgICAgICAgLy/nmbvlvZXlvILluLhcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9kaWN0X3JlY3ZOZXRTcGVjaWFsW05ldFR5cGUucl9wYXNzaXZlT3V0XSA9IHJlY3ZEYXRhO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICAvL+W9k+aBouWkjea4uOaIj+eahOaXtuWAme+8jOino+aekOaaguWBnOaXtuWAmeaUtuWIsOeahOa2iOaBr1xyXG4gICAgcGFyc2VQYXVzZUluZm8gOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYoR0cuY3VyTWdyKXtcclxuICAgICAgICAgICAgR0cuY3VyTWdyLnJlZnJlc2hIb21lKCk7XHJcblxyXG4gICAgICAgICAgICBmb3IodmFyIG5ldFR5cGUgaW4gdGhpcy5fZGljdF9yZWN2TmV0U3BlY2lhbCl7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKG5ldFR5cGUpe1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgTmV0VHlwZS5yX2lkbGVUaW1lT3V0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBHRy5jdXJNZ3IubmV0X2lkbGVUaW1lT3V0KHRoaXMuX2RpY3RfcmVjdk5ldFNwZWNpYWxbbmV0VHlwZV0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVha1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgTmV0VHlwZS5yX3Bhc3NpdmVPdXQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIEdHLmN1ck1nci5uZXRfcGFzc2l2ZU91dCh0aGlzLl9kaWN0X3JlY3ZOZXRTcGVjaWFsW25ldFR5cGVdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWtcclxuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVha1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuX2RpY3RfcmVjdk5ldFNwZWNpYWwgPSB7fTtcclxuICAgICAgICAgICAgcmV0dXJuXHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICAvLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Peivt+axguW7tuaXtuWIpOWumlxyXG5cclxuICAgIC8v6K6h566X572R57uc6K+35rGC5pe26Ze0XHJcbiAgICBfc3RhcnRUaW1lT3V0Q2hlY2sgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5fY2FuY2VsVGltZU91dENoZWNrKCk7XHJcbiAgICAgICAgdmFyIHRpbWUgPSA2MDAwO1xyXG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgICAgICB0aGlzLl90aW1lT3V0SUQxID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIEdHLnRvcFRvdWNoTGF5ZXIuY2xvc2VOZXRSZXF1ZXN0KCk7XHJcbiAgICAgICAgICAgIEdHLnNob3dSZWNvbm5lY3QoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgc2VsZi5fd2hlbkNsb3NlKCk7XHJcbiAgICAgICAgICAgICAgICBHRy50b3BUb3VjaExheWVyLnNob3dOZXRSZXF1ZXN0KHRydWUpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9LCB0aW1lKVxyXG4gICAgfSxcclxuICAgIC8v5Y+W5raI6LaF5pe255uR5ZCsXHJcbiAgICBfY2FuY2VsVGltZU91dENoZWNrIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmKEdfREFUQS5pc051bWJlcih0aGlzLl90aW1lT3V0SUQxKSl7XHJcbiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLl90aW1lT3V0SUQxKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgLy/lvILlnLDnmbvpmYblkI7lj5bmtojotoXplb/nm5HlkKxcclxuICAgIHNldFRpbWVPdXRMaW1pdCA6IGZ1bmN0aW9uIChpc0xpbWl0KSB7XHJcbiAgICAgICAgdGhpcy5fY2FuY2VsVGltZU91dENoZWNrKCk7XHJcbiAgICAgICAgdGhpcy5faXNMaW1pdCA9IGlzTGltaXQ7XHJcbiAgICB9LFxyXG5cclxuXHJcbiAgICAvL+aYr+WQpuW3sue7j+i/nuaOpXNvY2tldFxyXG4gICAgLy9nZXRJc0Nvbm5lY3RpbmcgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAvLyAgICByZXR1cm4gdGhpcy5fc29ja2V0T2JqICYmIHRoaXMuX3NvY2tldE9iai5yZWFkeVN0YXRlID09IFdlYlNvY2tldC5PUEVOO1xyXG4gICAgLy99LFxyXG5cclxuICAgIC8vIGNhbGxlZCBldmVyeSBmcmFtZSwgdW5jb21tZW50IHRoaXMgZnVuY3Rpb24gdG8gYWN0aXZhdGUgdXBkYXRlIGNhbGxiYWNrXHJcbiAgICAvLyB1cGRhdGU6IGZ1bmN0aW9uIChkdCkge1xyXG5cclxuICAgIC8vIH0sXHJcbn0pO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBzb2NrZXRNZ3I7IiwiLy9zb2NrZXTor7fmsYLmlbDmja7lpITnkIYs5qih5oufaHR0cOivt+axguS4juWbnuWkjVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBjYy5DbGFzcyh7XHJcbiAgICBwcm9wZXJ0aWVzOiB7XHJcbiAgICAgICAgX2RpY3Rfc2VuZEluZm8gOiBudWxsLCAgICAgICAgICAgICAgICAgICAgICAvL+ivt+axguS/oeaBr1xyXG4gICAgfSxcclxuXHJcbiAgICAvLyB1c2UgdGhpcyBmb3IgaW5pdGlhbGl6YXRpb25cclxuICAgIGN0b3I6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLl9kaWN0X3NlbmRJbmZvID0ge307XHJcbiAgICB9LFxyXG5cclxuICAgIC8v6L+b5oi/6K+35rGCXHJcbiAgICBzZW5kX2luSG9tZSA6IGZ1bmN0aW9uIChuZXREYXRhLCBjYWxsRnVuYykge1xyXG4gICAgICAgIHRoaXMuX2RpY3Rfc2VuZEluZm9bTmV0VHlwZS5zX2VudGVySG91c2VdID0gY2FsbEZ1bmM7XHJcbiAgICAgICAgR0cuc29ja2V0TWdyLlNlbmRNc2coTmV0VHlwZS5zX2VudGVySG91c2UsIG5ldERhdGEsIHRoaXMuX25ldERhdGFfaW5Ib21lLmJpbmQodGhpcykpO1xyXG4gICAgfSxcclxuICAgIF9uZXREYXRhX2luSG9tZSA6IGZ1bmN0aW9uIChyZWN2RGF0YSkge1xyXG4gICAgICAgIHZhciB0aXAgPSByZWN2RGF0YS50aXA7XHJcbiAgICAgICAgaWYodGlwLmNvZGUgIT0gR19UWVBFLnNlcnZlckNvZGVUeXBlLnN1Y2Nlc3MpIHtcclxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2codGlwLnRpcCk7XHJcbiAgICAgICAgICAgIC8v6L+b5YWl5oi/6Ze05aSx6LSlLemHkeW4geS4jei2s1xyXG4gICAgICAgICAgICBpZiAodGlwLmNvZGUgPT0gR19UWVBFLnNlcnZlckNvZGVUeXBlLmdvbGROb3RFbm91Z2gpIHtcclxuICAgICAgICAgICAgICAgIC8vIGlmKEdHLnRpcHNNZ3IpIEdHLnRpcHNNZ3Iuc2hvd0NvbmZpcm1UaXBfT05FKHRpcC50aXAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIC8vICAgICAvL+aYvuekuuaIv+mXtOWIl+ihqFxyXG4gICAgICAgICAgICAgICAgLy8gICAgIC8v5piv5ZCm55u05o6l6Lez6L2s5Yiw5oi/6Ze05YiX6KGoXHJcbiAgICAgICAgICAgICAgICAvLyAgICAgLy8gdGhpcy5faXNGaXJzdEVudGVyID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAvLyAgICAgLy8gdGhpcy5fb25lUmVxdWVzdEVuZCgpO1xyXG4gICAgICAgICAgICAgICAgLy8gfS5iaW5kKHRoaXMpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZihHRy50aXBzTWdyKSBHRy50aXBzTWdyLnNob3dDb25maXJtVGlwX09ORSh0aXAudGlwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAvL+i/m+WFpeaIv+mXtOWksei0pVxyXG4gICAgICAgICAgICAgICAgaWYodGlwLmNvZGUgPT0gR19UWVBFLnNlcnZlckNvZGVUeXBlLm1hdGNoTm9FbmQpe1xyXG4gICAgICAgICAgICAgICAgICAgIC8v5bey57uP5byA5aeL55qE5q+U6LWb5pyq57uT5p2fXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8v5riF55CGaGFzaOS/oeaBr1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIEdfREFUQS5zZXRDdXJTY2VuZUhhc2goJycsMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gR0cuZXhpdEhvbWUoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJlY3ZEYXRhID0gbnVsbDtcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgLy/ov5vmiL/or7fmsYLmiJDlip9cclxuICAgICAgICAgICAgdmFyIGluSG9tZURhdGEgPSBHX09CSi5kYXRhX2luSG9tZURhdGEoKTtcclxuICAgICAgICAgICAgaW5Ib21lRGF0YS5uZXRfaW5Ib21lRGF0YSA9IHJlY3ZEYXRhO1xyXG4gICAgICAgICAgICBHRy5nZXRQbGF5ZXIoKS5zZXRJbkhvbWVEYXRhKGluSG9tZURhdGEpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYodGhpcy5fZGljdF9zZW5kSW5mb1tOZXRUeXBlLnNfZW50ZXJIb3VzZV0pe1xyXG4gICAgICAgICAgICB0aGlzLl9kaWN0X3NlbmRJbmZvW05ldFR5cGUuc19lbnRlckhvdXNlXShyZWN2RGF0YSk7XHJcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLl9kaWN0X3NlbmRJbmZvW05ldFR5cGUuc19lbnRlckhvdXNlXVxyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgLy8gY2FsbGVkIGV2ZXJ5IGZyYW1lLCB1bmNvbW1lbnQgdGhpcyBmdW5jdGlvbiB0byBhY3RpdmF0ZSB1cGRhdGUgY2FsbGJhY2tcclxuICAgIC8vIHVwZGF0ZTogZnVuY3Rpb24gKGR0KSB7XHJcblxyXG4gICAgLy8gfSxcclxufSk7XHJcbiIsIi8v6KGo5qC85pON5L2c77yM6K+75Y+W5LiO6Kej5p6QXHJcblxyXG4vL+ihqOagvOWvueixoe+8jOWtmOaUvuedgOi/meS4quihqOagvOaJgOacieeahOS/oeaBr1xyXG52YXIgdGFibGVPYmogPSBjYy5DbGFzcyh7XHJcbiAgICBfbmFtZUxpc3QgICAgICAgICAgIDogbnVsbCxcclxuICAgIF90eXBlTGlzdCAgICAgICAgICAgIDpudWxsLFxyXG4gICAgX2ZpcnN0RGljdCAgICAgICAgICAgOiBudWxsLFxyXG4gICAgX2RhdGFEaWN0ICAgICAgICAgICAgOiBudWxsLFxyXG4gICAgX2tleUxpc3QgICAgICAgICAgICA6IG51bGwsXHJcbiAgICBzZXREYXRhIDogZnVuY3Rpb24oX25hbWVMaXN0LCBfdHlwZUxpc3QsIGRhdGFEaWN0LCBrZXlMaXN0KXtcclxuICAgICAgICB0aGlzLl9uYW1lTGlzdCA9IF9uYW1lTGlzdDtcclxuICAgICAgICB0aGlzLl90eXBlTGlzdCA9IF90eXBlTGlzdDtcclxuICAgICAgICB0aGlzLl9maXJzdERpY3QgPSBkYXRhRGljdDtcclxuICAgICAgICB0aGlzLl9rZXlMaXN0ID0ga2V5TGlzdDtcclxuICAgICAgICB0aGlzLl9kYXRhRGljdCA9IHt9O1xyXG4gICAgfSxcclxuXHJcbiAgICBnZXREYXRhQnlJRCA6IGZ1bmN0aW9uKGtleUlEKXtcclxuICAgICAgICBpZih0aGlzLl9kYXRhRGljdFtrZXlJRF0pIHJldHVybiB0aGlzLl9kYXRhRGljdFtrZXlJRF07XHJcbiAgICAgICAgdmFyIGRhdGEgPSB0aGlzLl9wYXJzZU9iaihrZXlJRCk7XHJcbiAgICAgICAgdGhpcy5fZGF0YURpY3Rba2V5SURdID0gZGF0YTtcclxuICAgICAgICByZXR1cm4gZGF0YTtcclxuICAgIH0sXHJcbiAgICBnZXRLZXlMaXN0IDogZnVuY3Rpb24oKXtcclxuICAgICAgICByZXR1cm4gdGhpcy5fa2V5TGlzdDtcclxuICAgIH0sXHJcbiAgICAvL+iOt+WPluesrOS4gOadoeS/oeaBr+eahOWAvFxyXG4gICAgZ2V0Rmlyc3REYXRhIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBkYXRhO1xyXG4gICAgICAgIGZvcih2YXIga2V5IGluIHRoaXMuX2ZpcnN0RGljdCl7XHJcbiAgICAgICAgICAgIGRhdGEgPSB0aGlzLmdldERhdGFCeUlEKGtleSk7XHJcbiAgICAgICAgICAgIGlmKGRhdGEpIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZGF0YTtcclxuICAgIH0sXHJcbiAgICAvL+iOt+WPluaJgOacieeahOihqOagvOS/oeaBr1xyXG4gICAgZ2V0QWxsRGF0YSA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgaW5kZXgsIGRhdGEgPSB7fTtcclxuICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgdGhpcy5fa2V5TGlzdC5sZW5ndGg7IGkgKyspe1xyXG4gICAgICAgICAgICBpbmRleCA9IHRoaXMuX2tleUxpc3RbaV07XHJcbiAgICAgICAgICAgIGRhdGFbaW5kZXhdID0gdGhpcy5nZXREYXRhQnlJRChpbmRleCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBkYXRhO1xyXG4gICAgfSxcclxuXHJcbiAgICBfcGFyc2VPYmogOiBmdW5jdGlvbihrZXlJRCl7XHJcbiAgICAgICAgaWYoIXRoaXMuX2ZpcnN0RGljdCkgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgdmFyIGN1ckRhdGEgPSB0aGlzLl9maXJzdERpY3Rba2V5SURdO1xyXG4gICAgICAgIGlmKCFjdXJEYXRhKXtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ3RhYmxlIHBhcnNlIF9fX19fIG5vIHRoaXMga2V5IDonICsga2V5SUQpXHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgZGF0YU9iaiA9IHt9O1xyXG4gICAgICAgIC8v56ys5LiA5LiqSUTnmoTlgLzlv73nlaVcclxuICAgICAgICBmb3IodmFyIGkgPSAxOyBpIDwgY3VyRGF0YS5sZW5ndGg7IGkgKyspe1xyXG4gICAgICAgICAgICB2YXIgZGF0YSA9IHRoaXMuX3BhcnNlQnlUeXBlKGN1ckRhdGFbaV0sIHRoaXMuX3R5cGVMaXN0W2ldLCB0aGlzLl9uYW1lTGlzdFtpXSk7XHJcbiAgICAgICAgICAgIGRhdGFPYmpbdGhpcy5fbmFtZUxpc3RbaV1dID0gZGF0YTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGRhdGFPYmo7XHJcbiAgICB9LFxyXG4gICAgX3BhcnNlQnlUeXBlIDogZnVuY3Rpb24oZGF0YSwgdHlwZSwgb2JqTmFtZSl7XHJcbiAgICAgICAgaWYoZGF0YSA9PSB1bmRlZmluZWQgfHwgZGF0YSA9PSBudWxsKSByZXR1cm4gbnVsbDtcclxuXHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgc3dpdGNoICh0eXBlKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlICdrZXlfaW50JzpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcGFyc2VJbnQoZGF0YSk7XHJcbiAgICAgICAgICAgICAgICBjYXNlICdudW1iZXInOlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBwYXJzZUZsb2F0KGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAnc3RyaW5nJzpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGF0YS50b1N0cmluZygpO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAnanNvbic6XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgvXFwnL2csJ1xcXCInKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gSlNPTi5wYXJzZShkYXRhKTtcclxuICAgICAgICAgICAgICAgIGNhc2UgJ2NhbGN1bGF0ZSc6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRhdGEudG9TdHJpbmcoKTtcclxuXHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlKVxyXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZygndGFibGUgcGFyc2UgX19fX19fXyBmaWxlTmFtZSA9JyArIHRoaXMuX2ZpbGVOYW1lICsgJzsgIG9iak5hbWUgPScgKyBvYmpOYW1lICsgJzsgIGVycm9yIG9iaiA9JyArIGRhdGEpXHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG59KVxyXG5cclxuLy/ooajmoLznrqHnkIblmahcclxudmFyIHRhYmxlTWdyID0gY2MuQ2xhc3Moe1xyXG4gICAgLy9leHRlbmRzIDogY2MuQ29tcG9uZW50LFxyXG4gICAgcHJvcGVydGllczoge1xyXG4gICAgICAgIF90RGljdCA6IG51bGwsXHJcbiAgICAgICAgX2NhbGxGdW5jIDogbnVsbCxcclxuICAgICAgICBfbGlzdF9yZWxvYWROYW1lcyA6IG51bGwsXHJcbiAgICB9LFxyXG4gICAgY3RvciA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAvL0dHLnRhYmxlTWdyID0gdGhpcztcclxuICAgIH0sXHJcbiAgICBnZXRUYWJsZSA6IGZ1bmN0aW9uKHRhYmxlTmFtZSl7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3REaWN0W3RhYmxlTmFtZV07XHJcbiAgICB9LFxyXG5cclxuICAgIC8v5a+85YWl6KGo5qC8XHJcbiAgICByZWxvYWRUYWJsZXMgOiBmdW5jdGlvbiAodGFibGVOYW1lcywgY2FsbEZ1bmMpIHtcclxuICAgICAgICB2YXIgdHlwZSA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh0YWJsZU5hbWVzKTtcclxuICAgICAgICBzd2l0Y2ggKHR5cGUpe1xyXG4gICAgICAgICAgICBjYXNlICdbb2JqZWN0IFN0cmluZ10nOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5fbGlzdF9yZWxvYWROYW1lcyA9IFt0YWJsZU5hbWVzXTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdbb2JqZWN0IEFycmF5XSc6XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9saXN0X3JlbG9hZE5hbWVzID0gdGFibGVOYW1lcztcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdbb2JqZWN0IE9iamVjdF0nOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5fbGlzdF9yZWxvYWROYW1lcyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgZm9yKHZhciBrZXkgaW4gdGFibGVOYW1lcyl7dGhpcy5fbGlzdF9yZWxvYWROYW1lcy5wdXNoKHRhYmxlTmFtZXNba2V5XSk7fVxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuX2NhbGxGdW5jID0gY2FsbEZ1bmM7XHJcbiAgICAgICAgdGhpcy5fbG9hZFN0ZXAoKTtcclxuICAgIH0sXHJcbiAgICBfbG9hZFN0ZXAgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYodGhpcy5fbGlzdF9yZWxvYWROYW1lcy5sZW5ndGggPD0gMCl7XHJcbiAgICAgICAgICAgIGlmKHRoaXMuX2NhbGxGdW5jKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9jYWxsRnVuYygpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fY2FsbEZ1bmMgPSBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVyblxyXG4gICAgICAgIH1cclxuICAgICAgICAvL3ZhciBuYW1lID0gdGhpcy5fbGlzdF9yZWxvYWROYW1lc1swXTtcclxuICAgICAgICB2YXIgbmFtZT10aGlzLl9saXN0X3JlbG9hZE5hbWVzLnNwbGljZSgwLDEpO1xyXG4gICAgICAgIHRoaXMuX2xvYWRUYWJsZShuYW1lKTtcclxuICAgIH0sXHJcbiAgICBfbG9hZFRhYmxlIDogZnVuY3Rpb24gKHRhYmxlTmFtZSkge1xyXG4gICAgICAgIGlmKHRoaXMuX3REaWN0ICYmIHRoaXMuX3REaWN0W3RhYmxlTmFtZV0pIHtcclxuICAgICAgICAgICAgdGhpcy5fbG9hZFN0ZXAoKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYy5sb2FkZXIubG9hZFJlcyhcIlRhYmxlcy9cIit0YWJsZU5hbWUsIGZ1bmN0aW9uIChlcnIsIGRhdGEpIHtcclxuICAgICAgICAgICAgaWYoZXJyKXtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycilcclxuICAgICAgICAgICAgICAgIGlmKHRoaXMuX2NhbGxGdW5jKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fY2FsbEZ1bmMoKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9jYWxsRnVuYyA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgaWYoIXRoaXMuX3REaWN0KSB0aGlzLl90RGljdCA9IHt9O1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fdERpY3RbdGFibGVOYW1lXSA9IHRoaXMuX3NvcnREYXRhKGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fbG9hZFN0ZXAoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0uYmluZCh0aGlzKSk7XHJcbiAgICB9LFxyXG5cclxuICAgIF9zb3J0RGF0YSA6IGZ1bmN0aW9uKHhkYXRhKXtcclxuICAgICAgICBpZigheGRhdGEpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ3RhYmxlIGlzIG51bGwnKVxyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5fZGF0YSA9IHhkYXRhO1xyXG4gICAgICAgIHZhciBfbmFtZUxpc3QsIF90eXBlTGlzdDtcclxuICAgICAgICB2YXIgX3hEYXRhID0ge307XHJcbiAgICAgICAgdmFyIF9rZXlMaXN0ID0gW107XHJcbiAgICAgICAgZm9yKHZhciBpID0gMDsgaSA8IHhkYXRhLmxlbmd0aDsgaSArKyl7XHJcbiAgICAgICAgICAgIHN3aXRjaCAoaSl7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgLy90aXBzXHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgLy9kYXRhTmFtZVxyXG4gICAgICAgICAgICAgICAgICAgIF9uYW1lTGlzdCA9IHhkYXRhW2ldO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgIC8vZGF0YVR5cGVcclxuICAgICAgICAgICAgICAgICAgICBfdHlwZUxpc3QgPSB4ZGF0YVtpXTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgLy9kYXRhRGV0YWlsXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGtleUlEID0geGRhdGFbaV1bMF07XHJcbiAgICAgICAgICAgICAgICAgICAgX2tleUxpc3QucHVzaChrZXlJRCk7XHJcbiAgICAgICAgICAgICAgICAgICAgX3hEYXRhW2tleUlEXSA9IHhkYXRhW2ldO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgdGFibGUgPSBuZXcgdGFibGVPYmooKTtcclxuICAgICAgICB0YWJsZS5zZXREYXRhKF9uYW1lTGlzdCwgX3R5cGVMaXN0LCBfeERhdGEsIF9rZXlMaXN0KTtcclxuICAgICAgICByZXR1cm4gdGFibGU7XHJcbiAgICB9LFxyXG5cclxuICAgIC8v5ri45oiP5LiA5byA5aeL5Yqg6L295omA5pyJ55qE6YWN572uXHJcbiAgICByZWxvYWRDb25maWdPblN0YXJ0IDogZnVuY3Rpb24gKGNhbGxGdW5jKSB7XHJcbiAgICAgICAgdGhpcy5yZWxvYWRUYWJsZXMoR19SRVNfVVJMLmRpY3RfdGFibGVzTmFtZSwgY2FsbEZ1bmMpO1xyXG4gICAgfSxcclxuICAgIFxyXG4gICAgb25EZXN0cm95IDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8vZm9yKHZhciB0YWJsZU5hbWUgaW4gdGhpcy5fdERpY3Qpe1xyXG4gICAgICAgIC8vICAgIGNjLmxvYWRlci5yZWxlYXNlKFwiVGFibGVzL1wiK3RhYmxlTmFtZSk7XHJcbiAgICAgICAgLy99XHJcbiAgICB9XHJcbn0pXHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHRhYmxlTWdyOyIsIi8v5o+Q56S65by556qX57G755qE566h55CG5ZmoXHJcblxyXG5jYy5DbGFzcyh7XHJcbiAgICBleHRlbmRzOiBjYy5Db21wb25lbnQsXHJcbiAgICBwcm9wZXJ0aWVzOiB7XHJcbiAgICAgICAgX2N1clR4dFRpcE51bSA6IG51bGwsXHJcbiAgICAgICAgX2NvbmZpcm1UYWcgOiBudWxsLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/noa7orqTmoYbmmL7npLrmoIforrBcclxuICAgICAgICBfbGlzdF9oaWRlVGlwcyA6IG51bGwsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+makOiXj+W5tuWPr+WkjeeUqOeahHRpcFxyXG5cclxuICAgICAgICBwcmVmYWJfY29uZmlybVRpcCA6IGNjLlByZWZhYiwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5Y+v54K55Ye756Gu5a6a55qE5by556qXXHJcbiAgICAgICAgcHJlZmFiX3R4dFRpcCA6IGNjLlByZWZhYiwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/mlofmnKzmj5DnpLpcclxuXHJcbiAgICAgICAgbm9kZV9jb3VudERvd25Qcm9ncmVzcyA6IGNjLk5vZGUsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+WbvuW9ouaWh+Wtl+WAkuiuoeaXtuaPkOekulxyXG4gICAgICAgIG5vZGVfc3lzdGVtVGlwIDogY2MuTm9kZSwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v57O757uf5o+Q56S6XHJcbiAgICAgICAgTm9kZV90b3BOb3RpY2UgOiBjYy5Ob2RlLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/lhazlkYrpgJrnn6XnsbtcclxuICAgIH0sXHJcblxyXG4gICAgLy8gdXNlIHRoaXMgZm9yIGluaXRpYWxpemF0aW9uXHJcbiAgICBvbkxvYWQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBHRy50aXBzTWdyID0gdGhpcztcclxuXHJcbiAgICAgICAgdGhpcy5fcHJvZ3Jlc3NDb21wTmFtZSA9ICdPYmpfY291bnREb3duUHJvZ3Jlc3MnO1xyXG4gICAgICAgIHRoaXMuX3N5c3RlbVRpcENvbXBOYW1lID0gJ09ial9zeXN0ZW1UaXAnO1xyXG4gICAgICAgIHRoaXMuX3R4dFRpcENvbXBOYW1lID0gJ09ial90eHRUaXAnO1xyXG4gICAgICAgIHRoaXMuX2NvbmZpcm1UaXBDb21wTmFtZSA9ICdPYmpfY29uZmlybVRpcCc7XHJcbiAgICAgICAgdGhpcy5fdG9wTm90aWNlQ29tcE5hbWUgPSAnT2JqX25vdGljZSc7XHJcbiAgICAgICAgdGhpcy5fZGljdF9vbmx5T25lID0ge307XHJcbiAgICAgICAgdGhpcy5fY3VyVHh0VGlwTnVtID0gMDtcclxuICAgICAgICB0aGlzLl9jb21tb25TY2FsZSA9IEdfQ29uZmlnX2NvbW1vbi5mcmFtZVNjYWxlO1xyXG4gICAgICAgIHRoaXMuX2NvbmZpcm1UYWcgPSAzO1xyXG4gICAgICAgIHRoaXMuX2xpc3RfaGlkZVRpcHMgPSBbXTtcclxuICAgIH0sXHJcblxyXG4gICAgLy/mmL7npLrnuq/mlofmnKzlvLnnqpcsIHBvc+S4uuepuum7mOiupOaYvuekuuWcqOS4reWkriwg5Y+v6YeN5aSN5L2/55So55qEdGlwXHJcbiAgICBzaG93VHh0VGlwIDogZnVuY3Rpb24gKGRhdGFPYmopIHtcclxuICAgICAgICB2YXIgdGlwID0gdGhpcy5fZ2V0VHh0VGlwKCk7O1xyXG4gICAgICAgIHRpcC5zaG93VGlwKGRhdGFPYmopO1xyXG4gICAgICAgIHJldHVybiB0aXBcclxuICAgIH0sXHJcbiAgICBfZ2V0VHh0VGlwIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciB0aXAgPSB0aGlzLl9saXN0X2hpZGVUaXBzLnNwbGljZSgwLDEpWzBdO1xyXG4gICAgICAgIGlmKCF0aXApe1xyXG4gICAgICAgICAgICB0aXAgPSB0aGlzLl9nZXROZXdUaXAoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB0aXAuZ2V0Q29tcG9uZW50KHRoaXMuX3R4dFRpcENvbXBOYW1lKVxyXG4gICAgfSxcclxuICAgIF9nZXROZXdUaXAgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHRpcCA9IGNjLmluc3RhbnRpYXRlKHRoaXMucHJlZmFiX3R4dFRpcCk7XHJcbiAgICAgICAgLy90aGlzLm5vZGUuYWRkQ2hpbGQodGlwLCAwLCB0aGlzLl9jdXJUeHRUaXBOdW0pO1xyXG4gICAgICAgIHRpcC5wYXJlbnQgPSB0aGlzLm5vZGU7XHJcbiAgICAgICAgLy90aXAuc2NhbGUgPSB0aGlzLl9jb21tb25TY2FsZTtcclxuICAgICAgICB0aXAuZ2V0Q29tcG9uZW50KHRoaXMuX3R4dFRpcENvbXBOYW1lKS5iaW5kTWdyKHRoaXMpO1xyXG4gICAgICAgIHRoaXMuX2N1clR4dFRpcE51bSArPSAxO1xyXG4gICAgICAgIHJldHVybiB0aXBcclxuICAgIH0sXHJcbiAgICBvbmVUaXBIaWRlIDogZnVuY3Rpb24gKHRpcE5vZGUpIHtcclxuICAgICAgICB2YXIgdGlwQ29tcCA9IHRpcE5vZGUuZ2V0Q29tcG9uZW50KHRoaXMuX3R4dFRpcENvbXBOYW1lKTtcclxuICAgICAgICBpZih0aXBDb21wKXtcclxuICAgICAgICAgICAgaWYoIXRoaXMuX2RpY3Rfb25seU9uZVt0aXBDb21wLmdldFRpcEluZGV4KCldKXtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2xpc3RfaGlkZVRpcHMucHVzaCh0aXBOb2RlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgLy89LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t5Y+q5pi+56S65LiA5qyh55qEdGlwXHJcblxyXG4gICAgc2V0VGV4dFRpcCA6IGZ1bmN0aW9uICh0aXBOb2RlQ29tcCkge1xyXG4gICAgICAgIGlmKHRpcE5vZGVDb21wKSB0aGlzLl9kaXlUaXBDb21wID0gdGlwTm9kZUNvbXA7XHJcbiAgICB9LFxyXG5cclxuICAgIHNob3dPbmx5T25lIDogZnVuY3Rpb24gKGRhdGFPYmopIHtcclxuICAgICAgICB2YXIgdGlwO1xyXG4gICAgICAgIHZhciB0aXBJbmRleCA9IGRhdGFPYmoudGlwSW5kZXg7XHJcbiAgICAgICAgaWYodGhpcy5fZGl5VGlwQ29tcCl7XHJcbiAgICAgICAgICAgIHRpcCA9IHRoaXMuX2RpeVRpcENvbXA7XHJcbiAgICAgICAgfWVsc2Uge1xyXG4gICAgICAgICAgICBpZighdGhpcy5fZGljdF9vbmx5T25lKSB0aGlzLl9kaWN0X29ubHlPbmUgPSB7fTtcclxuICAgICAgICAgICAgdGlwID0gdGhpcy5fZGljdF9vbmx5T25lW3RpcEluZGV4XTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmKHRpcCl7XHJcbiAgICAgICAgICAgIGlmKHRpcC5nZXRJc1Nob3coKSl7XHJcbiAgICAgICAgICAgICAgICB0aXAuZm9yY2VDaGFuZ2VDb3VudERvd24oZGF0YU9iai5yZXRhaW5UaW1lKTtcclxuICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICB0aXAuc2hvd1RpcChkYXRhT2JqKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICB0aXAgPSB0aGlzLl9nZXROZXdUaXAoKS5nZXRDb21wb25lbnQodGhpcy5fdHh0VGlwQ29tcE5hbWUpO1xyXG4gICAgICAgICAgICB0aGlzLl9kaWN0X29ubHlPbmVbdGlwSW5kZXhdID0gdGlwO1xyXG4gICAgICAgICAgICB0aXAuc2hvd1RpcChkYXRhT2JqKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRpcFxyXG4gICAgfSxcclxuXHJcbiAgICAvLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblxyXG4gICAgLy/mmL7npLrlgJLorqHml7bmloflrZflm77lvaJcclxuICAgIHNob3dQcm9ncmVzc0NvdW50RG93biA6IGZ1bmN0aW9uICh0aW1lLCBjYWxsRnVuYykge1xyXG4gICAgICAgIHRoaXMubm9kZV9jb3VudERvd25Qcm9ncmVzcy5nZXRDb21wb25lbnQodGhpcy5fcHJvZ3Jlc3NDb21wTmFtZSkuc2hvd0NvdW50RG93bih0aW1lLCBjYWxsRnVuYyk7XHJcbiAgICB9LFxyXG4gICAgZ2V0UHJvZ3Jlc3NMZWF2ZVRpbWUgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubm9kZV9jb3VudERvd25Qcm9ncmVzcy5nZXRDb21wb25lbnQodGhpcy5fcHJvZ3Jlc3NDb21wTmFtZSkuZ2V0TGVhdmVUaW1lKCk7XHJcbiAgICB9LFxyXG4gICAgZm9yY2VQcm9ncmVzc0VuZCA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLm5vZGVfY291bnREb3duUHJvZ3Jlc3MuZ2V0Q29tcG9uZW50KHRoaXMuX3Byb2dyZXNzQ29tcE5hbWUpLmZvcmNlRW5kKCk7XHJcbiAgICB9LFxyXG5cclxuICAgIC8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuXHJcbiAgICAvL+aYvuekuuWPr+eCueWHu+ehruWumueahOW8ueeqlyAgIOWNlemAieaMiemSrlxyXG4gICAgc2hvd0NvbmZpcm1UaXBfT05FIDogZnVuY3Rpb24gKHNob3dTdHIsIGNhbGxGdW5jKSB7XHJcbiAgICAgICAgdmFyIGNvbmZpcm1QYWdlID0gdGhpcy5ub2RlLmdldENoaWxkQnlUYWcodGhpcy5fY29uZmlybVRhZyk7XHJcbiAgICAgICAgaWYoIWNvbmZpcm1QYWdlKXtcclxuICAgICAgICAgICAgY29uZmlybVBhZ2UgPSBjYy5pbnN0YW50aWF0ZSh0aGlzLnByZWZhYl9jb25maXJtVGlwKTtcclxuICAgICAgICAgICAgY29uZmlybVBhZ2UucGFyZW50ID0gdGhpcy5ub2RlO1xyXG4gICAgICAgICAgICBjb25maXJtUGFnZS50YWcgPSAzO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25maXJtUGFnZS5nZXRDb21wb25lbnQodGhpcy5fY29uZmlybVRpcENvbXBOYW1lKS5zaG93Q29udGVudEV4KHNob3dTdHIsIGNhbGxGdW5jKTtcclxuICAgIH0sXHJcbiAgICAvL+WkmumAieaMiemSrlxyXG4gICAgc2hvd0NvbmZpcm1UaXBfVFdPIDogZnVuY3Rpb24gKHNob3dTdHIsIGNhbGxGdW5jLCBjYWxsRnVuYzIpIHtcclxuICAgICAgICB2YXIgY29uZmlybVBhZ2UgPSB0aGlzLm5vZGUuZ2V0Q2hpbGRCeVRhZyh0aGlzLl9jb25maXJtVGFnKTtcclxuICAgICAgICBpZighY29uZmlybVBhZ2Upe1xyXG4gICAgICAgICAgICBjb25maXJtUGFnZSA9IGNjLmluc3RhbnRpYXRlKHRoaXMucHJlZmFiX2NvbmZpcm1UaXApO1xyXG4gICAgICAgICAgICBjb25maXJtUGFnZS5wYXJlbnQgPSB0aGlzLm5vZGU7XHJcbiAgICAgICAgICAgIGNvbmZpcm1QYWdlLnRhZyA9IDM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbmZpcm1QYWdlLmdldENvbXBvbmVudCh0aGlzLl9jb25maXJtVGlwQ29tcE5hbWUpLnNob3dDb250ZW50KHNob3dTdHIsIGNhbGxGdW5jLCBjYWxsRnVuYzIpO1xyXG4gICAgfSxcclxuXHJcbiAgICAvL+a4heeQhuW8ueWHuueahOehruiupOahhlxyXG4gICAgY2xlYXJDb25maXJtIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBjb25maXJtID0gdGhpcy5ub2RlLmdldENoaWxkQnlUYWcodGhpcy5fY29uZmlybVRhZyk7XHJcbiAgICAgICAgaWYoY29uZmlybSl7XHJcbiAgICAgICAgICAgIHZhciBjb21wID0gY29uZmlybS5nZXRDb21wb25lbnQodGhpcy5fY29uZmlybVRpcENvbXBOYW1lKTtcclxuICAgICAgICAgICAgaWYoY29tcCAmJiBjb25maXJtLmFjdGl2ZSkgY29tcC5jbG9zZVBhZ2UoKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIC8v5rOo5YaM56Gu6K6k5qGG55qE5omT5byA5YWz6Zet5LqL5Lu255uR5ZCsICAgaXNSZWdpc3Rlcjog5piv5ZCm5byA5ZCv55uR5ZCsXHJcbiAgICByZWdpc3RlckNvbmZpcm0gOiBmdW5jdGlvbiAoZnVuYywgaXNSZWdpc3Rlcikge1xyXG4gICAgICAgIGlmKCF0aGlzLm5vZGUpIHJldHVybjtcclxuICAgICAgICB2YXIgY29uZmlybSA9IHRoaXMubm9kZS5nZXRDaGlsZEJ5VGFnKHRoaXMuX2NvbmZpcm1UYWcpO1xyXG4gICAgICAgIGlmKGNvbmZpcm0pe1xyXG4gICAgICAgICAgICBjb25maXJtLmdldENvbXBvbmVudCh0aGlzLl9jb25maXJtVGlwQ29tcE5hbWUpLnJlZ2lzdGVyRnVuYyhmdW5jLCBpc1JlZ2lzdGVyKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIC8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuXHJcbiAgICAvL+aYvuekuuS9k+e7n+aPkOekulxyXG4gICAgc2hvd1N5c3RlbSA6IGZ1bmN0aW9uIChzaG93U3RyLCBwb3MsIHRpbWUsIGNhbGxCYWNrKSB7XHJcbiAgICAgICAgdGhpcy5ub2RlX3N5c3RlbVRpcC5nZXRDb21wb25lbnQodGhpcy5fc3lzdGVtVGlwQ29tcE5hbWUpLnNob3dDb250ZW50KHNob3dTdHIsIHBvcywgdGltZSwgY2FsbEJhY2spO1xyXG4gICAgfSxcclxuXHJcbiAgICAvLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblxyXG4gICAgLy/mmL7npLrlhazlkYrkv6Hmga9cclxuICAgIGFkZE5vdGljZSA6IGZ1bmN0aW9uIChtc2cpIHtcclxuICAgICAgICB0aGlzLk5vZGVfdG9wTm90aWNlLmdldENvbXBvbmVudCh0aGlzLl90b3BOb3RpY2VDb21wTmFtZSkuYWRkTXNnKG1zZyk7XHJcbiAgICB9LFxyXG5cclxuXHJcbiAgICAvL+a3u+WKoOemgeatoueCueWHu+Wxgu+8jOS7heWvuXRvdWNo5LqL5Lu25ZCe5Zms77yM5a+5bW91c2Xkuovku7bmsqHmnInmlYjmnpw7XHJcbiAgICBzZXRUb3VjaExpbWl0IDogZnVuY3Rpb24gKGlzTGltaXQpIHtcclxuICAgICAgICB2YXIgcGFyZW50ID0gdGhpcy5ub2RlLnBhcmVudDtcclxuICAgICAgICBpZihpc0xpbWl0KSBwYXJlbnQub24oY2MuTm9kZS5FdmVudFR5cGUuVE9VQ0hfU1RBUlQsIHRoaXMuX2xpbWl0Q2FsbCwgdGhpcyk7XHJcbiAgICAgICAgZWxzZSBwYXJlbnQub2ZmKGNjLk5vZGUuRXZlbnRUeXBlLlRPVUNIX1NUQVJULCB0aGlzLl9saW1pdENhbGwsIHRoaXMpO1xyXG4gICAgfSxcclxuICAgIF9saW1pdENhbGwgOiBmdW5jdGlvbiAoKSB7fSxcclxuXHJcblxyXG4gICAgLy8gY2FsbGVkIGV2ZXJ5IGZyYW1lLCB1bmNvbW1lbnQgdGhpcyBmdW5jdGlvbiB0byBhY3RpdmF0ZSB1cGRhdGUgY2FsbGJhY2tcclxuICAgIC8vIHVwZGF0ZTogZnVuY3Rpb24gKGR0KSB7XHJcblxyXG4gICAgLy8gfSxcclxufSk7XHJcbiIsIi8v6aG555uu5Lit5Y+v5Lul6YCa55So55qE5bel5YW3XHJcblxyXG52YXIgdG9vbHMgPSB7XHJcbiAgICAvL+i/lOWbnuaVsOWAvOWMheaLrOacgOWkp+acgOWwj+WAvFxyXG4gICAgZ2V0UmFuZG9tQXJlYSA6IGZ1bmN0aW9uKGRvd25OdW0sIHVwTnVtKSB7XHJcbiAgICAgICAgcmV0dXJuIHBhcnNlSW50KE1hdGgucmFuZG9tKCkqKHVwTnVtIC0gZG93bk51bSArIDEpICsgZG93bk51bSk7XHJcbiAgICB9LFxyXG4gICAgLy/ov5Tlm57pmo/mnLrnmoRib29s5YC85piv5oiW5ZCmXHJcbiAgICBnZXRSYW5kb21Cb29sIDogZnVuY3Rpb24oKXtcclxuICAgICAgICByZXR1cm4gQm9vbGVhbihNYXRoLnJhbmRvbSgpID4gMC41KTtcclxuICAgIH0sXHJcbiAgICAvL+S9v+eUqCVz77yMJWTph43mlrDphY3nva7lrZfnrKbkuLLvvIzlpoIgdGhpcy5mb3JtYXRTdHIoJ+i/meaYrzolcycsOTA5OSkgID09PiDov5nmmK86OTA5OVxyXG4gICAgZm9ybWF0U3RyOmZ1bmN0aW9uKCl7XHJcbiAgICAgICAgdmFyIHQ9YXJndW1lbnRzLGU9dC5sZW5ndGg7XHJcbiAgICAgICAgaWYoZTwxKXJldHVyblwiXCI7XHJcbiAgICAgICAgdmFyIGk9LyglZCl8KCVzKS8sbj0xLHI9dFswXSxzPVwic3RyaW5nXCI9PXR5cGVvZiByJiZpLnRlc3Qocik7XHJcbiAgICAgICAgaWYocylmb3IodmFyIG89LyVzLztuPGU7KytuKXtcclxuICAgICAgICAgICAgdmFyIGE9dFtuXSxjPVwibnVtYmVyXCI9PXR5cGVvZiBhP2k6bztcclxuICAgICAgICAgICAgYy50ZXN0KHIpP3I9ci5yZXBsYWNlKGMsYSk6cis9XCIgXCIrYVxyXG4gICAgICAgIH1lbHNlIGlmKGU+MSlmb3IoO248ZTsrK24pcis9XCIgXCIrdFtuXTsgZWxzZSByPVwiXCIrcjtcclxuICAgICAgICByZXR1cm4gclxyXG4gICAgfSxcclxuICAgIC8v5pS55Y+Y6YeR6ZKx55qE5Y2V5L2NXHJcbiAgICBjaGFuZ2VNb25leSA6IGZ1bmN0aW9uIChtb25leSkge1xyXG4gICAgICAgIC8vdmFyIHJhdGU9bnVsbCxuYW1lID0gJycsZGljdCA9IEdfQ29uZmlnX2NvbW1vbi5kaWN0X21vbmV5VW5pdDtcclxuICAgICAgICAvL2Zvcih2YXIgcmF0ZUxpbWl0IGluIGRpY3Qpe1xyXG4gICAgICAgIC8vICAgIGlmKG51bSA+PSByYXRlTGltaXQpe1xyXG4gICAgICAgIC8vICAgICAgICByYXRlID0gcmF0ZUxpbWl0O1xyXG4gICAgICAgIC8vICAgICAgICBuYW1lID0gZGljdFtyYXRlTGltaXRdO1xyXG4gICAgICAgIC8vICAgIH1lbHNlIGJyZWFrO1xyXG4gICAgICAgIC8vfVxyXG4gICAgICAgIC8vaWYoIXJhdGUpIHJldHVybiBudW07XHJcbiAgICAgICAgLy92YXIgbGltaXRMZW4gPSA0OyAgICAgICAvL+WwhumHkemineeahOaVsOWAvOaOp+WItuWcqDTkvY3mlbBcclxuICAgICAgICAvL3ZhciB2YWx1ZSA9IHBhcnNlRmxvYXQoKG51bSAvIHJhdGUpLnRvRml4ZWQoMykpLnRvU3RyaW5nKCk7XHJcbiAgICAgICAgLy92YXIgdmFsdWVMZW4gPSB2YWx1ZS5sZW5ndGg7XHJcbiAgICAgICAgLy9pZih2YWx1ZUxlbiA+bGltaXRMZW4pe1xyXG4gICAgICAgIC8vICAgIHZhciBwb2ludEluZGV4ID0gdmFsdWUuaW5kZXhPZignLicpO1xyXG4gICAgICAgIC8vICAgIGlmKHBvaW50SW5kZXggPCAwKXtcclxuICAgICAgICAvLyAgICAgICAgLy/mlbTmlbBcclxuICAgICAgICAvLyAgICAgICAgdmFsdWUgPSB2YWx1ZS5zdWJzdHJpbmcoMCxsaW1pdExlbisxKTtcclxuICAgICAgICAvLyAgICB9ZWxzZXtcclxuICAgICAgICAvLyAgICAgICAgLy/mnInlsI/mlbBcclxuICAgICAgICAvLyAgICAgICAgaWYocG9pbnRJbmRleCA+PSBsaW1pdExlbikgdmFsdWUgPSB2YWx1ZS5zdWJzdHJpbmcoMCxsaW1pdExlbik7XHJcbiAgICAgICAgLy8gICAgICAgIGVsc2UgdmFsdWUgPSB2YWx1ZS5zdWJzdHJpbmcoMCxsaW1pdExlbisxKTtcclxuICAgICAgICAvLyAgICB9XHJcbiAgICAgICAgLy99XHJcbiAgICAgICAgLy9yZXR1cm4gdmFsdWUrbmFtZVxyXG4gICAgICAgIHZhciB6ZXJvQ250ID0gMCwgbmVnYSA9IFwiXCI7Ly/luKblpJrlsJHkuKow77yM6LSf5pWw5qCH5b+X5L2NXHJcbiAgICAgICAgaWYgKG1vbmV5IDwgMCkge1xyXG4gICAgICAgICAgICBtb25leSA9IC1tb25leTtcclxuICAgICAgICAgICAgbmVnYSA9IFwiLVwiO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgdG1wID0gbW9uZXk7XHJcbiAgICAgICAgd2hpbGUgKCh0bXAgPSB0bXAgLyAxMCkgPj0gMSl6ZXJvQ250Kys7XHJcbiAgICAgICAgaWYgKHplcm9DbnQgPD0gMylyZXR1cm4gbmVnYSArIG1vbmV5O1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwLCB0bXAgPSAxOyBpIDwgemVyb0NudCAtIDM7IGkrKykge1xyXG4gICAgICAgICAgICBtb25leSAvPSAxMDtcclxuICAgICAgICAgICAgdG1wID0gdG1wID09IDEwMDAwID8gMTAgOiB0bXAgKiAxMDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG5lZ2EgKyAocGFyc2VJbnQobW9uZXkpIC8gKDEwMDAwIC8gdG1wKSkgKyAoemVyb0NudCA8IDggPyBcIuS4h1wiIDogKHplcm9DbnQgPCAxMiA/IFwi5Lq/XCIgOiBcIuWFhlwiKSk7XHJcbiAgICB9LFxyXG4gICAgLy/ljYPliIbnrKbvvIzljYPkvY3liqDpgJflj7dcclxuICAgIGZvcm1hdEJ5MTAwMDogZnVuY3Rpb24gKG1vbmV5KSB7XHJcbiAgICAgICAgcmV0dXJuIChcIlwiK21vbmV5KS5yZXBsYWNlKC8oXFxkezEsM30pKD89KFxcZHszfSkrKD86JHxcXEQpKS9nLFwiJDEsXCIpO1xyXG4gICAgfSxcclxuICAgIC8v6I635Y+W5b2T5YmN55qE5pe26Ze05oizLCDov5nnp43ojrflj5bmlrnlvI/lj6/ku6Xnsr7noa7liLDmr6vnp5JcclxuICAgIGdldFRpbWVTdGFtcCA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAvL3ZhciB0aW1lc3RhbXAgPSBEYXRlLnBhcnNlKG5ldyBEYXRlKCkpOyAgLy/nsr7noa7liLDnp5JcclxuICAgICAgICByZXR1cm4gKG5ldyBEYXRlKCkpLnZhbHVlT2YoKTtcclxuICAgIH0sXHJcblxyXG4gICAgcXVpY2tTb3J0IDogZnVuY3Rpb24oYXJyYXkpe1xyXG4gICAgICAgIGZ1bmN0aW9uIHNvcnQocHJldiwgbnVtc2l6ZSl7XHJcbiAgICAgICAgICAgIHZhciBub25pdXMgPSBwcmV2O1xyXG4gICAgICAgICAgICB2YXIgaiA9IG51bXNpemUgLTE7XHJcbiAgICAgICAgICAgIHZhciBmbGFnID0gYXJyYXlbcHJldl07XHJcbiAgICAgICAgICAgIGlmICgobnVtc2l6ZSAtIHByZXYpID4gMSkge1xyXG4gICAgICAgICAgICAgICAgd2hpbGUobm9uaXVzIDwgail7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yKDsgbm9uaXVzIDwgajsgai0tKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFycmF5W2pdIDwgZmxhZykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJyYXlbbm9uaXVzKytdID0gYXJyYXlbal0744CALy9hW2ldID0gYVtqXTsgaSArPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGZvciggOyBub25pdXMgPCBqOyBub25pdXMrKyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhcnJheVtub25pdXNdID4gZmxhZyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcnJheVtqLS1dID0gYXJyYXlbbm9uaXVzXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgYXJyYXlbbm9uaXVzXSA9IGZsYWc7XHJcbiAgICAgICAgICAgICAgICBzb3J0KDAsIG5vbml1cyk7XHJcbiAgICAgICAgICAgICAgICBzb3J0KG5vbml1cyArIDEsIG51bXNpemUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHNvcnQoMCwgYXJyYXkubGVuZ3RoKTtcclxuICAgICAgICByZXR1cm4gYXJyYXk7XHJcbiAgICB9LFxyXG4gICAgXHJcbiAgICAvL+WQjeWtl+inhOiMgyAgbmFtZeS4uuS8oOWFpeeahOWQjeWtl++8jCBsZW7kuLrpnIDopoHnlZnkvY/nmoTlrZfnrKbplb/luqbvvIwgaXNOb3TlpJrlh7rnmoTlrZfnrKbnlKguLi7ooajnpLrvvIh0cnVl6KGo56S66KaB77yJXHJcbiAgICBnZXROYW1lTGltaXQgOiBmdW5jdGlvbiAobmFtZSwgbGVuLCBpc05vdCkge1xyXG4gICAgICAgIHZhciBzdHIsXHJcbiAgICAgICAgICAgIG1heE5hbWVMZW5ndGg7XHJcbiAgICAgICAgbGVuID8gbWF4TmFtZUxlbmd0aCA9IGxlbiA6IG1heE5hbWVMZW5ndGggPSBHX0NvbmZpZ19jb21tb24ubnVtX21heE5hbWVMZW47XHJcbiAgICAgICAgdmFyIHJlZyA9IC9eW1xcdTRFMDAtXFx1OUZBNV0rJC87XHJcbiAgICAgICAgdmFyIHdvcmRzTnVtID0gMDtcclxuICAgICAgICB2YXIgbmV3U3RyID0gJyc7XHJcbiAgICAgICAgZm9yKHZhciBpID0wOyBpIDwgbmFtZS5sZW5ndGg7IGkgKyspe1xyXG4gICAgICAgICAgICBpZih3b3Jkc051bSA+PSBtYXhOYW1lTGVuZ3RoKXtcclxuICAgICAgICAgICAgICAgIGlmIChpc05vdCkgbmV3U3RyID0gbmV3U3RyO1xyXG4gICAgICAgICAgICAgICAgZWxzZSBuZXdTdHIgKz0gJy4uLidcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHN0ciA9IG5hbWVbaV07XHJcbiAgICAgICAgICAgIG5ld1N0ciArPSBzdHI7XHJcbiAgICAgICAgICAgIGlmKHJlZy50ZXN0KHN0cikpIHtcclxuICAgICAgICAgICAgICAgIHdvcmRzTnVtICs9IDI7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB3b3Jkc051bSArPSAxO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBuZXdTdHJcclxuICAgIH0sXHJcbiAgICBvYmplY3RMb2cgOiBmdW5jdGlvbiAob2JqZWN0KSB7XHJcbiAgICAgICAgdmFyIHN0ciA9ICd7JztcclxuICAgICAgICBmb3IodmFyIGF0dHJOYW1lIGluIG9iamVjdCl7XHJcbiAgICAgICAgICAgIHN0ciArPSBhdHRyTmFtZSsnOicrb2JqZWN0W2F0dHJOYW1lXSsnLCdcclxuICAgICAgICB9XHJcbiAgICAgICAgc3RyICs9ICd9JztcclxuICAgIH0sXHJcbiAgICAvL+mAgumFjeWIneWni+iKgueCueWkp+Wwj1xyXG4gICAgYWRhcHRTaXplIDogZnVuY3Rpb24gKGN1clcsIGN1ckgpIHtcclxuICAgICAgICB2YXIgZGVzaWduU2l6ZSA9IGNjLnZpZXcuZ2V0RGVzaWduUmVzb2x1dGlvblNpemUoKTtcclxuICAgICAgICB2YXIgcmF0ZVcgPSBjYy52aXNpYmxlUmVjdC53aWR0aC9kZXNpZ25TaXplLndpZHRoO1xyXG4gICAgICAgIHZhciByYXRlSCA9IGNjLnZpc2libGVSZWN0LmhlaWdodC9kZXNpZ25TaXplLmhlaWdodDtcclxuICAgICAgICByZXR1cm4ge3dpZHRoOmN1clcqcmF0ZVcsIGhlaWdodDpjdXJIKnJhdGVIfVxyXG4gICAgfSxcclxuICAgIC8v6YCC6YWN5Yid5aeL6IqC54K55L2N572uXHJcbiAgICBhZGFwdFBvcyA6IGZ1bmN0aW9uIChwb3MpIHtcclxuICAgICAgICB2YXIgZGVzaWduU2l6ZSA9IGNjLnZpZXcuZ2V0RGVzaWduUmVzb2x1dGlvblNpemUoKTtcclxuICAgICAgICB2YXIgcmF0ZVcgPSBjYy52aXNpYmxlUmVjdC53aWR0aC9kZXNpZ25TaXplLndpZHRoO1xyXG4gICAgICAgIHZhciByYXRlSCA9IGNjLnZpc2libGVSZWN0LmhlaWdodC9kZXNpZ25TaXplLmhlaWdodDtcclxuICAgICAgICByZXR1cm4gY2MucChwb3MueCpyYXRlVywgcG9zLnkqcmF0ZUgpXHJcbiAgICB9LFxyXG5cclxuICAgIC8v5pu05paw5aS05YOP55qE5pi+56S6LOaJgOacieWktOWDj+eahOabtOaWsOmDveeUqOi/meS4quaOpeWPo1xyXG4gICAgcmVzZXRVcmxJbWcgOiBmdW5jdGlvbiAodXJsTm9kZSwgbmV3RnJhbWUpIHtcclxuICAgICAgICBpZih1cmxOb2RlLl9maXJzdFNpemUgPT09IHVuZGVmaW5lZCkgdXJsTm9kZS5fZmlyc3RTaXplID0ge3dpZHRoOnVybE5vZGUud2lkdGgsaGVpZ2h0OnVybE5vZGUuaGVpZ2h0fTtcclxuICAgICAgICB1cmxOb2RlLmdldENvbXBvbmVudChjYy5TcHJpdGUpLnNwcml0ZUZyYW1lID0gbmV3RnJhbWU7XHJcbiAgICAgICAgdXJsTm9kZS53aWR0aCA9IHVybE5vZGUuX2ZpcnN0U2l6ZS53aWR0aDtcclxuICAgICAgICB1cmxOb2RlLmhlaWdodCA9IHVybE5vZGUuX2ZpcnN0U2l6ZS5oZWlnaHQ7XHJcbiAgICB9LFxyXG4gICAgLy/moLnmja7lm77niYflkI3lrZforr7nva7lm77niYdcclxuICAgIHNldEhlYWRJbWcgOiBmdW5jdGlvbiAoaGVhZE5vZGUsIGltZ05hbWUpIHtcclxuICAgICAgICBpZihHX0NvbmZpZ19jb21tb24uaXNMb2NhbCl7XHJcbiAgICAgICAgICAgIHRoaXMuX2hlYWRVcmwgPSBcIkhlYWRzL1wiKydoZWFkMDEnO1xyXG4gICAgICAgICAgICBjYy5sb2FkZXIubG9hZFJlcyh0aGlzLl9oZWFkVXJsLCBjYy5TcHJpdGVGcmFtZSwgZnVuY3Rpb24gKGVyciwgc3ByaXRlRnJhbWUpIHtcclxuICAgICAgICAgICAgICAgIEdfVE9PTC5yZXNldFVybEltZyhoZWFkTm9kZSwgc3ByaXRlRnJhbWUpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgaWYoaGVhZE5vZGUuX2ZpcnN0RnJhbWUgPT09IHVuZGVmaW5lZCkgaGVhZE5vZGUuX2ZpcnN0RnJhbWUgPSBoZWFkTm9kZS5nZXRDb21wb25lbnQoY2MuU3ByaXRlKS5zcHJpdGVGcmFtZTtcclxuICAgICAgICAgICAgaWYoaW1nTmFtZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5faGVhZFVybCA9IEdfREFUQS5nZXRSZXNOZXRSb290KGltZ05hbWUpO1xyXG4gICAgICAgICAgICAgICAgLy90aGlzLl9oZWFkVXJsID0gJ2h0dHA6Ly8xOTIuMTY4LjAuMTA5OjgwODAvY2xhc3NpYy9yZXMvcmF3LWFzc2V0cy9UZXh0dXJlL0NvbW1vbi9oZWFkL2hlYWQwMC5qcGcnO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBHRy5yZXNNZ3IuZ2V0SGVhZEltZyh0aGlzLl9oZWFkVXJsLCBmdW5jdGlvbiAoZnJhbWUpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZihmcmFtZSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIEdfVE9PTC5yZXNldFVybEltZyhoZWFkTm9kZSwgZnJhbWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1lbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaGVhZE5vZGUuZ2V0Q29tcG9uZW50KGNjLlNwcml0ZSkuc3ByaXRlRnJhbWUgPSBoZWFkTm9kZS5fZmlyc3RGcmFtZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAvLyBjYy5sb2FkZXIubG9hZCh0aGlzLl9oZWFkVXJsLCBmdW5jdGlvbiAoZXJyLCB0ZXh0dXJlKSB7XHJcbiAgICAgICAgICAgICAgICAvLyAgICAgaWYoZXJyKXtcclxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgY29uc29sZS5sb2coZXJyKVxyXG4gICAgICAgICAgICAgICAgLy8gICAgICAgICBoZWFkTm9kZS5nZXRDb21wb25lbnQoY2MuU3ByaXRlKS5zcHJpdGVGcmFtZSA9IGhlYWROb2RlLl9maXJzdEZyYW1lO1xyXG4gICAgICAgICAgICAgICAgLy8gICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgLy8gICAgICAgICBpZih0ZXh0dXJlKXtcclxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgIHZhciBmcmFtZT1uZXcgY2MuU3ByaXRlRnJhbWUodGV4dHVyZSk7XHJcbiAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICBHX1RPT0wucmVzZXRVcmxJbWcoaGVhZE5vZGUsIGZyYW1lKTtcclxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgfWVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgaGVhZE5vZGUuZ2V0Q29tcG9uZW50KGNjLlNwcml0ZSkuc3ByaXRlRnJhbWUgPSBoZWFkTm9kZS5fZmlyc3RGcmFtZTtcclxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICAvL+iOt+WPluWMgOmAn+eahOaXtumXtFxyXG4gICAgZ2V0VW5pZm9ybVRpbWUgOiBmdW5jdGlvbiAoc3RhcnRQb3MsIHRhcmdldFBvcywgbWF4VGltZSkge1xyXG4gICAgICAgIHZhciBsZW4gPSBjYy5wRGlzdGFuY2Uoc3RhcnRQb3MsIHRhcmdldFBvcyk7XHJcbiAgICAgICAgcmV0dXJuIG1heFRpbWUgKiAobGVuIC8gY2MudmlzaWJsZVJlY3Qud2lkdGgpXHJcbiAgICB9LFxyXG5cclxuXHJcbiAgICAvLyBzaG93VG9wVGlwIDogZnVuY3Rpb24gKGNvbnRlbnQpIHtcclxuICAgIC8vICAgICB2YXIgY2FudmFzID0gY2MuZmluZCgnQ2FudmFzJyk7XHJcbiAgICAvLyAgICAgdmFyIHRpcE5vZGUgPSBjYW52YXMuZ2V0Q2hpbGRCeVRhZyg5OSk7XHJcbiAgICAvLyAgICAgaWYoIXRpcE5vZGUpe1xyXG4gICAgLy8gICAgICAgICB0aXBOb2RlID0gbmV3IGNjLk5vZGUoKTtcclxuICAgIC8vICAgICAgICAgdGlwTm9kZS5hZGRDb21wb25lbnQoY2MuTGFiZWwpO1xyXG4gICAgLy8gICAgICAgICBjYW52YXMuYWRkQ2hpbGQodGlwTm9kZSwgMSwgOTkpO1xyXG4gICAgLy8gICAgICAgICB0aXBOb2RlLmNvbG9yID0gY2MuQ29sb3IuUkVEO1xyXG4gICAgLy8gICAgIH1cclxuICAgIC8vICAgICBpZighdGlwTm9kZS5fdGlwKSB0aXBOb2RlLl90aXAgPSAnJztcclxuICAgIC8vICAgICB0aXBOb2RlLl90aXAgKz0gKGNvbnRlbnQrJzsgJyk7XHJcbiAgICAvLyAgICAgdGlwTm9kZS5nZXRDb21wb25lbnQoY2MuTGFiZWwpLnN0cmluZyA9IHRpcE5vZGUuX3RpcDtcclxuICAgIC8vIH0sXHJcbn1cclxuXHJcbndpbmRvdy5HX1RPT0wgPSB0b29sczsiLCIvL+a4uOaIj+S4reWQhOenjeexu+Wei+S/oeaBr+eahOWumuS5iVxyXG5cclxudmFyIHR5cGVDb25maWcgPSB7XHJcblxyXG4gICAgd2ViR2FtZVN0YXRlIDogY2MuRW51bSh7XHJcbiAgICAgICAgcGF1c2UgOiAxLFxyXG4gICAgICAgIHJ1bm5pbmcgOiAyLFxyXG4gICAgfSksXHJcblxyXG4gICAgZ2FtZU1vZHVsZSA6IGNjLkVudW0oe1xyXG4gICAgICAgIHBsYXRmb3JtIDogMCxcclxuICAgICAgICBidWxsMTAwIDogMSxcclxuICAgICAgICBncmFiIDogMixcclxuICAgICAgICBjbGFzc2ljIDogMyxcclxuICAgIH0pLFxyXG5cclxuICAgIC8v5Zy65pmv5ZCN56ew77yM55So5LqO5YiH5o2i5Zy65pmvXHJcbiAgICBzY2VuZU5hbWUgOiBjYy5FbnVtKHtcclxuICAgICAgICBwbGF0Zm9ybSA6ICdQbGF0Zm9ybScsXHJcbiAgICAgICAgYnVsbDEwMCA6ICdQb2tlcl9CdWxsMTAwJyxcclxuICAgICAgICBncmFiIDogJ1Bva2VyX0dyYWInLFxyXG4gICAgICAgIGNsYXNzaWMgOiAnUG9rZXJfY2xhc3NpYycsXHJcbiAgICAgICAgbG9hZGluZ1NjZW5lIDogJ0luSG9tZUxvYWRpbmcnLFxyXG4gICAgfSksXHJcblxyXG4gICAgLy9odHRw6K+35rGCXHJcbiAgICBodHRwX2dhbWVNb2R1bGUgOiBjYy5FbnVtKHtcclxuICAgICAgICBwbGF0Zm9ybSA6IDAsXHJcbiAgICAgICAgYnVsbDEwMCA6IDEsXHJcbiAgICAgICAgY2xhc3NpYyA6IDIsXHJcbiAgICAgICAgZ3JhYiA6IDMsXHJcbiAgICB9KSxcclxuXHJcbiAgICBncmFiU3RhdGUgOiBjYy5FbnVtKHtcclxuICAgICAgICB3YWl0IDogMCwgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+etieW+hVxyXG4gICAgICAgIHJlYWR5U3RhcnQgOiAxLCAgICAgICAgICAgICAgICAgICAgLy9cclxuICAgICAgICBnaXZlUG9rZXIgOiAyLCAgICAgICAgICAgICAgICAgICAgIC8vXHJcbiAgICAgICAgdG91Y2hUYWJsZXMgOiAzLCAgICAgICAgICAgICAgICAgICAvL1xyXG4gICAgICAgIHNob3dGbGFnIDogNCwgICAgICAgICAgICAgICAgICAgICAgLy9cclxuICAgICAgICBmbHlHb2xkIDogNSwgICAgICAgICAgICAgICAgICAgICAgIC8vXHJcbiAgICAgICAgcmVhZHlUb3VjaFRhYmxlIDogNiwgICAgICAgICAgICAgIC8vXHJcbiAgICAgICAgaXNCZXR0aW5nIDogNywgICAgICAgICAgICAgICAgICAgIC8v5piv5ZCm5bey5LiL5rOoXHJcbiAgICB9KSxcclxuXHJcbiAgICAvL+a4uOaIj+a1geeoi+eahOeKtuaAgeacuuWItlxyXG4gICAgY2xhc3NpY1N0YXRlIDogY2MuRW51bSh7XHJcbiAgICAgICAgd2FpdCA6IDAsICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/muLjmiI/nrYnlvoXlvIDlp4tcclxuICAgICAgICByZWFkeVN0YXJ0IDogMSwgICAgICAgICAgICAgICAgICAgIC8v5ri45oiP5YeG5aSH5byA5aeL77yI5pKt5pS+5byA5aeL5Yqo55S75pe25YCZ77yJXHJcbiAgICAgICAgZ2l2ZVBva2VyIDogMiwgICAgICAgICAgICAgICAgICAgICAvL+ato+WcqOWPkeeJjFxyXG4gICAgICAgIGdyYWJEZWFsZXIgOiAzLCAgICAgICAgICAgICAgICAgICAgLy/mraPlnKjmiqLluoRcclxuICAgICAgICBzZXRTY29yZSA6IDQsICAgICAgICAgICAgICAgICAgICAgIC8v5q2j5Zyo5LiL5rOoXHJcbiAgICAgICAgY2FsY3VsYXRlIDogNSwgICAgICAgICAgICAgICAgICAgICAvL+eul+eJjOaXtumXtFxyXG4gICAgICAgIHNob3dSZXN1bHQgOiA2LCAgICAgICAgICAgICAgICAgICAgLy/mmL7npLrnu5PmnpxcclxuICAgIH0pLFxyXG5cclxuICAgIC8v55m+5Lq65aSn5oiY6L+b56iLXHJcbiAgICBidWxsMTAwU3RhdGUgOiBjYy5FbnVtKHtcclxuICAgICAgICB3YWl0IDogMCwgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+a4uOaIj+etieW+heaXtumXtFxyXG4gICAgICAgIHN0YXJ0UmVhZHkgOiAxLCAgICAgICAgICAgICAgICAgICAgLy/muLjmiI/mipXms6jliY3nmoTooajnjrBcclxuICAgICAgICBiZXR0aW5nOiAyLCAgICAgICAgICAgICAgICAgICAgICAgICAgLy/muLjmiI/lvIDlp4vmipXms6hcclxuICAgICAgICBlbmRFZmYgOiAzLCAgICAgICAgICAgICAgICAgICAgICAgICAvL+a4uOaIj+e7k+adn+WQjueahOe7k+eul+ihqOeOsFxyXG4gICAgfSksXHJcblxyXG4gICAgLy/niYzlnovnmoTlgLxcclxuICAgIHBva2VyUmVzdWx0IDogY2MuRW51bSh7XHJcbiAgICAgICAgYnVsbF8wIDogMCwgICAgICAgICAgICAgICAgICAgICAgICAgLy/msqHniZtcclxuICAgICAgICBidWxsXzEgOiAxLFxyXG4gICAgICAgIGJ1bGxfMiA6IDIsXHJcbiAgICAgICAgYnVsbF8zIDogMyxcclxuICAgICAgICBidWxsXzQgOiA0LFxyXG4gICAgICAgIGJ1bGxfNSA6IDUsXHJcbiAgICAgICAgYnVsbF82IDogNixcclxuICAgICAgICBidWxsXzcgOiA3LFxyXG4gICAgICAgIGJ1bGxfOCA6IDgsXHJcbiAgICAgICAgYnVsbF85IDogOSxcclxuICAgICAgICBidWxsXzEwIDogMTAsICAgICAgICAgICAgICAgICAgICAgICAvL+eJm+eJm1xyXG4gICAgICAgIGJ1bGxfMTEgOiAxMSxcclxuICAgICAgICBidWxsXzEyIDogMTIsXHJcbiAgICB9KSxcclxuXHJcbiAgICAvL+WNoeeJjOeahOexu+WeiyAg5aSn5bCP5o6S5YiX5Li66buR5qGDIOe6ouahgyDojYnoirEg5pa55Z2XXHJcbiAgICBwb2tlclR5cGU6Y2MuRW51bSh7XHJcbiAgICAgICAgYmxhY2tIZWFydCA6IDEsICAgICAgICAgICAgICAgICAgICAgLy/pu5HoibLmoYPlv4NcclxuICAgICAgICByZWRIZWFydCA6IDIsICAgICAgICAgICAgICAgICAgICAgICAvL+e6ouiJsuahg+W/g1xyXG4gICAgICAgIGZsb3dlciA6IDMsICAgICAgICAgICAgICAgICAgICAgICAgIC8v5qKF6IqxXHJcbiAgICAgICAgYmxvY2sgOiA0LCAgICAgICAgICAgICAgICAgICAgICAgICAgLy/mlrnlnZdcclxuICAgIH0pLFxyXG5cclxuICAgIHBsYXllclR5cGUgOiBjYy5FbnVtKHtcclxuICAgICAgICBzeXN0ZW0gOiAwLFxyXG4gICAgICAgIG93bmVyIDogMSxcclxuICAgICAgICBvdGhlcnMgOiAyXHJcbiAgICB9KSxcclxuXHJcbiAgICBuZXRfZ2FtZU1vZHVsZSA6IGNjLkVudW0oe1xyXG4gICAgICAgIGJ1bGwxMDA6J0JVTExfMTAwJyxcclxuICAgICAgICBncmFiIDogJ0JVTExfQkFPJyxcclxuICAgICAgICBjbGFzc2ljIDogJ0JVTExfQ0xBU1NJQydcclxuICAgIH0pLFxyXG4gICAgbmV0X2dhbWVNb2R1bGUyIDogY2MuRW51bSh7XHJcbiAgICAgICAgYnVsbDEwMDonYnVsbDEwMCcsXHJcbiAgICAgICAgZ3JhYiA6ICdidWxsQmFvJyxcclxuICAgICAgICBjbGFzc2ljIDogJ2J1bGxjbGFzc2ljJ1xyXG4gICAgfSksXHJcblxyXG4gICAgLy/moYzlrZDlpKflsI/nsbvlnotcclxuICAgIHRhYmxlVHlwZSA6IGNjLkVudW0oe1xyXG4gICAgICAgIGJpZyA6IDEsXHJcbiAgICAgICAgbWluIDogMlxyXG4gICAgfSksXHJcblxyXG4gICAgLy90aXDmmL7npLrnmoTnsbvlnotcclxuICAgIHRpcFR5cGUgOiBjYy5FbnVtKHtcclxuICAgICAgICBcclxuICAgIH0pLFxyXG5cclxuICAgIC8v5o6l5Y+X5pyN5Yqh56uv5raI5oGv5ZCO55qEY29kZeexu+Wei1xyXG4gICAgc2VydmVyQ29kZVR5cGUgOiBjYy5FbnVtKHtcclxuICAgICAgICBzdWNjZXNzIDogJzAnLFxyXG4gICAgICAgIHNlcnZlckVycjEgOiAnMDAwMDEnLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+acjeWKoeWZqOW/mVxyXG4gICAgICAgIHJlbW90ZUxhbmRpbmcgOiAnMDAwMDUnLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+W8guWcsOeZu+mZhlxyXG4gICAgICAgIGdvbGROb3RFbm91Z2ggOiAnMjAwMDAyJywgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+aCqOWJqeS9memHkeW4geS4jei2s1xyXG4gICAgICAgIHVwRGVhbGVyRXJyMSA6ICcyMDAwMDMnLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+aCqOWJqeS9memHkeW4geS4jei2syzml6Dms5XkuIrluoRcclxuICAgICAgICBtYXRjaE5vbkV4aXN0ZW50IDogJzUwMDAwMScsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/otZvkuovkuI3lrZjlnKhcclxuICAgICAgICB1cERlYWxlckVycjIgOiAnNjAwMDAyJywgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/mnKrovr7liLDmnIDkvY7kuIrluoTph5Hpop1cclxuICAgICAgICB1cERlYWxlckVycjMgOiAnNjAwMDEzJywgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/ovpPlhaXnmoTkuIrluoTph5Hpop3moLzlvI/plJnor69cclxuICAgICAgICBub0JldHRpbmcgOiAnMDAwMDMnLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/msqHmnInmipXms6hcclxuICAgICAgICBkb3duRGVhbGVyMSA6ICc2MDAwMTYnLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/mgqjlt7LlnKjluoTvvIzkuIvluoTns7vnu5/lsIbluK7mgqjmiZPlrozmnKzlsYDvvIFcclxuICAgICAgICBkb3duRGVhbGVyMiA6ICc2MDAwMTcnLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/mgqjlt7Lku47kuIrluoTliJfooajpgIDlh7rnq57luoTvvIFcclxuICAgICAgICBkb3duRGVhbGVyMyA6ICc2MDAwMTInLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/mgqjlt7LkuIvluoQhXHJcbiAgICAgICAgZG93bkRlYWxlcjQgOiAnNjAwMDE4JywgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5oKo5Ymp5L2Z6YeR5biB5LiN6LazLOW3suS4i+W6hCFcclxuICAgICAgICBkb3duRGVhbGVyNSA6ICc2MDAwMTknLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/mgqjlvZPmnJ/lt7LkuIvluoQhXHJcbiAgICAgICAgY29udGludWVGYWlsMSA6ICcyMDAwMDQnLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5bqE5a626YeR5biB5LiN6Laz57ut5bqEXHJcbiAgICAgICAgY29udGludWVGYWlsMiA6ICc2MDAwMDgnLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5bqE5a626KKr5Yqo57ut5bqEXHJcbiAgICAgICAgd2FybkRlYWxlcjEgOiAnNjAwMDA3JywgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+WPi+aDheaPkOekujog5oKo55qE5LiK5bqE6LWE6YeR5LiN6LazODAl77yM6K+35Y+K5pe257ut5bqE77yBXHJcbiAgICAgICAgd2FybkRlYWxlcjIgOiAnNjAwMDA5JyxcclxuICAgICAgICB1cERlYWxlclN1Y2Nlc3MgOiAnNjAwMDEwJywgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/miJDkuLrmnKzlsYDluoTlrrZcclxuICAgICAgICBjb250aW51ZUZhaWwzIDogJzYwMDAxNCcsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/ovpPlhaXnmoTnu63luoTph5Hpop3moLzlvI/plJnor69cclxuICAgICAgICBjb250aW51ZVN1Y2Nlc3MgOiAnNjAwMDExJywgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/ovpPlhaXnmoTnu63luoTph5Hpop3moLzlvI/plJnor69cclxuICAgICAgICBuZWVkTG9naW4gOiAnMTAwMDEnLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5pyq55m76ZmG77yM6K+355m76ZmGXHJcbiAgICAgICAgYmV0Tm90UGVybWl0Q29pbjogJzQwMDAwNCcsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+S4i+WIhumHkemineS4uumdnuiuuOWPr+WAvFxyXG4gICAgICAgIGJldE5vdFBlcm1pdEJldDogJzQwMDAwNScsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/pnZ7ms5XkuIvms6jnsbvlnotcclxuICAgICAgICBtYXRjaE5vRW5kOiAnMzAwMDAzJywgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+W3sue7jyDlvIDlp4vnmoTlr7nlsYDmnKrnu5PmnZ9cclxuICAgICAgICBjaG9vc2VFcnJvck1vbmV5OiAnNDAwMDAxJywgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v6YCJ5oup5LqG6ZSZ6K+v55qE562556CB5pWw5YC8XHJcbiAgICB9KSxcclxuXHJcbiAgICAvL1xyXG4gICAgZGVhbGVyTmV0VHlwZSA6IGNjLkVudW0oe1xyXG4gICAgICAgIHVwRGVhbGVyIDogMSwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5LiK5bqEXHJcbiAgICAgICAgY29udGludWVEZWFsZXIgOiAyLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+e7reW6hFxyXG4gICAgICAgIGdldExpc3QgOiAzLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/ojrflj5bkuIrluoTliJfooahcclxuICAgIH0pLFxyXG5cclxuICAgIC8v5rua5Yqo5bGC55qE57G75Z6LXHJcbiAgICBzY3JvbGxUeXBlIDogY2MuRW51bSh7XHJcbiAgICAgICAgaG9yaXpvbnRhbCA6IDEsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5qiq5ZCR5pS+572u5Y2V5YWDXHJcbiAgICAgICAgdmVydGljYWwgOiAyLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v56uW5ZCR5pS+572u5Y2V5YWDXHJcbiAgICAgICAgYmFnIDogMywgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+iDjOWMheagvOW8j+aUvue9ruWNleWFg1xyXG4gICAgfSksXHJcblxyXG4gICAgLy/lhazlkYrnmoTpgJrnn6XmlrnlvI/mnprkuL5cclxuICAgIC8vYW5ub3VuY2VtZW50VHlwZSA6IGNjLkVudW0oe1xyXG4gICAgLy8gICAgZ2VuZXJhbCA6ICdnZW5lcmFsJywgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5LiA6Iis5YWs5ZGKXHJcbiAgICAvLyAgICBpbXBvcnRhbmNlIDogJ2ltcG9ydGFuY2UnLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+mHjeimgeWFrOWRilxyXG4gICAgLy8gICAgcGVyc29uYWwgOiAncGVyc29uYWwnLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5Liq5Lq65YWs5ZGKXHJcbiAgICAvLyAgICBhbGxBZ2VudCA6ICdhbGxBZ2VudCcsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/lhajlsYDku6PnkIbllYZcclxuICAgIC8vICAgIGFwcG9pbnRBZ2VudCA6ICdhcHBvaW50QWdlbnQnLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5oyH5a6a5Luj55CG5ZWGXHJcbiAgICAvLyAgICBlbmFibGUgOiAnZW5hYmxlJywgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5ZCv55SoXHJcbiAgICAvLyAgICBkaXNhYmxlIDogJ2Rpc2FibGUnLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/lj5bmtohcclxuICAgIC8vfSksXHJcblxyXG4gICAgLy/otbDlir/lm77vvIzliKTlrprmmK/ku4DkuYjniYzlnovvvIzlpoLmooXoirFcclxuICAgIHBva2VyVHlwZVN0ciA6IGNjLkVudW0oe1xyXG4gICAgICAgIHNwYWRlIDogJ1NQQURFJywgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+m7keahg1xyXG4gICAgICAgIGRpYW1vbmQgOiAnRElBTU9ORCcsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5pa554mHXHJcbiAgICAgICAgY2x1YiA6ICdDTFVCJywgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5qKF6IqxXHJcbiAgICAgICAgaGVhcnQgOiAnSEVBUlQnLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v57qi5qGDXHJcbiAgICB9KSxcclxuXHJcbiAgICAvL+W6p+S9jeeahOWumuS5iVxyXG4gICAgc2VhdHNJbmRleCA6IGNjLkVudW0oe1xyXG4gICAgICAgIHNlYXRfMToxLFxyXG4gICAgICAgIHNlYXRfMjoyLFxyXG4gICAgICAgIHNlYXRfMzozLFxyXG4gICAgICAgIHNlYXRfNDo0LFxyXG4gICAgICAgIHNlYXRfNTo1LFxyXG4gICAgICAgIHNlYXRfNjo2LFxyXG4gICAgICAgIHNlYXRfNzo3LFxyXG4gICAgICAgIHNlYXRfODo4LFxyXG4gICAgfSksXHJcblxyXG4gICAgLy/mnKzlnLDlrZjlgqjnmoTmlbDmja7nsbvlnotcclxuICAgIGxvY2FsRGF0YVR5cGUgOiBjYy5FbnVtKHtcclxuICAgICAgICBpbkhvbWUgOiAxLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v6L+b5oi/5L+h5oGvXHJcbiAgICAgICAgdGVzdFR5cGUgOiAyLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+a1i+ivleS/oeaBr1xyXG4gICAgfSksXHJcblxyXG4gICAgLy/lhajlsYDnmoTnm5HlkKxcclxuICAgIGdsb2JhbExpc3RlbmVyIDogY2MuRW51bSh7XHJcbiAgICAgICAgcGxheWVyR29sZCA6ICdwbGF5ZXJHb2xkJywgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+eOqeWutuiHquW3seeahOmHkeW4geWPmOWMllxyXG4gICAgfSksXHJcblxyXG4gICAgd2ViTW9iaWxlX2Rlc2lnbiA6IGNjLkVudW0oe1xyXG4gICAgICAgIHRvb2xiYXJfc2hvdyA6IDEsXHJcbiAgICAgICAgdG9vbGJhcl9oaWRlIDogMixcclxuICAgIH0pXHJcbn1cclxuXHJcbndpbmRvdy5HX1RZUEUgPSB0eXBlQ29uZmlnOyIsIm1vZHVsZS5leHBvcnRzID0gY2MuQ2xhc3Moe1xyXG4gICAgcHJvcGVydGllczoge1xyXG4gICAgICAgIF9pc0dhbWVTdGFydCA6IG51bGwsXHJcbiAgICAgICAgX3R5cGVfdG9vbGJhciA6IG51bGwsXHJcbiAgICAgICAgX2lzVmVydGljYWwgOiBudWxsLFxyXG4gICAgfSxcclxuXHJcbiAgICAvLyB1c2UgdGhpcyBmb3IgaW5pdGlhbGl6YXRpb25cclxuICAgIGN0b3I6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLl9pc0dhbWVTdGFydCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuX2lzVmVydGljYWwgPSBmYWxzZTtcclxuICAgICAgICBpZihkb2N1bWVudCl7XHJcbiAgICAgICAgICAgIHRoaXMuX2luaXRNb2JpbGVXZWIoKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIGdhbWVTdGFydCA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLl9pc0dhbWVTdGFydCA9IHRydWU7XHJcbiAgICB9LFxyXG5cclxuICAgIF9pbml0TW9iaWxlV2ViIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuX2FkZEhpZGVMaXN0ZW5lcigpO1xyXG4gICAgICAgIGlmKGNjLnN5cy5pc01vYmlsZSkgdGhpcy5fYWRkUmVzaXplTGlzdGVuZXIoKTtcclxuICAgIH0sXHJcblxyXG4gICAgX2FkZFJlc2l6ZUxpc3RlbmVyIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8vIGNjLnZpZXcucmVzaXplV2l0aEJyb3dzZXJTaXplKHRydWUpO1xyXG4gICAgICAgIC8vIGNjLnZpZXcuYWRqdXN0Vmlld1BvcnQodHJ1ZSk7XHJcbiAgICAgICAgLy8gY2Mudmlldy5zZXRPcmllbnRhdGlvbihjYy5tYWNyby5PUklFTlRBVElPTl9MQU5EU0NBUEUpO1xyXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicmVzaXplXCIsIGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgIGlmKHRoaXMuX2lzR2FtZVN0YXJ0KXtcclxuICAgICAgICAgICAgICAgIHZhciBpc0xhbmRzY2FwZSA9IGRvY3VtZW50LmJvZHkuY2xpZW50V2lkdGggPiBkb2N1bWVudC5ib2R5LmNsaWVudEhlaWdodDtcclxuICAgICAgICAgICAgICAgIGlmKGlzTGFuZHNjYXBlKXtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9pc1ZlcnRpY2FsID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYodGhpcy5fbGFzdEhlaWdodCAhPSB3aW5kb3cuaW5uZXJIZWlnaHQpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZih0aGlzLl9sYXN0SGVpZ2h0ICYmICh0aGlzLl9sYXN0SGVpZ2h0ID4gd2luZG93LmlubmVySGVpZ2h0KSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL3Nob3cgdG9vbGJhclxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fZG9TYWZhcmlIYW5kbGVyKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fbGFzdEhlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9pc1ZlcnRpY2FsID0gIWlzTGFuZHNjYXBlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fdHlwZV90b29sYmFyID0gR19UWVBFLndlYk1vYmlsZV9kZXNpZ24udG9vbGJhcl9oaWRlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hZGFwdFNjZW5lU2l6ZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfS5iaW5kKHRoaXMpKTtcclxuICAgIH0sXHJcblxyXG4gICAgX2FkZEhpZGVMaXN0ZW5lciA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgc2hvd1N0YXRlTmFtZSwgc2hvd0NoYW5nZTtcclxuICAgICAgICBpZiAodHlwZW9mIGRvY3VtZW50LmhpZGRlbiAhPT0gXCJ1bmRlZmluZWRcIikge1xyXG4gICAgICAgICAgICBzaG93Q2hhbmdlID0gXCJ2aXNpYmlsaXR5Y2hhbmdlXCI7XHJcbiAgICAgICAgICAgIHNob3dTdGF0ZU5hbWUgPSBcInZpc2liaWxpdHlTdGF0ZVwiO1xyXG4gICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGRvY3VtZW50Lm1vekhpZGRlbiAhPT0gXCJ1bmRlZmluZWRcIikge1xyXG4gICAgICAgICAgICBzaG93Q2hhbmdlID0gXCJtb3p2aXNpYmlsaXR5Y2hhbmdlXCI7XHJcbiAgICAgICAgICAgIHNob3dTdGF0ZU5hbWUgPSBcIm1velZpc2liaWxpdHlTdGF0ZVwiO1xyXG4gICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGRvY3VtZW50Lm1zSGlkZGVuICE9PSBcInVuZGVmaW5lZFwiKSB7XHJcbiAgICAgICAgICAgIHNob3dDaGFuZ2UgPSBcIm1zdmlzaWJpbGl0eWNoYW5nZVwiO1xyXG4gICAgICAgICAgICBzaG93U3RhdGVOYW1lID0gXCJtc1Zpc2liaWxpdHlTdGF0ZVwiO1xyXG4gICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGRvY3VtZW50LndlYmtpdEhpZGRlbiAhPT0gXCJ1bmRlZmluZWRcIikge1xyXG4gICAgICAgICAgICBzaG93Q2hhbmdlID0gXCJ3ZWJraXR2aXNpYmlsaXR5Y2hhbmdlXCI7XHJcbiAgICAgICAgICAgIHNob3dTdGF0ZU5hbWUgPSBcIndlYmtpdFZpc2liaWxpdHlTdGF0ZVwiO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihzaG93Q2hhbmdlLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgaWYoc2VsZi5faXNHYW1lU3RhcnQpe1xyXG4gICAgICAgICAgICAgICAgLy92YXIgaXNTaG93ID0gQm9vbGVhbihkb2N1bWVudFtzaG93U3RhdGVOYW1lXT09XCJ2aXNpYmxlXCIpO1xyXG4gICAgICAgICAgICAgICAgaWYoQm9vbGVhbihkb2N1bWVudFtzaG93U3RhdGVOYW1lXT09XCJ2aXNpYmxlXCIpKXtcclxuICAgICAgICAgICAgICAgICAgICAvL+WbnuWIsOa4uOaIj1xyXG4gICAgICAgICAgICAgICAgICAgIEdHLl9yZXN1bWVXZWJHYW1lKCk7XHJcbiAgICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICAvL+aaguWBnOa4uOaIj1xyXG4gICAgICAgICAgICAgICAgICAgIEdHLl9wYXVzZVdlYkdhbWUoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sIGZhbHNlKTtcclxuICAgIH0sXHJcblxyXG4gICAgX2RvU2FmYXJpSGFuZGxlciA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgdXNlckFnZW50ID0gbmF2aWdhdG9yLnVzZXJBZ2VudDtcclxuICAgICAgICBpZih1c2VyQWdlbnQuaW5kZXhPZignU2FmYXJpJykgPiAtMSl7XHJcbiAgICAgICAgICAgIHRoaXMuX3R5cGVfdG9vbGJhciA9IEdfVFlQRS53ZWJNb2JpbGVfZGVzaWduLnRvb2xiYXJfc2hvdztcclxuICAgICAgICAgICAgdmFyIG9mZkggPSB0aGlzLl9maXJzdERlc2lnblNpemUuaGVpZ2h0ICogMC4xMztcclxuICAgICAgICAgICAgdGhpcy5fY2hhbmdlRGVzaWduKHRoaXMuX2ZpcnN0RGVzaWduU2l6ZS53aWR0aCwgdGhpcy5fZmlyc3REZXNpZ25TaXplLmhlaWdodCtvZmZIKTtcclxuICAgICAgICAgICAgdGhpcy5hZGFwdFNjZW5lU2l6ZSgpO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgX3Njcm9sbEdhbWUgOiBmdW5jdGlvbiAob2ZmSCkge1xyXG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgd2luZG93LnNjcm9sbFRvKDAsb2ZmSCowLjIyKTtcclxuICAgICAgICB9LCAxMDApXHJcbiAgICB9LFxyXG5cclxuICAgIF9jaGFuZ2VEZXNpZ24gOiBmdW5jdGlvbiAod2lkdGgsIGhlaWdodCkge1xyXG4gICAgICAgIHRoaXMuX2Rlc2lnbldpZHRoID0gd2lkdGg7XHJcbiAgICAgICAgdGhpcy5fZGVzaWduSGVpZ2h0ID0gaGVpZ2h0O1xyXG4gICAgfSxcclxuXHJcbiAgICBfaW5pdERhdGEgOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYodGhpcy5fZmlyc3REZXNpZ25TaXplKSByZXR1cm47XHJcbiAgICAgICAgdmFyIGRlc2lnblNpemUgPSBjYy52aWV3LmdldERlc2lnblJlc29sdXRpb25TaXplKCk7XHJcbiAgICAgICAgaWYoZGVzaWduU2l6ZS53aWR0aCA+IGRlc2lnblNpemUuaGVpZ2h0KXtcclxuICAgICAgICAgICAgdGhpcy5fZmlyc3REZXNpZ25TaXplID0ge3dpZHRoOmRlc2lnblNpemUud2lkdGgsIGhlaWdodDpkZXNpZ25TaXplLmhlaWdodH07XHJcbiAgICAgICAgfWVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLl9maXJzdERlc2lnblNpemUgPSB7d2lkdGg6ZGVzaWduU2l6ZS5oZWlnaHQsIGhlaWdodDpkZXNpZ25TaXplLndpZHRofTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5fbGFzdEhlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodCA8IHdpbmRvdy5pbm5lcldpZHRoID8gd2luZG93LmlubmVySGVpZ2h0IDogd2luZG93LmlubmVyV2lkdGg7XHJcblxyXG4gICAgICAgIHRoaXMuX2NoYW5nZURlc2lnbih0aGlzLl9maXJzdERlc2lnblNpemUud2lkdGgsIHRoaXMuX2ZpcnN0RGVzaWduU2l6ZS5oZWlnaHQpO1xyXG4gICAgICAgIHRoaXMuX3R5cGVfdG9vbGJhciA9IEdfVFlQRS53ZWJNb2JpbGVfZGVzaWduLnRvb2xiYXJfaGlkZTtcclxuICAgIH0sXHJcbiAgICBhZGFwdFNjZW5lU2l6ZSA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLl9pbml0RGF0YSgpO1xyXG5cclxuICAgICAgICBpZihjYy5zeXMuaXNNb2JpbGUpIHtcclxuICAgICAgICAgICAgaWYoZG9jdW1lbnQpe1xyXG4gICAgICAgICAgICAgICAgaWYodGhpcy5faXNWZXJ0aWNhbCl7XHJcbiAgICAgICAgICAgICAgICAgICAgY2Mudmlldy5zZXRPcmllbnRhdGlvbihjYy5tYWNyby5PUklFTlRBVElPTl9QT1JUUkFJVCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY2Mudmlldy5zZXREZXNpZ25SZXNvbHV0aW9uU2l6ZSh0aGlzLl9maXJzdERlc2lnblNpemUud2lkdGgsIHRoaXMuX2ZpcnN0RGVzaWduU2l6ZS5oZWlnaHQsIGNjLlJlc29sdXRpb25Qb2xpY3kuU0hPV19BTEwpO1xyXG4gICAgICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgY2Mudmlldy5zZXRPcmllbnRhdGlvbihjYy5tYWNyby5PUklFTlRBVElPTl9MQU5EU0NBUEUpO1xyXG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAodGhpcy5fdHlwZV90b29sYmFyKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBHX1RZUEUud2ViTW9iaWxlX2Rlc2lnbi50b29sYmFyX2hpZGU6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYy52aWV3LnNldERlc2lnblJlc29sdXRpb25TaXplKHRoaXMuX2ZpcnN0RGVzaWduU2l6ZS53aWR0aCwgdGhpcy5fZmlyc3REZXNpZ25TaXplLmhlaWdodCwgY2MuUmVzb2x1dGlvblBvbGljeS5FWEFDVF9GSVQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBHX1RZUEUud2ViTW9iaWxlX2Rlc2lnbi50b29sYmFyX3Nob3c6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYy52aWV3LnNldERlc2lnblJlc29sdXRpb25TaXplKHRoaXMuX2Rlc2lnbldpZHRoLCB0aGlzLl9kZXNpZ25IZWlnaHQsIGNjLlJlc29sdXRpb25Qb2xpY3kuRklYRURfSEVJR0hUKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9zY3JvbGxHYW1lKHRoaXMuX2Rlc2lnbkhlaWdodCAtIHRoaXMuX2ZpcnN0RGVzaWduU2l6ZS5oZWlnaHQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfS5iaW5kKHRoaXMpLCAyMDApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVha1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2Mudmlldy5zZXREZXNpZ25SZXNvbHV0aW9uU2l6ZSh0aGlzLl9maXJzdERlc2lnblNpemUud2lkdGgsIHRoaXMuX2ZpcnN0RGVzaWduU2l6ZS5oZWlnaHQsIGNjLlJlc29sdXRpb25Qb2xpY3kuRVhBQ1RfRklUKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgIGNjLnZpZXcuc2V0RGVzaWduUmVzb2x1dGlvblNpemUodGhpcy5fZmlyc3REZXNpZ25TaXplLndpZHRoLCB0aGlzLl9maXJzdERlc2lnblNpemUuaGVpZ2h0LCBjYy5SZXNvbHV0aW9uUG9saWN5LkVYQUNUX0ZJVCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9ZWxzZSB7XHJcbiAgICAgICAgICAgIGlmKHdpbmRvdy5pbm5lckhlaWdodCA8IHRoaXMuX2ZpcnN0RGVzaWduU2l6ZS5oZWlnaHQpe1xyXG4gICAgICAgICAgICAgICAgaWYod2luZG93LmlubmVyV2lkdGggPD0gdGhpcy5fZmlyc3REZXNpZ25TaXplLndpZHRoKXtcclxuICAgICAgICAgICAgICAgICAgICBjYy52aWV3LnNldERlc2lnblJlc29sdXRpb25TaXplKHRoaXMuX2ZpcnN0RGVzaWduU2l6ZS53aWR0aCwgdGhpcy5fZmlyc3REZXNpZ25TaXplLmhlaWdodCwgY2MuUmVzb2x1dGlvblBvbGljeS5GSVhFRF9XSURUSCk7XHJcbiAgICAgICAgICAgICAgICB9ZWxzZSBjYy52aWV3LnNldERlc2lnblJlc29sdXRpb25TaXplKHRoaXMuX2ZpcnN0RGVzaWduU2l6ZS53aWR0aCwgdGhpcy5fZmlyc3REZXNpZ25TaXplLmhlaWdodCwgY2MuUmVzb2x1dGlvblBvbGljeS5TSE9XX0FMTCk7XHJcbiAgICAgICAgICAgIH1lbHNlIGNjLnZpZXcuc2V0RGVzaWduUmVzb2x1dGlvblNpemUodGhpcy5fZmlyc3REZXNpZ25TaXplLndpZHRoLCB0aGlzLl9maXJzdERlc2lnblNpemUuaGVpZ2h0LCBjYy5SZXNvbHV0aW9uUG9saWN5LlNIT1dfQUxMKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIGdldExvY2FsSG9zdCA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gd2luZG93LmxvY2F0aW9uLmhvc3RcclxuICAgIH0sXHJcblxyXG4gICAgLy8gY2FsbGVkIGV2ZXJ5IGZyYW1lLCB1bmNvbW1lbnQgdGhpcyBmdW5jdGlvbiB0byBhY3RpdmF0ZSB1cGRhdGUgY2FsbGJhY2tcclxuICAgIC8vIHVwZGF0ZTogZnVuY3Rpb24gKGR0KSB7XHJcblxyXG4gICAgLy8gfSxcclxufSk7XHJcbiJdLCJzb3VyY2VSb290IjoiIn0=
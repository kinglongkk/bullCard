{"version":3,"sources":["assets\\Script\\Objects\\Obj_systemTip.js"],"names":["cc","Class","extends","Component","properties","node_labelBG","Node","label_center","Label","onLoad","_firstPos","p","node","x","y","showContent","str","pos","time","callBack","active","string","position","showTime","G_DATA","isNumber","_countDownNum","_forceEnd","_curStr","_callFunc","_setCenterValue","stopAllActions","runAction","sequence","delayTime","callFunc","_hideTip","_setBackgroundLen","hideSystemTip","_widthRate","width","_firstW","wordLen","name","curStr","reg","i","length","test","targetW","Math","max"],"mappings":"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","file":"unknown","sourcesContent":["//系统提示显示\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        node_labelBG : cc.Node,\r\n        label_center : cc.Label,\r\n    },\r\n\r\n    // use this for initialization\r\n    onLoad: function () {\r\n        this._firstPos = cc.p(this.node.x, this.node.y);\r\n    },\r\n\r\n    //显示系统提示内容\r\n    showContent : function (str, pos, time, callBack) {\r\n        this.node.active = true;\r\n        this.label_center.string = str;\r\n\r\n        if(!this._firstPos) this._firstPos = cc.p(this.node.x, this.node.y);\r\n        if(!pos) pos = this._firstPos;\r\n        this.node.position = pos;\r\n\r\n        var showTime = 3;\r\n        if(G_DATA.isNumber(time)){\r\n            showTime = time;\r\n        }\r\n\r\n        if(this._countDownNum) this._forceEnd();\r\n        //有倒计时\r\n        this._curStr = str;\r\n        this._callFunc = callBack;\r\n        this._setCenterValue();\r\n        this.node.stopAllActions();\r\n        this.node.runAction(cc.sequence(cc.delayTime(showTime), cc.callFunc(this._hideTip, this)));\r\n        this._setBackgroundLen(str);\r\n    },\r\n    hideSystemTip : function () {\r\n        this.node.stopAllActions();\r\n        this.node.active = false;\r\n    },\r\n    _forceEnd : function () {\r\n        this._callFunc = null;\r\n        this.node.stopAllActions();\r\n        this._hideTip();\r\n    },\r\n\r\n    _hideTip : function () {\r\n        this.node.active = false;\r\n        if(this._callFunc) {\r\n            this._callFunc();\r\n            this._callFunc = null;\r\n        }\r\n    },\r\n\r\n    _setCenterValue : function () {\r\n        this.label_center.string = this._curStr;\r\n    },\r\n    //改变背景长度\r\n    _setBackgroundLen : function (str) {\r\n        if(!this._widthRate) this._widthRate = this.node_labelBG.width/14;\r\n        if(!this.node_labelBG._firstW) this.node_labelBG._firstW = this.node_labelBG.width;\r\n\r\n        var wordLen=0, name = str, curStr, reg = /^[\\u4E00-\\u9FA5]+$/;;\r\n        for(var i =0; i < name.length; i ++){\r\n            curStr = name[i];\r\n            if(reg.test(curStr)) {\r\n                wordLen += 2;\r\n            } else {\r\n                wordLen += 1;\r\n            }\r\n        }\r\n\r\n        var targetW = wordLen * this._widthRate;\r\n        this.node_labelBG.width = Math.max(this.node_labelBG._firstW, targetW);\r\n    },\r\n\r\n    // called every frame, uncomment this function to activate update callback\r\n    // update: function (dt) {\r\n\r\n    // },\r\n});\r\n"]}
{"version":3,"sources":["assets\\Script\\Views\\Scene_Grab\\Grab_playerBlock.js"],"names":["cc","Class","extends","Component","properties","_siteImg","_chooseMoneyLevel","_dict_chooseMoney","_callFunc","_defaultHeadFrame","_seatMyselfComp","_data_betting","_goldValueEX","_isSending","_dict_choosed","_curGoldValue","_grabGold","_playerName","_grabTimes","_seatIndex","_resultChangeMoney","_playerID","_usableBalance","node_headImg","default","type","Node","displayName","label_playerName","Label","node_goldValue","_playerType","playerType","set","_type","get","G_TYPE","prefab_goldValue","Prefab","onLoad","_init","_dict_chooseLevel","G_Config_grab","dict_moveGoldNum","_goldValueCompName","start","setPlayerData","dataObj","node","active","clearData","coin","setGoldValue","seatIndex","nickname","_setPlayerName","G_TOOL","setHeadImg","icon","playerId","usableBalance","setSelfInfo","selfInfo","chooseDict","homeLabel","getChildByName","roomName","getComponent","string","_refreshGoldShow","changeMoney","doChoose","tableIndex","goldNum","touchGrabArea","grabInfo","callFunc","money","tipIndex","GG","tipsMgr","showTxtTip","G_Config_common","isLocal","startPos","getWorldPos","forceGrabReturn","goldValue","netData","matchId","grabMgr","getMatchID","net_gameModule","grab","item","gold","socketMgr","SendMsg","NetType","s_doGrab","registerLong","r_doGrab_return","net_grabReturn","bind","recvData","tip","code","serverCodeType","success","retainTime","showStr","matchNonExistent","exitHome","betNotPermitCoin","betNotPermitBet","bettingData","G_OBJ","data_grabBetting","attrName","bet","parseInt","nbSelf","balance","getBtnsComp","refreshGrabOption","getGoldValue","setResultInfo","haveMoney","G_DATA","isNumber","showResultGold","_showGoldCount","count","labelNode","instantiate","parent","zIndex","showGrabGold","scale","parentScale","widthOff","width","owner","others","x","visibleRect","time","time_goldOnHead","act1","moveTo","height","act2","scaleTo","act3","delayTime","runAction","sequence","spawn","_labelMoveEnd","target","destroy","_payGold","table","getChinese","content","showPos","bottomTipPos","playerName","getNameLimit","bindSeatMyself","myselfComp","bindSiteImg","imgNode","resetShowGold","newValue","setPlayerType","toType","reduceGoldEX","changeGold","value","getMoneyChooseDict","getPokerPoint","p","scaleY","y","setChooseLevel","level","getChooseLevel","getWinGoldNum","resutl","getAllGrabTable","parentPos","position","getPlayerName","_getIsOverMaxGrabTimes","getMaxGrabTimes","getSeatIndex","getIsGrab","key","Boolean","getIsBettingEnd","getPlayerID","getIsShow","getUsableBalance","clearRecord","hidePlayer","remove","onDestroy"],"mappings":";;;;;;AAAA;;AAEAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,kBAAW,IADH;AAERC,2BAAoB,IAFZ;AAGRC,2BAAoB,IAHZ;AAIRC,mBAAY,IAJJ;AAKRC,2BAAoB,IALZ,EAKyD;AACjEC,yBAAkB,IANV,EAMyD;AACjEC,uBAAgB,IAPR,EAOqD;AAC7DC,sBAAe,IARP,EAQ0D;AAClEC,oBAAa,IATL,EAS0D;;AAElE;AACAC,uBAAgB,IAZR;AAaRC,uBAAgB,IAbR;AAcRC,mBAAY,IAdJ;AAeRC,qBAAc,IAfN;AAgBRC,oBAAa,IAhBL,EAgBgD;AACxDC,oBAAa,IAjBL;AAkBRC,4BAAqB,IAlBb,EAkB+C;AACvDC,mBAAY,IAnBJ,EAmBgD;AACxDC,wBAAiB,IApBT,EAoB+C;;AAEvDC,sBAAe;AACXC,qBAAU,IADC;AAEXC,kBAAOzB,GAAG0B,IAFC;AAGXC,yBAAc;AAHH,SAtBP;AA2BRC,0BAAmB;AACfJ,qBAAU,IADK;AAEfC,kBAAOzB,GAAG6B,KAFK;AAGfF,yBAAc;AAHC,SA3BX;AAgCRG,wBAAiB;AACbN,qBAAU,IADG;AAEbC,kBAAOzB,GAAG0B,IAFG;AAGbC,yBAAc;AAHD,SAhCT;AAqCRI,qBAAc,CArCN;AAsCRC,oBAAa;AACTC,iBAAM,aAAUC,KAAV,EAAiB;AACnB,qBAAKH,WAAL,GAAmBG,KAAnB;AACH,aAHQ;AAITC,iBAAM,eAAY;AACd,uBAAO,KAAKJ,WAAZ;AACH,aANQ;AAOTN,kBAAOW,OAAOJ,UAPL;AAQTL,yBAAc;AARL,SAtCL;AAgDRU,0BAAmBrC,GAAGsC;AAhDd,KAHP;;AAsDL;AACAC,YAAQ,kBAAY;AAChB,aAAKC,KAAL;AACH,KAzDI;;AA2DLA,WAAQ,iBAAY;AAChB,aAAKC,iBAAL,GAAyBC,cAAcC,gBAAvC;AACA,aAAKC,kBAAL,GAA0B,sBAA1B;AACA,aAAKtC,iBAAL,GAAyB,CAAzB;AACH,KA/DI;;AAiELuC,WAAQ,iBAAY,CAEnB,CAnEI;;AAqEL;AACA;AACA;AACA;AACA;AACAC,mBAAgB,uBAAUC,OAAV,EAAmB;AAC/B,YAAG,CAACA,OAAJ,EAAa;AACb,aAAKC,IAAL,CAAUC,MAAV,GAAmB,IAAnB;;AAEA,aAAKC,SAAL;AACA,YAAGH,QAAQI,IAAR,IAAgB,CAAnB,EAAsB,KAAKC,YAAL,CAAkBL,QAAQI,IAA1B,EAAtB,KACK,KAAKC,YAAL,CAAkB,CAAlB;AACL,YAAGL,QAAQM,SAAX,EAAsB,KAAKlC,UAAL,GAAkB4B,QAAQM,SAA1B;;AAEtB,aAAKpC,WAAL,GAAmB8B,QAAQO,QAA3B;AACA,aAAKC,cAAL,CAAoB,KAAKtC,WAAzB;AACAuC,eAAOC,UAAP,CAAkB,KAAKlC,YAAvB,EAAqCwB,QAAQW,IAA7C;AACA,aAAKrC,SAAL,GAAiB0B,QAAQY,QAAzB;AACA,aAAKrC,cAAL,GAAsByB,QAAQa,aAA9B;AACH,KAxFI;AAyFLC,iBAAc,qBAAUC,QAAV,EAAoB;AAC9B,YAAGA,SAASC,UAAZ,EAAwB,KAAKxD,iBAAL,GAAyBuD,SAASC,UAAlC;AACxB,YAAIC,YAAY,KAAKhB,IAAL,CAAUiB,cAAV,CAAyB,UAAzB,CAAhB;AACA,YAAGD,aAAaF,SAASI,QAAzB,EAAkC;AAC9BF,sBAAUG,YAAV,CAAuBnE,GAAG6B,KAA1B,EAAiCuC,MAAjC,GAA0CN,SAASI,QAAnD;AACH;AACJ,KA/FI;;AAiGLhB,eAAY,qBAAY;AACpB,aAAKpC,aAAL,GAAqB,EAArB;AACA,aAAKE,SAAL,GAAiB,CAAjB;AACA,aAAKJ,YAAL,GAAoB,CAApB;AACA,aAAKM,UAAL,GAAkB,CAAlB;AACA,aAAKL,UAAL,GAAkB,KAAlB;AACA,aAAKF,aAAL,GAAqB,IAArB;AACA,aAAKS,kBAAL,GAA0B,IAA1B;AACH,KAzGI;;AA2GLiD,sBAAmB,4BAAY;AAC3B,aAAKvC,cAAL,CAAoBqC,YAApB,CAAiCnE,GAAG6B,KAApC,EAA2CuC,MAA3C,GAAoDZ,OAAOc,WAAP,CAAmB,KAAKvD,aAAxB,CAApD;AACH,KA7GI;;AA+GLwD,cAAW,kBAAUC,UAAV,EAAsBC,OAAtB,EAA+B;AACtC,YAAG,KAAK3D,aAAL,CAAmB0D,UAAnB,CAAH,EAAmC,KAAK1D,aAAL,CAAmB0D,UAAnB,KAAkCC,OAAlC,CAAnC,KACK,KAAK3D,aAAL,CAAmB0D,UAAnB,IAAiCC,OAAjC;AACR,KAlHI;;AAoHL;AACAC,mBAAgB,uBAAUC,QAAV,EAAoBC,QAApB,EAA8B;AAC1C,YAAIH,UAAQ,CAAZ;AACA,YAAII,QAAQ,KAAKtE,iBAAL,CAAuB,KAAKD,iBAA5B,CAAZ;AACA,aAAKE,SAAL,GAAiBoE,QAAjB;;AAEA,YAAGC,QAAQ,KAAK9D,aAAhB,EAA8B;AAC1B;AACA,gBAAIgC,UAAU;AACV+B,0BAAW;AADD,aAAd;AAGAC,eAAGC,OAAH,CAAWC,UAAX,CAAsBlC,OAAtB;AACH,SAND,MAMK;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAGmC,gBAAgBC,OAAnB,EAA2B;AACvBR,yBAASS,QAAT,GAAoB,KAAKC,WAAL,EAApB;AACA,qBAAKC,eAAL,CAAqBX,QAArB,EAA+BE,KAA/B,EAAsCF,SAASH,UAA/C;AACH,aAHD,MAGK;AACD,oBAAG,KAAK3D,UAAR,EAAmB;AACf;AACH;AACD8D,yBAASS,QAAT,GAAoB,KAAKC,WAAL,EAApB;AACAV,yBAASY,SAAT,GAAqBV,KAArB;AACA,qBAAKlE,aAAL,GAAqBgE,QAArB;;AAEA;AACA,oBAAIa,UAAU;AACVC,6BAASV,GAAGW,OAAH,CAAWC,UAAX,EADC,EACuB;AACjClE,0BAAKW,OAAOwD,cAAP,CAAsBC,IAFjB,EAEsB;AAChCC,0BAAKnB,SAASH,UAAT,GAAoB,IAHf,EAGoB;AAC9BuB,0BAAKlB,KAJK,EAAd;AAMA,qBAAKhE,UAAL,GAAkB,IAAlB;AACAkE,mBAAGiB,SAAH,CAAaC,OAAb,CAAqBC,QAAQC,QAA7B,EAAuCX,OAAvC;AACAT,mBAAGiB,SAAH,CAAaI,YAAb,CAA0BF,QAAQG,eAAlC,EAAmD,KAAKC,cAAL,CAAoBC,IAApB,CAAyB,IAAzB,CAAnD;AACH;AACJ;AACJ,KAlKI;AAmKLD,oBAAiB,wBAAUE,QAAV,EAAoB;AACjC,aAAK3F,UAAL,GAAkB,KAAlB;AACA,YAAI4F,MAAMD,SAASC,GAAnB;AACA,YAAGA,IAAIC,IAAJ,IAAYtE,OAAOuE,cAAP,CAAsBC,OAArC,EAA8C;AAC1C,gBAAI7D,UAAU;AACV+B,0BAAW,EADD;AAEV+B,4BAAa,CAFH;AAGVC,yBAAUL,IAAIA;AAHJ,aAAd;AAKA1B,eAAGC,OAAH,CAAWC,UAAX,CAAsBlC,OAAtB;AACA;AACH;;AAED;AACA,YAAI0D,IAAIC,IAAJ,IAAYtE,OAAOuE,cAAP,CAAsBI,gBAAtC,EAAwD;AACpDhC,eAAGiC,QAAH;AACA;AACH;AACD;AACA,YAAIP,IAAIC,IAAJ,IAAYtE,OAAOuE,cAAP,CAAsBM,gBAAtC,EAAwD;AACpDlC,eAAGiC,QAAH;AACA;AACH;AACD;AACA,YAAIP,IAAIC,IAAJ,IAAYtE,OAAOuE,cAAP,CAAsBO,eAAtC,EAAuD;AACnDnC,eAAGiC,QAAH;AACA;AACH;AACD,YAAG,CAAC,KAAKrG,aAAT,EAAwB;AACxB,YAAIwG,cAAcC,MAAMC,gBAAN,EAAlB;AACA,aAAI,IAAIC,QAAR,IAAoB,KAAK3G,aAAzB,EAAuC;AACnC,gBAAG2G,QAAH,EAAaH,YAAYG,QAAZ,IAAwB,KAAK3G,aAAL,CAAmB2G,QAAnB,CAAxB;AAChB;AACD,aAAK3G,aAAL,GAAqB,IAArB;;AAEAwG,oBAAY5B,SAAZ,GAAwBiB,SAASe,GAAT,CAAaxB,IAArC;AACAoB,oBAAY1C,OAAZ,GAAsB+C,SAAS,KAAK/E,iBAAL,CAAuB,KAAKnC,iBAAL,GAAuB,CAA9C,CAAT,CAAtB;;AAEA;AACA,aAAKiE,QAAL,CAAc4C,YAAY3C,UAA1B,EAAsC2C,YAAY1C,OAAlD;AACA;AACA,aAAKzD,SAAL,IAAkBmG,YAAY5B,SAA9B;AACA,aAAK3E,YAAL,IAAqBuG,YAAY5B,SAAjC;AACA;AACA,aAAKnC,YAAL,CAAkBoD,SAASiB,MAAT,CAAgBC,OAAlC;AACA;AACA,aAAKpG,cAAL,GAAsBkF,SAASiB,MAAT,CAAgB7D,aAAtC;AACA;AACAmB,WAAGW,OAAH,CAAWiC,WAAX,GAAyBC,iBAAzB,CAA2C,KAAKC,YAAL,EAA3C;;AAEA,aAAK3G,UAAL,IAAmB,CAAnB;AACA;AACA,YAAG,KAAKV,SAAR,EAAkB;AACd,iBAAKA,SAAL,CAAe2G,WAAf;AACA,iBAAK3G,SAAL,GAAiB,IAAjB;AACH;AACJ,KA3NI;AA4NL8E,qBAAkB,yBAAUX,QAAV,EAAoBE,KAApB,EAA2BL,UAA3B,EAAuC;AACrDG,iBAASY,SAAT,GAAqBV,KAArB;AACA,aAAK7D,SAAL,IAAkB6D,KAAlB;AACA,aAAKjE,YAAL,IAAqBiE,KAArB;AACA,aAAKzB,YAAL,CAAkB,KAAKrC,aAAL,GAAqB8D,KAAvC;AACA,YAAIJ,UAAU+C,SAAS,KAAK/E,iBAAL,CAAuB,KAAKnC,iBAAL,GAAuB,CAA9C,CAAT,CAAd;AACAqE,iBAASF,OAAT,GAAmBA,OAAnB;AACA,aAAKF,QAAL,CAAcC,UAAd,EAA0BC,OAA1B;AACA,aAAKvD,UAAL,IAAmB,CAAnB;AACA,YAAG,KAAKV,SAAR,EAAkB;AACd,iBAAKA,SAAL,CAAemE,QAAf;AACA,iBAAKnE,SAAL,GAAiB,IAAjB;AACH;AACJ,KAzOI;;AA2OLsH,mBAAgB,uBAAUxD,WAAV,EAAuByD,SAAvB,EAAkC;AAC9C,YAAGC,OAAOC,QAAP,CAAgBF,SAAhB,CAAH,EAA+B,KAAKhH,aAAL,GAAqBgH,SAArB;AAC/B,aAAK3G,kBAAL,GAA0BkD,WAA1B;AACH,KA9OI;AA+OL;AACA;AACA;AACA;AACA;AACA4D,oBAAiB,0BAAY;AACzB,YAAG,KAAK9G,kBAAR,EAA2B;AACvB,iBAAKiD,gBAAL;AACA,iBAAK8D,cAAL,CAAoB,KAAK/G,kBAAzB;AACA,mBAAO,IAAP;AACH;AACD,eAAO,KAAP;AACH,KA3PI;AA4PL;AACA+G,oBAAiB,wBAAUC,KAAV,EAAiB;AAC9B,YAAG,CAACA,KAAJ,EAAW;;AAEX,YAAIC,YAAYrI,GAAGsI,WAAH,CAAe,KAAKjG,gBAApB,CAAhB;AACAgG,kBAAUE,MAAV,GAAmB,KAAKvF,IAAxB;AACAqF,kBAAUG,MAAV,GAAmB,CAAnB;;AAEAH,kBAAUlE,YAAV,CAAuB,KAAKvB,kBAA5B,EAAgD6F,YAAhD,CAA6DL,KAA7D;;AAEAC,kBAAUK,KAAV,GAAkB,GAAlB;AACA,YAAIC,WAAJ,EAAiBC,QAAjB;AACAA,mBAAW,KAAK5F,IAAL,CAAU6F,KAAV,GAAgB,GAA3B;AACA,YAAG,KAAK7G,UAAL,IAAmBI,OAAOJ,UAAP,CAAkB8G,KAAxC,EAA8C;AAC1CH,0BAAc,KAAK3F,IAAL,CAAU0F,KAAxB;AACH,SAFD,MAEM,IAAG,KAAK1G,UAAL,IAAmBI,OAAOJ,UAAP,CAAkB+G,MAAxC,EAA+C;AACjDJ,0BAAc,KAAK3F,IAAL,CAAUuF,MAAV,CAAiBG,KAA/B;AACH;AACD,YAAG,KAAK1F,IAAL,CAAUgG,CAAV,GAAchJ,GAAGiJ,WAAH,CAAeJ,KAAf,GAAqB,CAAtC,EAAyCD,YAAW,CAAC,CAAZ;AACzC,YAAIM,OAAOxG,cAAcyG,eAAzB;AACA,YAAIC,OAAOpJ,GAAGqJ,MAAH,CAAUH,IAAV,EAAgBN,QAAhB,EAA0B,KAAK5F,IAAL,CAAUsG,MAAV,GAAiB,GAA3C,CAAX;AACA,YAAIC,OAAOvJ,GAAGwJ,OAAH,CAAWN,IAAX,EAAiB,CAAjB,CAAX;AACA,YAAIO,OAAOzJ,GAAG0J,SAAH,CAAaR,OAAK,CAAlB,CAAX;AACAb,kBAAUsB,SAAV,CAAoB3J,GAAG4J,QAAH,CAAY5J,GAAG6J,KAAH,CAAST,IAAT,EAAcG,IAAd,CAAZ,EAAgCE,IAAhC,EAAqCzJ,GAAG4E,QAAH,CAAY,KAAKkF,aAAjB,EAAgC,IAAhC,EAAsC1B,KAAtC,CAArC,CAApB;AACH,KApRI;AAqRL0B,mBAAgB,uBAAUC,MAAV,EAAkB3B,KAAlB,EAAyB;AACrC2B,eAAOC,OAAP;AACA;AACA;AACA;AACA;AACA;AACH,KA5RI;;AA8RLC,cAAW,kBAAUxF,OAAV,EAAmB;AAC1B,aAAK1D,aAAL,IAAsB0D,OAAtB;AACA,YAAG,KAAK1D,aAAL,IAAsB,CAAzB,EAA2B;AACvB,iBAAKA,aAAL,GAAqB,CAArB;;AAEA,gBAAImJ,QAAQlC,OAAOmC,UAAP,CAAkB,EAAlB,CAAZ;AACA,gBAAGD,KAAH,EAAS;AACL,oBAAInH,UAAU;AACV+D,6BAAUoD,MAAME,OADN;AAEVC,6BAAUnF,gBAAgBoF,YAFhB;AAGVzD,gCAAaqD,MAAMrD;AAHT,iBAAd;AAKH;AACJ;AACJ,KA5SI;;AA8SL;AACAtD,oBAAiB,wBAAUgH,UAAV,EAAsB;AACnC,YAAG,CAACA,UAAJ,EAAgBA,aAAa,EAAb;AAChBA,qBAAa/G,OAAOgH,YAAP,CAAoBD,UAApB,EAAgC,EAAhC,EAAoC,IAApC,CAAb;AACA,aAAK3I,gBAAL,CAAsBwC,MAAtB,GAA+BmG,UAA/B;AACH,KAnTI;AAoTL;AACAE,oBAAiB,wBAAUC,UAAV,EAAsB;AACnC,aAAKhK,eAAL,GAAuBgK,UAAvB;AACH,KAvTI;;AAyTLC,iBAAc,qBAAUC,OAAV,EAAmB;AAC7B,aAAKvK,QAAL,GAAgBuK,OAAhB;AACH,KA3TI;AA4TL;AACAC,mBAAgB,yBAAY;AACxB,aAAKzH,YAAL,CAAkB,KAAKrC,aAAvB;AACH,KA/TI;AAgULqC,kBAAe,sBAAU0H,QAAV,EAAoB;AAC/B,aAAK/J,aAAL,GAAqB+J,QAArB;AACA,aAAKhJ,cAAL,CAAoBqC,YAApB,CAAiCnE,GAAG6B,KAApC,EAA2CuC,MAA3C,GAAoDZ,OAAOc,WAAP,CAAmBwG,QAAnB,CAApD;;AAEA;AACA,YAAG,KAAKpK,eAAR,EAAwB;AACpB,iBAAKA,eAAL,CAAqB0C,YAArB,CAAkC0H,QAAlC;AACH;AAEJ,KAzUI;AA0ULC,mBAAgB,uBAAUC,MAAV,EAAkB;AAC9B,aAAKhJ,UAAL,GAAkBgJ,MAAlB;AACH,KA5UI;AA6UL;AACAC,kBAAe,sBAAUC,UAAV,EAAsB;AACjC,YAAG,KAAKtK,YAAL,IAAqBsK,UAAxB,EAAmC;AAC/B,iBAAKtK,YAAL,IAAqBsK,UAArB;AACA,mBAAO,CAAP;AACH,SAHD,MAGK;AACD,gBAAIC,QAAQD,aAAa,KAAKtK,YAA9B;AACA,iBAAKA,YAAL,GAAoB,CAApB;AACA,mBAAOuK,KAAP;AACH;AACJ,KAvVI;;AA0VLC,wBAAqB,8BAAY;AAC7B,eAAO,KAAK7K,iBAAZ;AACH,KA5VI;AA6VL8K,mBAAgB,yBAAY;AACxB,eAAOrL,GAAGsL,CAAH,CAAK,KAAKtI,IAAL,CAAUgG,CAAV,GAAe,KAAKhG,IAAL,CAAU6F,KAAV,GAAgB,KAAK7F,IAAL,CAAUuI,MAA1B,GAAiC,GAArD,EAA2D,KAAKvI,IAAL,CAAUwI,CAArE,CAAP;AACH,KA/VI;AAgWLC,oBAAiB,wBAAUC,KAAV,EAAiB;AAC9B,aAAKpL,iBAAL,GAAyBoL,KAAzB;AACH,KAlWI;AAmWLC,oBAAiB,0BAAY;AACzB,eAAO,KAAKrL,iBAAZ;AACH,KArWI;AAsWLsL,mBAAgB,uBAAUC,MAAV,EAAkB;AAC9B,eAAO,KAAK/K,aAAL,CAAmB+K,MAAnB,CAAP;AACH,KAxWI;AAyWLC,qBAAkB,2BAAY;AAC1B,eAAO,KAAKhL,aAAZ;AACH,KA3WI;AA4WLuE,iBAAc,uBAAY;AACtB,YAAI0G,YAAY,KAAK/I,IAAL,CAAUuF,MAAV,CAAiByD,QAAjC;AACA,eAAOhM,GAAGsL,CAAH,CAAK,KAAKtI,IAAL,CAAUgG,CAAV,GAAY+C,UAAU/C,CAA3B,EAA8B,KAAKhG,IAAL,CAAUwI,CAAV,GAAYO,UAAUP,CAApD,CAAP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACH,KA1XI;AA2XLS,mBAAgB,yBAAY;AACxB,eAAO,KAAKhL,WAAZ;AACH,KA7XI;AA8XL4G,kBAAe,wBAAY;AACvB,eAAO,KAAK9G,aAAZ;AACH,KAhYI;AAiYLmL,4BAAyB,kCAAY;AACjC,eAAO,KAAKhL,UAAL,IAAmB6D,GAAGW,OAAH,CAAWyG,eAAX,EAA1B;AACH,KAnYI;AAoYLC,kBAAe,wBAAY;AACvB,eAAO,KAAKjL,UAAZ;AACH,KAtYI;AAuYL;AACAkL,eAAY,qBAAY;AACpB,YAAG,CAAC,KAAKvL,aAAT,EAAwB,OAAO,KAAP;AACxB,YAAI2D,UAAU,CAAd;AACA,aAAI,IAAI6H,GAAR,IAAe,KAAKxL,aAApB,EAAkC;AAC9B2D,uBAAW,KAAK3D,aAAL,CAAmBwL,GAAnB,CAAX;AACA,gBAAG7H,UAAQ,CAAX,EAAc;AACjB;AACD,eAAO8H,QAAQ9H,OAAR,CAAP;AACH,KAhZI;AAiZL;AACA+H,qBAAkB,2BAAY;AAC1B,eAAOD,QAAQ,KAAKvL,SAAb,CAAP;AACH,KApZI;AAqZL;AACAyL,iBAAc,uBAAY;AACtB,eAAO,KAAKpL,SAAZ;AACH,KAxZI;AAyZLqL,eAAY,qBAAY;AACpB,eAAO,KAAK1J,IAAL,CAAUC,MAAjB;AACH,KA3ZI;AA4ZL;AACA0J,sBAAmB,4BAAY;AAC3B,eAAO,KAAKrL,cAAZ;AACH,KA/ZI;;AAkaL;AACAsL,iBAAc,uBAAY;AACtB;AACA,aAAK5L,SAAL,GAAiB,CAAjB;AACA,aAAKJ,YAAL,GAAoB,CAApB;AACH,KAvaI;AAwaLiM,gBAAa,sBAAY;AACrB,aAAK7J,IAAL,CAAUC,MAAV,GAAmB,KAAnB;AACH,KA1aI;AA2aL6J,YAAS,kBAAY;AACjB,aAAK9J,IAAL,CAAUgH,OAAV;AACH,KA7aI;AA8aL+C,eAAY,qBAAY,CAEvB;;AAhbI,CAAT","file":"unknown","sourcesContent":["//玩家头像块\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        _siteImg : null,\r\n        _chooseMoneyLevel : null,\r\n        _dict_chooseMoney : null,\r\n        _callFunc : null,\r\n        _defaultHeadFrame : null,                                        //没有玩家头像时候使用的默认头像\r\n        _seatMyselfComp : null,                                          //座位上的自己玩家\r\n        _data_betting : null,                                        //投注信息\r\n        _goldValueEX : null,                                              //投注金额池信息\r\n        _isSending : null,                                                //是否正在发送投注请求\r\n\r\n        //data\r\n        _dict_choosed : null,\r\n        _curGoldValue : null,\r\n        _grabGold : null,\r\n        _playerName : null,\r\n        _grabTimes : null,                                      //当前投注次数\r\n        _seatIndex : null,\r\n        _resultChangeMoney : null,                             //结算时候显示是金额变化\r\n        _playerID : null,                                       //玩家id\r\n        _usableBalance : null,                                 //可用余额\r\n\r\n        node_headImg : {\r\n            default : null,\r\n            type : cc.Node,\r\n            displayName : '头像'\r\n        },\r\n        label_playerName : {\r\n            default : null,\r\n            type : cc.Label,\r\n            displayName : '玩家名'\r\n        },\r\n        node_goldValue : {\r\n            default : null,\r\n            type : cc.Node,\r\n            displayName : '拥有金币'\r\n        },\r\n        _playerType : 0,\r\n        playerType : {\r\n            set : function (_type) {\r\n                this._playerType = _type;\r\n            },\r\n            get : function () {\r\n                return this._playerType;\r\n            },\r\n            type : G_TYPE.playerType,\r\n            displayName : '玩家类型'\r\n        },\r\n        prefab_goldValue : cc.Prefab\r\n    },\r\n\r\n    // use this for initialization\r\n    onLoad: function () {\r\n        this._init();\r\n    },\r\n\r\n    _init : function () {\r\n        this._dict_chooseLevel = G_Config_grab.dict_moveGoldNum;\r\n        this._goldValueCompName = 'Obj_goldResultEffect';\r\n        this._chooseMoneyLevel = 0;\r\n    },\r\n\r\n    start : function () {\r\n\r\n    },\r\n\r\n    //var dataObj = {\r\n    //    name : '',\r\n    //    headImg : '',\r\n    //    goldValue : 11\r\n    //}\r\n    setPlayerData : function (dataObj) {\r\n        if(!dataObj) return;\r\n        this.node.active = true;\r\n\r\n        this.clearData();\r\n        if(dataObj.coin >= 0) this.setGoldValue(dataObj.coin);\r\n        else this.setGoldValue(0);\r\n        if(dataObj.seatIndex) this._seatIndex = dataObj.seatIndex;\r\n\r\n        this._playerName = dataObj.nickname;\r\n        this._setPlayerName(this._playerName);\r\n        G_TOOL.setHeadImg(this.node_headImg, dataObj.icon);\r\n        this._playerID = dataObj.playerId;\r\n        this._usableBalance = dataObj.usableBalance;\r\n    },\r\n    setSelfInfo : function (selfInfo) {\r\n        if(selfInfo.chooseDict) this._dict_chooseMoney = selfInfo.chooseDict;\r\n        var homeLabel = this.node.getChildByName('homeName');\r\n        if(homeLabel && selfInfo.roomName){\r\n            homeLabel.getComponent(cc.Label).string = selfInfo.roomName;\r\n        }\r\n    },\r\n\r\n    clearData : function () {\r\n        this._dict_choosed = {};\r\n        this._grabGold = 0;\r\n        this._goldValueEX = 0;\r\n        this._grabTimes = 0;\r\n        this._isSending = false;\r\n        this._data_betting = null;\r\n        this._resultChangeMoney = null;\r\n    },\r\n\r\n    _refreshGoldShow : function () {\r\n        this.node_goldValue.getComponent(cc.Label).string = G_TOOL.changeMoney(this._curGoldValue);\r\n    },\r\n\r\n    doChoose : function (tableIndex, goldNum) {\r\n        if(this._dict_choosed[tableIndex]) this._dict_choosed[tableIndex] += goldNum;\r\n        else this._dict_choosed[tableIndex] = goldNum;\r\n    },\r\n\r\n    //点击投注区域\r\n    touchGrabArea : function (grabInfo, callFunc) {\r\n        var goldNum=0;\r\n        var money = this._dict_chooseMoney[this._chooseMoneyLevel];\r\n        this._callFunc = callFunc;\r\n\r\n        if(money > this._curGoldValue){\r\n            //余额不足\r\n            var dataObj = {\r\n                tipIndex : 21,\r\n            }\r\n            GG.tipsMgr.showTxtTip(dataObj);\r\n        }else{\r\n            //if(this._getIsOverMaxGrabTimes()){\r\n            //    //超出最大投注次数\r\n            //    var dataObj = {\r\n            //        tipIndex : 20,\r\n            //        showStr : '超出最大投注次数'\r\n            //    }\r\n            //    GG.tipsMgr.showTxtTip(dataObj);\r\n            //}else{\r\n            //\r\n            //}\r\n            if(G_Config_common.isLocal){\r\n                grabInfo.startPos = this.getWorldPos();\r\n                this.forceGrabReturn(grabInfo, money, grabInfo.tableIndex);\r\n            }else{\r\n                if(this._isSending){\r\n                    return\r\n                }\r\n                grabInfo.startPos = this.getWorldPos();\r\n                grabInfo.goldValue = money;\r\n                this._data_betting = grabInfo;\r\n\r\n                //可以投注\r\n                var netData = {\r\n                    matchId: GG.grabMgr.getMatchID(),//赛事id  int\r\n                    type:G_TYPE.net_gameModule.grab,//投注类型 string\r\n                    item:grabInfo.tableIndex+'_W',//投注项 string\r\n                    gold:money,//投注额 int\r\n                }\r\n                this._isSending = true;\r\n                GG.socketMgr.SendMsg(NetType.s_doGrab, netData);\r\n                GG.socketMgr.registerLong(NetType.r_doGrab_return, this.net_grabReturn.bind(this));\r\n            }\r\n        }\r\n    },\r\n    net_grabReturn : function (recvData) {\r\n        this._isSending = false;\r\n        var tip = recvData.tip;\r\n        if(tip.code != G_TYPE.serverCodeType.success) {\r\n            var dataObj = {\r\n                tipIndex : 19,\r\n                retainTime : 3,\r\n                showStr : tip.tip,\r\n            }\r\n            GG.tipsMgr.showTxtTip(dataObj)\r\n            return;\r\n        }\r\n\r\n        //赛事不存在踢出\r\n        if (tip.code == G_TYPE.serverCodeType.matchNonExistent) {\r\n            GG.exitHome();\r\n            return;\r\n        }\r\n        //下分金额为非许可值踢出\r\n        if (tip.code == G_TYPE.serverCodeType.betNotPermitCoin) {\r\n            GG.exitHome();\r\n            return;\r\n        }\r\n        //非法下注类型踢出\r\n        if (tip.code == G_TYPE.serverCodeType.betNotPermitBet) {\r\n            GG.exitHome();\r\n            return;\r\n        }\r\n        if(!this._data_betting) return;\r\n        var bettingData = G_OBJ.data_grabBetting();\r\n        for(var attrName in this._data_betting){\r\n            if(attrName) bettingData[attrName] = this._data_betting[attrName]\r\n        }\r\n        this._data_betting = null;\r\n\r\n        bettingData.goldValue = recvData.bet.gold;\r\n        bettingData.goldNum = parseInt(this._dict_chooseLevel[this._chooseMoneyLevel+1]);\r\n\r\n        //记录投注信息\r\n        this.doChoose(bettingData.tableIndex, bettingData.goldNum);\r\n        //累计投注金额\r\n        this._grabGold += bettingData.goldValue;\r\n        this._goldValueEX += bettingData.goldValue;\r\n        //更新玩家剩余金额\r\n        this.setGoldValue(recvData.nbSelf.balance);\r\n        //可用余额\r\n        this._usableBalance = recvData.nbSelf.usableBalance;\r\n        //押注过程中更新押注按钮（置灰）\r\n        GG.grabMgr.getBtnsComp().refreshGrabOption(this.getGoldValue());\r\n\r\n        this._grabTimes += 1;\r\n        // GG.grabMgr.setBettingTimes(this._grabTimes);\r\n        if(this._callFunc){\r\n            this._callFunc(bettingData);\r\n            this._callFunc = null;\r\n        }\r\n    },\r\n    forceGrabReturn : function (grabInfo, money, tableIndex) {\r\n        grabInfo.goldValue = money;\r\n        this._grabGold += money;\r\n        this._goldValueEX += money;\r\n        this.setGoldValue(this._curGoldValue - money);\r\n        var goldNum = parseInt(this._dict_chooseLevel[this._chooseMoneyLevel+1]);\r\n        grabInfo.goldNum = goldNum;\r\n        this.doChoose(tableIndex, goldNum);\r\n        this._grabTimes += 1;\r\n        if(this._callFunc){\r\n            this._callFunc(grabInfo);\r\n            this._callFunc = null;\r\n        }\r\n    },\r\n\r\n    setResultInfo : function (changeMoney, haveMoney) {\r\n        if(G_DATA.isNumber(haveMoney)) this._curGoldValue = haveMoney;\r\n        this._resultChangeMoney = changeMoney;\r\n    },\r\n    //setResultGoldInfo : function (goldInfo) {\r\n    //    goldInfo.targetPos = this.getWorldPos();\r\n    //    //goldInfo.callFunc = this.showResultGold.bind(this);\r\n    //    return goldInfo\r\n    //},\r\n    showResultGold : function () {\r\n        if(this._resultChangeMoney){\r\n            this._refreshGoldShow();\r\n            this._showGoldCount(this._resultChangeMoney);\r\n            return true\r\n        }\r\n        return false\r\n    },\r\n    //显示玩家数值的增减\r\n    _showGoldCount : function (count) {\r\n        if(!count) return;\r\n\r\n        var labelNode = cc.instantiate(this.prefab_goldValue);\r\n        labelNode.parent = this.node;\r\n        labelNode.zIndex = 2;\r\n\r\n        labelNode.getComponent(this._goldValueCompName).showGrabGold(count);\r\n\r\n        labelNode.scale = 0.1;\r\n        var parentScale, widthOff;\r\n        widthOff = this.node.width*0.3;\r\n        if(this.playerType == G_TYPE.playerType.owner){\r\n            parentScale = this.node.scale;\r\n        }else if(this.playerType == G_TYPE.playerType.others){\r\n            parentScale = this.node.parent.scale;\r\n        }\r\n        if(this.node.x > cc.visibleRect.width/2) widthOff*= -1;\r\n        var time = G_Config_grab.time_goldOnHead;\r\n        var act1 = cc.moveTo(time, widthOff, this.node.height*0.4);\r\n        var act2 = cc.scaleTo(time, 1);\r\n        var act3 = cc.delayTime(time*2);\r\n        labelNode.runAction(cc.sequence(cc.spawn(act1,act2),act3,cc.callFunc(this._labelMoveEnd, this, count)))\r\n    },\r\n    _labelMoveEnd : function (target, count) {\r\n        target.destroy();\r\n        //this._refreshGoldShow();\r\n        //if(this._callFunc){\r\n        //    this._callFunc();\r\n        //    this._callFunc = null;\r\n        //}\r\n    },\r\n\r\n    _payGold : function (goldNum) {\r\n        this._curGoldValue -= goldNum;\r\n        if(this._curGoldValue <= 0){\r\n            this._curGoldValue = 0;\r\n\r\n            var table = G_DATA.getChinese(21);\r\n            if(table){\r\n                var dataObj = {\r\n                    showStr : table.content,\r\n                    showPos : G_Config_common.bottomTipPos,\r\n                    retainTime : table.retainTime\r\n                }\r\n            }\r\n        }\r\n    },\r\n\r\n    //设置玩家名字\r\n    _setPlayerName : function (playerName) {\r\n        if(!playerName) playerName = '';\r\n        playerName = G_TOOL.getNameLimit(playerName, 10, true);\r\n        this.label_playerName.string = playerName;\r\n    },\r\n    //绑定座位上的玩家\r\n    bindSeatMyself : function (myselfComp) {\r\n        this._seatMyselfComp = myselfComp;\r\n    },\r\n\r\n    bindSiteImg : function (imgNode) {\r\n        this._siteImg = imgNode;\r\n    },\r\n    //重置金额的显示\r\n    resetShowGold : function () {\r\n        this.setGoldValue(this._curGoldValue);\r\n    },\r\n    setGoldValue : function (newValue) {\r\n        this._curGoldValue = newValue;\r\n        this.node_goldValue.getComponent(cc.Label).string = G_TOOL.changeMoney(newValue);\r\n\r\n        //位置上的自己\r\n        if(this._seatMyselfComp){\r\n            this._seatMyselfComp.setGoldValue(newValue);\r\n        }\r\n\r\n    },\r\n    setPlayerType : function (toType) {\r\n        this.playerType = toType;\r\n    },\r\n    //押宝——设置投注金额池的变化\r\n    reduceGoldEX : function (changeGold) {\r\n        if(this._goldValueEX >= changeGold){\r\n            this._goldValueEX -= changeGold;\r\n            return 0;\r\n        }else{\r\n            var value = changeGold - this._goldValueEX;\r\n            this._goldValueEX = 0;\r\n            return value\r\n        }\r\n    },\r\n\r\n\r\n    getMoneyChooseDict : function () {\r\n        return this._dict_chooseMoney\r\n    },\r\n    getPokerPoint : function () {\r\n        return cc.p(this.node.x + (this.node.width*this.node.scaleY*0.7), this.node.y)\r\n    },\r\n    setChooseLevel : function (level) {\r\n        this._chooseMoneyLevel = level;\r\n    },\r\n    getChooseLevel : function () {\r\n        return this._chooseMoneyLevel;\r\n    },\r\n    getWinGoldNum : function (resutl) {\r\n        return this._dict_choosed[resutl]\r\n    },\r\n    getAllGrabTable : function () {\r\n        return this._dict_choosed\r\n    },\r\n    getWorldPos : function () {\r\n        var parentPos = this.node.parent.position;\r\n        return cc.p(this.node.x+parentPos.x, this.node.y+parentPos.y)\r\n        //switch (this.playerType){\r\n        //    case G_TYPE.playerType.owner:\r\n        //        return this.node.position\r\n        //    case G_TYPE.playerType.system:\r\n        //        return this.node.position\r\n        //    case G_TYPE.playerType.others:\r\n        //        var siteImg = this.node.parent;\r\n        //        return cc.p(siteImg.parent.x+siteImg.x, siteImg.parent.y+siteImg.y)\r\n        //    default:\r\n        //        break;\r\n        //}\r\n    },\r\n    getPlayerName : function () {\r\n        return this._playerName\r\n    },\r\n    getGoldValue : function () {\r\n        return this._curGoldValue\r\n    },\r\n    _getIsOverMaxGrabTimes : function () {\r\n        return this._grabTimes >= GG.grabMgr.getMaxGrabTimes()\r\n    },\r\n    getSeatIndex : function () {\r\n        return this._seatIndex\r\n    },\r\n    //是否已经投注\r\n    getIsGrab : function () {\r\n        if(!this._dict_choosed) return false;\r\n        var goldNum = 0;\r\n        for(var key in this._dict_choosed){\r\n            goldNum += this._dict_choosed[key];\r\n            if(goldNum>0) break;\r\n        }\r\n        return Boolean(goldNum)\r\n    },\r\n    //是否已经投注结束\r\n    getIsBettingEnd : function () {\r\n        return Boolean(this._grabGold)\r\n    },\r\n    //获取玩家ID\r\n    getPlayerID : function () {\r\n        return this._playerID\r\n    },\r\n    getIsShow : function () {\r\n        return this.node.active\r\n    },\r\n    //获取可用余额\r\n    getUsableBalance : function () {\r\n        return this._usableBalance;\r\n    },\r\n\r\n\r\n    //清理关于投注的记录\r\n    clearRecord : function () {\r\n        //this._dict_choosed = {};\r\n        this._grabGold = 0;\r\n        this._goldValueEX = 0;\r\n    },\r\n    hidePlayer : function () {\r\n        this.node.active = false;\r\n    },\r\n    remove : function () {\r\n        this.node.destroy();\r\n    },\r\n    onDestroy : function () {\r\n\r\n    },\r\n\r\n\r\n    // called every frame, uncomment this function to activate update callback\r\n    // update: function (dt) {\r\n\r\n    // },\r\n});\r\n"]}
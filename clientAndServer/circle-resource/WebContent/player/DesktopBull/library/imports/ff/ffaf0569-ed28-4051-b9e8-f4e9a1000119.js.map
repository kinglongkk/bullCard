{"version":3,"sources":["assets\\Script\\Objects\\Obj_goldResultEffect.js"],"names":["cc","Class","extends","Component","_callFunc","properties","node_addGold","Node","node_lostGold","onLoad","_reloadLabel","_label_add","getComponentInChildren","Label","_label_lost","showGrabGold","count","active","string","showEffect","value","startPos","targetY","callFunc","node","_showGoldAddEffect","_showGoldLostEffect","zIndex","position","scale","opacity","time","G_Config_classic","list_goldAddFly","act1","moveTo","easing","easeOut","act2","scaleTo","act3","fadeTo","act5","_addEffectMid","runAction","sequence","spawn","target","delayTime","easeInOut","act4","_effectEnd","list_goldLostFly","fadeOut","hideGold"],"mappings":"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","file":"unknown","sourcesContent":["//显示在头像上面的金币增减的漂浮特效\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n    _callFunc : null,                               //金币特效结束后回调\r\n    properties: {\r\n        node_addGold : cc.Node,\r\n        node_lostGold : cc.Node,\r\n    },\r\n\r\n    // use this for initialization\r\n    onLoad: function () {\r\n        this._reloadLabel();\r\n    },\r\n\r\n    _reloadLabel : function () {\r\n        this._label_add = this.node_addGold.getComponentInChildren(cc.Label);\r\n        this._label_lost = this.node_lostGold.getComponentInChildren(cc.Label);\r\n    },\r\n\r\n    showGrabGold : function (count) {\r\n        if(!count) return;\r\n        if(!this._label_add) this._reloadLabel();\r\n\r\n        if(count > 0){\r\n            this.node_addGold.active = true;\r\n            this.node_lostGold.active = false;\r\n            count = '+'+count;\r\n            this._label_add.string = count;\r\n        }else{\r\n            //count = '-'+count;\r\n            this.node_addGold.active = false;\r\n            this.node_lostGold.active = true;\r\n            this._label_lost.string = count;\r\n        }\r\n    },\r\n\r\n    showEffect : function (value, startPos, targetY, callFunc) {\r\n        this.node.active = true;\r\n        this._callFunc = callFunc;\r\n        if(value > 0){\r\n            this.node_addGold.active = true;\r\n            this.node_lostGold.active = false;\r\n            this._label_add.string = '+'+value;\r\n            this._showGoldAddEffect(startPos, targetY);\r\n        }else if(value < 0){\r\n            this.node_lostGold.active = true;\r\n            this.node_addGold.active = false;\r\n            this._label_lost.string = value;\r\n            this._showGoldLostEffect(startPos, targetY);\r\n        }else{\r\n            //value == 0\r\n            this.node_addGold.active = true;\r\n            this.node_lostGold.active = false;\r\n            this._label_add.string = value;\r\n            this._showGoldAddEffect(startPos, targetY);\r\n        }\r\n    },\r\n\r\n    //金币显示的移动效果\r\n    _showGoldAddEffect : function (startPos, targetY) {\r\n        this.node.zIndex = -1;\r\n        this.node.position = startPos;\r\n        this.node.scale = 0;\r\n        this.node.opacity = 0;\r\n\r\n        var time = G_Config_classic.list_goldAddFly[0];\r\n        var act1 = cc.moveTo(time, 0, targetY).easing(cc.easeOut(3.0));\r\n        var act2 = cc.scaleTo(time, 1);\r\n        var act3 = cc.fadeTo(time, 255);\r\n\r\n        var act5 = cc.callFunc(this._addEffectMid, this, startPos);\r\n        this.node.runAction(cc.sequence(cc.spawn(act1, act2, act3), act5));\r\n    },\r\n    _addEffectMid : function (target, startPos) {\r\n        this.node.zIndex = 1;\r\n        var time = G_Config_classic.list_goldAddFly[1];\r\n        var act1 = cc.delayTime(G_Config_classic.list_goldAddFly[2]);\r\n        var act2 = cc.fadeTo(time, 100);\r\n        var act3 = cc.moveTo(time, startPos).easing(cc.easeInOut(3.0));\r\n        var act4 = cc.scaleTo(time, 0.5);\r\n        var act5 = cc.callFunc(this._effectEnd, this);\r\n        this.node.runAction(cc.sequence(act1, cc.spawn(act2, act3, act4), act5));\r\n    },\r\n\r\n    _showGoldLostEffect : function (startPos, targetY) {\r\n        this.node.zIndex = -1;\r\n        this.node.position = startPos;\r\n        this.node.scale = 0;\r\n        this.node.opacity = 255;\r\n\r\n        var time = G_Config_classic.list_goldLostFly[0];\r\n        var act1 = cc.moveTo(time, 0, targetY).easing(cc.easeOut(3.0));\r\n        var act2 = cc.scaleTo(time, 1);\r\n        var act3 = cc.delayTime(G_Config_classic.list_goldLostFly[1]);\r\n        var act4 = cc.fadeOut(G_Config_classic.list_goldLostFly[2]);\r\n        var act5 = cc.callFunc(this._effectEnd, this);\r\n        this.node.runAction(cc.sequence(cc.spawn(act1, act2), act3, act4, act5));\r\n    },\r\n\r\n    _effectEnd : function () {\r\n        this.hideGold();\r\n        if(this._callFunc) this._callFunc();\r\n    },\r\n\r\n    //隐藏\r\n    hideGold : function () {\r\n        this.node.active = false;\r\n    },\r\n\r\n    // called every frame, uncomment this function to activate update callback\r\n    // update: function (dt) {\r\n\r\n    // },\r\n});\r\n"]}
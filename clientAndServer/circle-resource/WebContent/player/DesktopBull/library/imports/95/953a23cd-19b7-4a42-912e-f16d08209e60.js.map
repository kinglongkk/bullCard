{"version":3,"sources":["assets\\Script\\Objects\\Obj_confirmTip.js"],"names":["cc","Class","extends","require","properties","_callFunc","_callFunc2","_registerFunc","_isPlayEffect","label_center","Label","node_left","Node","node_right","node_center","node_grayLayer","onLoad","_showTime","G_Config_common","time_confirmTipShow","_maxScale","scale_confirmTipMax","_touchCompName","showContent","contentStr","callFunc","callFunc2","node","active","_showOneBtn","_setContent","_showEffect","getComponent","addTouchLimit","showContentEx","Btn_touchLeft","event","Btn_touchRight","Btn_touchCenter","isShow","effectNode","parent","stopAllActions","scale","act1","scaleTo","act2","runAction","sequence","_removePage","playFrameEffect","time","_firstX","undefined","x","_firstY","y","moveBy","visibleRect","width","act2_1","rotateTo","act3","spawn","act4","_playFrameEffect2","target","rotationY","moveTo","frameEffectEnd","str","replace","string","isOne","cancelTouchLimit","closePage","registerFunc","func","isRegister"],"mappings":";;;;;;AAAA;;AAEAA,GAAGC,KAAH,CAAS;AACLC,aAASC,QAAQ,aAAR,CADJ;;AAGLC,gBAAY;AACRC,mBAAY,IADJ,EACoD;AAC5DC,oBAAa,IAFL,EAEqD;AAC7DC,uBAAgB,IAHR,EAGoD;AAC5DC,uBAAgB,IAJR,EAIoD;;AAE5DC,sBAAeT,GAAGU,KANV;AAORC,mBAAYX,GAAGY,IAPP;AAQRC,oBAAab,GAAGY,IARR;AASRE,qBAAcd,GAAGY,IATT,EASsD;AAC9DG,wBAAiBf,GAAGY,IAVZ,EAHP;;AAiBL;AACAI,YAAQ,kBAAY;AAChB,aAAKC,SAAL,GAAiBC,gBAAgBC,mBAAhB,GAAoC,CAArD;AACA,aAAKC,SAAL,GAAiBF,gBAAgBG,mBAAjC;AACA,aAAKC,cAAL,GAAsB,gBAAtB;AACA,aAAKd,aAAL,GAAqB,KAArB;AACA;AACA;AACA;AACH,KA1BI;;AA4BL;AACAe,iBAAc,qBAAUC,UAAV,EAAsBC,QAAtB,EAAgCC,SAAhC,EAA2C;AACrD,aAAKrB,SAAL,GAAiBoB,QAAjB;AACA,aAAKnB,UAAL,GAAkBoB,SAAlB;AACA,aAAKC,IAAL,CAAUC,MAAV,GAAmB,IAAnB;AACA,aAAKC,WAAL,CAAiB,KAAjB;AACA,aAAKC,WAAL,CAAiBN,UAAjB;;AAEA,aAAKO,WAAL,CAAiB,IAAjB;AACA,aAAKhB,cAAL,CAAoBiB,YAApB,CAAiC,KAAKV,cAAtC,EAAsDW,aAAtD;AACA;AACA,YAAG,KAAK1B,aAAR,EAAsB;AAClB,iBAAKA,aAAL,CAAmB,IAAnB;AACH;AACJ,KA1CI;;AA4CL;AACA2B,mBAAgB,uBAAUV,UAAV,EAAsBC,QAAtB,EAAgC;AAC5C,aAAKpB,SAAL,GAAiBoB,QAAjB;AACA,aAAKE,IAAL,CAAUC,MAAV,GAAmB,IAAnB;AACA,aAAKC,WAAL,CAAiB,IAAjB;AACA,aAAKC,WAAL,CAAiBN,UAAjB;;AAEA,aAAKO,WAAL,CAAiB,IAAjB;AACA,aAAKhB,cAAL,CAAoBiB,YAApB,CAAiC,KAAKV,cAAtC,EAAsDW,aAAtD;AACA;AACA,YAAG,KAAK1B,aAAR,EAAsB;AAClB,iBAAKA,aAAL,CAAmB,IAAnB;AACH;AACJ,KAzDI;;AA2DL4B,mBAAgB,uBAAUC,KAAV,EAAiB;AAC7B,YAAG,KAAK5B,aAAR,EAAuB;AACvB,aAAKF,UAAL,GAAkB,IAAlB;AACA,aAAKyB,WAAL,CAAiB,KAAjB;AACH,KA/DI;AAgELM,oBAAiB,wBAAUD,KAAV,EAAiB;AAC9B,YAAG,KAAK5B,aAAR,EAAuB;AACvB,aAAKH,SAAL,GAAiB,IAAjB;AACA,aAAK0B,WAAL,CAAiB,KAAjB;AACH,KApEI;AAqELO,qBAAkB,yBAAUF,KAAV,EAAiB;AAC/B,YAAG,KAAK5B,aAAR,EAAuB;AACvB,aAAKuB,WAAL,CAAiB,KAAjB;AACH,KAxEI;;AA0EL;AACAA,iBAAc,qBAAUQ,MAAV,EAAkB;AAC5B,aAAK/B,aAAL,GAAqB,IAArB;AACA,YAAIgC,aAAa,KAAK1B,WAAL,CAAiB2B,MAAlC;AACAD,mBAAWE,cAAX;AACA,YAAGH,MAAH,EAAU;AACN;AACAC,uBAAWG,KAAX,GAAmB,CAAnB;;AAEA,gBAAIC,OAAO5C,GAAG6C,OAAH,CAAW,KAAK5B,SAAhB,EAA2B,KAAKG,SAAhC,CAAX;AACA,gBAAI0B,OAAO9C,GAAG6C,OAAH,CAAW,KAAK5B,SAAL,GAAe,CAA1B,EAA6B,CAA7B,CAAX;AACAuB,uBAAWO,SAAX,CAAqB/C,GAAGgD,QAAH,CAAYJ,IAAZ,EAAkBE,IAAlB,EAAwB9C,GAAGyB,QAAH,CAAY,YAAY;AACjE,qBAAKjB,aAAL,GAAqB,KAArB;AACH,aAF4C,EAE1C,IAF0C,CAAxB,CAArB;AAGA;AACH,SAVD,MAUK;AACD;AACAgC,uBAAWG,KAAX,GAAmB,CAAnB;;AAEA,gBAAIC,OAAO5C,GAAG6C,OAAH,CAAW,KAAK5B,SAAL,GAAe,CAA1B,EAA6B,KAAKG,SAAlC,CAAX;AACA,gBAAI0B,OAAO9C,GAAG6C,OAAH,CAAW,KAAK5B,SAAhB,EAA2B,GAA3B,CAAX;AACAuB,uBAAWO,SAAX,CAAqB/C,GAAGgD,QAAH,CAAYJ,IAAZ,EAAkBE,IAAlB,EAAwB9C,GAAGyB,QAAH,CAAY,YAAY;AACjE,qBAAKjB,aAAL,GAAqB,KAArB;AACA,qBAAKyC,WAAL;AACH,aAH4C,EAG1C,IAH0C,CAAxB,CAArB;AAIH;AACJ,KApGI;AAqGLC,qBAAkB,yBAAUV,UAAV,EAAsB;AACpC,YAAIW,OAAO,GAAX;;AAEAX,mBAAWG,KAAX,GAAmB,CAAnB;AACAH,mBAAWE,cAAX;AACA,YAAGF,WAAWY,OAAX,KAAuBC,SAA1B,EAAqCb,WAAWY,OAAX,GAAqBZ,WAAWc,CAAhC;AACrC,YAAGd,WAAWe,OAAX,KAAuBF,SAA1B,EAAqCb,WAAWe,OAAX,GAAqBf,WAAWgB,CAAhC;;AAErC,YAAIZ,OAAO5C,GAAGyD,MAAH,CAAUN,IAAV,EAAgB,CAACnD,GAAG0D,WAAH,CAAeC,KAAhB,GAAsB,GAAtC,EAA2C,CAA3C,CAAX;AACA,YAAIb,OAAO9C,GAAG6C,OAAH,CAAWM,IAAX,EAAiB,GAAjB,CAAX;AACA,YAAIS,SAAS5D,GAAG6D,QAAH,CAAYV,IAAZ,EAAkB,CAAlB,EAAqB,EAArB,CAAb;AACA,YAAIW,OAAO9D,GAAG+D,KAAH,CAASnB,IAAT,EAAeE,IAAf,EAAqBc,MAArB,CAAX;AACA,YAAII,OAAOhE,GAAGgD,QAAH,CAAYc,IAAZ,EAAkB9D,GAAGyB,QAAH,CAAY,KAAKwC,iBAAjB,EAAoC,IAApC,CAAlB,CAAX;AACAzB,mBAAWO,SAAX,CAAqBiB,IAArB;AACH,KAnHI;AAoHLC,uBAAoB,2BAAUC,MAAV,EAAkB;AAClC,YAAIf,OAAO,GAAX;;AAEAe,eAAOC,SAAP,GAAmB,CAAC,EAApB;AACA,YAAIvB,OAAO5C,GAAGoE,MAAH,CAAUjB,IAAV,EAAgBe,OAAOd,OAAvB,EAAgCc,OAAOX,OAAvC,CAAX;AACA,YAAIT,OAAO9C,GAAG6C,OAAH,CAAWM,IAAX,EAAiB,CAAjB,CAAX;AACA;AACA,YAAIS,SAAS5D,GAAG6D,QAAH,CAAYV,IAAZ,EAAkB,CAAlB,EAAqB,CAArB,CAAb;AACA,YAAIW,OAAO9D,GAAG+D,KAAH,CAASnB,IAAT,EAAeE,IAAf,EAAqBc,MAArB,CAAX;AACA,YAAII,OAAOhE,GAAGgD,QAAH,CAAYc,IAAZ,EAAkB9D,GAAGyB,QAAH,CAAY,KAAK4C,cAAjB,EAAiC,IAAjC,CAAlB,CAAX;AACAH,eAAOnB,SAAP,CAAiBiB,IAAjB;AACH,KA/HI;AAgILK,oBAAiB,0BAAY;AACzB,aAAK7D,aAAL,GAAqB,KAArB;AACH,KAlII;;AAoIL;AACAsB,iBAAc,qBAAUwC,GAAV,EAAe;AACzB;AACA;AACAA,cAAMA,IAAIC,OAAJ,CAAY,GAAZ,EAAgB,IAAhB,CAAN;AACAD,cAAMA,IAAIC,OAAJ,CAAY,GAAZ,EAAgB,IAAhB,CAAN;AACA,aAAK9D,YAAL,CAAkB+D,MAAlB,GAA2BF,GAA3B;AACH,KA3II;;AA6IL;AACAzC,iBAAc,qBAAU4C,KAAV,EAAiB;AAC3B,aAAK5D,UAAL,CAAgBe,MAAhB,GAAyB,CAAC6C,KAA1B;AACA,aAAK9D,SAAL,CAAeiB,MAAf,GAAwB,CAAC6C,KAAzB;AACA,aAAK3D,WAAL,CAAiBc,MAAjB,GAA0B6C,KAA1B;AACH,KAlJI;;AAoJL;AACAxB,iBAAc,uBAAY;AACtB;AACA,YAAG,KAAK1C,aAAR,EAAsB;AAClB,iBAAKA,aAAL,CAAmB,KAAnB;AACH;AACD,YAAG,KAAKF,SAAR,EAAkB;AACd,iBAAKA,SAAL;AACA,iBAAKA,SAAL,GAAiB,IAAjB;AACH;AACD,YAAG,KAAKC,UAAR,EAAmB;AACf,iBAAKA,UAAL;AACA,iBAAKA,UAAL,GAAkB,IAAlB;AACH;AACD,aAAKS,cAAL,CAAoBiB,YAApB,CAAiC,KAAKV,cAAtC,EAAsDoD,gBAAtD;AACA,aAAK/C,IAAL,CAAUC,MAAV,GAAmB,KAAnB;AACH,KApKI;;AAsKL;AACA+C,eAAY,qBAAY;AACpB,aAAKtE,SAAL,GAAiB,IAAjB;AACA,aAAKC,UAAL,GAAkB,IAAlB;AACA,aAAKyB,WAAL,CAAiB,KAAjB;AACH,KA3KI;;AA6KL;AACA6C,kBAAe,sBAAUC,IAAV,EAAgBC,UAAhB,EAA4B;AACvC,YAAGA,UAAH,EAAe,KAAKvE,aAAL,GAAqBsE,IAArB,CAAf,KACK,KAAKtE,aAAL,GAAqB,IAArB;AACR;;AAjLI,CAAT","file":"unknown","sourcesContent":["//點擊確認的界面\r\n\r\ncc.Class({\r\n    extends: require('AutoDealing'),\r\n\r\n    properties: {\r\n        _callFunc : null,                                           //点击确定后的回调\r\n        _callFunc2 : null,                                           //点击取消后的回调\r\n        _registerFunc : null,                                       //额外注册的回调，关于关闭和开启\r\n        _isPlayEffect : null,                                       //是否正在播放特效\r\n\r\n        label_center : cc.Label,\r\n        node_left : cc.Node,\r\n        node_right : cc.Node,\r\n        node_center : cc.Node,                                        //单选的确定按钮\r\n        node_grayLayer : cc.Node,                                        //单选的确定按钮\r\n        //node_continueImg : cc.Node,\r\n    },\r\n\r\n    // use this for initialization1\r\n    onLoad: function () {\r\n        this._showTime = G_Config_common.time_confirmTipShow/2;\r\n        this._maxScale = G_Config_common.scale_confirmTipMax;\r\n        this._touchCompName = 'Obj_touchLimit';\r\n        this._isPlayEffect = false;\r\n        //this._formatStr = '<b>%s<b/>';\r\n        //this._label_left = this.node_left.children[0].getComponent(cc.Label);\r\n        //this._label_right = this.node_right.children[0].getComponent(cc.Label);\r\n    },\r\n\r\n    //显示的内容多选\r\n    showContent : function (contentStr, callFunc, callFunc2) {\r\n        this._callFunc = callFunc;\r\n        this._callFunc2 = callFunc2;\r\n        this.node.active = true;\r\n        this._showOneBtn(false);\r\n        this._setContent(contentStr);\r\n\r\n        this._showEffect(true);\r\n        this.node_grayLayer.getComponent(this._touchCompName).addTouchLimit();\r\n        //注册监听\r\n        if(this._registerFunc){\r\n            this._registerFunc(true);\r\n        }\r\n    },\r\n\r\n    //显示的内容单选\r\n    showContentEx : function (contentStr, callFunc) {\r\n        this._callFunc = callFunc;\r\n        this.node.active = true;\r\n        this._showOneBtn(true);\r\n        this._setContent(contentStr);\r\n\r\n        this._showEffect(true);\r\n        this.node_grayLayer.getComponent(this._touchCompName).addTouchLimit();\r\n        //注册监听\r\n        if(this._registerFunc){\r\n            this._registerFunc(true);\r\n        }\r\n    },\r\n\r\n    Btn_touchLeft : function (event) {\r\n        if(this._isPlayEffect) return;\r\n        this._callFunc2 = null;\r\n        this._showEffect(false);\r\n    },\r\n    Btn_touchRight : function (event) {\r\n        if(this._isPlayEffect) return;\r\n        this._callFunc = null;\r\n        this._showEffect(false);\r\n    },\r\n    Btn_touchCenter : function (event) {\r\n        if(this._isPlayEffect) return;\r\n        this._showEffect(false);\r\n    },\r\n\r\n    //显示界面的特效  isShow ： 判定当前是显示还是关闭\r\n    _showEffect : function (isShow) {\r\n        this._isPlayEffect = true;\r\n        var effectNode = this.node_center.parent;\r\n        effectNode.stopAllActions();\r\n        if(isShow){\r\n            // show tip\r\n            effectNode.scale = 0;\r\n\r\n            var act1 = cc.scaleTo(this._showTime, this._maxScale);\r\n            var act2 = cc.scaleTo(this._showTime/2, 1);\r\n            effectNode.runAction(cc.sequence(act1, act2, cc.callFunc(function () {\r\n                this._isPlayEffect = false;\r\n            }, this)));\r\n            // this.playFrameEffect(effectNode);\r\n        }else{\r\n            //close tip\r\n            effectNode.scale = 1;\r\n\r\n            var act1 = cc.scaleTo(this._showTime/2, this._maxScale);\r\n            var act2 = cc.scaleTo(this._showTime, 0.5);\r\n            effectNode.runAction(cc.sequence(act1, act2, cc.callFunc(function () {\r\n                this._isPlayEffect = false;\r\n                this._removePage();\r\n            }, this)));\r\n        }\r\n    },\r\n    playFrameEffect : function (effectNode) {\r\n        var time = 0.2;\r\n\r\n        effectNode.scale = 0;\r\n        effectNode.stopAllActions();\r\n        if(effectNode._firstX === undefined) effectNode._firstX = effectNode.x;\r\n        if(effectNode._firstY === undefined) effectNode._firstY = effectNode.y;\r\n\r\n        var act1 = cc.moveBy(time, -cc.visibleRect.width*0.2, 0);\r\n        var act2 = cc.scaleTo(time, 0.5);\r\n        var act2_1 = cc.rotateTo(time, 0, 90);\r\n        var act3 = cc.spawn(act1, act2, act2_1);\r\n        var act4 = cc.sequence(act3, cc.callFunc(this._playFrameEffect2, this))\r\n        effectNode.runAction(act4);\r\n    },\r\n    _playFrameEffect2 : function (target) {\r\n        var time = 0.5;\r\n\r\n        target.rotationY = -90;\r\n        var act1 = cc.moveTo(time, target._firstX, target._firstY);\r\n        var act2 = cc.scaleTo(time, 1);\r\n        // var act2_1 = cc.skewTo(time, 0, 0);\r\n        var act2_1 = cc.rotateTo(time, 0, 0);\r\n        var act3 = cc.spawn(act1, act2, act2_1);\r\n        var act4 = cc.sequence(act3, cc.callFunc(this.frameEffectEnd, this))\r\n        target.runAction(act4);\r\n    },\r\n    frameEffectEnd : function () {\r\n        this._isPlayEffect = false;\r\n    },\r\n\r\n    //显示弹窗的内容\r\n    _setContent : function (str) {\r\n        //this.label_center.string = G_TOOL.formatStr(this._formatStr, str);\r\n        //遇到逗号需要分行\r\n        str = str.replace(',','\\n');\r\n        str = str.replace('，','\\n');\r\n        this.label_center.string = str;\r\n    },\r\n\r\n    //是否只显示一个按钮\r\n    _showOneBtn : function (isOne) {\r\n        this.node_right.active = !isOne;\r\n        this.node_left.active = !isOne;\r\n        this.node_center.active = isOne;\r\n    },\r\n\r\n    //移除界面\r\n    _removePage : function () {\r\n        //注册监听\r\n        if(this._registerFunc){\r\n            this._registerFunc(false);\r\n        }\r\n        if(this._callFunc){\r\n            this._callFunc();\r\n            this._callFunc = null;\r\n        }\r\n        if(this._callFunc2){\r\n            this._callFunc2();\r\n            this._callFunc2 = null;\r\n        }\r\n        this.node_grayLayer.getComponent(this._touchCompName).cancelTouchLimit();\r\n        this.node.active = false;\r\n    },\r\n\r\n    //关闭界面\r\n    closePage : function () {\r\n        this._callFunc = null;\r\n        this._callFunc2 = null;\r\n        this._showEffect(false);\r\n    },\r\n\r\n    //监听确认框的关闭和开启\r\n    registerFunc : function (func, isRegister) {\r\n        if(isRegister) this._registerFunc = func;\r\n        else this._registerFunc = null;\r\n    },\r\n\r\n    // called every frame, uncomment this function to activate update callback\r\n    // update: function (dt) {\r\n\r\n    // },\r\n});\r\n"]}
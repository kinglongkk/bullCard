{"version":3,"sources":["assets\\Script\\Objects\\Obj_roomListCell.js"],"names":["cc","Class","extends","require","properties","_enterType","_homeID","node_backgroundBtn","default","type","Node","displayName","label_intoLimit","Label","label_onNumber","node_roomBG","node_roomName","frame_roomTypeUI","SpriteAtlas","onLoad","registerButton","onClick_into","setData","data","jsonData","enterType","id","_setEnterIcon","txtImgUrl","bgImgUrl","string","G_CHINESE","inToRoomLimit","G_TOOL","changeMoney","minLimitPlayerBlance","currentPlayerCount","event","G_Config_common","isLocal","_doEnter","netData","roomId","gameModel","G_DATA","getEnterHomeModel","GG","platformMgr","requestEnterRoom","bind","setCurSceneHash","changeScene","getSceneName","curNode","imgUrl","imgName","_getIconName","frame","getSpriteFrame","getComponent","Sprite","spriteFrame","setHeadImg","url","urlList","split","iconName","length"],"mappings":"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","file":"unknown","sourcesContent":["//房间列表条目\r\ncc.Class({\r\n    extends: require('BaseUI'),\r\n\r\n    properties: {\r\n        _enterType : null,                                                                                                 //进入房间的类型\r\n        _homeID : null,                                                                                                     //房间ID\r\n\r\n        node_backgroundBtn : {\r\n            default : null,\r\n            type : cc.Node,\r\n            displayName : '进入房间'\r\n        },\r\n        label_intoLimit : {\r\n            default : null,\r\n            type : cc.Label,\r\n            displayName : '进房限制'\r\n        },\r\n        label_onNumber : {\r\n            default : null,\r\n            type : cc.Label,\r\n            displayName : '在房人数'\r\n        },\r\n        node_roomBG: {\r\n            default : null,\r\n            type : cc.Node,\r\n            displayName : '房间背景'\r\n        },\r\n        node_roomName: {\r\n            default : null,\r\n            type : cc.Node,\r\n            displayName : '房间名称'\r\n        },\r\n        frame_roomTypeUI : {\r\n            default : null,\r\n            type :cc.SpriteAtlas,\r\n            displayName : '房间背景基础显示图片集'\r\n        },\r\n    },\r\n\r\n    // use this for initialization\r\n    onLoad: function () {\r\n        this.registerButton(this.node_roomBG, this.onClick_into, this);\r\n    },\r\n\r\n    setData : function (data, jsonData) {\r\n        if(!data) return;\r\n        this._enterType = data.enterType;\r\n        this._homeID = data.id;\r\n\r\n        this._setEnterIcon(this.node_roomName, jsonData.txtImgUrl);\r\n        this._setEnterIcon(this.node_roomBG, jsonData.bgImgUrl);\r\n        this.label_intoLimit.string = G_CHINESE.inToRoomLimit + G_TOOL.changeMoney(data.minLimitPlayerBlance);\r\n        this.label_onNumber.string = data.currentPlayerCount;\r\n    },\r\n    //点击进入游戏\r\n    onClick_into : function (event) {\r\n        if(G_Config_common.isLocal){\r\n            this._doEnter();\r\n        }else{\r\n            var netData = {\r\n                roomId : this._homeID,\r\n                gameModel : G_DATA.getEnterHomeModel(this._enterType)\r\n            }\r\n            GG.platformMgr.requestEnterRoom(netData, this._doEnter.bind(this));\r\n        }\r\n    },\r\n\r\n    _doEnter : function () {\r\n        //记录hash信息\r\n        G_DATA.setCurSceneHash(this._enterType,this._homeID);\r\n        GG.changeScene(G_DATA.getSceneName(this._enterType));\r\n    },\r\n\r\n    //设置图片（入房区域背景，房间名）\r\n    _setEnterIcon : function (curNode, imgUrl) {\r\n        var imgName = this._getIconName(imgUrl);\r\n        if(imgName){\r\n            var frame = this.frame_roomTypeUI.getSpriteFrame(imgName);\r\n            if(frame){\r\n                //已经缓存\r\n                curNode.getComponent(cc.Sprite).spriteFrame = frame;\r\n            }else{\r\n                //没有则根据url去请求\r\n                G_TOOL.setHeadImg(curNode, imgUrl);\r\n            }\r\n        }else{\r\n            //该url异常\r\n\r\n        }\r\n    },\r\n    //获取图片名\r\n    _getIconName: function (url) {\r\n        if (!url) return null;\r\n        var urlList = url.split('/');\r\n        var iconName = urlList[urlList.length - 1].split('.')[0];\r\n        return iconName;\r\n    },\r\n    // called every frame, uncomment this function to activate update callback\r\n    // update: function (dt) {\r\n\r\n    // },\r\n});\r\n"]}
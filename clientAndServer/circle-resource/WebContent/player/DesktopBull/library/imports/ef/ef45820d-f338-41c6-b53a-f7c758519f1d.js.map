{"version":3,"sources":["assets\\Script\\Objects\\Obj_calculateResult.js"],"names":["cc","Class","extends","Component","_choosePokerNum","properties","_tip_trueResult","_callFunc","label_01","Label","label_02","label_03","label_04","onLoad","_list_label","showCalculate","node","active","chooseOnePoker","chooseNum","G_Config_classic","num_maxChoose","string","toString","getNum","_getResult","cancelOnePoker","forceEnd","i","parseInt","_checkCalculate","value","_countDownEnd","showTrueResult","pokerValue","callFunc","data1","G_DATA","getChinese","data2","strList","content","split","showStr","G_TOOL","formatStr","dataObj","showPos","p","x","y","height","retainTime","callBack","bind","GG","tipsMgr","showCountDownTip","showOverTouch","data","_showCountDown","showTxtTip","_hideCountDown","showByOpacity","hideByOpacity","hideCalculate","onClear","length"],"mappings":"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","file":"unknown","sourcesContent":["cc.Class({\r\n    extends: cc.Component,\r\n    _choosePokerNum : null,                       //已经选择的卡牌数量\r\n    properties: {\r\n        _tip_trueResult : null,\r\n        _callFunc : null,\r\n\r\n        label_01 : cc.Label,\r\n        label_02 : cc.Label,\r\n        label_03 : cc.Label,\r\n        label_04 : cc.Label,\r\n    },\r\n\r\n    // use this for initialization\r\n    onLoad: function () {\r\n        this._choosePokerNum = 0;\r\n        this._list_label = [this.label_01, this.label_02, this.label_03, this.label_04];\r\n    },\r\n\r\n    showCalculate : function () {\r\n        this.node.active = true;\r\n    },\r\n\r\n    //选中一张卡牌,超过数量时候需要做处理\r\n    chooseOnePoker : function (chooseNum) {\r\n        if(this._choosePokerNum >= G_Config_classic.num_maxChoose){\r\n            //choose more\r\n            return false;\r\n        }\r\n        this._list_label[this._choosePokerNum].string = chooseNum.toString();\r\n        this._choosePokerNum += 1;\r\n        if(this._choosePokerNum >= G_Config_classic.num_maxChoose){\r\n            //选中了三张\r\n            var getNum = this._getResult();\r\n            this._list_label[this._choosePokerNum].string = getNum.toString();\r\n        }\r\n        return true;\r\n    },\r\n\r\n    //取消某张卡牌的值\r\n    cancelOnePoker : function () {\r\n        if(this._tip_trueResult){\r\n            this._tip_trueResult.forceEnd();\r\n            this._tip_trueResult = null;\r\n        }\r\n        this._choosePokerNum -= 1;\r\n        this._list_label[this._choosePokerNum].string = '';\r\n        this._list_label[G_Config_classic.num_maxChoose].string = '';\r\n    },\r\n\r\n    _getResult : function () {\r\n        var getNum = 0;\r\n        for(var i = 0; i < this._choosePokerNum; i ++){\r\n            getNum += parseInt(this._list_label[i].string);\r\n        }\r\n        return getNum\r\n    },\r\n\r\n    _checkCalculate : function (value) {\r\n\r\n    },\r\n    _countDownEnd : function () {\r\n        this._tip_trueResult = null;\r\n        if(this._callFunc) this._callFunc();\r\n    },\r\n\r\n    showTrueResult : function (pokerValue, callFunc) {\r\n        if(this._choosePokerNum < G_Config_classic.num_maxChoose) return;\r\n\r\n        this._callFunc = callFunc;\r\n        var value = this._getResult();\r\n        if(value % 10 == 0){\r\n            //calculate success\r\n            var data1 = G_DATA.getChinese(17);\r\n            var data2 = G_DATA.getChinese(16);\r\n            var strList = data2.content.split(',');\r\n            var showStr = G_TOOL.formatStr(data1.content, strList[pokerValue]);\r\n            var dataObj = {\r\n                showStr : showStr,\r\n                showPos : cc.p(this.node.x, this.node.y + this.node.height),\r\n                retainTime : data1.retainTime,\r\n                callBack : this._countDownEnd.bind(this)\r\n            }\r\n            this._tip_trueResult = GG.tipsMgr.showCountDownTip(dataObj);\r\n        }\r\n    },\r\n    showOverTouch : function () {\r\n        var data = G_DATA.getChinese(5);\r\n        var dataObj = {\r\n            showStr : data.content,\r\n            showPos : cc.p(this.node.x, this.node.y + this.node.height),\r\n            retainTime : data.retainTime,\r\n            callBack : this._showCountDown.bind(this)\r\n        }\r\n        GG.tipsMgr.showTxtTip(dataObj);\r\n        this._hideCountDown();\r\n    },\r\n    _showCountDown : function () {\r\n        if(this._tip_trueResult) this._tip_trueResult.showByOpacity();\r\n    },\r\n    _hideCountDown : function () {\r\n        if(this._tip_trueResult) this._tip_trueResult.hideByOpacity();\r\n    },\r\n\r\n    hideCalculate : function () {\r\n        if(!this.node.active) return;\r\n        if(this._tip_trueResult) {\r\n            this._tip_trueResult.forceEnd();\r\n            this._tip_trueResult = null;\r\n        }\r\n        this.onClear();\r\n        this.node.active = false;\r\n    },\r\n    onClear : function () {\r\n        for(var i = 0; i < this._list_label.length; i ++){\r\n            this._list_label[i].string = '';\r\n        }\r\n        this._choosePokerNum = 0;\r\n    },\r\n\r\n    // called every frame, uncomment this function to activate update callback\r\n    // update: function (dt) {\r\n\r\n    // },\r\n});\r\n"]}
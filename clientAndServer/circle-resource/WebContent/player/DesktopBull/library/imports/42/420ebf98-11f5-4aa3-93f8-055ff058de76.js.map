{"version":3,"sources":["assets\\Script\\Views\\Scene_Bull100\\Bull100_showResult.js"],"names":["cc","Class","extends","Component","properties","_list_rankHead","_winColor","_loseColor","node_myWinGold","default","type","Node","displayName","prefab_head","Prefab","node_container","onLoad","_headCompName","Color","showResult","dataObj","node","active","myChangeGold","_setGoldValue","dataList","name","addGold","rankDict","othersInfo","info","seatIndex","changeGold","push","icon","_showRank","heads","children","len","length","head","data","i","getComponent","setIsShow","setData","newValue","isPlus","Boolean","_setMyGoldColor","showStr","Label","string","_setIsShow","isShow","isWin","color"],"mappings":"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","file":"unknown","sourcesContent":["//显示百人的赛事结果界面\r\n\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        _list_rankHead : null,                                                              //排行的头像列表\r\n        _winColor : null,                                                //胜利的颜色\r\n        _loseColor : null,                                               //失败的颜色\r\n\r\n        node_myWinGold : {\r\n            default : null,\r\n            type : cc.Node,\r\n            displayName : '自己赢的钱'\r\n        },\r\n        prefab_head : {\r\n            default : null,\r\n            type : cc.Prefab,\r\n            displayName : '头像'\r\n        },\r\n        node_container : {\r\n            default : null,\r\n            type : cc.Node,\r\n            displayName : '头像容器'\r\n        },\r\n    },\r\n\r\n    // use this for initialization\r\n    onLoad: function () {\r\n        this._headCompName = 'Obj_winRankHead';\r\n        this._loseColor = new cc.Color(199,199,199);\r\n    },\r\n\r\n    //显示结果\r\n    showResult : function (dataObj) {\r\n        this.node.active = true;\r\n        var myChangeGold = dataObj.myChangeGold;\r\n        if(!myChangeGold) myChangeGold = 0;\r\n        this._setGoldValue(myChangeGold);\r\n\r\n        var dataList = [\r\n            {\r\n                name : '人1',\r\n                addGold : 99\r\n            }\r\n        ];\r\n        var rankDict = dataObj.othersInfo;\r\n        if(rankDict) {\r\n            dataList = [];\r\n            var info;\r\n            for(var seatIndex in rankDict){\r\n                info = rankDict[seatIndex];\r\n                var changeGold = info.changeGold;\r\n                if(changeGold > 0){\r\n                    dataList.push({\r\n                        name : info.name,\r\n                        addGold :changeGold,\r\n                        icon : info.icon\r\n                    })\r\n                }\r\n            }\r\n        }\r\n        this._showRank(dataList);\r\n    },\r\n\r\n    _showRank : function (dataList) {\r\n        var heads = this.node_container.children;\r\n        var len = heads.length, head, data;\r\n        for(var i = 0; i < heads.length; i ++){\r\n            head = heads[i].getComponent(this._headCompName);\r\n            if(head){\r\n                data = dataList[i];\r\n                if(data){\r\n                    head.setIsShow(true);\r\n                    head.setData(data);\r\n                }else{\r\n                    head.setIsShow(false);\r\n                }\r\n            }\r\n        }\r\n    },\r\n\r\n    _setGoldValue : function (newValue) {\r\n        var isPlus = Boolean(newValue > 0);\r\n        this._setMyGoldColor(isPlus);\r\n        var showStr;\r\n        if(isPlus) showStr = '+'+newValue;\r\n        else showStr = newValue+'';\r\n        this.node_myWinGold.getComponent(cc.Label).string = showStr;\r\n    },\r\n\r\n    _setIsShow : function (isShow) {\r\n        this.node.active = isShow;\r\n    },\r\n\r\n    _setMyGoldColor : function (isWin) {\r\n        if(isWin){\r\n            if(this._winColor) {\r\n                this.node_myWinGold.color = this._winColor;\r\n                this._winColor = null;\r\n            }\r\n        }else{\r\n            if(!this._winColor) this._winColor = this.node_myWinGold.color;\r\n            this.node_myWinGold.color = this._loseColor;\r\n        }\r\n    },\r\n\r\n    // called every frame, uncomment this function to activate update callback\r\n    // update: function (dt) {\r\n\r\n    // },\r\n});\r\n"]}
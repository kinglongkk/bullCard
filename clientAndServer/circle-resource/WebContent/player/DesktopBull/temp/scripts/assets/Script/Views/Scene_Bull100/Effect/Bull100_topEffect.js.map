{"version":3,"sources":["assets\\Script\\Views\\Scene_Bull100\\Effect\\Bull100_topEffect.js"],"names":["cc","Class","extends","Component","properties","_bettingCallFunc","_startCallFunc","_resultData","prefab_start","default","type","Prefab","displayName","prefab_betting","prefab_win","prefab_lose","prefab_showResult","node_grayLayer","Node","onLoad","_winAniName","_loseAniName","_resultCompName","_pokerResultCompName","playStartGameAni","callFunc","playStartAni","GG","audioMgr","playSound","aniName","_startAni","instantiate","parent","node","comp","getComponent","dragonBones","ArmatureDisplay","addEventListener","EventObject","COMPLETE","_startAniEnd","position","_getStartAniPos","active","playAnimation","event","_frameEvent","bull100Mgr","shakeGame","clearStartAni","playStartBettingAni","playBettingAni","playBettingEnd","_bettingAni","_bettingAniEnd","clearBettingAni","designSize","visibleRect","p","width","height","showResultEffect","data","myChangeGold","undefined","setGrayIsShow","_playWin","_playLose","_winCallFunc","_winAni","_winEnd","_getResultAniPos","_getResultComp","showResult","runAction","sequence","delayTime","_setIsShow","_clearWin","stopAllActions","_loseCallFunc","_loseAni","_loseEnd","_resultComp","result","addChild","_clearLose","isShow","getGrayLayer","clearAll"],"mappings":"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","file":"unknown","sourcesContent":["//放在游戏最上面的特效\r\n\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        _bettingCallFunc : null,                                                                //开始投注动画的回调\r\n        _startCallFunc : null,                                                                //开始游戏动画的回调\r\n        _resultData : null,                                                                      //结算界面中的数据\r\n\r\n        prefab_start : {\r\n            default : null,\r\n            type : cc.Prefab,\r\n            displayName : '开始游戏动画'\r\n        },\r\n        prefab_betting : {\r\n            default : null,\r\n            type : cc.Prefab,\r\n            displayName : '开始投注动画'\r\n        },\r\n        prefab_win : {\r\n            default : null,\r\n            type : cc.Prefab,\r\n            displayName : '胜利动画'\r\n        },\r\n        prefab_lose : {\r\n            default : null,\r\n            type : cc.Prefab,\r\n            displayName : '失败动画'\r\n        },\r\n        prefab_showResult : {\r\n            default : null,\r\n            type : cc.Prefab,\r\n            displayName : '结果显示容器'\r\n        },\r\n        node_grayLayer : {\r\n            default : null,\r\n            type : cc.Node,\r\n            displayName : '灰色层'\r\n        },\r\n    },\r\n\r\n    // use this for initialization\r\n    onLoad: function () {\r\n        this._winAniName = 'platform_win';\r\n        this._loseAniName = 'platform_lose';\r\n        this._resultCompName = 'Bull100_showResult';\r\n        this._pokerResultCompName = 'Obj_onPokerResult';\r\n    },\r\n\r\n    //开始游戏\r\n    playStartGameAni : function (callFunc) {\r\n        this.playStartAni('grab_start',callFunc);\r\n        GG.audioMgr.playSound(13);\r\n    },\r\n    //播放开始动画\r\n    playStartAni : function (aniName, callFunc) {\r\n        if(!aniName) aniName = '';\r\n        this._startCallFunc = callFunc;\r\n        if(!this._startAni){\r\n            this._startAni = cc.instantiate(this.prefab_start);\r\n            this._startAni.parent = this.node;\r\n            //ani.scale = G_Config_common.frameScale;\r\n            var comp = this._startAni.getComponent(dragonBones.ArmatureDisplay);\r\n            //comp.addEventListener(dragonBones.EventObject.FRAME_EVENT, this._frameEvent, this);\r\n            comp.addEventListener(dragonBones.EventObject.COMPLETE, this._startAniEnd, this);\r\n        }\r\n\r\n        this._startAni.position = this._getStartAniPos();\r\n        this._startAni.active = true;\r\n        this._startAni.getComponent(dragonBones.ArmatureDisplay).playAnimation(aniName, 1);\r\n    },\r\n    _startAniEnd : function (event) {\r\n        //动画结束\r\n        if(this._startAni) this._startAni.active = false;\r\n        if(this._startCallFunc) {\r\n            this._startCallFunc();\r\n            this._startCallFunc = null;\r\n        }\r\n    },\r\n    _frameEvent : function (event) {\r\n        GG.bull100Mgr.shakeGame();\r\n    },\r\n    //清理开始动画\r\n    clearStartAni : function () {\r\n        if(this._startAni) this._startAni.active = false;\r\n        this._startCallFunc = null;\r\n    },\r\n\r\n    //============================================\r\n\r\n    //开始投注\r\n    playStartBettingAni : function (callFunc) {\r\n        this.playBettingAni('platform_bet',callFunc);\r\n    },\r\n    //投注结束\r\n    playBettingEnd : function (callFunc) {\r\n        this.playBettingAni('platform_betOver',callFunc);\r\n    },\r\n    //播放开始投注动画\r\n    playBettingAni : function (aniName, callFunc) {\r\n        if(!aniName) aniName = '';\r\n        this._bettingCallFunc = callFunc;\r\n        if(!this._bettingAni){\r\n            this._bettingAni = cc.instantiate(this.prefab_betting);\r\n            this._bettingAni.parent = this.node;\r\n            //ani.scale = G_Config_common.frameScale;\r\n            var comp = this._bettingAni.getComponent(dragonBones.ArmatureDisplay);\r\n            //comp.addEventListener(dragonBones.EventObject.FRAME_EVENT, this._frameEvent, this);\r\n            comp.addEventListener(dragonBones.EventObject.COMPLETE, this._bettingAniEnd, this);\r\n        }\r\n        this._bettingAni.position = this._getStartAniPos();\r\n        this._bettingAni.active = true;\r\n        this._bettingAni.getComponent(dragonBones.ArmatureDisplay).playAnimation(aniName, 1);\r\n    },\r\n    _bettingAniEnd : function (event) {\r\n        //动画结束\r\n        if(this._bettingAni) this._bettingAni.active = false;\r\n        if(this._bettingCallFunc) {\r\n            this._bettingCallFunc();\r\n            this._bettingCallFunc = null;\r\n        }\r\n    },\r\n    //清理开始投注动画\r\n    clearBettingAni : function () {\r\n        if(this._bettingAni) {\r\n            this._bettingAni.active = false;\r\n        }\r\n        this._bettingCallFunc = null;\r\n    },\r\n\r\n    _getStartAniPos : function () {\r\n        var designSize = cc.visibleRect;\r\n        return cc.p(designSize.width/2, designSize.height*0.6);\r\n    },\r\n\r\n\r\n    //================================胜利动画\r\n\r\n    //显示胜利或者失败\r\n    showResultEffect : function (data, callFunc) {\r\n        if(data.myChangeGold != undefined){\r\n            this.setGrayIsShow(true);\r\n            if(data.myChangeGold > 0){\r\n                this._playWin(data, callFunc);\r\n            }else{\r\n                this._playLose(data, callFunc);\r\n            }\r\n        }else {\r\n            if(callFunc){\r\n                callFunc();\r\n                callFunc = null;\r\n            }\r\n        }\r\n    },\r\n\r\n    _playWin : function (data, callFunc) {\r\n        this._resultData = data;\r\n        this._winCallFunc = callFunc;\r\n        if(!this._winAni){\r\n            this._winAni = cc.instantiate(this.prefab_win);\r\n            this._winAni.parent = this.node;\r\n            var comp = this._winAni.getComponent(dragonBones.ArmatureDisplay);\r\n            comp.addEventListener(dragonBones.EventObject.COMPLETE, this._winEnd, this);\r\n        }\r\n        this._winAni.position = this._getResultAniPos();\r\n        this._winAni.active = true;\r\n        this._winAni.getComponent(dragonBones.ArmatureDisplay).playAnimation(this._winAniName, 1);\r\n        GG.audioMgr.playSound(22);\r\n    },\r\n    _winEnd : function () {\r\n        this._getResultComp().showResult(this._resultData);\r\n        this._winAni.runAction(cc.sequence(cc.delayTime(2), cc.callFunc(function () {\r\n            this._winAni.active = false;\r\n            this._getResultComp()._setIsShow(false);\r\n            this.setGrayIsShow(false);\r\n            if(this._winCallFunc){\r\n                this._winCallFunc();\r\n                this._winCallFunc = null;\r\n            }\r\n        }, this)));\r\n    },\r\n\r\n    _clearWin : function () {\r\n        if(this._winAni){\r\n            this._getResultComp()._setIsShow(false);\r\n            this._winAni.stopAllActions();\r\n            this._winAni.active = false;\r\n            this._winCallFunc = null;\r\n        }\r\n    },\r\n\r\n    //======================================失败动画\r\n\r\n    _playLose : function (data, callFunc) {\r\n        this._resultData = data;\r\n        this._loseCallFunc = callFunc;\r\n        if(!this._loseAni){\r\n            this._loseAni = cc.instantiate(this.prefab_lose);\r\n            this._loseAni.parent = this.node;\r\n            var comp = this._loseAni.getComponent(dragonBones.ArmatureDisplay);\r\n            comp.addEventListener(dragonBones.EventObject.COMPLETE, this._loseEnd, this);\r\n        }\r\n        this._loseAni.position = this._getResultAniPos();\r\n        this._loseAni.active = true;\r\n        this._loseAni.getComponent(dragonBones.ArmatureDisplay).playAnimation(this._loseAniName, 1);\r\n        GG.audioMgr.playSound(21);\r\n    },\r\n    _loseEnd : function () {\r\n        this._getResultComp().showResult(this._resultData);\r\n\r\n        this._loseAni.runAction(cc.sequence(cc.delayTime(2), cc.callFunc(function () {\r\n            this._loseAni.active = false;\r\n            this._getResultComp()._setIsShow(false);\r\n            this.setGrayIsShow(false);\r\n            if(this._loseCallFunc){\r\n                this._loseCallFunc();\r\n                this._loseCallFunc = null;\r\n            }\r\n        }, this)));\r\n    },\r\n\r\n    _getResultComp : function () {\r\n        if(!this._resultComp){\r\n            var result = cc.instantiate(this.prefab_showResult);\r\n            this.node.addChild(result, 5);\r\n            if(this._winAni) result.position = this._winAni.position;\r\n            if(this._loseAni) result.position = this._loseAni.position;\r\n            this._resultComp = result.getComponent(this._resultCompName);\r\n        }\r\n        return this._resultComp\r\n    },\r\n    _clearLose : function () {\r\n        if(this._loseAni){\r\n            this._getResultComp()._setIsShow(false);\r\n            this._loseAni.stopAllActions();\r\n            this._loseAni.active = false;\r\n            this._loseCallFunc = null;\r\n        }\r\n    },\r\n\r\n    _getResultAniPos : function () {\r\n        var designSize = cc.visibleRect;\r\n        return cc.p(designSize.width/2, designSize.height*0.8);\r\n    },\r\n\r\n    //====================================灰色层\r\n\r\n    setGrayIsShow : function (isShow) {\r\n        if(this.node_grayLayer) this.node_grayLayer.active = isShow;\r\n    },\r\n\r\n    getGrayLayer : function () {\r\n        return this.node_grayLayer\r\n    },\r\n\r\n    //清理所有\r\n    clearAll : function () {\r\n        this.clearBettingAni();\r\n        this.clearStartAni();\r\n        this._clearWin();\r\n        this._clearLose();\r\n        this.setGrayIsShow(false);\r\n    },\r\n\r\n    // called every frame, uncomment this function to activate update callback\r\n    // update: function (dt) {\r\n\r\n    // },\r\n});\r\n"]}
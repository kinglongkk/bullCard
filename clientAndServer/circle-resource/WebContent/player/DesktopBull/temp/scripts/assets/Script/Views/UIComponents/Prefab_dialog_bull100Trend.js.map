{"version":3,"sources":["assets\\Script\\Views\\UIComponents\\Prefab_dialog_bull100Trend.js"],"names":["cc","Class","extends","require","properties","onLoad","_super","_setScrollData","_itemCompName","dataObj","itemPrefab","prefab_item","scrollType","G_TYPE","vertical","comp_itemContainer","setData","homeID","G_Config_common","isLocal","netData","_getLocalData","console","log","_setNetData","moduleType","GG","getGameType","gameModule","bull100","http_gameModule","grab","classic","sendData","httpMgr","sendHttpRequest","G_DIALOG_URL","trendUrl","data","bind","showLayer","needList","mathList","dataList","i","length","matchResult","j","push","_showList","item","comp","showTrendItems","getItemByIndex","getComponent","clearItems","hideLayer","G_TOOL","getRandomBool","showNum","random0To1","info","_getMatchResult","msg","typeList","getRandomArea"],"mappings":"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","file":"unknown","sourcesContent":["//百人走势图\r\n\r\n\r\ncc.Class({\r\n    extends: require('BaseDialog'),\r\n\r\n    properties: {\r\n\r\n    },\r\n\r\n    // use this for initialization\r\n    onLoad: function () {\r\n        this._super('UI_trend');\r\n        this._setScrollData();\r\n    },\r\n\r\n    _setScrollData : function () {\r\n        this._itemCompName = 'Obj_cell_trend';\r\n        var dataObj = {\r\n            itemPrefab : this.prefab_item,\r\n            scrollType : G_TYPE.scrollType.vertical,\r\n        }\r\n        this.comp_itemContainer.setData(dataObj);\r\n    },\r\n\r\n    setData : function (homeID) {\r\n        if(G_Config_common.isLocal) {\r\n            var netData = this._getLocalData();\r\n            console.log(netData)\r\n            this._setNetData(netData);\r\n        } else{\r\n            var moduleType;\r\n            switch (GG.getGameType()){\r\n                case G_TYPE.gameModule.bull100:\r\n                    moduleType = G_TYPE.http_gameModule.bull100;\r\n                    break\r\n                case G_TYPE.gameModule.grab:\r\n                    moduleType = G_TYPE.http_gameModule.grab;\r\n                    break\r\n                case G_TYPE.gameModule.classic:\r\n                    moduleType = G_TYPE.http_gameModule.classic;\r\n                    break\r\n                default:\r\n                    moduleType = 1;\r\n                    break\r\n            }\r\n            var sendData = 'gameModelId='+moduleType+'&gameRoomId='+homeID;\r\n            GG.httpMgr.sendHttpRequest(G_DIALOG_URL.trendUrl, sendData, function (data) {\r\n                if(data){\r\n                    this._setNetData(data);\r\n                }\r\n            }.bind(this));\r\n        }\r\n    },\r\n\r\n    _setNetData : function (data) {\r\n        this.showLayer();\r\n        var needList = [];\r\n        var mathList;\r\n        var dataList = data.data;\r\n        if(!dataList) {\r\n            //没有数据\r\n            // data.msg\r\n        }else{\r\n            for(var i = 0; i < dataList.length; i ++){\r\n                if(!needList[i]) needList[i] = [];\r\n                mathList = dataList[i].matchResult;\r\n                if(mathList){\r\n                    for(var j = 0; j < mathList.length; j ++){\r\n                        needList[i].push([mathList[j]['itemType'], mathList[j]['outcome']]);\r\n                    }\r\n                }\r\n            }\r\n            this._showList(needList);\r\n        }\r\n    },\r\n\r\n    _showList : function (dataList) {\r\n        var data, item, comp;//走势图显示条目为5\r\n        for(var i = 0; i < G_Config_common.showTrendItems; i ++){\r\n            data = dataList[i]\r\n            if(data){\r\n                item = this.comp_itemContainer.getItemByIndex(i);\r\n                if(item){\r\n                    comp = item.getComponent(this._itemCompName);\r\n                    comp.setData(data);\r\n                }\r\n            }\r\n        }\r\n        this.comp_itemContainer.clearItems(i);\r\n    },\r\n\r\n    hideLayer : function () {\r\n        this._super();\r\n    },\r\n\r\n    _getLocalData : function () {\r\n        var netData = {};\r\n        netData.data = G_TOOL.getRandomBool() ? null : [];\r\n        if(netData.data){\r\n            var showNum = cc.random0To1() * 10;\r\n            for(var i = 0; i < showNum; i ++){\r\n                var info = {\r\n                    matchResult : this._getMatchResult()\r\n            }\r\n                netData.data.push(info);\r\n            }\r\n            netData.msg = '';\r\n        }else netData.msg = 'request error'\r\n        return netData\r\n    },\r\n\r\n    _getMatchResult : function () {\r\n        var needList = [];\r\n        var typeList = ['SPADE','DIAMOND','CLUB','HEART']\r\n        for(var i = 0; i < G_TOOL.getRandomArea(0, 4); i ++){\r\n            var info = {\r\n                'itemType':typeList[G_TOOL.getRandomArea(0,3)],\r\n                'outcome':G_TOOL.getRandomBool()?1:0,\r\n            }\r\n            needList.push(info)\r\n        }\r\n        return needList\r\n    },\r\n\r\n    // called every frame, uncomment this function to activate update callback\r\n    // update: function (dt) {\r\n\r\n    // },\r\n});\r\n"]}
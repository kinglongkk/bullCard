{"version":3,"sources":["assets\\Script\\Objects\\Obj_rankItem_friend.js"],"names":["cc","Class","extends","Component","properties","richRankBG","default","type","SpriteFrame","displayName","gainRankBG","sprite_hat","Sprite","labelRank","Label","node_headImg","Node","label_name","label_goldValue","node_goldBG","onLoad","init","isGain","rank","playerInfo","_setHat","parseInt","_setPlayerName","nickname","_setGoldValue","walletbalance","profitamount","G_TOOL","setHeadImg","avatarurl","node","active","spriteFrame","string","toString","playerName","getNameLimit","value","str","G_CHINESE","noRecord","length","upperLimit","changeMoney","_resetBackground","_widthRate","width","_firstW","wordLen","name","curStr","reg","i","test","targetW","Math","max"],"mappings":";;;;;;AAAA;;;AAGAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;;AAERC,oBAAa;AACTC,qBAAU,EADD;AAETC,kBAAOP,GAAGQ,WAFD;AAGTC,yBAAc;AAHL,SAFL;AAORC,oBAAa;AACTJ,qBAAU,EADD;AAETC,kBAAOP,GAAGQ,WAFD;AAGTC,yBAAc;AAHL,SAPL;AAYRE,oBAAa;AACTL,qBAAU,IADD;AAETC,kBAAOP,GAAGY,MAFD;AAGTH,yBAAc;AAHL,SAZL;AAiBRI,mBAAW;AACPP,qBAAU,IADH;AAEPC,kBAAOP,GAAGc,KAFH;AAGPL,yBAAc;AAHP,SAjBH;AAsBRM,sBAAe;AACXT,qBAAU,IADC;AAEXC,kBAAOP,GAAGgB,IAFC;AAGXP,yBAAc;AAHH,SAtBP;AA2BRQ,oBAAa;AACTX,qBAAU,IADD;AAETC,kBAAOP,GAAGc,KAFD;AAGTL,yBAAc;AAHL,SA3BL;AAgCRS,yBAAkB;AACdZ,qBAAU,IADI;AAEdC,kBAAOP,GAAGc,KAFI;AAGdL,yBAAc;AAHA,SAhCV;AAqCRU,qBAAc;AACVb,qBAAU,IADA;AAEVC,kBAAOP,GAAGgB,IAFA;AAGVP,yBAAc;AAHJ;AArCN,KAHP;;AA+CL;AACAW,YAAQ,kBAAY,CAEnB,CAlDI;;AAoDLC,UAAO,cAAUC,MAAV,EAAkBC,IAAlB,EAAwBC,UAAxB,EAAoC;AACvC,aAAKC,OAAL,CAAaH,MAAb,EAAqBI,SAASH,IAAT,CAArB;AACA,aAAKI,cAAL,CAAoBH,WAAWI,QAA/B;AACA,aAAKC,aAAL,CAAmBL,WAAWM,aAAX,GAA2BN,WAAWM,aAAtC,GAAsDN,WAAWO,YAApF;AACAC,eAAOC,UAAP,CAAkB,KAAKlB,YAAvB,EAAqCS,WAAWU,SAAhD;AACH,KAzDI;;AA2DL;AACAT,aAAU,iBAAUH,MAAV,EAAkBC,IAAlB,EAAwB;AAC9B,YAAIA,OAAO,CAAX,EAAc;AACV,iBAAKV,SAAL,CAAesB,IAAf,CAAoBC,MAApB,GAA6B,KAA7B;AACA,gBAAId,MAAJ,EAAY;AACR,qBAAKX,UAAL,CAAgB0B,WAAhB,GAA8B,KAAK3B,UAAL,CAAgBa,IAAhB,CAA9B;AACH,aAFD,MAEO;AACH,qBAAKZ,UAAL,CAAgB0B,WAAhB,GAA8B,KAAKhC,UAAL,CAAgBkB,IAAhB,CAA9B;AACH;AACJ,SAPD,MAOO;AACH,iBAAKV,SAAL,CAAesB,IAAf,CAAoBC,MAApB,GAA6B,IAA7B;AACA,iBAAKvB,SAAL,CAAeyB,MAAf,GAAwB,CAACf,OAAO,CAAR,EAAWgB,QAAX,EAAxB;AACH;AACJ,KAxEI;AAyEL;AACAZ,oBAAiB,wBAAUa,UAAV,EAAsB;AACnC,YAAG,CAACA,UAAJ,EAAgBA,aAAa,EAAb,CAAhB,KACKA,aAAaR,OAAOS,YAAP,CAAoBD,UAApB,EAAgC,EAAhC,EAAoC,KAApC,CAAb;AACL,aAAKvB,UAAL,CAAgBqB,MAAhB,GAAyBE,UAAzB;AACH,KA9EI;AA+EL;AACAX,mBAAgB,uBAAUa,KAAV,EAAiB;AAC7B,YAAIC,GAAJ;AACA,YAAG,CAACD,KAAJ,EAAW;AACPC,kBAAMC,UAAUC,QAAhB;AACA,iBAAK1B,WAAL,CAAiBiB,MAAjB,GAA0B,KAA1B;AACH,SAHD,MAGO;AACHO,kBAAMD,QAAQ,EAAd;AACA,gBAAIC,IAAIG,MAAJ,IAAc,EAAlB,EAAsB;AAClBH,sBAAMC,UAAUG,UAAhB;AACH,aAFD,MAEO;AACHJ,sBAAMX,OAAOgB,WAAP,CAAmBN,KAAnB,CAAN;AACH;AACD,iBAAKvB,WAAL,CAAiBiB,MAAjB,GAA0B,IAA1B;AACA;AACH;AACD,aAAKlB,eAAL,CAAqBoB,MAArB,GAA8BK,GAA9B;AACH,KAhGI;;AAkGL;AACAM,sBAAmB,0BAAUN,GAAV,EAAe;AAC9B,YAAG,CAAC,KAAKO,UAAT,EAAqB,KAAKA,UAAL,GAAkB,KAAK/B,WAAL,CAAiBgC,KAAjB,GAAuB,CAAzC;AACrB,YAAG,CAAC,KAAKhC,WAAL,CAAiBiC,OAArB,EAA8B,KAAKjC,WAAL,CAAiBiC,OAAjB,GAA2B,KAAKjC,WAAL,CAAiBgC,KAA5C;;AAE9B,YAAIE,UAAQ,CAAZ;AAAA,YAAeC,OAAOX,GAAtB;AAAA,YAA2BY,MAA3B;AAAA,YAAmCC,MAAM,oBAAzC,CAA8D;AAC9D,aAAI,IAAIC,IAAG,CAAX,EAAcA,IAAIH,KAAKR,MAAvB,EAA+BW,GAA/B,EAAoC;AAChCF,qBAASD,KAAKG,CAAL,CAAT;AACA,gBAAGD,IAAIE,IAAJ,CAASH,MAAT,CAAH,EAAqB;AACjBF,2BAAW,CAAX;AACH,aAFD,MAEO;AACHA,2BAAW,CAAX;AACH;AACJ;;AAED,YAAIM,UAAUN,UAAU,KAAKH,UAA7B;AACA,aAAK/B,WAAL,CAAiBgC,KAAjB,GAAyBS,KAAKC,GAAL,CAAS,KAAK1C,WAAL,CAAiBiC,OAA1B,EAAmCO,OAAnC,CAAzB;AACH;;AAnHI,CAAT","file":"unknown","sourcesContent":["//好友排行榜条目处理\r\n\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n\r\n        richRankBG : {\r\n            default : [],\r\n            type : cc.SpriteFrame,\r\n            displayName : '富豪榜排名背景'\r\n        },\r\n        gainRankBG : {\r\n            default : [],\r\n            type : cc.SpriteFrame,\r\n            displayName : '盈利榜排名背景'\r\n        },\r\n        sprite_hat : {\r\n            default : null,\r\n            type : cc.Sprite,\r\n            displayName : '皇冠'\r\n        },\r\n        labelRank: {\r\n            default : null,\r\n            type : cc.Label,\r\n            displayName : '排名数字'\r\n        },\r\n        node_headImg : {\r\n            default : null,\r\n            type : cc.Node,\r\n            displayName : '头像'\r\n        },\r\n        label_name : {\r\n            default : null,\r\n            type : cc.Label,\r\n            displayName : '名字'\r\n        },\r\n        label_goldValue : {\r\n            default : null,\r\n            type : cc.Label,\r\n            displayName : '金币数值'\r\n        },\r\n        node_goldBG : {\r\n            default : null,\r\n            type : cc.Node,\r\n            displayName : '金币背景'\r\n        },\r\n    },\r\n\r\n    // use this for initialization\r\n    onLoad: function () {\r\n\r\n    },\r\n\r\n    init : function (isGain, rank, playerInfo) {\r\n        this._setHat(isGain, parseInt(rank));\r\n        this._setPlayerName(playerInfo.nickname);\r\n        this._setGoldValue(playerInfo.walletbalance ? playerInfo.walletbalance : playerInfo.profitamount);\r\n        G_TOOL.setHeadImg(this.node_headImg, playerInfo.avatarurl);\r\n    },\r\n\r\n    //设置前三名名次图标\r\n    _setHat : function (isGain, rank) {\r\n        if (rank < 3) {\r\n            this.labelRank.node.active = false;\r\n            if (isGain) {\r\n                this.sprite_hat.spriteFrame = this.gainRankBG[rank];\r\n            } else {\r\n                this.sprite_hat.spriteFrame = this.richRankBG[rank];\r\n            }\r\n        } else {\r\n            this.labelRank.node.active = true;\r\n            this.labelRank.string = (rank + 1).toString();\r\n        }\r\n    },\r\n    //玩家名字\r\n    _setPlayerName : function (playerName) {\r\n        if(!playerName) playerName = '';\r\n        else playerName = G_TOOL.getNameLimit(playerName, 16, false);\r\n        this.label_name.string = playerName;\r\n    },\r\n    //金额数值\r\n    _setGoldValue : function (value) {\r\n        var str;\r\n        if(!value) {\r\n            str = G_CHINESE.noRecord;\r\n            this.node_goldBG.active = false;\r\n        } else {\r\n            str = value + '';\r\n            if (str.length >= 17) {\r\n                str = G_CHINESE.upperLimit;\r\n            } else {\r\n                str = G_TOOL.changeMoney(value);\r\n            }\r\n            this.node_goldBG.active = true;\r\n            // this._resetBackground(str);   保留\r\n        }\r\n        this.label_goldValue.string = str;\r\n    },\r\n\r\n    //改变背景长度\r\n    _resetBackground : function (str) {\r\n        if(!this._widthRate) this._widthRate = this.node_goldBG.width/6;\r\n        if(!this.node_goldBG._firstW) this.node_goldBG._firstW = this.node_goldBG.width;\r\n\r\n        var wordLen=0, name = str, curStr, reg = /^[\\u4E00-\\u9FA5]+$/;;\r\n        for(var i =0; i < name.length; i ++){\r\n            curStr = name[i];\r\n            if(reg.test(curStr)) {\r\n                wordLen += 2;\r\n            } else {\r\n                wordLen += 1;\r\n            }\r\n        }\r\n\r\n        var targetW = wordLen * this._widthRate;\r\n        this.node_goldBG.width = Math.max(this.node_goldBG._firstW, targetW);\r\n    },\r\n\r\n    // called every frame, uncomment this function to activate update callback\r\n    // update: function (dt) {\r\n\r\n    // },\r\n});\r\n"]}
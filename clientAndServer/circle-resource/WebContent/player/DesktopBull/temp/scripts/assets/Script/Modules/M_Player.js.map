{"version":3,"sources":["assets\\Script\\Modules\\M_Player.js"],"names":["player","cc","Class","_playerID","_playerToken","_playerName","_playerUID","_playerGold","_dict_systemSet","_dict_baseInfo","_inHomeData","_outHomeData","_reloadSceneInfo","ctor","setPlayerToken","tokenData","token","uid","setPlayerID","id","setPlayerName","name","setSystemSet","curDict","setBaseInfo","rectData","data","attrName","obj","G_OBJ","data_nbSelf","balance","setPlayerGold","setInHomeData","dataObj","setOutHomeData","setReloadSceneInfo","info","parseInt","GG","Listener","dispatchEventEX","G_TYPE","globalListener","playerGold","getPlayerGold","getPlayerID","getPlayerToken","getPlayerName","getSystemSet","getBaseInfo","getHeadImgUrl","getInHomeData","homeData","getOutHomeData","getUID","getGameID","getReloadSceneInfo","whenExit","module","exports"],"mappings":"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","file":"unknown","sourcesContent":["//玩家对象，存在于整个游戏流程中\r\n\r\nvar player = cc.Class({\r\n    _playerID : null,\r\n    _playerToken : null,\r\n    _playerName : null,                                                                                                     //姓名\r\n    _playerUID : null,                                                                                                      //\r\n    _playerGold : null,                                                                                                     //玩家的金币\r\n\r\n    _dict_systemSet : null,                                                                                                 //系统配置信息\r\n    _dict_baseInfo : null,                                                                                                  //基础信息列表\r\n\r\n    _inHomeData : null,                                                                                                     //临时记录当前的进房间信息\r\n    _outHomeData : null,                                                                                                    //临时记录当前的出房间信息\r\n    _reloadSceneInfo : null,                                                                                                //预加载场景的时候传递的参数\r\n    ctor : function () {},\r\n\r\n    setPlayerToken : function (tokenData) {\r\n        this._playerToken = tokenData.token;\r\n        this._playerUID = tokenData.uid;\r\n    },\r\n    setPlayerID : function (id) {\r\n        this._playerID = id;\r\n    },\r\n    //名字\r\n    setPlayerName : function (name) {\r\n        this._playerName = name;\r\n    },\r\n    //系统设置\r\n    setSystemSet : function (curDict) {\r\n        this._dict_systemSet = curDict;\r\n    },\r\n    //玩家基础信息: nickname,avatarUrl,id\r\n    setBaseInfo : function (rectData) {\r\n        if(!rectData) return;\r\n        if(!this._dict_baseInfo) this._dict_baseInfo = {};\r\n        var data = rectData.data[0];\r\n        if(data){\r\n            for(var attrName in data){\r\n                //头像avatarUrl；金币coin；nickname昵称\r\n                this._dict_baseInfo[attrName] = data[attrName];\r\n                //if(attrName == 'id') this.setPlayerID(data[attrName]);\r\n                switch (attrName){\r\n                    case 'id':\r\n                        this.setPlayerID(data[attrName]);\r\n                        break\r\n                    case 'coin':\r\n                        var obj = G_OBJ.data_nbSelf();\r\n                        obj.balance = data[attrName];\r\n                        this.setPlayerGold(obj);\r\n                        break\r\n                    default:\r\n                        break\r\n                }\r\n            }\r\n        }\r\n    },\r\n    setInHomeData : function (dataObj) {\r\n        this._inHomeData = dataObj;\r\n    },\r\n    setOutHomeData : function (dataObj) {\r\n        this._outHomeData = dataObj;\r\n    },\r\n    setReloadSceneInfo : function (info) {\r\n        this._reloadSceneInfo = info;\r\n    },\r\n    setPlayerGold : function (dataObj) {\r\n        this._playerGold = parseInt(dataObj.balance);\r\n        //分发金币变化的信息\r\n        GG.Listener.dispatchEventEX(G_TYPE.globalListener.playerGold, dataObj);\r\n    },\r\n\r\n    //=============================================\r\n\r\n    getPlayerGold : function () {\r\n        return this._playerGold\r\n    },\r\n    getPlayerID : function () {\r\n        return this._playerID\r\n    },\r\n    getPlayerToken : function () {\r\n        return this._playerToken;\r\n    },\r\n    //玩家姓名\r\n    getPlayerName : function () {\r\n        return this._dict_baseInfo['nickname'];\r\n    },\r\n    //获取系统配置信息\r\n    getSystemSet : function () {\r\n        return this._dict_systemSet\r\n    },\r\n    //获取基础信息\r\n    getBaseInfo : function () {\r\n        return this._dict_baseInfo\r\n    },\r\n    //获取玩家头像\r\n    getHeadImgUrl : function () {\r\n        return this._dict_baseInfo['avatarUrl']\r\n    },\r\n    //获取进房间信息\r\n    getInHomeData : function () {\r\n        var homeData = this._inHomeData;\r\n        this._inHomeData = null;\r\n        return homeData\r\n    },\r\n    //获取出房间信息\r\n    getOutHomeData : function () {\r\n        var homeData = this._outHomeData;\r\n        this._outHomeData = null;\r\n        return homeData\r\n    },\r\n    //获取UID\r\n    getUID : function () {\r\n        return this._playerUID\r\n    },\r\n    //获取游戏ID，第几款游戏\r\n    getGameID : function () {\r\n        return 1\r\n    },\r\n    //获取预加载场景传递的信息\r\n    getReloadSceneInfo : function () {\r\n        var info = this._reloadSceneInfo;\r\n        this._reloadSceneInfo = null;\r\n        return info\r\n    },\r\n\r\n    //====================================\r\n\r\n    //退出游戏时候的处理（比如记录当前的音乐音效设置信息）\r\n    whenExit : function () {\r\n\r\n    },\r\n})\r\n\r\n\r\nmodule.exports = player;"]}
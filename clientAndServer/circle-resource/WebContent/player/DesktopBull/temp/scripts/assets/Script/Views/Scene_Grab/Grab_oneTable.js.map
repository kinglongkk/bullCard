{"version":3,"sources":["assets\\Script\\Views\\Scene_Grab\\Grab_oneTable.js"],"names":["cc","Class","extends","Component","properties","_ownerGold","_areaGold","_goldFrame","_bullType","_multiple","_maxAdaptGold","_curGoldNum","_isWin","num_result","default","type","Integer","displayName","label_multiple","Label","node_goldContainer","Node","label_areaValue","label_ownerValue","label_resultMultiple","onLoad","_init","_ownerFormatStr","rate","G_Config_grab","num_goldImgArea","_maxGoldX","node","width","_maxGoldY","height","_loseColor","Color","_winColor","color","_goldScale","scale_moveGold","comp_scrollValue","getComponent","setInfo","goldFrame","bullType","multiple","parseInt","clearData","_setMultiple","_clearGoldImg","string","_setOwnerGold","OnClick_table","event","dataObj","G_OBJ","data_grabBetting","tableIndex","getResultType","targetPos","getGoldCenterPos","callFunc","_goldAdd","bind","GG","grabMgr","playMyGoldMove","_addOneGoldImg","otherAddGold","goldInfo","getWorldPos","addGoldValue","goldValue","isMine","addOwnerGold","_addOthersGold","_setAreaGold","goldNum","parent","active","G_TOOL","changeMoney","_changeDownLabel","showOwnerResult","showStr","winValue","startNum","targetNum","label","formatStr","scrollLabel","_scrollCall","str","Math","min","max","isUp","getRandomBool","goldX","getRandomArea","goldY","gold","_getGold","position","p","runAction","moveTo","removeOneGoldImg","children","worldPos","curPos","x","y","_removeGold","_pool","NodePool","goldNode","get","sp","addComponent","Sprite","spriteFrame","scale","goldeNode","stopAllActions","put","golds","i","length","destroy","setTouchEnable","isEnable","on","EventType","TOUCH_START","off","curLabel","isRight","anchorX","parentPos","parentScale","setTableWin","getGrabGold","getLostGold","getLeaveGoldImg"],"mappings":";;;;;;AAAA;;;AAGAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,oBAAa,CADL;AAERC,mBAAY,CAFJ;AAGRC,oBAAa,IAHL;AAIRC,mBAAY,IAJJ;AAKRC,mBAAY,CALJ;AAMRC,uBAAgB,IANR;AAORC,qBAAc,IAPN;AAQRC,gBAAS,IARD;;AAURC,oBAAa;AACTC,qBAAU,CADD;AAETC,kBAAOf,GAAGgB,OAFD;AAGTC,yBAAc;AAHL,SAVL;AAeRC,wBAAiB;AACbJ,qBAAU,IADG;AAEbC,kBAAOf,GAAGmB,KAFG;AAGbF,yBAAc;AAHD,SAfT;AAoBRG,4BAAqB;AACjBN,qBAAU,IADO;AAEjBC,kBAAOf,GAAGqB,IAFO;AAGjBJ,yBAAc;AAHG,SApBb;AAyBRK,yBAAkB;AACdR,qBAAU,IADI;AAEdC,kBAAOf,GAAGmB,KAFI;AAGdF,yBAAc;AAHA,SAzBV;AA8BRM,0BAAmB;AACfT,qBAAU,IADK;AAEfC,kBAAOf,GAAGmB,KAFK;AAGfF,yBAAc;AAHC,SA9BX;AAmCRO,8BAAuB;AACnBV,qBAAU,IADS;AAEnBC,kBAAOf,GAAGmB,KAFS;AAGnBF,yBAAc;AAHK;AAnCf,KAHP;;AA6CL;AACAQ,YAAQ,kBAAY;AAChB,aAAKC,KAAL;AACH,KAhDI;;AAkDLA,WAAQ,iBAAY;AAChB,aAAKC,eAAL,GAAuB,WAAvB;AACA;AACA;AACA;AACA;AACA;AACA,YAAIC,OAAOC,cAAcC,eAAzB;AACA;AACA,aAAKC,SAAL,GAAiB,KAAKC,IAAL,CAAUC,KAAV,GAAgBL,IAAhB,GAAqB,GAAtC;AACA;AACA,aAAKM,SAAL,GAAiB,CAAE,KAAKF,IAAL,CAAUG,MAAZ,GAAmBP,IAAnB,GAAwB,IAAzC;AACA,aAAKlB,aAAL,GAAqB,EAArB;AACA,aAAKC,WAAL,GAAmB,CAAnB;AACA,aAAKyB,UAAL,GAAkB,IAAIpC,GAAGqC,KAAP,CAAa,GAAb,EAAkB,EAAlB,EAAqB,EAArB,CAAlB,CAdgB,CAc4B;AAC5C,aAAKC,SAAL,GAAiB,KAAKf,gBAAL,CAAsBS,IAAtB,CAA2BO,KAA5C,EAAmD;;;AAGnD,aAAKC,UAAL,GAAkBX,cAAcY,cAHhC;AAIA,aAAKC,gBAAL,GAAwB,KAAKC,YAAL,CAAkB,iBAAlB,CAAxB;AACH,KAtEI;;AAwELC,aAAU,iBAAUC,SAAV,EAAqBC,QAArB,EAA+BC,QAA/B,EAAyC;AAC/C,aAAKxC,UAAL,GAAkBsC,SAAlB;AACA,aAAKrC,SAAL,GAAiBsC,QAAjB;AACA,aAAKrC,SAAL,GAAiBuC,SAASD,QAAT,CAAjB;AACH,KA5EI;;AA8ELE,eAAY,qBAAY;AACpB,aAAK5C,UAAL,GAAkB,CAAlB;AACA,aAAKC,SAAL,GAAiB,CAAjB;AACA,aAAKM,MAAL,GAAc,KAAd;;AAEA,aAAKsC,YAAL;AACA,aAAKC,aAAL;AACA,aAAK7B,eAAL,CAAqB8B,MAArB,GAA8B,EAA9B;AACA,aAAK7B,gBAAL,CAAsBS,IAAtB,CAA2BO,KAA3B,GAAmC,KAAKD,SAAxC,CARoB,CAQ8B;AAClD,aAAKe,aAAL,CAAmB,CAAnB;AACH,KAxFI;;AA0FLC,mBAAgB,uBAAUC,KAAV,EAAiB;AAC7B,YAAIC,UAAUC,MAAMC,gBAAN,EAAd;AACAF,gBAAQG,UAAR,GAAqB,KAAKC,aAAL,EAArB;AACAJ,gBAAQK,SAAR,GAAoB,KAAKC,gBAAL,EAApB;AACAN,gBAAQO,QAAR,GAAmB,KAAKC,QAAL,CAAcC,IAAd,CAAmB,IAAnB,CAAnB;;AAEAC,WAAGC,OAAH,CAAWC,cAAX,CAA0BZ,OAA1B;AACH,KAjGI;AAkGLQ,cAAW,oBAAY;AACnB,aAAKK,cAAL;AACH,KApGI;;AAsGLC,kBAAe,sBAAUC,QAAV,EAAoB;AAC/BA,iBAASV,SAAT,GAAqB,KAAKW,WAAL,EAArB;AACAD,iBAASR,QAAT,GAAoB,KAAKC,QAAL,CAAcC,IAAd,CAAmB,IAAnB,CAApB;;AAEA,YAAIQ,eAAeF,SAASG,SAA5B;AACA,YAAGH,SAASI,MAAZ,EAAmB;AACf,iBAAKC,YAAL,CAAkBH,YAAlB,EADe,CACiB;AACnC,SAFD,MAEM,KAAKI,cAAL,CAAoBJ,YAApB,EAPyB,CAOS;AACxC,eAAOF,QAAP;AACH,KA/GI;;AAiHL;AACAK,kBAAe,sBAAUF,SAAV,EAAqB;AAChC,YAAG,CAACA,SAAJ,EAAe;AACf,aAAKrE,UAAL,IAAmBqE,SAAnB;AACA,aAAKrB,aAAL,CAAmB,KAAKhD,UAAxB;AACA,aAAKwE,cAAL,CAAoBH,SAApB;AACH,KAvHI;AAwHL;AACAG,oBAAiB,wBAAUH,SAAV,EAAqB;AAClC,YAAG,CAACA,SAAJ,EAAeA,YAAY,CAAZ;AACf,aAAKpE,SAAL,IAAkBoE,SAAlB;AACA,aAAKI,YAAL,CAAkB,KAAKxE,SAAvB;AACH,KA7HI;;AA+HL+C,mBAAgB,uBAAU0B,OAAV,EAAmB;AAC/B,YAAG,CAACA,OAAJ,EAAY;AACR,iBAAKxD,gBAAL,CAAsBS,IAAtB,CAA2BgD,MAA3B,CAAkCC,MAAlC,GAA2C,KAA3C;AACH,SAFD,MAEK;AACD,iBAAK1D,gBAAL,CAAsBS,IAAtB,CAA2BgD,MAA3B,CAAkCC,MAAlC,GAA2C,IAA3C;AACA;AACA,iBAAK1D,gBAAL,CAAsB6B,MAAtB,GAA+B8B,OAAOC,WAAP,CAAmBJ,OAAnB,CAA/B;AACA;AACA,iBAAKvD,oBAAL,CAA0B4B,MAA1B,GAAmC,EAAnC;AACA,iBAAKgC,gBAAL,CAAsB,KAAK7D,gBAAL,CAAsBS,IAA5C,EAAkD,KAAlD;AACH;AACJ,KA1II;AA2IL8C,kBAAe,sBAAUC,OAAV,EAAmB;AAC9B,YAAG,CAACA,OAAJ,EAAa,KAAKzD,eAAL,CAAqB8B,MAArB,GAA8B,EAA9B,CAAb,KACK,KAAK9B,eAAL,CAAqB8B,MAArB,GAA8B8B,OAAOC,WAAP,CAAmBJ,OAAnB,CAA9B;AACL;AACH,KA/II;;AAiJLM,qBAAkB,2BAAY;AAC1B,YAAG,KAAKhF,UAAL,GAAkB,CAArB,EAAwB;AACxB,YAAIiF,UAAUJ,OAAOC,WAAP,CAAmB,KAAK9E,UAAxB,CAAd;AACA,aAAK+E,gBAAL,CAAsB,KAAK7D,gBAAL,CAAsBS,IAA5C,EAAkD,KAAKpB,MAAvD;AACA,YAAG,CAAC,KAAKA,MAAT,EAAiB;AACb0E,sBAAU,MAAIA,OAAd;AACA,iBAAK9D,oBAAL,CAA0B4B,MAA1B,GAAmC,EAAnC;AACA,iBAAK7B,gBAAL,CAAsB6B,MAAtB,GAA+BkC,OAA/B;AACA,iBAAK/D,gBAAL,CAAsBS,IAAtB,CAA2BO,KAA3B,GAAmC,KAAKH,UAAxC,CAJa,CAIsC;AACtD,SALD,MAKM;AACF;AACA,iBAAKZ,oBAAL,CAA0B4B,MAA1B,GAAmC,MAAI,KAAK3C,SAA5C;AACA,gBAAI8E,WAAW,KAAKlF,UAAL,GAAgB,KAAKI,SAApC;AACA,gBAAI+C,UAAU;AACVgC,0BAAW,CADD;AAEVC,2BAAYF,QAFF;AAGVG,uBAAQ,KAAKnE,gBAHH;AAIVoE,2BAAY,EAJF;AAKV5B,0BAAW,YAAY;AACnB,yBAAKxC,gBAAL,CAAsB6B,MAAtB,GAA+B8B,OAAOC,WAAP,CAAmBI,QAAnB,CAA/B;AACA;AACH,iBAHU,CAGTtB,IAHS,CAGJ,IAHI;AALD,aAAd;AAUA,iBAAKvB,gBAAL,CAAsBkD,WAAtB,CAAkCpC,OAAlC;AACH;AACD;AACH,KA3KI;AA4KL;AACAqC,iBAAc,uBAAY,CAEzB,CA/KI;AAgLL3C,kBAAe,wBAAY;AACvB,YAAI4C,MAAM,KAAKrF,SAAL,GAAiB,GAA3B;AACA,aAAKS,cAAL,CAAoBkC,MAApB,GAA6B0C,GAA7B;AACH,KAnLI;AAoLLzB,oBAAiB,0BAAY;AACzB,YAAG,CAAC,KAAK9D,UAAT,EAAqB;;AAErB,YAAIqB,OAAO,KAAKjB,WAAL,GAAiB,KAAKD,aAAjC;AACAkB,eAAOmE,KAAKC,GAAL,CAASD,KAAKE,GAAL,CAASrE,IAAT,EAAe,IAAf,CAAT,EAA+B,CAA/B,CAAP;AACA,YAAIsE,OAAOhB,OAAOiB,aAAP,KAAyB,CAAzB,GAA6B,CAAC,CAAzC;AACA,YAAIC,QAAQlB,OAAOmB,aAAP,CAAqB,CAArB,EAAwB,KAAKtE,SAAL,GAAeH,IAAvC,IAA+CsE,IAA3D;AACAA,eAAOhB,OAAOiB,aAAP,KAAyB,CAAzB,GAA6B,CAAC,CAArC;AACA,YAAIG,QAAQpB,OAAOmB,aAAP,CAAqB,CAArB,EAAwB,KAAKnE,SAAL,GAAeN,IAAvC,IAA+CsE,IAA3D;AACA,YAAIK,OAAO,KAAKC,QAAL,EAAX;AACAD,aAAKE,QAAL,GAAgBzG,GAAG0G,CAAH,CAAK,CAAL,EAAO,CAAP,CAAhB;AACAH,aAAKI,SAAL,CAAe3G,GAAG4G,MAAH,CAAU,IAAV,EAAeR,KAAf,EAAqBE,KAArB,CAAf;AACA,aAAK3F,WAAL,IAAoB,CAApB;AACH,KAjMI;;AAmMLkG,sBAAmB,4BAAY;AAC3B,YAAIN,OAAO,KAAKnF,kBAAL,CAAwB0F,QAAxB,CAAiC,CAAjC,CAAX;AACA,YAAGP,IAAH,EAAQ;AACJ,gBAAIQ,WAAW,KAAKvC,WAAL,EAAf;AACA,gBAAIwC,SAAShH,GAAG0G,CAAH,CAAKK,SAASE,CAAT,GAAaV,KAAKU,CAAvB,EAA0BF,SAASG,CAAT,GAAaX,KAAKW,CAA5C,CAAb;AACA,iBAAKC,WAAL,CAAiBZ,IAAjB;AACA,iBAAK5F,WAAL,IAAoB,CAApB;AACA,mBAAOqG,MAAP;AACH;AACD,eAAO,IAAP;AACH,KA7MI;;AA+MLR,cAAW,oBAAY;AACnB,YAAG,CAAC,KAAKY,KAAT,EAAgB,KAAKA,KAAL,GAAa,IAAIpH,GAAGqH,QAAP,CAAgB,kBAAgB,KAAKxG,UAArC,CAAb;;AAEhB,YAAIyG,WAAW,KAAKF,KAAL,CAAWG,GAAX,EAAf;AACA,YAAG,CAACD,QAAJ,EAAa;AACTA,uBAAW,IAAItH,GAAGqB,IAAP,EAAX;AACA,gBAAImG,KAAKF,SAASG,YAAT,CAAsBzH,GAAG0H,MAAzB,CAAT;AACAF,eAAGG,WAAH,GAAiB,KAAKpH,UAAtB;AACH;AACD+G,iBAAStC,MAAT,GAAkB,KAAK5D,kBAAvB;AACAkG,iBAASM,KAAT,GAAkB,IAAE,KAAK5F,IAAL,CAAUgD,MAAV,CAAiB4C,KAApB,GAA2B,KAAKpF,UAAjD;AACA8E,iBAASrC,MAAT,GAAkB,IAAlB;AACA,eAAOqC,QAAP;AACH,KA5NI;AA6NLH,iBAAc,qBAAUU,SAAV,EAAqB;AAC/BA,kBAAUC,cAAV;AACAD,kBAAU5C,MAAV,GAAmB,KAAnB;AACA,aAAKmC,KAAL,CAAWW,GAAX,CAAeF,SAAf;AACH,KAjOI;;AAmOL1E,mBAAgB,yBAAY;AACxB,YAAI6E,QAAQ,KAAK5G,kBAAL,CAAwB0F,QAApC;AACA,aAAI,IAAImB,IAAI,CAAZ,EAAeA,IAAID,MAAME,MAAzB,EAAiCD,GAAjC,EAAsC;AAClCD,kBAAMC,CAAN,EAASE,OAAT;AACH;AACD,aAAKxH,WAAL,GAAmB,CAAnB;AACH,KAzOI;;AA2OLyH,oBAAiB,wBAAUC,QAAV,EAAoB;AACjC,YAAGA,QAAH,EAAY;AACR,iBAAKrG,IAAL,CAAUsG,EAAV,CAAatI,GAAGqB,IAAH,CAAQkH,SAAR,CAAkBC,WAA/B,EAA4C,KAAKlF,aAAjD,EAAgE,IAAhE;AACH,SAFD,MAEM,KAAKtB,IAAL,CAAUyG,GAAV,CAAczI,GAAGqB,IAAH,CAAQkH,SAAR,CAAkBC,WAAhC,EAA6C,KAAKlF,aAAlD,EAAiE,IAAjE;AACT,KA/OI;AAgPL;AACA8B,sBAAmB,0BAAUsD,QAAV,EAAoBC,OAApB,EAA6B;AAC5C,YAAGA,OAAH,EAAW;AACPD,qBAASE,OAAT,GAAmB,CAAnB;AACAF,qBAASzB,CAAT,GAAayB,SAAS1D,MAAT,CAAgB/C,KAAhB,GAAsB,IAAnC;AACH,SAHD,MAGK;AACDyG,qBAASE,OAAT,GAAmB,GAAnB;AACAF,qBAASzB,CAAT,GAAa,CAAb;AACH;AACJ,KAzPI;;AA2PLzC,iBAAc,uBAAY;AACtB,YAAIqE,YAAY,KAAK7G,IAAL,CAAUgD,MAAV,CAAiByB,QAAjC;AACA,YAAIqC,cAAc,KAAK9G,IAAL,CAAUgD,MAAV,CAAiB4C,KAAnC;AACA,eAAO5H,GAAG0G,CAAH,CAAKmC,UAAU5B,CAAV,GAAc,KAAKjF,IAAL,CAAUiF,CAAV,GAAY6B,WAA/B,EAA4CD,UAAU3B,CAAV,GAAY,KAAKlF,IAAL,CAAUkF,CAAV,GAAY4B,WAAxB,GAAoC,KAAK9G,IAAL,CAAUG,MAAV,GAAiB,GAAjG,CAAP,CAHsB,CAGuF;AAChH,KA/PI;AAgQL2B,sBAAmB,4BAAY;AAC3B,YAAI+E,YAAY,KAAK7G,IAAL,CAAUgD,MAAV,CAAiByB,QAAjC;AACA,YAAIqC,cAAc,KAAK9G,IAAL,CAAUgD,MAAV,CAAiB4C,KAAnC;AACA,eAAO5H,GAAG0G,CAAH,CAAKmC,UAAU5B,CAAV,GAAc,KAAKjF,IAAL,CAAUiF,CAAV,GAAY6B,WAA/B,EAA4CD,UAAU3B,CAAV,GAAY,KAAKlF,IAAL,CAAUkF,CAAV,GAAY4B,WAAxB,GAAoC,KAAK9G,IAAL,CAAUG,MAAV,GAAiB,GAAjG,CAAP;AACH,KApQI;;AAsQLyB,mBAAgB,yBAAY;AACxB,eAAO,KAAK/C,UAAZ;AACH,KAxQI;AAyQLkI,iBAAc,uBAAY;AACtB,aAAKnI,MAAL,GAAc,IAAd;AACH,KA3QI;;AA6QLoI,iBAAc,uBAAY;AACtB,eAAO,KAAK3I,UAAL,GAAkB,KAAKI,SAA9B;AACH,KA/QI;AAgRLwI,iBAAc,uBAAY;AACtB,eAAO,KAAK5I,UAAZ;AACH,KAlRI;AAmRL;AACA6I,qBAAkB,2BAAY;AAC1B,eAAO,KAAKvI,WAAZ;AACH;;AAtRI,CAAT","file":"unknown","sourcesContent":["//单个投注区域格子\r\n\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        _ownerGold : 0,\r\n        _areaGold : 0,\r\n        _goldFrame : null,\r\n        _bullType : null,\r\n        _multiple : 1,\r\n        _maxAdaptGold : null,\r\n        _curGoldNum : null,\r\n        _isWin : null,\r\n\r\n        num_result : {\r\n            default : 0,\r\n            type : cc.Integer,\r\n            displayName : '代表的结果值'\r\n        },\r\n        label_multiple : {\r\n            default : null,\r\n            type : cc.Label,\r\n            displayName : '倍数'\r\n        },\r\n        node_goldContainer : {\r\n            default : null,\r\n            type : cc.Node,\r\n            displayName : '金币容器'\r\n        },\r\n        label_areaValue : {\r\n            default : null,\r\n            type : cc.Label,\r\n            displayName : '格子内总金币'\r\n        },\r\n        label_ownerValue : {\r\n            default : null,\r\n            type : cc.Label,\r\n            displayName : '投注值'\r\n        },\r\n        label_resultMultiple : {\r\n            default : null,\r\n            type : cc.Label,\r\n            displayName : '结果倍数'\r\n        }\r\n    },\r\n\r\n    // use this for initialization\r\n    onLoad: function () {\r\n        this._init();\r\n    },\r\n\r\n    _init : function () {\r\n        this._ownerFormatStr = '<b>%s</b>';\r\n        //this._areaFormatStr = '<b>%s</b>';\r\n        //this._multipleFormatStr = '<b>%s</b>';\r\n        //this._areaFormatStr = '';\r\n        //this._multipleFormatStr = '';\r\n        //this.node_goldContainer.x += 200;\r\n        var rate = G_Config_grab.num_goldImgArea;\r\n        // this._minGoldX = -this.node.width*rate*1.3;\r\n        this._maxGoldX = this.node.width*rate*1.3;\r\n        // this._minGoldY = this.node.height*rate*0.35;\r\n        this._maxGoldY = - this.node.height*rate*0.35\r\n        this._maxAdaptGold = 50;\r\n        this._curGoldNum = 0;\r\n        this._loseColor = new cc.Color(253, 41,31); //失败的颜色\r\n        this._winColor = this.label_ownerValue.node.color, //胜利的颜色\r\n\r\n\r\n        this._goldScale = G_Config_grab.scale_moveGold;\r\n        this.comp_scrollValue = this.getComponent('Obj_scrollValue');\r\n    },\r\n\r\n    setInfo : function (goldFrame, bullType, multiple) {\r\n        this._goldFrame = goldFrame;\r\n        this._bullType = bullType;\r\n        this._multiple = parseInt(multiple);\r\n    },\r\n\r\n    clearData : function () {\r\n        this._ownerGold = 0;\r\n        this._areaGold = 0;\r\n        this._isWin = false;\r\n\r\n        this._setMultiple();\r\n        this._clearGoldImg();\r\n        this.label_areaValue.string = '';\r\n        this.label_ownerValue.node.color = this._winColor;//胜利颜色\r\n        this._setOwnerGold(0);\r\n    },\r\n\r\n    OnClick_table : function (event) {\r\n        var dataObj = G_OBJ.data_grabBetting();\r\n        dataObj.tableIndex = this.getResultType();\r\n        dataObj.targetPos = this.getGoldCenterPos();\r\n        dataObj.callFunc = this._goldAdd.bind(this);\r\n\r\n        GG.grabMgr.playMyGoldMove(dataObj);\r\n    },\r\n    _goldAdd : function () {\r\n        this._addOneGoldImg();\r\n    },\r\n\r\n    otherAddGold : function (goldInfo) {\r\n        goldInfo.targetPos = this.getWorldPos();\r\n        goldInfo.callFunc = this._goldAdd.bind(this);\r\n\r\n        var addGoldValue = goldInfo.goldValue;\r\n        if(goldInfo.isMine){\r\n            this.addOwnerGold(addGoldValue);//自己押注\r\n        }else this._addOthersGold(addGoldValue);//他人押注\r\n        return goldInfo\r\n    },\r\n\r\n    //自己押注值\r\n    addOwnerGold : function (goldValue) {\r\n        if(!goldValue) return;\r\n        this._ownerGold += goldValue;\r\n        this._setOwnerGold(this._ownerGold);\r\n        this._addOthersGold(goldValue);\r\n    },\r\n    //他人押注值\r\n    _addOthersGold : function (goldValue) {\r\n        if(!goldValue) goldValue = 0;\r\n        this._areaGold += goldValue;\r\n        this._setAreaGold(this._areaGold);\r\n    },\r\n\r\n    _setOwnerGold : function (goldNum) {\r\n        if(!goldNum){\r\n            this.label_ownerValue.node.parent.active = false;\r\n        }else{\r\n            this.label_ownerValue.node.parent.active = true;\r\n            //this.label_ownerValue.string = G_TOOL.formatStr(this._ownerFormatStr, G_TOOL.changeMoney(goldNum));\r\n            this.label_ownerValue.string = G_TOOL.changeMoney(goldNum);\r\n            //this.label_ownerValue.string = G_TOOL.changeMoney(goldNum);\r\n            this.label_resultMultiple.string = '';\r\n            this._changeDownLabel(this.label_ownerValue.node, false);\r\n        }\r\n    },\r\n    _setAreaGold : function (goldNum) {\r\n        if(!goldNum) this.label_areaValue.string = '';\r\n        else this.label_areaValue.string = G_TOOL.changeMoney(goldNum);\r\n        //else this.label_areaValue.string = G_TOOL.formatStr(this._areaFormatStr, G_TOOL.changeMoney(goldNum));\r\n    },\r\n\r\n    showOwnerResult : function () {\r\n        if(this._ownerGold < 1) return;\r\n        var showStr = G_TOOL.changeMoney(this._ownerGold);\r\n        this._changeDownLabel(this.label_ownerValue.node, this._isWin);\r\n        if(!this._isWin) {\r\n            showStr = '-'+showStr;\r\n            this.label_resultMultiple.string = '';\r\n            this.label_ownerValue.string = showStr;\r\n            this.label_ownerValue.node.color = this._loseColor;//失败颜色\r\n        } else{\r\n            //胜利\r\n            this.label_resultMultiple.string = 'X'+this._multiple;\r\n            var winValue = this._ownerGold*this._multiple;\r\n            var dataObj = {\r\n                startNum : 0,\r\n                targetNum : winValue,\r\n                label : this.label_ownerValue,\r\n                formatStr : '',\r\n                callFunc : function () {\r\n                    this.label_ownerValue.string = G_TOOL.changeMoney(winValue);\r\n                    //this.label_ownerValue.node.color = this._winColor;//胜利颜色\r\n                }.bind(this)\r\n            }\r\n            this.comp_scrollValue.scrollLabel(dataObj);\r\n        }\r\n        //this.label_ownerValue.string = G_TOOL.formatStr(this._ownerFormatStr, showStr);\r\n    },\r\n    //滚动金币结束\r\n    _scrollCall : function () {\r\n\r\n    },\r\n    _setMultiple : function () {\r\n        var str = this._multiple + '倍'\r\n        this.label_multiple.string = str;\r\n    },\r\n    _addOneGoldImg : function () {\r\n        if(!this._goldFrame) return;\r\n\r\n        var rate = this._curGoldNum/this._maxAdaptGold;\r\n        rate = Math.min(Math.max(rate, 0.55), 1);\r\n        var isUp = G_TOOL.getRandomBool() ? 1 : -1;\r\n        var goldX = G_TOOL.getRandomArea(0, this._maxGoldX*rate) * isUp;\r\n        isUp = G_TOOL.getRandomBool() ? 1 : -1;\r\n        var goldY = G_TOOL.getRandomArea(0, this._maxGoldY*rate) * isUp;\r\n        var gold = this._getGold();\r\n        gold.position = cc.p(0,0);\r\n        gold.runAction(cc.moveTo(0.35,goldX,goldY));\r\n        this._curGoldNum += 1;\r\n    },\r\n\r\n    removeOneGoldImg : function () {\r\n        var gold = this.node_goldContainer.children[0];\r\n        if(gold){\r\n            var worldPos = this.getWorldPos();\r\n            var curPos = cc.p(worldPos.x + gold.x, worldPos.y + gold.y);\r\n            this._removeGold(gold);\r\n            this._curGoldNum -= 1;\r\n            return curPos\r\n        }\r\n        return null;\r\n    },\r\n\r\n    _getGold : function () {\r\n        if(!this._pool) this._pool = new cc.NodePool('Grab_oneTable'+this.num_result);\r\n\r\n        var goldNode = this._pool.get();\r\n        if(!goldNode){\r\n            goldNode = new cc.Node();\r\n            var sp = goldNode.addComponent(cc.Sprite);\r\n            sp.spriteFrame = this._goldFrame;\r\n        }\r\n        goldNode.parent = this.node_goldContainer;\r\n        goldNode.scale = (1/this.node.parent.scale)*this._goldScale;\r\n        goldNode.active = true;\r\n        return goldNode;\r\n    },\r\n    _removeGold : function (goldeNode) {\r\n        goldeNode.stopAllActions();\r\n        goldeNode.active = false;\r\n        this._pool.put(goldeNode);\r\n    },\r\n\r\n    _clearGoldImg : function () {\r\n        var golds = this.node_goldContainer.children;\r\n        for(var i = 0; i < golds.length; i ++){\r\n            golds[i].destroy();\r\n        }\r\n        this._curGoldNum = 0;\r\n    },\r\n\r\n    setTouchEnable : function (isEnable) {\r\n        if(isEnable){\r\n            this.node.on(cc.Node.EventType.TOUCH_START, this.OnClick_table, this);\r\n        }else this.node.off(cc.Node.EventType.TOUCH_START, this.OnClick_table, this);\r\n    },\r\n    //设置底部label随着倍数是否显示而变化位置\r\n    _changeDownLabel : function (curLabel, isRight) {\r\n        if(isRight){\r\n            curLabel.anchorX = 1;\r\n            curLabel.x = curLabel.parent.width*0.47;\r\n        }else{\r\n            curLabel.anchorX = 0.5;\r\n            curLabel.x = 0;\r\n        }\r\n    },\r\n\r\n    getWorldPos : function () {\r\n        var parentPos = this.node.parent.position;\r\n        var parentScale = this.node.parent.scale;\r\n        return cc.p(parentPos.x + this.node.x*parentScale, parentPos.y+this.node.y*parentScale-this.node.height*0.4);//赢钱旗帜位置\r\n    },\r\n    getGoldCenterPos : function () {\r\n        var parentPos = this.node.parent.position;\r\n        var parentScale = this.node.parent.scale;\r\n        return cc.p(parentPos.x + this.node.x*parentScale, parentPos.y+this.node.y*parentScale-this.node.height*0.2);\r\n    },\r\n\r\n    getResultType : function () {\r\n        return this.num_result\r\n    },\r\n    setTableWin : function () {\r\n        this._isWin = true;\r\n    },\r\n\r\n    getGrabGold : function () {\r\n        return this._ownerGold * this._multiple\r\n    },\r\n    getLostGold : function () {\r\n        return this._ownerGold\r\n    },\r\n    //获取剩余没有被移除的金币数量\r\n    getLeaveGoldImg : function () {\r\n        return this._curGoldNum\r\n    },\r\n\r\n    // called every frame, uncomment this function to activate update callback\r\n    // update: function (dt) {\r\n\r\n    // },\r\n});\r\n"]}
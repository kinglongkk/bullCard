{"version":3,"sources":["assets\\Script\\Views\\Scene_Platform\\UI\\Platform_topInfo.js"],"names":["cc","Class","extends","require","properties","node_head","default","type","Node","displayName","label_name","Label","label_coin","node_exit","node_back","node_setting","onLoad","_registerButton","node","active","registerButton","onClick_exit","onClick_back","onClick_setting","_listenerName","GG","Listener","registerFunc","G_TYPE","globalListener","playerGold","on_goldChange","bind","event","tipsMgr","showConfirmTip_TWO","G_CHINESE","exitText2","exitGame","platformMgr","showHomeList","layer","openUI","G_RES_URL","uiName","systemSet","setData","listenerName","dataObj","string","getPlayer","getPlayerGold","initShow","jsonData","getBaseInfo","G_TOOL","setHeadImg","avatarUrl","_setName","nickname","setHomeListShow","isShow","name","getNameLimit","onDestroy","delListen"],"mappings":"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","file":"unknown","sourcesContent":["//游戏大厅中玩家信息\r\ncc.Class({\r\n    extends: require('AutoDealing'),\r\n\r\n    properties: {\r\n        node_head : {\r\n            default : null,\r\n            type : cc.Node,\r\n            displayName : '头像'\r\n        },\r\n        label_name : {\r\n            default : null,\r\n            type : cc.Label,\r\n            displayName : '昵称'\r\n        },\r\n        label_coin : {\r\n            default : null,\r\n            type : cc.Label,\r\n            displayName : '金币'\r\n        },\r\n        node_exit : {\r\n            default : null,\r\n            type : cc.Node,\r\n            displayName : '退出按钮'\r\n        },\r\n        node_back : {\r\n            default : null,\r\n            type : cc.Node,\r\n            displayName : '返回按钮'\r\n        },\r\n        node_setting : {\r\n            default : null,\r\n            type : cc.Node,\r\n            displayName : '设置按钮'\r\n        },\r\n    },\r\n\r\n    // use this for initialization\r\n    onLoad: function () {\r\n        this._registerButton();\r\n        this.node.active = false;\r\n    },\r\n\r\n    _registerButton : function () {\r\n        this.registerButton(this.node_exit, this.onClick_exit, this);\r\n        this.registerButton(this.node_back, this.onClick_back, this);\r\n        this.registerButton(this.node_setting, this.onClick_setting, this);\r\n        //增加对玩家身上金币的监听\r\n        this._listenerName = GG.Listener.registerFunc(G_TYPE.globalListener.playerGold, this.on_goldChange.bind(this));\r\n    },\r\n\r\n    //退出游戏\r\n    onClick_exit : function (event) {\r\n        GG.tipsMgr.showConfirmTip_TWO(G_CHINESE.exitText2, function () {\r\n            //确认退出\r\n            GG.exitGame();\r\n        });\r\n    },\r\n    //返回主场景\r\n    onClick_back : function (event) {\r\n        GG.platformMgr.showHomeList(false);\r\n    },\r\n    //系统设置\r\n    onClick_setting : function (event) {\r\n        //GG.audioMgr.playMusic('gameLose');\r\n        var layer = GG.platformMgr.openUI(G_RES_URL.uiName.systemSet, function (layer) {\r\n            layer.setData();\r\n        });\r\n        //if(G_Config_common.isLocal){\r\n        //    var data = {'music':true,'sound':true};\r\n        //    if(GG.getPlayer().getSystemSet()) data = GG.getPlayer().getSystemSet();\r\n        //    //console.log(data);\r\n        //    var layer = GG.platformMgr.openUI(G_RES_URL.uiName.systemSet);\r\n        //    layer.setData(data);\r\n        //}else{\r\n        //    //获取玩家系统设置\r\n        //    if(!GG.getPlayer().getSystemSet()){\r\n        //        var sendData = null;\r\n        //        GG.httpMgr.sendHttpLogin(G_DIALOG_URL.loginToSetUrl, sendData, function (data) {\r\n        //            GG.getPlayer().setSystemSet(data[0]);\r\n        //            var layer = GG.platformMgr.openUI(G_RES_URL.uiName.systemSet);\r\n        //            layer.setData(data[0]);\r\n        //        }.bind(this));\r\n        //    }else {\r\n        //        var layer = GG.platformMgr.openUI(G_RES_URL.uiName.systemSet);\r\n        //        layer.setData(GG.getPlayer().getSystemSet());\r\n        //    }\r\n        //}\r\n    },\r\n    //监听金币的变化\r\n    on_goldChange : function (listenerName, dataObj) {\r\n        if(this.label_coin) this.label_coin.string = GG.getPlayer().getPlayerGold();\r\n    },\r\n\r\n    initShow : function () {\r\n        var jsonData = GG.getPlayer().getBaseInfo();\r\n        if(jsonData){\r\n            G_TOOL.setHeadImg(this.node_head, jsonData.avatarUrl);\r\n            this._setName(jsonData.nickname);\r\n            this.label_coin.string = GG.getPlayer().getPlayerGold();\r\n        }\r\n    },\r\n\r\n    //显示房间列表的时候，返回按钮需要改变\r\n    setHomeListShow : function (isShow) {\r\n        if(!this.node.active) this.node.active = true;\r\n        this.node_exit.active = !isShow;\r\n        this.node_back.active = isShow;\r\n    },\r\n    //设置名字\r\n    _setName : function (name) {\r\n        if(!name) name = '';\r\n        this.label_name.string = G_TOOL.getNameLimit(name, 12);\r\n    },\r\n\r\n    onDestroy : function () {\r\n        GG.Listener.delListen(G_TYPE.globalListener.playerGold, this._listenerName);\r\n    },\r\n\r\n    // called every frame, uncomment this function to activate update callback\r\n    // update: function (dt) {\r\n\r\n    // },\r\n});\r\n"]}
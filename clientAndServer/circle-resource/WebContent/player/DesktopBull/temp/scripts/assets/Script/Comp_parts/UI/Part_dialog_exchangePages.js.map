{"version":3,"sources":["assets\\Script\\Comp_parts\\UI\\Part_dialog_exchangePages.js"],"names":["cc","Class","extends","Component","properties","_clickFunc","_leftDealComp","_dict_rightContent","_list_rightPrefab","_rightScroll","_rightScrollViewComp","_lastRightContent","_lastIndex","_isRightAutoLimit","_clickShowLimit","onLoad","_leftNormalName","_leftChooseName","initData","dataObj","_initLeftScroll","rightPrefabList","rightDealScrollComp","node","getScrollView","isStopSetRightContent","showDefault","isReset","_onClick","leftDealScrollComp","curData","itemPrefab","leftPrefab","scrollType","G_TYPE","vertical","setData","leftClickFunc","item","contentNode","contentList","leftContentList","i","length","getItemByIndex","getChildByName","getComponent","Label","string","_registerClickEvent","event","index","doneClickShow","diyClickShow","_showLeft","_showRightContent","_lastTouchBtn","active","scrollToTop","rightContent","_createRightContent","height","instantiate","parent","callBack","target","userData","on","Node","EventType","TOUCH_START","GG","audioMgr","playSound","TOUCH_END","call","TOUCH_CANCEL"],"mappings":"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","file":"unknown","sourcesContent":["//多页面切换的插件脚本\r\n//定义左边选项按钮的时候，一定需要一个命名为content的label\r\n//这里使用的滚动层都是有绑定dealscroll脚本的\r\n//默认内容的显示，需要在start里面做\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        _clickFunc : null,                              //点击选项后触发的事件\r\n        _leftDealComp : null,                           //点击选项后触发的事件\r\n        _dict_rightContent : null,                      //右边的内容\r\n        _list_rightPrefab : null,                       //右边的预制体集合\r\n        _rightScroll : null,                            //右边的滚动层\r\n        _rightScrollViewComp : null,                   //右边的滚动层\r\n        _lastRightContent : null,                       //右边的上次显示的内容\r\n        _lastIndex : null,                               //上次点击的选项\r\n        _isRightAutoLimit : null,                      //是否禁止右边内容自动刷新\r\n        _clickShowLimit : null,                         //是否主动控制点击事件的表现效果\r\n    },\r\n\r\n    // use this for initialization\r\n    onLoad: function () {\r\n        this._leftNormalName = 'normal';\r\n        this._leftChooseName = 'choose';\r\n        this._dict_rightContent = {};\r\n    },\r\n\r\n    initData : function (dataObj) {\r\n        this._clickShowLimit = false;\r\n        //dataObj = G_OBJ.data_dialog_exchangePages();\r\n        this._initLeftScroll(dataObj);\r\n        //右边的预制体\r\n        this._list_rightPrefab = dataObj.rightPrefabList;\r\n        this._rightScroll = dataObj.rightDealScrollComp.node;\r\n        this._rightScrollViewComp = dataObj.rightDealScrollComp.getScrollView();\r\n\r\n        this._isRightAutoLimit = dataObj.isStopSetRightContent;\r\n    },\r\n\r\n    showDefault : function (isReset) {\r\n        if(isReset) this._lastIndex = null;\r\n        this._onClick(null, 0);\r\n    },\r\n\r\n    //=======================左边\r\n\r\n    _initLeftScroll : function (dataObj) {\r\n        if(!dataObj.leftDealScrollComp) return;\r\n        this._leftDealComp = dataObj.leftDealScrollComp;\r\n\r\n        var curData = {\r\n            itemPrefab : dataObj.leftPrefab,\r\n            scrollType : G_TYPE.scrollType.vertical,\r\n        }\r\n        this._leftDealComp.setData(curData);\r\n        //初始化左边内容\r\n        this._clickFunc = dataObj.leftClickFunc;\r\n        var item, contentNode, contentList = dataObj.leftContentList;\r\n        for(var i = 0; i < contentList.length; i ++){\r\n            item = this._leftDealComp.getItemByIndex(i);\r\n            if(item){\r\n                contentNode = item.getChildByName('content');\r\n                if(!contentNode) continue;\r\n                contentNode.getComponent(cc.Label).string = contentList[i];\r\n\r\n                this._registerClickEvent(item, this._onClick, this, i);\r\n            }\r\n        }\r\n    },\r\n\r\n    _onClick : function (event, index) {\r\n        if(this._lastIndex == index) return;\r\n\r\n        if(this._clickFunc){\r\n            this._clickFunc(index)\r\n        }\r\n\r\n        if(!this._clickShowLimit) this.doneClickShow(index);\r\n    },\r\n\r\n    diyClickShow : function () {\r\n        this._clickShowLimit = true;\r\n    },\r\n\r\n    doneClickShow : function (index) {\r\n        this._lastIndex = index;\r\n        this._showLeft(index);\r\n        this._showRightContent(index);\r\n    },\r\n\r\n    _showLeft : function (index) {\r\n        var item = this._leftDealComp.getItemByIndex(index);\r\n        if(item){\r\n            if(this._lastTouchBtn) {\r\n                this._lastTouchBtn.getChildByName(this._leftChooseName).active = false;\r\n                this._lastTouchBtn = null;\r\n            }\r\n            this._lastTouchBtn = item;\r\n            item.getChildByName(this._leftChooseName).active = true;\r\n        }\r\n    },\r\n\r\n    //右边========================================\r\n\r\n    //显示选中的右边内容\r\n    _showRightContent : function (index) {\r\n        this._rightScrollViewComp.scrollToTop(0.5);\r\n\r\n        if(this._isRightAutoLimit) return;\r\n        if(this._lastRightContent){\r\n            this._lastRightContent.active = false;\r\n        }\r\n\r\n        var rightContent = this._dict_rightContent[index];\r\n        if(!rightContent){\r\n            rightContent = this._createRightContent(index);\r\n        }\r\n        this._rightScroll.height = rightContent.height;\r\n        rightContent.active = true;\r\n        this._lastRightContent = rightContent;\r\n    },\r\n\r\n    //新建一个规则\r\n    _createRightContent : function (index) {\r\n        if(!this._list_rightPrefab[index]) return null;\r\n        var rightContent = cc.instantiate(this._list_rightPrefab[index])\r\n        rightContent.parent = this._rightScroll;\r\n        this._dict_rightContent[index] = rightContent;\r\n        return rightContent\r\n    },\r\n\r\n    _registerClickEvent : function (node, callBack, target, userData) {\r\n        node.on(cc.Node.EventType.TOUCH_START, function (event) {\r\n            GG.audioMgr.playSound(17);\r\n        }, target);\r\n        node.on(cc.Node.EventType.TOUCH_END, function (event) {\r\n            callBack.call(target, event, userData);\r\n        }, target);\r\n        node.on(cc.Node.EventType.TOUCH_CANCEL, function (event) {\r\n\r\n        }, target);\r\n    },\r\n\r\n    // called every frame, uncomment this function to activate update callback\r\n    // update: function (dt) {\r\n\r\n    // },\r\n});\r\n"]}
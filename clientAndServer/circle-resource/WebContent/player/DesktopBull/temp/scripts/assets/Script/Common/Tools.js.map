{"version":3,"sources":["assets\\Script\\Common\\Tools.js"],"names":["tools","getRandomArea","downNum","upNum","parseInt","Math","random","getRandomBool","Boolean","formatStr","t","arguments","e","length","i","n","r","s","test","o","a","c","replace","changeMoney","money","zeroCnt","nega","tmp","formatBy1000","getTimeStamp","Date","valueOf","quickSort","array","sort","prev","numsize","nonius","j","flag","getNameLimit","name","len","isNot","str","maxNameLength","G_Config_common","num_maxNameLen","reg","wordsNum","newStr","objectLog","object","attrName","adaptSize","curW","curH","designSize","cc","view","getDesignResolutionSize","rateW","visibleRect","width","rateH","height","adaptPos","pos","p","x","y","resetUrlImg","urlNode","newFrame","_firstSize","undefined","getComponent","Sprite","spriteFrame","setHeadImg","headNode","imgName","isLocal","_headUrl","loader","loadRes","SpriteFrame","err","G_TOOL","_firstFrame","G_DATA","getResNetRoot","GG","resMgr","getHeadImg","frame","getUniformTime","startPos","targetPos","maxTime","pDistance","window"],"mappings":"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","file":"unknown","sourcesContent":["//项目中可以通用的工具\r\n\r\nvar tools = {\r\n    //返回数值包括最大最小值\r\n    getRandomArea : function(downNum, upNum) {\r\n        return parseInt(Math.random()*(upNum - downNum + 1) + downNum);\r\n    },\r\n    //返回随机的bool值是或否\r\n    getRandomBool : function(){\r\n        return Boolean(Math.random() > 0.5);\r\n    },\r\n    //使用%s，%d重新配置字符串，如 this.formatStr('这是:%s',9099)  ==> 这是:9099\r\n    formatStr:function(){\r\n        var t=arguments,e=t.length;\r\n        if(e<1)return\"\";\r\n        var i=/(%d)|(%s)/,n=1,r=t[0],s=\"string\"==typeof r&&i.test(r);\r\n        if(s)for(var o=/%s/;n<e;++n){\r\n            var a=t[n],c=\"number\"==typeof a?i:o;\r\n            c.test(r)?r=r.replace(c,a):r+=\" \"+a\r\n        }else if(e>1)for(;n<e;++n)r+=\" \"+t[n]; else r=\"\"+r;\r\n        return r\r\n    },\r\n    //改变金钱的单位\r\n    changeMoney : function (money) {\r\n        //var rate=null,name = '',dict = G_Config_common.dict_moneyUnit;\r\n        //for(var rateLimit in dict){\r\n        //    if(num >= rateLimit){\r\n        //        rate = rateLimit;\r\n        //        name = dict[rateLimit];\r\n        //    }else break;\r\n        //}\r\n        //if(!rate) return num;\r\n        //var limitLen = 4;       //将金额的数值控制在4位数\r\n        //var value = parseFloat((num / rate).toFixed(3)).toString();\r\n        //var valueLen = value.length;\r\n        //if(valueLen >limitLen){\r\n        //    var pointIndex = value.indexOf('.');\r\n        //    if(pointIndex < 0){\r\n        //        //整数\r\n        //        value = value.substring(0,limitLen+1);\r\n        //    }else{\r\n        //        //有小数\r\n        //        if(pointIndex >= limitLen) value = value.substring(0,limitLen);\r\n        //        else value = value.substring(0,limitLen+1);\r\n        //    }\r\n        //}\r\n        //return value+name\r\n        var zeroCnt = 0, nega = \"\";//带多少个0，负数标志位\r\n        if (money < 0) {\r\n            money = -money;\r\n            nega = \"-\";\r\n        }\r\n        var tmp = money;\r\n        while ((tmp = tmp / 10) >= 1)zeroCnt++;\r\n        if (zeroCnt <= 3)return nega + money;\r\n        for (var i = 0, tmp = 1; i < zeroCnt - 3; i++) {\r\n            money /= 10;\r\n            tmp = tmp == 10000 ? 10 : tmp * 10;\r\n        }\r\n        return nega + (parseInt(money) / (10000 / tmp)) + (zeroCnt < 8 ? \"万\" : (zeroCnt < 12 ? \"亿\" : \"兆\"));\r\n    },\r\n    //千分符，千位加逗号\r\n    formatBy1000: function (money) {\r\n        return (\"\"+money).replace(/(\\d{1,3})(?=(\\d{3})+(?:$|\\D))/g,\"$1,\");\r\n    },\r\n    //获取当前的时间戳, 这种获取方式可以精确到毫秒\r\n    getTimeStamp : function () {\r\n        //var timestamp = Date.parse(new Date());  //精确到秒\r\n        return (new Date()).valueOf();\r\n    },\r\n\r\n    quickSort : function(array){\r\n        function sort(prev, numsize){\r\n            var nonius = prev;\r\n            var j = numsize -1;\r\n            var flag = array[prev];\r\n            if ((numsize - prev) > 1) {\r\n                while(nonius < j){\r\n                    for(; nonius < j; j--){\r\n                        if (array[j] < flag) {\r\n                            array[nonius++] = array[j];　//a[i] = a[j]; i += 1;\r\n                            break;\r\n                        };\r\n                    }\r\n                    for( ; nonius < j; nonius++){\r\n                        if (array[nonius] > flag){\r\n                            array[j--] = array[nonius];\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n                array[nonius] = flag;\r\n                sort(0, nonius);\r\n                sort(nonius + 1, numsize);\r\n            }\r\n        }\r\n        sort(0, array.length);\r\n        return array;\r\n    },\r\n    \r\n    //名字规范  name为传入的名字， len为需要留住的字符长度， isNot多出的字符用...表示（true表示要）\r\n    getNameLimit : function (name, len, isNot) {\r\n        var str,\r\n            maxNameLength;\r\n        len ? maxNameLength = len : maxNameLength = G_Config_common.num_maxNameLen;\r\n        var reg = /^[\\u4E00-\\u9FA5]+$/;\r\n        var wordsNum = 0;\r\n        var newStr = '';\r\n        for(var i =0; i < name.length; i ++){\r\n            if(wordsNum >= maxNameLength){\r\n                if (isNot) newStr = newStr;\r\n                else newStr += '...'\r\n                break;\r\n            }\r\n            str = name[i];\r\n            newStr += str;\r\n            if(reg.test(str)) {\r\n                wordsNum += 2;\r\n            } else {\r\n                wordsNum += 1;\r\n            }\r\n        }\r\n        return newStr\r\n    },\r\n    objectLog : function (object) {\r\n        var str = '{';\r\n        for(var attrName in object){\r\n            str += attrName+':'+object[attrName]+','\r\n        }\r\n        str += '}';\r\n    },\r\n    //适配初始节点大小\r\n    adaptSize : function (curW, curH) {\r\n        var designSize = cc.view.getDesignResolutionSize();\r\n        var rateW = cc.visibleRect.width/designSize.width;\r\n        var rateH = cc.visibleRect.height/designSize.height;\r\n        return {width:curW*rateW, height:curH*rateH}\r\n    },\r\n    //适配初始节点位置\r\n    adaptPos : function (pos) {\r\n        var designSize = cc.view.getDesignResolutionSize();\r\n        var rateW = cc.visibleRect.width/designSize.width;\r\n        var rateH = cc.visibleRect.height/designSize.height;\r\n        return cc.p(pos.x*rateW, pos.y*rateH)\r\n    },\r\n\r\n    //更新头像的显示,所有头像的更新都用这个接口\r\n    resetUrlImg : function (urlNode, newFrame) {\r\n        if(urlNode._firstSize === undefined) urlNode._firstSize = {width:urlNode.width,height:urlNode.height};\r\n        urlNode.getComponent(cc.Sprite).spriteFrame = newFrame;\r\n        urlNode.width = urlNode._firstSize.width;\r\n        urlNode.height = urlNode._firstSize.height;\r\n    },\r\n    //根据图片名字设置图片\r\n    setHeadImg : function (headNode, imgName) {\r\n        if(G_Config_common.isLocal){\r\n            this._headUrl = \"Heads/\"+'head01';\r\n            cc.loader.loadRes(this._headUrl, cc.SpriteFrame, function (err, spriteFrame) {\r\n                G_TOOL.resetUrlImg(headNode, spriteFrame);\r\n            });\r\n        }else{\r\n            if(headNode._firstFrame === undefined) headNode._firstFrame = headNode.getComponent(cc.Sprite).spriteFrame;\r\n            if(imgName) {\r\n                this._headUrl = G_DATA.getResNetRoot(imgName);\r\n                //this._headUrl = 'http://192.168.0.109:8080/classic/res/raw-assets/Texture/Common/head/head00.jpg';\r\n                \r\n                GG.resMgr.getHeadImg(this._headUrl, function (frame) {\r\n                    if(frame){\r\n                        G_TOOL.resetUrlImg(headNode, frame);\r\n                    }else {\r\n                        headNode.getComponent(cc.Sprite).spriteFrame = headNode._firstFrame;\r\n                    }\r\n                })\r\n                \r\n                // cc.loader.load(this._headUrl, function (err, texture) {\r\n                //     if(err){\r\n                //         console.log(err)\r\n                //         headNode.getComponent(cc.Sprite).spriteFrame = headNode._firstFrame;\r\n                //     }else{\r\n                //         if(texture){\r\n                //             var frame=new cc.SpriteFrame(texture);\r\n                //             G_TOOL.resetUrlImg(headNode, frame);\r\n                //         }else {\r\n                //             headNode.getComponent(cc.Sprite).spriteFrame = headNode._firstFrame;\r\n                //         }\r\n                //     }\r\n                // });\r\n            }\r\n        }\r\n    },\r\n\r\n    //获取匀速的时间\r\n    getUniformTime : function (startPos, targetPos, maxTime) {\r\n        var len = cc.pDistance(startPos, targetPos);\r\n        return maxTime * (len / cc.visibleRect.width)\r\n    },\r\n\r\n\r\n    // showTopTip : function (content) {\r\n    //     var canvas = cc.find('Canvas');\r\n    //     var tipNode = canvas.getChildByTag(99);\r\n    //     if(!tipNode){\r\n    //         tipNode = new cc.Node();\r\n    //         tipNode.addComponent(cc.Label);\r\n    //         canvas.addChild(tipNode, 1, 99);\r\n    //         tipNode.color = cc.Color.RED;\r\n    //     }\r\n    //     if(!tipNode._tip) tipNode._tip = '';\r\n    //     tipNode._tip += (content+'; ');\r\n    //     tipNode.getComponent(cc.Label).string = tipNode._tip;\r\n    // },\r\n}\r\n\r\nwindow.G_TOOL = tools;"]}
{"version":3,"sources":["assets\\Script\\Objects\\AutoDealing.js"],"names":["cc","Class","extends","Component","_list_registerBtn","properties","onLoad","registerButton","node","callBack","target","userData","isNoScale","_isTouchEnabledEx","push","on","Node","EventType","TOUCH_START","event","lastScale","scale","GG","audioMgr","playSound","TOUCH_END","call","TOUCH_CANCEL","setBtnEnable","isEnable","isNoGray","opacity","G_Config_common","btnGrayValue","btn","getComponent","Button","enabled","getIsBtnEnable","releaseButtonEvent","parm1","parm2","parm3","i","length","off","onDestroy"],"mappings":"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","file":"unknown","sourcesContent":["//简单基类，实现按钮的注册与释放\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n    _list_registerBtn : null,                   //注册事件的按钮集合\r\n    properties: {\r\n\r\n    },\r\n\r\n    // use this for initialization\r\n    onLoad: function () {\r\n\r\n    },\r\n\r\n    //注册按钮点击效果\r\n    registerButton : function (node, callBack, target, userData, isNoScale) {\r\n        if(!node) return;\r\n        if(!this._list_registerBtn) this._list_registerBtn = [];\r\n        node._isTouchEnabledEx = true;\r\n        this._list_registerBtn.push([node, callBack, target]);\r\n        node.on(cc.Node.EventType.TOUCH_START, function (event) {\r\n            //if(event.target._isTouchEnabledEx) event.target.scale = G_Config_classic.scale_buttonTouch;\r\n            if(event.target._isTouchEnabledEx) {\r\n                if(!isNoScale){\r\n                    if(!event.target.lastScale) event.target.lastScale = event.target.scale;\r\n                    event.target.scale = event.target.lastScale * 0.9;\r\n                }\r\n                GG.audioMgr.playSound(17);\r\n            }\r\n        }, target);\r\n        node.on(cc.Node.EventType.TOUCH_END, function (event) {\r\n            if(event.target.lastScale) event.target.scale = event.target.lastScale\r\n            if(event.target._isTouchEnabledEx) callBack.call(target, event, userData);\r\n        }, target);\r\n        node.on(cc.Node.EventType.TOUCH_CANCEL, function (event) {\r\n            if(event.target.lastScale) event.target.scale = event.target.lastScale\r\n        }, target);\r\n    },\r\n    //设置按钮是否可用\r\n    setBtnEnable : function (node, isEnable, isNoGray) {\r\n        if(isEnable){\r\n            node.opacity = 255;\r\n        }else{\r\n            if(!isNoGray) node.opacity = 255 * G_Config_common.btnGrayValue;\r\n        }\r\n        var btn = node.getComponent(cc.Button);\r\n        if(btn)btn.enabled = isEnable;\r\n        node._isTouchEnabledEx = isEnable;\r\n    },\r\n\r\n    //获取是否可用\r\n    getIsBtnEnable : function (node) {\r\n        return node._isTouchEnabledEx\r\n    },\r\n\r\n    //释放事件,这里注册的才能在这里释放\r\n    releaseButtonEvent : function () {\r\n        if(!this._list_registerBtn) return;\r\n        var parm1,parm2,parm3;\r\n        for(var i = 0; i < this._list_registerBtn.length; i ++){\r\n            parm1 = this._list_registerBtn[i][0];\r\n            parm2 = this._list_registerBtn[i][1];\r\n            parm3 = this._list_registerBtn[i][2];\r\n            parm1.off(cc.Node.EventType.TOUCH_START, parm2, parm3);\r\n            parm1.off(cc.Node.EventType.TOUCH_END, parm2, parm3);\r\n            parm1.off(cc.Node.EventType.TOUCH_CANCEL, parm2, parm3);\r\n        }\r\n        this._list_registerBtn = null;\r\n    },\r\n\r\n    onDestroy : function () {\r\n        this.releaseButtonEvent();\r\n    },\r\n\r\n    // called every frame, uncomment this function to activate update callback\r\n    // update: function (dt) {\r\n\r\n    // },\r\n});\r\n"]}
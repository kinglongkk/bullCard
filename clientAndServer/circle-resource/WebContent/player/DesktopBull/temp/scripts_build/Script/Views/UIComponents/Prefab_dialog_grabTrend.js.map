{"version":3,"sources":["assets\\Script\\Views\\UIComponents\\Prefab_dialog_grabTrend.js"],"names":["cc","Class","extends","require","properties","_resultDict","_oneResultDict","_loseColor","_bullResult","_bullValue","node_data","default","type","Node","displayName","node_noData","node_trendBG","onLoad","_super","_pokerCompName","_pokerResultCompName","_pokerContainerName","_pokerResultNodeName","Color","_winColor","_notMatchColor","color","active","_winPokerOff","G_Config_grab","num_winPokerOff","setData","homeID","dataList","G_Config_common","isLocal","code","data","client","profitamount","showLayer","_showList","sendObj","gameModelId","G_TYPE","http_gameModule","grab","gameRoomId","_sendRequest","dataObj","bind","callFunc","sendData","GG","httpMgr","sendHttpRequest","G_DIALOG_URL","trendUrl","getComponent","Label","string","msg","pokerList","children","pokerData","i","length","_setPokerGroupInfo","_setWinOrLose","parseInt","groupInfoList","pokerNodeList","pokerIndex","pokerInfo","JSON","parse","G_DATA","getPokerInfo","push","flow","pokerType","pokerValue","_refreshPokerGroundInfo","pokerNode","bullValue","bullResult","pokerContainer","getChildByName","resultNode","setPokerInfo","showPokerResultValue","winOrLose","node","labelText","labelColor","_winOrLoseLabel","_winOrLoseNode","G_CHINESE","winMatch","loseMatch","notInvolvedMatch"],"mappings":"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","file":"unknown","sourcesContent":["//押宝走势图窗体\r\ncc.Class({\r\n    extends: require('BaseDialog'),\r\n\r\n    properties: {\r\n        _resultDict: null,\r\n        _oneResultDict: null,\r\n        _loseColor: null,\r\n        _bullResult: null,\r\n        _bullValue: null,\r\n        node_data:{\r\n            default:null,\r\n            type:cc.Node,\r\n            displayName:'走势图数据节点'\r\n        },\r\n        node_noData:{\r\n            default:null,\r\n            type:cc.Node,\r\n            displayName:'无走势记录时显示节点'\r\n        },\r\n        node_trendBG: {\r\n            default:null,\r\n            type:cc.Node,\r\n            displayName:'无走势记录时背景节点'\r\n        },\r\n    },\r\n\r\n    // use this for initialization\r\n    onLoad: function () {\r\n        this._super();\r\n        this._pokerCompName = 'Obj_poker';\r\n        this._pokerResultCompName = 'Obj_onPokerResult';\r\n        this._pokerContainerName = 'pokerContainer';\r\n        this._pokerResultNodeName = 'Prefab_PokerResult';\r\n        this._resultDict = {};\r\n        this._oneResultDict = {};\r\n        this._loseColor = new cc.Color(253, 41, 31);//失败的颜色\r\n        this._winColor = new cc.Color(155, 176, 235);//胜利的颜色\r\n        this._notMatchColor = this.node_data.color;\r\n        this.node_noData.active = false;\r\n        this._winPokerOff = G_Config_grab.num_winPokerOff;\r\n        this._bullResult = 0;\r\n        this._bullValue = 0;\r\n\r\n    },\r\n\r\n    setData: function (homeID) {\r\n        var dataList;\r\n        if (G_Config_common.isLocal) {\r\n            dataList = {\r\n                code: 1,\r\n                data: [\r\n                    {\r\n                        client: '[29, 30, 11, 17, 2]',\r\n                        profitamount: 1\r\n                    },\r\n                    {\r\n                        client: '[27, 13, 45, 30, 26]',\r\n                        profitamount:-1\r\n                    },\r\n                    {\r\n                        client: '[48, 51, 40, 15, 10]',\r\n                    },\r\n                    {\r\n                        client: '[48, 51, 40, 15, 10]',\r\n                    },\r\n                    {\r\n                        client: '[48, 51, 40, 15, 10]',\r\n                    },\r\n                    {\r\n                        client: '[48, 51, 40, 15, 10]',\r\n                    },\r\n                ],\r\n            };\r\n            this.showLayer();\r\n            this._showList(dataList);\r\n        } else {\r\n            var sendObj = {\r\n                gameModelId: G_TYPE.http_gameModule.grab,\r\n                gameRoomId: homeID,\r\n            };\r\n            this._sendRequest(sendObj, function (dataObj) {\r\n                if(dataObj){\r\n                    this.showLayer();\r\n                    this._showList(dataObj);\r\n                }\r\n            }.bind(this));\r\n        }\r\n    },\r\n\r\n    //发送押宝走势图信息的请求\r\n    _sendRequest : function (dataObj, callFunc) {\r\n        var sendData = 'gameModelId=' + dataObj.gameModelId + '&gameRoomId=' + dataObj.gameRoomId;\r\n        GG.httpMgr.sendHttpRequest(G_DIALOG_URL.trendUrl, sendData, function (data) {\r\n            if(data){\r\n                if (callFunc) callFunc(data);\r\n            }\r\n        }.bind(this));\r\n    },\r\n\r\n\r\n    _showList: function (data) {\r\n        if (data.code == 0) {\r\n            this.node_noData.getComponent(cc.Label).string = data.msg;\r\n            this.node_noData.active = true;\r\n            this.node_data.active = false;\r\n        } else {\r\n            var dataList = data.data;\r\n            this.node_noData.active = false;\r\n            this.node_data.active = true;\r\n\r\n            //刷新牌型数据信息\r\n            var pokerList = this.node_data.children;\r\n            var pokerData;\r\n            for(var i = 0; i < pokerList.length; i ++){\r\n                pokerData = dataList[i];\r\n                if(pokerData){\r\n                    pokerList[i].active = true;\r\n                    //牌型牛几显示\r\n                    this._setPokerGroupInfo(pokerData.client, pokerList[i]);\r\n                    //胜负显示\r\n                    this._setWinOrLose(parseInt(pokerData.profitamount), pokerList[i]);\r\n                }else{\r\n                    pokerList[i].active = false;\r\n                }\r\n            }\r\n        }\r\n    },\r\n    //显示一副新卡牌信息\r\n    _setPokerGroupInfo : function (groupInfoList, pokerNodeList) {\r\n        var pokerIndex, pokerInfo, pokerList = [];\r\n        groupInfoList = JSON.parse(groupInfoList);\r\n        for(var i = 0; i < groupInfoList.length; i ++){\r\n            pokerIndex = groupInfoList[i];\r\n            pokerInfo = G_DATA.getPokerInfo(pokerIndex);\r\n            pokerList.push({flow: pokerInfo.pokerType, pokerValue: pokerInfo.pokerValue});\r\n            if (i < 3) {\r\n                if (pokerInfo.pokerValue > 10) pokerInfo.pokerValue = 10;\r\n                this._bullResult += pokerInfo.pokerValue;\r\n            }\r\n            if (i == 3) {\r\n                if (pokerInfo.pokerValue > 10) pokerInfo.pokerValue = 10;\r\n                this._bullValue = pokerInfo.pokerValue;\r\n            }\r\n            if (i == 4) {\r\n                if (pokerInfo.pokerValue > 10) pokerInfo.pokerValue = 10;\r\n                this._bullValue += pokerInfo.pokerValue;\r\n            }\r\n        }\r\n        this._refreshPokerGroundInfo(pokerList, pokerNodeList);\r\n    },\r\n    //刷新一副卡牌信息\r\n    _refreshPokerGroundInfo: function (pokerList, pokerNodeList) {\r\n        var pokerNode,\r\n            bullValue = this._bullValue,\r\n            bullResult = parseInt(this._bullResult),\r\n            pokerContainer = pokerNodeList.getChildByName(this._pokerContainerName),\r\n            resultNode = pokerNodeList.getChildByName(this._pokerResultNodeName);\r\n        for(var i = 0; i < pokerList.length + 1; i ++){\r\n            if (i < 5 && pokerContainer) {\r\n                //刷新卡牌信息\r\n                pokerNode = pokerContainer.children[i];\r\n                pokerNode.getComponent(this._pokerCompName).setPokerInfo(pokerList[i].flow, pokerList[i].pokerValue, true);\r\n            }else if (i == 5 && resultNode) {\r\n                //显示牛几信息\r\n                if (bullResult % 10 == 0) {\r\n                    bullValue = this._bullValue % 10;\r\n                    if (bullValue == 0) bullValue = 10;\r\n                } else bullValue = -1;\r\n                resultNode.getComponent(this._pokerResultCompName).showPokerResultValue(parseInt(bullValue), true);\r\n            }\r\n        }\r\n        this._bullValue = 0;\r\n        this._bullResult = 0;\r\n    },\r\n    //显示胜负信息\r\n    _setWinOrLose: function (winOrLose, node) {\r\n        var labelText, labelColor, resultNode = node.getChildByName('resultText');\r\n        if(!resultNode) return;\r\n        this._winOrLoseLabel = resultNode.getComponent(cc.Label);\r\n        this._winOrLoseNode = resultNode;\r\n        if (winOrLose) {//大于0 显示胜；小于0显示负\r\n            if (winOrLose > 0) {\r\n                labelText = G_CHINESE.winMatch;\r\n                labelColor = this._winColor;\r\n            } else {\r\n                labelText = G_CHINESE.loseMatch;\r\n                labelColor = this._loseColor;\r\n            }\r\n        } else {\r\n            labelText = G_CHINESE.notInvolvedMatch;//显示未参与\r\n            labelColor = this._notMatchColor;\r\n        }\r\n        this._winOrLoseLabel.string = labelText;\r\n        this._winOrLoseNode.color = labelColor;\r\n    },\r\n    // called every frame, uncomment this function to activate update callback\r\n    // update: function (dt) {\r\n\r\n    // },\r\n});\r\n"]}
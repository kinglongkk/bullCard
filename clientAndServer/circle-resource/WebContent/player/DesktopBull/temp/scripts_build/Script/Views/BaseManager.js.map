{"version":3,"sources":["assets\\Script\\Views\\BaseManager.js"],"names":["cc","Class","extends","Component","properties","_isADLimit","onLoad","GG","webHandler","adaptSceneSize","curMgr","addLongListen","setIsLoading","updateEnterHomeData","recvData","_enterHomeData","match","beginTimeNext","_isPauseOverMatch","seats","dealer","settleTime","poker","refreshHome","G_Config_common","isLocal","net_setHomeData","whenPauseGame","whenResumeGame","comp_uiLayer","closeAllUI","setBettingEndInfo","checkMyselfInfo","info","length","tipsMgr","showConfirmTip_ONE","G_CHINESE","noMyself","exitGame","bind","setAdLimit","isLimit","getAdIsLimit","socketMgr","registerLong","NetType","r_passiveOut","net_passiveOut","r_tips","net_tipData","r_getAnnouncement","net_getAnnouncement","r_idleTimeOut","net_idleTimeOut","code","G_TYPE","serverCodeType","needLogin","tip","loginSocket","getIsConnected","exitHome","setTimeOutLimit","success","addNotice","content","onDestroy","cancelAllLongListen"],"mappings":"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","file":"unknown","sourcesContent":["//管理器的父类\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        _isADLimit : null,                  //是否限制公告的播放\r\n    },\r\n\r\n    // use this for initialization\r\n    onLoad: function () {\r\n        GG.webHandler.adaptSceneSize();\r\n        GG.curMgr = this;\r\n        this.addLongListen();\r\n        GG.setIsLoading(false);\r\n\r\n        this._isADLimit = null;\r\n    },\r\n\r\n    //在游戏暂停的时候，还需要持续更新进房信息\r\n    updateEnterHomeData : function (recvData) {\r\n        if(!this._enterHomeData) return;\r\n        if(this._enterHomeData.match.beginTimeNext != recvData.match.beginTimeNext){\r\n            //进入到下一局比赛\r\n            this._isPauseOverMatch = true;\r\n        }\r\n        this._enterHomeData.seats = recvData.seats;\r\n        this._enterHomeData.match.dealer = recvData.match.dealer;\r\n        this._enterHomeData.match.beginTimeNext = recvData.match.beginTimeNext;\r\n        this._enterHomeData.match.settleTime = recvData.match.settleTime;\r\n        if(recvData.poker) this._enterHomeData.poker = recvData.poker;\r\n    },\r\n    //使用最新的进房信息刷新页面\r\n    refreshHome : function () {\r\n        if(G_Config_common.isLocal) return;\r\n        if(this.net_setHomeData && this._enterHomeData) this.net_setHomeData(this._enterHomeData);\r\n    },\r\n    //当暂停的时候触发该函数\r\n    whenPauseGame : function () {\r\n        this._isPauseOverMatch = false;\r\n    },\r\n    //当恢复游戏的时候触发该函数\r\n    whenResumeGame : function () {\r\n        if(this.comp_uiLayer){\r\n            this.comp_uiLayer.closeAllUI();\r\n        }\r\n    },\r\n    //设置结算信息的数据\r\n    setBettingEndInfo : function (recvData) {\r\n\r\n    },\r\n\r\n    //每局开局，效验玩家自己的数据是否正常\r\n    checkMyselfInfo : function (info) {\r\n        if(!info || info.length < 1) {\r\n            GG.tipsMgr.showConfirmTip_ONE(G_CHINESE.noMyself, function () {\r\n                GG.exitGame();\r\n            }.bind(this));\r\n            return false\r\n        }else return true\r\n    },\r\n    \r\n    setAdLimit : function (isLimit) {\r\n        this._isADLimit = isLimit;\r\n    },\r\n\r\n    getAdIsLimit : function () {\r\n        return this._isADLimit\r\n    },\r\n\r\n    //=========================================\r\n\r\n    //添加长监听\r\n    addLongListen : function(){\r\n        //异地登陆\r\n        GG.socketMgr.registerLong(NetType.r_passiveOut, this.net_passiveOut.bind(this));\r\n        //单独的tip\r\n        GG.socketMgr.registerLong(NetType.r_tips, this.net_tipData.bind(this));\r\n        //跑马灯\r\n        GG.socketMgr.registerLong(NetType.r_getAnnouncement, this.net_getAnnouncement.bind(this));\r\n        //游戲长时间没有操作\r\n        GG.socketMgr.registerLong(NetType.r_idleTimeOut, this.net_idleTimeOut.bind(this));\r\n    },\r\n    //tip 单独发送过来的事件\r\n    net_tipData : function (recvData) {\r\n        //未登陆，请登陆\r\n        if(recvData.code == G_TYPE.serverCodeType.needLogin){\r\n            GG.tipsMgr.showConfirmTip_ONE(recvData.tip, function () {\r\n                GG.loginSocket(function () {\r\n                    if(GG.socketMgr.getIsConnected()){\r\n                        GG.exitHome();\r\n                    }else{\r\n                        GG.exitGame();\r\n                    }\r\n                });\r\n            }.bind(this));\r\n        }\r\n    },\r\n    //异地登陆\r\n    net_passiveOut : function (recvData) {\r\n        GG.socketMgr.setTimeOutLimit(true);\r\n        GG.tipsMgr.showConfirmTip_ONE(recvData.tip.tip, function () {\r\n            GG.exitGame();\r\n        }.bind(this));\r\n    },\r\n    //有公告\r\n    net_getAnnouncement : function (recvData) {\r\n        var tip = recvData.tip;\r\n        if(tip.code != G_TYPE.serverCodeType.success) {\r\n            // console.log(tip.tip);\r\n            return;\r\n        }\r\n\r\n        //recvData.announcementType\r\n        //recvData.title\r\n        //recvData.content\r\n        if(this._isADLimit) return;\r\n        GG.tipsMgr.addNotice(recvData.content);\r\n    },\r\n    //百人——游戏中长时间没有做操作\r\n    net_idleTimeOut : function (recvData) {\r\n\r\n        GG.tipsMgr.showConfirmTip_ONE(recvData.tip.tip, function () {\r\n            GG.exitHome();\r\n        }.bind(this));\r\n    },\r\n\r\n    onDestroy : function () {\r\n        GG.socketMgr.cancelAllLongListen();\r\n    },\r\n\r\n    // called every frame, uncomment this function to activate update callback\r\n    // update: function (dt) {\r\n\r\n    // },\r\n});\r\n"]}
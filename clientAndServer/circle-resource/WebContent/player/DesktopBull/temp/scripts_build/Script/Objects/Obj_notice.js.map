{"version":3,"sources":["assets\\Script\\Objects\\Obj_notice.js"],"names":["cc","Class","extends","Component","_moveSpeed","_isMove","_list_msg","_firstPosX","properties","node_view","Node","node_content","onLoad","_initConfigData","_curLabelNode","children","_curLabel1","getComponent","RichText","x","width","_endPosX","G_Config_common","notice_speed","hideNotice","node","active","addMsg","msg","_resetShowContent","string","_restartLabel","update","dt"],"mappings":";;;;;;AAAA;;;AAGAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;AAELC,gBAAa,IAFR,EAEmD;AACxDC,aAAU,IAHL,EAGmD;AACxDC,eAAY,IAJP,EAImD;AACxDC,gBAAa,IALR,EAKoD;AACzDC,gBAAY;AACRC,mBAAYT,GAAGU,IADP,EAC4C;AACpDC,sBAAeX,GAAGU,IAFV,EANP;;AAcL;AACAE,YAAQ,kBAAY;AAChB,aAAKC,eAAL;AACH,KAjBI;;AAmBL;AACAA,qBAAkB,2BAAY;AAC1B,aAAKC,aAAL,GAAqB,KAAKH,YAAL,CAAkBI,QAAlB,CAA2B,CAA3B,CAArB;AACA,aAAKC,UAAL,GAAkB,KAAKF,aAAL,CAAmBG,YAAnB,CAAgCjB,GAAGkB,QAAnC,CAAlB;AACA,aAAKX,UAAL,GAAkB,KAAKO,aAAL,CAAmBK,CAAnB,GAAqB,KAAKV,SAAL,CAAeW,KAAf,GAAqB,IAA5D;AACA,aAAKC,QAAL,GAAgB,KAAKP,aAAL,CAAmBK,CAAnB,GAAuB,KAAKV,SAAL,CAAeW,KAAf,GAAqB,CAA5D;;AAEA,aAAKf,OAAL,GAAe,KAAf;AACA,aAAKD,UAAL,GAAkBkB,gBAAgBC,YAAlC;AACA;AACA;AACA,aAAKjB,SAAL,GAAiB,EAAjB;AACH,KA/BI;;AAiCL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACAkB,gBAAa,sBAAY;AACrB,aAAKnB,OAAL,GAAe,KAAf;AACA,aAAKoB,IAAL,CAAUC,MAAV,GAAmB,KAAnB;AACH,KA7CI;;AA+CL;AACAC,YAAS,gBAAUC,GAAV,EAAe;AACpB,aAAKC,iBAAL,CAAuBD,GAAvB;AACA;AACH,KAnDI;;AAqDL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAIA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACAC,uBAAoB,2BAAUD,GAAV,EAAe;AAC/B,aAAKH,IAAL,CAAUC,MAAV,GAAmB,IAAnB;AACA,aAAKrB,OAAL,GAAc,IAAd;AACA,aAAKW,UAAL,CAAgBc,MAAhB,GAAyBF,GAAzB;AACA,aAAKG,aAAL;AACH,KA3FI;;AA6FL;AACAA,mBAAgB,yBAAY;AACxB,aAAKjB,aAAL,CAAmBK,CAAnB,GAAuB,KAAKZ,UAA5B;AACA;AACA,aAAKF,OAAL,GAAe,IAAf;AACH,KAlGI;;AAoGL;AACC2B,YAAQ,gBAAUC,EAAV,EAAc;AAClB,YAAG,KAAK5B,OAAR,EAAgB;AACZ,iBAAKS,aAAL,CAAmBK,CAAnB,IAAwBc,KAAK,KAAK7B,UAAlC;AACA,gBAAG,KAAKU,aAAL,CAAmBK,CAAnB,IAAwB,KAAKE,QAAhC,EAAyC;AACrC,qBAAKhB,OAAL,GAAe,KAAf;AACA,qBAAKoB,IAAL,CAAUC,MAAV,GAAmB,KAAnB;AACH;AACD;AACA;AACA;AACH;AACJ;AAhHG,CAAT","file":"unknown","sourcesContent":["//跑马灯，公告\r\n\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n    _moveSpeed : null,                                      //每秒移动的速度\r\n    _isMove : null,                                         //是否移动\r\n    _list_msg : null,                                       //显示消息的队列\r\n    _firstPosX : null,                                       //通知出现的初始位置\r\n    properties: {\r\n        node_view : cc.Node,                                //显示节点\r\n        node_content : cc.Node,                             //滚动节点\r\n        // node_wifi1 : cc.Node,                               //wifi1\r\n        // node_wifi2 : cc.Node,                               //wifi2\r\n        // node_wifi3 : cc.Node,                               //wifi3\r\n    },\r\n\r\n    // use this for initialization\r\n    onLoad: function () {\r\n        this._initConfigData();\r\n    },\r\n\r\n    //设置公告运行属性\r\n    _initConfigData : function () {\r\n        this._curLabelNode = this.node_content.children[0];\r\n        this._curLabel1 = this._curLabelNode.getComponent(cc.RichText);\r\n        this._firstPosX = this._curLabelNode.x+this.node_view.width*0.75;\r\n        this._endPosX = this._curLabelNode.x - this.node_view.width*2;\r\n\r\n        this._isMove = false;\r\n        this._moveSpeed = G_Config_common.notice_speed;\r\n        // this._runTime = 0;\r\n        // this._interval_next = G_Config_common.notice_showTime;\r\n        this._list_msg = [];\r\n    },\r\n\r\n    ////开启wifi实时监听\r\n    //openWifiAni : function () {\r\n    //\r\n    //},\r\n    ////关闭wifi监听\r\n    //closeWifiAni : function () {\r\n    //\r\n    //},\r\n    //隐藏公告\r\n    hideNotice : function () {\r\n        this._isMove = false;\r\n        this.node.active = false;\r\n    },\r\n\r\n    //增加准备显示的公告消息\r\n    addMsg : function (msg) {\r\n        this._resetShowContent(msg);\r\n        //msg = \"<color=#00ff00>Ric111111</c><color=#0fffff>Text</color>12132132132131313213213213211\";\r\n    },\r\n\r\n    ////增加优先显示的消息(当前显示结束后显示)\r\n    //addHeightPriorityMsg : function (msg) {\r\n    //    if(!this._list_msg) this._resetData();\r\n    //    this._list_msg.splice(0,0,msg);\r\n    //    this._setNextMsg();\r\n    //},\r\n    //\r\n    ////直接显示的消息(将会替换掉当前的消息)\r\n    //addFirstMsg : function (msg) {\r\n    //    if(!this._list_msg) this._resetData();\r\n    //    this._curLabel1.string = msg;\r\n    //    this._restartLabel();\r\n    //},\r\n\r\n\r\n\r\n    //===========================================\r\n\r\n    //下一条公告\r\n    //_setNextMsg : function () {\r\n    //    if(this._isMove) return;\r\n    //\r\n    //    if(this._list_msg.length > 0){\r\n    //        this.node.active = true;\r\n    //        var msg = this._list_msg[0];\r\n    //        this._list_msg.splice(0, 1);\r\n    //\r\n    //        this._curLabel1.string = msg;\r\n    //        this._restartLabel();\r\n    //    }else this.node.active = false;\r\n    //},\r\n\r\n    //重新设置内容\r\n    _resetShowContent : function (msg) {\r\n        this.node.active = true;\r\n        this._isMove= true;\r\n        this._curLabel1.string = msg;\r\n        this._restartLabel();\r\n    },\r\n\r\n    //重新开始移动label\r\n    _restartLabel : function () {\r\n        this._curLabelNode.x = this._firstPosX;\r\n        // this._runTime = 0;\r\n        this._isMove = true;\r\n    },\r\n\r\n    // called every frame, uncomment this function to activate update callback\r\n     update: function (dt) {\r\n         if(this._isMove){\r\n             this._curLabelNode.x -= dt * this._moveSpeed;\r\n             if(this._curLabelNode.x <= this._endPosX){\r\n                 this._isMove = false;\r\n                 this.node.active = false;\r\n             }\r\n             // if(this._runTime >= this._interval_next){\r\n             //\r\n             // }else this._runTime += dt;\r\n         }\r\n     },\r\n});\r\n"]}
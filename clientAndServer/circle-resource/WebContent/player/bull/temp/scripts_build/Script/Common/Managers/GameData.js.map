{"version":3,"sources":["assets\\Script\\Common\\Managers\\GameData.js"],"names":["gameData","_curHash","getChinese","keyID","table","GG","tableMgr","getTable","G_RES_URL","dict_tablesName","chinese","getDataByID","getBottomTipPos","designSize","cc","view","getDesignResolutionSize","p","width","height","getTopTipPos","getCenterTipPos","getPokerInfo","index","pokerValue","pokerType","getResNetRoot","resUrl","G_Config_common","isLocal","url","getLocalHref","pointIndex","lastIndexOf","substring","resRoot","window","location","href","getIdlePlayersSeatIndex","getDealerSeatIndex","getSceneName","sceneType","sceneName","parseInt","G_TYPE","gameModule","bull100","classic","grab","getOS","sys","os","OS_ANDROID","OS_IOS","getBrowserType","browserType","BROWSER_TYPE_QQ","BROWSER_TYPE_SAFARI","BROWSER_TYPE_ANDROID","getEnterHomeModel","enterType","gameType","net_gameModule","getIsWinXin","ua","navigator","userAgent","toLowerCase","match","isNumber","data","Boolean","Object","prototype","toString","call","getLastSceneHash","isNative","hashData","_getCookie","roomId","strList","split","setCurSceneHash","_setCookie","name","value","document","cookie","encodeURI","arr","reg","RegExp","encodeURIComponent","setRichData","_richData","key","setGainsData","_gainsData","getRichData","_richRankData","code","i","push","nickname","walletbalance","avatarurl","getGainsData","_gainsRankData","getRoomListJson","callFunc","_roomListJson","self","loader","load","G_DATA","err"],"mappings":"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","file":"unknown","sourcesContent":["/**\r\n * Created by lenovo on 2016/12/30.\r\n */\r\n\r\n//游戏数据的剪接获取方式\r\nvar gameData = {\r\n    _curHash : null,//记录刷新页面前的场景\r\n    //tableData\r\n    getChinese : function (keyID) {\r\n        var table = GG.tableMgr.getTable(G_RES_URL.dict_tablesName.chinese);\r\n        if(!table) return null;\r\n        return table.getDataByID(keyID);\r\n    },\r\n    getBottomTipPos : function () {\r\n        var designSize = cc.view.getDesignResolutionSize();\r\n        return cc.p(designSize.width*0.5, designSize.height*0.17)\r\n    },\r\n    getTopTipPos : function () {\r\n        var designSize = cc.view.getDesignResolutionSize();\r\n        return cc.p(designSize.width*0.5, designSize.height*0.8)\r\n    },\r\n    getCenterTipPos : function () {\r\n        var designSize = cc.view.getDesignResolutionSize();\r\n        return cc.p(designSize.width*0.5, designSize.height*0.55)\r\n    },\r\n    //根据索引获取卡牌的值和类型\r\n    getPokerInfo : function (index) {\r\n        this.pokerValue = (index>>2)+1; //1-13对应A到K\r\n        this.pokerType = 4-(index&3);//1-4对应黑桃，红桃，梅花，方块\r\n        return this\r\n    },\r\n\r\n    //获取图片请求接口路径\r\n    getResNetRoot : function (resUrl) {\r\n        //return 'http://192.168.0.109:8080/static/'+resUrl\r\n        if(G_Config_common.isLocal){\r\n            var url = this.getLocalHref();\r\n            var pointIndex = url.lastIndexOf(':');\r\n            url = url.substring(0, pointIndex+5);\r\n            url+='/static/';\r\n            return url+resUrl\r\n        }else return resRoot+'/'+resUrl\r\n    },\r\n    getLocalHref : function () {\r\n        if(window.location){\r\n            return window.location.href;\r\n        }else return 'http://192.168.0.109:8080'\r\n    },\r\n    //获取吃瓜群众的座位ID\r\n    getIdlePlayersSeatIndex : function () {\r\n        return -2\r\n    },\r\n    //获取庄家的座位标号\r\n    getDealerSeatIndex : function () {\r\n        return -1\r\n    },\r\n    //获取场景的名字\r\n    getSceneName : function (sceneType) {\r\n        var sceneName;\r\n        switch (parseInt(sceneType)){\r\n            case G_TYPE.gameModule.bull100:\r\n                sceneName = 'Poker_Bull100';\r\n                break\r\n            case G_TYPE.gameModule.classic:\r\n                sceneName = 'Poker_classic';\r\n                break\r\n            case G_TYPE.gameModule.grab:\r\n                sceneName = 'Poker_Grab';\r\n                break\r\n            default:\r\n                break\r\n        }\r\n        return sceneName\r\n    },\r\n\r\n    //获取游戏所处的平台\r\n    getOS : function () {\r\n        switch (cc.sys.os){\r\n            case cc.sys.OS_ANDROID:\r\n                break\r\n            case cc.sys.OS_IOS:\r\n                break\r\n            default:\r\n                break\r\n        }\r\n        return cc.sys.os\r\n    },\r\n    //获取浏览器类型\r\n    getBrowserType : function () {\r\n        switch (cc.sys.browserType){\r\n            case cc.sys.BROWSER_TYPE_QQ:\r\n                break\r\n            case cc.sys.BROWSER_TYPE_SAFARI:\r\n                break\r\n            case cc.sys.BROWSER_TYPE_ANDROID:\r\n                break\r\n            default:\r\n                break\r\n        }\r\n        return cc.sys.browserType\r\n    },\r\n\r\n    //根据进房类型获取进游戏房时候需要的请求类型\r\n    getEnterHomeModel : function (enterType) {\r\n        var gameType;\r\n        switch (parseInt(enterType)){\r\n            case G_TYPE.gameModule.bull100:\r\n                gameType = G_TYPE.net_gameModule.bull100;\r\n                break\r\n            case G_TYPE.gameModule.grab:\r\n                gameType = G_TYPE.net_gameModule.grab;\r\n                break\r\n            case G_TYPE.gameModule.classic:\r\n                gameType = G_TYPE.net_gameModule.classic;\r\n                break\r\n            default:\r\n                break\r\n        }\r\n        return gameType\r\n    },\r\n\r\n    //判定是否是微信浏览器\r\n    getIsWinXin : function () {\r\n        var ua = window.navigator.userAgent.toLowerCase();\r\n        if(ua.match(/MicroMessenger/i) == 'micromessenger'){\r\n            return true;\r\n        }else{\r\n            return false;\r\n        }\r\n    },\r\n\r\n    isNumber : function (data) {\r\n        return Boolean(Object.prototype.toString.call(data)==='[object Number]')\r\n    },\r\n\r\n    //=========================  cookie name = poker_roomInfo\r\n\r\n    //获取上次登陆的场景\r\n    getLastSceneHash : function () {\r\n        if(cc.sys.isNative){\r\n            return null;\r\n        }\r\n        var hashData = this._getCookie('poker_roomInfo');\r\n        // var hashData = document.cookie;\r\n        if(!hashData) return null;\r\n        var data = {\r\n            enterType : null,\r\n            roomId : null\r\n        }\r\n        var strList = hashData.split('-');\r\n        var enterType = strList[0];\r\n        if(!enterType) return null;\r\n        data.enterType = enterType;\r\n        data.roomId = parseInt(strList[1]);\r\n        return data\r\n    },\r\n    //设置当前的场景\r\n    setCurSceneHash : function (enterType, roomId) {\r\n        if(cc.sys.isNative){\r\n            return;\r\n        }\r\n        this._setCookie('poker_roomInfo', enterType+\"-\"+roomId);\r\n    },\r\n    _setCookie : function(name,value) {\r\n        // var Days = 0.5;\r\n        // var exp = new Date();\r\n        // exp.setTime(exp.getTime() + Days*24*60*60*1000);\r\n        // document.cookie = name + \"=\"+ encodeURI (value) + \";expires=\" + exp.toGMTString();\r\n        document.cookie = name + \"=\"+ encodeURI (value) + \";\"\r\n    },\r\n    _getCookie : function(name) {\r\n        var arr,reg=new RegExp(\"(^| )\"+name+\"=([^;]*)(;|$)\");\r\n        if(arr=document.cookie.match(reg))\r\n            return encodeURIComponent(arr[2]);\r\n        else\r\n            return null;\r\n    },\r\n\r\n    //============================\r\n\r\n    //设置富豪榜\r\n    setRichData : function (data) {\r\n        this._richData = {};\r\n        for(var key in data){\r\n            this._richData[key] = data[key];\r\n        }\r\n    },\r\n    //设置盈利榜单\r\n    setGainsData : function (data) {\r\n        this._gainsData = {};\r\n        for(var key in data){\r\n            this._gainsData[key] = data[key];\r\n        }\r\n    },\r\n    //获取富豪榜\r\n    getRichData : function () {\r\n        if(G_Config_common.isLocal){\r\n            var _richRankData = {};\r\n            _richRankData.code = 1;\r\n            _richRankData.data = [];\r\n            for(var i = 0; i < 3; i ++){\r\n                _richRankData.data.push({\r\n                    nickname:'997_'+i,\r\n                    walletbalance:667,\r\n                    avatarurl:'',\r\n                });\r\n            }\r\n            return _richRankData\r\n        }else return this._richData\r\n    },\r\n    //获取盈利榜单\r\n    getGainsData : function () {\r\n        if(G_Config_common.isLocal){\r\n            var _gainsRankData = {};\r\n            _gainsRankData.code = 1;\r\n            _gainsRankData.data = [];\r\n            for(var i = 0; i < 20; i ++){\r\n                _gainsRankData.data.push({\r\n                    nickname:'1111',\r\n                    walletbalance:3333,\r\n                    avatarurl:'',\r\n                });\r\n            }\r\n            return _gainsRankData\r\n        }else return this._gainsData\r\n    },\r\n    //======================\r\n\r\n    //获取房间列表的json配置\r\n    getRoomListJson : function (callFunc) {\r\n        if(!this._roomListJson){\r\n            var self = this;\r\n            self._roomListJson = null;\r\n            cc.loader.load(G_DATA.getResNetRoot('config/room.data.json'), function(err, data) {\r\n                if(err){\r\n\r\n                }else{\r\n                    self._roomListJson = data;\r\n                }\r\n                if(callFunc){\r\n                    callFunc(self._roomListJson);\r\n                    callFunc = null;\r\n                }\r\n                // GG.platformMgr.showRoomUI(self._roomPrefabName, function (roomComp) {\r\n                //     if (roomComp) {\r\n                //         self._compHomeList = roomComp;\r\n                //         self._requestEnter(enterType, isNoEffect);\r\n                //     }\r\n                // });\r\n            });\r\n        }else{\r\n            if(callFunc){\r\n                callFunc(this._roomListJson);\r\n                callFunc = null;\r\n            }\r\n        }\r\n    },\r\n}\r\n\r\nwindow.G_DATA = gameData;"]}
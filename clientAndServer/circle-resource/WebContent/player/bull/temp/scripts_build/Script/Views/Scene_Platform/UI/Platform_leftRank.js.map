{"version":3,"sources":["assets\\Script\\Views\\Scene_Platform\\UI\\Platform_leftRank.js"],"names":["rankType","type1","type2","cc","Class","extends","require","properties","_list_idleFriends","_curRankType","_gainsRankData","_firstShowNum","_list_richData","_list_gainsData","_isRichDataFull","_isGainsDataFull","sprite_listGainOn","default","type","Sprite","displayName","sprite_listRichOn","sprite_listRankingBG","node_listGainBtn","Node","node_listRichBtn","comp_itemContainer","prefab_friendItem","Prefab","label_null","Label","comp_scroll","ScrollView","onLoad","_itemCompName","registerButton","onClick_tabBtn","node","on","_scrollToBottom","dataObj","itemPrefab","setData","start","event","setGainData","setRichData","_richRankData","_setRankTitle","isLeft","posX","x","active","_setNull","data","concat","infoList","getNextPageList","_updateBottom","G_DATA","getGainsData","_setGainsPageData","getRichData","_setRichPageData","pageNo","showNum","undefined","sendData","GG","getPlayer","getGameID","httpMgr","sendHttpRequest","G_DIALOG_URL","playerProfitUrl","netData","_whenRequestDone","bind","addLongRequestWait","playerTreasuresUrl","targetType","length","code","clearItems","msg","_addRichNetData","_addGainsNetData","showItemNum","getShowItemNum","curItemNum","curPageNo","getPageNoByNum","setGainsData","isGain","isRestart","item","comp","index","playerInfo","itemNum","i","getItemByIndex","getComponent","init","_scrollToUp","scrollToTop","Object","prototype","toString","call","string","moveOutScene","isOut","isNoEffect","_firstPosX","outX","visibleRect","width","time","stopAllActions","targetPos","p","y","self","runAction","sequence","moveTo","callFunc","setFrameHide"],"mappings":"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","file":"unknown","sourcesContent":["//游戏大厅玩家排行榜\r\nvar rankType = {\r\n    type1 : 1,\r\n    type2 : 2\r\n}\r\ncc.Class({\r\n    extends: require('BaseUI'),\r\n\r\n    properties: {\r\n        _list_idleFriends : null,                                                                                   //没有显示出来的好友\r\n        _curRankType : null,                                                                                         //当前选中的类型\r\n        _gainsRankData : null,                                                                                       //盈利排行榜的信息\r\n        _firstShowNum : null,                                                                                        //一开始显示的条目数量\r\n        _list_richData : null,                                                                                       //富豪榜信息\r\n        _list_gainsData : null,                                                                                      //盈利榜信息\r\n\r\n        _isRichDataFull : null,                                                                                      //是否已经请求到所有的数据\r\n        _isGainsDataFull : null,                                                                                     //是否已经请求到所有的数据\r\n        sprite_listGainOn : {\r\n            default : null,\r\n            type : cc.Sprite,\r\n            displayName : '盈利榜图标'\r\n        },\r\n        sprite_listRichOn : {\r\n            default : null,\r\n            type : cc.Sprite,\r\n            displayName : '富豪榜图标'\r\n        },\r\n        sprite_listRankingBG : {\r\n            default : null,\r\n            type : cc.Sprite,\r\n            displayName : '高亮显示条'\r\n        },\r\n        node_listGainBtn : {\r\n            default : null,\r\n            type : cc.Node,\r\n            displayName : '盈利榜按钮'\r\n        },\r\n        node_listRichBtn : {\r\n            default : null,\r\n            type : cc.Node,\r\n            displayName : '富豪榜按钮'\r\n        },\r\n        comp_itemContainer : {\r\n            default : null,\r\n            type : require('Obj_dealScroll'),\r\n            displayName : '好友排行榜容器'\r\n        },\r\n        prefab_friendItem : {\r\n            default : null,\r\n            type : cc.Prefab,\r\n            displayName : '好友条目'\r\n        },\r\n        label_null : {\r\n            default : null,\r\n            type : cc.Label,\r\n            displayName : '无数据时显示'\r\n        },\r\n        comp_scroll : {\r\n            default : null,\r\n            type : cc.ScrollView,\r\n            displayName : '滚动的容器'\r\n        },\r\n    },\r\n\r\n    // use this for initialization\r\n    onLoad: function () {\r\n        this._itemCompName = 'Obj_rankItem_friend';\r\n        this._firstShowNum = 7;\r\n        this._isRichDataFull = false;\r\n        this._isGainsDataFull = false;\r\n        this.registerButton(this.node_listGainBtn, this.onClick_tabBtn, this, rankType.type1, true);\r\n        this.registerButton(this.node_listRichBtn, this.onClick_tabBtn, this, rankType.type2, true);\r\n        this.comp_scroll.node.on('scroll-to-bottom', this._scrollToBottom, this);\r\n        //初始化滚动层1\r\n        var dataObj = {\r\n            itemPrefab : this.prefab_friendItem,\r\n        }\r\n        this.comp_itemContainer.setData(dataObj);\r\n    },\r\n\r\n    start : function () {\r\n        //默认按钮的显示\r\n        // this._curRankType = rankType.type2;\r\n        // this._setRankTitle(this._curRankType);\r\n    },\r\n\r\n    //点击切换富豪榜\r\n    onClick_tabBtn : function (event, type) {\r\n        if(this._curRankType != type){\r\n\r\n            switch (type){\r\n                case rankType.type1:\r\n                    this.setGainData(this._gainsRankData);\r\n                    break;\r\n                case rankType.type2:\r\n                    this.setRichData(this._richRankData);\r\n                    break;\r\n                default:\r\n                    break;\r\n            }\r\n        }\r\n    },\r\n    //设置按钮显示\r\n    _setRankTitle : function (type) {\r\n        this._curRankType = type;\r\n        var isLeft = false, posX;\r\n        switch (type){\r\n            case rankType.type1://盈利榜\r\n                isLeft = true;\r\n                posX = this.node_listGainBtn.x;\r\n                break;\r\n            case rankType.type2://富豪榜\r\n                posX = this.node_listRichBtn.x;\r\n                break;\r\n        };\r\n        this.sprite_listRankingBG.node.x = posX;\r\n        this.sprite_listGainOn.node.active = isLeft;\r\n        this.sprite_listRichOn.node.active = !isLeft;\r\n    },\r\n\r\n    //设置盈利榜数据\r\n    setGainData : function(dataObj){\r\n        if(dataObj){\r\n            this._setRankTitle(rankType.type1);\r\n            this._setNull('');\r\n            this._list_gainsData = dataObj.data.concat([]);\r\n\r\n            var infoList = this.comp_itemContainer.getNextPageList(this._list_gainsData, this._firstShowNum);\r\n            this._updateBottom(true, infoList, true);\r\n        }else{\r\n            dataObj = G_DATA.getGainsData();\r\n            if(dataObj){\r\n                this._gainsRankData  = dataObj;\r\n                this.setGainData(this._gainsRankData);\r\n            }else{\r\n                this._setGainsPageData(1);\r\n            }\r\n        }\r\n    },\r\n\r\n    //设置富豪榜数据\r\n    setRichData: function(dataObj) {\r\n        if(dataObj){\r\n            this._setRankTitle(rankType.type2);\r\n            this._setNull('');\r\n            this._list_richData = dataObj.data.concat([]);\r\n\r\n            var infoList = this.comp_itemContainer.getNextPageList(this._list_richData, this._firstShowNum);\r\n            this._updateBottom(false, infoList, true);\r\n        }else{\r\n            dataObj = G_DATA.getRichData();\r\n            if(dataObj){\r\n                this._richRankData = dataObj;\r\n                this.setRichData(this._richRankData);\r\n            }else{\r\n                this._setRichPageData(1);\r\n            }\r\n        }\r\n    },\r\n\r\n    _setGainsPageData : function (pageNo, showNum) {\r\n        if(showNum === undefined) showNum = this._firstShowNum;\r\n        var sendData = 'gameId='+GG.getPlayer().getGameID()+\"&pageSize=\"+showNum+\"&pageNo=\"+pageNo;\r\n        GG.httpMgr.sendHttpRequest(G_DIALOG_URL.playerProfitUrl, sendData, function (netData) {\r\n            this._whenRequestDone(pageNo, rankType.type1, netData);\r\n        }.bind(this));\r\n        GG.httpMgr.addLongRequestWait(G_DIALOG_URL.playerProfitUrl, sendData, function (netData) {\r\n            this._whenRequestDone(pageNo, rankType.type1, netData);\r\n        }.bind(this));\r\n    },\r\n    _setRichPageData : function (pageNo, showNum) {\r\n        if(showNum === undefined) showNum = this._firstShowNum;\r\n        var sendData = \"pageSize=\"+showNum+\"&pageNo=\"+pageNo;\r\n        GG.httpMgr.sendHttpRequest(G_DIALOG_URL.playerTreasuresUrl, sendData, function (netData) {\r\n            this._whenRequestDone(pageNo, rankType.type2, netData);\r\n        }.bind(this));\r\n        GG.httpMgr.addLongRequestWait(G_DIALOG_URL.playerTreasuresUrl, sendData, function (netData) {\r\n            this._whenRequestDone(pageNo, rankType.type2, netData);\r\n        }.bind(this));\r\n    },\r\n\r\n    _whenRequestDone : function (pageNo, targetType, netData) {\r\n        if(pageNo == 1){\r\n            //是请求第一页\r\n            if(netData){\r\n                if(!netData.data || netData.data.length < 1 || netData.code == '0'){\r\n                    this.comp_itemContainer.clearItems(-1);\r\n                    this._setNull(netData.msg);\r\n                    this._setRankTitle(targetType);\r\n                }else{\r\n                    if(targetType == rankType.type2){\r\n                        //富豪排行榜\r\n                        this._addRichNetData(pageNo, netData);\r\n                        this.setRichData(this._richRankData);\r\n                    }else{\r\n                        //盈利排行榜\r\n                        this._addGainsNetData(pageNo, netData);\r\n                        this.setGainData(this._gainsRankData);\r\n                    }\r\n                }\r\n            }else {\r\n                var showItemNum = this.comp_itemContainer.getShowItemNum();\r\n                if(showItemNum < 1)this._setNull();\r\n            }\r\n        }else{\r\n            //不是第一页\r\n            if(!netData) return;\r\n\r\n            if(!netData.data || netData.data.length < 1 || netData.code == '0'){\r\n                switch (targetType){\r\n                    case rankType.type1:\r\n                        this._isGainsDataFull = true;\r\n                        break\r\n                    case rankType.type2:\r\n                        this._isRichDataFull = true;\r\n                        break\r\n                    default:\r\n                        break\r\n                }\r\n            }else{\r\n                if(targetType == rankType.type2){\r\n                    //富豪排行榜\r\n                    this._addRichNetData(pageNo, netData);\r\n                    if(this._curRankType == rankType.type2){\r\n                        var infoList = this.comp_itemContainer.getNextPageList(this._list_richData, this._firstShowNum);\r\n                        this._updateBottom(false, infoList, false);\r\n                    }\r\n                }else{\r\n                    //盈利排行榜\r\n                    this._addGainsNetData(pageNo, netData);\r\n                    if(this._curRankType == rankType.type1){\r\n                        var infoList = this.comp_itemContainer.getNextPageList(this._list_gainsData, this._firstShowNum);\r\n                        this._updateBottom(false, infoList, false);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    },\r\n    _addGainsNetData : function (pageNo, netData) {\r\n        if(!this._gainsRankData) this._gainsRankData = netData;\r\n        else{\r\n            var curItemNum = this._gainsRankData.data.length;\r\n            var curPageNo = this.comp_itemContainer.getPageNoByNum(curItemNum, this._firstShowNum);\r\n            if(pageNo < curPageNo) return;\r\n            //列表数值叠加\r\n            this._gainsRankData.data = this._gainsRankData.data.concat(netData.data);\r\n            this._list_gainsData = netData.data;\r\n            if(netData.data.length < this._firstShowNum){\r\n                //已经请求完所有的数据\r\n                this._isGainsDataFull = true;\r\n            }\r\n        }\r\n        G_DATA.setGainsData(this._gainsRankData);\r\n    },\r\n    _addRichNetData : function (pageNo, netData) {\r\n        if(!this._richRankData) this._richRankData = netData;\r\n        else{\r\n            var curItemNum = this._richRankData.data.length;\r\n            var curPageNo = this.comp_itemContainer.getPageNoByNum(curItemNum, this._firstShowNum);\r\n            if(pageNo < curPageNo) return;\r\n            //列表数值叠加\r\n            this._richRankData.data = this._richRankData.data.concat(netData.data);\r\n            this._list_richData = netData.data;\r\n            if(netData.data.length < this._firstShowNum){\r\n                //已经请求完所有的数据\r\n                this._isRichDataFull = true;\r\n            }\r\n        }\r\n        G_DATA.setRichData(this._richRankData);\r\n\r\n    },\r\n\r\n    //当scroll滚动到底边  isRestart : 是否从第一个开始\r\n    _updateBottom : function (isGain, infoList, isRestart) {\r\n        var item, comp, index = 0, playerInfo, itemNum = this.comp_itemContainer.getShowItemNum();\r\n        if(isRestart) itemNum = 0;\r\n        for (var i = itemNum; i < (itemNum + this._firstShowNum); i++) {\r\n            playerInfo = infoList[index];\r\n            if(!playerInfo){\r\n                //如果没有玩家数据则终止，不要出现断层\r\n                break;\r\n            }\r\n            item = this.comp_itemContainer.getItemByIndex(i);\r\n            if(item){\r\n                comp = item.getComponent(this._itemCompName);\r\n                comp.init(isGain, i, playerInfo);\r\n            }\r\n            index += 1;\r\n        }\r\n        //如果是第一页，需要将多余的条目清理\r\n        if(isRestart) {\r\n            this.comp_itemContainer.clearItems(infoList.length - 1);\r\n            this._scrollToUp();\r\n        }\r\n    },\r\n\r\n    //当玩家滚动到底部\r\n    _scrollToBottom : function (event) {\r\n        var infoList, isGain, itemNum;\r\n        switch (this._curRankType) {\r\n            case rankType.type1:\r\n                isGain = true;\r\n                infoList = this.comp_itemContainer.getNextPageList(this._list_gainsData, this._firstShowNum);\r\n                itemNum = this._gainsRankData.data.length;\r\n                break\r\n            case rankType.type2:\r\n                isGain = false;\r\n                infoList = this.comp_itemContainer.getNextPageList(this._list_richData, this._firstShowNum);\r\n                itemNum = this._richRankData.data.length;\r\n                break\r\n            default:\r\n                break\r\n        }\r\n        if(infoList && infoList.length > 0){\r\n            this._updateBottom(isGain, infoList);\r\n        }else if(itemNum < 50){\r\n            //请求接下去的排行榜数据\r\n            var pageNo = this.comp_itemContainer.getPageNoByNum(itemNum+1, this._firstShowNum);\r\n            switch (this._curRankType) {\r\n                case rankType.type1:\r\n                    if(!this._isGainsDataFull)this._setGainsPageData(pageNo, 50-itemNum);\r\n                    break\r\n                case rankType.type2:\r\n                    if(!this._isRichDataFull)this._setRichPageData(pageNo, 50-itemNum);\r\n                    break\r\n                default:\r\n                    break\r\n            }\r\n        }\r\n    },\r\n    //视图内容将在规定时间内滚动到视图顶部。\r\n    _scrollToUp : function () {\r\n        this.comp_scroll.scrollToTop(0.2);\r\n    },\r\n\r\n    _setNull : function (msg) {\r\n        if(Object.prototype.toString.call(msg) !== '[object String]'){\r\n            msg = 'request timeout!'\r\n        }\r\n        this.label_null.string = msg;\r\n    },\r\n\r\n    //==============================================\r\n\r\n    //移出屏幕外\r\n    moveOutScene : function (isOut, isNoEffect) {\r\n        if(!this._firstPosX) this._firstPosX = -this.node.x;\r\n        var outX = cc.visibleRect.width * 0.3 + this._firstPosX;\r\n        if(isNoEffect){\r\n            this.node.x = isOut ? -outX : this._firstPosX;\r\n        }else{\r\n            this.node.active = true;\r\n            var time = 0.5;\r\n            this.node.stopAllActions();\r\n            var targetPos = cc.p(this._firstPosX, this.node.y);\r\n            if(isOut) targetPos.x = -outX;\r\n            var self = this;\r\n            this.node.runAction(cc.sequence(cc.moveTo(time, targetPos), cc.callFunc(function () {\r\n                self.setFrameHide(isOut);\r\n            })));\r\n        }\r\n    },\r\n\r\n    setFrameHide : function (isOut) {\r\n        this.node.active = !isOut;\r\n    },\r\n    // called every frame, uncomment this function to activate update callback\r\n    // update: function (dt) {\r\n\r\n    // },\r\n});\r\n"]}
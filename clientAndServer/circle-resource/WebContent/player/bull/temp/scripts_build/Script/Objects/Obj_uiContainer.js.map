{"version":3,"sources":["assets\\Script\\Objects\\Obj_uiContainer.js"],"names":["cc","Class","extends","Component","properties","_dict_ui","_ui_baseUrl","_isOnLoad","node_grayLayer","default","type","Node","displayName","onLoad","addUI","uiName","callBakc","showUI","callBack","uiComp","prefabName","self","loader","loadRes","err","prefab","uiNode","instantiate","parent","node","position","_getDialogPos","getComponent","setUIName","bindContainer","hideLayer","addUIEx","closeUI","getUIComp","closeAllUI","designSize","sys","isMobile","view","getDesignResolutionSize","visibleRect","p","width","height","setGrayLayerIsShow","isShow","active"],"mappings":"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","file":"unknown","sourcesContent":["//显示UI界面的容器\r\n\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n    properties: {\r\n        _dict_ui : null,                                                                                                        //ui整理的字典\r\n        _ui_baseUrl : null,                                                                                                     //ui整理的字典\r\n        _isOnLoad : null,                                                                                                       //是否正在加载中\r\n\r\n        node_grayLayer : {\r\n            default : null,\r\n            type : cc.Node,\r\n            displayName : '灰色层'\r\n        },\r\n    },\r\n\r\n    // use this for initialization\r\n    onLoad: function () {\r\n        this._dict_ui = {};\r\n        this._ui_baseUrl = 'UI_prefabs/';\r\n        this._isOnLoad = false;\r\n    },\r\n\r\n    //获取一个可以显示的ui\r\n    addUI : function (uiName, callBakc) {\r\n        this.showUI(uiName, callBakc);\r\n        return;\r\n        //var uiComp = this._dict_ui[uiName];\r\n        //if(!uiComp){\r\n        //    //var prefabName = 'prefab_'+uiName.split('_')[1];\r\n        //    var prefabName = uiName;\r\n        //    if(!this[prefabName]) return null;\r\n        //    var uiNode = cc.instantiate(this[prefabName]);\r\n        //    uiNode.parent = this.node;\r\n        //    var pos = this._getDialogPos();\r\n        //    uiNode.position = this._getDialogPos();\r\n        //    uiComp = uiNode.getComponent(uiName);\r\n        //    uiComp.setUIName(uiName);\r\n        //    uiComp.bindContainer(this);\r\n        //    this._dict_ui[uiName] = uiComp;\r\n        //}\r\n        //uiComp.hideLayer();\r\n        //return uiComp\r\n    },\r\n\r\n    showUI : function (uiName, callBack) {\r\n        if(this._isOnLoad) return;\r\n        if(!uiName) {\r\n            //错误的ui名称\r\n            if(callBack){\r\n                callBack(null);\r\n                callBack = null;\r\n            }\r\n            return\r\n        }\r\n        var uiComp = this._dict_ui[uiName];\r\n        if(!uiComp){\r\n            //创建窗口\r\n            var prefabName = uiName;\r\n            var self = this;\r\n            this._isOnLoad = true;\r\n            cc.loader.loadRes(this._ui_baseUrl+prefabName, function (err, prefab) {\r\n                self._isOnLoad = false;\r\n                var uiNode = cc.instantiate(prefab);\r\n                uiNode.parent = self.node;\r\n                uiNode.position = self._getDialogPos();\r\n                uiComp = uiNode.getComponent(uiName);\r\n                uiComp.setUIName(uiName);\r\n                uiComp.bindContainer(self);\r\n                self._dict_ui[uiName] = uiComp;\r\n                uiComp.hideLayer();\r\n                if(callBack){\r\n                    callBack(uiComp);\r\n                    callBack = null;\r\n                }\r\n            });\r\n        }else{\r\n            //已经创建过该ui\r\n            uiComp.hideLayer();\r\n            if(callBack){\r\n                callBack(uiComp);\r\n                callBack = null;\r\n            }\r\n        }\r\n    },\r\n\r\n    //增加一个额外的ui到ui管理字典\r\n    addUIEx : function (uiName, uiComp) {\r\n        if(!uiComp) return;\r\n        uiComp.setUIName(uiName);\r\n        this._dict_ui[uiName] = uiComp;\r\n    },\r\n\r\n    //关闭一个ui\r\n    closeUI : function (uiName) {\r\n        if(!this._dict_ui[uiName]) return;\r\n        this._dict_ui[uiName].hideLayer();\r\n    },\r\n\r\n    //获取一个UI的操作脚本\r\n    getUIComp : function (uiName) {\r\n        var uiComp = this._dict_ui[uiName];\r\n        if(!uiComp) uiComp = this.addUI(uiName);\r\n        return uiComp\r\n    },\r\n\r\n    //关闭所有的窗口显示\r\n    closeAllUI : function () {\r\n        for(var uiName in this._dict_ui){\r\n            this.closeUI(uiName);\r\n        }\r\n    },\r\n\r\n    _getDialogPos : function () {\r\n        var designSize = cc.sys.isMobile ? cc.view.getDesignResolutionSize() : cc.visibleRect;\r\n        return cc.p(designSize.width*0.5,designSize.height*0.5);\r\n    },\r\n\r\n    //设置置灰层的显隐\r\n    setGrayLayerIsShow : function (isShow) {\r\n        if(this.node_grayLayer) this.node_grayLayer.active = isShow;\r\n    },\r\n\r\n    // called every frame, uncomment this function to activate update callback\r\n    // update: function (dt) {\r\n\r\n    // },\r\n});\r\n"]}
{"version":3,"sources":["assets\\Script\\Views\\UIComponents\\Prefab_dialog_trend.js"],"names":["cc","Class","extends","require","properties","onLoad","_super","_setScrollData","_itemCompName","dataObj","itemPrefab","prefab_item","scrollType","G_TYPE","vertical","comp_itemContainer","setData","homeID","dataList","G_Config_common","isLocal","i","curList","push","_showList","moduleType","GG","getGameType","gameModule","bull100","http_gameModule","grab","classic","sendData","httpMgr","sendHttpRequest","G_DIALOG_URL","trendUrl","data","showLayer","needList","mathList","msg","length","matchResult","j","bind","item","comp","showTrendItems","getItemByIndex","getComponent","clearItems","hideLayer"],"mappings":"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","file":"unknown","sourcesContent":["//百人走势图\r\n\r\n\r\ncc.Class({\r\n    extends: require('BaseDialog'),\r\n\r\n    properties: {\r\n\r\n    },\r\n\r\n    // use this for initialization\r\n    onLoad: function () {\r\n        this._super('UI_trend');\r\n        this._setScrollData();\r\n    },\r\n\r\n    _setScrollData : function () {\r\n        this._itemCompName = 'Obj_cell_trend';\r\n        var dataObj = {\r\n            itemPrefab : this.prefab_item,\r\n            scrollType : G_TYPE.scrollType.vertical,\r\n        }\r\n        this.comp_itemContainer.setData(dataObj);\r\n    },\r\n\r\n    setData : function (homeID) {\r\n        var dataList;\r\n        if(G_Config_common.isLocal) {\r\n            dataList = [];\r\n            for(var i = 0; i < 5; i ++){\r\n                var curList = [['SPADE',1], ['DIAMOND',0], ['CLUB',1], ['HEART',0]];\r\n                dataList.push(curList);\r\n            }\r\n            this._showList(dataList);\r\n        } else{\r\n            var moduleType;\r\n            switch (GG.getGameType()){\r\n                case G_TYPE.gameModule.bull100:\r\n                    moduleType = G_TYPE.http_gameModule.bull100;\r\n                    break\r\n                case G_TYPE.gameModule.grab:\r\n                    moduleType = G_TYPE.http_gameModule.grab;\r\n                    break\r\n                case G_TYPE.gameModule.classic:\r\n                    moduleType = G_TYPE.http_gameModule.classic;\r\n                    break\r\n                default:\r\n                    moduleType = 1;\r\n                    break\r\n            }\r\n            var sendData = 'gameModelId='+moduleType+'&gameRoomId='+homeID;\r\n            GG.httpMgr.sendHttpRequest(G_DIALOG_URL.trendUrl, sendData, function (data) {\r\n                if(data){\r\n                    this.showLayer();\r\n                    var needList = [];\r\n                    var mathList;\r\n                    var dataList = data.data;\r\n                    if(!dataList) {\r\n                        data.msg\r\n                    }else{\r\n                        for(var i = 0; i < dataList.length; i ++){\r\n                            if(!needList[i]) needList[i] = [];\r\n                            mathList = dataList[i].matchResult;\r\n                            if(mathList){\r\n                                for(var j = 0; j < mathList.length; j ++){\r\n                                    needList[i].push([mathList[j]['itemType'], mathList[j]['outcome']]);\r\n                                }\r\n                            }\r\n                        }\r\n                        this._showList(needList);\r\n                    }\r\n                }\r\n            }.bind(this));\r\n        }\r\n    },\r\n    _showList : function (dataList) {\r\n        var data, item, comp;//走势图显示条目为5\r\n        for(var i = 0; i < G_Config_common.showTrendItems; i ++){\r\n            data = dataList[i]\r\n            if(data){\r\n                item = this.comp_itemContainer.getItemByIndex(i);\r\n                if(item){\r\n                    comp = item.getComponent(this._itemCompName);\r\n                    comp.setData(data);\r\n                }\r\n            }\r\n        }\r\n        this.comp_itemContainer.clearItems(i);\r\n    },\r\n\r\n    hideLayer : function () {\r\n        this._super();\r\n    },\r\n\r\n    // called every frame, uncomment this function to activate update callback\r\n    // update: function (dt) {\r\n\r\n    // },\r\n});\r\n"]}
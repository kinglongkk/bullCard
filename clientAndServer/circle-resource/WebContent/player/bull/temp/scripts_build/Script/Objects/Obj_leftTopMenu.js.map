{"version":3,"sources":["assets\\Script\\Objects\\Obj_leftTopMenu.js"],"names":["cc","Class","extends","require","properties","_isOpen","_isPlayingEff","_exitFunc","_changeFunc","node_dirImg","default","type","Node","displayName","node_btnContainer","onLoad","_scaleTime","_waitTime","exitBtn","children","changeBtn","registerButton","OnClick_menu","OnClick_exit","OnClick_change","setBtnEnable","target","_changeDirImg","_showOpenEffect","bindFunc","exitFunc","changeFunc","isOpen","active","_showCloseEffect","stopAllActions","scaleY","time","scaleAct","scaleTo","runAction","sequence","callFunc","_addWaitAct","time1","delayTime","resetShow"],"mappings":"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","file":"unknown","sourcesContent":["//左上角的菜单按钮\r\n\r\n\r\ncc.Class({\r\n    extends: require('AutoDealing'),\r\n\r\n    properties: {\r\n        _isOpen : null,                                                                                                        //是否打开菜单\r\n        _isPlayingEff : null,                                                                                                 //是否正在播放特效\r\n        _exitFunc : null,                                                                                                     //退出回调\r\n        _changeFunc : null,                                                                                                   //换桌回调\r\n\r\n        node_dirImg : {\r\n            default : null,\r\n            type : cc.Node,\r\n            displayName : '菜单方向容器'\r\n        },\r\n        node_btnContainer : {\r\n            default : null,\r\n            type : cc.Node,\r\n            displayName : '按钮容器'\r\n        }\r\n    },\r\n\r\n    // use this for initialization\r\n    onLoad: function () {\r\n        this._isOpen = false;\r\n        this._scaleTime = 0.2;\r\n        this._waitTime = 3.5;\r\n\r\n        var exitBtn = this.node_btnContainer.children[0];//退出\r\n        var changeBtn = this.node_btnContainer.children[1];//换桌\r\n        this.registerButton(this.node_dirImg, this.OnClick_menu, this);\r\n        this.registerButton(exitBtn, this.OnClick_exit, this);\r\n        this.registerButton(changeBtn, this.OnClick_change, this);\r\n\r\n        this.setBtnEnable(changeBtn, false)\r\n    },\r\n\r\n    //点击菜单\r\n    OnClick_menu : function (target) {\r\n        this._isOpen = !this._isOpen;\r\n        this._changeDirImg(this._isOpen);\r\n        this._showOpenEffect();\r\n    },\r\n    //点击退出\r\n    OnClick_exit : function (target) {\r\n        this.OnClick_menu();\r\n        if(this._exitFunc) this._exitFunc();\r\n    },\r\n    //点击换桌\r\n    OnClick_change : function (target) {\r\n        this.OnClick_menu();\r\n        if(this._changeFunc) this._changeFunc();\r\n    },\r\n\r\n    //设置退出函数\r\n    bindFunc : function (exitFunc, changeFunc) {\r\n        this._exitFunc = exitFunc;\r\n        this._changeFunc = changeFunc;\r\n    },\r\n\r\n    //==================================效果显示\r\n\r\n    //箭头方向\r\n    _changeDirImg : function (isOpen) {\r\n        this.node_dirImg.children[0].active = !isOpen;\r\n        this.node_dirImg.children[1].active = isOpen;\r\n    },\r\n\r\n    //显示打开菜单特效\r\n    _showOpenEffect : function () {\r\n        if(!this._isOpen){\r\n            //已经在播放动画了\r\n            this._showCloseEffect();\r\n            return\r\n        }\r\n        this.node_btnContainer.stopAllActions();\r\n        this.node_btnContainer.active = true;\r\n        this.node_btnContainer.scaleY = 0;\r\n\r\n        var time = this._scaleTime;\r\n        var scaleAct = cc.scaleTo(time, 1, 1);\r\n        this.node_btnContainer.runAction(cc.sequence(scaleAct, cc.callFunc(this._addWaitAct, this)));\r\n    },\r\n    //增加等待动作\r\n    _addWaitAct : function () {\r\n        this.node_btnContainer.stopAllActions();\r\n        var time1 = this._waitTime;\r\n        this.node_btnContainer.runAction(cc.sequence(cc.delayTime(time1), cc.callFunc(this.OnClick_menu, this)));\r\n    },\r\n    //显示收起菜单的特效\r\n    _showCloseEffect : function () {\r\n        this.node_btnContainer.stopAllActions();\r\n        var time = this._scaleTime/2;\r\n        var scaleAct = cc.scaleTo(time, 1, 0);\r\n        this.node_btnContainer.runAction(scaleAct);\r\n    },\r\n\r\n    resetShow : function () {\r\n        this._changeDirImg(false);\r\n        this.node_btnContainer.active = false;\r\n    },\r\n\r\n    // called every frame, uncomment this function to activate update callback\r\n    // update: function (dt) {\r\n\r\n    // },\r\n});\r\n"]}
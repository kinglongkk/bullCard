{"version":3,"sources":["assets\\Script\\Objects\\Obj_systemTip.js"],"names":["cc","Class","extends","Component","properties","node_labelBG","Node","label_center","Label","onLoad","_firstPos","p","node","x","y","showContent","str","pos","time","callBack","active","string","isNaN","_countDownNum","_forceEnd","_curStr","_callFunc","_setCenterValue","stopAllActions","runAction","sequence","delayTime","callFunc","_hideTip","_setBackgroundLen","hideSystemTip","_widthRate","width","_firstW","wordLen","name","curStr","reg","i","length","test","targetW","Math","max"],"mappings":";;;;;;AAAA;AACAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,sBAAeL,GAAGM,IADV;AAERC,sBAAeP,GAAGQ;AAFV,KAHP;;AAQL;AACAC,YAAQ,kBAAY;AAChB,aAAKC,SAAL,GAAiBV,GAAGW,CAAH,CAAK,KAAKC,IAAL,CAAUC,CAAf,EAAkB,KAAKD,IAAL,CAAUE,CAA5B,CAAjB;AACH,KAXI;;AAaL;AACAC,iBAAc,qBAAUC,GAAV,EAAeC,GAAf,EAAoBC,IAApB,EAA0BC,QAA1B,EAAoC;AAC9C,aAAKP,IAAL,CAAUQ,MAAV,GAAmB,IAAnB;AACA,aAAKb,YAAL,CAAkBc,MAAlB,GAA2BL,GAA3B;AACA;;;AAGA,YAAG,CAACM,MAAMJ,IAAN,CAAJ,EAAgB;AACZ,gBAAG,KAAKK,aAAR,EAAuB,KAAKC,SAAL;AACvB;AACA,iBAAKC,OAAL,GAAeT,GAAf;AACA,iBAAKU,SAAL,GAAiBP,QAAjB;AACA,iBAAKQ,eAAL;AACA,iBAAKf,IAAL,CAAUgB,cAAV;AACA,iBAAKhB,IAAL,CAAUiB,SAAV,CAAoB7B,GAAG8B,QAAH,CAAY9B,GAAG+B,SAAH,CAAab,IAAb,CAAZ,EAAgClB,GAAGgC,QAAH,CAAY,KAAKC,QAAjB,EAA2B,IAA3B,CAAhC,CAApB;AACH,SARD,MAQM,KAAKA,QAAL;AACN,aAAKC,iBAAL,CAAuBlB,GAAvB;AACH,KA9BI;AA+BLmB,mBAAgB,yBAAY;AACxB,aAAKvB,IAAL,CAAUgB,cAAV;AACA,aAAKhB,IAAL,CAAUQ,MAAV,GAAmB,KAAnB;AACH,KAlCI;AAmCLI,eAAY,qBAAY;AACpB,aAAKE,SAAL,GAAiB,IAAjB;AACA,aAAKd,IAAL,CAAUgB,cAAV;AACA,aAAKK,QAAL;AACH,KAvCI;;AAyCLA,cAAW,oBAAY;AACnB,aAAKrB,IAAL,CAAUQ,MAAV,GAAmB,KAAnB;AACA,YAAG,KAAKM,SAAR,EAAmB;AACf,iBAAKA,SAAL;AACA,iBAAKA,SAAL,GAAiB,IAAjB;AACH;AACJ,KA/CI;;AAiDLC,qBAAkB,2BAAY;AAC1B,aAAKpB,YAAL,CAAkBc,MAAlB,GAA2B,KAAKI,OAAhC;AACH,KAnDI;AAoDL;AACAS,uBAAoB,2BAAUlB,GAAV,EAAe;AAC/B,YAAG,CAAC,KAAKoB,UAAT,EAAqB,KAAKA,UAAL,GAAkB,KAAK/B,YAAL,CAAkBgC,KAAlB,GAAwB,EAA1C;AACrB,YAAG,CAAC,KAAKhC,YAAL,CAAkBiC,OAAtB,EAA+B,KAAKjC,YAAL,CAAkBiC,OAAlB,GAA4B,KAAKjC,YAAL,CAAkBgC,KAA9C;;AAE/B,YAAIE,UAAQ,CAAZ;AAAA,YAAeC,OAAOxB,GAAtB;AAAA,YAA2ByB,MAA3B;AAAA,YAAmCC,MAAM,oBAAzC,CAA8D;AAC9D,aAAI,IAAIC,IAAG,CAAX,EAAcA,IAAIH,KAAKI,MAAvB,EAA+BD,GAA/B,EAAoC;AAChCF,qBAASD,KAAKG,CAAL,CAAT;AACA,gBAAGD,IAAIG,IAAJ,CAASJ,MAAT,CAAH,EAAqB;AACjBF,2BAAW,CAAX;AACH,aAFD,MAEO;AACHA,2BAAW,CAAX;AACH;AACJ;;AAED,YAAIO,UAAUP,UAAU,KAAKH,UAA7B;AACA,aAAK/B,YAAL,CAAkBgC,KAAlB,GAA0BU,KAAKC,GAAL,CAAS,KAAK3C,YAAL,CAAkBiC,OAA3B,EAAoCQ,OAApC,CAA1B;AACH;;AArEI,CAAT","file":"unknown","sourcesContent":["//系统提示显示\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        node_labelBG : cc.Node,\r\n        label_center : cc.Label,\r\n    },\r\n\r\n    // use this for initialization\r\n    onLoad: function () {\r\n        this._firstPos = cc.p(this.node.x, this.node.y);\r\n    },\r\n\r\n    //显示系统提示内容\r\n    showContent : function (str, pos, time, callBack) {\r\n        this.node.active = true;\r\n        this.label_center.string = str;\r\n        /*if(!pos) pos = this._firstPos;\r\n        this.node.position = pos;*/\r\n\r\n        if(!isNaN(time)){\r\n            if(this._countDownNum) this._forceEnd();\r\n            //有倒计时\r\n            this._curStr = str;\r\n            this._callFunc = callBack;\r\n            this._setCenterValue();\r\n            this.node.stopAllActions();\r\n            this.node.runAction(cc.sequence(cc.delayTime(time), cc.callFunc(this._hideTip, this)));\r\n        }else this._hideTip();\r\n        this._setBackgroundLen(str);\r\n    },\r\n    hideSystemTip : function () {\r\n        this.node.stopAllActions();\r\n        this.node.active = false;\r\n    },\r\n    _forceEnd : function () {\r\n        this._callFunc = null;\r\n        this.node.stopAllActions();\r\n        this._hideTip();\r\n    },\r\n\r\n    _hideTip : function () {\r\n        this.node.active = false;\r\n        if(this._callFunc) {\r\n            this._callFunc();\r\n            this._callFunc = null;\r\n        }\r\n    },\r\n\r\n    _setCenterValue : function () {\r\n        this.label_center.string = this._curStr;\r\n    },\r\n    //改变背景长度\r\n    _setBackgroundLen : function (str) {\r\n        if(!this._widthRate) this._widthRate = this.node_labelBG.width/14;\r\n        if(!this.node_labelBG._firstW) this.node_labelBG._firstW = this.node_labelBG.width;\r\n\r\n        var wordLen=0, name = str, curStr, reg = /^[\\u4E00-\\u9FA5]+$/;;\r\n        for(var i =0; i < name.length; i ++){\r\n            curStr = name[i];\r\n            if(reg.test(curStr)) {\r\n                wordLen += 2;\r\n            } else {\r\n                wordLen += 1;\r\n            }\r\n        }\r\n\r\n        var targetW = wordLen * this._widthRate;\r\n        this.node_labelBG.width = Math.max(this.node_labelBG._firstW, targetW);\r\n    },\r\n\r\n    // called every frame, uncomment this function to activate update callback\r\n    // update: function (dt) {\r\n\r\n    // },\r\n});\r\n"]}
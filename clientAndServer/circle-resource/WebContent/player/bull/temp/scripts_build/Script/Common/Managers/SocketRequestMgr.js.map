{"version":3,"sources":["assets\\Script\\Common\\Managers\\SocketRequestMgr.js"],"names":["module","exports","cc","Class","properties","_dict_sendInfo","ctor","send_inHome","netData","callFunc","NetType","s_enterHouse","GG","socketMgr","SendMsg","_netData_inHome","bind","recvData","tip","code","G_TYPE","serverCodeType","success","goldNotEnough","tipsMgr","showConfirmTip_ONE","matchNoEnd","inHomeData","G_OBJ","data_inHomeData","net_inHomeData","getPlayer","setInHomeData"],"mappings":";;;;;;AAAA;;AAEAA,OAAOC,OAAP,GAAiBC,GAAGC,KAAH,CAAS;AACtBC,gBAAY;AACRC,wBAAiB,IADT,EADU;;AAKtB;AACAC,UAAM,gBAAY;AACd,aAAKD,cAAL,GAAsB,EAAtB;AACH,KARqB;;AAUtB;AACAE,iBAAc,qBAAUC,OAAV,EAAmBC,QAAnB,EAA6B;AACvC,aAAKJ,cAAL,CAAoBK,QAAQC,YAA5B,IAA4CF,QAA5C;AACAG,WAAGC,SAAH,CAAaC,OAAb,CAAqBJ,QAAQC,YAA7B,EAA2CH,OAA3C,EAAoD,KAAKO,eAAL,CAAqBC,IAArB,CAA0B,IAA1B,CAApD;AACH,KAdqB;AAetBD,qBAAkB,yBAAUE,QAAV,EAAoB;AAClC,YAAIC,MAAMD,SAASC,GAAnB;AACA,YAAGA,IAAIC,IAAJ,IAAYC,OAAOC,cAAP,CAAsBC,OAArC,EAA8C;AAC1C;AACA;AACA,gBAAIJ,IAAIC,IAAJ,IAAYC,OAAOC,cAAP,CAAsBE,aAAtC,EAAqD;AACjD;AACA;AACA;AACA;AACA;AACA;AACH;AACD,gBAAGX,GAAGY,OAAN,EAAeZ,GAAGY,OAAH,CAAWC,kBAAX,CAA8BP,IAAIA,GAAlC,EAAuC,YAAY;AAC9D;AACA,oBAAGA,IAAIC,IAAJ,IAAYC,OAAOC,cAAP,CAAsBK,UAArC,EAAgD;AAC5C;;AAEA;AACA;AACA;AACH;AACJ,aATc;AAUfT,uBAAW,IAAX;AACH,SAtBD,MAsBK;AACD;AACA,gBAAIU,aAAaC,MAAMC,eAAN,EAAjB;AACAF,uBAAWG,cAAX,GAA4Bb,QAA5B;AACAL,eAAGmB,SAAH,GAAeC,aAAf,CAA6BL,UAA7B;AACH;;AAED,YAAG,KAAKtB,cAAL,CAAoBK,QAAQC,YAA5B,CAAH,EAA6C;AACzC,iBAAKN,cAAL,CAAoBK,QAAQC,YAA5B,EAA0CM,QAA1C;AACA,mBAAO,KAAKZ,cAAL,CAAoBK,QAAQC,YAA5B,CAAP;AACH;AACJ;;AAlDqB,CAAT,CAAjB","file":"unknown","sourcesContent":["//socket请求数据处理,模拟http请求与回复\r\n\r\nmodule.exports = cc.Class({\r\n    properties: {\r\n        _dict_sendInfo : null,                      //请求信息\r\n    },\r\n\r\n    // use this for initialization\r\n    ctor: function () {\r\n        this._dict_sendInfo = {};\r\n    },\r\n\r\n    //进房请求\r\n    send_inHome : function (netData, callFunc) {\r\n        this._dict_sendInfo[NetType.s_enterHouse] = callFunc;\r\n        GG.socketMgr.SendMsg(NetType.s_enterHouse, netData, this._netData_inHome.bind(this));\r\n    },\r\n    _netData_inHome : function (recvData) {\r\n        var tip = recvData.tip;\r\n        if(tip.code != G_TYPE.serverCodeType.success) {\r\n            // console.log(tip.tip);\r\n            //进入房间失败-金币不足\r\n            if (tip.code == G_TYPE.serverCodeType.goldNotEnough) {\r\n                // if(GG.tipsMgr) GG.tipsMgr.showConfirmTip_ONE(tip.tip, function () {\r\n                //     //显示房间列表\r\n                //     //是否直接跳转到房间列表\r\n                //     // this._isFirstEnter = false;\r\n                //     // this._oneRequestEnd();\r\n                // }.bind(this));\r\n            }\r\n            if(GG.tipsMgr) GG.tipsMgr.showConfirmTip_ONE(tip.tip, function () {\r\n                //进入房间失败\r\n                if(tip.code == G_TYPE.serverCodeType.matchNoEnd){\r\n                    //已经开始的比赛未结束\r\n\r\n                    //清理hash信息\r\n                    // G_DATA.setCurSceneHash('',0);\r\n                    // GG.exitHome();\r\n                }\r\n            });\r\n            recvData = null;\r\n        }else{\r\n            //进房请求成功\r\n            var inHomeData = G_OBJ.data_inHomeData();\r\n            inHomeData.net_inHomeData = recvData;\r\n            GG.getPlayer().setInHomeData(inHomeData);\r\n        }\r\n\r\n        if(this._dict_sendInfo[NetType.s_enterHouse]){\r\n            this._dict_sendInfo[NetType.s_enterHouse](recvData);\r\n            delete this._dict_sendInfo[NetType.s_enterHouse]\r\n        }\r\n    },\r\n\r\n    // called every frame, uncomment this function to activate update callback\r\n    // update: function (dt) {\r\n\r\n    // },\r\n});\r\n"]}
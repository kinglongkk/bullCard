{"version":3,"sources":["assets\\Script\\Views\\GameStart.js"],"names":["gameModule","cc","Enum","platform","bull100","grab","classic","Class","extends","Component","properties","_gameState","node_gameScene","default","type","Node","displayName","gameType","onLoad","_reloadTable","tables","push","G_RES_URL","dict_tablesName","grabConfig","commonConfig","chinese","audioName","GG","tableMgr","reloadTables","_addConfigCallFunc","bind","G_TYPE","webGameState","running","table","getTable","classicConfig","dataObj","getFirstData","_addConfig","G_Config_classic","G_Config_grab","bull100Config","G_Config_common","active","targetObject","addObject","attrName","getGameState","getGameType","onDestroy","game","off","EVENT_HIDE","_pauseWebGame","EVENT_SHOW","_resumeWebGame"],"mappings":"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","file":"unknown","sourcesContent":["//整个游戏开始前的处理\r\n\r\n//对应G_TYPE.gameModule\r\nvar gameModule = cc.Enum({\r\n    platform : 0,\r\n    bull100 : 1,\r\n    grab : 2,\r\n    classic : 3\r\n})\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        _gameState : null,\r\n\r\n        node_gameScene : {\r\n            default : null,\r\n            type : cc.Node,\r\n            displayName : '整个游戏的父层'\r\n        },\r\n        gameType : {\r\n            default : 0,\r\n            type: gameModule,\r\n            displayName : '游戏模式'\r\n        }\r\n    },\r\n\r\n    // use this for initialization\r\n    onLoad: function () {\r\n        //this.node_gameScene.active = false;\r\n        //临时的处理方案，切换不同的场景\r\n        //if(window.G_InRoomType && window.G_InRoomType != this.gameType){\r\n        //    switch (window.G_InRoomType){\r\n        //        case G_TYPE.gameModule.bull100:\r\n        //            cc.director.preloadScene('Poker_Bull100', function () {\r\n        //                cc.director.loadScene('Poker_Bull100');\r\n        //            });\r\n        //            break\r\n        //        case G_TYPE.gameModule.grab:\r\n        //            cc.director.preloadScene('Poker_Grab', function () {\r\n        //                cc.director.loadScene('Poker_Grab');\r\n        //            });\r\n        //            break\r\n        //        case G_TYPE.gameModule.classic:\r\n        //            cc.director.preloadScene('Poker_classic', function () {\r\n        //                cc.director.loadScene('Poker_classic');\r\n        //            });\r\n        //            break\r\n        //        case G_TYPE.gameModule.platform:\r\n        //            cc.director.preloadScene('Platform', function () {\r\n        //                cc.director.loadScene('Platform');\r\n        //            });\r\n        //            break\r\n        //        default:\r\n        //            break\r\n        //    }\r\n        //    return\r\n        //}\r\n\r\n        //一些动画效果在脏矩形下发生错误\r\n        //if (cc._renderType === cc.game.RENDER_TYPE_CANVAS) {\r\n        //    cc.renderer.enableDirtyRegion(false);\r\n        //    cc.view.enableRetina(true);\r\n        //}\r\n\r\n        //this._reloadTable();\r\n    },\r\n\r\n    _reloadTable : function () {\r\n        var tables = [];\r\n        switch (this.gameType){\r\n            case gameModule.platform:\r\n                //tables.push(G_RES_URL.dict_tablesName.platformConfig);\r\n                break;\r\n            case gameModule.classic:\r\n                //tables.push(G_RES_URL.dict_tablesName.classicConfig);\r\n                break;\r\n            case gameModule.grab:\r\n                tables.push(G_RES_URL.dict_tablesName.grabConfig);\r\n                break;\r\n            case gameModule.bull100:\r\n                //tables.push(G_RES_URL.dict_tablesName.bull100Config);\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n        tables.push(G_RES_URL.dict_tablesName.commonConfig);\r\n        tables.push(G_RES_URL.dict_tablesName.chinese);\r\n        tables.push(G_RES_URL.dict_tablesName.audioName);\r\n        tables.push(G_RES_URL.dict_tablesName.grabConfig);\r\n        GG.tableMgr.reloadTables(tables, this._addConfigCallFunc.bind(this));\r\n    },\r\n\r\n    //加载配置文件结束\r\n    _addConfigCallFunc : function () {\r\n        this._gameState = G_TYPE.webGameState.running;\r\n\r\n        //经典看牌的主要配置\r\n        switch (this.gameType){\r\n            case gameModule.platform:\r\n                //var table = GG.tableMgr.getTable(G_RES_URL.dict_tablesName.platformConfig);\r\n                //if(table) {\r\n                //\r\n                //}\r\n                break;\r\n            case gameModule.classic:\r\n                var table = GG.tableMgr.getTable(G_RES_URL.dict_tablesName.classicConfig);\r\n                if(table) {\r\n                    var dataObj = table.getFirstData();\r\n                    this._addConfig(G_Config_classic, dataObj);\r\n                }\r\n                break;\r\n            case gameModule.grab:\r\n                var table = GG.tableMgr.getTable(G_RES_URL.dict_tablesName.grabConfig);\r\n                if(table) {\r\n                    var dataObj = table.getFirstData();\r\n                    this._addConfig(G_Config_grab, dataObj);\r\n                }\r\n                break;\r\n            case gameModule.bull100:\r\n                var table = GG.tableMgr.getTable(G_RES_URL.dict_tablesName.bull100Config);\r\n                if(table) {\r\n                    var dataObj = table.getFirstData();\r\n                    this._addConfig(G_Config_grab, dataObj);\r\n                }\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n\r\n        var table = GG.tableMgr.getTable(G_RES_URL.dict_tablesName.commonConfig);\r\n        if(table) {\r\n            var dataObj = table.getFirstData();\r\n            this._addConfig(G_Config_common, dataObj);\r\n        }\r\n        this.node_gameScene.active = true;\r\n    },\r\n\r\n    //增加配置信息\r\n    _addConfig : function (targetObject, addObject) {\r\n        if(addObject){\r\n            for(var attrName in addObject){\r\n                targetObject[attrName] = addObject[attrName];\r\n            }\r\n        }\r\n    },\r\n\r\n    getGameState : function () {\r\n        return this._gameState\r\n    },\r\n\r\n    getGameType : function () {\r\n        return this.gameType\r\n    },\r\n\r\n    onDestroy : function () {\r\n        cc.game.off(cc.game.EVENT_HIDE, this._pauseWebGame, this);\r\n        cc.game.off(cc.game.EVENT_SHOW, this._resumeWebGame, this);\r\n    },\r\n\r\n    // called every frame, uncomment this function to activate update callback\r\n    // update: function (dt) {\r\n\r\n    // },\r\n});\r\n"]}
{"version":3,"sources":["assets\\Script\\Common\\Managers\\TipsMgr.js"],"names":["cc","Class","extends","Component","properties","_curTxtTipNum","_confirmTag","_list_hideTips","prefab_confirmTip","Prefab","prefab_txtTip","node_countDownProgress","Node","node_systemTip","Node_topNotice","onLoad","GG","tipsMgr","_progressCompName","_systemTipCompName","_txtTipCompName","_confirmTipCompName","_topNoticeCompName","_dict_onlyOne","_commonScale","G_Config_common","frameScale","showTxtTip","dataObj","tip","_getTxtTip","showTip","splice","_getNewTip","getComponent","instantiate","parent","node","bindMgr","oneTipHide","tipNode","tipComp","getTipIndex","push","showOnlyOne","tipIndex","getIsShow","forceChangeCountDown","retainTime","showProgressCountDown","time","callFunc","showCountDown","getProgressLeaveTime","getLeaveTime","forceProgressEnd","forceEnd","showConfirmTip_ONE","showStr","confirmPage","getChildByTag","tag","showContentEx","showConfirmTip_TWO","callFunc2","showContent","clearConfirm","confirm","comp","active","closePage","registerConfirm","func","isRegister","registerFunc","showSystem","pos","callBack","addNotice","msg","addMsg","setTouchLimit","isLimit","on","EventType","TOUCH_START","_limitCall","off"],"mappings":";;;;;;AAAA;;AAEAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;AAELC,gBAAY;AACRC,uBAAgB,IADR;AAERC,qBAAc,IAFN,EAEuD;AAC/DC,wBAAiB,IAHT,EAGuD;;AAE/DC,2BAAoBR,GAAGS,MALf,EAKsD;AAC9DC,uBAAgBV,GAAGS,MANX,EAMuD;;AAE/DE,gCAAyBX,GAAGY,IARpB,EAQsD;AAC9DC,wBAAiBb,GAAGY,IATZ,EASuD;AAC/DE,wBAAiBd,GAAGY,IAVZ,EAFP;;AAeL;AACAG,YAAQ,kBAAY;AAChBC,WAAGC,OAAH,GAAa,IAAb;;AAEA,aAAKC,iBAAL,GAAyB,uBAAzB;AACA,aAAKC,kBAAL,GAA0B,eAA1B;AACA,aAAKC,eAAL,GAAuB,YAAvB;AACA,aAAKC,mBAAL,GAA2B,gBAA3B;AACA,aAAKC,kBAAL,GAA0B,YAA1B;AACA,aAAKC,aAAL,GAAqB,EAArB;AACA,aAAKlB,aAAL,GAAqB,CAArB;AACA,aAAKmB,YAAL,GAAoBC,gBAAgBC,UAApC;AACA,aAAKpB,WAAL,GAAmB,CAAnB;AACA,aAAKC,cAAL,GAAsB,EAAtB;AACH,KA7BI;;AA+BL;AACAoB,gBAAa,oBAAUC,OAAV,EAAmB;AAC5B,YAAIC,MAAM,KAAKC,UAAL,EAAV,CAA4B;AAC5BD,YAAIE,OAAJ,CAAYH,OAAZ;AACA,eAAOC,GAAP;AACH,KApCI;AAqCLC,gBAAa,sBAAY;AACrB,YAAID,MAAM,KAAKtB,cAAL,CAAoByB,MAApB,CAA2B,CAA3B,EAA6B,CAA7B,EAAgC,CAAhC,CAAV;AACA,YAAG,CAACH,GAAJ,EAAQ;AACJA,kBAAM,KAAKI,UAAL,EAAN;AACH;;AAED,eAAOJ,IAAIK,YAAJ,CAAiB,KAAKd,eAAtB,CAAP;AACH,KA5CI;AA6CLa,gBAAa,sBAAY;AACrB,YAAIJ,MAAM7B,GAAGmC,WAAH,CAAe,KAAKzB,aAApB,CAAV;AACA;AACAmB,YAAIO,MAAJ,GAAa,KAAKC,IAAlB;AACA;AACAR,YAAIK,YAAJ,CAAiB,KAAKd,eAAtB,EAAuCkB,OAAvC,CAA+C,IAA/C;AACA,aAAKjC,aAAL,IAAsB,CAAtB;AACA,eAAOwB,GAAP;AACH,KArDI;AAsDLU,gBAAa,oBAAUC,OAAV,EAAmB;AAC5B,YAAIC,UAAUD,QAAQN,YAAR,CAAqB,KAAKd,eAA1B,CAAd;AACA,YAAGqB,OAAH,EAAW;AACP,gBAAG,CAAC,KAAKlB,aAAL,CAAmBkB,QAAQC,WAAR,EAAnB,CAAJ,EAA8C;AAC1C,qBAAKnC,cAAL,CAAoBoC,IAApB,CAAyBH,OAAzB;AACH;AACJ;AACJ,KA7DI;;AA+DL;;AAEAI,iBAAc,qBAAUhB,OAAV,EAAmB;AAC7B,YAAG,CAAC,KAAKL,aAAT,EAAwB,KAAKA,aAAL,GAAqB,EAArB;AACxB,YAAIsB,WAAWjB,QAAQiB,QAAvB;AACA,YAAIhB,MAAM,KAAKN,aAAL,CAAmBsB,QAAnB,CAAV;AACA,YAAGhB,GAAH,EAAO;AACH,gBAAGA,IAAIiB,SAAJ,EAAH,EAAmB;AACfjB,oBAAIkB,oBAAJ,CAAyBnB,QAAQoB,UAAjC;AACH,aAFD,MAEK;AACDnB,oBAAIE,OAAJ,CAAYH,OAAZ;AACH;AACJ,SAND,MAMK;AACDC,kBAAM,KAAKI,UAAL,GAAkBC,YAAlB,CAA+B,KAAKd,eAApC,CAAN;AACA,iBAAKG,aAAL,CAAmBsB,QAAnB,IAA+BhB,GAA/B;AACAA,gBAAIE,OAAJ,CAAYH,OAAZ;AACH;AACD,eAAOC,GAAP;AACH,KAjFI;;AAmFL;;AAEA;AACAoB,2BAAwB,+BAAUC,IAAV,EAAgBC,QAAhB,EAA0B;AAC9C,aAAKxC,sBAAL,CAA4BuB,YAA5B,CAAyC,KAAKhB,iBAA9C,EAAiEkC,aAAjE,CAA+EF,IAA/E,EAAqFC,QAArF;AACH,KAxFI;AAyFLE,0BAAuB,gCAAY;AAC/B,eAAO,KAAK1C,sBAAL,CAA4BuB,YAA5B,CAAyC,KAAKhB,iBAA9C,EAAiEoC,YAAjE,EAAP;AACH,KA3FI;AA4FLC,sBAAmB,4BAAY;AAC3B,aAAK5C,sBAAL,CAA4BuB,YAA5B,CAAyC,KAAKhB,iBAA9C,EAAiEsC,QAAjE;AACH,KA9FI;;AAgGL;;AAEA;AACAC,wBAAqB,4BAAUC,OAAV,EAAmBP,QAAnB,EAA6B;AAC9C,YAAIQ,cAAc,KAAKtB,IAAL,CAAUuB,aAAV,CAAwB,KAAKtD,WAA7B,CAAlB;AACA,YAAG,CAACqD,WAAJ,EAAgB;AACZA,0BAAc3D,GAAGmC,WAAH,CAAe,KAAK3B,iBAApB,CAAd;AACAmD,wBAAYvB,MAAZ,GAAqB,KAAKC,IAA1B;AACAsB,wBAAYE,GAAZ,GAAkB,CAAlB;AACH;AACDF,oBAAYzB,YAAZ,CAAyB,KAAKb,mBAA9B,EAAmDyC,aAAnD,CAAiEJ,OAAjE,EAA0EP,QAA1E;AACH,KA3GI;AA4GL;AACAY,wBAAqB,4BAAUL,OAAV,EAAmBP,QAAnB,EAA6Ba,SAA7B,EAAwC;AACzD,YAAIL,cAAc,KAAKtB,IAAL,CAAUuB,aAAV,CAAwB,KAAKtD,WAA7B,CAAlB;AACA,YAAG,CAACqD,WAAJ,EAAgB;AACZA,0BAAc3D,GAAGmC,WAAH,CAAe,KAAK3B,iBAApB,CAAd;AACAmD,wBAAYvB,MAAZ,GAAqB,KAAKC,IAA1B;AACAsB,wBAAYE,GAAZ,GAAkB,CAAlB;AACH;AACDF,oBAAYzB,YAAZ,CAAyB,KAAKb,mBAA9B,EAAmD4C,WAAnD,CAA+DP,OAA/D,EAAwEP,QAAxE,EAAkFa,SAAlF;AACH,KArHI;;AAuHL;AACAE,kBAAe,wBAAY;AACvB,YAAIC,UAAU,KAAK9B,IAAL,CAAUuB,aAAV,CAAwB,KAAKtD,WAA7B,CAAd;AACA,YAAG6D,OAAH,EAAW;AACP,gBAAIC,OAAOD,QAAQjC,YAAR,CAAqB,KAAKb,mBAA1B,CAAX;AACA,gBAAG+C,QAAQD,QAAQE,MAAnB,EAA2BD,KAAKE,SAAL;AAC9B;AACJ,KA9HI;;AAgIL;AACAC,qBAAkB,yBAAUC,IAAV,EAAgBC,UAAhB,EAA4B;AAC1C,YAAG,CAAC,KAAKpC,IAAT,EAAe;AACf,YAAI8B,UAAU,KAAK9B,IAAL,CAAUuB,aAAV,CAAwB,KAAKtD,WAA7B,CAAd;AACA,YAAG6D,OAAH,EAAW;AACPA,oBAAQjC,YAAR,CAAqB,KAAKb,mBAA1B,EAA+CqD,YAA/C,CAA4DF,IAA5D,EAAkEC,UAAlE;AACH;AACJ,KAvII;;AAyIL;;AAEA;AACAE,gBAAa,oBAAUjB,OAAV,EAAmBkB,GAAnB,EAAwB1B,IAAxB,EAA8B2B,QAA9B,EAAwC;AACjD,aAAKhE,cAAL,CAAoBqB,YAApB,CAAiC,KAAKf,kBAAtC,EAA0D8C,WAA1D,CAAsEP,OAAtE,EAA+EkB,GAA/E,EAAoF1B,IAApF,EAA0F2B,QAA1F;AACH,KA9II;;AAgJL;;AAEA;AACAC,eAAY,mBAAUC,GAAV,EAAe;AACvB,aAAKjE,cAAL,CAAoBoB,YAApB,CAAiC,KAAKZ,kBAAtC,EAA0D0D,MAA1D,CAAiED,GAAjE;AACH,KArJI;;AAwJL;AACAE,mBAAgB,uBAAUC,OAAV,EAAmB;AAC/B,YAAI9C,SAAS,KAAKC,IAAL,CAAUD,MAAvB;AACA,YAAG8C,OAAH,EAAY9C,OAAO+C,EAAP,CAAUnF,GAAGY,IAAH,CAAQwE,SAAR,CAAkBC,WAA5B,EAAyC,KAAKC,UAA9C,EAA0D,IAA1D,EAAZ,KACKlD,OAAOmD,GAAP,CAAWvF,GAAGY,IAAH,CAAQwE,SAAR,CAAkBC,WAA7B,EAA0C,KAAKC,UAA/C,EAA2D,IAA3D;AACR,KA7JI;AA8JLA,gBAAa,sBAAY,CAAE;;AA9JtB,CAAT","file":"unknown","sourcesContent":["//提示弹窗类的管理器\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n    properties: {\r\n        _curTxtTipNum : null,\r\n        _confirmTag : null,                                            //确认框显示标记\r\n        _list_hideTips : null,                                         //隐藏并可复用的tip\r\n\r\n        prefab_confirmTip : cc.Prefab,                                //可点击确定的弹窗\r\n        prefab_txtTip : cc.Prefab,                                     //文本提示\r\n\r\n        node_countDownProgress : cc.Node,                             //图形文字倒计时提示\r\n        node_systemTip : cc.Node,                                      //系统提示\r\n        Node_topNotice : cc.Node,                                      //公告通知类\r\n    },\r\n\r\n    // use this for initialization\r\n    onLoad: function () {\r\n        GG.tipsMgr = this;\r\n\r\n        this._progressCompName = 'Obj_countDownProgress';\r\n        this._systemTipCompName = 'Obj_systemTip';\r\n        this._txtTipCompName = 'Obj_txtTip';\r\n        this._confirmTipCompName = 'Obj_confirmTip';\r\n        this._topNoticeCompName = 'Obj_notice';\r\n        this._dict_onlyOne = {};\r\n        this._curTxtTipNum = 0;\r\n        this._commonScale = G_Config_common.frameScale;\r\n        this._confirmTag = 3;\r\n        this._list_hideTips = [];\r\n    },\r\n\r\n    //显示纯文本弹窗, pos为空默认显示在中央, 可重复使用的tip\r\n    showTxtTip : function (dataObj) {\r\n        var tip = this._getTxtTip();;\r\n        tip.showTip(dataObj);\r\n        return tip\r\n    },\r\n    _getTxtTip : function () {\r\n        var tip = this._list_hideTips.splice(0,1)[0];\r\n        if(!tip){\r\n            tip = this._getNewTip();\r\n        }\r\n\r\n        return tip.getComponent(this._txtTipCompName)\r\n    },\r\n    _getNewTip : function () {\r\n        var tip = cc.instantiate(this.prefab_txtTip);\r\n        //this.node.addChild(tip, 0, this._curTxtTipNum);\r\n        tip.parent = this.node;\r\n        //tip.scale = this._commonScale;\r\n        tip.getComponent(this._txtTipCompName).bindMgr(this);\r\n        this._curTxtTipNum += 1;\r\n        return tip\r\n    },\r\n    oneTipHide : function (tipNode) {\r\n        var tipComp = tipNode.getComponent(this._txtTipCompName);\r\n        if(tipComp){\r\n            if(!this._dict_onlyOne[tipComp.getTipIndex()]){\r\n                this._list_hideTips.push(tipNode);\r\n            }\r\n        }\r\n    },\r\n\r\n    //=---------------------------只显示一次的tip\r\n\r\n    showOnlyOne : function (dataObj) {\r\n        if(!this._dict_onlyOne) this._dict_onlyOne = {};\r\n        var tipIndex = dataObj.tipIndex;\r\n        var tip = this._dict_onlyOne[tipIndex];\r\n        if(tip){\r\n            if(tip.getIsShow()){\r\n                tip.forceChangeCountDown(dataObj.retainTime);\r\n            }else{\r\n                tip.showTip(dataObj);\r\n            }\r\n        }else{\r\n            tip = this._getNewTip().getComponent(this._txtTipCompName);\r\n            this._dict_onlyOne[tipIndex] = tip;\r\n            tip.showTip(dataObj);\r\n        }\r\n        return tip\r\n    },\r\n\r\n    //======================================\r\n\r\n    //显示倒计时文字图形\r\n    showProgressCountDown : function (time, callFunc) {\r\n        this.node_countDownProgress.getComponent(this._progressCompName).showCountDown(time, callFunc);\r\n    },\r\n    getProgressLeaveTime : function () {\r\n        return this.node_countDownProgress.getComponent(this._progressCompName).getLeaveTime();\r\n    },\r\n    forceProgressEnd : function () {\r\n        this.node_countDownProgress.getComponent(this._progressCompName).forceEnd();\r\n    },\r\n\r\n    //======================================\r\n\r\n    //显示可点击确定的弹窗   单选按钮\r\n    showConfirmTip_ONE : function (showStr, callFunc) {\r\n        var confirmPage = this.node.getChildByTag(this._confirmTag);\r\n        if(!confirmPage){\r\n            confirmPage = cc.instantiate(this.prefab_confirmTip);\r\n            confirmPage.parent = this.node;\r\n            confirmPage.tag = 3;\r\n        }\r\n        confirmPage.getComponent(this._confirmTipCompName).showContentEx(showStr, callFunc);\r\n    },\r\n    //多选按钮\r\n    showConfirmTip_TWO : function (showStr, callFunc, callFunc2) {\r\n        var confirmPage = this.node.getChildByTag(this._confirmTag);\r\n        if(!confirmPage){\r\n            confirmPage = cc.instantiate(this.prefab_confirmTip);\r\n            confirmPage.parent = this.node;\r\n            confirmPage.tag = 3;\r\n        }\r\n        confirmPage.getComponent(this._confirmTipCompName).showContent(showStr, callFunc, callFunc2);\r\n    },\r\n\r\n    //清理弹出的确认框\r\n    clearConfirm : function () {\r\n        var confirm = this.node.getChildByTag(this._confirmTag);\r\n        if(confirm){\r\n            var comp = confirm.getComponent(this._confirmTipCompName);\r\n            if(comp && confirm.active) comp.closePage();\r\n        }\r\n    },\r\n\r\n    //注册确认框的打开关闭事件监听   isRegister: 是否开启监听\r\n    registerConfirm : function (func, isRegister) {\r\n        if(!this.node) return;\r\n        var confirm = this.node.getChildByTag(this._confirmTag);\r\n        if(confirm){\r\n            confirm.getComponent(this._confirmTipCompName).registerFunc(func, isRegister);\r\n        }\r\n    },\r\n\r\n    //======================================\r\n\r\n    //显示体统提示\r\n    showSystem : function (showStr, pos, time, callBack) {\r\n        this.node_systemTip.getComponent(this._systemTipCompName).showContent(showStr, pos, time, callBack);\r\n    },\r\n\r\n    //======================================\r\n\r\n    //显示公告信息\r\n    addNotice : function (msg) {\r\n        this.Node_topNotice.getComponent(this._topNoticeCompName).addMsg(msg);\r\n    },\r\n\r\n\r\n    //添加禁止点击层，仅对touch事件吞噬，对mouse事件没有效果;\r\n    setTouchLimit : function (isLimit) {\r\n        var parent = this.node.parent;\r\n        if(isLimit) parent.on(cc.Node.EventType.TOUCH_START, this._limitCall, this);\r\n        else parent.off(cc.Node.EventType.TOUCH_START, this._limitCall, this);\r\n    },\r\n    _limitCall : function () {},\r\n\r\n\r\n    // called every frame, uncomment this function to activate update callback\r\n    // update: function (dt) {\r\n\r\n    // },\r\n});\r\n"]}
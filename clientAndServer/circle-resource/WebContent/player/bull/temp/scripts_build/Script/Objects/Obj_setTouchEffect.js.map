{"version":3,"sources":["assets\\Script\\Objects\\Obj_setTouchEffect.js"],"names":["cc","Class","extends","Component","properties","_touchEffect","frame_touchEffect","SpriteFrame","onLoad","addTouchListener","node","on","Node","EventType","TOUCH_START","touchCall","event","pos","p","getLocationX","getLocationY","_showTouchEff","convertToNodeSpace","parent","node1","addChild","sp1","addComponent","Sprite","spriteFrame","node2","active","position","getChildByTag","stopAllActions","scale","opacity","time","act1","scaleTo","act2","fadeTo","runAction","sequence","spawn","callFunc","_effCall","delayTime","act3"],"mappings":";;;;;;AAAA;;;;AAIA;AACAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,sBAAe,IADP,EACoC;;AAE5CC,2BAAoBN,GAAGO;AAHf,KAHP;;AASL;AACAC,YAAQ,kBAAY;AAChB,aAAKC,gBAAL;AACH,KAZI;;AAcL;AACAA,sBAAmB,4BAAY;AAC3B,YAAG,CAAC,KAAKH,iBAAT,EAA4B;AAC5B,aAAKI,IAAL,CAAUC,EAAV,CAAaX,GAAGY,IAAH,CAAQC,SAAR,CAAkBC,WAA/B,EAA4C,KAAKC,SAAjD,EAA4D,IAA5D;AACH,KAlBI;AAmBLA,eAAY,mBAAUC,KAAV,EAAiB;AACzB,YAAIC,MAAMjB,GAAGkB,CAAH,CAAKF,MAAMG,YAAN,EAAL,EAA2BH,MAAMI,YAAN,EAA3B,CAAV;AACA,aAAKC,aAAL,CAAmBJ,GAAnB;AACH,KAtBI;;AAwBL;AACAI,mBAAgB,uBAAUJ,GAAV,EAAe;AAC3BA,cAAM,KAAKP,IAAL,CAAUY,kBAAV,CAA6BL,GAA7B,CAAN;AACA,YAAG,CAAC,KAAKZ,YAAT,EAAsB;AAClB,iBAAKA,YAAL,GAAoB,IAAIL,GAAGY,IAAP,EAApB;AACA,iBAAKP,YAAL,CAAkBkB,MAAlB,GAA2B,KAAKb,IAAhC;;AAEA,gBAAIc,QAAQ,IAAIxB,GAAGY,IAAP,EAAZ;AACA,iBAAKP,YAAL,CAAkBoB,QAAlB,CAA2BD,KAA3B,EAAkC,CAAlC,EAAqC,CAArC;AACA,gBAAIE,MAAMF,MAAMG,YAAN,CAAmB3B,GAAG4B,MAAtB,EAA8BC,WAA9B,GAA4C,KAAKvB,iBAA3D;;AAEA,gBAAIwB,QAAQ,IAAI9B,GAAGY,IAAP,EAAZ;AACA,iBAAKP,YAAL,CAAkBoB,QAAlB,CAA2BK,KAA3B,EAAkC,CAAlC,EAAqC,CAArC;AACA,gBAAIJ,MAAMI,MAAMH,YAAN,CAAmB3B,GAAG4B,MAAtB,EAA8BC,WAA9B,GAA4C,KAAKvB,iBAA3D;AACH;AACD,aAAKD,YAAL,CAAkB0B,MAAlB,GAA2B,IAA3B;AACA,aAAK1B,YAAL,CAAkB2B,QAAlB,GAA6Bf,GAA7B;AACA,YAAIO,QAAQ,KAAKnB,YAAL,CAAkB4B,aAAlB,CAAgC,CAAhC,CAAZ;AACA,YAAIH,QAAQ,KAAKzB,YAAL,CAAkB4B,aAAlB,CAAgC,CAAhC,CAAZ;AACAT,cAAMU,cAAN;AACAJ,cAAMI,cAAN;;AAEAV,cAAMW,KAAN,GAAc,GAAd;AACAX,cAAMY,OAAN,GAAgB,GAAhB;;AAEA,YAAIC,OAAO,GAAX;AACA,YAAIC,OAAOtC,GAAGuC,OAAH,CAAWF,IAAX,EAAiB,CAAjB,CAAX;AACA,YAAIG,OAAOxC,GAAGyC,MAAH,CAAUJ,IAAV,EAAgB,EAAhB,CAAX;AACAb,cAAMkB,SAAN,CAAgB1C,GAAG2C,QAAH,CAAY3C,GAAG4C,KAAH,CAASN,IAAT,EAAeE,IAAf,CAAZ,EAAkCxC,GAAG6C,QAAH,CAAY,KAAKC,QAAjB,EAA2B,IAA3B,CAAlC,CAAhB;;AAEAhB,cAAMK,KAAN,GAAc,GAAd;AACAL,cAAMM,OAAN,GAAgB,GAAhB;AACAE,eAAOtC,GAAG+C,SAAH,CAAaV,OAAK,GAAlB,CAAP;AACAG,eAAOxC,GAAGuC,OAAH,CAAWF,OAAK,GAAhB,EAAqB,GAArB,CAAP;AACA,YAAIW,OAAOhD,GAAGyC,MAAH,CAAU,CAAV,EAAa,CAAb,CAAX;AACAX,cAAMY,SAAN,CAAgB1C,GAAG2C,QAAH,CAAYL,IAAZ,EAAkBE,IAAlB,EAAwBQ,IAAxB,CAAhB;AACH,KA5DI;;AA8DLF,cAAW,oBAAY;AACnB,YAAG,KAAKzC,YAAR,EAAqB;AACjB,iBAAKA,YAAL,CAAkB0B,MAAlB,GAA2B,KAA3B;AACH;AACJ;;AAlEI,CAAT","file":"unknown","sourcesContent":["/**\r\n * Created by lenovo on 2016/12/27.\r\n */\r\n\r\n//最上层的点击\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        _touchEffect : null,                        //点击特效\r\n\r\n        frame_touchEffect : cc.SpriteFrame,\r\n    },\r\n\r\n    // use this for initialization\r\n    onLoad: function () {\r\n        this.addTouchListener();\r\n    },\r\n\r\n    //添加点击事件\r\n    addTouchListener : function () {\r\n        if(!this.frame_touchEffect) return;\r\n        this.node.on(cc.Node.EventType.TOUCH_START, this.touchCall, this);\r\n    },\r\n    touchCall : function (event) {\r\n        var pos = cc.p(event.getLocationX(), event.getLocationY());\r\n        this._showTouchEff(pos);\r\n    },\r\n\r\n    //显示点击特效\r\n    _showTouchEff : function (pos) {\r\n        pos = this.node.convertToNodeSpace(pos);\r\n        if(!this._touchEffect){\r\n            this._touchEffect = new cc.Node();\r\n            this._touchEffect.parent = this.node;\r\n\r\n            var node1 = new cc.Node();\r\n            this._touchEffect.addChild(node1, 0, 1);\r\n            var sp1 = node1.addComponent(cc.Sprite).spriteFrame = this.frame_touchEffect;\r\n\r\n            var node2 = new cc.Node();\r\n            this._touchEffect.addChild(node2, 0, 2);\r\n            var sp1 = node2.addComponent(cc.Sprite).spriteFrame = this.frame_touchEffect;\r\n        }\r\n        this._touchEffect.active = true;\r\n        this._touchEffect.position = pos;\r\n        var node1 = this._touchEffect.getChildByTag(1);\r\n        var node2 = this._touchEffect.getChildByTag(2);\r\n        node1.stopAllActions();\r\n        node2.stopAllActions();\r\n\r\n        node1.scale = 0.1;\r\n        node1.opacity = 255;\r\n\r\n        var time = 0.5;\r\n        var act1 = cc.scaleTo(time, 1);\r\n        var act2 = cc.fadeTo(time, 70);\r\n        node1.runAction(cc.sequence(cc.spawn(act1, act2), cc.callFunc(this._effCall, this)));\r\n\r\n        node2.scale = 0.1;\r\n        node2.opacity = 255;\r\n        act1 = cc.delayTime(time*0.2);\r\n        act2 = cc.scaleTo(time*0.6, 0.7);\r\n        var act3 = cc.fadeTo(0, 0);\r\n        node2.runAction(cc.sequence(act1, act2, act3))\r\n    },\r\n\r\n    _effCall : function () {\r\n        if(this._touchEffect){\r\n            this._touchEffect.active = false;\r\n        }\r\n    },\r\n\r\n    // called every frame, uncomment this function to activate update callback\r\n    // update: function (dt) {\r\n\r\n    // },\r\n});\r\n"]}
{"version":3,"sources":["assets\\Script\\Views\\Scene_Grab\\Grab_tablesLayer.js"],"names":["cc","Class","extends","Component","properties","_dict_tables","frame_gold","default","type","SpriteFrame","displayName","onLoad","_init","_talbeCompName","tables","node","children","i","length","table","getComponent","getResultType","setStartInfo","areaInfo","multipleInfo","key","setInfo","clearData","touchOneTable","tableIndex","goldInfo","otherAddGold","setTouchEnable","isEnable","setTableWin","pokerResult","getWorldPos","showOwnerGold","dict","showOwnerResult","getTablePos","getTable","getWinGold","tableList","isWin","index","lostGold","winGold","isWinIndex","getGrabGold","getLostGold","goldNum","getLeaveGoldImages","leaveGoldNum","recordDict","getLeaveGoldImg"],"mappings":"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","file":"unknown","sourcesContent":["//可以点击投注的所有格子所在的层\r\n\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        _dict_tables : null,\r\n\r\n        frame_gold : {\r\n            default : null,\r\n            type : cc.SpriteFrame,\r\n            displayName : '金币图片'\r\n        },\r\n    },\r\n\r\n    // use this for initialization\r\n    onLoad: function () {\r\n        this._init();\r\n    },\r\n\r\n    _init : function () {\r\n        this._talbeCompName = 'Grab_oneTable';\r\n        if(!this._dict_tables) {\r\n            this._dict_tables = {};\r\n            var tables = this.node.children;\r\n            for(var i = 0; i < tables.length; i ++){\r\n                var table = tables[i].getComponent(this._talbeCompName);\r\n                this._dict_tables[table.getResultType()] = table;\r\n            }\r\n        }\r\n    },\r\n\r\n    setStartInfo : function (areaInfo) {\r\n        var multipleInfo = {};\r\n        //for(var i = 0; i < areaInfo.length; i ++){\r\n        //    var infoDict = areaInfo[i];\r\n        //    multipleInfo[infoDict['area']] = infoDict['bei'];\r\n        //}\r\n        //multipleInfo = {0:2,1:13,2:13,3:13,4:13,5:13,6:13,7:13,8:13,9:13,10:12}\r\n        multipleInfo = areaInfo;\r\n        var table;\r\n        for(var key in this._dict_tables){\r\n            table = this._dict_tables[key];\r\n            table.setInfo(this.frame_gold, key, multipleInfo[key]);\r\n        }\r\n    },\r\n\r\n    clearData : function () {\r\n        for(var key in this._dict_tables){\r\n            this._dict_tables[key].clearData();\r\n        }\r\n    },\r\n\r\n    //0--10\r\n    touchOneTable : function (tableIndex, goldInfo) {\r\n        return this._dict_tables[tableIndex].otherAddGold(goldInfo);\r\n    },\r\n\r\n    setTouchEnable : function (isEnable) {\r\n        for(var key in this._dict_tables){\r\n            this._dict_tables[key].setTouchEnable(isEnable);\r\n        }\r\n    },\r\n\r\n    setTableWin : function (pokerResult) {\r\n        var table = this._dict_tables[pokerResult];\r\n        table.setTableWin(true);\r\n        return table.getWorldPos();\r\n    },\r\n    showOwnerGold : function (dict) {\r\n        for(var tableIndex in dict){\r\n            this._dict_tables[tableIndex].showOwnerResult();\r\n        }\r\n    },\r\n    getTablePos : function (pokerResult) {\r\n        return this._dict_tables[pokerResult].getWorldPos();\r\n    },\r\n\r\n    getTable : function (pokerResult) {\r\n        return this._dict_tables[pokerResult]\r\n    },\r\n\r\n    getWinGold : function (tableList) {\r\n        var isWin = function (index) {\r\n            for(var i = 0; i < tableList.length; i ++){\r\n                if(index == tableList[i]) return true;\r\n            }\r\n            return false\r\n        }\r\n\r\n        var lostGold=0, winGold=0;\r\n        for(var index in this._dict_tables){\r\n            var isWinIndex = isWin(index);\r\n            if(isWinIndex){\r\n                winGold += this._dict_tables[index].getGrabGold()\r\n            } else lostGold += this._dict_tables[index].getLostGold()\r\n        }\r\n        var goldNum = winGold - lostGold;\r\n        return goldNum\r\n    },\r\n    //获取剩余没有被移除的金币信息\r\n    getLeaveGoldImages : function () {\r\n        var table, leaveGoldNum, recordDict={};\r\n        for(var index in this._dict_tables){\r\n            table = this._dict_tables[index];\r\n            leaveGoldNum = table.getLeaveGoldImg();\r\n            if(table && leaveGoldNum>0){\r\n                //该区域还有剩余金币\r\n                recordDict[index] = leaveGoldNum;\r\n            }\r\n        }\r\n        return recordDict\r\n    },\r\n\r\n\r\n    // called every frame, uncomment this function to activate update callback\r\n    // update: function (dt) {\r\n\r\n    // },\r\n});\r\n"]}
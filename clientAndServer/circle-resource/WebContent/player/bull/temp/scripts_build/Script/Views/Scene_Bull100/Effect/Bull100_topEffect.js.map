{"version":3,"sources":["assets\\Script\\Views\\Scene_Bull100\\Effect\\Bull100_topEffect.js"],"names":["cc","Class","extends","Component","properties","_bettingCallFunc","_startCallFunc","_resultData","prefab_start","default","type","Prefab","displayName","prefab_betting","prefab_win","prefab_lose","prefab_showResult","node_grayLayer","Node","onLoad","_winAniName","_loseAniName","_resultCompName","_pokerResultCompName","playStartGameAni","callFunc","playStartAni","GG","audioMgr","playSound","aniName","_startAni","instantiate","parent","node","comp","getComponent","dragonBones","ArmatureDisplay","addEventListener","EventObject","COMPLETE","_startAniEnd","designSize","view","getDesignResolutionSize","position","p","width","height","active","playAnimation","event","_frameEvent","bull100Mgr","shakeGame","clearStartAni","playStartBettingAni","playBettingAni","playBettingEnd","_bettingAni","_bettingAniEnd","pos","G_DATA","getTopTipPos","x","y","clearBettingAni","showResultEffect","data","myChangeGold","undefined","setGrayIsShow","_playWin","_playLose","_winCallFunc","_winAni","_winEnd","_getResultComp","showResult","runAction","sequence","delayTime","_setIsShow","_clearWin","stopAllActions","_loseCallFunc","_loseAni","_loseEnd","_resultComp","result","addChild","_clearLose","isShow","getGrayLayer","clearAll"],"mappings":"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","file":"unknown","sourcesContent":["//放在游戏最上面的特效\r\n\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        _bettingCallFunc : null,                                                                //开始投注动画的回调\r\n        _startCallFunc : null,                                                                //开始游戏动画的回调\r\n        _resultData : null,                                                                      //结算界面中的数据\r\n\r\n        prefab_start : {\r\n            default : null,\r\n            type : cc.Prefab,\r\n            displayName : '开始游戏动画'\r\n        },\r\n        prefab_betting : {\r\n            default : null,\r\n            type : cc.Prefab,\r\n            displayName : '开始投注动画'\r\n        },\r\n        prefab_win : {\r\n            default : null,\r\n            type : cc.Prefab,\r\n            displayName : '胜利动画'\r\n        },\r\n        prefab_lose : {\r\n            default : null,\r\n            type : cc.Prefab,\r\n            displayName : '失败动画'\r\n        },\r\n        prefab_showResult : {\r\n            default : null,\r\n            type : cc.Prefab,\r\n            displayName : '结果显示容器'\r\n        },\r\n        node_grayLayer : {\r\n            default : null,\r\n            type : cc.Node,\r\n            displayName : '灰色层'\r\n        },\r\n    },\r\n\r\n    // use this for initialization\r\n    onLoad: function () {\r\n        this._winAniName = 'platform_win';\r\n        this._loseAniName = 'platform_lose';\r\n        this._resultCompName = 'Bull100_showResult';\r\n        this._pokerResultCompName = 'Obj_onPokerResult';\r\n    },\r\n\r\n    //开始游戏\r\n    playStartGameAni : function (callFunc) {\r\n        this.playStartAni('grab_start',callFunc);\r\n        GG.audioMgr.playSound(13);\r\n    },\r\n    //播放开始动画\r\n    playStartAni : function (aniName, callFunc) {\r\n        if(!aniName) aniName = '';\r\n        this._startCallFunc = callFunc;\r\n        if(!this._startAni){\r\n            this._startAni = cc.instantiate(this.prefab_start);\r\n            this._startAni.parent = this.node;\r\n            //ani.scale = G_Config_common.frameScale;\r\n            var comp = this._startAni.getComponent(dragonBones.ArmatureDisplay);\r\n            //comp.addEventListener(dragonBones.EventObject.FRAME_EVENT, this._frameEvent, this);\r\n            comp.addEventListener(dragonBones.EventObject.COMPLETE, this._startAniEnd, this);\r\n        }\r\n\r\n        var designSize = cc.view.getDesignResolutionSize()\r\n        this._startAni.position = cc.p(designSize.width/2, designSize.height/2);\r\n        this._startAni.active = true;\r\n        this._startAni.getComponent(dragonBones.ArmatureDisplay).playAnimation(aniName, 1);\r\n    },\r\n    _startAniEnd : function (event) {\r\n        //动画结束\r\n        if(this._startAni) this._startAni.active = false;\r\n        if(this._startCallFunc) {\r\n            this._startCallFunc();\r\n            this._startCallFunc = null;\r\n        }\r\n    },\r\n    _frameEvent : function (event) {\r\n        GG.bull100Mgr.shakeGame();\r\n    },\r\n    //清理开始动画\r\n    clearStartAni : function () {\r\n        if(this._startAni) this._startAni.active = false;\r\n        this._startCallFunc = null;\r\n    },\r\n\r\n    //============================================\r\n\r\n    //开始投注\r\n    playStartBettingAni : function (callFunc) {\r\n        this.playBettingAni('platform_bet',callFunc);\r\n    },\r\n    //投注结束\r\n    playBettingEnd : function (callFunc) {\r\n        this.playBettingAni('platform_betOver',callFunc);\r\n    },\r\n    //播放开始投注动画\r\n    playBettingAni : function (aniName, callFunc) {\r\n        if(!aniName) aniName = '';\r\n        this._bettingCallFunc = callFunc;\r\n        if(!this._bettingAni){\r\n            this._bettingAni = cc.instantiate(this.prefab_betting);\r\n            this._bettingAni.parent = this.node;\r\n            //ani.scale = G_Config_common.frameScale;\r\n            var comp = this._bettingAni.getComponent(dragonBones.ArmatureDisplay);\r\n            //comp.addEventListener(dragonBones.EventObject.FRAME_EVENT, this._frameEvent, this);\r\n            comp.addEventListener(dragonBones.EventObject.COMPLETE, this._bettingAniEnd, this);\r\n        }\r\n        var pos = G_DATA.getTopTipPos();\r\n        this._bettingAni.position = cc.p(pos.x, pos.y-150);\r\n        this._bettingAni.active = true;\r\n        this._bettingAni.getComponent(dragonBones.ArmatureDisplay).playAnimation(aniName, 1);\r\n    },\r\n    _bettingAniEnd : function (event) {\r\n        //动画结束\r\n        if(this._bettingAni) this._bettingAni.active = false;\r\n        if(this._bettingCallFunc) {\r\n            this._bettingCallFunc();\r\n            this._bettingCallFunc = null;\r\n        }\r\n    },\r\n    //清理开始投注动画\r\n    clearBettingAni : function () {\r\n        if(this._bettingAni) {\r\n            this._bettingAni.active = false;\r\n        }\r\n        this._bettingCallFunc = null;\r\n    },\r\n\r\n\r\n    //================================胜利动画\r\n\r\n    //显示胜利或者失败\r\n    showResultEffect : function (data, callFunc) {\r\n        if(data.myChangeGold != undefined){\r\n            this.setGrayIsShow(true);\r\n            if(data.myChangeGold > 0){\r\n                this._playWin(data, callFunc);\r\n            }else{\r\n                this._playLose(data, callFunc);\r\n            }\r\n        }else {\r\n            if(callFunc){\r\n                callFunc();\r\n                callFunc = null;\r\n            }\r\n        }\r\n    },\r\n\r\n    _playWin : function (data, callFunc) {\r\n        this._resultData = data;\r\n        this._winCallFunc = callFunc;\r\n        if(!this._winAni){\r\n            this._winAni = cc.instantiate(this.prefab_win);\r\n            this._winAni.parent = this.node;\r\n            var comp = this._winAni.getComponent(dragonBones.ArmatureDisplay);\r\n            comp.addEventListener(dragonBones.EventObject.COMPLETE, this._winEnd, this);\r\n        }\r\n        var designSize = cc.view.getDesignResolutionSize();\r\n        var pos = cc.p(designSize.width/2, designSize.height/2);\r\n        this._winAni.position = cc.p(pos.x, pos.y*1.45);\r\n        this._winAni.active = true;\r\n        this._winAni.getComponent(dragonBones.ArmatureDisplay).playAnimation(this._winAniName, 1);\r\n        GG.audioMgr.playSound(22);\r\n    },\r\n    _winEnd : function () {\r\n        this._getResultComp().showResult(this._resultData);\r\n        this._winAni.runAction(cc.sequence(cc.delayTime(2), cc.callFunc(function () {\r\n            this._winAni.active = false;\r\n            this._getResultComp()._setIsShow(false);\r\n            this.setGrayIsShow(false);\r\n            if(this._winCallFunc){\r\n                this._winCallFunc();\r\n                this._winCallFunc = null;\r\n            }\r\n        }, this)));\r\n    },\r\n\r\n    _clearWin : function () {\r\n        if(this._winAni){\r\n            this._getResultComp()._setIsShow(false);\r\n            this._winAni.stopAllActions();\r\n            this._winAni.active = false;\r\n            this._winCallFunc = null;\r\n        }\r\n    },\r\n\r\n    //======================================失败动画\r\n\r\n    _playLose : function (data, callFunc) {\r\n        this._resultData = data;\r\n        this._loseCallFunc = callFunc;\r\n        if(!this._loseAni){\r\n            this._loseAni = cc.instantiate(this.prefab_lose);\r\n            this._loseAni.parent = this.node;\r\n            var comp = this._loseAni.getComponent(dragonBones.ArmatureDisplay);\r\n            comp.addEventListener(dragonBones.EventObject.COMPLETE, this._loseEnd, this);\r\n        }\r\n        var designSize = cc.view.getDesignResolutionSize();\r\n        var pos = cc.p(designSize.width/2, designSize.height/2);\r\n        this._loseAni.position = cc.p(pos.x, pos.y*1.45);\r\n        this._loseAni.active = true;\r\n        this._loseAni.getComponent(dragonBones.ArmatureDisplay).playAnimation(this._loseAniName, 1);\r\n        GG.audioMgr.playSound(21);\r\n    },\r\n    _loseEnd : function () {\r\n        this._getResultComp().showResult(this._resultData);\r\n\r\n        this._loseAni.runAction(cc.sequence(cc.delayTime(2), cc.callFunc(function () {\r\n            this._loseAni.active = false;\r\n            this._getResultComp()._setIsShow(false);\r\n            this.setGrayIsShow(false);\r\n            if(this._loseCallFunc){\r\n                this._loseCallFunc();\r\n                this._loseCallFunc = null;\r\n            }\r\n        }, this)));\r\n    },\r\n\r\n    _getResultComp : function () {\r\n        if(!this._resultComp){\r\n            var result = cc.instantiate(this.prefab_showResult);\r\n            this.node.addChild(result, 5);\r\n            if(this._winAni) result.position = this._winAni.position;\r\n            if(this._loseAni) result.position = this._loseAni.position;\r\n            this._resultComp = result.getComponent(this._resultCompName);\r\n        }\r\n        return this._resultComp\r\n    },\r\n    _clearLose : function () {\r\n        if(this._loseAni){\r\n            this._getResultComp()._setIsShow(false);\r\n            this._loseAni.stopAllActions();\r\n            this._loseAni.active = false;\r\n            this._loseCallFunc = null;\r\n        }\r\n    },\r\n\r\n    //====================================灰色层\r\n\r\n    setGrayIsShow : function (isShow) {\r\n        if(this.node_grayLayer) this.node_grayLayer.active = isShow;\r\n    },\r\n\r\n    getGrayLayer : function () {\r\n        return this.node_grayLayer\r\n    },\r\n\r\n    //清理所有\r\n    clearAll : function () {\r\n        this.clearBettingAni();\r\n        this.clearStartAni();\r\n        this._clearWin();\r\n        this._clearLose();\r\n        this.setGrayIsShow(false);\r\n    },\r\n\r\n    // called every frame, uncomment this function to activate update callback\r\n    // update: function (dt) {\r\n\r\n    // },\r\n});\r\n"]}
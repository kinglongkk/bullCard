{"version":3,"sources":["assets\\Script\\Views\\Scene_Grab\\Grab_oneTable.js"],"names":["cc","Class","extends","Component","properties","_ownerGold","_areaGold","_goldFrame","_bullType","_multiple","_maxAdaptGold","_curGoldNum","_isWin","num_result","default","type","Integer","displayName","label_multiple","Label","node_goldContainer","Node","label_areaValue","label_ownerValue","label_resultMultiple","onLoad","_init","_ownerFormatStr","_goldOffY","node","height","rate","G_Config_grab","num_goldImgArea","_maxGoldX","width","_maxGoldY","_loseColor","Color","_winColor","color","_goldScale","scale_moveGold","comp_scrollValue","getComponent","setInfo","goldFrame","bullType","multiple","parseInt","clearData","_setMultiple","_clearGoldImg","string","_setOwnerGold","OnClick_table","event","dataObj","G_OBJ","data_grabBetting","tableIndex","getResultType","targetPos","getGoldCenterPos","callFunc","_goldAdd","bind","GG","grabMgr","playMyGoldMove","_addOneGoldImg","otherAddGold","goldInfo","getWorldPos","addGoldValue","goldValue","isMine","addOwnerGold","_addOthersGold","_setAreaGold","goldNum","parent","active","G_TOOL","changeMoney","_changeDownLabel","showOwnerResult","showStr","winValue","startNum","targetNum","label","formatStr","scrollLabel","_scrollCall","str","Math","min","max","isUp","getRandomBool","goldX","getRandomArea","goldY","gold","_getGold","position","p","runAction","moveTo","removeOneGoldImg","children","worldPos","curPos","x","y","_removeGold","_pool","NodePool","goldNode","get","sp","addComponent","Sprite","spriteFrame","scale","goldeNode","stopAllActions","put","golds","i","length","destroy","setTouchEnable","isEnable","on","EventType","TOUCH_START","off","curLabel","isRight","anchorX","parentPos","parentScale","setTableWin","getGrabGold","getLostGold","getLeaveGoldImg"],"mappings":"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","file":"unknown","sourcesContent":["//单个投注区域格子\r\n\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        _ownerGold : 0,\r\n        _areaGold : 0,\r\n        _goldFrame : null,\r\n        _bullType : null,\r\n        _multiple : 1,\r\n        _maxAdaptGold : null,\r\n        _curGoldNum : null,\r\n        _isWin : null,\r\n\r\n        num_result : {\r\n            default : 0,\r\n            type : cc.Integer,\r\n            displayName : '代表的结果值'\r\n        },\r\n        label_multiple : {\r\n            default : null,\r\n            type : cc.Label,\r\n            displayName : '倍数'\r\n        },\r\n        node_goldContainer : {\r\n            default : null,\r\n            type : cc.Node,\r\n            displayName : '金币容器'\r\n        },\r\n        label_areaValue : {\r\n            default : null,\r\n            type : cc.Label,\r\n            displayName : '格子内总金币'\r\n        },\r\n        label_ownerValue : {\r\n            default : null,\r\n            type : cc.Label,\r\n            displayName : '投注值'\r\n        },\r\n        label_resultMultiple : {\r\n            default : null,\r\n            type : cc.Label,\r\n            displayName : '结果倍数'\r\n        }\r\n    },\r\n\r\n    // use this for initialization\r\n    onLoad: function () {\r\n        this._init();\r\n    },\r\n\r\n    _init : function () {\r\n        this._ownerFormatStr = '<b>%s</b>';\r\n        //this._areaFormatStr = '<b>%s</b>';\r\n        //this._multipleFormatStr = '<b>%s</b>';\r\n        //this._areaFormatStr = '';\r\n        //this._multipleFormatStr = '';\r\n        //this.node_goldContainer.x += 200;\r\n        this._goldOffY = -this.node.height * 0.15;\r\n        var rate = G_Config_grab.num_goldImgArea;\r\n        // this._minGoldX = -this.node.width*rate*1.3;\r\n        this._maxGoldX = this.node.width*rate*1.3;\r\n        // this._minGoldY = this.node.height*rate*0.35;\r\n        this._maxGoldY = - this.node.height*rate*0.35\r\n        this._maxAdaptGold = 50;\r\n        this._curGoldNum = 0;\r\n        this._loseColor = new cc.Color(253, 41,31); //失败的颜色\r\n        this._winColor = this.label_ownerValue.node.color, //胜利的颜色\r\n\r\n\r\n        this._goldScale = G_Config_grab.scale_moveGold;\r\n        this.comp_scrollValue = this.getComponent('Obj_scrollValue');\r\n    },\r\n\r\n    setInfo : function (goldFrame, bullType, multiple) {\r\n        this._goldFrame = goldFrame;\r\n        this._bullType = bullType;\r\n        this._multiple = parseInt(multiple);\r\n    },\r\n\r\n    clearData : function () {\r\n        this._ownerGold = 0;\r\n        this._areaGold = 0;\r\n        this._isWin = false;\r\n\r\n        this._setMultiple();\r\n        this._clearGoldImg();\r\n        this.label_areaValue.string = '';\r\n        this.label_ownerValue.node.color = this._winColor;//胜利颜色\r\n        this._setOwnerGold(0);\r\n    },\r\n\r\n    OnClick_table : function (event) {\r\n        var dataObj = G_OBJ.data_grabBetting();\r\n        dataObj.tableIndex = this.getResultType();\r\n        dataObj.targetPos = this.getGoldCenterPos();\r\n        dataObj.callFunc = this._goldAdd.bind(this);\r\n\r\n        GG.grabMgr.playMyGoldMove(dataObj);\r\n    },\r\n    _goldAdd : function () {\r\n        this._addOneGoldImg();\r\n    },\r\n\r\n    otherAddGold : function (goldInfo) {\r\n        goldInfo.targetPos = this.getWorldPos();\r\n        goldInfo.callFunc = this._goldAdd.bind(this);\r\n\r\n        var addGoldValue = goldInfo.goldValue;\r\n        if(goldInfo.isMine){\r\n            this.addOwnerGold(addGoldValue);//自己押注\r\n        }else this._addOthersGold(addGoldValue);//他人押注\r\n        return goldInfo\r\n    },\r\n\r\n    //自己押注值\r\n    addOwnerGold : function (goldValue) {\r\n        if(!goldValue) return;\r\n        this._ownerGold += goldValue;\r\n        this._setOwnerGold(this._ownerGold);\r\n        this._addOthersGold(goldValue);\r\n    },\r\n    //他人押注值\r\n    _addOthersGold : function (goldValue) {\r\n        if(!goldValue) goldValue = 0;\r\n        this._areaGold += goldValue;\r\n        this._setAreaGold(this._areaGold);\r\n    },\r\n\r\n    _setOwnerGold : function (goldNum) {\r\n        if(!goldNum){\r\n            this.label_ownerValue.node.parent.active = false;\r\n        }else{\r\n            this.label_ownerValue.node.parent.active = true;\r\n            //this.label_ownerValue.string = G_TOOL.formatStr(this._ownerFormatStr, G_TOOL.changeMoney(goldNum));\r\n            this.label_ownerValue.string = G_TOOL.changeMoney(goldNum);\r\n            //this.label_ownerValue.string = G_TOOL.changeMoney(goldNum);\r\n            this.label_resultMultiple.string = '';\r\n            this._changeDownLabel(this.label_ownerValue.node, false);\r\n        }\r\n    },\r\n    _setAreaGold : function (goldNum) {\r\n        if(!goldNum) this.label_areaValue.string = '';\r\n        else this.label_areaValue.string = G_TOOL.changeMoney(goldNum);\r\n        //else this.label_areaValue.string = G_TOOL.formatStr(this._areaFormatStr, G_TOOL.changeMoney(goldNum));\r\n    },\r\n\r\n    showOwnerResult : function () {\r\n        if(this._ownerGold < 1) return;\r\n        var showStr = G_TOOL.changeMoney(this._ownerGold);\r\n        this._changeDownLabel(this.label_ownerValue.node, this._isWin);\r\n        if(!this._isWin) {\r\n            showStr = '-'+showStr;\r\n            this.label_resultMultiple.string = '';\r\n            this.label_ownerValue.string = showStr;\r\n            this.label_ownerValue.node.color = this._loseColor;//失败颜色\r\n        } else{\r\n            //胜利\r\n            this.label_resultMultiple.string = 'X'+this._multiple;\r\n            var winValue = this._ownerGold*this._multiple;\r\n            var dataObj = {\r\n                startNum : 0,\r\n                targetNum : winValue,\r\n                label : this.label_ownerValue,\r\n                formatStr : '',\r\n                callFunc : function () {\r\n                    this.label_ownerValue.string = G_TOOL.changeMoney(winValue);\r\n                    //this.label_ownerValue.node.color = this._winColor;//胜利颜色\r\n                }.bind(this)\r\n            }\r\n            this.comp_scrollValue.scrollLabel(dataObj);\r\n        }\r\n        //this.label_ownerValue.string = G_TOOL.formatStr(this._ownerFormatStr, showStr);\r\n    },\r\n    //滚动金币结束\r\n    _scrollCall : function () {\r\n\r\n    },\r\n    _setMultiple : function () {\r\n        var str = this._multiple + '倍'\r\n        this.label_multiple.string = str;\r\n    },\r\n    _addOneGoldImg : function () {\r\n        if(!this._goldFrame) return;\r\n\r\n        var rate = this._curGoldNum/this._maxAdaptGold;\r\n        rate = Math.min(Math.max(rate, 0.55), 1);\r\n        var isUp = G_TOOL.getRandomBool() ? 1 : -1;\r\n        var goldX = G_TOOL.getRandomArea(0, this._maxGoldX*rate) * isUp;\r\n        isUp = G_TOOL.getRandomBool() ? 1 : -1;\r\n        var goldY = G_TOOL.getRandomArea(0, this._maxGoldY*rate) * isUp;\r\n        var gold = this._getGold();\r\n        gold.position = cc.p(0,this._goldOffY);\r\n        gold.runAction(cc.moveTo(0.35,goldX,this._goldOffY+goldY));\r\n        this._curGoldNum += 1;\r\n    },\r\n\r\n    removeOneGoldImg : function () {\r\n        var gold = this.node_goldContainer.children[0];\r\n        if(gold){\r\n            var worldPos = this.getWorldPos();\r\n            var curPos = cc.p(worldPos.x + gold.x, worldPos.y + gold.y);\r\n            this._removeGold(gold);\r\n            this._curGoldNum -= 1;\r\n            return curPos\r\n        }\r\n        return null;\r\n    },\r\n\r\n    _getGold : function () {\r\n        if(!this._pool) this._pool = new cc.NodePool('Grab_oneTable'+this.num_result);\r\n\r\n        var goldNode = this._pool.get();\r\n        if(!goldNode){\r\n            goldNode = new cc.Node();\r\n            var sp = goldNode.addComponent(cc.Sprite);\r\n            sp.spriteFrame = this._goldFrame;\r\n        }\r\n        goldNode.parent = this.node_goldContainer;\r\n        goldNode.scale = (1/this.node.parent.scale)*this._goldScale;\r\n        goldNode.active = true;\r\n        return goldNode;\r\n    },\r\n    _removeGold : function (goldeNode) {\r\n        goldeNode.stopAllActions();\r\n        goldeNode.active = false;\r\n        this._pool.put(goldeNode);\r\n    },\r\n\r\n    _clearGoldImg : function () {\r\n        var golds = this.node_goldContainer.children;\r\n        for(var i = 0; i < golds.length; i ++){\r\n            golds[i].destroy();\r\n        }\r\n        this._curGoldNum = 0;\r\n    },\r\n\r\n    setTouchEnable : function (isEnable) {\r\n        if(isEnable){\r\n            this.node.on(cc.Node.EventType.TOUCH_START, this.OnClick_table, this);\r\n        }else this.node.off(cc.Node.EventType.TOUCH_START, this.OnClick_table, this);\r\n    },\r\n    //设置底部label随着倍数是否显示而变化位置\r\n    _changeDownLabel : function (curLabel, isRight) {\r\n        if(isRight){\r\n            curLabel.anchorX = 1;\r\n            curLabel.x = curLabel.parent.width*0.47;\r\n        }else{\r\n            curLabel.anchorX = 0.5;\r\n            curLabel.x = 0;\r\n        }\r\n    },\r\n\r\n    getWorldPos : function () {\r\n        var parentPos = this.node.parent.position;\r\n        var parentScale = this.node.parent.scale;\r\n        return cc.p(parentPos.x + this.node.x*parentScale, parentPos.y+this.node.y*parentScale-this.node.height*0.4);//赢钱旗帜位置\r\n    },\r\n    getGoldCenterPos : function () {\r\n        var parentPos = this.node.parent.position;\r\n        var parentScale = this.node.parent.scale;\r\n        return cc.p(parentPos.x + this.node.x*parentScale, this._goldOffY+parentPos.y+this.node.y*parentScale-this.node.height*0.2);\r\n    },\r\n\r\n    getResultType : function () {\r\n        return this.num_result\r\n    },\r\n    setTableWin : function () {\r\n        this._isWin = true;\r\n    },\r\n\r\n    getGrabGold : function () {\r\n        return this._ownerGold * this._multiple\r\n    },\r\n    getLostGold : function () {\r\n        return this._ownerGold\r\n    },\r\n    //获取剩余没有被移除的金币数量\r\n    getLeaveGoldImg : function () {\r\n        return this._curGoldNum\r\n    },\r\n\r\n    // called every frame, uncomment this function to activate update callback\r\n    // update: function (dt) {\r\n\r\n    // },\r\n});\r\n"]}
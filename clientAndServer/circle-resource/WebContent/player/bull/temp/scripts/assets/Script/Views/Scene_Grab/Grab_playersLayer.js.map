{"version":3,"sources":["assets\\Script\\Views\\Scene_Grab\\Grab_playersLayer.js"],"names":["cc","Class","extends","Component","properties","_playerNum","_dict_playerBlocks","_dict_playerByID","node_owner","Node","node_system","node_playerContainer","default","type","displayName","prefab_playerBlock","Prefab","comp_seatsContainer","require","onLoad","_init","_playerCompName","setStartInfo","seatInfoList","selfInfo","systemInfo","dictPlayer","selfID","GG","getPlayer","getPlayerID","listLen","length","seatIndex","onePlayer","content","playerComp","i","playerId","attrName","_addOnePlayer","setPlayerData","getMyselfComp","bindSeatMyself","siteNum","getSeatsNum","_removeOnePlayer","isNaN","showOwner","showSystem","setSelfInfo","grabMgr","initButtonInfo","enterOnePlayer","playerData","reg","test","_hidePlayer","moneyChoose","getComponent","clearData","targetIndex","playerID","siteIndex","player","instantiate","parent","size","G_TOOL","adaptSize","width","height","position","addOnePlayer","getIsShow","hidePlayer","onePlayerLeave","_clearAllPlayer","setWinTableResult","resultList","dataList","isMoveGold","key","_checkResult","getAllGrabTable","getWorldPos","playResultGoldMove","recordDict","getIdleBetting","getIdleBettingPos","getTableContainer","getLeaveGoldImages","goldNum","targetPos","getSystemComp","tableIndex","dataObj","G_OBJ","data_flyGold_tableToPlayer","push","audioMgr","playSound","result","index","showAllGoldResult","isShow","isOk","showResultGold","setMyselfMoney","addCoin","money","setResultInfo","getCompByIndex","getPlayerByID","getPokerPos","getPokerPoint"],"mappings":"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","file":"unknown","sourcesContent":["//管理所有玩家的容器\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        _playerNum : null,                                                               //场上的玩家数量\r\n        _dict_playerBlocks : null,\r\n        _dict_playerByID : null,\r\n\r\n        node_owner : cc.Node,\r\n        node_system : cc.Node,\r\n        node_playerContainer : {                                                          //所有玩家的容器，庄家和自己除外\r\n            default : null,\r\n            type : cc.Node,\r\n            displayName : '所有玩家容器'\r\n        },\r\n        prefab_playerBlock : cc.Prefab,\r\n        comp_seatsContainer : {\r\n            default : null,\r\n            type : require('Obj_seatsContainer'),\r\n            displayName : '座位容器'\r\n        },\r\n    },\r\n\r\n    // use this for initialization\r\n    onLoad: function () {\r\n        this._init();\r\n    },\r\n    _init : function () {\r\n        this._playerCompName = 'Grab_playerBlock';\r\n        this._dict_playerBlocks = {};\r\n        this._dict_playerByID = {};\r\n        this._playerNum = 0;\r\n    },\r\n\r\n    //设置当前所有座位玩家的信息\r\n    setStartInfo : function (seatInfoList, selfInfo, systemInfo) {\r\n        var dictPlayer = {};\r\n        var selfID = GG.getPlayer().getPlayerID();\r\n        var listLen = seatInfoList.length, seatIndex, onePlayer, content, playerComp;\r\n        //座位是从1开始，0是自己玩家的信息\r\n        for(var i = 0; i < listLen; i ++){\r\n            onePlayer = seatInfoList[i];\r\n            seatIndex = onePlayer['seatIndex'];\r\n            content = onePlayer['player'];\r\n            content.seatIndex = seatIndex;\r\n            dictPlayer[seatIndex] = content;\r\n        }\r\n        //根据信息控制位置上玩家的显隐\r\n        //显示有数据的玩家\r\n        for(var seatIndex in dictPlayer){\r\n            content = dictPlayer[seatIndex];\r\n            if (content) this._dict_playerByID[content.playerId] = seatIndex;          //获取玩家id\r\n            //从列表中获取属于自己的信息\r\n            if(content && content.playerId == selfID) {\r\n                for(var attrName in content){\r\n                    if (attrName == 'seatIndex' && content[attrName] == 0)  continue;\r\n                    selfInfo[attrName] = content[attrName];\r\n                }\r\n            }\r\n            //座位号从1开始\r\n            if(seatIndex < 1) continue;\r\n            //有玩家数据\r\n            playerComp = this._addOnePlayer(seatIndex);\r\n            if(playerComp) playerComp.setPlayerData(content);\r\n            if(content && content.playerId == selfID) this.getMyselfComp().bindSeatMyself(playerComp);\r\n        }\r\n        //隐藏没有数据的位置\r\n        var siteNum = this.comp_seatsContainer.getSeatsNum();\r\n        for(var i = 0; i < siteNum; i ++){\r\n            seatIndex = i+1;\r\n            if(!dictPlayer[seatIndex]) this._removeOnePlayer(seatIndex);\r\n        }\r\n\r\n        //if(!GG.grabMgr.checkMyselfInfo(seatInfoList)) return;\r\n        if(!isNaN(selfInfo.playerId) && selfInfo.playerId > 0)  this.showOwner(selfInfo);\r\n        this.showSystem(systemInfo);\r\n    },\r\n\r\n    showOwner : function (selfInfo) {\r\n        this.getMyselfComp().setPlayerData(selfInfo);\r\n        this.getMyselfComp().setSelfInfo(selfInfo);\r\n\r\n        GG.grabMgr.initButtonInfo();\r\n    },\r\n\r\n    //有个玩家中途插入\r\n    enterOnePlayer : function (seatIndex, playerData) {\r\n        var reg = /^\\+?[1-9][0-9]*$/;\r\n        if(reg.test(seatIndex)){\r\n            //是正确的桌子索引\r\n            playerData.seatIndex = seatIndex;\r\n            this._hidePlayer(seatIndex, playerData.playerId);\r\n            var playerComp = this._addOnePlayer(seatIndex);\r\n            if(playerComp) playerComp.setPlayerData(playerData);\r\n        }\r\n    },\r\n\r\n    showSystem : function (systemInfo) {\r\n        systemInfo.moneyChoose = 0;\r\n        this.node_system.getComponent(this._playerCompName).setPlayerData(systemInfo);\r\n    },\r\n\r\n    clearData : function () {\r\n        //var block;\r\n        //for(var siteIndex in this._dict_playerBlocks){\r\n        //    block = this._dict_playerBlocks[siteIndex];\r\n        //    if(block) block.clearData();\r\n        //}\r\n        //this.getMyselfComp().clearData();\r\n    },\r\n\r\n    //删除重复的玩家，结束本局时候，重复进出房间会出现多个同样玩家\r\n    _hidePlayer : function (targetIndex, playerID) {\r\n        var playerComp;\r\n        for(var seatIndex in this._dict_playerBlocks){\r\n            playerComp = this._dict_playerBlocks[seatIndex];\r\n            if(seatIndex == targetIndex){\r\n                //找到位置\r\n                //if(playerComp) playerComp.setPlayerData(playerData);\r\n            }else{\r\n                if(playerComp && playerComp.getPlayerID() == playerID){\r\n                    this._removeOnePlayer(seatIndex);\r\n                }\r\n            }\r\n        }\r\n    },\r\n    //增加一个上场玩家\r\n    _addOnePlayer : function (siteIndex) {\r\n        var playerComp = this._dict_playerBlocks[siteIndex];\r\n        if (!playerComp) {\r\n            var  player = cc.instantiate(this.prefab_playerBlock);\r\n            player.parent = this.node_playerContainer;\r\n            var size = G_TOOL.adaptSize(player.width, player.height);\r\n            player.width = size.width;\r\n            player.height = size.height;\r\n            player.position = this.comp_seatsContainer.addOnePlayer(siteIndex);\r\n            var playerComp = player.getComponent(this._playerCompName);\r\n            this._dict_playerBlocks[siteIndex] = playerComp;\r\n        }else{\r\n            this.comp_seatsContainer.addOnePlayer(siteIndex);\r\n        }\r\n        this._playerNum += 1;\r\n        return playerComp;\r\n    },\r\n    //一个玩家离场\r\n    _removeOnePlayer : function (siteIndex) {\r\n        var playerComp = this._dict_playerBlocks[siteIndex];\r\n        if(!playerComp || !playerComp.getIsShow()) return\r\n        playerComp.hidePlayer();\r\n        this.comp_seatsContainer.onePlayerLeave(siteIndex);\r\n        this._playerNum -= 1;\r\n    },\r\n    //清理所有\r\n    _clearAllPlayer : function () {\r\n        for(var seatIndex in this._dict_playerBlocks){\r\n            this._removeOnePlayer(seatIndex);\r\n        }\r\n    },\r\n\r\n    setWinTableResult : function (resultList) {\r\n        //其他座位上玩家的金币\r\n        var playerComp, dataList, isMoveGold = false;\r\n        for(var key in this._dict_playerBlocks){\r\n            playerComp = this._dict_playerBlocks[key];\r\n            if(!playerComp.getIsShow() || playerComp.getPlayerID() == GG.getPlayerID()) continue;\r\n            dataList = this._checkResult(resultList, playerComp.getAllGrabTable(), playerComp.getWorldPos());\r\n        }\r\n        if(dataList && dataList.length > 0) isMoveGold = true;\r\n        GG.grabMgr.playResultGoldMove(dataList);\r\n        //玩家自己的金币\r\n        playerComp = this.getMyselfComp();\r\n        recordDict = playerComp.getAllGrabTable();\r\n        if(recordDict){\r\n            dataList = this._checkResult(resultList, recordDict, playerComp.getWorldPos());\r\n            if(dataList && dataList.length > 0) isMoveGold = true;\r\n            GG.grabMgr.playResultGoldMove(dataList);\r\n        }\r\n        //吃瓜群众的金币\r\n        var recordDict = GG.grabMgr.getIdleBetting();\r\n        if(recordDict){\r\n            dataList = this._checkResult(resultList, recordDict, GG.grabMgr.getIdleBettingPos())\r\n            if(dataList && dataList.length > 0) isMoveGold = true;\r\n            GG.grabMgr.playResultGoldMove(dataList);\r\n        }\r\n        //剩余的金币飞向系统\r\n        var recordDict = GG.grabMgr.getTableContainer().getLeaveGoldImages();\r\n        if(recordDict){\r\n            //var curList = this._checkResult(resultList, recordDict, this.getSystemComp().getWorldPos())\r\n            dataList = [];\r\n            var goldNum, targetPos = this.getSystemComp().getWorldPos();\r\n            for(var tableIndex in recordDict){\r\n                goldNum = recordDict[tableIndex];\r\n                if(goldNum){\r\n                    var dataObj = G_OBJ.data_flyGold_tableToPlayer();\r\n                    dataObj.goldNum = goldNum;\r\n                    dataObj.tableIndex = tableIndex;\r\n                    dataObj.targetPos = targetPos;\r\n                    dataList.push(dataObj);\r\n                }\r\n            }\r\n            if(dataList && dataList.length > 0) isMoveGold = true;\r\n            GG.grabMgr.playResultGoldMove(dataList);\r\n        }\r\n        if(isMoveGold) GG.audioMgr.playSound(18);\r\n    },\r\n    _checkResult : function (resultList, recordDict, targetPos) {\r\n        var result, goldNum, dataList = [];\r\n        for(var index in resultList){\r\n            result = resultList[index];\r\n            goldNum = recordDict[result];\r\n            if(goldNum){\r\n                var dataObj = G_OBJ.data_flyGold_tableToPlayer();\r\n                dataObj.goldNum = goldNum;\r\n                dataObj.tableIndex = result;\r\n                dataObj.targetPos = targetPos;\r\n                dataList.push(dataObj);\r\n            }\r\n        }\r\n        return dataList\r\n    },\r\n\r\n    //显示所有玩家对象的头像上的金币浮动信息\r\n    showAllGoldResult : function () {\r\n        var player, isShow, isOk;\r\n        for(var seatIndex in this._dict_playerBlocks){\r\n            player = this._dict_playerBlocks[seatIndex];\r\n            if(!player.getIsShow()) continue;\r\n            isOk = player.showResultGold();\r\n            if(!isShow) isShow = isOk;\r\n        }\r\n\r\n        isOk = this.getMyselfComp().showResultGold();\r\n        if(!isShow) isShow = isOk;\r\n        return isShow\r\n    },\r\n\r\n    setMyselfMoney : function (addCoin, money) {\r\n        this.getMyselfComp().setResultInfo(addCoin, money);\r\n    },\r\n    //获取在座位上的玩家脚本\r\n    getCompByIndex : function (siteIndex) {\r\n        return this._dict_playerBlocks[siteIndex];\r\n    },\r\n    getPlayerByID : function (playerID) {\r\n        return this.getCompByIndex(this._dict_playerByID[playerID]);\r\n    },\r\n    //获取玩家自己\r\n    getMyselfComp : function () {\r\n        return this.node_owner.getComponent(this._playerCompName);\r\n    },\r\n    getPokerPos : function () {\r\n        return this.node_system.getComponent(this._playerCompName).getPokerPoint();\r\n    },\r\n    getSystemComp : function () {\r\n        return this.node_system.getComponent(this._playerCompName)\r\n    },\r\n\r\n    // called every frame, uncomment this function to activate update callback\r\n    // update: function (dt) {\r\n\r\n    // },\r\n});\r\n"]}